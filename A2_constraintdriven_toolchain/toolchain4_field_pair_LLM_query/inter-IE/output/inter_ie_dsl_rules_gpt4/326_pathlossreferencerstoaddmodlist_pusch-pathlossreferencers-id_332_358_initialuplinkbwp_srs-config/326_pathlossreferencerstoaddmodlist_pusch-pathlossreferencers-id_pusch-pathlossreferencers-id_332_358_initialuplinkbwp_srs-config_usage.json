{
  "dsl_rule": "IMPLIES(EQ(field1, 'codebook'), EQ(field2, 'codebook'))",
  "constraint_type": "ValueDependency",
  "has_valid_rule": true,
  "field_ids": {
    "field1_all": [
      326
    ],
    "field2_all": [
      338
    ],
    "actual_pairs": [
      [
        [
          326
        ],
        [
          338
        ]
      ]
    ]
  },
  "predicate": "If pusch-pathlossreferencers-id is set to 'codebook', then usage must also be set to 'codebook'.",
  "preconditions": [],
  "advisory": false,
  "citations": [
    {
      "doc": "3GPP TS 38.213"
    }
  ],
  "examples": {
    "valid": [
      "pusch-pathlossreferencers-id: 'codebook', usage: 'codebook'"
    ],
    "invalid": [
      "pusch-pathlossreferencers-id: 'codebook', usage: 'nonCodebook'"
    ]
  },
  "notes": "The evidence clearly states that if the UE is provided two SRS resource sets with usage set to 'codebook', then the UE determines the RS resource indexes from the values of PUSCH-PathlossReferenceRS-Id that are mapped to the SRI field values.",
  "version_tags": [
    "r16",
    "r17"
  ],
  "meta": {
    "ie1_name": "326_pathlossreferencerstoaddmodlist_pusch-pathlossreferencers-id",
    "field1": "pusch-pathlossreferencers-id",
    "ie2_name": "332_358_initialuplinkbwp_srs-config",
    "field2": "usage",
    "is_inter_ie": true,
    "evidence_info": {
      "used_count": 6,
      "original_count": 6,
      "sampled": false
    },
    "all_sources": [
      "ts_138213v170100p_mathpix.md"
    ],
    "all_sections": [
      "7.1.1"
    ],
    "best_confidence": "HIGH",
    "evidence": "- If the UE is configured with a number of RS resource indexes, up to the value of maxNrofPUSCHPathlossReferenceRSs, and a respective set of RS configurations for the number of RS resource indexes by PUSCH-PathlossReferenceRS, the set of RS resource indexes can include one or both of a set of SS/PBCH block indexes, each provided by ssb-Index when a value of a corresponding pusch-PathlossReferenceRS-Id maps to a SS/PBCH block index, and a set of CSI-RS resource indexes, each provided by csi-RS-Index when a value of a corresponding pusch-PathlossReferenceRS-Id maps to a CSI-RS resource index. The UE identifies a RS resource index \\( q_{d} \\) in the set of RS resource indexes to correspond either to a SS/PBCH block index or to a CSI-RS resource index as provided by pusch-PathlossReferenceRS-Id in PUSCHPathlossReferenceRS - If the PUSCH transmission is scheduled by a RAR UL grant as described in clause 8.3, or for a PUSCH transmission for Type-2 random access procedure as described in clause 8.1A, the UE uses the same RS resource index \\( q_{d} \\) as for a corresponding PRACH transmission - If the UE is provided SRI-PUSCH-PowerControl and more than one values of PUSCH-PathlossReferenceRS-Id, the UE obtains a mapping from sri-PUSCH-PowerControlld in SRI-PUSCHPowerControl between a set of values for the SRI field, or for first and second SRI fields if the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook', or values for a first SRI field and values associated with a second SRI field value corresponding to Tables 7.3.1.1.2-28/29/30/31 of [5, TS 38.212] for a same number of layers as indicated by the first SRI field value if the UE is provided two SRS resource sets in srsResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'nonCodebook', in a DCI format scheduling the PUSCH transmission and a set of PUSCH-PathlossReferenceRS-Id values and determines the RS resource index \\( q_{d} \\), or respective first and second RS resource indexes \\( q_{d} \\), from the value of PUSCH-PathlossReferenceRS-Id that is mapped to the SRI field value, or from the values of PUSCH-PathlossReferenceRS-Id that are mapped to respective first and second SRI field values if the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook', or from the values of PUSCH-PathlossReferenceRS-Id that are mapped to respective\n---\n- If the UE is provided SRI-PUSCH-PowerControl and more than one values of PUSCH-PathlossReferenceRS-Id, the UE obtains a mapping from sri-PUSCH-PowerControlld in SRI-PUSCHPowerControl between a set of values for the SRI field, or for first and second SRI fields if the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook', or values for a first SRI field and values associated with a second SRI field value corresponding to Tables 7.3.1.1.2-28/29/30/31 of [5, TS 38.212] for a same number of layers as indicated by the first SRI field value if the UE is provided two SRS resource sets in srsResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'nonCodebook', in a DCI format scheduling the PUSCH transmission and a set of PUSCH-PathlossReferenceRS-Id values and determines the RS resource index \\( q_{d} \\), or respective first and second RS resource indexes \\( q_{d} \\), from the value of PUSCH-PathlossReferenceRS-Id that is mapped to the SRI field value, or from the values of PUSCH-PathlossReferenceRS-Id that are mapped to respective first and second SRI field values if the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook', or from the values of PUSCH-PathlossReferenceRS-Id that are mapped to respective\n---\n- For a PUSCH transmission configured by ConfiguredGrantConfig, if rrc-ConfiguredUplinkGrant is included in ConfiguredGrantConfig, a RS resource index \\( q_{d} \\) is provided by a value of pathlossReferenceIndex included in rrc-ConfiguredUplinkGrant where the RS resource is either on serving cell \\( c \\) or, if provided, on a serving cell indicated by a value of pathlossReferenceLinking. If the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook' or 'nonCodebook' and for configured grant Type 1 PUSCH, first and second RS resource indexes \\( q_{d} \\) are provided by respective values of pathlossReferenceIndex and pathlossReferenceIndex 2 in rrcConfiguredUplinkGrant. - For a PUSCH transmission configured by ConfiguredGrantConfig that does not include rrcConfiguredUplinkGrant, the UE determines a RS resource index \\( q_{d} \\) from a value of PUSCH-PathlossReferenceRS-Id that is mapped to a SRI field value in a DCI format activating the PUSCH transmission.\n---\n- If the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook' and the DCI format activating the PUSCH transmission includes two SRI fields, the UE determines first and second RS resource indexes \\( q_{d} \\) from respective first and second values of PUSCH-PathlossReferenceRS-Id that are mapped to the first and second SRI values corresponding to each SRS resource set with usage set to 'codebook', respectively. - If the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'nonCodebook' and the DCI format activating the PUSCH transmission includes two SRI fields, the UE determines first and second RS resource indexes \\( q_{d} \\) from respective first and second values of PUSCH-PathlossReferenceRS-Id that are mapped to the first SRI value corresponding to the first SRS resource set with usage set to 'nonCodebook', and the value, associated with the second SRI field value corresponding to Tables 7.3.1.1.2-28/29/30/31 of [5, TS 38.212] for a same number of layers as indicated by the first SRI field value, corresponding to the second SRS resource set with usage set to 'nonCodebook'.\n---\n- If the UE is provided enablePL-RS-UpdateForPUSCH-SRS, a mapping between sri-PUSCH-PowerControlld and PUSCH-PathlossReferenceRS-Id values can be updated by a MAC CE as described in [11, TS 38.321] - For a PUSCH transmission scheduled by a DCI format that does not include an SRI field, or for a PUSCH transmission configured by ConfiguredGrantConfig and activated, as described in clause 10.2, by a DCI format that does not include an SRI field, the UE determines a RS resource index \\( q_{d} \\) from the PUSCH-PathlossReferenceRS-Id mapped to sri-PUSCH-PowerControlld \\( =0 \\). If the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook' or 'nonCodebook', the UE determines first and second RS resource indexes \\( q_{d} \\) from respective PUSCH-PathlossReferenceRS-Id mapped to sri-PUSCH-PowerControlld \\( =0 \\) of sri-PUSCHMappingToAddModList and sri-PUSCH-PowerControlld \\( =0 \\) of sri-PUSCH-MappingToAddModList2, respectively.\n---\n- For a PUSCH transmission scheduled by a DCI format that does not include an SRI field, or for a PUSCH transmission configured by ConfiguredGrantConfig and activated, as described in clause 10.2, by a DCI format that does not include an SRI field, the UE determines a RS resource index \\( q_{d} \\) from the PUSCH-PathlossReferenceRS-Id mapped to sri-PUSCH-PowerControlld \\( =0 \\). If the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook' or 'nonCodebook', the UE determines first and second RS resource indexes \\( q_{d} \\) from respective PUSCH-PathlossReferenceRS-Id mapped to sri-PUSCH-PowerControlld \\( =0 \\) of sri-PUSCHMappingToAddModList and sri-PUSCH-PowerControlld \\( =0 \\) of sri-PUSCH-MappingToAddModList2, respectively.",
    "generated_at": "2025-12-11T10:09:35.336381",
    "model": "gpt-4",
    "full_api_response": {
      "result": "DSL",
      "type": "ValueDependency",
      "dsl": "IMPLIES(EQ(field1, 'codebook'), EQ(field2, 'codebook'))",
      "preconditions": [],
      "predicate": "If pusch-pathlossreferencers-id is set to 'codebook', then usage must also be set to 'codebook'.",
      "advisory": false,
      "examples": {
        "valid": [
          "pusch-pathlossreferencers-id: 'codebook', usage: 'codebook'"
        ],
        "invalid": [
          "pusch-pathlossreferencers-id: 'codebook', usage: 'nonCodebook'"
        ]
      },
      "notes": "The evidence clearly states that if the UE is provided two SRS resource sets with usage set to 'codebook', then the UE determines the RS resource indexes from the values of PUSCH-PathlossReferenceRS-Id that are mapped to the SRI field values.",
      "version_tags": [
        "r16",
        "r17"
      ]
    }
  }
}