{
  "dsl_rule": "MATCH(controlresourcesetid, controlresourcesetid)",
  "constraint_type": "CrossReference",
  "has_valid_rule": true,
  "field_ids": {
    "field1_all": [
      80,
      89,
      145,
      154,
      210,
      219
    ],
    "field2_all": [
      80,
      89,
      145,
      154,
      210,
      219
    ],
    "actual_pairs": [
      [
        [
          154,
          219
        ],
        [
          80,
          89,
          145,
          154,
          210,
          219
        ]
      ],
      [
        [
          80,
          89,
          145,
          154,
          210,
          219
        ],
        [
          89,
          154
        ]
      ]
    ]
  },
  "predicate": "The controlResourceSetId in pdcch-configcommon must match the controlResourceSetId in pdcch-configcommon_commonsearchspacelist.",
  "preconditions": [],
  "advisory": false,
  "citations": [
    {
      "doc": "3GPP TS 38.213"
    },
    {
      "doc": "3GPP TS 38.214"
    },
    {
      "doc": "3GPP TS 38.331"
    },
    {
      "doc": "3GPP TS 38.321"
    },
    {
      "doc": "3GPP TS 38.211"
    }
  ],
  "examples": {
    "valid": [
      "controlresourcesetid in pdcch-configcommon = 5, controlresourcesetid in pdcch-configcommon_commonsearchspacelist = 5"
    ],
    "invalid": [
      "controlresourcesetid in pdcch-configcommon = 3, controlresourcesetid in pdcch-configcommon_commonsearchspacelist = 4"
    ]
  },
  "notes": "Evidence #1 and #2 indicate an association between search space sets and CORESETs by controlResourceSetId, implying a cross-reference requirement.",
  "version_tags": [
    "r16",
    "r17"
  ],
  "meta": {
    "ie1_name": "pdcch-configcommon",
    "field1": "controlresourcesetid",
    "ie2_name": "pdcch-configcommon_commonsearchspacelist",
    "field2": "controlresourcesetid",
    "is_inter_ie": true,
    "evidence_info": {
      "used_count": 70,
      "original_count": 268,
      "sampled": true
    },
    "all_sources": [
      "ts_138214v170100p_mathpix.md",
      "ts_138213v170100p_mathpix.md",
      "ts_138211v180200p_mathpix.md",
      "ts_138331v170000p_mathpix.md",
      "ts_138321v180200p_mathpix.md"
    ],
    "all_sections": [
      "5.1.2.2",
      "6.2.2",
      "6.1.3.15",
      "5.3",
      "7.4",
      "9.2.5.4",
      "7.3.2.2",
      "5.1.4.1",
      "10.1",
      "8.2",
      "5.1.5",
      "11.4",
      "4.3",
      "6.1",
      "9.3",
      "5.2.1.5.1",
      "6.2.1"
    ],
    "best_confidence": "HIGH",
    "evidence": "- an association between the search space set \\( s \\) and a CORESET \\( p \\) by controlResourceSetld or by controlResourceSetld-v1610\n---\n- an association between the search space set \\( s \\) and a CORESET \\( p \\) by controlResourceSetld or by controlResourceSetld-v1610 - a PDCCH monitoring periodicity of \\( k_{s} \\) slots and a PDCCH monitoring offset of \\( o_{s} \\) slots, by monitoringSlotPeriodicityAndOffset or by monitoringSlotPeriodicityAndOffset-r17 - a PDCCH monitoring pattern within a slot, indicating first symbol(s) of the CORESET for PDCCH monitoring within each slot where the UE monitors PDCCH, by monitoringSymbols WithinSlot\n---\nThe UE may assume that the DM-RS antenna port associated with PDCCH receptions in the CORESET configured by pdcch-ConfigSIBI in MIB, the DM-RS antenna port associated with corresponding PDSCH receptions, and the corresponding SS/PBCH block are quasi co-located with respect to average gain, quasi co-location 'type A' and 'typeD' properties, when applicable [6, TS 38.214], if the UE is not provided a TCI state indicating quasi co-location information of the DM-RS antenna port for PDCCH reception in the CORESET. The value for the DM-RS scrambling sequence initialization is the cell ID. For operation without shared spectrum channel access in FR1 and FR2-1, a SCS is provided by subCarrierSpacingCommon in MIB. For operation with shared spectrum channel access in FR1 and for operation in FR2-2, a SCS is same as the SCS of a corresponding SS/PBCH block.\n---\nIf a UE is provided two TCI states indicating quasi co-location information of the DM-RS antenna port for PDCCH reception in a CORESET associated with a Type3-PDCCH CSS set, the UE may assume the quasi co-location information indicated in both of the two TCI states for the PDCCH reception in the CORESET.  For each CORESET in a DL BWP of a serving cell, a respective frequencyDomainResources provides a bitmap\n---\nFor each CORESET in a DL BWP of a serving cell, a respective frequencyDomainResources provides a bitmap - if a CORESET is not associated with any search space set configured with freqMonitorLocations, the bits of the bitmap have a one-to-one mapping with non-overlapping groups of 6 consecutive PRBs, in ascending order of the PRB index in the DL BWP bandwidth of \\( N_{\\mathrm{RB}}^{\\mathrm{BWP}} \\) PRBs with starting common RB position \\( N_{\\mathrm{BWP}}^{\\text {start }} \\), where the first common RB of the first group of 6 PRBs has common RB index \\( 6 \\cdot\\left[N_{\\mathrm{BWP}}^{\\text {start }} / 6\\right] \\) if \\( r b \\)-Offset is not provided, or the first common RB of the first group of 6 PRBs has common RB index \\( N_{\\mathrm{BWP}}^{\\text {start }}+N_{\\mathrm{RB}}^{\\text {offset }} \\) where \\( N_{\\mathrm{RB}}^{\\text {offset }} \\) is provided by rb-Offset.\n---\nFor a CORESET other than a CORESET with index 0 , - if a UE has not been provided a configuration of TCI state(s) by tci-StatesPDCCH-ToAddList and tci-StatesPDCCH-ToReleaseList for the CORESET, or has been provided initial configuration of more than one TCI states for the CORESET by tci-StatesPDCCH-ToAddList and tci-StatesPDCCH-ToReleaseList but has not received a MAC CE activation command for one of the TCI states as described in [11, TS 38.321], the UE assumes that the DM-RS antenna port associated with PDCCH receptions is quasi co-located with the SS/PBCH block the UE identified during the initial access procedure, or for a most recent configured grant PUSCH transmission as described in clause 19 for a same HARQ process;\n---\n- if a UE has been provided a configuration of more than one TCI states by tci-StatesPDCCH-ToAddList and tci-StatesPDCCH-ToReleaseList for the CORESET as part of Reconfiguration with sync procedure as described in [12, TS 38.331] but has not received a MAC CE activation command for one of the TCI states as described in [11, TS 38.321], the UE assumes that the DM-RS antenna port associated with PDCCH receptions is quasi colocated with the SS/PBCH block or the CSI-RS resource the UE identified during the random access procedure initiated by the Reconfiguration with sync procedure as described in [12, TS 38.331].  For a CORESET with index 0 ,\n---\n- a SS/PBCH block the UE identified during a most recent random access procedure not initiated by a PDCCH order that triggers a contention-free random access procedure, if no MAC CE activation command indicating a TCI state for the CORESET is received after the most recent random access procedure, or a SS/PBCH block the UE identified during a most recent configured grant PUSCH transmission as described in clause 19.  For a CORESET other than a CORESET with index 0 , if a UE is provided a single TCI state for a CORESET, or if the UE receives a MAC CE activation command for one or two of the provided TCI states for a CORESET, the UE assumes that the DM-RS antenna port associated with PDCCH receptions in the CORESET is quasi co-located with the one or more DL RS configured by the TCI states. For a CORESET with index 0 , the UE expects that a CSI-RS configured with qcl-Type set to 'typeD' in a TCI state indicated by a MAC CE activation command for the CORESET is provided by a SS/PBCH block\n---\n- a bitmap by freqMonitorLocations, if provided, to indicate an index of one or more RB sets for the search space set \\( s \\), where the MSB \\( k \\) in the bitmap corresponds to RB set \\( k-1 \\) in the DL BWP. For RB set \\( k \\) indicated in the bitmap, the first \\( \\operatorname{PRB} \\) of the frequency domain monitoring location confined within the RB set is given by \\( R B_{s 0+k, \\mathrm{DL}}^{\\text {start }, \\mu}+N_{\\mathrm{RB}}^{\\text {offset }} \\), where \\( R B_{s 0+k, \\mathrm{DL}}^{\\text {start }, \\mu} \\) is the index of first common RB of the RB set \\( k \\) [6, TS 38.214], and \\( N_{\\mathrm{RB}}^{\\text {offset }} \\) is provided by \\( r b \\)-Offset or \\( N_{\\mathrm{RB}}^{\\text {offset }}=0 \\) if \\( r b \\)-Offset is not provided. For each RB set with a corresponding value of 1 in the bitmap, the frequency domain resource allocation pattern for the monitoring location is determined based on the first \\( N_{\\text {RBG }}^{\\text {size }} 0 \\) bits infrequencyDomainResources provided by the associated CORESET configuration.\n---\nFor a search space set \\( s \\) associated with CORESET \\( p \\), the CCE indexes for aggregation level \\( L \\) corresponding to PDCCH candidate \\( m_{s, n_{C I}}^{(L)} \\) of the search space set in slot \\( n_{s_{1} f}^{\\mu} \\) for an active DL BWP of a serving cell corresponding to carrier indicator field value \\( n_{C I} \\) are given by\n---\nFor search space sets \\( s_{i} \\) and \\( s_{j} \\) that include searchSpaceLinking with value \\( s_{j} \\) and \\( s_{i} \\), respectively, a UE monitors, in monitoring occasions with same index according to each of search space sets \\( s_{i} \\) and \\( s_{j} \\) in a slot, PDCCH candidates \\( m_{s_{i}, n_{C I}}^{(L)} \\) and \\( m_{s_{j}, n_{C I}}^{(L)} \\), with \\( m_{s_{i}, n_{C I}}^{(L)}=m_{s_{j}, n_{C I}}^{(L)} \\), for detection of a DCI format with same information. The UE expects \\( k_{s_{i}}= k_{s_{j}}, o_{s_{i}}=o_{s_{j}}, T_{s_{i}}=T_{s_{j}}, M_{s_{i}}^{(L)}=M_{s_{j}}^{(L)} \\), and a same number of non-overlapping PDCCH monitoring occasions per slot based on corresponding monitoringSymbolsWithinSlot, for search space sets \\( s_{i} \\) and \\( s_{j} \\). For CORESET \\( p_{i} \\) associated with the search space set \\( s_{i} \\) and for CORESET \\( p_{j} \\) associated with the search space set \\( s_{j} \\), the UE is provided tci-\n---\nIf the active DL BWP and the initial DL BWP for a UE have same SCS and same CP length and the active DL BWP includes all RBs of the CORESET with index 0 , or the active DL BWP is the initial DL BWP, or the active DL BWP includes all RBs of an MBS frequency resource provided by cfr-Config-MCCH-MTCH as described in clause 18, the CORESET configured for Type0-PDCCH CSS set has CORESET index 0 and the Type0-PDCCH CSS set has search space set index 0 .\n---\nIf a UE is not provided peiSearchSpace for Type2A-PDCCH CSS set, the UE does not monitor PDCCH for Type2APDCCH CSS set on the DL BWP. The CCE aggregation levels and the maximum number of PDCCH candidates per CCE aggregation level for Type2A-PDCCH CSS set are given in Table 10.1-1. If the UE is provided peiSearchSpace with zero value for the Type2A-PDCCH CSS set index, and for the SS/PBCH block and CORESET multiplexing patterns 2 and 3, the UE determines PDCCH monitoring occasions as described in clause 13.\n---\n- \\( P \\leq 5 \\) CORESETs if coresetPoollndex is not provided for a first CORESET, or is provided and has a value 0 for a first CORESET, and is provided and has a value 1 for a second CORESET\n---\n- \\( P \\leq 5 \\) CORESETs if coresetPoollndex is not provided for a first CORESET, or is provided and has a value 0 for a first CORESET, and is provided and has a value 1 for a second CORESET  For each CORESET, the UE is provided the following by ControlResourceSet:\n---\nFor each CORESET, the UE is provided the following by ControlResourceSet: - a CORESET index \\( p \\), by controlResourceSetld or by controlResourceSetId-v1610, where\n---\n- a CORESET index \\( p \\), by controlResourceSetld or by controlResourceSetId-v1610, where - \\( 0<p<12 \\) if coresetPoollndex is not provided, or if a value of coresetPoollndex is same for all CORESETs if coresetPoollndex is provided; - \\( 0<p<16 \\) if coresetPoollndex is not provided for a first CORESET, or is provided and has a value 0 for a first CORESET, and is provided and has a value 1 for a second CORESET;\n---\nprovided RB sets in the DL BWP, the UE expects that the RBs of the CORESET are within the union of the PRBs in the RB sets of the DL BWP.  For a CORESET other than a CORESET with index 0 ,\n---\nFor a CORESET with index 0 , - if the UE is provided DLorJoint-TCIState and if followUnifiedTCIstate \\( = \\) 'enabled' for the CORESET, the UE assumes that a DM-RS antenna port for PDCCH receptions in the CORESET and a DM-RS antenna port for PDSCH receptions scheduled by DCI formats provided by PDCCH receptions in the CORESET are quasi colocated with the reference signals provided by the indicated DLorJoint-TCIState[6, TS 38.214]\n---\n- if the UE is provided DLorJoint-TCIState and if followUnifiedTCIstate \\( = \\) 'enabled' for the CORESET, the UE assumes that a DM-RS antenna port for PDCCH receptions in the CORESET and a DM-RS antenna port for PDSCH receptions scheduled by DCI formats provided by PDCCH receptions in the CORESET are quasi colocated with the reference signals provided by the indicated DLorJoint-TCIState[6, TS 38.214] - else, the UE assumes that a DM-RS antenna port for PDCCH receptions in the CORESET is quasi co-located with - the one or more DL RS configured by a TCI state, where the TCI state is indicated by a MAC CE activation command for the CORESET, if any, or\n---\n- else, the UE assumes that a DM-RS antenna port for PDCCH receptions in the CORESET is quasi co-located with - the one or more DL RS configured by a TCI state, where the TCI state is indicated by a MAC CE activation command for the CORESET, if any, or - a SS/PBCH block the UE identified during a most recent random access procedure not initiated by a PDCCH order that triggers a contention-free random access procedure, if no MAC CE activation command indicating a TCI state for the CORESET is received after the most recent random access procedure, or a SS/PBCH block the UE identified during a most recent configured grant PUSCH transmission as described in clause 19.\n---\nIf a UE is provided DLorJoint-TCIState, a DM-RS antenna port for PDCCH receptions in a CORESET, other than a CORESET with index 0 , associated only with USS sets and/or Type3-PDCCH CSS sets, and a DM-RS antenna port for PDSCH receptions scheduled by DCI formats provided by PDCCH receptions in the CORESET are quasi co-located with reference signals provided by the indicated DLorJoint-TCIState [6, TS 38.214].\n---\neach with same activated tci-StatelD value, to CORESETs with a same index in all configured DL BWPs of all configured cells in a list determined from a serving cell index, where one or two tci-StateID, the CORESET index, and the serving cell index are provided by a MAC CE command.\n---\nA UE does not expect to be provided a first symbol and a number of consecutive symbols for a CORESET that results to a PDCCH candidate mapping to symbols of different slots.\n---\nA UE does not expect to be provided a first symbol and a number of consecutive symbols for a CORESET that results to a PDCCH candidate mapping to symbols of different slots.  A UE does not expect any two PDCCH monitoring occasions on an active DL BWP, for a same search space set or for different search space sets, in a same CORESET to be separated by a non-zero number of symbols that is smaller than the CORESET duration.\n---\nFor search space sets \\( s_{i}, s_{j}, s_{k} \\), and \\( s_{l} \\), that include searchSpaceLinking with values \\( s_{j}, s_{i}, s_{l} \\), and \\( s_{k} \\), respectively, a UE expects to simultaneously monitor PDCCH candidates \\( m_{s_{i}, n_{C I, 1}}^{(8)}=m_{s_{j}, n_{C I, 1}}^{(8)} \\), and \\( m_{s_{k}, n_{C I, 2}}^{(16)}=m_{s_{l}, n_{C I, 2}}^{(16)} \\) only if a first CCE of \\( m_{s_{i} n_{C I, 1}}^{(8)} \\) or \\( m_{s_{j}, n_{C I, 1}}^{(8)} \\) has different index than a first CCE of \\( m_{s_{k} n}^{(16)}{ }_{C I, 2} \\) or \\( m_{s_{l} n n_{C I, 2}}^{(16)} \\) in a CORESET configured with \\( c c e \\) -REG-MappingType \\( = \\) 'nonInterleaved' and with duration of one symbol.\n---\nthe UE counts each PDCCH candidate for the one of the search space sets \\( s_{i} \\) and \\( s_{j} \\) that the UE monitors PDCCH in the later span, as two PDCCH candidates. The UE does not expect a first PDCCH candidate from search space set \\( s_{i} \\) or \\( s_{j} \\) and a second PDCCH candidate from a search space set \\( s_{k} \\) that does not include searchSpaceLinking to use a same set of CCEs and same scrambling in a same CORESET, and provide respective first and second DCI formats with same size, in any span other than the first span in a slot.\n---\nA PDCCH candidate with index \\( m_{s_{j}, n_{C I}}^{(L)} \\) for a search space set \\( s_{j} \\) using a set of \\( L \\) CCEs in a CORESET \\( p \\) on the active DL BWP for serving cell \\( n_{C I} \\) is not counted for monitoring if there is a PDCCH candidate with index \\( m_{s_{i,} n_{C I}}^{(L)} \\) for a search space set \\( s_{i}<s_{j} \\), or if there is a PDCCH candidate with index \\( n_{s_{j}, n_{C I}}^{(L)} \\) and \\( n_{s_{j}, n_{C I}}^{(L)}<m_{s_{j}, n_{C I}}^{(L)} \\), in the CORESET \\( p \\) on the active DL BWP for serving cell \\( n_{C I} \\) using a same set of \\( L \\) CCEs, the PDCCH candidates have identical scrambling, and the corresponding DCI formats for the PDCCH candidates have a same size; otherwise, the PDCCH candidate with index \\( m_{s_{j}, n_{C I}}^{(L)} \\) is counted for monitoring.\n---\n- the PDCCH candidate \\( m_{s_{i} n_{C I, 1}}^{(L)} \\), or the PDCCH candidate \\( m_{s_{j}, n_{C I, 1}}^{(L)} \\), and the PDCCH candidate \\( m_{s_{k}, n_{C I, 2}}^{(L)} \\) have identical scrambling and use a same set of CCEs over same symbols in a slot in a CORESET \\( p \\),\n---\n- one of the PDCCH candidates \\( m_{s_{i}, n_{C I, 1}}^{(8)} \\) and \\( m_{s_{j}, n_{C I, 1}}^{(8)} \\), and the PDCCH candidate \\( m_{s_{k}, n_{C I, 2}}^{(16)} \\), or one of the PDCCH candidates \\( m_{s_{i}, n_{C I, 1}}^{(16)} \\) and \\( m_{s_{j}, n_{C I, 1}}^{(16)} \\), and the PDCCH candidate \\( m_{s_{k}, n_{C I, 2}}^{(8)} \\), have a first CCE with same index and are simultaneously monitored in a CORESET \\( p \\) with cce-REG-MappingType \\( = \\) 'nonInterleaved' and duration of one symbol,\n---\n- is configured to monitor a first PDCCH candidate for a DCI format \\( 0 \\_0 \\) and a DCI format \\( 1 \\_0 \\) from a CSS set and a second PDCCH candidate for a DCI format \\( 0 \\_0 \\) and a DCI format \\( 1 \\_0 \\) from a USS set, where the CSS set and the USS set do not include searchSpaceLinking, in a CORESET with index zero on an active DL BWP, and\n---\n- any RE of a CORESET to overlap with any RE determined from lte-CRS-ToMatchAround, or from LTE-CRSPatternList, or with any RE of a SS/PBCH block.  If a UE is provided two TCI states indicating quasi co-location information of the DM-RS antenna port for PDCCH reception in a CORESET associated with a Type3-PDCCH CSS set, the UE may assume the quasi co-location information indicated in both of the two TCI states for the PDCCH reception in the CORESET.\n---\n- has a PDCCH candidate with CCE aggregation level \\( L \\) in CORESET \\( p \\) associated with search space set \\( s_{i} \\) for detection of a first DCI format, other than DCI format \\( 0 \\_0 \\) or DCI format \\( 1 \\_0 \\), having a first size and scheduling\n---\ncan receive a corresponding PDCCH through a PDCCH candidate with CCE aggregation level \\( L \\) in CORESET \\( p \\) associated with search space set \\( s_{j} \\) for detection of a second DCI format having a second size and associated with scheduling on serving cell \\( n_{C I, 1} \\) if the first size and the second size are same and if neither of search space sets \\( s_{i} \\) and \\( s_{j} \\) includes searchSpaceLinking.\n---\nFor the purpose of determining the CORESET, a SS/PBCH block is considered to have different QCL 'typeD' properties than a CSI-RS.  For the purpose of determining the CORESET, a first CSI-RS associated with a SS/PBCH block in a first cell and a second CSI-RS in a second cell that is also associated with the SS/PBCH block are assumed to have same QCL 'typeD' properties.\n---\n- to be configured a set of resource blocks of a CORESET that includes more than four sub-sets of resource blocks that are not contiguous in frequency - any RE of a CORESET to overlap with any RE determined from lte-CRS-ToMatchAround, or from LTE-CRSPatternList, or with any RE of a SS/PBCH block.\n---\n- a MAC CE activation command indicating a TCI state of the active BWP that includes a CORESET with index 0 , as described in [6, TS 38.214], where the TCI-state includes a CSI-RS which is quasi-co-located with the SS/PBCH block, or\n---\n- an indication for a presence or absence of a transmission configuration indication (TCI) field for a DCI format, other than DCI format \\( 1 \\_0 \\), that schedules PDSCH receptions or has associated HARQ-ACK information without scheduling PDSCH and is provided by a PDCCH in CORESET \\( p \\), by tci-PresentInDCI or tci-PresentDC1-1-2.\n---\n- to be configured a set of resource blocks of a CORESET that includes more than four sub-sets of resource blocks that are not contiguous in frequency\n---\nprovided RB sets in the DL BWP, the UE expects that the RBs of the CORESET are within the union of the PRBs in the RB sets of the DL BWP.\n---\n\\( N_{\\text {CCE } p} \\) is the number of CCEs, numbered from 0 to \\( N_{\\text {CCE } p}-1 \\), in CORESET \\( p \\) and, if any, per RB set;\n---\n- different CORESET indexes, or\n---\nthe UE monitors PDCCHs only in a CORESET, and in any other CORESET from the multiple CORESETs that have been configured with qci-Type set to same 'typeD' properties as the CORESET, on the active DL BWP of a cell from the one or more cells\n---\nthe UE monitors PDCCHs only in a first CORESET with qcl-Type set to first 'typeD' properties and, if any, in a second CORESET with qcl-Type set to second 'typeD' properties that are different than the first 'typeD' properties, and in any other CORESET from the multiple CORESETs with corresponding qcl-Type set to the first 'typeD' properties and/or to the second 'typeD' properties\n---\nthe UE monitors PDCCHs only in a CORESET with a first qcl-Type set to first 'typeD' properties and, if any, a second qcl-Type set to second 'typeD' properties that are different than the first 'typeD' properties, and in any other CORESET from the multiple CORESETs with corresponding qcl-Type set to the first 'typeD' properties or to the second 'typeD' properties\n---\nFor the purpose of determining the CORESET, a SS/PBCH block is considered to have different QCL 'typeD' properties than a CSI-RS.\n---\n- else if, the UE applies the first one of two TCI states indicated for the CORESET with the lowest CORESET ID in the latest slot within the active BWP of the cell in which the CSI-RS is to be received when receiving the aperiodic CSI-RS, - else if there is any other DL signal with an indicated TCI state in the same symbols as the CSI-RS, the UE applies the QCL assumption of the other DL signal also when receiving the aperiodic CSI-RS. The other DL signal refers to PDSCH scheduled with offset larger than or equal to the threshold timeDurationForQCL, as defined in [13, TS 38.306], periodic CSI-RS, semi-persistent CSI-RS, aperiodic CSI-RS in a NZP-CSI-RS-ResourceSet scheduled with offset larger than or equal to the UE reported threshold beamSwitchTiming when the reported value is one of the values \\( \\{14,28,48\\} \\cdot 2^{\\max \\left(0, \\mu \\text { CSIRS }^{-3}\\right)} \\) and when enableBeamSwitchTiming is not provided or the NZP-CSI-RS-ResourceSet is configured with the higher layer parameter trs-Info, aperiodic CSI-RS in a NZP-CSI-RS-ResourceSet configured with the higher layer parameter repetition set to 'off' or configured without the higher layer parameters repetition and trs-Info scheduled with offset larger than or equal to \\( 48 \\cdot 2^{\\max \\left(0, \\mu_{\\text {CSIRS }}-3\\right)} \\) when the UE provides beamSwitchTiming-r 16 and enableBeamSwitchTiming is provided, aperiodic CSI-RS in a NZP-CSI-RSResourceSet configured with the higher layer parameter repetition set to 'on' scheduled with offset larger than or equal to the UE reported threshold beamSwitchTiming-r16 and enableBeamSwitchTiming is provided; - else if at least one CORESET is configured for the BWP in which the aperiodic CSI-RS is received, when receiving the aperiodic CSI-RS, the UE applies the QCL assumption used for the CORESET associated with a monitored search space with the lowest controlResourceSetld in the latest slot in which one or more CORESETs within the active BWP of the serving cell are monitored;\n---\nwhere \\( P_{\\text {CMAX, } f c}(i) \\) is the UE configured maximum output power defined in [8-1, TS 38.101-1], [8-2, TS 38.101-2] and [8-3, TS 38.101-3] for carrier \\( f \\) of serving cell \\( \\mathcal{C} \\) within transmission occasion \\( i, P_{\\text {PRACH, largel, } 46} \\) is the PRACH target reception power PREAMBLE_RECEIVED_TARGET_POWER provided by higher layers [11, TS 38.321] for the active UL BWP \\( b \\) of carrier \\( f \\) of serving cell \\( C \\), and \\( P L_{b, f, c} \\) is a pathloss for the active UL BWP \\( b \\) of carrier \\( f \\) based on the DL RS associated with the PRACH transmission on the active DL BWP of serving cell \\( C \\) and calculated by the UE in dB as referenceSignalPower - higher layer filtered RSRP in dBm , where RSRP is defined in [7, TS 38.215] and the higher layer filter configuration is defined in [12, TS 38.331]. If the active DL BWP is the initial DL BWP and for SS/PBCH block and CORESET multiplexing pattern 2 or 3, as described in clause 13, the UE determines \\( P L_{b, f, c} \\) based on the SS/PBCH block associated with the PRACH transmission.\n---\nIn response to a PRACH transmission, a UE attempts to detect a DCI format \\( 1 \\_0 \\) with CRC scrambled by a corresponding RA-RNTI during a window controlled by higher layers [11, TS 38.321]. The window starts at the first symbol of the earliest CORESET the UE is configured to receive PDCCH for Type1-PDCCH CSS set, as defined in clause 10.1, that is at least one symbol, after the last symbol of the PRACH occasion corresponding to the PRACH transmission, where the symbol duration corresponds to the SCS for Type1-PDCCH CSS set as defined in clause 10.1. If \\( N_{\\mathrm{TA}, \\mathrm{adj}}^{\\mathrm{UE}} \\) or \\( N_{\\mathrm{TA}, \\mathrm{adj}}^{\\text {common }} \\), as defined in [4, TS 38.211], is not zero, the window starts after an additional \\( T_{\\mathrm{TA}}+k_{\\text {mac }} \\) msec where \\( T_{\\mathrm{TA}} \\) is defined in [4, TS 38.211] and \\( k_{\\mathrm{mac}} \\) is provided by \\( K \\)-Mac or \\( k_{\\mathrm{mac}}=0 \\) if \\( K \\)-Mac is not provided. The length of the window in number of slots, based on the SCS for Typel-PDCCH CSS set, is provided by raResponseWindow.\n---\nIn response to a transmission of a PRACH and a PUSCH , or to a transmission of only a PRACH if the PRACH preamble is mapped to a valid PUSCH occasion, a UE attempts to detect a DCI format 10 with CRC scrambled by a corresponding MsgB-RNTI during a window controlled by higher layers [11, TS 38.321]. The window starts at the first symbol of the earliest CORESET the UE is configured to receive PDCCH for Type1-PDCCH CSS set, as defined in clause 10.1, that is at least one symbol, after the last symbol of the PUSCH occasion corresponding to the PRACH transmission, where the symbol duration corresponds to the SCS for Typel-PDCCH CSS set. If \\( N_{\\mathrm{TA}, \\mathrm{adj}}^{\\mathrm{UE}} \\) or \\( N_{\\mathrm{TA}, \\mathrm{adj}}^{\\text {commnon }} \\), as defined in [4, TS 38.211], is not zero, the window starts after an additional \\( T_{\\mathrm{TA}}+k_{\\mathrm{mac}} \\) msec where \\( T_{\\mathrm{TA}} \\) is defined in [4, TS 38.211] and \\( k_{\\mathrm{mac}} \\) is provided by \\( K \\)-Mac or \\( k_{\\mathrm{mac}}=0 \\) if \\( K \\)-Mac is not provided. The length of the window in number of slots, based on the SCS for Type1-PDCCH CSS set, is provided by msgB-ResponseWindow.\n---\nFor PUSCH scheduled by DCI format \\( 0 \\_0 \\) on a cell and if the higher layer parameter enableDefaultBeamPL-ForPUSCH0-0 is set 'enabled', the UE is not configured with PUCCH resources on the active UL BWP and the UE is in RRC connected mode, the UE shall transmit PUSCH according to the spatial relation, if applicable, with a reference to the RS configured with qcl-Type set to 'typeD' corresponding to the QCL assumption of the CORESET with the lowest ID on the active DL BWP of the cell. If the CORESET is indicated with two TCI states, snischemePdcch is configured and the UE supports [DefaultBeamPL-ForPUSCH-SfnPdcch], the UE shall use the first TCI state as the QCL assumption.\n---\n- if the scheduling PDCCH was in a 3-symbol CORESET and the CORESET and the PDSCH had the same starting symbol, then \\( d_{t, t}=3 \\),\n---\n- according to the spatial relation, if applicable, with a reference to the RS configured with qcl-Type set to 'typeD' corresponding to the QCL assumption of the CORESET with the lowest controlResourceSetld in the active DL\n---\nthe UE used for PRACH association, as described in clause 8.1, regardless of whether or not the UE is provided TCIState for the CORESET where the UE receives the PDCCH with the DCI format \\( 1 \\_0 \\).\n---\nIf the UE detects a DCI format \\( 1 \\_0 \\) with CRC scrambled by the corresponding MsgB-RNTI and receives a transport block within the window in a corresponding PDSCH, the UE may assume same DM-RS antenna port quasi co-location properties, as described in [6, TS 38.214], as for a SS/PBCH block the UE used for PRACH association, as described in clause 8.1, regardless of whether or not the UE is provided TCI-State for the CORESET where the UE receives the PDCCH with the DCI format \\( 1 \\_0 \\).\n---\nDetermines a common ControlResourceSet (CORESET), a common search space and necessary PDCCH parameters. If the field ssb-SubcarrierOffset indicates that SIB1 is absent, the field pdcch-ConfigS/B1 indicates the frequency positions where the UE may find SS/PBCH block with SIB1 or the frequency range where the network does not provide SS/PBCH block with SIB1 (see TS 38.213 [13], clause 13).\n---\nThis field may indicate that this cell does not provide S/B1 and that there is hence no CORESET\\#0 configured in M/B (see TS 38.213 [13], clause 13). In this case, the field pdcch-ConfigSIB1 may indicate the frequency positions where the UE may (not) find a SS/PBCH with a control resource set and search space for SIB1 (see TS 38.213 [13], clause 13).\n---\n- CORESET ID: This field indicates a Control Resource Set identified with ControlResourceSetld as specified in TS 38.331 [5], for which the TCI State is being indicated. In case the value of the field is 0 , the field refers to the Control Resource Set configured by controlResourceSetZero as specified in TS 38.331 [5]. The length of the field is 4 bits;\n---\nFor a PDSCH scheduled with a DCI format \\( 1 \\_0 \\) in any type of PDCCH common search space, regardless of which bandwidth part is the active bandwidth part, RB numbering starts from the lowest RB of the CORESET in which the DCI was received; otherwise RB numbering starts from the lowest RB in the determined downlink bandwidth part. When the PDCCH reception includes two PDCCH candidates from two respective search space sets, as described in clause 10.1 of [6, TS 38.213], for the purpose of determining the downlink RB set of a PDSCH when scheduled by DCI format \\( 1 \\_0 \\), the CORESET with lower ID among two CORESETs associated with two PDCCH candidates is used.\n---\nIf the UE is configured with [NumberOfAdditionalPCI] and with PDCCH-Config that contains two different values of coresetPoollndex in ControlResourceSet, the UE receives an activation command for CORESET associated with each coresetPoollndex, as described in clause 6.1.3.14 of [10, TS 38.321], used to map up to 8 TCI states to the codepoints of the DCI field 'Transmission Configuration Indication' in one CC/DL BWP. When a set of TCI state IDs are activated for a coresetPoollndex, the activated TCI states corresponding to one coresetPoollndex can be associated with one physical cell ID and activated TCI states corresponding to another coresetPoollndex can be associated with another physical cell ID.\n---\nIf the UE is not provided \\( \\bar{q}_{0} \\) by failureDetectionResourcesToAddModList for a BWP of the serving cell, the UE determines the set \\( \\bar{q}_{0} \\) to include periodic CSI-RS resource configuration indexes with same values as the RS indexes in the RS sets indicated by TCI-State for respective CORESETs that the UE uses for monitoring PDCCH. If the UE is not provided \\( \\bar{q}_{0,0} \\) or \\( \\bar{q}_{0,1} \\) for a BWP of the serving cell, the UE determines the set \\( \\bar{q}_{0,0} \\) or \\( \\bar{q}_{0,1} \\) to include periodic CSI-RS resource configuration indexes with same values as the RS indexes in the RS sets indicated by TCI-State for first and second CORESETs that the UE uses for monitoring PDCCH, where the UE is provided two coresetPoollndex values 0 and 1 for the first and second CORESETs, or is not provided coresetPoollndex value for the first CORESETs and is provided coresetPoollndex value of 1 for the second CORESETs, respectively. If there are two RS indexes in a TCI state, the set \\( \\bar{q}_{0} \\) or \\( \\bar{q}_{0,0} \\), or \\( \\bar{q}_{0,1} \\) includes RS indexes configured with qcl-Type set to 'typeD' for the corresponding TCI states. If a CORESET that the UE uses for monitoring PDCCH includes two TCI states and the UE is provided sfnSchemePdcch set to 'sfnSchemeA' or 'sfnSchemeB', the set \\( \\bar{q}_{0} \\) includes RS indexes in the RS sets associated with the two TCI states. The UE expects the set \\( \\bar{q}_{0} \\) to include up to two RS indexes. If the UE is provided \\( \\bar{q}_{0,0} \\) or \\( \\bar{q}_{0,1} \\), the UE expects the set \\( \\bar{q}_{0,0} \\) or the set \\( \\bar{q}_{0,1} \\) to include up to a number of \\( N_{\\mathrm{BFD}} \\) RS indexes indicated by capabilityparametername. If the UE is not provided \\( \\bar{q}_{0,0} \\) or \\( \\bar{q}_{0,1} \\), and if a number of active TCI states for PDCCH receptions in the first or second CORESETs is larger than \\( N_{\\mathrm{BFD}} \\), the UE determines the set \\( \\bar{q}_{0,0} \\) or \\( \\bar{q}_{0,1} \\) to include periodic CSI-RS resource configuration indexes with same values as the RS indexes in the RS sets associated with the active TCI states for PDCCH receptions in the first or second CORESETs corresponding to search space sets according to an ascending order for monitoring periodicity. If more than one first or second CORESETs correspond to search space sets with same monitoring periodicity, the UE determines the order of the first or second CORESETs according to a descending order of a CORESET index.\n---\n- if the UE multiplexes the second HARQ-ACK information in a first PUCCH using a resource provided by SPS-PUCCH-AN-List, or by nIPUCCH-AN if SPS-PUCCH-AN-List is not provided, and the PUCCH transmission is not dropped due to an overlapping with a PUSCH or PUCCH transmission of larger priority and does not have any symbol that overlaps with a symbol indicated as downlink by tdd-UL-DLConfigurationCommon or tdd-UL-DL-ConfigDedicated, or indicated for a SS/PBCH block by ssbPositionsInBurst, or belonging to a CORESET associated with a Type0-PDCCH CSS set, the UE stops the procedure to determine the earliest second slot in the slot\n---\nIf during cell search a UE determines from MIB that a CORESET for Type0-PDCCH CSS set is present, as described in clause 4.1, the UE determines a number of consecutive resource blocks and a number of consecutive symbols for the CORESET of the Type0-PDCCH CSS set from controlResourceSetZero in pdcch-ConfigSIB1, as described in Tables 13-1 through 13-10, for operation without shared spectrum channel access in FR1 and FR2-1, or as described in Tables 13-1A and 13-4A for operation with shared spectrum channel access in FR1, or as described in Table 13-10A for FR22, and determines PDCCH monitoring occasions from searchSpaceZero in pdcch-ConfigSIBI, included in MIB, as described in Tables 13-11 through 13-15. SFN \\( { }_{\\mathrm{c}} \\) and \\( n_{\\mathrm{c}} \\) are the SFN and slot index within a frame of the CORESET based on SCS of the CORESET and SFN \\( \\mathrm{SSB}_{i} \\) and \\( n_{\\mathrm{SSB}, i} \\) are the SFN and slot index based on SCS of the CORESET, respectively, where the \\( \\mathrm{SS} / \\mathrm{PBCH} \\) block with index \\( i \\) overlaps in time with system frame \\( \\mathrm{SFN}_{\\mathrm{SSB}, i} \\) and slot \\( n_{\\mathrm{SSB}, i} \\). The symbols of the CORESET associated with pdcch-ConfigSIB1 in MIB or with searchSpaceSIB1 in PDCCHConfigCommon have normal cyclic prefix.\n---\n- if the UE is not provided with the higher-layer parameter pdcchCandidateReception-WithCRSOverlap, the UE may assume that no resource elements in the CORESET overlap with LTE cell-specific reference signals as indicated by the higher-layer parameter lte-CRS-ToMatchAround, Ite-CRS-PatternList 1, lte-CRS-PatternList2, lte-CRS-PatternList3, or lte-CRS-PatternList4.  For CORESET 0 configured by the ControlResourceSetZero IE:\n---\nIf at least one RE of a PDCCH candidate for a UE on the serving cell overlaps with at least one RE of lte-CRSToMatchAround, or of LTE-CRS-PatternList, the UE is not required to monitor the PDCCH candidate.\n---\n- If \\( N_{\\mathrm{RB}}^{\\text {CORESET }}=12 \\) on a carrier with a channel bandwidth of 3 MHz , the CORESET is obtained by applying the description above assuming interleaved mapping with \\( R=2 \\); - if \\( N_{\\mathrm{RB}}^{\\text {CORESET }}=24 \\) on a carrier with a channel bandwidth of 3 MHz , the CORESET is obtained by applying the description above assuming interleaved mapping with \\( R=2 \\) or non-interleaved mapping as defined by clause 13 of [5, TS 38.213], followed by puncturing the 9 highest-numbered resource blocks to obtain the 15 resource blocks forming CORESET 0; - if \\( N_{\\mathrm{RB}}^{\\text {CORESET }}=24 \\) on a carrier with a channel bandwidth of 5 MHz , the CORESET is obtained by applying the description above assuming interleaved mapping with \\( R=2 \\), followed by puncturing the 4 highest-numbered resource blocks to obtain the 20 resource blocks forming CORESET 0;\n---\nIf a UE monitors PDCCH candidates of aggregation levels 8 and 16 with the same starting CCE index in noninterleaved CORESET spanning one OFDM symbol:\n---\nIf a PDSCH scheduled by a PDCCH would overlap with resources in the CORESET containing the PDCCH, the resources corresponding to a union of the detected PDCCH that scheduled the PDSCH and associated PDCCH DM-RS are not available for the PDSCH . When the PDCCH reception includes two PDCCH candidates from two respective search space sets, as described in clause 10.1 of [6, TS 38.213], the resources corresponding to a union of the two PDCCH candidates scheduling the PDSCH and the associated PDCCH DM-RS are not available for the PDSCH. When precoderGranularity configured in a CORESET where the PDCCH was detected is set to 'allContiguousRBs', the associated PDCCH DM-RS are DM-RS in all REGs of the CORESET. Otherwise, the associated DM-RS are the DMRS in REGs of the PDCCH.\n---\nWhen the UE would transmit a PUCCH with HARQ-ACK information in slot \\( n \\) corresponding to the PDSCH carrying the activation command, the indicated mapping between TCI states and codepoints of the DCI field Transmission Configuration Indication'should be applied starting from the first slot that is after slot \\( n+3 N_{\\text {slot }}^{\\text {subrame, } \\mu}+ \\frac{2^{\\mu}}{2^{\\mu_{K} a c}} \\cdot k_{\\text {mac }} \\) where \\( \\mu \\) is the SCS configuration for the PUCCH and \\( \\mu_{K_{\\text {mac }}} \\) is the subcarrier spacing configuration for \\( k_{\\text {mac }} \\) with a value of 0 for frequency range 1 , and \\( k_{\\text {mac }} \\) is provided by \\( K \\)-Mac or \\( k_{\\text {mac }}=0 \\) if \\( K \\)-Mac is not provided. If tci-PresentInDCI is set to 'enabled' or tci-PresentDCI-1-2 is configured for the CORESET scheduling the PDSCH, and the time offset between the reception of the DL DCI and the corresponding PDSCH is equal to or greater than timeDurationForQCL if applicable, after a UE receives an initial higher layer configuration of TCI states and before reception of the activation command, the UE may assume that the DM-RS ports of PDSCH of a serving cell are quasi co-located with the SS/PBCH block determined in the initial access procedure with respect to qcl-Type set to 'typeA', and when applicable, also with respect to qcl-Type set to 'typeD'.\n---\nThe downlink radio link quality of the primary cell is monitored by a UE for the purpose of indicating out-of-sync/insync status to higher layers. The UE is not required to monitor the downlink radio link quality in DL BWPs other than the active DL BWP, as described in clause 12, on the primary cell. If the active DL BWP is the initial DL BWP and for SS/PBCH block and CORESET multiplexing pattern 2 or 3, as described in clause 13, the UE is expected to perform RLM using the associated SS/PBCH block when the associated SS/PBCH block index is provided by RadioLinkMonitoringRS",
    "generated_at": "2026-01-10T14:05:56.246412",
    "model": "gpt-4o",
    "full_api_response": {
      "result": "DSL",
      "type": "CrossReference",
      "dsl": "MATCH(controlresourcesetid, controlresourcesetid)",
      "preconditions": [],
      "predicate": "The controlResourceSetId in pdcch-configcommon must match the controlResourceSetId in pdcch-configcommon_commonsearchspacelist.",
      "advisory": false,
      "examples": {
        "valid": [
          "controlresourcesetid in pdcch-configcommon = 5, controlresourcesetid in pdcch-configcommon_commonsearchspacelist = 5"
        ],
        "invalid": [
          "controlresourcesetid in pdcch-configcommon = 3, controlresourcesetid in pdcch-configcommon_commonsearchspacelist = 4"
        ]
      },
      "notes": "Evidence #1 and #2 indicate an association between search space sets and CORESETs by controlResourceSetId, implying a cross-reference requirement.",
      "version_tags": [
        "r16",
        "r17"
      ]
    }
  }
}