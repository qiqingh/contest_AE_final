{
  "dsl_rule": "IMPLIES(IN(field1, {'cri-RSRP', 'cri-SINR', 'none'}), EQ(field2, 1))",
  "constraint_type": "ValueDependency",
  "has_valid_rule": true,
  "field_ids": {
    "field1_all": [
      932,
      933
    ],
    "field2_all": [
      926
    ],
    "actual_pairs": [
      [
        [
          932,
          933
        ],
        [
          926
        ]
      ]
    ]
  },
  "predicate": "If reportQuantity is 'cri-RSRP', 'cri-SINR', or 'none', then resourcesForChannelMeasurement must have 1 port.",
  "preconditions": [
    "field2 contains a NZP-CSI-RS-ResourceSet configured with repetition and without trs-Info"
  ],
  "advisory": false,
  "citations": [],
  "examples": {
    "valid": [
      "reportQuantity='cri-RSRP', resourcesForChannelMeasurement=1"
    ],
    "invalid": [
      "reportQuantity='cri-RSRP', resourcesForChannelMeasurement=2"
    ]
  },
  "notes": "Evidence #1 provides a normative constraint linking reportQuantity values to the number of ports in resourcesForChannelMeasurement.",
  "version_tags": [
    "r16",
    "r17"
  ],
  "meta": {
    "ie_name": "csi-MeasConfig_csi-ReportConfigToAddModList_group1",
    "field1": "reportQuantity",
    "field2": "resourcesForChannelMeasurement",
    "is_intra_ie": true,
    "evidence_info": {
      "used_count": 10,
      "original_count": 10,
      "sampled": false
    },
    "all_sources": [
      "ts_138214v170100p_mathpix.md",
      "ts_138331v170000p_mathpix.md"
    ],
    "all_sections": [
      "5.2.1.4.2",
      "5.2.1.4.1",
      "5.1.6.1.2",
      "6.3.2",
      "5.2.2.3.1"
    ],
    "best_confidence": "HIGH",
    "evidence": "ResourceSet are transmitted in different OFDM symbols. If repetition is set to 'off', the UE shall not assume that the CSI-RS resources within the NZP-CSI-RS-ResourceSet are transmitted with the same downlink spatial domain transmission filter. If the UE is configured with a CSI-ReportConfig with reportQuantity set to 'cri-RSRP', 'cri-SINR' or 'none' and if the CSI-ResourceConfig for channel measurement (higher layer parameter resourcesForChannelMeasurement) contains a NZP-CSI-RS-ResourceSet that is configured with the higher layer parameter repetition and without the higher layer parameter trs-Info, the UE can only be configured with the same number (1 or 2) of ports with the higher layer parameter nrofPorts for all CSI-RS resources within the set. If the UE is configured with the CSI-RS resource in the same OFDM symbol(s) as an SS/PBCH block, the UE may assume that the CSI-RS and the SS/PBCH block are quasi co-located with 'typeD' if 'typeD' is applicable. Furthermore, the UE shall not expect to be configured with the CSI-RS in PRBs that overlap with those of the SS/PBCH block, and the UE shall expect that the same subcarrier spacing is used for both the CSI-RS and the SS/PBCH block. 5.1.6.1.3 CSI-RS for mobility\n---\n69 ETSITS 138214 V17.1.0 (2022-05) - When one Resource Setting is configured, the Resource setting is given by resourcesForChannelMeasurement for L1-RSRP measurement. In such a case, the number of configured CSI Resource Sets in the Resource Setting is \\mathrm{S}=2 For aperiodic CSI, and for aperiodic CSI resource settings, if groupBasedBeamReporting-r 17 is configured, each trigger state configured using the higher layer parameter CSI-AperiodicTriggerState is associated with resourcesForChannel and resourcesForChannel2, which correspond to first and second resource sets, respectively, for L1-RSRP measurement. For semi-persistent or periodic CSI, each CSI-ReportConfig is linked to periodic or semi-persistent Resource Setting(s): - When one Resource Setting (given by higher layer parameter resourcesForChannelMeasurement) is configured, the Resource Setting is for channel measurement for L1-RSRP or for channel and interference measurement for L1-SINR computation. - When two Resource Settings are configured, the first Resource Setting (given by higher layer parameter resourcesForChannelMeasurement) is for channel measurement and the second Resource Setting (given by higher layer parameter csi-IM-ResourcesForInterference) is used for interference measurement performed on CSI-[M. For L1-SINR computation, the second Resource Setting (given by higher layer parameter csi-IMResourcesForInterference or higher layer parameter nzp-CSI-RS-ResourceForInterference) is used for interference measurement performed on CSI-IM or on NZP CSI-RS. A UE is not expected to be configured with more than one CSI-RS resource in resource set for channel measurement for a CSI-ReportConfig with the higher layer parameter codebookType set to 'type[I', 'type[I-PortSelection', 'type[I-r16', 'type[I-PortSelection-r16', or 'type[I-PortSelection-r17'. A UE is not expected to be configured with more than 64 NZP CSI-RS resources and/or SS/PBCH block resources in resource setting for channel measurement for a CSIReportConfig with the higher layer parameter reportQuantity set to 'none', 'cri-RI-CQI', 'cri-RSRP', 'ssb-Index-RSRP', 'cri-SINR' or 'ssb-Index-SINR', 'cri-RSRP-Capability[Set][ndex', 'ssb-Index-RSRP-Capability[Set][ndex', 'cri-SINRCapability[Set]Index' or 'ssb-Index-SINR-Capability[Set]Index'. If interference measurement is performed on CSI-IM, each CSI-RS resource for channel measurement is resource-wise associated with a CSI-IM resource by the ordering of the CSI-RS resource and CSI-IM resource in the corresponding resource sets. The number of CSI-RS resources for channel measurement equals to the number of CSI-[M resources. An NZP CSI-RS Resource Set for channel measurement with 2 <= K_{s} <= 8 resources can be configured with two Resource Groups, with K_{1} >= 1 resources in Group 1 and K_{2} >= 1 resources in Group 2, such that K_{1}+K_{2}=K_{s} , and with N \\in\\{1,2\\} Resource Pairs. Each Resource Pair consists of one resource from Group 1 and one resource from Group 2. The same resource can be associated with two Resource Pairs in frequency range 1 but not in frequency range 2.\n---\nIf the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-PMICQI', or 'cri-RI-LI-PMI-CQI', the UE shall report a preferred precoder matrix for the entire reporting band, or a preferred precoder matrix per subband, according to Clause 5.2.2.2. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-i1', - the UE expects, for that CSI-ReportConfig, to be configured with higher layer parameter codebookType set to 'typel-SinglePanel' and pmi-FormatIndicator set to 'widebandPMI' and, - the UE shall report a PMI consisting of a single wideband indication ( i_{1} in Clause 5.2.2.2.1) for the entire CSI reporting band. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-i1-CQI', - the UE expects, for that CSI-ReportConfig, to be configured with higher layer parameter codebookType set to 'typel-SinglePanel' and pmi-FormatIndicator set to 'widebandPMI' and, - the UE shall report a PMI consisting of a single wideband indication ( i_{1} in Clause 5.2.2.2.1) for the entire CSI reporting band. The CQ[ is calculated conditioned on the reported i_{1} assuming PDSCH transmission with N_{p} >= 1 precoders (corresponding to the same i_{1} but different i_{2} in Clause 5.2.2.2.1), where the UE assumes that one precoder is randomly selected from the set of N_{p} precoders for each PRG on PDSCH, where the PRG size for CQI calculation is configured by the higher layer parameter pdsch-BundleSizeForCSI. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-CQI', - if the UE is configured with higher layer parameter non-PMI-PortIndication contained in a CSI-ReportConfig, r ports are indicated in the order of layer ordering for rank r and each CSI-RS resource in the CSI resource setting is linked to the CSI-ReportConfig based on the order of the associated NZP-CSI-RS-Resourceld in the linked CSI resource setting for channel measurement given by higher layer parameter resourcesForChannelMeasurement. The configured higher layer parameter non-PMI-PortIndication contains a sequence p_{0}^{(1)}, p_{0}^{(2)}, p_{1}^{(2)}, p_{0}^{(3)}, p_{1}^{(3)}, p_{2}^{(3)}, \\ldots, p_{0}^{(R)}, p_{1}^{(R)}, \\ldots, p_{R-1}^{(R)} of port indices, where p_{0}^{(v)}, \\ldots, p_{v-1}^{(v)} are the CSI-RS port indices associated with rank v and R \\in\\{1,2, \\ldots, P\\} where P \\in\\{1,2,4,8\\} is the number of ports in the CSI-RS resource. The UE shall only report RI corresponding to the configured fields of PortIndexFor 8Ranks. - if the UE is not configured with higher layer parameter non-PMI-PortIndication, the UE assumes, for each CSIRS resource in the CSI resource setting linked to the CSI-ReportConfig, that the CSI-RS port indices p_{0}^{(v)}, \\ldots, p_{v-1}^{(v)}=\\{0, \\ldots, v-1\\} are associated with ranks v=1,2, \\ldots, P where P \\in\\{1,2,4,8\\} is the number of ports in the CSI-RS resource. - When calculating the CQI for a rank, the UE shall use the ports indicated for that rank for the selected CSI-RS resource. The precoder for the indicated ports shall be assumed to be the identity matrix scaled by \\frac{1}{\\sqrt{v}} .\n---\n- the UE shall report a PMI consisting of a single wideband indication ( i_{1} in Clause 5.2.2.2.1) for the entire CSI reporting band. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-i1-CQI', - the UE expects, for that CSI-ReportConfig, to be configured with higher layer parameter codebookType set to 'typel-SinglePanel' and pmi-FormatIndicator set to 'widebandPMI' and, - the UE shall report a PMI consisting of a single wideband indication ( i_{1} in Clause 5.2.2.2.1) for the entire CSI reporting band. The CQ[ is calculated conditioned on the reported i_{1} assuming PDSCH transmission with N_{p} >= 1 precoders (corresponding to the same i_{1} but different i_{2} in Clause 5.2.2.2.1), where the UE assumes that one precoder is randomly selected from the set of N_{p} precoders for each PRG on PDSCH, where the PRG size for CQI calculation is configured by the higher layer parameter pdsch-BundleSizeForCSI. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-CQI', - if the UE is configured with higher layer parameter non-PMI-PortIndication contained in a CSI-ReportConfig, r ports are indicated in the order of layer ordering for rank r and each CSI-RS resource in the CSI resource setting is linked to the CSI-ReportConfig based on the order of the associated NZP-CSI-RS-Resourceld in the linked CSI resource setting for channel measurement given by higher layer parameter resourcesForChannelMeasurement. The configured higher layer parameter non-PMI-PortIndication contains a sequence p_{0}^{(1)}, p_{0}^{(2)}, p_{1}^{(2)}, p_{0}^{(3)}, p_{1}^{(3)}, p_{2}^{(3)}, \\ldots, p_{0}^{(R)}, p_{1}^{(R)}, \\ldots, p_{R-1}^{(R)} of port indices, where p_{0}^{(v)}, \\ldots, p_{v-1}^{(v)} are the CSI-RS port indices associated with rank v and R \\in\\{1,2, \\ldots, P\\} where P \\in\\{1,2,4,8\\} is the number of ports in the CSI-RS resource. The UE shall only report RI corresponding to the configured fields of PortIndexFor 8Ranks. - if the UE is not configured with higher layer parameter non-PMI-PortIndication, the UE assumes, for each CSIRS resource in the CSI resource setting linked to the CSI-ReportConfig, that the CSI-RS port indices p_{0}^{(v)}, \\ldots, p_{v-1}^{(v)}=\\{0, \\ldots, v-1\\} are associated with ranks v=1,2, \\ldots, P where P \\in\\{1,2,4,8\\} is the number of ports in the CSI-RS resource. - When calculating the CQI for a rank, the UE shall use the ports indicated for that rank for the selected CSI-RS resource. The precoder for the indicated ports shall be assumed to be the identity matrix scaled by \\frac{1}{\\sqrt{v}} .\n---\n- the UE shall report a PMI consisting of a single wideband indication ( i_{1} in Clause 5.2.2.2.1) for the entire CSI reporting band. The CQ[ is calculated conditioned on the reported i_{1} assuming PDSCH transmission with N_{p} >= 1 precoders (corresponding to the same i_{1} but different i_{2} in Clause 5.2.2.2.1), where the UE assumes that one precoder is randomly selected from the set of N_{p} precoders for each PRG on PDSCH, where the PRG size for CQI calculation is configured by the higher layer parameter pdsch-BundleSizeForCSI. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-CQI', - if the UE is configured with higher layer parameter non-PMI-PortIndication contained in a CSI-ReportConfig, r ports are indicated in the order of layer ordering for rank r and each CSI-RS resource in the CSI resource setting is linked to the CSI-ReportConfig based on the order of the associated NZP-CSI-RS-Resourceld in the linked CSI resource setting for channel measurement given by higher layer parameter resourcesForChannelMeasurement. The configured higher layer parameter non-PMI-PortIndication contains a sequence p_{0}^{(1)}, p_{0}^{(2)}, p_{1}^{(2)}, p_{0}^{(3)}, p_{1}^{(3)}, p_{2}^{(3)}, \\ldots, p_{0}^{(R)}, p_{1}^{(R)}, \\ldots, p_{R-1}^{(R)} of port indices, where p_{0}^{(v)}, \\ldots, p_{v-1}^{(v)} are the CSI-RS port indices associated with rank v and R \\in\\{1,2, \\ldots, P\\} where P \\in\\{1,2,4,8\\} is the number of ports in the CSI-RS resource. The UE shall only report RI corresponding to the configured fields of PortIndexFor 8Ranks. - if the UE is not configured with higher layer parameter non-PMI-PortIndication, the UE assumes, for each CSIRS resource in the CSI resource setting linked to the CSI-ReportConfig, that the CSI-RS port indices p_{0}^{(v)}, \\ldots, p_{v-1}^{(v)}=\\{0, \\ldots, v-1\\} are associated with ranks v=1,2, \\ldots, P where P \\in\\{1,2,4,8\\} is the number of ports in the CSI-RS resource. - When calculating the CQI for a rank, the UE shall use the ports indicated for that rank for the selected CSI-RS resource. The precoder for the indicated ports shall be assumed to be the identity matrix scaled by \\frac{1}{\\sqrt{v}} .\n---\nIf the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-CQI', - if the UE is configured with higher layer parameter non-PMI-PortIndication contained in a CSI-ReportConfig, r ports are indicated in the order of layer ordering for rank r and each CSI-RS resource in the CSI resource setting is linked to the CSI-ReportConfig based on the order of the associated NZP-CSI-RS-Resourceld in the linked CSI resource setting for channel measurement given by higher layer parameter resourcesForChannelMeasurement. The configured higher layer parameter non-PMI-PortIndication contains a sequence p_{0}^{(1)}, p_{0}^{(2)}, p_{1}^{(2)}, p_{0}^{(3)}, p_{1}^{(3)}, p_{2}^{(3)}, \\ldots, p_{0}^{(R)}, p_{1}^{(R)}, \\ldots, p_{R-1}^{(R)} of port indices, where p_{0}^{(v)}, \\ldots, p_{v-1}^{(v)} are the CSI-RS port indices associated with rank v and R \\in\\{1,2, \\ldots, P\\} where P \\in\\{1,2,4,8\\} is the number of ports in the CSI-RS resource. The UE shall only report RI corresponding to the configured fields of PortIndexFor 8Ranks. - if the UE is not configured with higher layer parameter non-PMI-PortIndication, the UE assumes, for each CSIRS resource in the CSI resource setting linked to the CSI-ReportConfig, that the CSI-RS port indices p_{0}^{(v)}, \\ldots, p_{v-1}^{(v)}=\\{0, \\ldots, v-1\\} are associated with ranks v=1,2, \\ldots, P where P \\in\\{1,2,4,8\\} is the number of ports in the CSI-RS resource. - When calculating the CQI for a rank, the UE shall use the ports indicated for that rank for the selected CSI-RS resource. The precoder for the indicated ports shall be assumed to be the identity matrix scaled by \\frac{1}{\\sqrt{v}} . If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RSRP', 'ssb-Index-RSRP', 'cri-RSRP-Capability[Set]Index' or 'ssb-Index-RSRP-Capability[Set]Index', - if the UE is configured with the higher layer parameter groupBasedBeamReporting set to 'disabled', the UE is not required to update measurements for more than 64 CSI-RS and/or SSB resources, and the UE shall report in a single report nrofReportedRS (higher layer configured) different CRI or SSBRI for each report setting. - if the UE is configured with the higher layer parameter groupBasedBeamReporting set to 'enabled', the UE is not required to update measurements for more than 64 CSI-RS and/or SSB resources, and the UE shall report in a single reporting instance two different CRI or SSBRI for each report setting, where CSI-RS and/or SSB resources can be received simultaneously by the UE either with a single spatial domain receive filter, or with multiple simultaneous spatial domain receive filters.\n---\n- if the UE is configured with the higher layer parameter groupBasedBeamReporting set to 'enabled', the UE shall report in a single reporting instance two different CRI or SSBRI for each report setting, where CSI-RS and/or SSB resources can be received simultaneously by the UE. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RSRP', 'cri-RI-PMI-CQI ', 'cri-RI-i1', 'cri-RI-i1-CQI', 'cri-RI-CQI', 'cri-RI-LI-PMI-CQI', 'cri-SINR', or 'cri-SINRCapability[Set]Index', and K_{s}>1 resources are configured in the corresponding resource set for channel measurement, then the UE shall derive the CSI parameters other than CRI conditioned on the reported CRI, where CRI k(k >= 0) corresponds to the configured ( k+1 )-th entry of associated nzp-CSI-RS-Resources in the corresponding NZP-CSI-RSResourceSet for channel measurement, and ( k+1 )-th entry of associated csi-IM-Resource in the corresponding csi-IMResourceSet (if configured) or ( k+1 )-th entry of associated nzp-CSI-RS-Resources in the corresponding NZP-CSI-RSResourceSet (if configured for CSI-ReportConfig with reportQuantity set to 'cri-SINR' or 'cri-SINRCapability[Set][ndex') for interference measurement. If K_{s}=2 \\mathrm{CSI} -RS resources are configured, each resource shall contain at most 16 CSI-RS ports. If 2<K_{s} <= 8 CSI-RS resources are configured, each resource shall contain at most 8 CSI-RS ports. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-PMICQI', or 'cri-RI-LI-PMI-CQI' and the corresponding NZP-CSI-RS-ResourceSet for channel measurement is configured with K_{s} >= 2 resources, two Resource Groups with K_{1} >= 1 resources in Group 1, K_{2} >= 1 resources in Group 2, K_{1}+ K_{2}=K_{s} , and N Resource Pairs: - each resource can contain, subject to UE capability, at most 32 CSI-RS ports. - each of the N Resource Pairs is associated to a CRI value. - The CSI-ReportConfig may be configured with higher layer parameter sharedCMR. M_{1} and M_{2} are the numbers of resources associated to a CRI value, other than the N CRIs defined above, in Group 1 and Group 2, respectively, with M=M_{1}+M_{2} , such that the total number of CRI values configured for the CSI-ReportConfig is M+N . - If the higher layer parameter csi-ReportMode is set to 'Model' and the higher layer parameter numberOfSingleTRP-CSI-Model is set to X \\in\\{0\\}, M_{1}=M_{2}=0 ; otherwise, - if the higher layer parameter csi-ReportMode is set to 'Mode1' and the higher layer parameter numberOfSingleTRP-CSI-Model is set to X \\in\\{1,2\\} , or if csi-ReportMode is set to 'Mode2', - if shared C M R is configured: M_{1}=K_{1} and M_{2}=K_{2} ; otherwise - if sharedCMR is not configured, only the resources in Group 1 and Group 2 that are not referred to in any Resource Pair are associated to M CRI values other than the N CRIs defined above. - If interference measurement is performed on CSI-IM, M+N resources are configured in the corresponding csi-IM-ResourceSet. The M resources for channel measurement defined above are resource-wise associated with the first M CSI-IM resources by the ordering of the CSI-RS resources and CSI-IM resources in the corresponding Resource Set. The N Resource Pairs for channel measurement are associated to the last N CSI-IM resources by the ordering of the CSI-RS Resource Pairs and CSI-IM resources in the CSI-IM Resource Set. The UE may assume that the two CSI-RS resources for channel measurement in a Resource Pair and the associated CSI-IM resource for interference measurement are resource-wise QCLed with respect to 'typeD'. - The UE is not expected to be configured with NZP CSI-RS for interference measurement other than the NZP CSI-RS resources for channel measurement configured in the N Resource Pairs.\n---\nIf the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RSRP', 'cri-RI-PMI-CQI ', 'cri-RI-i1', 'cri-RI-i1-CQI', 'cri-RI-CQI', 'cri-RI-LI-PMI-CQI', 'cri-SINR', or 'cri-SINRCapability[Set]Index', and K_{s}>1 resources are configured in the corresponding resource set for channel measurement, then the UE shall derive the CSI parameters other than CRI conditioned on the reported CRI, where CRI k(k >= 0) corresponds to the configured ( k+1 )-th entry of associated nzp-CSI-RS-Resources in the corresponding NZP-CSI-RSResourceSet for channel measurement, and ( k+1 )-th entry of associated csi-IM-Resource in the corresponding csi-IMResourceSet (if configured) or ( k+1 )-th entry of associated nzp-CSI-RS-Resources in the corresponding NZP-CSI-RSResourceSet (if configured for CSI-ReportConfig with reportQuantity set to 'cri-SINR' or 'cri-SINRCapability[Set][ndex') for interference measurement. If K_{s}=2 \\mathrm{CSI} -RS resources are configured, each resource shall contain at most 16 CSI-RS ports. If 2<K_{s} <= 8 CSI-RS resources are configured, each resource shall contain at most 8 CSI-RS ports. If the UE is configured with a CSI-ReportConfig with the higher layer parameter reportQuantity set to 'cri-RI-PMICQI', or 'cri-RI-LI-PMI-CQI' and the corresponding NZP-CSI-RS-ResourceSet for channel measurement is configured with K_{s} >= 2 resources, two Resource Groups with K_{1} >= 1 resources in Group 1, K_{2} >= 1 resources in Group 2, K_{1}+ K_{2}=K_{s} , and N Resource Pairs: - each resource can contain, subject to UE capability, at most 32 CSI-RS ports. - each of the N Resource Pairs is associated to a CRI value. - The CSI-ReportConfig may be configured with higher layer parameter sharedCMR. M_{1} and M_{2} are the numbers of resources associated to a CRI value, other than the N CRIs defined above, in Group 1 and Group 2, respectively, with M=M_{1}+M_{2} , such that the total number of CRI values configured for the CSI-ReportConfig is M+N . - If the higher layer parameter csi-ReportMode is set to 'Model' and the higher layer parameter numberOfSingleTRP-CSI-Model is set to X \\in\\{0\\}, M_{1}=M_{2}=0 ; otherwise, - if the higher layer parameter csi-ReportMode is set to 'Mode1' and the higher layer parameter numberOfSingleTRP-CSI-Model is set to X \\in\\{1,2\\} , or if csi-ReportMode is set to 'Mode2', - if shared C M R is configured: M_{1}=K_{1} and M_{2}=K_{2} ; otherwise - if sharedCMR is not configured, only the resources in Group 1 and Group 2 that are not referred to in any Resource Pair are associated to M CRI values other than the N CRIs defined above. - If interference measurement is performed on CSI-IM, M+N resources are configured in the corresponding csi-IM-ResourceSet. The M resources for channel measurement defined above are resource-wise associated with the first M CSI-IM resources by the ordering of the CSI-RS resources and CSI-IM resources in the corresponding Resource Set. The N Resource Pairs for channel measurement are associated to the last N CSI-IM resources by the ordering of the CSI-RS Resource Pairs and CSI-IM resources in the CSI-IM Resource Set. The UE may assume that the two CSI-RS resources for channel measurement in a Resource Pair and the associated CSI-IM resource for interference measurement are resource-wise QCLed with respect to 'typeD'. - The UE is not expected to be configured with NZP CSI-RS for interference measurement other than the NZP CSI-RS resources for channel measurement configured in the N Resource Pairs.\n---\n- density in resourceMapping defines CSI-RS frequency density of each CSI-RS port per PRB, and CSI-RS PRB offset in case of the density value of 1 / 2 , where the allowable values are given in Clause 7.4 - 1.5 of [4, TS 38.211]. For density 1/2, the odd/even PRB allocation indicated in density is with respect to the common resource block grid. - cdm-Type in resourceMapping defines CDM values and pattern, where the allowable values are given in Clause 7.4.1.5 of [4, TS 38.211]. - powerControlOffset: which is the assumed ratio of PDSCH EPRE to NZP CSI-RS EPRE when UE derives CSI feedback and takes values in the range of [-8,15] \\mathrm{dB} with 1 dB step size. For CQI calculation based on a pair of NZP CSI-RS resources, powerControlOffset of each NZP CSI-RS resource in the pair of NZP CSI-RS resources for channel measurement is the assumed ratio of EPRE when UE derives CSI feedback and takes values in the range of [-8,15] \\mathrm{dB} with 1 dB step size. - powerControlOffsetSS: which is the assumed ratio of NZP CSI-RS EPRE to SS/PBCH block EPRE. - scramblingID defines scrambling ID of CSI-RS with length of 10 bits. - BWP-Id in CSI-ResourceConfig defines which bandwidth part the configured CSI-RS is located in. - repetition in NZP-CSI-RS-ResourceSet is associated with a CSI-RS resource set and defines whether UE can assume the CSI-RS resources within the NZP CSI-RS Resource Set are transmitted with the same downlink spatial domain transmission filter or not as described in Clause 5.1.6.1.2. and can be configured only when the higher layer parameter reportQuantity associated with all the reporting settings linked with the CSI-RS resource set is set to 'cri-RSRP', 'cri-SINR', 'cri-RSRP-Capability[Set]Index', 'cri-S[NR-Capability[Set][ndex' or 'none'. - qcl-InfoPeriodicCSI-RS contains a reference to a TCI-State indicating QCL source RS(s) and QCL type(s). If the TCI-State is configured with a reference to an RS configured with qcl-Type set to 'typeD' association, that RS may be an SS/PBCH block located in the same or different CC/DL BWP or a CSI-RS resource configured as periodic located in the same or different CC/DL BWP. The reference RS may additionally be an SS/PBCH block associated with a PCI different from the PCI of the serving cell. - trs-Info in NZP-CSI-RS-ResourceSet is associated with a CSI-RS resource set and for which the UE can assume that the antenna port with the same port index of the configured NZP CSI-RS resources in the NZP-CSI-RSResourceSet is the same as described in Clause 5.1.6.1.1 and can be configured when reporting setting is not configured or when the higher layer parameter reportQuantity associated with all the reporting settings linked with the CSI-RS resource set is set to 'none'.\n---\n\\begin{tabular}{l} nzp-CSI-RS-ResourcesForInterference NZP CSI RS resources for interference measurement. csi-ResourceConfig/d of a CSI-ResourceConfig included in the configuration of the serving cell indicated with the field \"carrier\" above. The CS/-ResourceConfig indicated here contains only NZP-CSI-RS resources. The bwp-ld in that CSI-ResourceConfig is the same value as the bwp-ld in the CSI-ResourceConfig indicated by resourcesForChannelMeasurement. \\end{tabular} \\begin{tabular}{l} p0alpha Index of the p0-alpha set determining the power control for this CSI report transmission (see TS 38.214 [19], clause 6.2.1.2). \\end{tabular} \\begin{tabular}{l} pdsch-BundieSizeForCSI PRB bundling size to assume for CQI calculation when reportQuantity is CRI/RI/i1/CQI. If the field is absent, the UE assumes that no PRB bundling is applied (see TS 38.214 [19], clause 5.2.1.4.2). \\end{tabular} \\begin{tabular}{l}",
    "generated_at": "2026-01-07T16:28:56.309628",
    "model": "gpt-4o",
    "full_api_response": {
      "result": "DSL",
      "type": "ValueDependency",
      "dsl": "IMPLIES(IN(field1, {'cri-RSRP', 'cri-SINR', 'none'}), EQ(field2, 1))",
      "preconditions": [
        "field2 contains a NZP-CSI-RS-ResourceSet configured with repetition and without trs-Info"
      ],
      "predicate": "If reportQuantity is 'cri-RSRP', 'cri-SINR', or 'none', then resourcesForChannelMeasurement must have 1 port.",
      "advisory": false,
      "examples": {
        "valid": [
          "reportQuantity='cri-RSRP', resourcesForChannelMeasurement=1"
        ],
        "invalid": [
          "reportQuantity='cri-RSRP', resourcesForChannelMeasurement=2"
        ]
      },
      "notes": "Evidence #1 provides a normative constraint linking reportQuantity values to the number of ports in resourcesForChannelMeasurement.",
      "version_tags": [
        "r16",
        "r17"
      ]
    }
  }
}