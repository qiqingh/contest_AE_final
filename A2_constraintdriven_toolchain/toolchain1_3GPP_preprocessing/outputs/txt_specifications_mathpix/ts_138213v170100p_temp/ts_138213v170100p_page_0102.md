<!-- Page 102 of ts_138213v170100p -->

3GPP TS 38.213 version 17.1.0 Release 17
101
ETSI TS 138213 V17.1.0 (2022-05)

An orthogonal cover code with index 0 is used for a PUCCH resource with PUCCH format 1 in Table 9.2.1-1 except when index 3, 7, or 11 is indicated by pucch-ResourceCommon and useInterlacePUCCH-PUSCH in BWPUplinkCommon is provided.

The UE transmits the PUCCH using the same spatial domain transmission filter as for a PUSCH transmission scheduled by a RAR UL grant as described in clause 8.3.

If a UE is not provided any of pdsch-HARQ-ACK-Codebook, pdsch-HARQ-ACK-Codebook-r16, or pdsch-HARQ-ACKOneShotFeedback, the UE generates at most one HARQ-ACK information bit.

If the UE provides HARQ-ACK information in a PUCCH transmission in response to detecting a DCI format scheduling a PDSCH reception or having associated HARQ-ACK information without scheduling a PDSCH reception, the UE determines a PUCCH resource with index \( r_{\text {PUCCH }}, 0 \leq r_{\text {PUCCH }} \leq 15 \), as \( r_{\text {PUCCH }}=\left\lfloor\frac{2 \cdot n_{\text {CCE }, 0}}{N_{\text {CCE }}}\right\rfloor+2 \cdot \Delta_{\text {PRI }} \), where \( N_{\text {CCE }} \) is a number of CCEs in a CORESET of a PDCCH reception with the DCI format, as described in clause 10.1, \( n_{\text {CCE }, 0} \) is the index of a first CCE for the PDCCH reception, and \( \Delta_{\text {PRI }} \) is a value of the PUCCH resource indicator field in the DCI format.

When the PDCCH reception by a UE includes first and second PDCCH candidates from respective first and second search space sets, as described in clause 10.1 , the CORESET and \( n_{\text {CCE }, 0} \) are associated with the search space set having the smaller index. If
- the first search space set has larger index than the second search space set and includes the first PDCCH candidate and a third PDCCH candidate that have same first CCE index and CCE aggregation levels 8 and 16, or 16 and 8, respectively,
- the second search space set includes the second PDCCH candidate that has same index and same CCE aggregation level as the first PDCCH candidate, and a fourth PDCCH candidate that has same index and same CCE aggregation level as the third PDCCH candidate,
- the CORESET associated with the first search space set has cce-REG-MappingType \( = \) 'nonInterleaved' and has duration of one symbol, and
- the second PDCCH candidate has different first CCE index than the fourth PDCCH candidate
the UE determines \( n_{\text {CCE }, 0} \) from the PDCCH candidate with CCE aggregation level 16 among the second PDCCH candidate and the fourth PDCCH candidate.

If \( \left[r_{\text {PUCCH }} / 8\right]=0 \) and a UE is provided a PUCCH resource by pucch-ResourceCommon and is not provided useInterlacePUCCH-PUSCH in BWP-UplinkCommon
- the UE determines the lowest PRB index of the PUCCH transmission in the first hop as \( R B_{\mathrm{BWP}}^{\text {offset }} \cdot N_{R B}+ \left\lfloor r_{\text {PUCCH }} / N_{\mathrm{CS}}\right\rfloor \cdot N_{R B} \) and the lowest PRB index of the PUCCH transmission in the second hop as \( N_{\mathrm{BWP}}^{\text {size }}-R B_{\mathrm{BWP}}^{\text {offset }} \). \( N_{R B}-\left(1+\left\lfloor r_{\text {PUCCH }} / N_{\text {CS }}\right\rfloor\right) \cdot N_{R B} \), where \( N_{\text {CS }} \) is the total number of initial cyclic shift indexes in the set of initial cyclic shift indexes
- the UE determines the initial cyclic shift index in the set of initial cyclic shift indexes as \( r_{\text {PUCCH }} \bmod N_{\text {CS }} \)

If \( \left[r_{\text {PUCCH }} / 8\right]=1 \) and a UE is provided a PUCCH resource by pucch-ResourceCommon and is not provided useInterlacePUCCH-PUSCH in BWP-UplinkCommon
- the UE determines the lowest PRB index of the PUCCH transmission in the first hop as \( N_{\mathrm{BWP}}^{\text {size }}-R B_{\mathrm{BWP}}^{\text {offset }} \cdot N_{R B}- \left(1+\left\lfloor\left(r_{\text {PUCCH }}-8\right) / N_{\text {CS }}\right\rfloor\right) \cdot N_{R B} \) and the lowest PRB index of the PUCCH transmission in the second hop as \( R B_{\text {BWP }}^{\text {offset }} \cdot N_{R B}+\left\lfloor\left(r_{\text {PUCCH }}-8\right) / N_{\text {CS }}\right\rfloor \cdot N_{R B} \)
- the UE determines the initial cyclic shift index in the set of initial cyclic shift indexes as \( \left(r_{\text {PUCCH }}-8\right) \bmod N_{\text {CS }} \)

If a UE is provided a PUCCH resource by pucch-ResourceCommon and is provided useInterlacePUCCH-PUSCH in BWP-UplinkCommon
- the UE determines for the PUCCH resource an interlace index \( m \) as \( m=\left(m_{0}+\left\lfloor r_{\text {PUCCH }} / N_{\text {CS }}\right\rfloor\right) \bmod M \) where \( M \) is a number of interlaces [4, TS 38.211] and \( m_{0}=R B_{\text {BWP }}^{\text {offset }} \) is an interlace index offset and \( R B_{\text {BWP }}^{\text {offset }} \) is as given in Table 9.2.1-1

ETSI