<!-- Page 30 of ts_138213v170100p -->

3GPP TS 38.213 version 17.1.0 Release 17
29
ETSI TS 138213 V17.1.0 (2022-05)

values for the first and second SRI fields and the \( l \) values provided by sri-PUSCH-ClosedLoopIndex, and determines the \( l \) values mapped to the values of the first and second SRI fields corresponding to each SRS resource set with usage set to 'codebook', respectively
- If the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'nonCodebook', is provided SRI-PUSCHPowerControl, and a DCI format scheduling the PUSCH transmission includes two SRI fields, the UE obtains a mapping from sri-PUSCH-PowerControlld in SRI-PUSCH-PowerControl between a set of values for
- the first SRI field value and the \( l \) values provided by sri-PUSCH-ClosedLoopIndex, and determines the \( l \) value that is mapped to the first SRI field value corresponding to the first SRS resource set with usage set to 'nonCodebook', and
- the value, associated with the second SRI field value corresponding to Tables 7.3_1.1_2-28/29/30/31 of [5, TS 38.212] for a same number of layers as indicated by the first SRI field value, and the \( l \) value(s) provided by sri-PUSCH-ClosedLoopIndex, and determines the \( l \) value that is mapped to the value corresponding to the second SRS resource set with usage set to 'nonCodebook'- If the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook' or 'nonCodebook', is provided SRI-PUSCH-PowerControl, and a DCI format scheduling the PUSCH transmission does not include an SRI field
- If the UE is provided twoPUSCH-PC-AdjustmentStates
- the UE determines \( l=0 \) for the PUSCH transmission corresponding to the first SRS resource set with usage set to 'codebook' or 'nonCodebook', and \( l=1 \) for the PUSCH transmission corresponding to the second SRS resource set with usage set to 'codebook' or 'nonCodebook'
- else
- the UE determines \( l=0 \) for the PUSCH transmission
- If the UE is provided two SRS resource sets in srs-ResourceSetToAddModList or srs-ResourceSetToAddModListDCI-0-2 with usage set to 'codebook' or 'nonCodebook', and is provided twoPUSCH-PC-AdjustmentStates
- If the DCI format includes two TPC command values and the PUSCH transmissions are associated with \( l=0 \) and \( l=1 \), the UE applies the first TPC command value for \( l=0 \) and applies the second TPC command value for \( l=1 \)
- If the DCI format includes two TPC command values and the PUSCH transmissions are associated with \( l=0 \), the UE applies the first TPC command value for \( l=0 \) and ignores the second TPC command value
- If the DCI format includes two TPC command values and the PUSCH transmissions are associated with \( l=1 \), the UE applies the second TPC command value for \( l=1 \) and ignores the first TPC command value
- If the DCI format includes one TPC command value, the UE applies the TPC command value for all \( l \) associated with the PUSCH transmission
- If the UE is provided SRI-PUSCH-PowerControl, the UE obtains a mapping between a set of values for the SRI field in a DCI format scheduling the PUSCH transmission and the \( l \) value(s) provided by sri-PUSCH-ClosedLoopIndex and determines the \( l \) value that is mapped to the SRI field value
- If the PUSCH transmission is scheduled by a DCI format that does not include an SRI field, or if an SRI-PUSCH-PowerControl is not provided to the UE, \( l=0 \)
- If the UE obtains one TPC command from a DCI format 2 _ 2 with CRC scrambled by a TPC-PUSCHRNTI, the \( l \) value is provided by the closed loop indicator field in DCI format 2 _2

ETSI