<!-- Page 71 of ts_138213v170100p -->

3GPP TS 38.213 version 17.1.0 Release 17
70
ETSI TS 138213 V17.1.0 (2022-05)
```
    \( \tilde{o}_{j}^{A C K}= \) HARQ-ACK information bit for this SPS PDSCH reception
    \( j=j+1 ; \)
end if
\( n_{D}=n_{D}+1 ; \)
```

end while
\[
s=s+1 ;
\]
end while
\[
c=c+1 ;
\]
end while
9.1.2.1 Type-1 HARQ-ACK codebook in physical uplink control channel

For a serving cell \( c \), an active DL BWP, and an active UL BWP, as described in clause 12, the UE determines a set of \( M_{A, C} \) occasions for candidate PDSCH receptions for which the UE can transmit corresponding HARQ-ACK information in a PUCCH in slot \( n_{U} \). If serving cell \( c \) is deactivated, the UE uses as the active DL BWP for determining the set of \( M_{A, c} \) occasions for candidate PDSCH receptions a DL BWP provided by firstActiveDowninkBWP-Id. The determination is based:
a) on a set of slot timing values \( K_{1} \) associated with the active UL BWP on the primary cell or, if the PUCCH transmission is indicated by a DCI format to be on the PUCCH-sSCell as described in clause 9 A , on a set of slot timing values \( K_{1} \) associated with the active UL BWP on the PUCCH-sSCell
- If the UE is configured to monitor PDCCH for DCI format \( 1 \_0 \) and is not configured to monitor PDCCH for either DCI format \( 1 \_1 \) or DCI format \( 1 \_2 \) for serving cell \( c, \bar{K}_{1} \) is provided by the slot timing values \( \{1,2,3 \), \( 4,5,6,7,8\} \) for SCS configuration of PUCCH transmission \( \mu \leq 3,\{7,8,12,16,20,24,28,32\} \) for \( \mu=5 \), and \( \{13,16,24,32,40,48,56,64\} \) for \( \mu=6 \)
- If the UE is configured to monitor PDCCH for DCI format \( 1 \_1 \) and is not configured to monitor PDCCH for DCI format \( 1 \_2 \) for serving cell \( c, K_{1} \) is provided by dl-DataToUL-ACK or dl-DataToUL-ACK-r 16
- If the UE is configured to monitor PDCCH for DCI format \( 1 \_2 \) and is not configured to monitor PDCCH for DCI format \( 1 \_1 \) for serving cell \( c, K_{1} \) is provided by \( d l \)-DataToUL-ACK-DCI-1-2
- If the UE is configured to monitor PDCCH for DCI format \( 1 \_1 \) and DCI format \( 1 \_2 \) for serving cell \( c, K_{1} \) is provided by the union of dl-DataToUL-ACK or dl-DataToUL-ACK-r16 and dl-DataToUL-ACK-DCI-1-2
- If an inapplicable value in \( d l \)-DataToUL-ACK-r16 is provided, the value is excluded from \( K_{1} \)
- If the UE is configured to monitor PDCCH for multicast DCI formats for serving cell \( c \)
- if the UE is not provided typel-Codebook-Generation-Mode \( = \) 'model', \( K_{1} \) is additionally provided by the union of dl-DataToUL-ACK from pucch-ConfigurationListMulticastl or pucchConfigurationListMulticast2 and dl-DataToUL-ACK-ForDCI Format4_1
- if the UE is not provided dl-DataToUL-ACK-ForDCIFormat4_l, \( K_{1} \) is provided by the union of \( d l \) -DataToUL-ACK from pucch-ConfigurationListMulticast I or pucch-ConfigurationListMulticast 2 and the slot timing values \( \{1,2,3,4,5,6,7,8\} \)
- if the UE is provided typel-Codebook-Generation-Mode = 'model', the UE
- determines a first \( K_{1, \mathrm{UM}} \) set as \( K_{1} \cap K_{1, \mathrm{M}} \), where \( K_{1, \mathrm{M}} \) is a set of slot timing values for the multicast DCI formats, a second \( K_{1, \mathrm{U} \backslash \mathrm{M}} \) set as \( K_{1} \backslash K_{1, \mathrm{UM}} \), and a third \( K_{1, \mathrm{M} \backslash \mathrm{U}} \) set as \( K_{1, \mathrm{M}} \backslash K_{1, \mathrm{UM}} \)
b) on a set of row indexes \( R \) of a table that is associated with the active DL BWP and defining respective sets of slot offsets \( K_{0} \), start and length indicators SLIV, and PDSCH mapping types for PDSCH reception as described in [6, TS 38.214], where the row indexes \( R \) of the table are provided by

ETSI