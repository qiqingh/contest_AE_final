<!-- Page 99 of ts_138213v170100p -->

3GPP TS 38.213 version 17.1.0 Release 17
98
ETSI TS 138213 V17.1.0 (2022-05)
```
                    end while
                else
                    while \( g<N_{\text {HARQ-ACK }, c}^{\text {CBG } / \mathrm{TB}, \text { max }} \)
                        \( \tilde{o}_{j}^{A C K}= \) NACK
                        \( j=j+1 \)
                        \( g=g+1 \)
                    end while
                end if
                \( g=0 \)
                \( t=t+1 \)
            end while
        else
            while \( t<N_{\mathrm{TB}, c}^{\mathrm{DL}} \)
                if UE has obtained HARQ-ACK information for TB \( t \) for HARQ process number \( h \) on serving
                cell \( c \) corresponding to a PDSCH reception and has not reported the HARQ-ACK information
                corresponding to the PDSCH reception
                    if harq-ACK-SpatialBundlingPUCCH is not provided
                    \( \tilde{o}_{j}^{\text {ACK }}= \) HARQ-ACK information bit for TB \( t \) for HARQ process \( h \) of serving cell \( c \)
                    else
                    \( \tilde{\sigma}_{j}^{\text {ACK }}= \) binary AND operation of the HARQ-ACK information bits corresponding to first
                    and second transport blocks for HARQ process \( h \) of serving cell \( c \). If the UE receives one
                    transport block, the UE assumes ACK for the second transport block
                    end if
                    \( j=j+1 \)
                    \( t=t+1 \)
                else
                    \( \tilde{o}_{j}^{\text {ACK }}= \) NACK
                    \( j=j+1 \)
                    \( t=t+1 \)
                end if
            end while
        end if
        \( t=0 \)
    end if
end if
\( h=h+1 \)
```


ETSI