<!-- Page 117 of ts_138213v170100p -->

3GPP TS 38.213 version 17.1.0 Release 17
116
ETSI TS 138213 V17.1.0 (2022-05)

shift \( \alpha \) [4, TS 38.211] where \( m_{0} \) is provided by initialCyclicShift of PUCCH-format0, and \( m_{\mathrm{CS}} \) is determined from the value of one HARQ-ACK information bit or from the values of two HARQ-ACK information bits as in Table 9.2.5-1 and Table 9.2.5-2, respectively.

If the UE would transmit negative SR and a PUCCH with at most two HARQ-ACK information bits in a resource using PUCCH format 0 , the UE transmits the PUCCH in the resource using PUCCH format 0 for HARQ-ACK information as described in clause 9.2.3.

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table 9.2.5-1: Mapping of values for one HARQ-ACK information bit and positive SR to sequences for PUCCH format 0}
\begin{tabular}{|c|c|c|}
\hline HARQ-ACK Value & \( \mathbf{0} \) & \( \mathbf{1} \) \\
\hline Sequence cyclic shift & \( m_{C S}=3 \) & \( m_{C S}=9 \) \\
\hline
\end{tabular}
\end{table}

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table 9.2.5-2: Mapping of values for two HARQ-ACK information bits and positive SR to sequences for PUCCH format 0}
\begin{tabular}{|c|c|c|c|c|}
\hline HARQ-ACK Value & \( \{\mathbf{0}, \mathbf{0}\} \) & \( \{\mathbf{0}, \mathbf{1}\} \) & \( \{\mathbf{1}, \mathbf{1}\} \) & \( \{\mathbf{1}, \mathbf{0}\} \) \\
\hline Sequence cyclic shift & \( m_{C S}=1 \) & \( m_{C S}=4 \) & \( m_{C S}=7 \) & \( m_{C S}=10 \) \\
\hline
\end{tabular}
\end{table}

If a UE would transmit SR in a resource using PUCCH format 0 and HARQ-ACK information bits in a resource using PUCCH format 1 in a slot, the UE transmits only a PUCCH with the HARQ-ACK information bits in the resource using PUCCH format 1.

If the UE would transmit positive SR in a first resource using PUCCH format 1 and at most two HARQ-ACK information bits in a second resource using PUCCH format 1 in a slot, the UE transmits a PUCCH with HARQ-ACK information bits in the first resource using PUCCH format 1 as described in clause 9.2.3. If a UE would not transmit a positive SR in a resource using PUCCH format 1 and would transmit at most two HARQ-ACK information bits in a resource using PUCCH format 1 in a slot, the UE transmits a PUCCH in the resource using PUCCH format 1 for HARQ-ACK information as described in clause 9.2.3.

If a UE would transmit a PUCCH with \( O_{\text {ACK }} \) HARQ-ACK information bits in a resource using PUCCH format 2 or PUCCH format 3 or PUCCH format 4 in a slot, as described in clauses 9.2.1 and 9.2.3, \( \left[\log _{2}(K+1)\right] \) bits representing a negative or positive SR, in ascending order of the values of schedulingRequestResourceld, a schedulingRequestResourceld associated with schedulingRequestID-BFR-SCell, and a schedulingRequestResourceld associated with schedulingRequestID-LBT-SCell, are appended to the HARQ-ACK information bits and the UE transmits the combined \( O_{\mathrm{UCl}}=O_{\mathrm{ACK}}+\left[\log _{2}(K+1)\right] \mathrm{UCI} \) bits in a PUCCH using a resource with PUCCH format 2 or PUCCH format 3 or PUCCH format 4 that the UE determines as described in clauses 9.2.1 and 9.2.3. If one of the SRs is a positive LRR , the value of the \( \left[\log _{2}(K+1)\right] \) bits indicates the positive LRR . An all-zero value for the \( \left\lceil\log _{2}(K+1)\right\rceil \) bits represents a negative SR value across all \( K \) SRs.

If a UE would transmit a PUCCH with \( O_{\mathrm{CSI}} \mathrm{CSI} \) report bits in a resource using PUCCH format 2 or PUCCH format 3 or PUCCH format 4 in a slot, \( \left\lceil\log _{2}(K+1)\right\rceil \) bits representing corresponding negative or positive SR, in ascending order of the values of scheduling RequestResourceld, a schedulingRequestResourceld associated with schedulingRequestID-BFR-SCell, and a schedulingRequestResourceld associated with schedulingRequestID-LBT-SCell, are prepended to the CSI information bits as described in clause 9.2.5.2 and the UE transmits a PUCCH with the combined \( O_{\text {UCI }}= \left[\log _{2}(K+1)\right]+O_{\mathrm{CSI}} \mathrm{UCI} \) bits in a resource using the PUCCH format 2 or PUCCH format 3 or PUCCH format 4 for CSI reporting. If one of the SRs is a positive LRR, the value of the \( \left[\log _{2}(K+1)\right] \) bits indicates the positive LRR. An all-zero value for the \( \left[\log _{2}(K+1)\right] \) bits represents a negative SR value across all \( K \mathrm{SRs} \).

If a UE transmits a PUCCH with \( O_{\mathrm{ACK}} \) HARQ-ACK information bits, \( O_{\mathrm{SR}}=\left\lceil\log _{2}(K+1)\right\rceil \) SR bits, and \( O_{\mathrm{CRC}} \) CRC bits using PUCCH format 2 or PUCCH format 3 in a PUCCH resource that includes \( M_{\mathrm{RB}}^{\mathrm{PUCCH}} \) PRBs, the UE determines a number of PRBs \( M_{\mathrm{RB}, \mathrm{min}}^{\mathrm{PUCCH}} \) for the PUCCH transmission to be the minimum number of PRBs, that is smaller than or equal to a number of PRBs provided by nrofPRBs in PUCCH-format 2 or nrofPRBs in PUCCH-format 3 and starts from the first PRB from the number of PRBs, that results to \( \left(O_{\mathrm{ACK}}+O_{\mathrm{SR}}+O_{\mathrm{CRC}}\right) \leq M_{\mathrm{RB}, \mathrm{min}}^{\mathrm{PUCCH}} \cdot N_{\mathrm{sc}, \mathrm{ctrl}}^{\mathrm{RB}} \cdot N_{\mathrm{symb}-\mathrm{UCl}}^{\mathrm{PUCH}} \cdot Q_{m} \cdot r \) and, if \( M_{\mathrm{RB}}^{\mathrm{PUCCH}}>1,\left(O_{\mathrm{ACK}}+O_{\mathrm{SR}}+O_{\mathrm{CRC}}\right)>\left(M_{\mathrm{RB}, \mathrm{min}}^{\mathrm{PUCCH}}-1\right) \cdot N_{\mathrm{sc}, \mathrm{crl}}^{\mathrm{RB}} \cdot N_{\mathrm{symb}-\mathrm{UCl}}^{\mathrm{PUCCH}} \cdot Q_{m} \cdot r \), where \( N_{\mathrm{sc}, \mathrm{ctrl}}^{\mathrm{RB}}, N_{\mathrm{symb}-\mathrm{UCl}}^{\mathrm{PUCH}}, Q_{m} \), and \( r \) are defined in clause 9.2.5.2. For PUCCH format 3, if \( M_{\mathrm{RB} \text { min }}^{\mathrm{PUCCH}} \) is not equal \( 2^{\alpha_{2}} \cdot 3^{\alpha_{3}} \cdot 5^{\alpha_{5}} \) according to [4, TS 38.211], \( M_{\mathrm{RB}, \mathrm{m} \text { in }}^{\mathrm{PUCCH}} \) is increased to the nearest allowed value of nrofPRBs \( [12, \mathrm{TS} 38.331] \). If \( \left(O_{\mathrm{ACK}}+O_{\mathrm{SR}}+O_{\mathrm{CRC}}\right)> \left(M_{\mathrm{RB}}^{\mathrm{PUCCH}}-1\right) \cdot N_{\mathrm{sc}, \mathrm{ctrl}}^{\mathrm{RB}} \cdot N_{\text {symb-UCl }}^{\mathrm{PUCCH}} \cdot Q_{m} \cdot r \), the UE transmits the PUCCH over the \( M_{\mathrm{RB}}^{\mathrm{PUCCH}} \) PRBs.

ETSI