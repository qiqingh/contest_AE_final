<!-- Page 126 of ts_138321v180200p -->

3GPP TS 38.321 version 18.2.0 Release 18
125
ETSI TS 138321 V18.2.0 (2024-08)
- rsrp-ThresholdBFR: an RSRP threshold for the SCell beam failure recovery or for the beam failure recovery of BFD-RS set of Serving Cell;
- powerRampingStep: powerRampingStep for the SpCell beam failure recovery;
- powerRampingStepHighPriority: powerRampingStepHighPriority for the SpCell beam failure recovery;
- preambleReceivedTargetPower: preambleReceivedTargetPower for the SpCell beam failure recovery;
- preambleTransMax: preambleTransMax for the SpCell beam failure recovery;
- scalingFactorBI: scalingFactorBI for the SpCell beam failure recovery;
- ssb-perRACH-Occasion: ssb-perRACH-Occasion for the SpCell beam failure recovery using contention-free Random Access Resources;
- ra-ResponseWindow: the time window to monitor response(s) for the SpCell beam failure recovery using contention-free Random Access Resources;
- prach-ConfigurationIndex: prach-ConfigurationIndex for the SpCell beam failure recovery using contention-free Random Access Resources;
- ra-ssb-OccasionMaskIndex: ra-ssb-OccasionMaskIndex for the SpCell beam failure recovery using contentionfree Random Access Resources;
- ra-OccasionList: ra-OccasionList for the SpCell beam failure recovery using contention-free Random Access Resources;
- candidateBeamRSList: list of candidate beams for SpCell beam failure recovery;
- candidateBeamRS-List-r16: list of candidate beams for SCell beam failure recovery or list of candidate beams for beam failure recovery of a Serving Cell for BFD-RS set one;
- candidateBeamRS-List2-r17: list of candidate beams for beam failure recovery of a Serving Cell for BFD-RS set two.

The following UE variables are used for the beam failure detection procedure:
- BFI_COUNTER (per Serving Cell or per BFD-RS set of Serving Cell configured with two BFD-RS sets): counter for beam failure instance indication which is initially set to 0 .

The MAC entity shall for each Serving Cell configured for beam failure detection:
1> if the Serving Cell is configured with two BFD-RS sets:
\( 2> \) if beam failure instance indication for a BFD-RS set has been received from lower layers:
3> start or restart the beamFailureDetectionTimer of the BFD-RS set;
3> increment BFI_COUNTER of the BFD-RS set by 1 ;
3> if BFI_COUNTER of the BFD-RS set >= beamFailureInstanceMaxCount:
4> trigger a BFR for this BFD-RS set of the Serving Cell;
\( 2> \) if BFR is triggered for both BFD-RS sets of the SpCell and the Beam Failure Recovery procedure is not successfully completed for any of the BFD-RS sets:
\( 3> \) initiate a Random Access procedure (see clause 5.1) on the SpCell;
\( 2> \) if the Serving Cell is SpCell and the Random Access procedure initiated for beam failure recovery of both BFD-RS sets of SpCell is successfully completed (see clause 5.1):

3> set BFI_COUNTER of each BFD-RS set of SpCell to 0 .
3> consider the Beam Failure Recovery procedure successfully completed.
\( 2> \) if the beamFailureDetectionTimer of this BFD-RS set expires; or

ETSI