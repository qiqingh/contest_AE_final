<!-- Page 62 of ts_138321v180200p -->

3GPP TS 38.321 version 18.2.0 Release 18
61
ETSI TS 138321 V18.2.0 (2024-08)
5.4 UL-SCH data transfer
5.4.1 UL Grant reception

Uplink grant is either received dynamically on the PDCCH , in a Random Access Response, configured semipersistently by RRC or determined to be associated with the PUSCH resource of MSGA as specified in clause 5.1.2a. The MAC entity shall have an uplink grant to transmit on the UL-SCH. To perform the requested transmissions, the MAC layer receives HARQ information from lower layers. An uplink grant addressed to CS-RNTI with NDI \( =0 \) is considered as a configured uplink grant. An uplink grant addressed to CS-RNTI with NDI \( =1 \) is considered as a dynamic uplink grant.

For a BWP configured with \( s T x-2 P \) anel, the MAC entity considers the PUSCH duration of one uplink grant overlaps with the PUSCH duration of another uplink grant if they are overlapping in time and associated with an srsResourceSetld corresponding to the same coresetPoollndex.

If the MAC entity has a C-RNTI, a Temporary C-RNTI, or CS-RNTI, the MAC entity shall for each PDCCH occasion and for each Serving Cell belonging to a TAG that has a running timeAlignmentTimer or a running cg-SDTTimeAlignmentTimer and for each grant received for this PDCCH occasion:
\( 1> \) if an uplink grant for this Serving Cell has been received on the PDCCH for the MAC entity's C-RNTI or Temporary C-RNTI; or
\( 1> \) if an uplink grant has been received in a Random Access Response:
\( 2> \) if the uplink grant is for MAC entity's C-RNTI and if the previous uplink grant delivered to the HARQ entity for the same HARQ process was either an uplink grant received for the MAC entity's CS-RNTI or a configured uplink grant:
\( 3> \) consider the NDI to have been toggled for the corresponding HARQ process regardless of the value of the NDI.
\( 2> \) if the uplink grant is for MAC entity's C-RNTI, and the identified HARQ process is configured for a configured uplink grant:
\( 3> \) start or restart the configuredGrantTimer for the corresponding HARQ process, if configured;
\( 3> \) stop the cg-RetransmissionTimer for the corresponding HARQ process, if running-
\( 2> \) stop the cg-SDT-RetransmissionTimer for the corresponding HARQ process, if running.
\( 2> \) stop the cg-RRC-RetransmissionTimer for the corresponding HARQ process, if running.
\( 2> \) if the uplink grant has been received on the PDCCH for the MAC entity's C-RNTI after the first PUSCH transmission to the Serving Cell; and
\( 2> \) if the uplink grant is for a new transmission on the same HARQ process used for the first PUSCH transmission to the Serving Cell:
\( 3> \) if there is an ongoing RACH-less handover procedure:
4> consider the RACH-less handover to be successfully completed and indicate to upper layers.
3> else if there is an ongoing RACH-less LTM cell switch:
\( 4> \) consider the LTM cell switch to be successfully completed and indicate it to upper layers.
\( 2> \) deliver the uplink grant and the associated HARQ information to the HARQ entity.
\( 1> \) else if an uplink grant for this PDCCH occasion has been received for this Serving Cell on the PDCCH for the MAC entity's CS-RNTI:
\( 2> \) if the NDI in the received HARQ information is 1 :
\( 3> \) consider the NDI for the corresponding HARQ process not to have been toggled;

ETSI