<!-- Page 92 of ts_138321v180200p -->

3GPP TS 38.321 version 18.2.0 Release 18
91
ETSI TS 138321 V18.2.0 (2024-08)

3> instruct the Multiplexing and Assembly procedure to generate the Timing Advance Report MAC CE as defined in clause 6.1.3.56.
\( 2> \) else
\( 3> \) if timingAdvanceSR is configured with value enabled:
4> trigger a Scheduling Request.
NOTE: UL-SCH resources are considered available if the MAC entity has been configured with, receives, or determines an uplink grant. If the MAC entity has determined at a given point in time that UL-SCH resources are available, this need not imply that UL-SCH resources are available for use at that point in time.

A MAC PDU shall contain at most one Timing Advance Report MAC CE, even when multiple events have triggered a Timing Advance report. The Timing Advance Report MAC CE shall be generated based on the latest available estimate of the UE's Timing Advance value prior to the MAC PDU assembly.

All triggered Timing Advance reports shall be cancelled when a MAC PDU is transmitted and this PDU includes a Timing Advance Report MAC CE.
5.4.9 Delay status reporting

The Delay Status Reporting (DSR) procedure is used to provide the serving gNB with delay status of LCGs. This delay status for an LCG includes remaining time, which is the smallest remaining value of the running PDCP discardTimers among PDCP SDUs that are buffered for the LCG but have not been transmitted in any MAC PDU as specified in clause 7.3 in TS 38.323 [4], and the total amount of delay-critical UL data for the LCG according to the data volume calculation procedure specified in clause 5.5 in TS 38.322 [3] and clause 5.15 in TS 38.323 [4] for the associated RLC and PDCP entities, respectively.

RRC controls the DSR procedure by configuring the following parameter:
- remainingTimeThreshold (per LCG): the threshold on remaining time for triggering a DSR for a logical channel within an LCG.

If an LCG is configured for delay status reporting, the MAC entity shall for each logical channel within the LCG:
\( 1> \) if the smallest remaining value of the running PDCP discardTimers among all the PDCP SDUs buffered for the logical channel that have not been transmitted in any MAC PDU and have not been reported as data volume in a DSR MAC CE becomes below remainingTimeThreshold of the LCG; and
\( 1> \) if there is no DSR pending for the logical channel:
\( 2> \) trigger a DSR for the logical channel.
If there is at least one DSR pending, the MAC entity shall:
1> if UL-SCH resources are available for a new transmission and the UL-SCH resources can accommodate the DSR MAC CE plus its subheader as a result of logical channel prioritization:
\( 2> \) instruct the Multiplexing and Assembly procedure to generate the DSR MAC CE as specified in clause 6.1.3.72.

1> else if there is no pending SR already triggered by the DSR procedure for the same logical channel as of this DSR:
\( 2> \) trigger a Scheduling Request.
NOTE 1: The availability of UL-SCH resources for the transmission of the DSR MAC CE follows the same critieria specified in clause 5.4.5.

A PDCP SDU is considered to be associated with a DSR if it has not been transmitted in any MAC PDU and is a delaycritical PDCP SDU (as defined in TS 38.323 [4]) associated with the logical channel which triggered the DSR.

ETSI