<!-- Page 195 of ts_138321v180200p -->

3GPP TS 38.321 version 18.2.0 Release 18
194
ETSI TS 138321 V18.2.0 (2024-08)

\( 2> \) set the RSRP_THRESHOLD to the value of sdt-RSRP-Threshold, if configured.
1> else if SDT procedure is initiated for MT-SDT as specified in TS 38.331 [5]:
\( 2> \) set the MAX_DURATION_TO_NEXT_CG_OCCASION to the value of cg-MT-SDT-MaxDurationToNextCGOccasion, if configured;
\( 2> \) if \( m t-S D T-R S R P \)-Threshold is configured:
\( 3> \) set the RSRP_THRESHOLD to the value of mt-SDT-RSRP-Threshold.
\( 2> \) else if sdt-RSRP-Threshold is configured:
\( 3> \) set the RSRP_THRESHOLD to the value of sdt-RSRP-Threshold.
1> if the SDT procedure is initiated for MO-SDT as specified in TS 38.331 [5], and the data volume of the pending UL data across all RBs configured for SDT is less than or equal to sdt-DataVolumeThreshold, or if the SDT procedure is initiated for MT-SDT as specified in TS 38.331 [5]; and

NOTE 1: For SDT procedure, the MAC entity also considers the suspended RBs configured with SDT for data volume calculation. It is up to the UE's implementation how the UE calculates the data volume for the suspended RBs. Size of the CCCH message is not considered for data volume calculation
\( 1> \) if the RSRP of the downlink pathloss reference is higher than RSRP_THRESHOLD or if RSRP_THRESHOLD is not set:
\( 2> \) if the Serving Cell is configured with supplementary uplink as specified in TS 38.331 [5]; and
\( 2> \) if the RSRP of the downlink pathloss reference is less than rsrp-ThresholdSSB-SUL:
3> select the SUL carrier.
\( 2> \) else:
\( 3> \) select the NUL carrier.
\( 2> \) if CG-SDT is configured on the selected UL carrier, and TA for CG-SDT is valid according to clause 5.27 .2 in the first available CG occasion for initial CG-SDT transmission with CCCH message according to clause 5.8.2; and

2 if the SDT procedure is initiated for MO-SDT as specified in TS 38.331 [5], and, for each RB having data available for transmission, configuredGrantTypelAllowed, if configured for CG-SDT, is configured with value true for the corresponding logical channel, or if the SDT procedure is initiated for MT-SDT as specified in TS 38.331 [5]; and
\( 2> \) if at least one SSB configured for CG-SDT with SS-RSRP above cg-SDT-RSRP-ThresholdSSB is available, and if either the time gap between the initiation of the SDT procedure and first available CG occasion for initial CG-SDT transmission with CCCH message according to clause 5.8.2 is less than MAX_DURATION_TO_NEXT_CG_OCCASION, or if the MAX_DURATION_TO_NEXT_CG_OCCASION is not set:
\( 3> \) indicate to the upper layers that the conditions for initiating SDT procedure are fulfilled;
3> perform CG-SDT procedure on the selected UL carrier according to clause 5.8.2.
\( 2> \) else if a set of Random Access resources for RA-SDT is configured and can be selected according to clause 5.1.1b on the selected UL carrier on the BWP configured by initialUplinkBWP-RedCap, if configured for an (e)RedCap UE; otherwise, on the BWP configured by initialUplinkBWP; or
\( 2> \) if the SDT procedure is initiated for MT-SDT as specified in TS 38.331 [5]:
3> if cg-SDT-TimeAlignmentTimer is running, consider cg-SDT-TimeAlignmentTimer as expired and perform the corresponding actions in clause 5.2;
\( 3> \) indicate to the upper layers that the conditions for initiating SDT procedure are fulfilled.
\( 2> \) else:

ETSI