<!-- Page 176 of ts_138321v180200p -->

3GPP TS 38.321 version 18.2.0 Release 18
175
ETSI TS 138321 V18.2.0 (2024-08)

\( 1> \) if \( u \)-PrioritizationThres is configured and if the value of the highest priority of logical channel(s) of all the NR uplink transmission(s) is not lower than \( u \)-PrioritizationThres, and
\( 1> \) if \( s \)-PrioritizationThres is configured and if the value of SL-PRS priority is lower than sl-PrioritizationThres.
5.22.1.4 Multiplexing and assembly
5.22.1.4.0 General

For PDU(s) associated with one SCI, MAC shall consider only logical channels with the same Source Layer-2 [DDestination Layer-2 [D pair for one of unicast, groupcast and broadcast which is associated with the pair. Multiple transmissions for different Sidelink processes are allowed to be independently performed in different PSSCH durations.

NOTE: Sidelink data for discovery and sidelink data for non-discovery transmitted by a UE cannot be multiplexed into the same TB because they are always associated with different destination L2 IDs (see TS 23.304 [26]).
5.22.1.4.1 Logical channel prioritization
5.22.1.4.1.1 General

The sidelink Logical Channel Prioritization procedure is applied whenever a new transmission is performed.
RRC controls the scheduling of sidelink data by signalling for each logical channel:
- sl-Priority where an increasing priority value indicates a lower priority level;
- sl-PrioritisedBitRate which sets the sidelink Prioritized Bit Rate (SPBR);
- sl-BucketSizeDuration which sets the sidelink Bucket Size Duration (sBSD).

RRC additionally controls the LCP procedure by configuring mapping restrictions for each logical channel:
- sl-configuredGrantTypelAllowed which sets whether a configured grant Type 1 can be used for sidelink transmission;
- sl-AllowedCG-List which sets the allowed configured grant(s) for sidelink transmission;
- sl-HARQ-FeedbackEnabled which sets whether the logical channel is allowed to be multiplexed with logical channel(s) with sl-HARQ-FeedbackEnabled set to enabled or disabled;
- sl-AllowedCarriers which sets the allowed sidelink carrier(s) for sidelink transmission.

The following UE variable is used for the Logical channel prioritization procedure:
- SBj which is maintained for each logical channel \( j \).

The MAC entity shall initialize SBj of the logical channel to zero when the logical channel is established.
For each logical channel \( j \), the MAC entity shall:
\( 1> \) increment \( S B j \) by the product sPBR \( \times T \) before every instance of the LCP procedure, where T is the time elapsed since SBJ was last incremented;
\( 1> \) if the value of \( S B j \) is greater than the sidelink bucket size (i.e. sPBR Ã— sBSD):
\( 2> \) set \( S B j \) to the sidelink bucket size.
NOTE: The exact moment(s) when the UE updates SBj between LCP procedures is up to UE implementation, as long as SBj is up to date at the time when a grant is processed by LCP.
5.22.1.4.1.2 Selection of logical channels and SL-PRS

The MAC entity shall for each SCI corresponding to a new transmission:

ETSI