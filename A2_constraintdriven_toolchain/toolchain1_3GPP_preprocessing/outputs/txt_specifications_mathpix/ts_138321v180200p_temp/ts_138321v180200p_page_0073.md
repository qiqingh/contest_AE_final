<!-- Page 73 of ts_138321v180200p -->

3GPP TS 38.321 version 18.2.0 Release 18
72
ETSI TS 138321 V18.2.0 (2024-08)

NOTE 1: Among the UL transmissions where the MAC entity is able to perform the transmission of NR sidelink communication prioritized simultaneously, if there are more than one UL transmission which the MAC entity is not able to perform simultaneously, it is up to UE implementation whether this UL transmission is performed.

NOTE 2: Among the UL transmissions that the MAC entity is able to perform simultaneously with all transmission(s) of V2X sidelink communication prioritized, if there are more than one UL transmission which the MAC entity is not able to perform simultaneously, it is up to UE implementation whether this UL transmission is performed.

NOTE 3: Among the UL transmissions where the MAC entity is able to perform the NR sidelink transmission prioritized simultaneously with all transmission(s) of V2X sidelink communication prioritized, if there are more than one UL transmission which the MAC entity is not able to perform simultaneously, it is up to UE implementation whether this UL transmission is performed.

NOTE 4: If there is configured grant(s) for transmission of V2X sidelink communication on SL-SCH as determined in clause 5.14.1.2.2 of TS 36.321 [22] at the time of the transmission, and the MAC entity is not able to perform this UL transmission simultaneously with the transmission(s) of V2X sidelink communication, and prioritization-related information is not available prior to the time of the transmission due to processing time restriction, it is up to UE implementation whether this UL transmission is performed.
5.4.3 Multiplexing and assembly
5.4.3.1 Logical Channel Prioritization
5.4.3.1.1 General

The Logical Channel Prioritization (LCP) procedure is applied whenever a new transmission is performed.
RRC controls the scheduling of uplink data by signalling for each logical channel per MAC entity:
- priority where an increasing priority value indicates a lower priority level;
- prioritisedBitRate which sets the Prioritized Bit Rate (PBR);
- bucketSizeDuration which sets the Bucket Size Duration (BSD).

RRC additionally controls the LCP procedure by configuring mapping restrictions for each logical channel:
- allowedSCS-List which sets the allowed Subcarrier Spacing(s) for transmission;
- maxPUSCH-Duration which sets the maximum PUSCH duration allowed for transmission;
- configuredGrantTypelAllowed which sets whether a configured grant Type 1 can be used for transmission;
- allowedServingCells which sets the allowed cell(s) for transmission;
- allowedCG-List which sets the allowed configured grant(s) for transmission;
- allowedPHY-PriorityIndex which sets the allowed PHY priority index(es) of a dynamic grant for transmission;
- allowedHARQ-mode which sets the allowed UL HARQ mode for transmission.

The following UE variable is used for the Logical channel prioritization procedure:
- Bj which is maintained for each logical channel j.

The MAC entity shall initialize Bj of the logical channel to zero when the logical channel is established.
For each logical channel \( j \), the MAC entity shall:
\( 1> \) increment \( B j \) by the product \( \mathrm{PBR} \times \mathrm{T} \) before every instance of the LCP procedure, where T is the time elapsed since Bj was last incremented;
\( 1> \) if the value of \( B j \) is greater than the bucket size (i.e. \( \mathrm{PBR} \times \mathrm{BSD} \) ):

ETSI