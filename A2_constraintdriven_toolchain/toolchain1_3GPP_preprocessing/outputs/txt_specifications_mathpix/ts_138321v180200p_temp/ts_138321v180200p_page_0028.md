<!-- Page 28 of ts_138321v180200p -->

3GPP TS 38.321 version 18.2.0 Release 18
27
ETSI TS 138321 V18.2.0 (2024-08)

\( 2>\operatorname{set} M S G A \_P R E A M B L E \_P O W E R \_R A M P I N G \_S T E P \) to \( P R E A M B L E \_P O W E R \_R A M P I N G \_S T E P \).
\( 1> \) else (i.e. \( R A \_ \)TYPE is set to 4 -stepRA):
\( 2> \) set PREAMBLE_POWER_RAMPING_STEP to powerRampingStep;
\( 2> \) set SCALING_FACTOR_BI to 1;
\( 2> \) set preambleTransMax to preambleTransMax included in the RACH-ConfigGeneric;
\( 2> \) if the Random Access procedure was initiated for SpCell beam failure recovery (as specified in clause 5.17 ); and
\( 2> \) if beamFailureRecoveryConfig is configured for the active UL BWP of the selected carrier:
\( 3> \) start the beamFailureRecoveryTimer, if configured;
\( 3> \) apply the parameters powerRampingStep, preambleReceivedTargetPower, and preambleTransMax configured in the beamFailureRecoveryConfig-
\( 2> \) if the Random Access procedure was initiated for beam failure recovery (as specified in clause 5.17 ); and
\( 2> \) if beamFailureRecoveryConfig is configured for the active UL BWP of the selected carrier; and
\( 2> \) if ra-Prioritization is configured in the beamFailureRecoveryConfig:
\( 3> \) set PREAMBLE_POWER_RAMPING_STEP to the powerRampingStepHighPriority included in the raPrioritization in beamFailureRecoveryConfig;
\( 3> \) if scalingFactorB/is configured in ra-Prioritization in the beamFailureRecoveryConfig:
\( 4> \) set SCALING_FACTOR_BI to the scalingFactorBI.
\( 2> \) else if the Random Access procedure was initiated for reconfiguration with sync or for SCG activation; and
\( 2> \) if rach-ConfigDedicated is configured for the selected carrier; and
\( 2> \) if \( r a \)-Prioritization is configured in the rach-ConfigDedicated:
\( 3> \) set PREAMBLE_POWER_RAMPING_STEP to the powerRampingStepHighPriority included in the raPrioritization in rach-ConfigDedicated;
\( 3> \) if scalingFactorBI is configured in \( r a \)-Prioritization in the rach-ConfigDedicated:
\( 4> \) set \( S C A L I N G \) FACTOR_BI to the scalingFactorBI
\( 2> \) else if both ra-PrioritizationForSlicing for a NSAG-ID and ra-PrioritizationForAccessldentity are configured for the selected carrier; and
\( 2> \) if the MAC entity is provided by upper layers with both this NSAG-ID and Access Identity 1 or 2; and
\( 2> \) if for at least one of these Access [dentities the corresponding bit in the ra-PrioritizationForAI is set to one:
\( 3> \) if enableRA-PrioritizationForShicing is set to true:
4 if powerRampingStepHighPriority is configured in the ra-PrioritizationForShicing for this NSAG-ID:
\( 5> \) set PREAMBLE_POWER_RAMPING_STEP to the powerRampingStepHighPriority.
4 if scalingFactorBI is configured in the ra-PrioritizationForSlicing for this NSAG-ID:
\( 5> \) set \( S C A L I N G \) FACTOR_BI to the scalingFactorBI.
\( 3> \) else if enableRA-PrioritizationForShicing is set to false:
\( 4> \) if powerRampingStepHighPriority is configured in the ra-PrioritizationForAccessIdentity:
\( 5> \) set PREAMBLE_POWER_RAMPING_STEP to the powerRampingStepHighPriority.

ETSI