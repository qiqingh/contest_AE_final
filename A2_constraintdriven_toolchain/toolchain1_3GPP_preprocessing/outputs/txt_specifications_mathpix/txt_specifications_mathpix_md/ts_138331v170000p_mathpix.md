# ts_138331v170000p

Processed with Mathpix OCR API + pdfplumber fallback
Total pages: 1197
Generated: 2025-12-06T18:02:39.109140

================================================================================


--- Page 1  ---


ETSI TS 138331 v17.0.0 (2022-05)

TECHNICAL SPECIFICATION

\title{
5G; \\ NR; \\ Radio Resource Control (RRC); Protocol specification \\ (3GPP TS 38.331 version 17.0.0 Release 17)
}


--- Page 2  ---


3GPP TS 38.331 version 17.0.0 Release 17
1
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline Reference \\
\hline RTS/TSGR-0238331vh00 \\
\hline Keywords \\
\hline 5G \\
\hline ETSI 650 Route des Lucioles F-06921 Sophia Antipolis Cedex - FRANCE \\
\hline \\
\hline \\
\hline Tel.: +33 492944200 Fax: +33 493654716 \\
\hline Siret No 34862356200017 - APE 7112B Association à but non lucratif enregistree à la Sous-Préfecture de Grasse (06) No w061004871 \\
\hline Important notice \\
\hline The present document can be downloaded from: http://www.etsi.org/standards-search \\
\hline
\end{tabular}

The present document may be made available in electronic versions and/or in print. The content of any electronic and/or print versions of the present document shall not be modified without the prior written authorization of ETSI. In case of any existing or perceived difference in contents between such versions and/or in print, the prevailing version of an ETSI deliverable is the one made publicly available in PDF format at www.etsi.org/deliver.

Users of the present document should be aware that the document may be subject to revision or change of status. Information on the current status of this and other ETSI documents is available at https://portal.etsi.org/TB/ETSIDeliverableStatus.aspx

If you find errors in the present document, please send your comment to one of the following services: https://portal.etsi.org/People/CommiteeSupportStaff.aspx

If you find a security vulnerability in the present document, please report it through our
Coordinated Vulnerability Disclosure Program:
https://www.etsi.org/standards/coordinated-vulnerability-disclosure
Notice of disclaimer \& limitation of liability
The information provided in the present deliverable is directed solely to professionals who have the appropriate degree of experience to understand and interpret its content in accordance with generally accepted engineering or other professional standard and applicable regulations.
No recommendation as to products and services or vendors is made or should be implied.
No representation or warranty is made that this deliverable is technically accurate or sufficient or conforms to any law and/or governmental rule and/or regulation and further, no representation or warranty is made of merchantability or fitness for any particular purpose or against infringement of intellectual property rights.
In no event shall ETSI be held liable for loss of profits or any other incidental or consequential damages.
Any software contained in this deliverable is provided "AS IS" with no warranties, express or implied, including but not limited to, the warranties of merchantability, fitness for a particular purpose and non-infringement of intellectual property rights and ETSI shall not be held liable in any event for any damages whatsoever (including, without limitation, damages for loss of profits, business interruption, loss of information, or any other pecuniary loss) arising out of or related to the use of or inability to use the software.

Copyright Notification
No part may be reproduced or utilized in any form or by any means, electronic or mechanical, including photocopying and microfilm except as authorized by written permission of ETSI.
The content of the PDF version shall not be modified without the written authorization of ETSI.
The copyright and the foregoing restriction extend to reproduction in all media.
© ETSI 2022.
All rights reserved.

ETSI


--- Page 3  ---


3GPP TS 38.331 version 17.0.0 Release 17
2
ETSI TS 138331 V17.0.0 (2022-05)

Intellectual Property Rights

Essential patents
IPRs essential or potentially essential to normative deliverables may have been declared to ETSL. The declarations pertaining to these essential IPRs, if any, are publicly available for ETSI members and non-members, and can be found in ETSI SR 000 314: "Intellectual Property Rights (IPRs); Essential, or potentially Essential, IPRs notified to ETSI in respect of ETSI standards", which is available from the ETSI Secretariat. Latest updates are available on the ETSI Web server (https://ipr.etsi.org).

Pursuant to the ETSI Directives including the ETSI IPR Policy, no investigation regarding the essentiality of [PRs, including IPR searches, has been carried out by ETSI. No guarantee can be given as to the existence of other IPRs not referenced in ETSI SR 000314 (or the updates on the ETSI Web server) which are, or may be, or may become, essential to the present document.

Trademarks
The present document may include trademarks and/or tradenames which are asserted and/or registered by their owners. ETSI claims no ownership of these except for any which are indicated as being the property of ETSI, and conveys no right to use or reproduce any trademark and/or tradename. Mention of those trademarks in the present document does not constitute an endorsement by ETSI of products, services or organizations associated with those trademarks.

DECT \( { }^{\text {TM }} \), PLUGTESTS \( { }^{\text {TM }} \), UMTS \( { }^{\text {TM }} \) and the ETSI logo are trademarks of ETSI registered for the benefit of its Members. 3GPPTM and LTETM are trademarks of ETSI registered for the benefit of its Members and of the 3GPP Organizational Partners. oneM2M \( { }^{\text {TM }} \) logo is a trademark of ETSI registered for the benefit of its Members and of the oneM2M Partners. GSM \( { }^{\text {® }} \) and the GSM logo are trademarks registered and owned by the GSM Association.

Legal Notice
This Technical Specification (TS) has been produced by ETSI 3rd Generation Partnership Project (3GPP).
The present document may refer to technical specifications or reports using their 3GPP identities. These shall be interpreted as being references to the corresponding ETSI deliverables.

The cross reference between 3GPP and ETSI identities can be found under http//webapp.etsi.org/key/queryform.asp.
Modal verbs terminology
In the present document "shall", "shall not", "should", "should not", "may", "need not", "will", "will not", "can" and "cannot" are to be interpreted as described in clause 3.2 of the ETSI Drafting Rules (Verbal forms for the expression of provisions).
"must" and "must not" are NOT allowed in ETSI deliverables except when used in direct citation.

ETSI


--- Page 4  ---


3GPP TS 38.331 version 17.0.0 Release 17
3
ETSI TS 138331 V17.0.0 (2022-05)

Contents

Intellectual Property Rights ………………………………………………………………………………………… 2

Foreword…………………………………………………………………………………………………............. .23

2 References ..................................................................................................................................... 24
3 Definitions, symbols and abbreviations .................................................................................. 27
4.4 Functions

5 Procedures ......................................................................................................................... 36
5.2.2.2.1 SIB validity-------------------------------------------------------------------------------------------------- 39
5.2.2.2.2 SI change indication and PWS notification .................................................................................... 40
5.2.2.3 Acquisition of System Information ................................................................................................. 42
5.2.2.3.3a Request for on demand positioning system information .............................................................. 45
5.2.2.3.4 Actions related to transmission of RRCSystemInfoRequest message ............................................. 46
5.2.2.3.5 Acquisition of SIB(s) or posSIB(s) in RRC_CONNECTED
5.2.2.3.6 Actions related to transmission of DedicatedSIBRequest message .................................................. 47
5.2.2.4 Actions upon receipt of System Information .................................................................................... 47
5.2.2.4.3 Actions upon reception of SIB2
5.2.2.4.4 Actions upon reception of SIB3
5.2.2.4.5 Actions upon reception of SIB4 ⋯⋯ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 52
5.2.2.4.6 Actions upon reception of SIB5
5.2.2.4.8 Actions upon reception of SIB7
5.2.2.4.9 Actions upon reception of SIB8
5.2.2.4.11 Actions upon reception of SIB10

ETSI


--- Page 5  ---


3GPP TS 38.331 version 17.0.0 Release 17
4
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline 5.2.2.4.15 & Actions upon reception of SIB14 \\
\hline 5.2.2.4.16 & Actions upon reception of SIBpos \\
\hline 5.2.2.4.17 & Actions upon reception of SIB 15 \\
\hline 5.2.2.4.18 & Actions upon reception of SIB16 \\
\hline 5.2.2.4.19 & Actions upon reception of SIB17 \\
\hline 5.2.2.4.20 & Actions upon reception of SIB18 \\
\hline 5.2.2.4.21 & Actions upon reception of SIB19 \\
\hline 5.2.2.4.22 & Actions upon reception of SIB20 \\
\hline 5.2.2.4.23 & Actions upon reception of SIB21 \\
\hline 5.2.2.5 & Essential system information missing \\
\hline 5.3 & Connection control \\
\hline 5.3.1 & Introduction \\
\hline 5.3.1.1 & RRC connection control \\
\hline 5.3.1.2 & AS Security \\
\hline 5.3.2 & Paging \\
\hline 5.3.2.1 & General \\
\hline 5.3.2.2 & Initiation \\
\hline 5.3.2.3 & Reception of the Paging message by the UE \\
\hline 5.3.3 & RRC connection establishment \\
\hline 5.3.3.1 & General \\
\hline 5.3.3.1a & Conditions for establishing RRC Connection for NR sidelink communication/discovery/V2X sidelink communication \\
\hline 5.3.3.2 & Initiation \\
\hline 5.3.3.3 & Actions related to transmission of RRCSetupRequest message \\
\hline 5.3.3.4 & Reception of the RRCSetup by the UE \\
\hline 5.3.3.5 & Reception of the RRCReject by the UE \\
\hline 5.3.3.6 & Cell re-selection or cell selection while T390, T300 or T302 is running (UE in RRC_IDLE) \\
\hline 5.3.3.7 & T300 expiry \\
\hline 5.3.3.8 & Abortion of RRC connection establishment \\
\hline 5.3 .4 & Initial AS security activation \\
\hline 5.3.4.1 & General \\
\hline 5.3.4.2 & Initiation \\
\hline 5.3.4.3 & Reception of the SecurityModeCommand by the UE \\
\hline 5.3.5 & RRC reconfiguration \\
\hline 5.3.5.1 & General \\
\hline 5.3.5.2 & Initiation \\
\hline 5.3.5.3 & Reception of an RRCReconfiguration by the UE \\
\hline 5.3.5.4 & Secondary cell group release \\
\hline 5.3.5.5 & Cell Group configuration \\
\hline 5.3.5.5.1 & General \\
\hline 5.3.5.5.2 & Reconfiguration with sync \\
\hline 5.3.5.5.3 & RLC bearer release \\
\hline 5.3.5.5.4 & RLC bearer addition/modification \\
\hline 5.3.5.5.5 & MAC entity configuration \\
\hline 5.3.5.5.6 & RLF Timers \& Constants configuration \\
\hline 5.3.5.5.7 & SpCell Configuration \\
\hline 5.3.5.5.8 & SCell Release \\
\hline 5.3.5.5.9 & SCell Addition/Modification \\
\hline 5.3.5.5.10 & BH RLC channel release \\
\hline 5.3.5.5.11 & BH RLC channel addition/modification \\
\hline 5.3.5-5.12 & Uu Relay RLC channel release \\
\hline 5.3.5.5.13 & Uu Relay RLC channel addition/modification \\
\hline 5.3.5.6 & Radio Bearer configuration \\
\hline 5.3.5.6.1 & General \\
\hline 5.3.5.6.2 & SRB release \\
\hline 5.3.5.6.3 & SRB addition/modification \\
\hline 5.3.5.6.4 & DRB release \\
\hline 5.3.5.6.5 & DRB addition/modification \\
\hline 5.3.5.6.6 & Multicast MRB release \\
\hline 5.3.5.6.7 & Multicast MRB addition/modification \\
\hline 5.3.5.7 & AS Security key update \\
\hline 5.3.5.8 & Reconfiguration failure \\
\hline
\end{tabular}

ETSI


--- Page 6  ---


3GPP TS 38.331 version 17.0.0 Release 17
5
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline 5.3.5.8.1 & Void & 99 \\
\hline 5.3.5.8.2 & Inability to comply with RRCReconfiguration & 99 \\
\hline 5.3.5.8.3 & T304 expiry (Reconfiguration with sync Failure) or T420 expiry (Path switch failure) & 101 \\
\hline 5.3.5.9 & Other configuration & 102 \\
\hline 5.3.5.10 & MR-DC release & 106 \\
\hline 5.3.5.11 & Full configuration & 106 \\
\hline 5.3.5.12 & BAP configuration & 108 \\
\hline 5.3.5.12a & [AB Other Configuration & 108 \\
\hline 5.3.5-12a.1 & I P address management & 108 \\
\hline 5.3.5.12a.1.1 & IP Address Release & 108 \\
\hline 5.3.5.12a.1.2 & IP Address Addition/Modification & 109 \\
\hline 5.3.5.13 & Conditional Reconfiguration & 110 \\
\hline 5.3.5.13.1 & General & 110 \\
\hline 5.3.5.13.2 & Conditional reconfiguration removal & 110 \\
\hline 5.3.5.13.3 & Conditional reconfiguration addition/modification & 110 \\
\hline 5.3.5.13.4 & Conditional reconfiguration evaluation & 111 \\
\hline 5.3.5.13.4a & Conditional reconfiguration evaluation of SN initiated inter-SN CPC for EN-DC & 112 \\
\hline 5.3.5.13.5 & Conditional reconfiguration execution & 113 \\
\hline 5.3.5.13a & SCG activation & 113 \\
\hline 5.3.5.13b & SCG deactivation & 113 \\
\hline 5.3.5.13c & FR2 UL gap configuration & 114 \\
\hline 5.3.5.13d & Application layer measurement configuration & 114 \\
\hline 5.3.5.14 & Sidelink dedicated configuration & 115 \\
\hline 5.3.5.15 & L2 U2N Relay UE configuration & 117 \\
\hline 5.3.5.15.1 & General & 117 \\
\hline 5.3.5.15.2 & L2 U2N Remote UE Release & 117 \\
\hline 5.3.5.15.3 & L2 U2N Remote UE Addition/Modification & 117 \\
\hline 5.3.5.16 & L2 U2N Remote UE configuration & 118 \\
\hline 5.3.5.16.1 & General & 118 \\
\hline 5.3.6 & Counter check & 118 \\
\hline 5.3.6.1 & General & 118 \\
\hline 5.3.6.2 & Initiation & 118 \\
\hline 5.3.6.3 & Reception of the CounterCheck message by the UE & 118 \\
\hline 5.3.7 & RRC connection re-establishment & 119 \\
\hline 5.3.7.1 & General & 119 \\
\hline 5.3.7.2 & Initiation & 120 \\
\hline 5.3.7.3 & Actions following cell selection while T311 is running & 122 \\
\hline 5.3.7.3a & Actions following relay selection while T311 is running & 124 \\
\hline 5.3.7.4 & Actions related to transmission of RRCReestablishmentRequest message & 125 \\
\hline 5.3.7.5 & Reception of the RRCReestablishment by the UE & 126 \\
\hline 5.3.7.6 & T311 expiry & 127 \\
\hline 5.3.7.7 & T301 expiry or selected cell no longer suitable & 127 \\
\hline 5.3.7.8 & Reception of the RRCSetup by the UE & 127 \\
\hline 5.3 .8 & RRC connection release & 128 \\
\hline 5.3.8.1 & General & 128 \\
\hline 5.3.8.2 & Initiation & 128 \\
\hline 5.3.8.3 & Reception of the RRCRelease by the UE & 128 \\
\hline 5.3.8.4 & T320 expiry & 131 \\
\hline 5.3.8.5 & UE actions upon the expiry of DatalnactivityTimer & 132 \\
\hline 5.3.8.6 & T346g expiry & 132 \\
\hline 5.3.9 & RRC connection release requested by upper layers & 132 \\
\hline 5.3.9.1 & General & 132 \\
\hline 5.3.9.2 & Initiation & 132 \\
\hline 5.3.10 & Radio link failure related actions & 132 \\
\hline 5.3.10.1 & Detection of physical layer problems in RRC_CONNECTED & 132 \\
\hline 5.3.10.2 & Recovery of physical layer problems & 132 \\
\hline 5.3.10.3 & Detection of radio link failure & 133 \\
\hline 5.3.10.4 & RLF cause determination & 134 \\
\hline 5.3.10.5 & RLF report content determination & 135 \\
\hline 5.3.11 & UE actions upon going to RRC_[DLE & 139 \\
\hline 5.3.12 & UE actions upon PUCCH/SRS release request & 140 \\
\hline 5.3.13 & RRC connection resume & 140 \\
\hline
\end{tabular}

ETSI


--- Page 7  ---


3GPP TS 38.331 version 17.0.0 Release 17
6
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline 5.3.13.1 & General & 140 \\
\hline 5.3.13.1a & Conditions for resuming RRC Connection for NR sidelink communication/discovery/V2X sidelink communication & 141 \\
\hline 5.3.13.1b & Conditions for initiating SDT & 142 \\
\hline 5.3.13.2 & Initiation & 142 \\
\hline 5.3.13.3 & Actions related to transmission of RRCResumeRequest or RRCResumeRequest I message & 145 \\
\hline 5.3.13.4 & Reception of the RRCResume by the UE & 146 \\
\hline 5.3.13.5 & Handling of failure to resume RRC Connection & 151 \\
\hline 5.3.13.6 & Cell re-selection or cell selection or L2 U2N relay (re)selection while T390, T319, T319a or T302 is running (UE in RRC_INACTIVE) & 152 \\
\hline 5.3.13.7 & Reception of the RRCSetup by the UE & 152 \\
\hline 5.3.13.8 & RNA update & 152 \\
\hline 5.3.13.9 & Reception of the RRCRelease by the UE & 153 \\
\hline 5.3.13.10 & Reception of the RRCReject by the UE & 153 \\
\hline 5.3.13.11 & Inability to comply with RRCResume & 153 \\
\hline 5.3.13.12 & Inter RAT cell reselection & 153 \\
\hline 5.3.14 & Unified Access Control & 153 \\
\hline 5.3.14.1 & General & 153 \\
\hline 5.3.14.2 & Initiation & 154 \\
\hline 5.3.14.3 & Void. & 155 \\
\hline 5.3.14.4 & T302, T390 expiry or stop (Barring alleviation) & 155 \\
\hline 5.3.14.5 & Access barring check & 156 \\
\hline 5.3.15 & RRC connection reject & 157 \\
\hline 5.3.15.1 & Initiation & 157 \\
\hline 5.3.15.2 & Reception of the RRCReject by the UE & 157 \\
\hline 5.4 & Inter-RAT mobility & 158 \\
\hline 5.4 .1 & Introduction & 158 \\
\hline 5.4 .2 & Handover to NR & 158 \\
\hline 5.4.2.1 & General & 158 \\
\hline 5.4.2.2 & Initiation & 158 \\
\hline 5.4.2.3 & Reception of the RRCReconfiguration by the UE & 158 \\
\hline 5.4.3 & Mobility from NR & 159 \\
\hline 5.4.3.1 & General & 159 \\
\hline 5.4.3.2 & Initiation & 159 \\
\hline 5.4.3.3 & Reception of the MobilityFromNRCommand by the UE & 159 \\
\hline 5.4.3.4 & Successful completion of the mobility from NR & 160 \\
\hline 5.4.3.5 & Mobility from NR failure & 160 \\
\hline 5.5 & Measurements & 161 \\
\hline 5.5.1 & Introduction & 161 \\
\hline 5.5.2 & Measurement configuration & 164 \\
\hline 5.5.2.1 & General & 164 \\
\hline 5.5.2.2 & Measurement identity removal & 165 \\
\hline 5.5.2.3 & Measurement identity addition/modification & 165 \\
\hline 5.5.2.4 & Measurement object removal & 166 \\
\hline 5.5.2.5 & Measurement object addition/modification & 167 \\
\hline 5.5.2.6 & Reporting configuration removal & 169 \\
\hline 5.5.2.7 & Reporting configuration addition/modification & 169 \\
\hline 5.5.2.8 & Quantity configuration & 169 \\
\hline 5.5.2.9 & Measurement gap configuration & 169 \\
\hline 5.5.2.10 & Reference signal measurement timing configuration & 172 \\
\hline 5.5.2.10a & RSSI measurement timing configuration & 173 \\
\hline 5.5.2.11 & Measurement gap sharing configuration & 173 \\
\hline 5.5.3 & Performing measurements & 174 \\
\hline 5.5.3.1 & General & 174 \\
\hline 5.5.3.2 & Layer 3 filtering & 178 \\
\hline 5.5.3.3 & Derivation of cell measurement results & 179 \\
\hline 5.5.3.3a & Derivation of layer 3 beam filtered measurement & 180 \\
\hline 5.5.3.4 & Derivation of L2 U2N Relay UE measurement results & 180 \\
\hline 5.5.4 & Measurement report triggering & 180 \\
\hline 5.5.4.1 & General & 180 \\
\hline 5.5.4.2 & Event A1 (Serving becomes better than threshold) & 187 \\
\hline 5.5.4.3 & Event A2 (Serving becomes worse than threshold) & 187 \\
\hline
\end{tabular}

ETSI


--- Page 8  ---


3GPP TS 38.331 version 17.0.0 Release 17
7
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline 5.5.4.4 & Event A3 (Neighbour becomes offset better than SpCell) \\
\hline 5.5.4.5 & Event A4 (Neighbour becomes better than threshold) \\
\hline 5.5.4.6 & Event A5 (SpCell becomes worse than thresholdl and neighbour becomes better than threshold2) \\
\hline 5.5.4.7 & Event A6 (Neighbour becomes offset better than SCell) \\
\hline 5.5.4.8 & Event B1 (Inter RAT neighbour becomes better than threshold) \\
\hline 5.5.4.9 & Event B2 (PCell becomes worse than threshold1 and inter RAT neighbour becomes better than threshold2) \\
\hline 5.5.4.10 & Event [1 (Interference becomes higher than threshold) \\
\hline 5.5.4.11 & Event C1 (The NR sidelink channel busy ratio is above a threshold) \\
\hline 5.5.4.12 & Event C2 (The NR sidelink channel busy ratio is below a threshold) \\
\hline 5.5.4.13 & Void. \\
\hline 5.5.4.14 & Void. \\
\hline 5.5.4.15 & Event D1 \\
\hline 5.5.4.16 & CondEvent T1 \\
\hline 5.5.4.17 & Event X1 (Serving L2 U2N Relay UE becomes worse than threshold1 and NR Cell becomes better than threshold2) \\
\hline 5.5.4.18 & Event X2 (Serving L2 U2N Relay UE becomes worse than threshold) \\
\hline 5.5.4.19 & Event Y1 (PCell becomes worse than threshold1 and candidate L2 U2N Relay UE becomes better than threshold2) \\
\hline 5.5.4.20 & Event Y2 (Candidate L2 U2N Relay UE becomes better than threshold) \\
\hline 5.5.5 & Measurement reporting \\
\hline 5.5.5.1 & General \\
\hline 5.5.5.2 & Reporting of beam measurement information \\
\hline 5.5.5.3 & Sorting of cell measurement results \\
\hline 5.5.6 & Location measurement indication \\
\hline 5.5.6.1 & General \\
\hline 5.5.6.2 & Initiation \\
\hline 5.5.6.3 & Actions related to transmission of LocationMeasurementIndication message \\
\hline 5.5a & Logged Measurements \\
\hline 5.5a. 1 & Logged Measurement Configuration \\
\hline 5.5a.1.1 & General \\
\hline 5.5a.1.2 & Initiation \\
\hline 5.5a.1.3 & Reception of the LoggedMeasurementConfiguration by the UE \\
\hline 5.5a.1.4 & T330 expiry \\
\hline 5.5a. 2 & Release of Logged Measurement Configuration \\
\hline 5.5a.2.1 & General \\
\hline 5.5a.2.2 & Initiation \\
\hline 5.5a.3 & Measurements logging \\
\hline 5.5a.3.1 & General \\
\hline 5.5a.3.2 & Initiation \\
\hline 5.6 & UE capabilities \\
\hline 5.6.1 & UE capability transfer \\
\hline 5.6.1.1 & General \\
\hline 5.6.1.2 & Initiation \\
\hline 5.6.1.3 & Reception of the UECapabilityEnquiry by the UE \\
\hline 5.6.1.4 & Setting band combinations, feature set combinations and feature sets supported by the UE \\
\hline 5.6.1.5 & Void. \\
\hline 5.7 & Other \\
\hline 5.7.1 & DL information transfer \\
\hline 5.7.1.1 & General \\
\hline 5.7.1.2 & Initiation \\
\hline 5.7.1.3 & Reception of the DLInformationTransfer by the UE \\
\hline 5.7.1a & DL information transfer for MR-DC \\
\hline 5.7.1a.1 & General \\
\hline 5.7.1a.2 & Initiation \\
\hline 5.7.1a.3 & Actions related to reception of DLInformationTransferMRDC message \\
\hline 5.7.2 & UL information transfer \\
\hline 5.7.2.1 & General \\
\hline 5.7.2.2 & Initiation \\
\hline 5.7.2.3 & Actions related to transmission of ULInformationTransfer message \\
\hline 5.7.2.4 & Failure to deliver ULInformationTransfer message \\
\hline
\end{tabular}

ETSI


--- Page 9  ---


3GPP TS 38.331 version 17.0.0 Release 17
8
ETSI TS 138331 V17.0.0 (2022-05)
5.7.2a UL information transfer for MR-DC
5.7.3.2 Initiation

221
5.7.3.3 Failure type determination for (NG)EN-DC
5.7.3.4 Setting the contents of MeasResultSCG-Failure
5.7.4 UE Assistance Information - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 2 - 230
5.7.6.2 Initiation_a
5.7.7.3 Actions related to transmission of ULDedicatedMessageSegment message ⋯⋯⋯⋯⋯⋯⋯⋯ 248
5.7.8.1a Measurement configuration ------------------------------------------------------------------------------------------------------ 248--
5.7.8.4 Cell re-selection or cell selection while T331 is running
5.7.9.2 Initiation
5.7.10.4 Actions upon successful completion of a random-access procedure or on successful or unsuccessful completion of a procedure for request of on-demand system information ................... 258

ETSI


--- Page 10  ---


3GPP TS 38.331 version 17.0.0 Release 17
9
ETSI TS 138331 V17.0.0 (2022-05)
5.7.13.1 Relaxed measurement criterion for low mobility
5.7.14.3 Actions related to transmission of UEPositioningAssistancelnfo message .......................................... 267
5.7.15 SRS for Positioning in RRC_INACTIVE_a一
5.81 General
5.8.5a Sidelink synchronisation information transmission for V2X sidelink communication ................................ 281
5.8.5a. 2 Initiation
5.8.6.2 Selection and reselection of synchronisation reference
5.8.6.3 Sidelink communication transmission reference cell selection
5.8.9.1.3 Reception of an RRCReconfigurationSidelink by the UE
5.8.9.1.8 Reception of an RRCReconfigurationFailureSidelink by the UE
5.8.9.1.9 Reception of an RRCReconfigurationCompleteSidelink by the UE ............................................... 290
5.8.9.5 Actions related to PC5-RRC connection release requested by upper layers or AS layer ..................... 298

ETSI


--- Page 11  ---


3GPP TS 38.331 version 17.0.0 Release 17
10
ETSI TS 138331 V17.0.0 (2022-05)
5.8.9.10.4 Actions related to reception of NotificationMessageSidelink message
5.8.10.2.4 Sidelink measurement object removal
5.8.10.4.2 Event S1 (Serving becomes better than threshold)
5.8.10.5 Sidelink measurement reporting
5.9.2.3 MCCH information acquisition by the UE
5.94.5 Setting of the contents of MBS Interest Indication

6 Protocol data units, formats and parameters (ASN.1) .............................................................. 321

ETSI


--- Page 12  ---


3GPP TS 38.331 version 17.0.0 Release 17
11
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline 6.1.1 & Introduction & 321 \\
\hline 6.1.2 & Need codes and conditions for optional downlink fields & 321 \\
\hline 6.1.3 & General rules & 324 \\
\hline 6.2 & RRC messages & 324 \\
\hline 6.2.1 & General message structure & 324 \\
\hline - & NR-RRC-Definitions & 324 \\
\hline - & BCCH-BCH-Message & 325 \\
\hline - & BCCH-DL-SCH-Message & 325 \\
\hline - & DL-CCCH-Message & 325 \\
\hline - & DL-DCCH-Message & 326 \\
\hline - & MCCH-Message & 327 \\
\hline - & PCCH-Message & 327 \\
\hline - & UL-CCCH-Message & 327 \\
\hline - & UL-CCCH1-Message & 328 \\
\hline - & UL-DCCH-Message & 329 \\
\hline 6.2.2 & Message definitions & 330 \\
\hline - & CounterCheck & 330 \\
\hline - & CounterCheckResponse & 331 \\
\hline - & DedicatedSIBRequest & 332 \\
\hline - & DLDedicatedMessageSegment & 333 \\
\hline & DLInformationTransfer & 334 \\
\hline & DLInformationTransferMRDC & 335 \\
\hline & FailureInformation & 336 \\
\hline & IABOtherInformation & 337 \\
\hline & LocationMeasurementIndication & 340 \\
\hline & LoggedMeasurementConfiguration & 341 \\
\hline & MBSBroadcastConfiguration & 343 \\
\hline & MBSInterestIndication & 344 \\
\hline & MCGFailureInformation & 345 \\
\hline & MeasurementReport & 346 \\
\hline & MeasurementReportAppLayer & 347 \\
\hline & MIB & 348 \\
\hline & MobilityFromNRCommand & 350 \\
\hline & Paging & 352 \\
\hline & RRCReestablishment & 353 \\
\hline & RRCReestablishmentComplete & 354 \\
\hline & RRCReestablishmentRequest & 355 \\
\hline & RRCReconfiguration & 356 \\
\hline & RRCReconfiguration Complete & 362 \\
\hline - & RRCReject & 364 \\
\hline & RRCRelease & 365 \\
\hline - & RRCResume & 372 \\
\hline & RRCResumeComplete & 374 \\
\hline & RRCResumeRequest & 376 \\
\hline & RRCResumeRequest I & 377 \\
\hline & RRCSetup & 378 \\
\hline & RRCSetupComplete & 379 \\
\hline & RRCSetupRequest & 381 \\
\hline & RRCSystemInfoRequest & 382 \\
\hline & SCGFailureInformation & 383 \\
\hline & SCGFailureInformationEUTRA & 385 \\
\hline - & SecurityModeCommand & 386 \\
\hline - & SecurityModeComplete & 387 \\
\hline - & SecurityModeFailure & 388 \\
\hline - & SIBl & 388 \\
\hline - & SidelinkUEInformationNR & 392 \\
\hline & SystemInformation & 397 \\
\hline - & UEAssistanceInformation & 398 \\
\hline - & UECapabilityEnquiry & 407 \\
\hline - & UECapabilityInformation & 408 \\
\hline - & UEInformationRequest & 409 \\
\hline - & UEInformationResponse & 410 \\
\hline
\end{tabular}

ETSI


--- Page 13  ---


3GPP TS 38.331 version 17.0.0 Release 17
12
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline - & UEPositioningAssistanceInfo & 424 \\
\hline - & ULDedicatedMessageSegment & 425 \\
\hline & - ULInformationTransfer & 426 \\
\hline & - ULInformationTransferIRAT & 427 \\
\hline - & ULInformationTransferMRDC & 428 \\
\hline 6.3 & RRC information elements & 429 \\
\hline 6.3.0 & Parameterized types & 429 \\
\hline - & SetupRelease & 429 \\
\hline 6.3.1 & System information blocks & 429 \\
\hline - & SIB2 & 429 \\
\hline - & SIB3 & 434 \\
\hline - & SIB4 & 436 \\
\hline - & SIB5 & 441 \\
\hline - & SIB6 & 444 \\
\hline - & SIB7 & 444 \\
\hline - & SIB8 & 445 \\
\hline - & SIB9 & 446 \\
\hline - & SIB10 & 447 \\
\hline - & SIB11 & 448 \\
\hline - & SIBl2 & 448 \\
\hline - & SIB13 & 450 \\
\hline - & SIB14 & 451 \\
\hline - & SIB15 & 452 \\
\hline - & SIB16 & 452 \\
\hline - & SIB17 & 453 \\
\hline - & SIB18 & 455 \\
\hline - & SIB20 & 457 \\
\hline - & SIB21 & 458 \\
\hline 6.3.1a & Positioning System information blocks & 459 \\
\hline - & PosSystemInformation-r16-IEs & 459 \\
\hline - & \begin{tabular}{l}
PosSI-SchedulingInfo \\
PosSI-Schedulinglnfo
\end{tabular} & 460 \\
\hline - & \begin{tabular}{l}
SIBpos \\
S/Bpos
\end{tabular} & 462 \\
\hline 6.3.2 & \multirow{2}{*}{AdditionalSpectrumEmission} & 462 \\
\hline - & & 462 \\
\hline \multirow[t]{23}{*}{\begin{tabular}{l}
- \\
- \\
- \\
- \\
- \\
- \\
- \\
- \\
- \\
-
\end{tabular}} & \begin{tabular}{l}
Alpha \\
Alpha
\end{tabular} & 463 \\
\hline & AMF-Identifier & 463 \\
\hline & ARFCN-ValueEUTRA & 463 \\
\hline & ARFCN-ValueNR & 464 \\
\hline & ARFCN-ValueUTRA-FDD & 464 \\
\hline & AvailabilityCombinationsPerCell & 464 \\
\hline & Availabilitylndicator & 466 \\
\hline & BAP-RoutingID & 466 \\
\hline & BeamFailureRecoveryConfig & 467 \\
\hline & BeamFailureRecoverySCellConfig & 470 \\
\hline & BeamFailureRecoveryServingCellConfig & 471 \\
\hline & BetaOffsets & 471 \\
\hline & & 3 \\
\hline & BH-LogicalChannelldentity & 473 \\
\hline & BH-LogicalChannelldentity-Ext & 473 \\
\hline & BH-RLC-ChannelConfig & 473 \\
\hline & BH-RLC-ChannellD & 474 \\
\hline & BSR-Config & 475 \\
\hline & BWP & 475 \\
\hline & BWP-Downlink & 476 \\
\hline & BWP-DownlinkCommon & 477 \\
\hline & BWP-DownlinkDedicated & 477 \\
\hline & BWP-Id & 480 \\
\hline \multirow[t]{5}{*}{-} & BWP-Uplink & 480 \\
\hline & BWP-UplinkCommon & 481 \\
\hline & BWP-UplinkDedicated & 482 \\
\hline & CandidateBeamRS & 485 \\
\hline & CellAccessRelatedInfo & 486 \\
\hline
\end{tabular}

ETSI


--- Page 14  ---


3GPP TS 38.331 version 17.0.0 Release 17
13
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline - & CellAccessRelatedInfo-EUTRA-5GC & 487 \\
\hline & CellAccessRelatedInfo-EUTRA-EPC & 488 \\
\hline & CellGroupConfig & 489 \\
\hline & CellGroupld & 496 \\
\hline & Cellldentity & 497 \\
\hline & CellReselectionPriority & 497 \\
\hline & CellReselectionSubPriority & 497 \\
\hline & CFR-ConfigMulticast & 498 \\
\hline & CGI-InfoEUTRA & 499 \\
\hline & CGI-InfoEUTRALogging & 499 \\
\hline & CGI-InfoNR & 500 \\
\hline & CGI-Info-Logging & 501 \\
\hline & CLI-RSSI-Range & 501 \\
\hline & CodebookConfig & 502 \\
\hline & CommonLocationInfo & 506 \\
\hline & CondReconfigld & 507 \\
\hline & CondReconfigToAddModList & 508 \\
\hline & ConditionalReconfiguration & 509 \\
\hline & ConfiguredGrantConfig & 509 \\
\hline & ConfiguredGrantConfigIndex & 518 \\
\hline & Configured GrantConfigIndexMAC & 518 \\
\hline & ConnEstFailureControl & 518 \\
\hline & ControlResourceSet & 519 \\
\hline & ControlResourceSetId & 522 \\
\hline & Contro/ResourceSetZero & 522 \\
\hline & CrossCarrierSchedulingConfig & 522 \\
\hline & CSI-AperiodicTriggerStateList & 524 \\
\hline & CSI-FrequencyOccupation & 527 \\
\hline & CSI-IM-Resource & 527 \\
\hline & CSI-IM-Resourceld & 528 \\
\hline & CSI-IM-ResourceSet & 529 \\
\hline & CSI-IM-ResourceSetld & 529 \\
\hline & CSI-MeasConfig & 529 \\
\hline & CSI-ReportConfig & 531 \\
\hline & CSI-ReportConfigld & 537 \\
\hline & CSI-ResourceConfig & 537 \\
\hline & CSI-ResourceConfigld & 539 \\
\hline & CSI-ResourcePeriodicityAndOffset & 539 \\
\hline & CSI-RS-ResourceConfigMobility & 540 \\
\hline & CSI-RS-ResourceMapping & 542 \\
\hline & CSI-SemiPersistentOnPUSCH-TriggerStateList & 543 \\
\hline & CSI-SSB-ResourceSet & 544 \\
\hline & CSI-SSB-ResourceSetld & 544 \\
\hline & DedicatedNAS-Message & 545 \\
\hline & DL-PRS-Processing WindowPreConfig & 545 \\
\hline & DMRS-BundlingPUCCH-Config & 546 \\
\hline & DMRS-BundlingPUSCH-Config & 547 \\
\hline & DMRS-DownlinkConfig & 548 \\
\hline & DMRS-UplinkConfig & 549 \\
\hline & DownlinkConfigCommon & 551 \\
\hline & DownlinkConfigCommonSIB & 552 \\
\hline & DownlinkPreemption & 557 \\
\hline & DRB-Identity & 558 \\
\hline & DRX-Config & 558 \\
\hline & DRX-ConfigSecondaryGroup & 560 \\
\hline & DRX-ConfigSL & 561 \\
\hline & EphemerisInfo & 562 \\
\hline & FeatureCombination & 563 \\
\hline & FeatureCombination Preambles & 564 \\
\hline & FilterCoefficient & 566 \\
\hline & FreqBandIndicatorNR & 566 \\
\hline - & FreqPriorityListNRShicing & 566 \\
\hline
\end{tabular}

ETSI


--- Page 15  ---


3GPP TS 38.331 version 17.0.0 Release 17
14
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline - & FrequencylnfoDL & 567 \\
\hline - & FrequencylnfoDL-SIB & 568 \\
\hline - & FrequencylnfoUL & 569 \\
\hline - & FrequencylnfoUL-SIB & 570 \\
\hline - & GapPriority & 571 \\
\hline & HighSpeedConfig & 572 \\
\hline & Hysteresis, HysteresisLocation & 573 \\
\hline & InvalidSymbolPattern & 574 \\
\hline & I-RNTI-Value & 575 \\
\hline & LBT-FailureRecoveryConfig & 575 \\
\hline & LocationInfo & 575 \\
\hline & LocationMeasurementInfo & 576 \\
\hline & LogicalChannelConfig & 577 \\
\hline & LogicalChannelldentity & 580 \\
\hline & MAC-CellGroupConfig & 580 \\
\hline & MeasConfig & 584 \\
\hline & MeasConfigAppLayerId & 586 \\
\hline & MeasGapConfig & 586 \\
\hline & MeasGapId & 589 \\
\hline & MeasGapSharingConfig & 590 \\
\hline & Measld & 591 \\
\hline & MeasIdleConfig & 591 \\
\hline & MeasIdToAddModList & 595 \\
\hline & MeasObjectCLI & 595 \\
\hline & MeasObjectEUTRA & 598 \\
\hline & MeasObjectld & 600 \\
\hline & MeasObjectNR & 600 \\
\hline & MeasObjectNR-SL & 607 \\
\hline & MeasObjectRxTxDiff & 607 \\
\hline & MeasObjectToAddModList & 608 \\
\hline & MeasObjectUTRA-FDD & 609 \\
\hline & MeasResultCellListSFTD-NR & 610 \\
\hline & MeasResultCellListSFTD-EUTRA & 610 \\
\hline & MeasResults & 611 \\
\hline & MeasResult2EUTRA & 618 \\
\hline & MeasResult2NR & 618 \\
\hline & MeasResultldleE UTRA & 618 \\
\hline & MeasResultldleNR & 619 \\
\hline & MeasResultRxTxTimeDiff & 621 \\
\hline & MeasResultSCG-Failure & 621 \\
\hline & MeasResultsSL & 622 \\
\hline & MeasTriggerQuantityEUTRA & 622 \\
\hline & MobilityStateParameters & 623 \\
\hline & MRB-Identity & 624 \\
\hline & MsgA-ConfigCommon & 624 \\
\hline & MsgA-PUSCH-Config & 625 \\
\hline & MultiFrequencyBandListNR & 628 \\
\hline & MultiFrequencyBandListNR-SIB & 629 \\
\hline & MUSIM-GapConfig & 629 \\
\hline & MUSIM-GapID & 631 \\
\hline & NeedForGapsConfigNR & 631 \\
\hline & NeedForNCSG-ConfigEUTRA & 633 \\
\hline & NeedForNCSG-ConfigNR & 633 \\
\hline & NeedForNCSG-InfoEUTRA & 634 \\
\hline & NeedForNCSG-InfoNR & 634 \\
\hline & NextHopChainingCount & 636 \\
\hline & NG-5G-S-TMSI & 636 \\
\hline & NonCellDefiningSSB & 636 \\
\hline & NPN-Identity & 637 \\
\hline & NPN-IdentitylnfoList & 638 \\
\hline & NR-DL-PRS-PDC-Info & 639 \\
\hline & NR-NS-PmaxList & 642 \\
\hline
\end{tabular}

ETSI


--- Page 16  ---


3GPP TS 38.331 version 17.0.0 Release 17
15
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline - & NTN-Config & 643 \\
\hline & NZP-CSI-RS-Resource & 644 \\
\hline & NZP-CSI-RS-Resourceld & 646 \\
\hline & NZP-CSI-RS-ResourceSet & 646 \\
\hline & NZP-CSI-RS-ResourceSetld & 647 \\
\hline & P-Max & 648 \\
\hline & PCI-List & 648 \\
\hline & PCI-Range & 648 \\
\hline & PCI-RangeElement & 649 \\
\hline & PCI-Rangelndex & 649 \\
\hline & PCI-RangelndexList & 650 \\
\hline & PDCCH-Config & 650 \\
\hline & PDCCH-ConfigCommon & 653 \\
\hline & PDCCH-ConfigSIBl & 655 \\
\hline & PDCCH-ServingCellConfig & 655 \\
\hline & PDCP-Config & 656 \\
\hline & PDSCH-Config & 662 \\
\hline & PDSCH-ConfigCommon & 669 \\
\hline & PDSCH-ServingCellConfig & 669 \\
\hline & PDSCH-TimeDomainResourceAllocationList & 671 \\
\hline & PHR-Config & 673 \\
\hline & PhysCellld & 674 \\
\hline & PhysicalCellGroupConfig & 675 \\
\hline & PLMN-Identity & 682 \\
\hline & PLMN-IdentityInfoList & 683 \\
\hline & PLMN-IdentityList2 & 684 \\
\hline & PosMeasGapPreConfig & 684 \\
\hline & PRB-Id & 685 \\
\hline & PTRS-DownlinkConfig & 685 \\
\hline & PTRS-UplinkConfig & 686 \\
\hline & PUCCH-Config & 687 \\
\hline & PUCCH-ConfigCommon & 696 \\
\hline & PUCCH-ConfigurationList & 697 \\
\hline & PUCCH-PathlossReferenceRS-Id & 698 \\
\hline & PUCCH-PowerControl & 698 \\
\hline & PUCCH-SpatialRelationInfo & 700 \\
\hline & PUCCH-SpatialRelationInfo-Id & 701 \\
\hline & PUCCH-TPC-CommandConfig & 701 \\
\hline & PUSCH-Config & 702 \\
\hline & PUSCH-ConfigCommon & 709 \\
\hline & PUSCH-PowerControl & 710 \\
\hline & PUSCH-ServingCellConfig & 714 \\
\hline & PUSCH-TimeDomainResourceAllocationList & 715 \\
\hline & PUSCH-TPC-CommandConfig & 718 \\
\hline & Q-OffsetRange & 719 \\
\hline & Q-QualMin & 719 \\
\hline & Q-RxLevMin & 720 \\
\hline & QuantityConfig & 720 \\
\hline & RACH-ConfigCommon & 722 \\
\hline & RACH-Config CommonTwoStepRA & 725 \\
\hline & RACH-ConfigDedicated & 728 \\
\hline & RACH-ConfigGeneric & 732 \\
\hline & RACH-Config GenericTwoStepRA & 733 \\
\hline & RA-Prioritization & 736 \\
\hline & RA-PrioritizationForSlicing & 737 \\
\hline & RadioBearerConfig & 737 \\
\hline & RadioLinkMonitoringConfig & 741 \\
\hline & RadioLinkMonitoringRS-Id & 743 \\
\hline & RAN-AreaCode & 743 \\
\hline & RateMatchPattern & 744 \\
\hline & RateMatchPatternId & 746 \\
\hline - & RateMatchPatternLTE-CRS & 746 \\
\hline
\end{tabular}

ETSI


--- Page 17  ---


3GPP TS 38.331 version 17.0.0 Release 17
16
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline - & ReferenceTimeInfo & 747 \\
\hline & RejectWaitTime & 748 \\
\hline & RepetitionSchemeConfig & 749 \\
\hline & ReportConfigld & 750 \\
\hline & ReportConfigInterRAT & 750 \\
\hline & ReportConfigNR & 755 \\
\hline & ReportConfigNR-SL & 765 \\
\hline & ReportConfigToAddModList & 766 \\
\hline & ReportInterval & 767 \\
\hline & ReselectionThreshold & 767 \\
\hline & ReselectionThresholdQ & 768 \\
\hline & ResumeCause & 768 \\
\hline & RLC-BearerConfig & 768 \\
\hline & RLC-Config & 770 \\
\hline & RLF-TimersAndConstants & 773 \\
\hline & RNTI-Value & 774 \\
\hline & RSRP-Range & 774 \\
\hline & RSRQ-Range & 774 \\
\hline & RSSI-Range & 775 \\
\hline & RxTxTimeDiff & 775 \\
\hline & SCellActivationRS-Config & 776 \\
\hline & SCellActivationRS-Configld & 776 \\
\hline & SCellIndex & 777 \\
\hline & SchedulingRequestConfig & 777 \\
\hline & SchedulingRequestld & 778 \\
\hline & SchedulingRequestResourceConfig & 778 \\
\hline & SchedulingRequestResourceld & 780 \\
\hline & Scramblingld & 780 \\
\hline & SCS-SpecificCarrier & 781 \\
\hline & SDAP-Config & 782 \\
\hline & SearchSpace & 783 \\
\hline & SearchSpaceld & 790 \\
\hline & SearchSpaceZero & 790 \\
\hline & SecurityAlgorithmConfig & 791 \\
\hline & SemiStaticChannelAccessConfig & 791 \\
\hline & SemiStaticChannelAccessConfig UE & 792 \\
\hline & Sensor-LocationInfo & 793 \\
\hline & ServCellIndex & 793 \\
\hline & ServingCellConfig & 794 \\
\hline & ServingCellConfigCommon & 804 \\
\hline & ServingCellConfigCommonSIB & 807 \\
\hline & ShortI-RNTI-Value & 809 \\
\hline & ShortMAC-I & 810 \\
\hline & SINR-Range & 810 \\
\hline & SI-RequestConfig & 810 \\
\hline & SI-SchedulingInfo & 811 \\
\hline & \( S K \)-Counter & 814 \\
\hline & SlotFormatCombinationsPerCell & 814 \\
\hline & SlotFormatIndicator & 816 \\
\hline & S-NSSAI & 819 \\
\hline & SpeedStateScaleFactors & 819 \\
\hline & SPS-Config & 820 \\
\hline & SPS-Config Index & 821 \\
\hline & SPS-PUCCH-AN & 822 \\
\hline & SPS-PUCCH-AN-List & 822 \\
\hline & SRB-Identity & 823 \\
\hline & SRS-CarrierSwitching & 823 \\
\hline & SRS-Config & 824 \\
\hline & SRS-RSRP-Range & 836 \\
\hline & SRS-TPC-CommandConfig & 837 \\
\hline & SSB-Index & 837 \\
\hline & SSB-MTC & 838 \\
\hline
\end{tabular}

ETSI


--- Page 18  ---


3GPP TS 38.331 version 17.0.0 Release 17
17
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline - & SSB-PositionQCL-Relation & 840 \\
\hline - & SSB-ToMeasure & 840 \\
\hline - & SS-RSSI-Measurement & 841 \\
\hline - & SubcarrierSpacing & 841 \\
\hline - & TAG-Config & 842 \\
\hline - & TCI-Info & 842 \\
\hline & - TCI-State & 843 \\
\hline - & TCI-Stateld & 845 \\
\hline - & TDD-UL-DL-ConfigCommon & 845 \\
\hline - & TDD-UL-DL-ConfigDedicated & 846 \\
\hline - & TrackingAreaCode & 848 \\
\hline - & T-Reselection & 849 \\
\hline - & TimeToTrigger & 849 \\
\hline - & UAC-BarringInfoSetIndex & 849 \\
\hline - & UAC-BarringlnfoSetList & 850 \\
\hline & UAC-BarringPerCatList & 851 \\
\hline & UAC-BarringPerPLMN-List & 851 \\
\hline & UE-TimersAndConstants & 852 \\
\hline & UE-TimersAndConstants-RemoteUE & 852 \\
\hline & UL-DelayValueConfig & 853 \\
\hline & UL-ExcessDelayConfig & 853 \\
\hline & UL-GapFR2-Config & 854 \\
\hline & UplinkCancellation & 855 \\
\hline & UplinkConfigCommon & 856 \\
\hline & UplinkConfigCommonSIB & 857 \\
\hline & Uplink-PowerControl & 858 \\
\hline & Uu-Relay-RLC-ChannelConfig & 859 \\
\hline & Uu-Relay-RLC-ChannellD & 859 \\
\hline & UplinkTxDirectCurrentList & 860 \\
\hline & UplinkTxDirectCurrentTwoCarrierList & 861 \\
\hline & ZP-CSI-RS-Resource & 862 \\
\hline & ZP-CSI-RS-ResourceSet & 863 \\
\hline & ZP-CSI-RS-ResourceSetld & 864 \\
\hline 6.3.3 & UE capability information elements & 864 \\
\hline & AccessStratumRelease & 864 \\
\hline & BandCombinationList & 864 \\
\hline & BandCombinationListSidelinkE UTRA-NR & 871 \\
\hline & BandCombinationListSL-NonRelayDiscovery & 872 \\
\hline & BandCombinationListSL-RelayDiscovery & 872 \\
\hline & CA-BandwidthClassEUTRA & 872 \\
\hline & CA-BandwidthClassNR & 873 \\
\hline & CA-Parameters EUTRA & 873 \\
\hline & CA-ParametersNR & 874 \\
\hline & CA-ParametersNRDC & 877 \\
\hline & CarrierAggregation Variant & 879 \\
\hline & CodebookParameters & 879 \\
\hline & FeatureSetCombination & 883 \\
\hline & FeatureSetCombinationId & 885 \\
\hline & FeatureSetDownlink & 885 \\
\hline & FeatureSetDownlinkld & 889 \\
\hline & FeatureSetDownlinkPerCC & 889 \\
\hline & FeatureSetDownlinkPerCC-Id & 890 \\
\hline & FeatureSetEUTRA-Downlinkld & 890 \\
\hline & FeatureSetEUTRA-Uplinkld & 891 \\
\hline & FeatureSets & 891 \\
\hline & FeatureSetUplink & 892 \\
\hline & FeatureSetUplinkld & 897 \\
\hline & FeatureSetUplinkPerCC & 897 \\
\hline & FeatureSetUplinkPerCC-Id & 898 \\
\hline & FreqBandIndicatorEUTRA & 898 \\
\hline & FreqBandList & 898 \\
\hline & FreqSeparationClass & 899 \\
\hline
\end{tabular}

ETSI


--- Page 19  ---


3GPP TS 38.331 version 17.0.0 Release 17
18
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline - & FreqSeparationClassDL-Only & 899 \\
\hline - & FR2-2-AccessParamsPerBand & 900 \\
\hline & - HighSpeedParameters & 900 \\
\hline - & IMS-Parameters & 901 \\
\hline - & InterRAT-Parameters & 902 \\
\hline - & MAC-Parameters & 903 \\
\hline - & MeasAndMobParameters & 905 \\
\hline - & MeasAndMobParametersMRDC & 908 \\
\hline - & MIMO-Layers & 909 \\
\hline - & MIMO-ParametersPerBand & 910 \\
\hline - & ModulationOrder & 915 \\
\hline & MRDC-Parameters & 916 \\
\hline & NRDC-Parameters & 917 \\
\hline & OLPC-SRS-Pos & 918 \\
\hline & PDCP-Parameters & 918 \\
\hline & PDCP-ParametersMRDC & 920 \\
\hline & Phy-Parameters & 920 \\
\hline & Phy-ParametersMRDC & 926 \\
\hline & Phy-ParametersSharedSpectrumChAccess & 927 \\
\hline & PowSav-Parameters & 928 \\
\hline & ProcessingParameters & 929 \\
\hline & QoE-Parameters & 929 \\
\hline & RAT-Type & 930 \\
\hline & RedCapParameters & 930 \\
\hline & RF-Parameters & 931 \\
\hline & RF-ParametersMRDC & 936 \\
\hline & RLC-Parameters & 938 \\
\hline & SDAP-Parameters & 938 \\
\hline & SidelinkParameters & 939 \\
\hline & SimultaneousRxTxPerBandPair & 942 \\
\hline & SON-Parameters & 943 \\
\hline & SpatialRelationsSRS-Pos & 943 \\
\hline & SRS-SwitchingTimeNR & 944 \\
\hline & SRS-SwitchingTimeEUTRA & 944 \\
\hline & SupportedBandwidth & 944 \\
\hline & UE-BasedPerfMeas-Parameters & 945 \\
\hline & UE-CapabilityRAT-ContainerList & 945 \\
\hline & UE-CapabilityRAT-RequestList & 946 \\
\hline & UE-CapabilityRequestFilterCommon & 947 \\
\hline & UE-CapabilityRequestFilterNR & 948 \\
\hline & UE-MRDC-Capability & 949 \\
\hline & UE-NR-Capability & 951 \\
\hline & SharedSpectrumChAccessParamsPerBand & 954 \\
\hline 6.3.4 & Other information elements & 957 \\
\hline - & AbsoluteTimeInfo & 957 \\
\hline & AreaConfiguration & 958 \\
\hline & BT-NameList & 959 \\
\hline & DedicatedInfoFlc & 960 \\
\hline & EUTRA-AllowedMeasBandwidth & 960 \\
\hline & EUTRA-MBSFN-SubframeConfigList & 960 \\
\hline & EUTRA-MultiBandlnfoList & 961 \\
\hline & EUTRA-NS-PmaxList & 962 \\
\hline & EUTRA-PhysCellld & 962 \\
\hline & EUTRA-PhysCellIdRange & 963 \\
\hline & EUTRA-PresenceAntennaPortl & 963 \\
\hline & EUTRA-Q-OffsetRange & 963 \\
\hline & IAB-IP-Address & 964 \\
\hline & IAB-IP-AddressIndex & 964 \\
\hline & IAB-IP-Usage & 965 \\
\hline & LoggingDuration & 965 \\
\hline & LoggingInterval & 965 \\
\hline & LogMeasResultListBT & 966 \\
\hline
\end{tabular}

ETSI


--- Page 20  ---


3GPP TS 38.331 version 17.0.0 Release 17
19
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline - & LogMeasResultListWLAN & 966 \\
\hline - & OtherConfig & 968 \\
\hline - & PhysCellIdUTRA-FDD & 974 \\
\hline - & RRC-TransactionIdentifier & 974 \\
\hline - & Sensor-NameList & 975 \\
\hline & - TraceReference & 975 \\
\hline & - UE-MeasurementsAvailable & 976 \\
\hline - & UTRA-FDD-Q-OffsetRange & 976 \\
\hline - & VisitedCellinfoList & 977 \\
\hline - & WLAN-NameList & 978 \\
\hline 6.3.5 & Sidelink information elements & 979 \\
\hline - & SL-BWP-Config & 979 \\
\hline - & SL-BWP-ConfigCommon & 980 \\
\hline - & SL-BWP-DiscPoolConfig & 981 \\
\hline & SL-BWP-DiscPoolConfigCommon & 981 \\
\hline - & SL-BWP-PoolConfig & 981 \\
\hline - & SL-BWP-PoolConfigCommon & 983 \\
\hline & SL-BWP-PoolConfigCommonPS & 983 \\
\hline & SL-BWP-PoolConfigPS & 984 \\
\hline & SL-CBR-PriorityTxConfigList & 985 \\
\hline & SL-CBR-CommonTxConfigList & 986 \\
\hline & SL-ConfigDedicatedNR & 987 \\
\hline & SL-Configured GrantConfig & 989 \\
\hline & SL-DestinationIdentity & 991 \\
\hline & SL-DRX-Config & 991 \\
\hline & SL-DRX-Config-GC-BC & 992 \\
\hline & SL-DRX-Config UC & 994 \\
\hline & SL-DRX-ConfigUC-SemiStatic & 995 \\
\hline & SL-FreqConfig & 996 \\
\hline & SL-FreqConfigCommon & 997 \\
\hline & SL-InterUE-CoordinationConfig & 998 \\
\hline & SL-LogicalChannelConfig & 1001 \\
\hline & SL-L2RelayUEConfig & 1003 \\
\hline & SL-L2RemoteUEConfig & 1003 \\
\hline & SL-MeasConfigCommon & 1004 \\
\hline & SL-MeasConfigInfo & 1004 \\
\hline & SL-MeasIdList & 1006 \\
\hline & SL-MeasObjectList & 1006 \\
\hline & SL-MeasResultsRelay & 1007 \\
\hline & SL-PagingIdentity-RemoteUE & 1008 \\
\hline & SL-PBPS-CPS-Config & 1008 \\
\hline & SL-PDCP-Config & 1010 \\
\hline & SL-PSSCH-TxConfigList & 1012 \\
\hline & SL-QoS-Flowldentity & 1013 \\
\hline & SL-QoS-Profile & 1013 \\
\hline & SL-QuantityConfig & 1015 \\
\hline & SL-RadioBearerConfig & 1015 \\
\hline & SL-RemoteUE-Config & 1017 \\
\hline & SL-ReportConfigList & 1017 \\
\hline & SL-ResourcePool & 1019 \\
\hline & SL-RLC-BearerConfig & 1027 \\
\hline & SL-RLC-BearerConfigIndex & 1028 \\
\hline & SL-RLC-ChannelConfig & 1028 \\
\hline & SL-RLC-ChannellD & 1029 \\
\hline & SL-RLC-Config & 1029 \\
\hline & SL-ScheduledConfig & 1030 \\
\hline & SL-SDAP-Config & 1031 \\
\hline & SL-ServingCellinfo & 1032 \\
\hline & SL-Sourceldentity & 1033 \\
\hline & SL-SRAP-Config & 1033 \\
\hline & SL-SyncConfig & 1034 \\
\hline - & SL-Thres-RSRP-List & 1036 \\
\hline
\end{tabular}

ETSI


--- Page 21  ---


3GPP TS 38.331 version 17.0.0 Release 17
20
ETSI TS 138331 V17.0.0 (2022-05)
- SL-TypeTxSync ..... 1036
- SL-UE-SelectedConfig ..... 1037
- SL-ZoneConfig ..... 1037
- SLRB-Uu-ConfigIndex ..... 1038
6.3.6 MBS information elements ..... 1038
CarrierFreqListMBS ..... 1038
CFR-ConfigMCCH-MTCH ..... 1039
DRX-ConfigPTM ..... 1039
MBS-NeighbourCellList ..... 1041
MBS-ServiceList ..... 1041
MBS-SessionInfoList ..... 1042
MTCH-SSB-MappingWindowList ..... 1044
PDSCH-ConfigBroadcast ..... 1045
6.4 RRC multiplicity and type constraint values ..... 1046
Multiplicity and type constraint definitions ..... 1046
End of NR-RRC-Definitions. ..... 1054
6.5 Short Message ..... 1054
6.6 PC5 RRC messages ..... 1054
6.6.1 General message structure ..... 1054
PC5-RRC-Definitions ..... 1054
SBCCH-SL-BCH-Message ..... 1055
SCCH-Message ..... 1056
MasterInformationBlockSidelink ..... 1057
MeasurementReportSidelink ..... 1057
NotificationMessageSidelink ..... 1059
RemoteUEInformationSidelink ..... 1059
RRCReconfigurationSidelink ..... 1060
RRCReconfiguration CompleteSidelink ..... 1063
RRCReconfigurationFailureSidelink ..... 1064
UEAssistanceInformationSidelink ..... 1065
UECapabilityEnquirySidelink ..... 1066
UECapabilityInformationSidelink ..... 1067
UuMessageTransferSidelink ..... 1069
End of PC5-RRC-Definitions ..... 1070
7 Variables and constants ..... 1071
7.1 Timers ..... 1071
7.1.1 Timers (Informative) ..... 1071
7.1.2 Timer handling ..... 1079
7.2 Counters ..... 1079
7.3 Constants ..... 1080
7.4 UE variables ..... 1080
NR-UE-Variables ..... 1080
VarConditionalReconfig ..... 1081
VarConnEstFailReport ..... 1082
VarConnEstFailReportList ..... 1082
VarLogMeasConfig ..... 1083
VarLogMeasReport ..... 1083
VarMeasConfig ..... 1084
VarMeasConfigSL ..... 1084
VarMeasIdleConfig ..... 1085
VarMeasIdleReport ..... 1085
VarMeasReportList ..... 1085
VarMeasReportListSL ..... 1086
VarMobilityHistoryReport ..... 1087
VarPendingRNA-Update ..... 1087
VarRA-Report ..... 1087
VarResumeMAC-Input ..... 1088
VarRLF-Report ..... 1088
VarShortMAC-Input ..... 1089
VarSuccessHO-Report ..... 1089

ETSI


--- Page 22  ---


3GPP TS 38.331 version 17.0.0 Release 17
21
ETSI TS 138331 V17.0.0 (2022-05)
- End of NR-UE-Variables ..... 1090
8 Protocol data unit abstract syntax ..... 1091
8.1 General ..... 1091
8.2 Structure of encoded RRC messages ..... 1091
8.3 Basic production ..... 1091
8.4 Extension ..... 1091
8.5 Padding ..... 1092
9 Specified and default radio configurations. ..... 1092
9.1 Specified configurations ..... 1092
9.1.1 Logical channel configurations ..... 1092
9.1.1.1 BCCH configuration ..... 1092
9.1.1.2 CCCH configuration ..... 1093
9.1-1.3 PCCH configuration ..... 1093
9.1.1.4 SCCH configuration ..... 1093
9.1.1.5 STCH configuration ..... 1096
9.1.1.6 MCCH configuration ..... 1097
9.1.1.7 MTCH configuration for MBS broadcast ..... 1097
9.1.2 Void ..... 1097
9.2 Default radio configurations ..... 1097
9.2.1 Default SRB configurations ..... 1098
9.2.2 Default MAC Cell Group configuration ..... 1098
9.2.3 Default values timers and constants ..... 1098
9.2.4 Default sidelink RLC bearer configuration ..... 1098
9.3 Sidelink pre-configured parameters ..... 1100
- NR-Sidelink-Preconf ..... 1100
- SL-PreconfigurationNR ..... 1100
- End of NR-Sidelink-Preconf- ..... 1102
- SL-AccessInfo-L2U2N ..... 1102
10 Generic error handling ..... 1104
10.1 General ..... 1104
10.2 ASN.1 violation or encoding error ..... 1104
10.3 Field set to a not comprehended value ..... 1104
10.4 Mandatory field missing ..... 1104
10.5 Not comprehended field ..... 1106
11 Radio information related interactions between network nodes ..... 1107
11.1 General ..... 1107
11.2 Inter-node RRC messages ..... 1107
11.2.1 General ..... 1107
11.2.2 Message definitions ..... 1109
CG-CandidateList ..... 1109
HandoverCommand ..... 1110
HandoverPreparationInformation ..... 1110
CG-Config ..... 1115
CG-ConfigInfo ..... 1123
MeasurementTimingConfiguration ..... 1133
UERadioPagingInformation ..... 1135
UERadioAccessCapabilityInformation ..... 1137
11.2.3 Mandatory information in inter-node RRC messages ..... 1137
11.3 Inter-node RRC information element definitions ..... 1139
11.4 Inter-node RRC multiplicity and type constraint values ..... 1139
- Multiplicity and type constraints definitions. ..... 1139
- End of NR-InterNodeDefinitions ..... 1139
12 Processing delay requirements for RRC procedures ..... 1140
Annex A (informative): Guidelines, mainly on use of ASN. 1 ..... 1145
A. 1 Introduction ..... 1145
A. 2 Procedural specification ..... 1145

ETSI


--- Page 23  ---


3GPP TS 38.331 version 17.0.0 Release 17
22
ETSI TS 138331 V17.0.0 (2022-05)
A. 3 PDU specification .............................................................................................................. 1146
A.3.1 General principles
A.3.7 Guidelines on use of lists with elements of SEQUENCE type
A.3.8 Guidelines on use of parameterised SetupRelease type
A.3.9 Guidelines on use of ToAddModList and ToReleaseList ...............................................................................1156
A. 4 Extension of the PDU specifications................................................................................... 1158

A4.3.4 Typical examples of non critical extension at the end of a message
A4.3.5 Examples of non-critical extensions not placed at the default extension location ................................1165
A. 5 Guidelines regarding inclusion of transaction identifiers in RRC messages................................. 1171
A. 6 Guidelines regarding use of need codes ................................................................................. 1171

Annex D (normative): UE requirements on ASN. 1 comprehension......................................... 1178

History ………………………………………………………………………………………………………………. 1196

ETSI


--- Page 24  ---


3GPP TS 38.331 version 17.0.0 Release 17
23
ETSI TS 138331 V17.0.0 (2022-05)

Foreword
This Technical Specification has been produced by the \( 3{ }^{\text {rd }} \) Generation Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:

Version x.y.z
where:
\( x \) the first digit:
1 presented to TSG for information;
2 presented to TSG for approval;
3 or greater indicates TSG approved document under change control.
y the second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.
\( z \) the third digit is incremented when editorial only changes have been incorporated in the document.

ETSI


--- Page 25  ---


3GPP TS 38.331 version 17.0.0 Release 17
24
ETSI TS 138331 V17.0.0 (2022-05)

1 Scope
The present document specifies the Radio Resource Control protocol for the radio interface between UE and NG-RAN.
The scope of the present document also includes:
- the radio related information transported in a transparent container between source gNB and target gNB upon inter gNB handover;
- the radio related information transported in a transparent container between a source or target gNB and another system upon inter RAT handover.
- the radio related information transported in a transparent container between a source eNB and target gNB during E-UTRA-NR Dual Connectivity.

The RRC protocol is also used to configure the radio interface between an [AB-node and its parent node [2].
2 References
The following documents contain provisions which, through reference in this text, constitute provisions of the present document.
- References are either specific (identified by date of publication, edition number, version number, etc.) or non-specific.
- For a specific reference, subsequent revisions do not apply.
- For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.
[1] 3GPP TR 21.905: "Vocabulary for 3GPP Specifications".
[2] 3GPP TS 38.300: "NR; Overall description; Stage 2".
[3] 3GPP TS 38.321: "NR; Medium Access Control (MAC); Protocol specification".
[4] 3GPP TS 38.322: "NR; Radio Link Control (RLC) protocol specification".
[5] 3GPP TS 38.323: "NR; Packet Data Convergence Protocol (PDCP) protocol specification".
[6] ITU-T Recommendation X. 680 (08/2015) "Information Technology - Abstract Syntax Notation One (ASN.1): Specification of basic notation" (Same as the ISO/IEC International Standard 88241).
[7] ITU-T Recommendation X. 681 (08/2015) "Information Technology - Abstract Syntax Notation One (ASN.1): Information object specification" (Same as the ISO/IEC International Standard 8824-2).
[8] ITU-T Recommendation X.691 (08/2015) "Information technology - ASN. 1 encoding rules: Specification of Packed Encoding Rules (PER)" (Same as the ISO/IEC International Standard 8825-2).
[9] 3GPP TS 38.215: "NR; Physical layer measurements".
[10] 3GPP TS 36.331: "Evolved Universal Terrestrial Radio Access (E-UTRA) Radio Resource Control (RRC); Protocol Specification".
[11] 3GPP TS 33.501: "Security Architecture and Procedures for 5G System".
[12] 3GPP TS 38.104: "NR; Base Station (BS) radio transmission and reception".

ETSI


--- Page 26  ---


3GPP TS 38.331 version 17.0.0 Release 17
25
ETSI TS 138331 V17.0.0 (2022-05)

[13] 3GPP TS 38.213: "NR; Physical layer procedures for control".
[14] 3GPP TS 38.133: "NR; Requirements for support of radio resource management".
[15] 3GPP TS 38.101-1: "NR; User Equipment (UE) radio transmission and reception; Part 1: Range 1 Standalone".
[16] 3GPP TS 38.211: "NR; Physical channels and modulation".
[17] 3GPP TS 38.212: "NR; Multiplexing and channel coding".
[18] ITU-T Recommendation X. 683 (08/2015) "Information Technology - Abstract Syntax Notation One (ASN.1): Parameterization of ASN.1 specifications" (Same as the ISO/IEC International Standard 8824-4).
[19] 3GPP TS 38.214: "NR; Physical layer procedures for data".
[20] 3GPP TS 38.304: "NR; User Equipment (UE) procedures in Idle mode and RRC Inactive state".
[21] 3GPP TS 23.003: "Numbering, addressing and identification".
[22] 3GPP TS 36.101: "E-UTRA; User Equipment (UE) radio transmission and reception".
[23] 3GPP TS 24.501: "Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3".
[24] 3GPP TS 37.324: "Service Data Adaptation Protocol (SDAP) specification".
[25] 3GPP TS 22.261: "Service requirements for the 5G System".
[26] 3GPP TS 38.306: "User Equipment (UE) radio access capabilities".
[27] 3GPP TS 36.304: "E-UTRA; User Equipment (UE) procedures in idle mode".
[28] ATIS 0700041: "WEA 3.0: Device-Based Geo-Fencing".
[29] 3GPP TS 23.041: "Technical realization of Cell Broadcast Service (CBS)".
[30] 3GPP TS 33.401: "3GPP System Architecture Evolution (SAE); Security architecture".
[31] 3GPP TS 36.211: "E-UTRA; Physical channels and modulation".
[32] 3GPP TS 23.501: "System Architecture for the 5G System; Stage 2".
[33] 3GPP TS 36.104:"E-UTRA; Base Station (BS) radio transmission and reception".

[34]

3GPP TS 38.101-3 "NR; User Equipment (UE) radio transmission and reception; Part 3: Range 1 and Range 2 Interworking operation with other radios".
[35] 3GPP TS 38.423: "NG-RAN, Xn application protocol (XnAP)".
[36] 3GPP TS 38.473: "NG-RAN; F1 application protocol (F1AP)".
[37] 3GPP TS 36.423: "E-UTRA; X2 application protocol (X2AP)".
[38] 3GPP TS 24.008: "Mobile radio interface layer 3 specification; Core network protocols; Stage 3".

[39]

3GPP TS 38.101-2 "NR; User Equipment (UE) radio transmission and reception; Part 2: Range 2 Standalone".

[40]

3GPP TS 36.133:"E-UTRA; Requirements for support of radio resource management".

[41]

3GPP TS 37.340: "E-UTRA and NR; Multi-connectivity; Stage 2".

[42]

3GPP TS 38.413: "NG-RAN, NG Application Protocol (NGAP)".

[43]

3GPP TS 23.502: "Procedures for the 5G System; Stage 2".

ETSI


--- Page 27  ---


3GPP TS 38.331 version 17.0.0 Release 17
26
ETSI TS 138331 V17.0.0 (2022-05)

[44] 3GPP TR 36.816: "Evolved Universal Terrestrial Radio Access (E-UTRA); Study on signalling and procedure for interference avoidance for in-device coexistence".
[45] 3GPP TS 25.331 : "Universal Terrestrial Radio Access (UTRA); Radio Resource Control (RRC); Protocol specification".
[46] 3GPP TS 25.133: "Requirements for Support of Radio Resource Management (FDD)".
[47] 3GPP TS 38.340: "Backhaul Adaptation Protocol (BAP) specification"
[48] 3GPP TS 37.213: "Physical layer procedures for shared spectrum channel access".
[49] 3GPP TS 37.355: "LTE Positioning Protocol (LPP)".
[50] [EEE 802.11-2012, Part 11: Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) specifications, IEEE Std.
[51] Bluetooth Special Interest Group: "Bluetooth Core Specification v5.0", December 2016.
[52] 3GPP TS 32.422: "Telecommunication management; Subscriber and equipment trace; Trace control and configuration management".

3GPP TS 38.314: "NR; layer 2 measurements".
Void.
3GPP TS 23.287: "Architecture enhancements for 5G System (5GS) to support Vehicle-toEverything (V2X) services".

3GPP TS 23.285: "Technical Specification Group Services and System Aspects; Architecture enhancements for V2X services".

3GPP TS 24.587: "Technical Specification Group Core Network and Terminals; Vehicle-toEverything (V2X) services in 5G System (5GS)".

Military Standard WGS84 Metric MIL-STD-2401 (11 January 1994): "Military Standard Department of Defence World Geodetic System (WGS)".

3GPP TS 38.101-4 "NR; User Equipment (UE) radio transmission and reception; Part 4: Performance Requirements".

3GPP TS 33.536: "Technical Specification Group Services and System Aspects; Security aspects of 3GPP support for advanced Vehicle-to-Everything (V2X) services".

3GPP TS 37.320: "Universal Terrestrial Radio Access (UTRA), Evolved Universal Terrestrial Radio Access (E-UTRA) and New Radio (NR); Radio measurement collection for Minimization of Drive Tests (MDT); Overall description; Stage 2".

[62]

3GPP TS 36.306: "User Equipment (UE) radio access capabilities".
3GPP TS 38.174: "NR; Integrated Access and Backhaul (IAB) radio transmission and reception".
3GPP TS 38.472: "NG-RAN; F1 signalling transport".
3GPP TS 23.304: "Proximity based Services (ProSe) in the 5G System (5GS)".
3GPP TS 38.351: "NR; Sidelink Relay Adaptation Protocol (SRAP) Specification".
3GPP TS 23.247: "Architectural enhancements for 5G multicast-broadcast services; Stage 2"
3GPP TS 26.247: "Transparent end-to-end Packet-switched Streaming Service (PSS); Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-DASH)".

3GPP TS 26.114: "IP Multimedia Subsystem (IMS); Multimedia Telephony; Media handling and interaction".

3GPP TS 26.118: "Virtual Reality (VR) profiles for streaming applications".

ETSI


--- Page 28  ---


3GPP TS 38.331 version 17.0.0 Release 17
27
ETSI TS 138331 V17.0.0 (2022-05)

3 Definitions, symbols and abbreviations
3.1 Definitions

For the purposes of the present document, the terms and definitions given in TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].

AM MRB: An MRB associated with at least an AM RLC bearer for PTP transmission.
BH RLC channel: An RLC channel between two nodes, which is used to transport backhaul packets.
Broadcast MRB: A radio bearer configured for MBS broadcast delivery.
CEIL: Mathematical function used to 'round up' i.e to the nearest integer having a higher or equal value.
DAPS bearer: a bearer whose radio protocols are located in both the source gNB and the target gNB during DAPS handover to use both source gNB and target gNB resources.

Dedicated signalling: Signalling sent on DCCH logical channel between the network and a single UE.
Dormant BWP: The dormant BWP is one of downlink BWPs configured by the network via dedicated RRC signallingIn the dormant BWP, the UE stops monitoring PDCCH on/for the SCell, but continues performing CSI measurements, Automatic Gain Control (AGC) and beam management, if configured. For each serving cell other than the SpCell or PUCCH SCell, the network may configure one BWP as a dormant BWP.

Field: The individual contents of an information element are referred to as fields.
FLOOR: Mathematical function used to 'round down' i.e to the nearest integer having a lower or equal value.
Global cell identity: An identity to uniquely identifying an NR cell. It is consisted of cellldentity and plmn-Identity of the first PLMN-Identity in plmn-IdentityList in SIB1.

Information element: A structural element containing single or multiple fields is referred as information element.
MBS Radio Bearer: A radio bearer that is configured for MBS delivery.
Multicast/Broadcast Service: A point-to-multipoint service as defined in TS 23.247 [67].
Multicast MRB: A radio bearer configured for MBS multicast delivery.
NCSG: Network controlled small gap as defined in TS 38.133 [14].
NPN-only Cell: A cell that is only available for normal service for NPNs' subscriber. An NPN-capable UE determines that a cell is NPN-only Cell by detecting that the cellReservedForOther Use IE is set to true while the npnIdentitylnfoList [E is present in CellAccessRelatedInfo.

NR sidelink communication: AS functionality enabling at least V2X Communication as defined in TS 23.287 [55], between two or more nearby UEs, using NR technology but not traversing any network node.

PNI-NPN identity: an identifier of a PNI-NPN comprising of a PLMN ID and a CAG -ID combination.
Primary Cell: The MCG cell, operating on the primary frequency, in which the UE either performs the initial connection establishment procedure or initiates the connection re-establishment procedure.

PC5 Relay RLC channel: An RLC channel between L2 U2N Remote UE and L2 U2N Relay UE, which is used to transport packets over PC5 for L2 UE-to-Network relay.

Primary SCG Cell: For dual connectivity operation, the SCG cell in which the UE performs random access when performing the Reconfiguration with Sync procedure.

Primary Timing Advance Group: Timing Advance Group containing the SpCell.
PUCCH SCell: An SCell configured with PUCCH.
PUSCH-Less SCell: An SCell configured without PUSCH.

ETSI


--- Page 29  ---


3GPP TS 38.331 version 17.0.0 Release 17
28
ETSI TS 138331 V17.0.0 (2022-05)

RedCap UE: A UE with reduced capabilities as specified in clause 4.2.21.1 in TS 38.306 [26].
RLC bearer configuration: The lower layer part of the radio bearer configuration comprising the RLC and logical channel configurations.

Secondary Cell: For a UE configured with CA, a cell providing additional radio resources on top of Special Cell.
Secondary Cell Group: For a UE configured with dual connectivity, the subset of serving cells comprising of the PSCell and zero or more secondary cells.

Serving Cell: For a UE in RRC_CONNECTED not configured with CA/DC there is only one serving cell comprising of the primary cell. For a UE in RRC_CONNECTED configured with CA/ DC the term 'serving cells' is used to denote the set of cells comprising of the Special Cell(s) and all secondary cells.

Small Data Transmission: A procedure used for transmission of data and/or signalling over allowed radio bearers in RRC_INACTIVE state (i.e. without the UE transitioning to RRC_CONNECTED state).

SNPN identity: an identifier of an SNPN comprising of a PLMN ID and an NID combination.
Special Cell: For Dual Connectivity operation the term Special Cell refers to the PCell of the MCG or the PSCell of the SCG, otherwise the term Special Cell refers to the PCell.

Split SRB: In MR-DC, an SRB that supports transmission via MCG and SCG as well as duplication of RRC PDUs as defined in TS 37.340 [41].

SSB Frequency: Frequency referring to the position of resource element \( \mathrm{RE}=\# 0 \) (subcarrier \#0) of resource block RB\#10 of the SS block.

U2N Relay UE: A UE that provides functionality to support connectivity to the network for U2N Remote UE(s).
U2N Remote UE: A UE that communicates with the network via a U2N Relay UE.
Uu Relay RLC channel: An RLC channel between L2 U2N Relay UE and gNB, which is used to transport packets over Uu for L2 UE-to-Network relay.

UE Inactive AS Context: UE Inactive AS Context is stored when the connection is suspended and restored when the connection is resumed. It includes information as defined in clause 5.3.8.3.

V2X sidelink communication: AS functionality enabling V2X Communication as defined in TS 23.285 [56], between nearby UEs, using E-UTRA technology but not traversing any network node.
3.2 Abbreviations

For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].

\begin{tabular}{|l|l|}
\hline 5GC & 5G Core Network \\
\hline ACK & Acknowledgement \\
\hline AM & Acknowledged Mode \\
\hline ARQ & Automatic Repeat Request \\
\hline AS & Access Stratum \\
\hline ASN. 1 & Abstract Syntax Notation One \\
\hline BAP & Backhaul Adaptation Protocol \\
\hline BCD & Binary Coded Decimal \\
\hline BFD & Beam Failure Detection \\
\hline BH & Backhaul \\
\hline BLER & Block Error Rate \\
\hline BWP & Bandwidth Part \\
\hline CA & Carrier Aggregation \\
\hline CAG & Closed Access Group \\
\hline CAG-ID & Closed Access Group Identifier \\
\hline CAPC & Channel Access Priority Class \\
\hline CBR & Channel Busy Ratio \\
\hline
\end{tabular}

ETSI


--- Page 30  ---


3GPP TS 38.331 version 17.0.0 Release 17
29
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline CCCH & Common Control Channel \\
\hline CG & Cell Group \\
\hline CHO & Conditional Handover \\
\hline CLI & Cross Link Interference \\
\hline CMAS & Commercial Mobile Alert Service \\
\hline CP & Control Plane \\
\hline CPA & Conditional PSCell Addition \\
\hline CPC & Conditional PSCell Change \\
\hline C-RNTI & Cell RNTI \\
\hline CSI & Channel State Information \\
\hline DAPS & Dual Active Protocol Stack \\
\hline DC & Dual Connectivity \\
\hline DCCH & Dedicated Control Channel \\
\hline DCI & Downlink Control Information \\
\hline DCP & DCI with CRC scrambled by PS-RNTI \\
\hline DFN & Direct Frame Number \\
\hline DL & Downlink \\
\hline DL-PRS & Downlink Positioning Reference Signal \\
\hline DL-SCH & Downlink Shared Channel \\
\hline DM-RS & Demodulation Reference Signal \\
\hline DRB & (user) Data Radio Bearer \\
\hline DRX & Discontinuous Reception \\
\hline DTCH & Dedicated Traffic Channel \\
\hline EN-DC & E-UTRA NR Dual Connectivity with E-UTRA connected to EPC \\
\hline EPC & Evolved Packet Core \\
\hline EPS & Evolved Packet System \\
\hline ETWS & Earthquake and Tsunami Warning System \\
\hline E-UTRA & Evolved Universal Terrestrial Radio Access \\
\hline E-UTRA/5GC & E-UTRA connected to 5GC \\
\hline E-UTRA/EPC & E-UTRA connected to EPC \\
\hline E-UTRAN & Evolved Universal Terrestrial Radio Access Network \\
\hline FDD & Frequency Division Duplex \\
\hline FFS & For Further Study \\
\hline G-CS-RNTI & Group Configured Scheduling RNTI \\
\hline GERAN & GSM/EDGE Radio Access Network \\
\hline GIN & Group ID for Network selection \\
\hline GNSS & Global Navigation Satellite System \\
\hline G-RNTI & Group RNTI \\
\hline GSM & Global System for Mobile Communications \\
\hline HARQ & Hybrid Automatic Repeat Request \\
\hline HRNN & Human Readable Network Name \\
\hline HSDN & High Speed Dedicated Network \\
\hline H-SFN & Hyper SFN \\
\hline LAB & Integrated Access and Backhaul \\
\hline [AB-DU & [AB-node DU \\
\hline [AB-MT & [AB Mobile Termination \\
\hline IDC & In-Device Coexistence \\
\hline IE & Information element \\
\hline IMSI & International Mobile Subscriber Identity \\
\hline kB & Kilobyte (1000 bytes) \\
\hline L1 & Layer 1 \\
\hline L2 & Layer 2 \\
\hline L3 & Layer 3 \\
\hline LBT & Listen Before Talk \\
\hline MAC & Medium Access Control \\
\hline MBS & Multicast/Broadcast Service \\
\hline MBS FSAI & MBS Frequency Selection Area Identity \\
\hline MCCH & MBS Control Channel \\
\hline MCG & Master Cell Group \\
\hline MDT & Minimization of Drive Tests \\
\hline MIB & Master Information Block \\
\hline MPE & Maximum Permissible Exposure \\
\hline
\end{tabular}

ETSI


--- Page 31  ---


3GPP TS 38.331 version 17.0.0 Release 17
30
ETSI TS 138331 V17.0.0 (2022-05)

MRB MBS Radio Bearer
MR-DC Multi-Radio Dual Connectivity
MTCH MBS Traffic Channel
MTSI Multimedia Telephony Service for IMS
MUSIM Multi-Universal Subscriber Identity Module
N/A Not Applicable
NE-DC NR E-UTRA Dual Connectivity
(NG)EN-DC E-UTRA NR Dual Connectivity (covering E-UTRA connected to EPC or 5GC)
NGEN-DC E-UTRA NR Dual Connectivity with E-UTRA connected to 5GC
NID Network Identifier
NPN Non-Public Network
NR-DC NR-NR Dual Connectivity
NR/5GC NR connected to 5GC
PCell Primary Cell
PDCP Packet Data Convergence Protocol
PDU Protocol Data Unit
PEI Paging Early Indication
PLMN Public Land Mobile Network
PNI-NPN Public Network Integrated Non-Public Network
posSIB Positioning SIB
PPW PRS Processing Window
PRS Positioning Reference Signal
PSCell Primary SCG Cell
PTM Point to Multipoint
PTP Point to Point
PWS Public Warning System
QoE Quality of Experience
QoS Quality of Service
RAN Radio Access Network
RAT Radio Access Technology
RLC Radio Link Control
RLM Radio Link Monitoring
RMTC RSSI Measurement Timing Configuration
RNA RAN-based Notification Area
RNTI Radio Network Temporary Identifier
ROHC Robust Header Compression
RPLMN Registered Public Land Mobile Network
RRC Radio Resource Control
RS Reference Signal
SBAS Satellite Based Augmentation System
SCell Secondary Cell
SCG Secondary Cell Group
SCS Subcarrier Spacing
SDT Small Data Transmission
SFN System Frame Number
SFTD SFN and Frame Timing Difference
SI System Information
SIB System Information Block
SL Sidelink
SLSS Sidelink Synchronisation Signal
SNPN Stand-alone Non-Public Network
SpCell Special Cell
SRAP Sidelink Relay Adaptation Protocol
SRB Signalling Radio Bearer
SRS Sounding Reference Signal
SSB Synchronization Signal Block
TAG Timing Advance Group
TDD Time Division Duplex
TEG Timing Error Group
TM Transparent Mode
TMGI Temporary Mobile Group Identity
U2N UE-to-Network

ETSI


--- Page 32  ---


3GPP TS 38.331 version 17.0.0 Release 17
31
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{ll} 
UDC & Uplink Data Compression \\
UE & User Equipment \\
UL & Uplink \\
UM & Unacknowledged Mode \\
UP & User Plane \\
VR & Virtual Reality
\end{tabular}

In the ASN.1, lower case may be used for some (parts) of the above abbreviations e.g. c-RNTI.
4 General
4.1 Introduction

This specification is organised as follows:
- clause 4.2 describes the RRC protocol model;
- clause 4.3 specifies the services provided to upper layers as well as the services expected from lower layers;
- clause 4.4 lists the RRC functions;
- clause 5 specifies RRC procedures, including UE state transitions;
- clause 6 specifies the RRC messages in ASN. 1 and description;
- clause 7 specifies the variables (including protocol timers and constants) and counters to be used by the UE;
- clause 8 specifies the encoding of the RRC messages;
- clause 9 specifies the specified and default radio configurations;
- clause 10 specifies generic error handling;
- clause 11 specifies the RRC messages transferred across network nodes;
- clause 12 specifies the UE capability related constraints and performance requirements.
4.2 Architecture
4.2.1 UE states and state transitions including inter RAT

A UE is either in RRC_CONNECTED state or in RRC_INACTIVE state when an RRC connection has been established. If this is not the case, i.e. no RRC connection is established, the UE is in RRC_IDLE state. The RRC states can further be characterised as follows:
- RRC_IDLE:
- A UE specific DRX may be configured by upper layers;
- An MBS broadcast specific DRX may be configured by upper layers;
- UE controlled mobility based on network configuration;
- The UE:
- Monitors Short Messages transmitted with P-RNTI over DCI (see clause 6.5);
- Monitors a Paging channel for CN paging using 5G-S-TMSI;
- If configured by upper layers for MBS multicast reception, monitors Paging channel for CN paging using TMGI;

ETSI


--- Page 33  ---


3GPP TS 38.331 version 17.0.0 Release 17
32
ETSI TS 138331 V17.0.0 (2022-05)
- Performs neighbouring cell measurements and cell (re-)selection;
- Acquires system information and can send SI request (if configured);
- Performs logging of available measurements together with location and time for logged measurement configured UEs;
- Performs idle/inactive measurements for idle/inactive measurement configured UEs;
- If configured by upper layers for MBS broadcast reception, acquires MCCH change notification and MBS broadcast control information and data.
- RRC_INACTIVE:
- A UE specific DRX may be configured by upper layers or by RRC layer;
- UE controlled mobility based on network configuration;
- The UE stores the UE Inactive AS context;
- A RAN-based notification area is configured by RRC layer;
- Transfer of unicast data and/or signalling to/from UE over radio bearers configured for SDT;

The UE:
- Monitors Short Messages transmitted with P-RNTI over DCI (see clause 6.5);
- During SDT procedure, monitors control channels associated with the shared data channel to determine if data is scheduled for it;
- While SDT procedure is not ongoing, monitors a Paging channel for CN paging using 5G-S-TMSI and RAN paging using fullI-RNTI;
- If configured by upper layers for MBS multicast reception, monitors Paging channel for paging using TMGI;
- Performs neighbouring cell measurements and cell (re-)selection;
- Performs RAN-based notification area updates periodically and when moving outside the configured RAN-based notification area;
- Acquires system information, while SDT procedure is not ongoing, and can send SI request (if configured);
- While SDT procedure is not ongoing, performs logging of available measurements together with location and time for logged measurement configured UEs;
- While SDT procedure is not ongoing, performs idle/inactive measurements for idle/inactive measurement configured UEs;
- If configured by upper layers for MBS broadcast reception, acquires MCCH change notification and MBS broadcast control information and data.
- RRC_CONNECTED:
- The UE stores the AS context;
- Transfer of unicast data to/from UE;
- Transfer of MBS multicast data to UE;
- At lower layers, the UE may be configured with a UE specific DRX;
- For UEs supporting CA, use of one or more SCells, aggregated with the SpCell, for increased band width;
- For UEs supporting DC, use of one SCG, aggregated with the MCG, for increased band width;

ETSI


--- Page 34  ---


3GPP TS 38.331 version 17.0.0 Release 17
33
ETSI TS 138331 V17.0.0 (2022-05)
- Network controlled mobility within NR, to/from E-UTRA, and to UTRA-FDD;
- The UE:
- Monitors Short Messages transmitted with P-RNTI over DCI (see clause 6.5), if configured;
- Monitors control channels associated with the shared data channel to determine if data is scheduled for it;
- Provides channel quality and feedback information;
- Performs neighbouring cell measurements and measurement reporting;
- Acquires system information;
- Performs immediate MDT measurement together with available location reporting;
- If configured by upper layers for MBS broadcast reception, acquires MCCH change notification and MBS broadcast control information and data.

Figure 4.2.1-1 illustrates an overview of UE RRC state machine and state transitions in NR. A UE has only one RRC state in NR at one time.

Figure 4.2.1-1: UE state machine and state transitions in NR

Figure 4.2.1-2 illustrates an overview of UE state machine and state transitions in NR as well as the mobility procedures supported between NR/5GC, E-UTRA/EPC and E-UTRA/5GC.

ETSI


--- Page 35  ---


3GPP TS 38.331 version 17.0.0 Release 17
34
ETSI TS 138331 V17.0.0 (2022-05)

Figure 4.2.1-2: UE state machine and state transitions between NR/5GC, E-UTRA/EPC and EUTRA/5GC

Figure 4.2.1-3 illustrates the mobility procedure supported between NR/5GC and UTRA-FDD.

Figure 4.2.1-3: Mobility procedure supported between NR/5GC and UTRA-FDD
4.2.2 Signalling radio bearers
"Signalling Radio Bearers" (SRBs) are defined as Radio Bearers (RBs) that are used only for the transmission of RRC and NAS messages. More specifically, the following SRBs are defined:
- SRB0 is for RRC messages using the CCCH logical channel;
- SRB1 is for RRC messages (which may include a piggybacked NAS message) as well as for NAS messages prior to the establishment of SRB2, all using DCCH logical channel;
- SRB2 is for NAS messages and for RRC messages which include logged measurement information, all using DCCH logical channel. SRB2 has a lower priority than SRB1 and may be configured by the network after AS security activation;
- SRB3 is for specific RRC messages when UE is in (NG)EN-DC or NR-DC, all using DCCH logical channel;
- SRB4 is for RRC messages which include application layer measurement report information, all using DCCH logical channel. SRB4 can only be configured by the network after AS security activation.

In downlink, piggybacking of NAS messages is used only for one dependant (i.e. with joint success/failure) procedure: bearer establishment/modification/release. In uplink piggybacking of NAS message is used only for transferring the initial NAS message during connection setup and connection resume.

ETSI


--- Page 36  ---


3GPP TS 38.331 version 17.0.0 Release 17
35
ETSI TS 138331 V17.0.0 (2022-05)

NOTE 1: The NAS messages transferred via SRB2 are also contained in RRC messages, which however do not include any RRC protocol control information.

Once AS security is activated, all RRC messages on SRB1, SRB2, SRB3 and SRB4, including those containing NAS messages, are integrity protected and ciphered by PDCP. NAS independently applies integrity protection and ciphering to the NAS messages, see TS 24.501 [23].

Split SRB is supported for all the MR-DC options in both SRB1 and SRB2 (split SRB is not supported for SRB0 and SRB3).

For operation with shared spectrum channel access, SRB0, SRB1 and SRB3 are assigned with the highest priority Channel Access Priority Class (CAPC), (i.e. \( \mathrm{CAPC}=1 \) ) while CAPC for SRB2 is configurable.
4.3 Services
4.3.1 Services provided to upper layers

The RRC protocol offers the following services to upper layers:
- Broadcast of common control information;
- Notification of UEs in RRC_IDLE, e.g. about a mobile terminating call;
- Notification of UEs about ETWS and/or CMAS;
- Transfer of dedicated signalling;
- Broadcast of positioning assistance data;
- Transfer of application layer measurement configuration and reporting.
4.3.2 Services expected from lower layers

In brief, the following are the main services that RRC expects from lower layers:
- Integrity protection, ciphering and loss-less in-sequence delivery of information without duplication;
4.4 Functions

The RRC protocol includes the following main functions:
- Broadcast of system information:
- Including NAS common information;
- Information applicable for UEs in RRC_IDLE and RRC_INACTIVE (e.g. cell (re-)selection parameters, neighbouring cell information) and information (also) applicable for UEs in RRC_CONNECTED (e.g. common channel configuration information);
- Including ETWS notification, CMAS notification;
- Including positioning assistance data.
- RRC connection control:
- Paging;
- Establishment/modification/suspension/resumption/release of RRC connection, including e.g. assignment/modification of UE identity (C-RNTI, fullI-RNTI, etc.), establishment/modification/suspension/resumption/release of SRBs (except for SRB0);
- Access barring;

ETSI


--- Page 37  ---


3GPP TS 38.331 version 17.0.0 Release 17
36
ETSI TS 138331 V17.0.0 (2022-05)
- Initial AS security activation, i.e initial configuration of AS integrity protection (SRBs, DRBs) and AS ciphering (SRBs, DRBs);
- RRC connection mobility including e.g. intra-frequency and inter-frequency handover, associated AS security handling, i.e. key/algorithm change, specification of RRC context information transferred between network nodes;
- Establishment/modification/suspension/resumption/release of RBs carrying user data (DRBs/MRBs);
- Radio configuration control including e.g. assignment/modification of ARQ configuration, HARQ configuration, DRX configuration;
- In case of DC, cell management including e.g. change of PSCell, addition/modification/release of SCG cell(s);
- In case of CA, cell management including e.g. addition/modification/release of SCell(s);
- QoS control including assignment/modification of semi-persistent scheduling (SPS) configuration and configured grant configuration for DL and UL respectively, assignment/ modification of parameters for UL rate control in the UE, i.e. allocation of a priority and a prioritised bit rate (PBR) for each RB of UE and logical channel of IAB-MT.
- Recovery from radio link failure.
- Inter-RAT mobility including e.g. AS security activation, transfer of RRC context information;
- Measurement configuration and reporting:
- Establishment/modification/release of measurement configuration (e.g. intra-frequency, inter-frequency and inter- RAT measurements);
- Setup and release of measurement gaps;
- Measurement reporting.
- Configuration of BAP entity and BH RLC channels for the support of IAB-node.
- Other functions including e.g. generic protocol error handling, transfer of dedicated NAS information, transfer of UE radio access capability information.
- Support of self-configuration and self-optimisation.
- Support of measurement logging and reporting for network performance optimisation, as specified in TS 37.320 [61];
- Support of transfer of application layer measurement configuration and reporting.

5 Procedures
5.1 General
5.1.1 Introduction

This clause covers the general requirements.
5.1.2 General requirements

The UE shall:
\( 1> \) process the received messages in order of reception by RRC, i.e. the processing of a message shall be completed before starting the processing of a subsequent message;

ETSI


--- Page 38  ---


3GPP TS 38.331 version 17.0.0 Release 17
37
ETSI TS 138331 V17.0.0 (2022-05)

NOTE: Network may initiate a subsequent procedure prior to receiving the UE's response of a previously initiated procedure.
\( 1> \) within a clause execute the steps according to the order specified in the procedural description;
\( 1> \) consider the term 'radio bearer' (RB) to cover SRBs, DRBs and MRBs unless explicitly stated otherwise;
\( 1> \) set the \( r c \)-Transactionldentifier in the response message, if included, to the same value as included in the message received from the network that triggered the response message;
\( 1> \) upon receiving a choice value set to setup:
\( 2> \) apply the corresponding received configuration and start using the associated resources, unless explicitly specified otherwise;
\( 1> \) upon receiving a choice value set to release:
\( 2> \) clear the corresponding configuration and stop using the associated resources;
\( 1> \) in case the size of a list is extended, upon receiving an extension field comprising the entries in addition to the ones carried by the original field (regardless of whether the network signals more entries in total); apply the following generic behaviour unless explicitly stated otherwise:
\( 2> \) create a combined list by concatenating the additional entries included in the extension field to the original field while maintaining the order among both the original and the additional entries;
\( 2> \) for the combined list, created according to the previous, apply the same behaviour as defined for the original field.
5.1.3 Requirements for UE in MR-DC

In this specification, the UE considers itself to be in:
- EN-DC, if and only if it is configured with nr-SecondaryCellGroupConfig according to TS 36.331[10], and it is connected to EPC,
- NGEN-DC, if and only if it is configured with nr-SecondaryCellGroupConfig according to TS 36.331[10], and it is connected to 5 GC ,
- NE-DC, if and only if it is configured with mrdc-SecondaryCellGroup set to eutra-SCG,
- NR-DC, if and only if it is configured with mrdc-SecondaryCellGroup set to nr-SCG,
- MR-DC, if and only if it is in (NG)EN-DC, NE-DC or NR-DC.

NOTE: This use of these terms deviates from the definition in TS 37.340 [41] and other specifications. In TS 37.340, these terms include also the case where the UE is configured with E-UTRA or NR MCG only (i.e. no NR or E-UTRA SCG) but with one or more bearers terminated in a secondary node (i.e. using NR PDCP).

The UE in (NG)EN-DC only executes a subclause of clause 5 in this specification when the subclause:
- is referred to from a subclause under execution, either in this specification or in TS 36.331 [10]; or
- applies to a message received on SRB3 (if SRB3 is established); or
- applies to field(s), IE(s), UE variable(s) or timer(s) in this specification that the UE is configured with.

When executing a subclause of clause 5 in this specification, the UE follows the requirements in clause 5.1.2 and in all subclauses of this specification applicable to the messages (including processing time requirements), fields, IEs, timers and UE variables indicated in the subclause under execution.

ETSI


--- Page 39  ---


3GPP TS 38.331 version 17.0.0 Release 17
38
ETSI TS 138331 V17.0.0 (2022-05)
5.2 System information
5.2.1 Introduction

System Information \( (\mathrm{SI}) \) is divided into the \( M I B \) and a number of SIBs and posSIBs where:
- the MIB is always transmitted on the BCH with a periodicity of 80 ms and repetitions made within 80 ms (TS 38.212 [17], clause 7.1) and it includes parameters that are needed to acquire SIB1 from the cell. The first transmission of the MIB is scheduled in subframes as defined in TS 38.213 [13], clause 4.1 and repetitions are scheduled according to the period of SSB;
- the SIBI is transmitted on the DL-SCH with a periodicity of 160 ms and variable transmission repetition periodicity within 160 ms as specified in TS 38.213 [13], clause 13. The default transmission repetition periodicity of SIBI is 20 ms but the actual transmission repetition periodicity is up to network implementation. For SSB and CORESET multiplexing pattern 1, SIBI repetition transmission period is 20 ms . For SSB and CORESET multiplexing pattern 2/3, SIB1 transmission repetition period is the same as the SSB period (TS 38.213 [13], clause 13). SIBI includes information regarding the availability and scheduling (e.g. mapping of SIBs to SI message, periodicity, SI-window size) of other SIBs with an indication whether one or more SIBs are only provided on-demand and, in that case, the configuration needed by the UE to perform the SI request. SIBI is cell-specific SIB;
- SIBs other than SIBI and posSIBs are carried in SystemInformation (SI) messages, which are transmitted on the DL-SCH. Only SIBs or posSIBs having the same periodicity can be mapped to the same SI message. SIBs and posSIBs are mapped to the different SI messages. Each SI message is transmitted within periodically occurring time domain windows (referred to as SI-windows with same length for all SI messages). Each SI message is associated with an SI-window and the SI-windows of different SI messages do not overlap. That is, within one SI-window only the corresponding SI message is transmitted. An SI message may be transmitted a number of times within the SI-window. Any SIB or posSIB except SIBI can be configured to be cell specific or area specific, using an indication in SIB1. The cell specific SIB is applicable only within a cell that provides the SIB while the area specific SIB is applicable within an area referred to as SI area, which consists of one or several cells and is identified by systemInformationArealD;
- The mapping of SIBs to SI messages is configured in schedulingInfoList and schedulingInfoList2, while the mapping of posSIBs to SI messages is configured in posSchedulingInfoList and schedulingInfoList2. SIBs and posSIBs are mapped to separate SI messages even when configured using a common schedulingInfoList2. Each SIB is contained only in a single SI message. In the case of posSIB, a posSIB carrying GNSS Generic Assistance Data for different GNSS/SBAS [49] is contained in different SI messages. Each SIB and posSIB, including a posSIB carrying GNSS Generic Assistance Data for one GNSS/SBAS, is contained at most once in that SI message;
- For a UE in RRC_CONNECTED, the network can provide system information through dedicated signalling using the RRCReconfiguration message, e g. if the UE has an active BWP with no common search space configured to monitor system information, paging, or upon request from the UE.
- For PSCell and SCells, the network provides the required SI by dedicated signalling, i.e within an RRCReconfiguration message. Nevertheless, the UE shall acquire MIB of the PSCell to get SFN timing of the SCG (which may be different from MCG). Upon change of relevant SI for SCell, the network releases and adds the concerned SCell. For PSCell, the required SI can only be changed with Reconfiguration with Sync.

NOTE: The physical layer imposes a limit to the maximum size a SIB can take. The maximum SIBI or SI message size is 2976 bits.

ETSI


--- Page 40  ---


3GPP TS 38.331 version 17.0.0 Release 17
39
ETSI TS 138331 V17.0.0 (2022-05)
5.2.2 System information acquisition
5.2.2.1 General UE requirements

Figure 5.2.2.1-1: System information acquisition

The UE applies the SI acquisition procedure to acquire the AS, NAS- and positioning assistance data information. The procedure applies to UEs in RRC_IDLE, in RRC_INACTIVE and in RRC_CONNECTED.

The UE in RRC_IDLE and RRC_INACTIVE shall ensure having a valid version of (at least) the \( M I B, S I B l \) through SIB4, SIB5 (if the UE supports E-UTRA), SIBII (if the UE is configured for idle/inactive measurements), SIB12 (if UE is capable of NR sidelink communication/discovery and is configured by upper layers to receive or transmit NR sidelink communication/discovery), and SIB13, SIB14 (if UE is capable of V2X sidelink communication and is configured by upper layers to receive or transmit V2X sidelink communication), SIB16 (if the UE is configured for slice specific cell reselection information), SIB19 (if UE is accessing NR via satellite access).

The UE capable of MBS broadcast which is receiving or interested to receive MBS broadcast service(s) via a broadcast MRB shall ensure having a valid version of SIB20 and SIB21, regardless of the RRC state the UE is in.

The UE shall ensure having a valid version of the posSIB requested by upper layers.
5.2.2.2 SIB validity and need to (re)-acquire SIB
5.2.2.2.1 SIB validity

The UE shall apply the SI acquisition procedure as defined in clause 5.2.2.3 upon cell selection (e.g. upon power on), cell-reselection, return from out of coverage, after reconfiguration with sync completion, after entering the network from another RAT, upon receiving an indication that the system information has changed, upon receiving a PWS notification, upon receiving request (e.g., a positioning request) from upper layers; and whenever the UE does not have a valid version of a stored SIB or posSIB or a valid version of a requested SIB.

When the UE acquires a \( M I B \) or a \( S I B I \) or an SI message in a serving cell as described in clause 5.2.2.3, and if the UE stores the acquired SIB, then the UE shall store the associated areaScope, if present, the first PLMN-Identity in the PLMN-IdentityInfoList for non-NPN-only cells or the first NPN identity (SNPN identity in case of SNPN, or PNI-NPN identity in case of PNI-NPN) in the NPN-IdentitylnfoList for NPN-only cells, the cellldentity, the systemInformationAreaID, if present, and the valueTag, if present, as indicated in the si-SchedulingInfo for the SIB. If the UE stores the acquired posSIB, then the UE shall store the associated areaScope, if present, the cellldentity, the systemInformationAreaID, if present, the valueTag, if provided in assistanceDataSIB-Element, and the expirationTime if provided in assistanceDataSIB-Element. The UE may use a valid stored version of the SI except MIB, SIBI, SIB6, SIB7 or SIB8 e g. after cell re-selection, upon return from out of coverage or after the reception of SI change indication. The valueTag and expirationTime for posSIB is optionally provided in assistanceDataSIB-Element, as specified in TS 37.355 [49].

NOTE: The storage and management of the stored SIBs in addition to the SIBs valid for the current serving cell is left to UE implementation.

The UE shall:
\( 1> \) delete any stored version of a SIB after 3 hours from the moment it was successfully confirmed as valid;

ETSI


--- Page 41  ---


3GPP TS 38.331 version 17.0.0 Release 17
40
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) for each stored version of a SIB:
\( 2> \) if the areaScope is associated and its value for the stored version of the SIB is the same as the value received in the si-SchedulingInfo for that SIB from the serving cell:
\( 3> \) if the UE is NPN capable and the cell is an NPN-only cell:
\( 4> \) if the first NPN identity included in the NPN-IdentityInfoList, the systemInformationAreaID and the valueTag that are included in the si-SchedulingInfo for the SIB received from the serving cell are identical to the NPN identity, the systemInformationAreaID and the valueTag associated with the stored version of that SIB:
\( 5> \) consider the stored SIB as valid for the cell;
\( 3> \) else if the first PLMN-Identity included in the PLMN-IdentityInfoList, the systemInformationAreaID and the valueTag that are included in the si-SchedulingInfo for the SIB received from the serving cell are identical to the PLMN-Identity, the systemInformationAreaID and the valueTag associated with the stored version of that SIB:
\( 4> \) consider the stored SIB as valid for the cell;
\( 2> \) if the areaScope is not present for the stored version of the SIB and the areaScope value is not included in the si-SchedulingInfo for that SIB from the serving cell:
\( 3> \) if the UE is NPN capable and the cell is an NPN-only cell:
\( 4> \) if the first NPN identity in the NPN-IdentityInfoList, the cellldentity and valueTag that are included in the si-Schedulinglnfo for the SIB received from the serving cell are identical to the NPN identity, the cellldentity and the valueTag associated with the stored version of that SIB:
\( 5> \) consider the stored SIB as valid for the cell;
\( 3> \) else if the first PLMN-Identity in the PLMN-IdentitylnfoList, the cellldentity and valueTag that are included in the si-SchedulingInfo for the SIB received from the serving cell are identical to the PLMNIdentity, the cellldentity and the valueTag associated with the stored version of that SIB:
\( 4> \) consider the stored SIB as valid for the cell;
\( 1> \) for each stored version of a posSIB:
\( 2> \) if the areaScope is associated and its value for the stored version of the posSIB is the same as the value received in the posSIB-MappingInfo for that posSIB from the serving cell and the systemInformationAreaID included in the si-SchedulingInfo is identical to the systemInformationAreaID associated with the stored version of that posSIB:
\( 3> \) if the valueTag (see TS 37.355 [49]) for the posSIB received from the serving cell is identical to the valueTag associated with the stored version of that posSIB; or if the expirationTime (see TS 37.355 [49]) associated with the stored posSIB has not been expired:
\( 4> \) consider the stored posSIB as valid for the cell;
\( 2> \) if the areaScope is not present for the stored version of the posSIB and the areaScope value is not included in the posSIB-MappingInfo for that posSIB from the serving cell and the cellldentity for the posSIB received from the serving cell is identical to the cellldentity associated with the stored version of that posSIB:
\( 3> \) if the valueTag (see TS 37.355 [49]) for the posSIB received from the serving cell is identical to the valueTag associated with the stored version of that posSIB; or if the expirationTime (see TS 37.355 [49]) associated with the stored posSIB has not been expired:
\( 4> \) consider the stored posSIB as valid for the cell;
5.2.2.2.2 SI change indication and PWS notification

A modification period is used, i.e updated SI message (other than SI message for ETWS, CMAS, positioning assistance data, satellite ephemeris, common TA parameters and epoch time) is broadcasted in the modification period following the one where SI change indication is transmitted. The modification period boundaries are defined by SFN values for

ETSI


--- Page 42  ---


3GPP TS 38.331 version 17.0.0 Release 17
41
ETSI TS 138331 V17.0.0 (2022-05)

which \( S F N \bmod m=0 \), where \( m \) is the number of radio frames comprising the modification period. The modification period is configured by system information. If H -SFN is provided in SIB1, and UE is configured with eDRX, modification period boundaries are defined by SFN values for which (H-SFN * \( 1024+ \) SFN ) mod \( m=0 \).

For UEs in RRC_IDLE or RRC_INACTIVE configured to use an eDRX cycle longer than the modification period, an eDRX acquisition period is defined. The boundaries of the eDRX acquisition period are determined by \( H \)-SFN values for which H -SFN \( \bmod 1024=0 \).

The UE receives indications about SI modifications and/or PWS notifications using Short Message transmitted with PRNTI over DCI (see clause 6.5). Repetitions of SI change indication may occur within preceding modification period or within preceding eDRX acquisition period. SI change indication is not applicable for SI messages containing posSIBs.

UEs in RRC_IDLE or in RRC_INACTIVE while T319a is not running shall monitor for SI change indication in their own paging occasion(s) every DRX cycle. UEs in RRC_CONNECTED shall monitor for SI change indication in any paging occasion at least once per modification period if the UE is provided with common search space, including pagingSearchSpace, searchSpaceSIBl and searchSpaceOtherSystemInformation, on the active BWP to monitor paging, as specified in TS 38.213 [13], clause 13.

UES in RRC_[NACTIVE while T319a is running shall monitor for SI change indication in any paging occasion at least once per modification period.

During a modification period where ETWS or CMAS transmission is started or stopped, the SI messages carrying the posSIBs scheduled in posSchedulingInfoList may change, so the UE might not be able to successfully receive those posSIBs in the remainder of the current modification period and next modification period according to the scheduling information received prior to the change.

ETWS or CMAS capable UEs in RRC_IDLE or in RRC_INACTIVE while T319a is not running shall monitor for indications about PWS notification in its own paging occasion every DRX cycle. ETWS or CMAS capable UEs in RRC_CONNECTED shall monitor for indication about PWS notification in any paging occasion at least once every defaultPagingCycle if the UE is provided with common search space, including pagingSearchSpace, searchSpaceSIBI and searchSpaceOtherSystemInformation, on the active BWP to monitor paging.

ETWS or CMAS capable UEs in RRC_INACTIVE while T319a is running shall monitor for indication about PWS notification in any paging occasion at least once every defaultPagingCycle.

For Short Message reception in a paging occasion, the UE monitors the PDCCH monitoring occasion(s) for paging as specified in TS 38.304 [20] and TS 38.213 [13].

If the UE receives a Short Message, the UE shall:
\( 1> \) if the UE is ETWS capable or CMAS capable, the etwsAndCmasIndication bit of Short Message is set, and the UE is provided with searchSpaceSIBl and searchSpaceOtherSystemInformation on the active BWP or the initial BWP:
\( 2> \) immediately re-acquire the SIBI;
\( 2> \) if the UE is ETWS capable and si-Schedulinglnfo includes scheduling information for SIB6:
\( 3> \) acquire SIB6, as specified in clause 5.2.2.3.2, immediately;
\( 2> \) if the UE is ETWS capable and si-SchedulingInfo includes scheduling information for SIB7:
\( 3> \) acquire \( S I B 7 \), as specified in clause 5.2.2.3.2, immediately;
\( 2> \) if the UE is CMAS capable and si-SchedulingInfo includes scheduling information for SIB8:
\( 3> \) acquire \( S I B 8 \), as specified in clause 5.2.2.3.2, immediately;
NOTE: In case SIB6, SIB7, or SIB8 overlap with a measurement gap it is left to UE implementation how to immediately acquire SIB6, SIB7, or SIB8.
\( 1> \) if the UE is not configured with an eDRX cycle longer than the modification period and the systemInfoModification bit of Short Message is set:
\( 2> \) apply the SI acquisition procedure as defined in clause 5.2 .2 .3 from the start of the next modification period;

ETSI


--- Page 43  ---


3GPP TS 38.331 version 17.0.0 Release 17
42
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if the UE is configured with an RRC_IDLE eDRX cycle longer than the modification period and the systemInfoModification-eDRX bit of Short Message is set:
\( 2> \) apply the SI acquisition procedure as defined in clause 5.2 .2 .3 from the start of the next eDRX acquisition period boundary.
5.2.2.3 Acquisition of System Information
5.2.2.3.1 Acquisition of MIB and SIB1

The UE shall:
\( 1> \) apply the specified BCCH configuration defined in 9.1.1.1;
1> if the UE is in RRC_IDLE or in RRC_INACTIVE; or
\( 1> \) if the UE is in RRC_CONNECTED while T311 is running:
\( 2> \) acquire the MIB, which is scheduled as specified in TS 38.213 [13];
\( 2> \) if the UE is unable to acquire the MIB;
\( 3> \) perform the actions as specified in clause 5.2.2.5;
\( 2> \) else:
\( 3> \) perform the actions specified in clause 5.2.2.4.1.
\( 1> \) if the UE is in RRC_CONNECTED with an active BWP with common search space configured by searchSpaceSIB1 and pagingSearchSpace and has received an indication about change of system information; or
\( 1> \) if the UE is in RRC_CONNECTED with an active BWP with common search space configured by searchSpaceSIBI and the UE has not stored a valid version of a SIB or posSIB, in accordance with clause 5.2.2.2.1, of one or several required SIB(s) or posSIB(s) in accordance with clause 5.2.2.1, and, UE has not acquired SIB1 in current modification period; or
\( 1> \) if the UE is in RRC_CONNECTED with an active BWP with common search space configured by searchSpaceSIB1, and, the UE has not stored a valid version of a SIB or posSIB, in accordance with clause 5.2.2.2.1, of one or several required SIB(s) or posSIB(s) in accordance with clause 5.2.2.1, and, siBroadcastStatus for the required SIB(s) or posSI-BroadcastStatus for the required posSIB(s) is set to notbroadcasting in acquired SIBI in current modification period; or

1> if the UE is in RRC_IDLE or in RRC_INACTIVE; or
\( 1> \) if the UE is in RRC_CONNECTED while T311 is running:
\( 2> \) if ssb-SubcarrierOffset indicates SIB1 is transmitted in the cell (TS 38.213 [13]) and if SIB1 acquisition is required for the UE:
\( 3> \) acquire the SIB1, which is scheduled as specified in TS 38.213 [13];
\( 3> \) if the UE is unable to acquire the SIBI:
\( 4> \) perform the actions as specified in clause 5.2.2.5;
\( 3> \) else:
\( 4> \) upon acquiring SIB1, perform the actions specified in clause 5.2.2.4.2.
\( 2> \) else if SIBI acquisition is required for the UE and ssb-SubcarrierOffset indicates that SIBI is not scheduled in the cell:
\( 3> \) perform the actions as specified in clause 5.2.2.5.

ETSI


--- Page 44  ---


3GPP TS 38.331 version 17.0.0 Release 17
43
ETSI TS 138331 V17.0.0 (2022-05)

NOTE: The UE in RRC_CONNECTED is only required to acquire broadcasted \( S I B 1 \) if the UE can acquire it without disrupting unicast or MBS multicast data reception, i.e. the broadcast and unicast/MBS multicast beams are quasi co-located.
5.2.2.3.2 Acquisition of an SI message

For SI message acquisition PDCCH monitoring occasion(s) are determined according to searchSpaceOtherSystemInformation. If searchSpaceOtherSystemInformation is set to zero, PDCCH monitoring occasions for SI message reception in SI-window are same as PDCCH monitoring occasions for SIBI where the mapping between PDCCH monitoring occasions and SSBs is specified in TS 38.213[13]. If searchSpaceOtherSystemInformation is not set to zero, PDCCH monitoring occasions for SI message are determined based on search space indicated by searchSpaceOtherSystemInformation. PDCCH monitoring occasions for SI message which are not overlapping with UL symbols (determined according to tdd-UL-DL-ConfigurationCommon) are sequentially numbered from one in the SI window. The \( [\mathrm{x} \times \mathrm{N}+\mathrm{K}]^{\text {th }} \) PDCCH monitoring occasion (s) for SI message in SI-window corresponds to the \( K^{\text {th }} \) transmitted SSB, where \( x=0,1, \ldots X-1, K=1,2, \ldots N, N \) is the number of actual transmitted SSBs determined according to ssb-PositionsInBurst in SIBI and X is equal to CEIL(number of PDCCH monitoring occasions in SI-window/N). The actual transmitted SSBs are sequentially numbered from one in ascending order of their SSB indexes. The UE assumes that, in the SI window, PDCCH for an SI message is transmitted in at least one PDCCH monitoring occasion corresponding to each transmitted SSB and thus the selection of SSB for the reception SI messages is up to UE implementation.

When acquiring an SI message, the UE shall:
1> determine the start of the SI-window for the concerned SI message as follows:
\( 2> \) if the concerned SI message is configured in the schedulingInfoList:
3> for the concerned SI message, determine the number \( n \) which corresponds to the order of entry in the list of SI messages configured by schedulingInfoList in si-SchedulingInfo in SIB1;
\( 3> \) determine the integer value \( x=(n-1) \times w \), where \( w \) is the si-WindowLength;
3> the SI-window starts at the slot \#a, where \( a=x \bmod \mathrm{~N} \), in the radio frame for which SFN \( \bmod T= \) FLOOR \( (x / \mathrm{N}) \), where \( T \) is the si-Periodicity of the concerned SI message and N is the number of slots in a radio frame as specified in TS 38.213 [13];
\( 2> \) else if the concerned SI message is configured in the schedulingInfoList2;
\( 3> \) determine the integer value \( x=( \) si -WindowPosition -1\( ) \times w \), where \( w \) is the si-WindowLength;
3> the SI-window starts at the slot \#a, where \( a=x \bmod \mathrm{~N} \), in the radio frame for which SFN \( \bmod T= \) FLOOR \( (x / \mathrm{N}) \), where \( T \) is the si-Periodicity of the concerned SI message and N is the number of slots in a radio frame as specified in TS 38.213 [13];
\( 2> \) else if the concerned SI message is configured in the posSchedulingInfoList and offsetToSI-Used is not configured:
\( 3> \) create a concatenated list of SI messages by appending the posSchedulingInfoList in posSI-SchedulingInfo in SIBI to schedulingInfoList in si-SchedulingInfo in SIBI;

3> for the concerned SI message, determine the number \( n \) which corresponds to the order of entry in the concatenated list;
\( 3> \) determine the integer value \( x=(n-1) \times w \), where \( w \) is the si-WindowLength;
3> the SI-window starts at the slot \#a, where \( a=x \bmod \mathrm{~N} \), in the radio frame for which SFN \( \bmod T= \) FLOOR( \( x / \mathrm{N} \) ), where \( T \) is the posSI-Periodicity of the concerned SI message and N is the number of slots in a radio frame as specified in TS 38.213 [13];
\( 2> \) else if the concerned SI message is configured by the posSchedulingInfoList and offsetToSI-Used is configured:

3> determine the number \( m \) which corresponds to the number of SI messages with an associated siPeriodicity of 8 radio frames ( 80 ms ), configured by schedulingInfoList in SIBI;

ETSI


--- Page 45  ---


3GPP TS 38.331 version 17.0.0 Release 17
44
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) for the concerned SI message, determine the number \( n \) which corresponds to the order of entry in the list of SI messages configured by posSchedulingInfoList in SIBI;
\( 3> \) determine the integer value \( x=m \times w+(n-1) \times w \), where \( w \) is the si-WindowLength;
\( 3> \) the SI-window starts at the slot \( \# a \), where \( a=x \bmod \mathrm{~N} \), in the radio frame for which SFN \( \bmod T= \) FLOOR \( (x / \mathrm{N})+8 \), where \( T \) is the posSI-Periodicity of the concerned SI message and N is the number of slots in a radio frame as specified in TS 38.213 [13];
\( 1> \) receive the PDCCH containing the scheduling RNTI, i.e SI-RNTI in the PDCCH monitoring occasion(s) for SI message acquisition, from the start of the SI-window and continue until the end of the SI-window whose absolute length in time is given by si-WindowLength, or until the SI message was received;
\( 1> \) if the SI message was not received by the end of the SI-window, repeat reception at the next SI-window occasion for the concerned SI message in the current modification period;

NOTE 1: The UE is only required to acquire broadcasted SI message if the UE can acquire it without disrupting unicast or MBS multicast data reception, i.e the broadcast and unicast/MBS multicast beams are quasi co-located.

NOTE 2: The UE is not required to monitor PDCCH monitoring occasion(s) corresponding to each transmitted SSB in SI-window.

NOTE 3: If the concerned SI message was not received in the current modification period, handling of SI message acquisition is left to UE implementation.

NOTE 4: A UE in RRC_CONNECTED may stop the PDCCH monitoring during the SI window for the concerned \( S I \) message when the requested \( S I B(s) \) are acquired.

NOTE 5: A UE capable of NR sidelink communication and configured by upper layers to perform NR sidelink communication on a frequency, may acquire SIB12 or SystemInformationBlockType 28 from a cell other than current serving cell (for RRC_INACTIVE or RRC_IDLE) or current PCell (for RRC_CONNECTED), if SIB12 of current serving cell (for RRC_INACTIVE or RRC_IDLE) or current PCell (for RRC_CONNECTED) does not provide configuration for NR sidelink communication for the frequency, and if the other cell providing configuration for NR sidelink communication for the frequency meets the S-criteria as defined in TS 38.304 [20] or TS 36.304 [27].
\( 1> \) perform the actions for the acquired SI message as specified in clause 5.2.2.4.
5.2.2.3.3 Request for on demand system information

The UE shall, while T319a is not running:
\( 1> \) if SIBI includes si-SchedulingInfo containing si-RequestConfigSUL and criteria to select supplementary uplink as defined in TS 38.321[13], clause 5.1.1 is met:
\( 2> \) trigger the lower layer to initiate the Random Access procedure on supplementary uplink in accordance with [3] using the PRACH preamble(s) and PRACH resource(s) in si-RequestConfigSUL corresponding to the SI message(s) that the UE requires to operate within the cell, and for which si-BroadcastStatus is set to notBroadcasting;
\( 2> \) if acknowledgement for SI request is received from lower layers:
\( 3> \) acquire the requested \( S I \) message( \( s \) ) as defined in clause 5.2.2.3.2, immediately;
1> else if SIBI includes si-SchedulingInfo containing si-RequestConfig and criteria to select normal uplink as defined in TS 38.321 [13], clause 5.1.1 is met:
\( 2> \) trigger the lower layer to initiate the random access procedure on normal uplink in accordance with TS 38.321 [3] using the PRACH preamble(s) and PRACH resource(s) in si-RequestConfig corresponding to the SI message(s) that the UE requires to operate within the cell, and for which si-BroadcastStatus is set to notBroadcasting;
\( 2> \) if acknowledgement for SI request is received from lower layers:

ETSI


--- Page 46  ---


3GPP TS 38.331 version 17.0.0 Release 17
45
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) acquire the requested SI message(s) as defined in clause 5.2.2.3.2, immediately;
1> else:
\( 2> \) apply the default L1 parameter values as specified in corresponding physical layer specifications except for the parameters for which values are provided in SIBI;
\( 2> \) apply the default MAC Cell Group configuration as specified in 9.2.2;
\( 2> \) apply the timeAlignmentTimerCommon included in SIB1;
\( 2> \) apply the CCCH configuration as specified in 9.1.1.2;
\( 2> \) initiate transmission of the RRCSystemInfoRequest message in accordance with 5.2.2.3.4;
\( 2> \) if acknowledgement for RRCSystemInfoRequest message is received from lower layers:
\( 3> \) acquire the requested \( S I \) message( \( s \) ) as defined in clause 5.2 .2 .3 .2 , immediately;
\( 1> \) if cell reselection occurs while waiting for the acknowledgment for SI request from lower layers:
\( 2>\operatorname{reset} \mathrm{MAC} \);
\( 2> \) if SI request is based on RRCSystemInfoRequest message:
\( 3> \) release RLC entity for SRBO.
NOTE: After RACH failure for SI request it is up to UE implementation when to retry the SI request.
5.2.2.3.3a Request for on demand positioning system information

The UE shall, while T319a is not running:
\( 1> \) if SIBI includes posSI-SchedulingInfo containing posSI-RequestConfigSUL and criteria to select supplementary uplink as defined in TS 38.321[13], clause 5.1.1 is met:
\( 2> \) trigger the lower layer to initiate the Random Access procedure on supplementary uplink in accordance with [3] using the PRACH preamble(s) and PRACH resource(s) in posS/-RequestConfigSUL corresponding to the SI message(s) that the UE requires to operate within the cell, and for which posSI-BroadcastStatus is set to notBroadcasting;
\( 2> \) if acknowledgement for SI request is received from lower layers:
\( 3> \) acquire the requested SI message(s) as defined in clause 5.2.2.3.2, immediately;
1> else if SIBI includes posS/-SchedulingInfo containing posSI-RequestConfig and criteria to select normal uplink as defined in TS 38.321[13], clause 5.1.1 is met:
\( 2> \) trigger the lower layer to initiate the random access procedure on normal uplink in accordance with TS 38.321 [3] using the PRACH preamble(s) and PRACH resource(s) in posSI-RequestConfig corresponding to the SI message(s) that the UE upper layers require for positioning operations, and for which posSIBroadcastStatus is set to notBroadcasting;
\( 2> \) if acknowledgement for SI request is received from lower layers:
\( 3> \) acquire the requested \( S I \) message( \( s \) ) as defined in clause 5.2.2.3.2, immediately;
1> else:
\( 2> \) apply the default L1 parameter values as specified in corresponding physical layer specifications except for the parameters for which values are provided in SIBI;
\( 2> \) apply the default MAC Cell Group configuration as specified in 9.2.2;
\( 2> \) apply the timeAlignmentTimerCommon included in SIBI;
\( 2> \) apply the CCCH configuration as specified in 9.1.1.2;

ETSI


--- Page 47  ---


3GPP TS 38.331 version 17.0.0 Release 17
46
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) initiate transmission of the RRCSystemInfoRequest message with rrcPosSystemInfoRequest in accordance with 5.2.2.3.4;
\( 2> \) if acknowledgement for RRCSystemInfoRequest message with rrcPosSystemInfoRequest is received from lower layers:
\( 3> \) acquire the requested SI message(s) as defined in clause 5.2.2.3.2, immediately;
1> if cell reselection occurs while waiting for the acknowledgment for SI request from lower layers:
\( 2> \) reset MAC ;
\( 2> \) if SI request is based on RRCSystemInfoRequest message with rrcPosSystemInfoRequest:
3> release RLC entity for SRB0.
NOTE: After RACH failure for SI request it is up to UE implementation when to retry the SI request.
5.2.2.3.4 Actions related to transmission of RRCSysteminfoRequest message

The UE shall set the contents of RRCSystemInfoRequest message as follows:
\( 1> \) if the procedure is triggered to request the required SI message(s) other than positioning:
\( 2> \) set the requested-SI-List to indicate the SI message(s) that the UE requires to operate within the cell, and for which si-BroadcastStatus is set to notBroadcasting;
\( 1> \) else if the procedure is triggered to request the required SI message(s) for positioning:
\( 2> \) set the requestedPosSI-List to indicate the SI message(s) that the UE upper layers require for positioning operations, and for which posSI-BroadcastStatus is set to notBroadcasting.

The UE shall submit the RRCSystemInfoRequest message to lower layers for transmission.
5.2.2.3.5 Acquisition of SIB(s) or posSIB(s) in RRC_CONNECTED

The UE shall:
\( 1> \) if the UE is in RRC_CONNECTED with an active BWP not configured with common search space with the field searchSpaceOtherSystemInformation and the UE has not stored a valid version of a SIB or posSIB, in accordance with clause 5.2.2.2.1, of one or several required SIB(s) or posSIB(s) in accordance with clause 5.2.2.1:
\( 2> \) for the SI message(s) that, according to the si-SchedulingInfo or posSI-SchedulingInfo in the stored SIB1, contain at least one required SIB or requested posSIB:

3> if onDemandSIB-Request is configured and timer T350 is not running:
4> initiate transmission of the DedicatedSIBRequest message in accordance with 5.2.2.3.6;
\( 4> \) start timer T350 with the timer value set to the onDemandSIB-RequestProhibitTimer;
\( 1> \) else if the UE is in RRC_CONNECTED with an active BWP configured with common search space with the field searchSpaceOtherSystemInformation and the UE has not stored a valid version of a SIB or posSIB, in accordance with clause 5.2.2.2.1, of one or several required \( \mathrm{SIB}(\mathrm{s}) \) or posSIB(s) in accordance with clause
5.2.2.1:
\( 2> \) for the SI message(s) that, according to the si-SchedulingInfo in the stored SIB1, contain at least one required SIB and for which si-BroadcastStatus is set to broadcasting:
\( 3> \) acquire the SI message(s) as defined in clause 5.2.2.3.2;
\( 2> \) for the SI message(s) that, according to the si-SchedulingInfo in the stored SIB1, contain at least one required SIB and for which si-BroadcastStatus is set to notBroadcasting:
\( 3> \) if onDemandSIB-Request is configured and timer T350 is not running:

ETSI


--- Page 48  ---


3GPP TS 38.331 version 17.0.0 Release 17
47
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) initiate transmission of the DedicatedSIBRequest message in accordance with 5.2.2.3.6;
4> start timer T350 with the timer value set to the onDemandSIB-RequestProhibitTimer;
\( 4> \) acquire the requested SI message(s) corresponding to the requested SIB(s) as defined in clause 5.2.2.3.2.
\( 2> \) for the SI message(s) that, according to the posSI-SchedulingInfo in the stored SIB1, contain at least one requested posSIB and for which posSI-BroadcastStatus is set to broadcasting:
\( 3> \) acquire the SI message(s) as defined in clause 5.2.2.3.2;
\( 2> \) for the SI message(s) that, according to the posSI-SchedulingInfo in the stored SIB1, contain at least one requested posSIB and for which posSI-BroadcastStatus is set to notBroadcasting:

3> if onDemandSIB-Request is configured and timer T350 is not running:
\( 4> \) initiate transmission of the DedicatedSIBRequest message in accordance with 5.2.2.3.6;
4> start timer T350 with the timer value set to the onDemandSIB-RequestProhibitTimer;
4> acquire the requested SI message(s) corresponding to the requested posSIB(s) as defined in clause 5.2.2.3.2.

NOTE: UE may include on demand request for SIB and/or posSIB(s) in the same DedicatedSIBRequest message.
5.2.2.3.6 Actions related to transmission of DedicatedSIBRequest message

The UE shall set the contents of DedicatedSIBRequest message as follows:
\( 1> \) if the procedure is triggered to request the required \( \operatorname{SIB}(s) \) :
\( 2> \) include requestedSIB-List in the onDemandSIB-RequestList to indicate the requested SIB(s);
\( 1> \) if the procedure is triggered to request the required \( \operatorname{pos} S I B(s) \) :
\( 2> \) include requestedPosSIB-List in the onDemandSIB-RequestList to indicate the requested posSIB(s).
The UE shall submit the DedicatedSIBRequest message to lower layers for transmission.
5.2.2.4 Actions upon receipt of System Information
5.2.2.4.1 Actions upon reception of the \( M I B \)

Upon receiving the \( M I B \) the UE shall:
1> store the acquired MIB;
1> if the UE is in RRC_IDLE or in RRC_INACTIVE, or if the UE is in RRC_CONNECTED while T311 is running:
\( 2> \) if the cellBarred in the acquired MIB is set to barred:
3> if the UE is a RedCap UE:
\( 4> \) if ssb-SubcarrierOffset indicates SIB1 is transmitted in the cell (TS 38.213 [13])
\( 5> \) acquire the SIB1, which is scheduled as specified in TS 38.213 [13];3>consider the cell as barred in accordance with TS 38.304 [20];

3> perform cell re-selection to other cells on the same frequency as the barred cell as specified in TS 38.304 [20];
\( 2> \) else:

ETSI


--- Page 49  ---


3GPP TS 38.331 version 17.0.0 Release 17
48
ETSI TS 138331 V17.0.0 (2022-05)

3> apply the received systemFrameNumber, pdcch-ConfigSIB1, subCarrierSpacingCommon, ssbSubcarrierOffset and dmrs-TypeA-Position.
5.2.2.4.2 Actions upon reception of the SIB1

Upon receiving the SIBI the UE shall:
\( 1> \) store the acquired \( S I B 1 \);
1> if the UE is a RedCap UE and it is in RRC_IDLE or in RRC_INACTIVE, or if the RedCap UE is in RRC_CONNECTED while T311 is running:
\( 2> \) if intraFreqReselectionRedCap is not present in SIB1:
3> consider the cell as barred in accordance with TS 38.304 [20];
3> perform barring as if intraFreqReselectionRedCap is set to allowed;
\( 2> \) else:
3> if the cellBarredRedCaplRx is present in the acquired SIBI and is set to barred and the UE is equipped with 1 Rx branch; or

3> if the cellBarredRedCap2Rx is present in the acquired SIBI and is set to barred and the UE is equipped with 2 Rx branches; or

3> if the halfDuplexRedCapAllowed is not present in the acquires SIBI and the UE supports only half-duplex FDD operation:

4> consider the cell as barred in accordance with TS 38.304 [20];
4> consider cell re-selection to other cells on the same frequency as the barred cell as specified in TS 38.304 [20];

1> if the cellAccessRelatedInfo contains an entry of a selected SNPN or PLMN and in case of PLMN the UE is either allowed or instructed to access the PLMN via a cell for which at least one CAG ID is broadcast:
\( 2> \) in the remainder of the procedures use npn-IdentityList, trackingAreaCode, trackingAreaList, and cellldentity for the cell as received in the corresponding entry of npn-IdentityInfoList containing the selected PLMN or SNPN;
\( 1> \) else if the cellAccessRelatedInfo contains an entry with the PLMN-Identity of the selected PLMN:
\( 2> \) in the remainder of the procedures use plmn-IdentityList, trackingAreaCode, trackingAreaList, and cellldentity for the cell as received in the corresponding PLMN-IdentityInfo containing the selected PLMN;

1> if in RRC_CONNECTED while T311 is not running:
\( 2> \) disregard the frequencyBandList, if received, while in RRC_CONNECTED;
\( 2> \) forward the cellldentity to upper layers;
\( 2> \) forward the trackingAreaCode to upper layers;
\( 2> \) forward the trackingArealist to upper layers, if included;
\( 2> \) forward the received posSIB-MappingInfo to upper layers, if included;
\( 2> \) apply the configuration included in the servingCellConfigCommon;
\( 2> \) if the UE has a stored valid version of a SIB or posSIB, in accordance with clause 5.2.2.2.1, that the UE requires to operate within the cell in accordance with clause 5.2.2.1:
\( 3> \) use the stored version of the required SIB or posSIB;
\( 2> \) else:

ETSI


--- Page 50  ---


3GPP TS 38.331 version 17.0.0 Release 17
49
ETSI TS 138331 V17.0.0 (2022-05)

3> acquire the required SIB or posSIB requested by upper layer as defined in clause 5.2.2.3.5;
NOTE: Void.
1> else:
\( 2> \) if the UE supports one or more of the frequency bands indicated in the frequencyBandList for downlink for TDD, or one or more of the frequency bands indicated in the frequencyBandList for uplink for FDD, and they are not downlink only bands, and
\( 2> \) if the UE is IAB-MT or supports at least one additionalSpectrumEmission in the NR-NS-PmaxList for a supported band in the downlink for TDD, or a supported band in uplink for FDD, and
\( 2> \) if the UE supports an uplink channel bandwidth with a maximum transmission bandwidth configuration (see TS 38.101-1 [15] and TS 38.101-2 [39]) which
- is smaller than or equal to the carrierBandwidth (indicated in uplinkConfigCommon for the SCS of the initial uplink BWP or, for RedCap UE, of the initial uplink BWP for RedCap if configured), and which
- is wider than or equal to the bandwidth of the initial uplink BWP or, for RedCap UE, of the initial uplink BWP for RedCap if configured, and
\( 2> \) if the UE supports a downlink channel bandwidth with a maximum transmission bandwidth configuration (see TS 38.101-1 [15] and TS 38.101-2 [39]) which
- is smaller than or equal to the carrierBandwidth (indicated in downlinkConfigCommon for the SCS of the initial downlink BWP or, for RedCap UE, of the initial downlink BWP for RedCap if configured), and which
- is wider than or equal to the bandwidth of the initial downlink BWP or, for RedCap UE, of the initial downlink BWP for RedCap if configured, and
\( 2> \) if frequencyShift \( 7 p 5 k h z \) is present and the UE supports corresponding 7.5 kHz frequency shift on this band; or frequencyShift7p5khz is not present:

3> if trackingAreaCode and trackingAreaList are not provided for the selected PLMN nor the registered PLMN nor PLMN of the equivalent PLMN list:

4> consider the cell as barred in accordance with TS 38.304 [20];
4> perform cell re-selection to other cells on the same frequency as the barred cell as specified in TS 38.304 [20];
\( 3> \) else if UE is [AB-MT and if iab-Support is not provided for the selected PLMN nor the registered PLMN nor PLMN of the equivalent PLMN list nor the selected SNPN nor the registered SNPN:
\( 4> \) consider the cell as barred for IAB-MT in accordance with TS 38.304 [20];
3> else:
4> apply a supported uplink channel bandwidth with a maximum transmission bandwidth which
- is contained within the carrierBandwidth indicated in uplinkConfigCommon for the SCS of the initial uplink BWP or, for RedCap UEs, initial uplink BWP for RedCap, if configured, and which
- is wider than or equal to the bandwidth of the initial BWP for the uplink;

4> apply a supported downlink channel bandwidth with a maximum transmission bandwidth which
- is contained within the carrierBandwidth indicated in downlinkConfigCommon for the SCS of the initial downlink BWP or, for RedCap UEs, initial downlink BWP for RedCap, if configured, and which
- is wider than or equal to the bandwidth of the initial BWP for the downlink;

4> select the first frequency band in the frequencyBandList, for FDD from frequencyBandList for uplink, or for TDD from frequencyBandList for downlink, which the UE supports and for which the UE supports at least one of the additionalSpectrumEmission values in nr-NS-PmaxList, if present;

4> forward the cellldentity to upper layers;

ETSI


--- Page 51  ---


3GPP TS 38.331 version 17.0.0 Release 17
50
ETSI TS 138331 V17.0.0 (2022-05)

4> forward the trackingAreaCode to upper layers;
4> forward the trackingAreaList to upper layers, if included;
4> forward the received posSIB-MappingInfo to upper layers, if included;
4> forward the PLMN identity or SNPN identity or PNI-NPN identity to upper layers;
4> if in RRC_INACTIVE and the forwarded information does not trigger message transmission by upper layers:
\( 5> \) if the serving cell does not belong to the configured ran-NotificationArealnfo:
\( 6> \) initiate an RNA update as specified in 5.3.13.8;
4> forward the ims-EmergencySupport to upper layers, if present;
4> forward the eCallOverIMS-Support to upper layers, if present;
4> forward the UAC-AccessCategoryl-SelectionAssistanceInfo or UAC-ACI-SelectAssistInfo for the selected PLMN/SNPN to upper layers, if present and set to \( a, b \) or \( c \);

4- if the UE is in SNPN access mode:
5> forward the imsEmergencySupportForSNPN indicators with the corresponding SNPN identities to upper layers, if present;

4> apply the configuration included in the servingCellConfigCommon;
\( 4> \) apply the specified PCCH configuration defined in 9.1.1.3;
4> if the UE has a stored valid version of a SIB, in accordance with clause 5.2.2.2.1, that the UE requires to operate within the cell in accordance with clause 5.2.2.1:
\( 5> \) use the stored version of the required SIB;
\( 4> \) if the UE has not stored a valid version of a SIB, in accordance with clause 5.2.2.2.1, of one or several required \( \mathrm{SIB}(\mathrm{s}) \), in accordance with clause 5.2.2.1:

5> for the SI message(s) that, according to the si-SchedulingInfo, contain at least one required SIB and for which si-BroadcastStatus is set to broadcasting:
\( 6> \) acquire the SI message(s) as defined in clause 5.2.2.3.2;
\( 5> \) for the SI message(s) that, according to the si-SchedulingInfo, contain at least one required SIB and for which si-BroadcastStatus is set to notBroadcasting:
\( 6> \) trigger a request to acquire the SI message(s) as defined in clause 5.2.2.3.3;
4> if the UE has a stored valid version of a posSIB, in accordance with clause 5.2.2.2.1, of one or several required posSIB(s), in accordance with clause 5.2.2.1:
\( 5> \) use the stored version of the required posSIB;
\( 4> \) if the UE has not stored a valid version of a posSIB, in accordance with clause 5.2.2.2.1, of one or several posSIB(s) in accordance with clause 5.2.2.1:
\( 5> \) for the SI message(s) that, according to the posSI-SchedulingInfo, contain at least one requested posSIB and for which posSI-BroadcastStatus is set to broadcasting:
\( 6> \) acquire the SI message(s) as defined in clause 5.2.2.3.2;
5> for the SI message(s) that, according to the posSI-SchedulingInfo, contain at least one requested posSIB for which posSI-BroadcastStatus is set to notBroadcasting:
\( 6> \) trigger a request to acquire the SI message(s) as defined in clause 5.2.2.3.3a;

ETSI


--- Page 52  ---


3GPP TS 38.331 version 17.0.0 Release 17
51
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) apply the first listed additionalSpectrumEmission which it supports among the values included in \( N R \) -NS-PmaxList within frequencyBandList in uplinkConfigCommon for FDD or in downlinkConfigCommon for TDD;

4> if the additionalPmax is present in the same entry of the selected additionalSpectrumEmission within NR-NS-PmaxList:
\( 5> \) apply the additionalPmax for UL;
4> else:
\( 5> \) apply the \( p \)-Max in uplinkConfigCommon for UL;
4> if supplementaryUplink is present in servingCellConfigCommon; and
4> if the UE supports one or more of the frequency bands indicated in the frequencyBandList for the supplementaryUplink; and

4> if the UE supports at least one additionalSpectrumEmission in the NR-NS-PmaxList for a supported supplementary uplink band; and

4> if the UE supports an uplink channel bandwidth with a maximum transmission bandwidth configuration (see TS 38.101-1 [15] and TS 38.101-2 [39]) which
- is smaller than or equal to the carrierBandwidth (indicated in supplementaryUplink for the SCS of the initial uplink BWP), and which
- is wider than or equal to the bandwidth of the initial uplink BWP of the SUL:
\( 5> \) consider supplementary uplink as configured in the serving cell;
\( 5> \) select the first frequency band in the frequencyBandList for the supplementaryUplink which the UE supports and for which the UE supports at least one of the additionalSpectrumEmission values in nr-NS-PmaxList, if present;
\( 5> \) apply a supported supplementary uplink channel bandwidth with a maximum transmission bandwidth which
- is contained within the carrierBandwidth (indicated in supplementaryUplink for the SCS of the initial uplink BWP), and which
- is wider than or equal to the bandwidth of the initial BWP of the SUL;
\( 5> \) apply the first listed additionalSpectrumEmission which it supports among the values included in NR-NS-PmaxList within frequencyBandList for the supplementaryUplink;
\( 5> \) if the additionalPmax is present in the same entry of the selected additionalSpectrumEmission within NR-NS-PmaxList for the supplementaryUplink:

6> apply the additionalPmax in supplementaryUplink for SUL;
5> else:
6> apply the p-Max in supplementaryUplink for SUL;
\( 2> \) else:
3> consider the cell as barred in accordance with TS 38.304 [20]; and
\( 3> \) perform barring as if intraFreqReselection is set to notAllowed;
5.2.2.4.3 Actions upon reception of SIB2

Upon receiving SIB2, the UE shall:
1> if in RRC_IDLE or in RRC_INACTIVE or in RRC_CONNECTED while T311 is running:

ETSI


--- Page 53  ---


3GPP TS 38.331 version 17.0.0 Release 17
52
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if, for the entry in frequencyBandList with the same index as the frequency band selected in clause 5.2.2.4.2, the UE supports at least one additionalSpectrumEmission in the NR-NS-PmaxList within the frequencyBandList:

3> apply the first listed additionalSpectrumEmission which it supports among the values included in NR-NSPmaxList within frequencyBandList;
\( 3> \) if the additionalPmax is present in the same entry of the selected additionalSpectrumEmission within NR-NS-PmaxList:

4> apply the additionalPmax;
\( 3> \) else:
4> apply the \( p \)-Max;
3> if the UE selects a frequency band (from the procedure in clause 5.2.2.4.2) for the supplementary uplink:
4> if, for the entry in frequencyBandListSUL with the same index as the frequency band selected in clause 5.2.2.4.2, the UE supports at least one additionalSpectrumEmission in the NR-NS-PmaxList within the frequencyBandListSUL:
\( 5> \) apply the first listed additionalSpectrumEmission which it supports among the values included in NR-NS-PmaxList within frequencyBandListSUL;
\( 5> \) if the additionalPmax is present in the same entry of the selected additionalSpectrumEmission within NR-NS-PmaxList:

6> apply the additionalPmax;
\( 5> \) else:
\( 6> \) apply the \( p \)-Max;
\( 4> \) else:
\( 5> \) apply the \( p \)-Max.
\( 2> \) else:
\( 3> \) apply the \( p \)-Max;
5.2.2.4.4 Actions upon reception of SIB3

No UE requirements related to the contents of this \( S I B 3 \) apply other than those specified elsewhere e.g. within procedures using the concerned system information, and/ or within the corresponding field descriptions.
5.2.2.4.5 Actions upon reception of SIB4

Upon receiving \( S I B 4 \) the UE shall:
1> if in RRC_IDLE, or in RRC_INACTIVE or in RRC_CONNECTED while T311 is running:
\( 2> \) for each entry in the interFreqCarrierFreqList:
3> if the UE is not a RedCap UE or if redcapAccessReject is absent:
4> select the first frequency band in the frequencyBandList, and frequencyBandListSUL, if present, which the UE supports and for which the UE supports at least one of the additionalSpectrumEmission values in NR-NS-PmaxList, if present:

4> if, the frequency band selected by the UE in frequencyBandList to represent a non-serving NR carrier frequency is not a downlink only band:

5> if, for the selected frequency band, the UE supports at least one additionalSpectrumEmission in the NR-NS-PmaxList within the frequencyBandList:

ETSI


--- Page 54  ---


3GPP TS 38.331 version 17.0.0 Release 17
53
ETSI TS 138331 V17.0.0 (2022-05)

6 apply the first listed additionalSpectrumEmission which it supports among the values included in NR-NS-PmaxList within frequencyBandList;
\( 6> \) if the additionalPmax is present in the same entry of the selected additionalSpectrumEmission within NR-NS-PmaxList:

7> apply the additionalPmax;
6> else:
\( 7> \) apply the \( p \)-Max;
6> if frequencyBandListSUL is present in SIB4 and, for the frequency band selected in frequencyBandListSUL, the UE supports at least one additionalSpectrumEmission in the NR-NSPmaxList within FrequencyBandListSUL:

7> apply the first listed additionalSpectrumEmission which it supports among the values included in NR-NS-PmaxList within frequencyBandListSUL;

7> if the additionalPmax is present in the same entry of the selected additionalSpectrumEmission within NR-NS-PmaxList:
\( 8> \) apply the additionalPmax;
\( 7> \) else:
\( 8> \) apply the \( p \)-Max;
\( 6> \) else:
\( 7> \) apply the \( p \)-Max;
\( 5> \) else:
6> apply the \( p \)-Max;
1> if in RRC_IDLE or RRC_INACTIVE, and T331 is running:
\( 2> \) perform the actions as specified in 5.7.8.1a;
5.2.2.4.6 Actions upon reception of SIB5

No UE requirements related to the contents of this SIB5 apply other than those specified elsewhere e.g. within procedures using the concerned system information, and/ or within the corresponding field descriptions.
5.2.2.4.7 Actions upon reception of SIB6

Upon receiving the SIB6 the UE shall:
1> forward the received warningType, messageldentifier and serialNumber to upper layers;
5.2.2.4.8 Actions upon reception of SIB7

Upon receiving the SIB7 the UE shall:
\( 1> \) if there is no current value for messageldentifier and serialNumber for SIB7; or
1> if either the received value of messageldentifier or of serialNumber, or of both messageldentifier and serialNumber are different from the current values of messageldentifier and serialNumber for SIB7:
\( 2> \) use the received values of messageldentifier and serialNumber for SIB7 as the current values of messageldentifier and serialNumber for SIB7;
\( 2> \) discard any previously buffered warningMessageSegment;
\( 2> \) if all segments of a warning message have been received:

ETSI


--- Page 55  ---


3GPP TS 38.331 version 17.0.0 Release 17
54
ETSI TS 138331 V17.0.0 (2022-05)

3> assemble the warning message from the received warningMessageSegment(s);
3> forward the received warning message, messageldentifier, serialNumber and dataCodingScheme to upper layers;

3> stop reception of SIB7;
\( 3> \) discard the current values of messageldentifier and serialNumber for SIB7;
\( 2> \) else:
3> store the received warningMessageSegment;
\( 3> \) continue reception of SIB7;
1> else if all segments of a warning message have been received:
\( 2> \) assemble the warning message from the received warningMessageSegment(s);
\( 2> \) forward the received complete warning message, messageldentifier, serialNumber and dataCodingScheme to upper layers;
\( 2> \) stop reception of SIB7;
\( 2> \) discard the current values of messageldentifier and serialNumber for SIB7;
1> else:
\( 2> \) store the received warningMessageSegment;
\( 2> \) continue reception of SIB7;
The UE should discard any stored warningMessageSegment and the current value of messageldentifier and serialNumber for SIB7 if the complete warning message has not been assembled within a period of 3 hours.
5.2.2.4.9 Actions upon reception of SIB8

Upon receiving the SIB8 the UE shall:
\( 1> \) if the SIB8 contains a complete warning message and the complete geographical area coordinates (if any):
\( 2> \) forward the received warning message, messageldentifier, serialNumber, dataCodingScheme and the geographical area coordinates (if any) to upper layers;
\( 2> \) continue reception of SIB8;
1> else:
\( 2> \) if the received values of messageldentifier and serialNumber are the same (each value is the same) as a pair for which a warning message and the geographical area coordinates (if any) are currently being assembled:

3> store the received warningMessageSegment;
3> store the received warningAreaCoordinatesSegment (if any);
\( 3> \) if all segments of a warning message and geographical area coordinates (if any) have been received:
4> assemble the warning message from the received warningMessageSegment;
\( 4> \) assemble the geographical area coordinates from the received warningAreaCoordinatesSegment (if any);

4> forward the received warning message, messageldentifier, serialNumber, dataCodingScheme and geographical area coordinates (if any) to upper layers;

4> stop assembling a warning message and geographical area coordinates (if any) for this messageldentifier and serialNumber and delete all stored information held for it;

ETSI


--- Page 56  ---


3GPP TS 38.331 version 17.0.0 Release 17
55
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) continue reception of SIB8;
\( 2> \) else if the received values of messageldentifier and/or serialNumber are not the same as any of the pairs for which a warning message is currently being assembled:

3> start assembling a warning message for this messageldentifier and serialNumber pair;
3> start assembling the geographical area coordinates (if any) for this messageldentifier and serialNumber pair;

3> store the received warningMessageSegment;
3> store the received warningAreaCoordinatesSegment (if any);
\( 3> \) continue reception of SIB8;
The UE should discard warningMessageSegment and warningAreaCoordinatesSegment (if any) and the associated values of messageldentifier and serialNumber for SIB8 if the complete warning message and the geographical area coordinates (if any) have not been assembled within a period of 3 hours.

NOTE: The number of warning messages that a UE can re-assemble simultaneously is a function of UE implementation.
5.2.2.4.10 Actions upon reception of SIB9

Upon receiving SIB9 with referenceTimeInfo, the UE may perform the related actions as specified in clause 5.7.1.3.
5.2.2.4.11 Actions upon reception of SIB10

Upon receiving SIB10, the UE shall:
\( 1> \) Forward the \( H R N N \)-list entries with the corresponding PNI-NPN and SNPN identities to upper layers;
5.2.2.4.12 Actions upon reception of SIB11

Upon receiving SIB11, the UE shall:
1> if in RRC_IDLE or RRC_INACTIVE, and T331 is running:
\( 2> \) perform the actions as specified in 5.7.8.1a;
5.2.2.4.13 Actions upon reception of SIB12

Upon receiving SIB12, the UE shall:
\( 1> \) if the UE has stored at least one segment of SIB12 and the value tag of SIB12 has changed since a previous segment was stored:
\( 2> \) discard all stored segments;
1> store the segment;
1> if all segments have been received:
2> assemble SIB12-IEs from the received segments;
\( 2> \) if \( s l \)-FreqInfoList is included in \( s l \)-ConfigCommonNR:
\( 3> \) if configured to receive NR sidelink communication:
\( 4> \) use the resource pool(s) indicated by \( s l \)-RxPool for NR sidelink communication reception, as specified in 5.8.7;
\( 3> \) if configured to transmit NR sidelink communication:

ETSI


--- Page 57  ---


3GPP TS 38.331 version 17.0.0 Release 17
56
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) use the resource pool(s) indicated by sl-TxPoolSelectedNormal, sl-TxPoolSelectedNormalPS, or slTxPoolExceptional for NR sidelink communication transmission, as specified in 5.8.8;
\( 4> \) perform CBR measurement on the transmission resource pool(s) indicated by slTxPoolSelectedNormal, sl-TxPoolSelectedNormalPS and sl-TxPoolExceptional for NR sidelink communication transmission, as specified in 5.5.3.1;
\( 4> \) use the synchronization configuration parameters for NR sidelink communication on frequencies included in sl-FreqInfoList, as specified in 5.8.5;
\( 3> \) if configured to receive NR sidelink discovery:
\( 4> \) use the resource pool(s) indicated by \( s l \)-DiscRxPool or \( s l \)-RxPool for NR sidelink discovery reception, as specified in 5.8.13.2;
\( 3> \) if configured to transmit NR sidelink discovery:
\( 4> \) use the resource pool(s) indicated by sl-DiscTxPoolSelected, sl-TxPoolExceptional or slTxPoolSelectedNormal for NR sidelink discovery transmission, as specified in 5.8.13.3;
\( 4> \) perform CBR measurement on the transmission resource pool(s) indicated by slTxPoolSelectedNormal, sl-DiscTxPoolSelected or sl-TxPoolExceptional for NR sidelink discovery transmission, as specified in 5.5.3.1;

4> use the synchronization configuration parameters for NR sidelink discovery on frequencies included in sl-FreqInfoList, as specified in 5.8.5;
\( 2> \) if \( s \)-RadioBearerConfigList or sl-RLC-BearerConfigList is included in sl-ConfigCommonNR:
\( 3> \) perform sidelink DRB addition/modification/release as specified in 5.8.9.1a.1/5.8.9.1a.2;
\( 2> \) if \( s \) /-MeasConfigCommon is included in sl-ConfigCommonNR:
\( 3> \) store the NR sidelink measurement configuration.
\( 2> \) if sl-DRX-ConfigCommon-GC-BC is included in SIB12-IEs:
\( 3> \) store the NR sidelink DRX configuration and perform sidelink DRX operation for groupcast and broadcast.

The UE should discard any stored segments for SIB12 if the complete SIB12 has not been assembled within a period of 3 hours. The UE shall discard any stored segments for SIB12 upon cell (re-)selection.
5.2.2.4.14 Actions upon reception of SIB13

Upon receiving SIB13, the UE shall perform the actions upon reception of SystemInformationBlockType21 as specified in 5.2.2.28 in TS 36.331 [10].
5.2.2.4.15 Actions upon reception of SIB14

Upon receiving SIB14, the UE shall perform the actions upon reception of SystemInformationBlockType 26 as specified in 5.2.2.33 in TS 36.331 [10].
5.2.2.4.16 Actions upon reception of SIBpos

No UE requirements related to the contents of the SIBpos apply other than those specified elsewhere e-g- within TS 37.355 [49], and/or within the corresponding field descriptions.
5.2.2.4.17 Actions upon reception of SIB15

Upon receiving SIB15, the UE shall:
1> forward the applicable PLMNs with disaster condition for each PLMN sharing the cell to upper layers.

ETSI


--- Page 58  ---


3GPP TS 38.331 version 17.0.0 Release 17
57
ETSI TS 138331 V17.0.0 (2022-05)

Editor's note: The one-bit-approach described in the CT1 LS in R2-2109818 may require some modification of the above. The impact is pending further CT1 input.
5.2.2.4.18 Actions upon reception of SIB16

Upon receiving SIB16 with cell reselection priorities for slicing, the UE shall perform the actions as specified in clause in TS 38.304 [20].
5.2.2.4.19 Actions upon reception of SIB17

Upon receiving SIB17, the UE shall:
\( 1> \) if the UE has stored at least one segment of SIB17 and the value tag of SIB17 has changed since a previous segment was stored:
\( 2> \) discard all stored segments;
1> store the segment;
\( 1> \) if all segments have been received:
\( 2> \) assemble SIB17-IEs from the received segments.
The UE should discard any stored segments for SIB17 if the complete SIB17 has not been assembled within a period of 3 hours. The UE shall discard any stored segments for SIB17 upon cell (re-) selection.
5.2.2.4.20 Actions upon reception of SIB18

Upon receiving SIB18, the UE shall:
\( 1> \) forward the Group [Ds for Network selection (GINs) in SIB18 with the corresponding SNPN identities to upper layers;
5.2.2.4.21 Actions upon reception of SIB19

Upon receiving SIB19, the UE shall:
\( 1> \) instruct the lower layers to start or restart ntn-UlSyncValidityDuration from the subframe indicated by epochTime;

NOTE: UE should attempt to re-acquire SIB19 before the end of the duration indicated by \( n t n \) UlSyncValidityDuration and epochTime by UE implementation.
5.2.2.4.22 Actions upon reception of SIB20

No UE requirements related to the contents of SIB20 apply other than those specified elsewhere e-g. within procedures using the concerned system information, and/or within the corresponding field descriptions.
5.2.2.4.23 Actions upon reception of SIB21

No UE requirements related to the contents of SIB21 apply other than those specified elsewhere eg. within procedures using the concerned system information, and/or within the corresponding field descriptions.
5.2.2.5 Essential system information missing

The UE shall:
\( 1> \) if in RRC_IDLE or in RRC_INACTIVE or in RRC_CONNECTED while T311 is running:
\( 2> \) if the UE is unable to acquire the MIB:
\( 3> \) consider the cell as barred in accordance with TS 38.304 [20];

ETSI


--- Page 59  ---


3GPP TS 38.331 version 17.0.0 Release 17
58
ETSI TS 138331 V17.0.0 (2022-05)

3> perform barring as if intraFreqReselection is set to allowed;
\( 2> \) else if the UE is unable to acquire the SIB1:
3> consider the cell as barred in accordance with TS 38.304 [20];
3> if the UE is a RedCap UE:
4> peform barring as if intraFreqReselectionRedCap is set to allowed;
\( 3> \) else:
4> perform cell re-selection to other cells on the same frequency as the barred cell as specified in TS 38.304 [20].
5.3 Connection control
5.3.1 Introduction
5.3.1.1 RRC connection control

RRC connection establishment involves the establishment of SRB1. The network completes RRC connection establishment prior to completing the establishment of the NG connection, i.e. prior to receiving the UE context information from the 5 GC . Consequently, AS security is not activated during the initial phase of the RRC connection. During this initial phase of the RRC connection, the network may configure the UE to perform measurement reporting, but the UE only sends the corresponding measurement reports after successful AS security activation. However, the UE only accepts a re-configuration with sync message when AS security has been activated.

Upon receiving the UE context from the 5GC, the RAN activates AS security (both ciphering and integrity protection) using the initial AS security activation procedure. The RRC messages to activate AS security (command and successful response) are integrity protected, while ciphering is started only after completion of the procedure. That is, the response to the message used to activate AS security is not ciphered, while the subsequent messages (e.g. used to establish SRB2, DRBs and multicast MRBs) are both integrity protected and ciphered. After having initiated the initial AS security activation procedure, the network may initiate the establishment of SRB2 and DRBs and/or multicast MRBs, i.e. the network may do this prior to receiving the confirmation of the initial AS security activation from the UE. In any case, the network will apply both ciphering and integrity protection for the RRC reconfiguration messages used to establish SRB2, DRBs and multicast MRBs. The network should release the RRC connection if the initial AS security activation and/or the radio bearer establishment fails. A configuration with SRB2 without DRB or multicast MRB, or with DRB or multicast MRB without SRB2 is not supported (i.e., SRB2 and at least one DRB or multicast MRB must be configured in the same RRC Reconfiguration message, and it is not allowed to release all the DRBs without releasing the RRC Connection). For [AB-MT, a configuration with SRB2 without any DRB/MRB is supported.

The release of the RRC connection normally is initiated by the network. The procedure may be used to re-direct the UE to an NR frequency or an E-UTRA carrier frequency.

The suspension of the RRC connection is initiated by the network. When the RRC connection is suspended, the UE stores the UE Inactive AS context and any configuration received from the network, and transits to RRC_INACTIVE state. The RRC message to suspend the RRC connection is integrity protected and ciphered.

The resumption of a suspended RRC connection is initiated by upper layers when the UE needs to transit from RRC_INACTIVE state to RRC_CONNECTED state or by RRC layer to perform a RNA update or by RAN paging from NG-RAN or for SDT. When the RRC connection is resumed, network configures the UE according to the RRC connection resume procedure based on the stored UE Inactive AS context and any RRC configuration received from the network. The RRC connection resume procedure re-activates AS security and re-establishes SRB(s) and DRB(s) and/or multicast MRB(s), if configured.

Upon initiating the resume procedure for SDT, security is re-activated for SRB1 and for the radio bearers configured with SDT. Further, SRB1 and the radio bearers configured for SDT are re-established and resumed whilst the UE remains in RRC_INACTIVE state. Transmission and reception of data and/or signalling messages over radio bearers configured for SDT can happen whilst the UE is in RRC_INACTIVE state and T319a is running.

ETSI


--- Page 60  ---


3GPP TS 38.331 version 17.0.0 Release 17
59
ETSI TS 138331 V17.0.0 (2022-05)

In response to a request to resume the \( R R C \) connection, the network may resume the suspended \( R R C \) connection and send UE to RRC_CONNECTED, or reject the request to resume and send UE to RRC_INACTIVE (with a wait timer), or directly re-suspend the RRC connection and send UE to RRC_INACTIVE, or directly release the RRC connection and send UE to RRC_IDLE, or instruct the UE to initiate NAS level recovery (in this case the network sends an RRC setup message).

In response to a resume procedure initiated for SDT, the network may resume the suspended RRC connection and send UE to RRC_CONNECTED, or reject the request to resume and send UE to RRC_INACTIVE (with a wait timer), or directly re-suspend the RRC connection and send UE to RRC_INACTIVE, or directly release the RRC connection and send UE to RRC_IDLE, or instruct the UE to initiate NAS level recovery (in this case the network sends an RRC setup message).

NOTE: In case the UE receives the configurations for NR sidelink communication via the E-UTRA, the configurations for NR sidelink communication in SIB12 and s/-ConfigDedicatedNR within RRCReconfiguration used in clause 5.3 are provided by the configurations in SystemInformationBlockType28 and sl-ConfigDedicatedForNR within RRCConnectionReconfiguration as specified in TS 36.331 [10], respectively.
5.3.1.2 AS Security

AS security comprises of the integrity protection and ciphering of RRC signalling (SRBs) and user data (DRBs).
RRC handles the configuration of the AS security parameters which are part of the AS configuration: the integrity protection algorithm, the ciphering algorithm, if integrity protection and/or ciphering is enabled for a \( D R B \) and two parameters, namely the keySetChangelndicator and the nextHopChainingCount, which are used by the UE to determine the AS security keys upon reconfiguration with sync (with key change), connection re-establishment and/or connection resume.

The integrity protection algorithm is common for SRB1, SRB2, SRB3 (if configured), SRB4 (if configured) and DRBs configured with integrity protection, with the same keyToUse value. The ciphering algorithm is common for SRB1, SRB2, SRB3 (if configured), SRB4 (if configured) and DRBs configured with the same keyTo Use value. Neither integrity protection nor ciphering applies for SRB0.

NOTE 0: All DRBs related to the same PDU session have the same enable/disable setting for ciphering and the same enable/disable setting for integrity protection, as specified in TS 33.501 [11].

RRC integrity protection and ciphering are always activated together, i.e in one message/procedure. RRC integrity protection and ciphering for SRBs are never de-activated. However, it is possible to switch to a 'NULL' ciphering algorithm (nea0).

The 'NULL' integrity protection algorithm (nia0) is used only for SRBs and for the UE in limited service mode, see TS \( 33.501[11] \) and when used for SRBs, integrity protection is disabled for DRBs. In case the 'NULL' integrity protection algorithm is used, 'NULL' ciphering algorithm is also used.

NOTE 1: Lower layers discard RRC messages for which the integrity protection check has failed and indicate the integrity protection verification check failure to RRC.

The AS applies four different security keys: one for the integrity protection of RRC signalling ( \( K_{R R C \text { mt }} \) ), one for the ciphering of \( R R C \) signalling ( \( K_{R R C e n c} \) ), one for integrity protection of user data ( \( K_{\text {UPInt }} \) ) and one for the ciphering of user data ( \( K_{\text {UPenc }} \) ). All four AS keys are derived from the \( K_{g N B} \) key. The \( K_{g N B} \) key is based on the \( K_{\text {amf }} \) key (as specified in TS 33.501 [11]), which is handled by upper layers.

The integrity protection and ciphering algorithms can only be changed with reconfiguration with sync. The AS keys ( \( \mathrm{K}_{\mathrm{gNB}}, \mathrm{K}_{\mathrm{RRC} \text { int }}, \mathrm{K}_{\mathrm{RRCenc}}, \mathrm{K}_{\text {upint }} \) and \( \mathrm{K}_{\text {UPenc }} \) ) change upon reconfiguration with sync (if masterKeyUpdate is included), and upon connection re-establishment and connection resume.

For each radio bearer an independent counter (COUNT, as specified in TS 38.323 [5]) is maintained for each direction. For each radio bearer, the COUNT is used as input for ciphering and integrity protection.

It is not allowed to use the same COUNT value more than once for a given security key. As specified in TS 33.501 clause 6.9.4.1 [11], the network is responsible for avoiding reuse of the COUNT with the same RB identity and with the same key, e.g. due to the transfer of large volumes of data, release and establishment of new RBs, and multiple termination point changes for RLC-UM bearers and multiple termination point changes for RLC-AM bearer with SN terminated PDCP re-establishment (COUNT reset) due to SN only full configuration whilst the key stream inputs (i.e.

ETSI


--- Page 61  ---


3GPP TS 38.331 version 17.0.0 Release 17
60
ETSI TS 138331 V17.0.0 (2022-05)

bearer ID, security key) at MN have not been updated. In order to avoid such re-use, the network may e-g. use different RB identities for RB establishments, change the AS security key, or an RRC_CONNECTED to RRC_IDLE/RRC_INACTIVE and then to RRC_CONNECTED transition.

In order to limit the signalling overhead, individual messages/ packets include a short sequence number (PDCP SN, as specified in TS 38.323 [5]). In addition, an overflow counter mechanism is used: the hyper frame number ( \( H F N \), as specified in TS 38.323 [5]). The HFN needs to be synchronized between the UE and the network.

For each SRB , the value provided by RRC to lower layers to derive the 5 -bit BEARER parameter used as input for ciphering and for integrity protection is the value of the corresponding srb-Identity with the MSBs padded with zeroes.

For a UE provided with an sk-counter, keyToUse indicates whether the UE uses the master key ( \( \mathrm{K}_{\mathrm{gNB}} \) ) or the secondary key ( \( \mathrm{S}-\mathrm{K}_{\varepsilon N B} \) or \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ) for a particular DRB. The secondary key is derived from the master key and \( s k \)-Counter, as defined in TS 33.501 [11]. Whenever there is a need to refresh the secondary key, e g. upon change of MN with \( K_{g N B} \) change or to avoid COUNT reuse, the security key update is used (see 5.3 .5 .7 ). When the UE is in NR-DC, the network may provide a UE configured with an SCG with an \( s k \)-Counter even when no DRB is setup using the secondary key (S\( \mathrm{K}_{\mathrm{gNB}} \) ) in order to allow the configuration of SRB3. The network can also provide the UE with an \( s k \)-Counter, even if no SCG is configured, when using SN terminated MCG bearers.
5.3.2 Paging
5.3.2.1 General

Figure 5.3.2.1-1: Paging

The purpose of this procedure is:
- to transmit paging information to a UE in RRC_IDLE or RRC_INACTIVE.
5.3.2.2 Initiation

The network initiates the paging procedure by transmitting the Paging message at the UE's paging occasion as specified in TS 38.304 [20]. The network may address multiple UEs within a Paging message by including one PagingRecord for each UE.
5.3.2.3 Reception of the Paging message by the UE

Upon receiving the Paging message, the UE shall:
1> if in RRC_IDLE, for each of the PagingRecord, if any, included in the Paging message:
\( 2> \) if the ue-Identity included in the PagingRecord matches the UE identity allocated by upper layers:
3> if upper layers indicate the support of paging cause:
4> forward the ue-Identity, accessType (if present) and paging cause (if determined) to the upper layers;
3> else:
4> forward the ue-Identity and accessType (if present) to the upper layers;
1> if in RRC_INACTIVE, for each of the PagingRecord, if any, included in the Paging message:
\( 2> \) if the ue-Identity included in the PagingRecord matches the UE's stored fullI-RNTT:

ETSI


--- Page 62  ---


3GPP TS 38.331 version 17.0.0 Release 17
61
ETSI TS 138331 V17.0.0 (2022-05)

3> if the UE is configured by upper layers with Access Identity 1:
4> initiate the RRC connection resumption procedure according to 5.3.13 with resumeCause set to mpsPriorityAccess;
\( 3> \) else if the UE is configured by upper layers with Access Identity 2:
4> initiate the RRC connection resumption procedure according to 5.3.13 with resumeCause set to mcsPriorityAccess;
\( 3> \) else if the UE is configured by upper layers with one or more Access Identities equal to 11-15:
\( 4> \) initiate the RRC connection resumption procedure according to 5.3.13 with resumeCause set to highPriorityAccess;

3> else:
\( 4> \) initiate the RRC connection resumption procedure according to 5.3.13 with resumeCause set to mtAccess;
\( 2> \) else if the ue-Identity included in the PagingRecord matches the UE identity allocated by upper layers:
3> if upper layers indicate the support of paging cause:
4> forward the ue-Identity, accessType (if present) and paging cause (if determined) to the upper layers;
3> else:
4> forward the ue-Identity and access Type (if present) to the upper layers;
3> perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'other';
1> for each TMGI included in paging GroupList, if any, included in the Paging message:
\( 2> \) if the UE has joined an MBS session indicated by the TMGI included in the pagingGroupList:
3> forward the TMGI to the upper layers;
1> if in RRC_INACTIVE and the UE has joined one or more MBS session(s) indicated by the TMGI included in the paging GroupList; and

1> if none of the ue-Identity included in any of the PagingRecord, if included in the Paging message, matches the UE identity allocated by upper layers:
\( 2> \) initiate the RRC connection resumption procedure according to 5-3-13 with resumeCause set as below:
\( 3> \) if the UE is configured by upper layers with Access Identity 1:
\( 4> \) resumeCause is set to mps-PriorityAccess;
\( 3> \) else if the UE is configured by upper layers with Access Identity 2:
\( 4> \) resumeCause is set to mcs-PriorityAccess;
\( 3> \) else if the UE is configured by upper layers with one or more Access Identities equal to 11-15:
4> resumeCause is set to highPriorityAccess;
3> else:
4> resumeCause is set to \( m t \)-Access.
\( 1> \) if the UE is acting as a L2 U2N Relay UE, for each of the PagingRecord, if any, included in the Paging message:
\( 2> \) if the ue-Identity included in the PagingRecord in the Paging message matches the UE identity in \( s l \) -PagingIdentity-RemoteUE included in sl-PagingInfo-RemoteUE:

ETSI


--- Page 63  ---


3GPP TS 38.331 version 17.0.0 Release 17
62
ETSI TS 138331 V17.0.0 (2022-05)

3> inititate the Uu Message transfer in sidelink as specified in 5.8.9.9;
5.3.3 RRC connection establishment
5.3.3.1 General

Figure 5.3.3.1-1: RRC connection establishment, successful

Figure 5.3.3.1-2: RRC connection establishment, network reject

The purpose of this procedure is to establish an RRC connection. RRC connection establishment involves SRB1 establishment. The procedure is also used to transfer the initial NAS dedicated information/message from the UE to the network.

The network applies the procedure e.g.as follows:
- When establishing an RRC connection;
- When UE is resuming or re-establishing an RRC connection, and the network is not able to retrieve or verify the UE context. In this case, UE receives RRCSetup and responds with RRCSetupComplete.
5.3.3.1a Conditions for establishing RRC Connection for NR sidelink communication/discovery/V2X sidelink communication

For NR sidelink communication/discovery, an RRC connection establishment is initiated only in the following cases:
\( 1> \) if configured by upper layers to transmit NR sidelink communication/discovery and related data is available for transmission:
\( 2> \) if the frequency on which the UE is configured to transmit NR sidelink communication is included in \( s l \) FreqInfoList within SIB12 provided by the cell on which the UE camps; and if the valid version of SIB12 does not include sl-TxPoolSelectedNormal for the concerned frequency; or
\( 2> \) if the frequency on which the UE is configured to transmit NR sidelink discovery is included in \( s l \) FreqInfoList within SIB12 provided by the cell on which the UE camps; and if the valid version of SIB12 does not include sl-DiscTxPoolSelected or sl-TxPoolSelectedNormal for the concerned frequency;

For L2 U2N Relay UE in RRC_IDLE, an RRC connection establishment is initiated in the following cases:

ETSI


--- Page 64  ---


3GPP TS 38.331 version 17.0.0 Release 17
63
ETSI TS 138331 V17.0.0 (2022-05)

1> if any message is received from a L2 U2N Remote UE via SL-RLC0 as specified in 9-1-1.4 or SL-RLC1 as specified in 9.2.4;

For V2X sidelink communication, an RRC connection is initiated only when the conditions specified for V2X sidelink communication in clause 5.3.3.1a of TS 36.331 [10] are met.

NOTE: Upper layers initiate an RRC connection. The interaction with NAS is left to UE implementation.
5.3.3.2 Initiation

The UE initiates the procedure when upper layers request establishment of an RRC connection while the UE is in RRC_IDLE and it has acquired essential system information, or for sidelink communication as specified in clause 5.3.3.1a.

The UE shall ensure having valid and up to date essential system information as specified in clause 5.2 .2 .2 before initiating this procedure.

Upon initiation of the procedure, the UE shall:
\( 1> \) if the upper layers provide an Access Category and one or more Access Identities upon requesting establishment of an RRC connection:
\( 2> \) perform the unified access control procedure as specified in 5.3.14 using the Access Category and Access Identities provided by upper layers;
\( 3> \) if the access attempt is barred, the procedure ends;
1> if the UE is connected with a L2 U2N Relay UE via PC5-RRC connection (i.e. the UE is a L2 U2N Remote UE):
\( 2> \) apply the specified configuration of SL-RLC0 as specified in 9.1.1.4;
\( 2> \) apply the SDAP configuration and PDCP configuration as specified in 9.1.1.2 for SRB0;
\( 1> \) else: \( 2> \) apply the default L1 parameter values as specified in corresponding physical layer specifications except for the parameters for which values are provided in SIBI;
\( 2> \) apply the default MAC Cell Group configuration as specified in 9.2.2;
\( 2> \) apply the CCCH configuration as specified in 9.1.1.2;
\( 2> \) apply the timeAlignmentTimerCommon included in SIB1;
\( 1> \) start timer T300;
\( 1> \) initiate transmission of the RRCSetupRequest message in accordance with 5.3.3.3;
5.3.3.3 Actions related to transmission of RRCSetupRequest message

The UE shall set the contents of RRCSetupRequest message as follows:
\( 1> \) set the ue-Identity as follows:
\( 2> \) if upper layers provide a 5 G-S-TMSI:
3> set the ue-Identity to ng-5G-S-TMSI-Part 1;
2> else:
\( 3> \) draw a 39 -bit random value in the range \( 0.2^{39}-1 \) and set the ue-Identity to this value;
NOTE 1: Upper layers provide the \( 5 G \)-S-TMSI if the UE is registered in the TA of the current cell.
\( 1> \) if the establishment of the RRC connection is the result of release with redirect with mpsPriorityIndication (either in NR or E-UTRAN):
\( 2> \) set the establishmentCause to mps-PriorityAccess;

ETSI


--- Page 65  ---


3GPP TS 38.331 version 17.0.0 Release 17
64
ETSI TS 138331 V17.0.0 (2022-05)

1> else:
\( 2> \) set the establishmentCause in accordance with the information received from upper layers;
NOTE 2: In case the L2 U2N Relay UE initiates RRC connection establishment according to conditions as specified in 5.3.3.1a, the L2 U2N Relay UE sets the establishmentCause by implementation. If the cause value in the message received from the L2 U2N Remote UE via SL-RLC0 is emergency, mpsPriorityAccess, or mcs-PriorityAccess, the L2 U2N Relay UE can set the same valuel Otherwise, the L2 U2N Relay UE does not set the value as emergency, mps-PriorityAccess, or mcs-PriorityAccess.

The UE shall submit the RRCSetupRequest message to lower layers for transmission.
The UE shall continue cell re-selection related measurements as well as cell re-selection evaluation. If the conditions for cell re-selection are fulfilled, the UE shall perform cell re-selection as specified in 5.3.3.6.

NOTE 3: For L2 U2N Remote UE in RRC_IDLE/INACTIVE, the cell (re)selection procedure as specified in TS 38.304 [20] and relay (re)selection procedure as specified in 5.8.15.3 are performed independently and up to UE implementation to select either a cell or a L2 U2N Relay UE.
5.3.3.4 Reception of the RRCSetup by the UE

The UE shall perform the following actions upon reception of the RRCSetup:
\( 1> \) if the RRCSetup is received in response to an RRCReestablishmentRequest; or
\( 1> \) if the RRCSetup is received in response to an RRCResumeRequest or RRCResumeRequest I:
\( 2> \) discard any stored UE Inactive AS context and suspendConfig;
\( 2> \) discard any current AS security context including the \( \mathrm{K}_{\mathrm{RRCenc}} \) key, the \( \mathrm{K}_{\mathrm{RRCint}} \) key, the \( \mathrm{K}_{\text {UPint }} \) key and the Kupenc key;
\( 2> \) release radio resources for all established RBs except SRB0, including release of the RLC entities, of the associated PDCP entities and of SDAP;
\( 2> \) release the RRC configuration except for the default L1 parameter values, default MAC Cell Group configuration and CCCH configuration;
\( 2> \) indicate to upper layers fallback of the RRC connection;
\( 2> \) discard any application layer measurement reports which were not transmitted yet;
\( 2> \) inform upper layers about the release of all application layer measurement configurations;
\( 2> \) stop timer T380, if running;
1> perform the cell group configuration procedure in accordance with the received masterCellGroup and as specified in 5.3.5.5;

1> perform the radio bearer configuration procedure in accordance with the received radioBearerConfig and as specified in 5.3.5.6;

1> if stored, discard the cell reselection priority information provided by the cellReselectionPriorities or inherited from another RAT;

1> stop timer T300, T301, T319 or T319a if running;
1> if T390 is running:
\( 2> \) stop timer T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4;
1> if T302 is running:
\( 2> \) stop timer T302;

ETSI


--- Page 66  ---


3GPP TS 38.331 version 17.0.0 Release 17
65
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) perform the actions as specified in 5.3.14.4;
\( 1> \) stop timer T320, if running;
\( 1> \) if the RRCSetup is received in response to an RRCResumeRequest, RRCResumeRequest I or RRCSetupRequest:
\( 2> \) if T331 is running:
3> stop timer T331;
3> perform the actions as specified in 5.7.8.3;
\( 2> \) enter RRC_CONNECTED;
\( 2> \) stop the cell re-selection procedure;
\( 2> \) stop relay (re)selection procedure if any for L2 U2N Remote UE;
\( 1> \) consider the current cell to be the PCell;
\( 1> \) if the RRCSetup message includes the sl-L2RemoteUEConfig (i.e. the UE is a L2 U2N Remote UE):
\( 2> \) perform the L2 U2N Remote UE configuration procedure as specified in 5.3.5.16;
1> if the UE has radio link failure or handover failure information available in VarRLF-Report and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report:
\( 2> \) if reconnectCellld in VarRLF-Report is not set, and if the received RRCSetup is in response to an RRCSetupRequest:

3> if choCellld in VarRLF-Report is set:
4> set timeUntilReconnection in VarRLF-Report to the time that elapsed since the radio link failure or handover failure experienced in the failedPCellld stored in VarRLF-Report;
\( 3> \) else:
4> set timeUntilReconnection in VarRLF-Report to the time that elapsed since the last radio link failure or handover failure;

3> set nrReconnectCellld in reconnectCellld in VarRLF-Report to the global cell identity and the tracking area code of the PCell;

1> if the UE supports RLF report for inter-RAT MRO NR as defined in TS 36.306 [62], and if the UE has radio link failure or handover failure information available in VarRLF-Report of TS 36.331 [10] and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report of TS 36.331 [10]:
\( 2> \) if reconnectCellld in VarRLF-Report of TS 36.331 [10] is not set:
3> set timeUntilReconnection in VarRLF-Report of TS \( 36.331[10] \) to the time that elapsed since the last radio link failure or handover failure in LTE;

3> set nrReconnectCellld in reconnectCellld in VarRLF-Report of TS 36.331[10] to the global cell identity and the tracking area code of the PCell;
\( 1> \) set the content of RRCSetupComplete message as follows:
\( 2> \) if upper layers provide a 5 G-S-TMSI:
\( 3> \) if the RRCSetup is received in response to an RRCSetupRequest:
4> set the ng-5G-S-TMSI-Value to ng-5G-S-TMSI-Part2;
\( 3> \) else:
\( 4> \) set the ng-5G-S-TMSI-Value to ng-5G-S-TMSI;

ETSI


--- Page 67  ---


3GPP TS 38.331 version 17.0.0 Release 17
66
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if upper layers selected an SNPN or a PLMN and in case of PLMN UE is either allowed or instructed to access the PLMN via a cell for which at least one CAG ID is broadcast:
\( 3> \) set the selectedPLMN-Identity from the mpn-IdentityInfoList;
\( 2> \) else:
3> set the selectedPLMN-Identity to the PLMN selected by upper layers from the plmn-IdentityInfoList;
\( 2> \) if upper layers provide the 'Registered AMF':
3> include and set the registeredAMF as follows:
\( 4> \) if the PLMN identity of the 'Registered AMF' is different from the PLMN selected by the upper layers:

5> include the plmnldentity in the registeredAMF and set it to the value of the PLMN identity in the 'Registered AMF' received from upper layers;
\( 4> \) set the amf-Identifier to the value received from upper layers;
\( 3> \) include and set the guami-Type to the value provided by the upper layers;
\( 2> \) if upper layers provide one or more S-NSSAI (see TS 23.003 [21]):
\( 3> \) include the \( s \)-NSSAI-List and set the content to the values provided by the upper layers;
\( 2> \) if upper layers provide onboarding request indication:
\( 3> \) include the onboardingRequest;
\( 2> \) set the dedicatedNAS-Message to include the information received from upper layers;
\( 2> \) if connecting as an IAB-node:
\( 3> \) include the iab-Nodelndication;
\( 2> \) if the SIB1 contains idleModeMeasurementsNR and the UE has NR idle/inactive measurement information concerning cells other than the PCell available in VarMeasIdleReport; or
\( 2> \) if the SIB1 contains idleModeMeasurementsEUTRA and the UE has E-UTRA idle/inactive measurement information available in VarMeasIdleReport:
\( 3> \) include the idleMeasAvailable;
\( 2> \) if the UE has logged measurements available for NR and if the RPLMN is included in plmn-IdentityList stored in VarLogMeasReport:

3> if the sigLoggedMeasType in VarLogMeasReport is included:
\( 4> \) include the sigLogMeasConfigAvailable in the RRCSetupComplete message and set it according to the following:

5> if T330 timer is running:
6> set sigLogMeasConfigAvailable to true in the RRCSetupComplete message;
\( 5> \) else:
6> set sigLogMeasConfigAvailable to false in the RRCSetupComplete message;
\( 3> \) include the logMeasAvailable in the RRCSetupComplete message;
3> if Bluetooth measurement results are included in the logged measurements the UE has available for NR:
4> include the \( \log \) MeasAvailableBT in the RRCSetupComplete message;
\( 3> \) if WLAN measurement results are included in the logged measurements the UE has available for NR:

ETSI


--- Page 68  ---


3GPP TS 38.331 version 17.0.0 Release 17
67
ETSI TS 138331 V17.0.0 (2022-05)

4> include the \( \log \) MeasAvailableWLAN in the RRCSetupComplete message;
\( 2> \) if the sigLoggedMeasType in VarLogMeasReport is included:
3> if T330 timer is running:
4> set sigLogMeasConfigAvailable to true in the RRCSetupComplete message;
\( 3> \) else:
4 - if the UE has logged measurements available for NR:
\( 5> \) set sigLogMeasConfigAvailable to false in the RRCSetupComplete message;
\( 2> \) if the UE has connection establishment failure or connection resume failure information available in VarConnEstFailReport or VarConnEstFailReportList and if the RPLMN is equal to plmn-Identity stored in VarConnEstFailReport or VarConnEstFailReportList:
\( 3> \) include connEstFaillnfoAvailable in the RRCSetupComplete message;
\( 2> \) if the UE has radio link failure or handover failure information available in VarRLF-Report and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report, or
\( 2> \) if the UE has radio link failure or handover failure information available in VarRLF-Report of TS 36.331 [10], and if the UE is capable of cross-RAT RLF reporting and if the RPLMN is included in plmnIdentityList stored in VarRLF-Report of TS 36.331 [10]:

3> include iff-InfoAvailable in the RRCSetupComplete message;
\( 2> \) if the UE has successful handover information available in VarSuccessHO-Report and if the RPLMN is included in plmn-IdentityList stored in VarSuccessHO-Report:

3> include successHO-InfoAvailable in the RRCSetupComplete message;
\( 2> \) if the UE supports storage of mobility history information and the UE has mobility history information available in VarMobilityHistoryReport:
\( 3> \) include the mobilityHistoryAvail in the RRCSetupComplete message;
\( 2> \) if the RRCSetup is received in response to an RRCResumeRequest, RRCResumeRequest I or RRCSetupRequest:

3> if speedStateReselectionPars is configured in the SIB2:
4> include the mobilityState in the RRCSetupComplete message and set it to the mobility state (as specified in TS 38.304 [20]) of the UE just prior to entering RRC_CONNECTED state;
\( 1> \) submit the RRCSetupComplete message to lower layers for transmission, upon which the procedure ends.
5.3.3.5 Reception of the RRCReject by the UE

The UE shall:
\( 1> \) perform the actions as specified in 5.3.15;
5.3.3.6 Cell re-selection or cell selection while T390, T300 or T302 is running (UE in RRC_IDLE)

The UE shall:
1> if cell reselection occurs while T300 or T302 is running; or
1> if relay reselection occurs while T300 is running; or
1> if cell changes due to relay reselection while T302 is running:

ETSI


--- Page 69  ---


3GPP TS 38.331 version 17.0.0 Release 17
68
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'RRC connection failure';

1> else if cell selection or reselection occurs while T390 is running, or cell change due to relay selection or reselection occurs while T390 is running:
\( 2> \) stop T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4.
5.3.3.7 T300 expiry

The UE shall:
1> if timer T300 expires:
\( 2> \) reset MAC, release the MAC configuration and re-establish RLC for all RBs that are established;
2 if the UE supports RRC Connection Establishment failure with temporary offset and the T300 has expired a consecutive connEstFailCount times on the same cell for which connEstFailureControl is included in SIB1:

3> for a period as indicated by connEstFailOffsetValidity:
\( 4> \) use connEstFailOffset for the parameter Qoffsettemp for the concerned cell when performing cell selection and reselection according to TS 38.304 [20] and TS 36.304 [27];

NOTE 1: When performing cell selection, if no suitable or acceptable cell can be found, it is up to UE implementation whether to stop using connEstFailOffset for the parameter Qoffsettemp during connEstFailOffsetValidity for the concerned cell.
\( 2> \) if the UE has connection establishment failure information or connection resume failure information available in VarConnEstFailReport and if the RPLMN is not equal to pimn-identity stored in VarConnEstFailReport; or
\( 2> \) if the cell identity of current cell is not equal to the cell identity stored in measResulFailedCell in VarConnEstFailReport:
\( 3> \) reset the numberOfConnFail to 0;
\( 2> \) clear the content included in VarConnEstFailReport except for the numberOfConnFail, if any;
\( 2> \) store the following connection establishment failure information in the VarConnEstFailReport by setting its fields as follows:

3> set the plmn-Identity to the PLMN selected by upper layers (see TS 24.501 [23]) from the PLMN(s) included in the plmn-IdentitylnfoList in SIB1;

3> set the measResultFailedCell to include the global cell identity, tracking area code, the cell level and SS/PBCH block level RSRP, and RSRQ, and SS/PBCH block indexes, of the failed cell based on the available SSB measurements collected up to the moment the UE detected connection establishment failure;

3> if available, set the measResultNeighCells, in order of decreasing ranking-criterion as used for cell reselection, to include neighbouring cell measurements for at most the following number of neighbouring cells: 6 intra-frequency and 3 inter-frequency neighbours per frequency as well as 3 inter-RAT neighbours, per frequency/ set of frequencies per RAT and according to the following:

4> for each neighbour cell included, include the optional fields that are available;
NOTE 2: The UE includes the latest results of the available measurements as used for cell reselection evaluation, which are performed in accordance with the performance requirements as specified in TS 38.133 [14].

3> if available, set the locationInfo as follows:
4> if available, set the commonLocationInfo to include the detailed location information;

ETSI


--- Page 70  ---


3GPP TS 38.331 version 17.0.0 Release 17
69
ETSI TS 138331 V17.0.0 (2022-05)

4> if available, set the bt-LocationInfo to include the Bluetooth measurement results, in order of decreasing RSSI for Bluetooth beacons;

4> if available, set the wlan-LocationInfo to include the WLAN measurement results, in order of decreasing RSSI for WLAN APs;

4> if available, set the sensor-LocationInfo to include the sensor measurement results as follows;
\( 5> \) if available, include the sensor-MeasurementInformation;
\( 5> \) if available, include the sensor-MotionInformation;
NOTE 3: Which location information related configuration is used by the UE to make the locationInfo available for inclusion in the VarConnEstFailReport is left to UE implementation.

3> set perRAInfoList to indicate the performed random access procedure related information as specified in 5.7.10.5;

3> if the numberOfConnFail is smaller than 8 :
4> increment the numberOfConnFail by 1;
\( 2> \) inform upper layers about the failure to establish the RRC connection, upon which the procedure ends;
The UE may discard the connection establishment failure or connection resume failure information, i.e. release the UE variable VarConnEstFailReport, 48 hours after the last connection establishment failure is detected.

The L2 U2N Relay UE either triggers PC5-S release or sends Notification message to the connected L2 U2N Remote UE(s) in accordance with 5.8.9.10.
5.3.3.8 Abortion of RRC connection establishment

If upper layers abort the RRC connection establishment procedure, due to a NAS procedure being aborted as specified in TS 24.501 [23], while the UE has not yet entered RRC_CONNECTED, the UE shall:
\( 1> \) stop timer T300, if running;
1> reset MAC, release the MAC configuration and re-establish RLC for all RBs that are established.
5.3.4 Initial AS security activation
5.3.4.1 General

Figure 5.3.4.1-1: Security mode command, successful

ETSI


--- Page 71  ---


3GPP TS 38.331 version 17.0.0 Release 17
70
ETSI TS 138331 V17.0.0 (2022-05)

Figure 5.3.4.1-2: Security mode command, failure

The purpose of this procedure is to activate AS security upon RRC connection establishment.
5.3.4.2 Initiation

The network initiates the security mode command procedure to a UE in RRC_CONNECTED. Moreover, the network applies the procedure as follows:
- when only SRB1 is established, i.e prior to establishment of SRB2, multicast MRBs and/or DRBs.
5.3.4.3 Reception of the SecurityModeCommand by the UE

The UE shall:
\( 1> \) derive the \( \mathrm{K}_{\mathrm{gNB}} \) key, as specified in TS 33.501 [11];
\( 1> \) derive the \( \mathrm{K}_{\mathrm{RRC} \text { mt }} \) key associated with the integrityProtAlgorithm indicated in the SecurityModeCommand message, as specified in TS 33.501 [11];

1> request lower layers to verify the integrity protection of the SecurityModeCommand message, using the algorithm indicated by the integrityProtAlgorithm as included in the SecurityModeCommand message and the \( \mathrm{K}_{\text {RRCInt }} \) key;

1> if the SecurityModeCommand message passes the integrity protection check:
\( 2> \) derive the \( \mathrm{K}_{\text {RRCenc }} \) key and the \( \mathrm{K}_{\text {UPenc }} \) key associated with the cipheringAlgorithm indicated in the SecurityModeCommand message, as specified in TS 33.501 [11];
\( 2> \) derive the \( K_{\text {UPint }} \) key associated with the integrityProtAlgorithm indicated in the SecurityModeCommand message, as specified in TS 33.501 [11];
\( 2> \) configure lower layers to apply SRB integrity protection using the indicated algorithm and the \( \mathrm{K}_{\mathrm{RRCint}} \) key immediately, i.e integrity protection shall be applied to all subsequent messages received and sent by the UE, including the SecurityModeComplete message;
\( 2> \) configure lower layers to apply SRB ciphering using the indicated algorithm, the \( \mathrm{K}_{\text {RRCenc }} \) keyafter completing the procedure, i.e ciphering shall be applied to all subsequent messages received and sent by the UE, except for the SecurityModeComplete message which is sent unciphered;
\( 2> \) consider AS security to be activated;
\( 2> \) submit the SecurityModeComplete message to lower layers for transmission, upon which the procedure ends;
1> else:
\( 2> \) continue using the configuration used prior to the reception of the SecurityModeCommand message, i.e. neither apply integrity protection nor ciphering.
\( 2> \) submit the SecurityModeFailure message to lower layers for transmission, upon which the procedure ends.

ETSI


--- Page 72  ---


3GPP TS 38.331 version 17.0.0 Release 17
71
ETSI TS 138331 V17.0.0 (2022-05)
5.3.5 RRC reconfiguration
5.3.5.1 General

Figure 5.3.5.1-1: RRC reconfiguration, successful

Figure 5.3.5.1-2: RRC reconfiguration, failure

The purpose of this procedure is to modify an RRC connection, e.g. to establish/modify/release RBs/BH RLC channels, to perform reconfiguration with sync, to setup/modify/release measurements, to add/modify/release SCells and cell groups, to add/modify/release conditional handover configuration, to add/modify/release conditional PSCell change or conditional PSCell addition configuration. As part of the procedure, NAS dedicated information may be transferred from the Network to the UE.

RRC reconfiguration to perform reconfiguration with sync includes, but is not limited to, the following cases:
- reconfiguration with sync and security key refresh, involving RA to the PCell/PSCell, MAC reset, refresh of security and re-establishment of RLC and PDCP triggered by explicit L2 indicators;
- reconfiguration with sync but without security key refresh, involving RA to the PCell/PSCell, MAC reset and RLC re-establishment and PDCP data recovery (for AM DRB or AM MRB) triggered by explicit L2 indicators.
- reconfiguration with sync for DAPS and security key refresh, involving RA to the target PCell, establishment of target MAC, and
- for non-DAPS bearer: refresh of security and re-establishment of RLC and PDCP triggered by explicit L2 indicators;
- for DAPS bearer: establishment of RLC for the target PCell, refresh of security and reconfiguration of PDCP to add the ciphering function, the integrity protection function and ROHC function of the target PCell;
- for SRB: refresh of security and establishment of RLC and PDCP for the target PCell;
- reconfiguration with sync for DAPS but without security key refresh, involving RA to the target PCell, establishment of target MAC, and
- for non-DAPS bearer: RLC re-establishment and PDCP data recovery (for AM DRB or AM MRB) triggered by explicit L2 indicators.
- for DAPS bearer: establishment of RLC for target PCell, reconfiguration of PDCP to add the ciphering function, the integrity protection function and ROHC function of the target PCell;

ETSI


--- Page 73  ---


3GPP TS 38.331 version 17.0.0 Release 17
72
ETSI TS 138331 V17.0.0 (2022-05)
- for SRB: establishment of RLC and PDCP for the target PCell.

In (NG)EN-DC and NR-DC, SRB3 can be used for measurement configuration and reporting, for UE assistance (re)configuration and reporting for power savings, for IP address (re-)configuration and reporting for IAB-nodes, to (re)configure MAC, RLC, BAP, physical layer and RLF timers and constants of the SCG configuration, and to reconfigure PDCP for DRBs associated with the S-KgNB or SRB3, and to reconfigure SDAP for DRBs associated with S-KgNB in NGEN-DC and NR-DC, and to add/modify/release conditional PSCell change configuration, provided that the (re)configuration does not require any MN involvement, and to transmit RRC messages between the MN and the UE during fast MCG link recovery. In (NG)EN-DC and NR-DC, only measConfig, radioBearerConfig, conditionalReconfiguration, bap-Config, iab-IP-AddressConfigurationList, otherConfig and/or secondaryCellGroup are included in RRCReconfiguration received via SRB3, except when RRCReconfiguration is received within DLInformationTransferMRDC.
5.3.5.2 Initiation

The Network may initiate the RRC reconfiguration procedure to a UE in RRC_CONNECTED. The Network applies the procedure as follows:
- the establishment of RBs (other than SRB1, that is established during RRC connection establishment) is performed only when AS security has been activated;
- the establishment of BH RLC Channels for IAB is performed only when AS security has been activated;
- the establishment of Uu Relay RLC channels for L2 U2N Relay UE is performed only when AS security has been activated;
- the addition of Secondary Cell Group and SCells is performed only when AS security has been activated;
- the reconfiguration WithSync is included in secondaryCellGroup only when at least one RLC bearer or BH RLC channel is setup in SCG;
- the reconfiguration WithSync is included in masterCellGroup only when AS security has been activated, and SRB2 with at least one DRB or multicast MRB or, for IAB, SRB2, are setup and not suspended;
- the conditionalReconfiguration for CPC is included only when at least one RLC bearer is setup in SCG;
- the conditionalReconfiguration for CHO or CPA is included only when AS security has been activated, and SRB2 with at least one DRB or, for IAB, SRB2, are setup and not suspended.
5.3.5.3 Reception of an \( R R C \) Reconfiguration by the UE

The UE shall perform the following actions upon reception of the RRCReconfiguration, or upon execution of the conditional reconfiguration (CHO, CPA or CPC):
\( 1> \) if the RRCReconfiguration was received neither within mrdc-SecondaryCellGroup nor within E-UTRA RRCConnectionReconfiguration nor within E-UTRA RRCConnectionResume:
\( 2> \) if the RRCReconfiguration includes the scg-State:
3> perform SCG deactivation as specified in 5.3.5.13b;
\( 2> \) else:
3> perform SCG activation as specified in 5.3.5.13a;
Editor's note: FFS how to ensure that the notification to MAC is only processed at the time the SCG configuration is processed, if included.

1> if the RRCReconfiguration is applied due to a conditional reconfiguration execution upon cell selection performed while timer T311 was running, as defined in 5.3.7.3:
\( 2> \) remove all the entries within VarConditionalReconfig, if any;
\( 1> \) if the RRCReconfiguration includes the daps-SourceRelease:

ETSI


--- Page 74  ---


3GPP TS 38.331 version 17.0.0 Release 17
73
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) reset the source MAC and release the source MAC configuration;
\( 2> \) for each DAPS bearer:
3> release the RLC entity or entities as specified in TS 38.322 [4], clause 5.1.3, and the associated logical channel for the source SpCell;

3> reconfigure the PDCP entity to release DAPS as specified in TS 38.323 [5];
\( 2> \) for each SRB:
3> release the PDCP entity for the source SpCell;
\( 3> \) release the RLC entity as specified in TS 38.322 [4], clause 5.1.3, and the associated logical channel for the source SpCell;
\( 2> \) release the physical channel configuration for the source SpCell;
\( 2> \) discard the keys used in the source SpCell (the \( \mathrm{K}_{\mathrm{gNB}} \) key, the \( \mathrm{K}_{\mathrm{RRCenc}} \) key, the \( \mathrm{K}_{\mathrm{RRC} \text { int }} \) key, the \( \mathrm{K}_{\text {UPint }} \) key and the Kupene key), if any;
\( 1> \) if the RRCReconfiguration is received via other RAT (i.e., inter-RAT handover to NR):
\( 2> \) if the RRCReconfiguration does not include the fullConfig and the UE is connected to 5GC (i.e., delta signalling during intra 5GC handover):
\( 3> \) re-use the source RAT SDAP and PDCP configurations if available (i.e., current SDAP/PDCP configurations for all RBs from source E-UTRARAT prior to the reception of the inter-RAT HO RRCReconfiguration message);

1> else:
\( 2> \) if the RRCReconfiguration includes the fullConfig:
\( 3> \) perform the full configuration procedure as specified in 5.3.5.11;
\( 1> \) if the RRCReconfiguration includes the masterCellGroup:
\( 2> \) perform the cell group configuration for the received masterCellGroup according to 5.3.5.5;
\( 1> \) if the RRCReconfiguration includes the masterKeyUpdate:
\( 2> \) perform AS security key update procedure as specified in 5.3.5.7;
\( 1> \) if the RRCReconfiguration includes the \( s k \)-Counter:
\( 2> \) perform security key update procedure as specified in 5.3.5.7;
\( 1> \) if the RRCReconfiguration includes the secondaryCellGroup:
\( 2> \) perform the cell group configuration for the SCG according to 5.3.5.5;
\( 1> \) if the RRCReconfiguration includes the mrdc-SecondaryCellGroupConfig:
\( 2> \) if the mrdc-SecondaryCellGroupConfig is set to setup:
\( 3> \) if the mrdc-SecondaryCellGroupConfig includes mrdc-ReleaseAndAdd:
4> perform MR-DC release as specified in clause 5.3.5.10;
\( 3> \) if the received mrdc-SecondaryCellGroup is set to \( n r-S C G \) :
\( 4> \) perform the RRC reconfiguration according to 5.3.5.3 for the RRCReconfiguration message included in \( n r-S C G \);

3> if the received mrdc-SecondaryCellGroup is set to eutra-SCG:

ETSI


--- Page 75  ---


3GPP TS 38.331 version 17.0.0 Release 17
74
ETSI TS 138331 V17.0.0 (2022-05)

4> perform the RRC connection reconfiguration as specified in TS 36.331 [10], clause 5.3.5.3 for the RRCConnectionReconfiguration message included in eutra-SCG;
\( 2> \) else (mrdc-SecondaryCellGroupConfig is set to release):
3> perform MR-DC release as specified in clause 5.3.5.10;
\( 1> \) if the RRCReconfiguration message includes the radioBearerConfig:
\( 2> \) perform the radio bearer configuration according to 5.3.5.6;
1> if the RRCReconfiguration message includes the radioBearerConfig2:
\( 2> \) perform the radio bearer configuration according to 5.3.5.6;
\( 1> \) if the RRCReconfiguration message includes the measConfig:
\( 2> \) perform the measurement configuration procedure as specified in 5.5.2;
\( 1> \) if the RRCReconfiguration message includes the dedicatedNAS-MessageList:
\( 2> \) forward each element of the dedicatedNAS-MessageList to upper layers in the same order as listed;
\( 1> \) if the RRCReconfiguration message includes the dedicatedSIB1-Delivery:
\( 2> \) perform the action upon reception of \( S I B 1 \) as specified in 5.2.2.4.2;
NOTE 0: If this RRCReconfiguration is associated to the MCG and includes reconfigurationWithSync in spCellConfig and dedicatedSIB1-Delivery, the UE initiates (if needed) the request to acquire required SIBs, according to clause 5.2.2.3.5, only after the random access procedure towards the target SpCell is completed.
\( 1> \) if the RRCReconfiguration message includes the dedicatedSystemInformationDelivery:
\( 2> \) perform the action upon reception of System Information as specified in 5.2.2.4;
\( 1> \) if the RRCReconfiguration message includes the dedicatedPosSysInfoDelivery:
\( 2> \) perform the action upon reception of the contained posSIB(s), as specified in clause 5.2.2.4.16;
1> if the RRCReconfiguration message includes the otherConfig:
\( 2> \) perform the other configuration procedure as specified in 5.3.5.9;
1> if the RRCReconfiguration message includes the bap-Config:
\( 2> \) perform the BAP configuration procedure as specified in 5.3.5.12;
\( 1> \) if the RRCReconfiguration message includes the iab-IP-AddressConfigurationList:
\( 2> \) if iab-IP-AddressToReleaseList is included:
3> perform release of IP address as specified in 5.3_5.12a_1_1;
\( 2> \) if iab-IP-AddressToAddModList is included:
\( 3> \) perform IAB IP address addition/update as specified in 5.3.5.12a.1.2;
\( 1> \) if the RRCReconfiguration message includes the conditionalReconfiguration:
\( 2> \) perform conditional reconfiguration as specified in 5.3.5.13;
\( 1> \) if the RRCReconfiguration message includes the needForGapsConfigNR:
\( 2> \) if needForGapsConfigNR is set to setup:
\( 3> \) consider itself to be configured to provide the measurement gap requirement information of NR target bands;

ETSI


--- Page 76  ---


3GPP TS 38.331 version 17.0.0 Release 17
75
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) else:
\( 3> \) consider itself not to be configured to provide the measurement gap requirement information of NR target bands;
\( 1> \) if the RRCReconfiguration message includes the needForNCSG-ConfigNR:
\( 2> \) if needForNCSG-ConfigNR is set to setup:
\( 3> \) consider itself to be configured to provide the measurement gap and NCSG requirement information of NR target bands;
\( 2> \) else:
\( 3> \) consider itself not to be configured to provide the measurement gap and NCSG requirement information of NR target bands;
\( 1> \) if the RRCReconfiguration message includes the needForNCSG-ConfigEUTRA:
\( 2> \) if needForNCSG-ConfigEUTRA is set to setup:
\( 3> \) consider itself to be configured to provide the measurement gap and NCSG requirement information of E-UTRA target bands;
\( 2> \) else:
\( 3> \) consider itself not to be configured to provide the measurement gap and NCSG requirement information of E-UTRA target bands;
\( 1> \) if the RRCReconfiguration message includes the \( s / \)-Config DedicatedNR:
\( 2> \) perform the sidelink dedicated configuration procedure as specified in 5.3.5.14;
NOTE 0a: If the sl-ConfigDedicatedNR was received embedded within an E-UTRA RRCConnectionReconfiguration message, the UE does not build an NR RRCReconfigurationComplete message for the received \( s l \) Config DedicatedNR.
\( 1> \) if the RRCReconfiguration message includes the sl-L2RelayUEConfig:
\( 2> \) perform the L2 U2N Relay UE configuration procedure as specified in 5.3.5.15;
\( 1> \) if the RRCReconfiguration message includes the s/-L2RemoteUEConfig:
\( 2> \) perform the L2 U2N Remote UE configuration procedure as specified in 5.3.5.16;
\( 1> \) if the RRCReconfiguration message includes the dedicatedPagingDelivery:
\( 2> \) if the ue-Identity included in the PagingRecord in the Paging message matches the UE identity in \( s \) -Pagingldentity-RemoteUE in sl-PagingInfo-RemoteUE received in RemoteUEInformationSidelink message in accordance with 5.8.9.8.3:
\( 3> \) inititate the Uu Message transfer in sidelink as specified in 5.8.9.9;
\( 1> \) if the RRCReconfiguration message includes the sl-ConfigDedicatedEUTRA-Info:
2> perform related procedures for V2X sidelink communication in accordance with TS 36.331 [10], clause 5.3.10 and clause 5.5.2;
\( 1> \) if the RRCReconfiguration message includes the ul-GapFR2-Config:
\( 2> \) perform the FR2UL gap configuration procedure as specified in 5.3 .5 .13 c ;
\( 1> \) if the RRCReconfiguration message includes the musim-GapConfig:
\( 2> \) for each periodic musim-GapID included in the received musim-GapToReleaseList:
\( 3> \) release the MUSIM periodic gap associated to the musim-GapID from the musim-GapConfigList;

ETSI


--- Page 77  ---


3GPP TS 38.331 version 17.0.0 Release 17
76
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) for each periodic musim-GapID included in the received musim-GapToAddModList:
3> if an entry with the matching musim-GapID exists in the musim-GapConfigList:
\( 4> \) replace the entry with the value received for this musim-GapID;
\( 3> \) else:
4> add a new entry for this musim-GapID;
1> if the RRCReconfiguration message includes the appLayerMeasConfig:
\( 2> \) perform the application layer measurement configuration procedure as specified in 5.3.5.13d;
\( 1> \) set the content of the RRCReconfigurationComplete message as follows:
◇ if the RRCReconfiguration includes the masterCellGroup containing the reportUplinkTxDirectCurrent:
3> include the uplinkTxDirectCurrentList for each MCG serving cell with UL;
3> include uplinkDirectCurrentBWP-SUL for each MCG serving cell configured with SUL carrier, if any, within the uplinkTxDirectCurrentList;
\( 2> \) if the RRCReconfiguration includes the masterCellGroup containing the reportUplinkTxDirectCurrentTwoCarrier:

3> include in the uplinkTxDirectCurrentTwoCarrierList the list of uplink Tx DC locations for the configured intra-band uplink carrier aggregation in the MCG;
\( 2> \) if the RRCReconfiguration includes the secondaryCellGroup containing the reportUplinkTxDirectCurrent:
3> include the uplinkTxDirectCurrentList for each SCG serving cell with UL;
3> include uplinkDirectCurrentBWP-SUL for each SCG serving cell configured with SUL carrier, if any, within the uplinkTxDirectCurrentList;
\( 2> \) if the RRCReconfiguration includes the secondaryCellGroup containing the reportUplinkTxDirectCurrentTwoCarrier:

3> include in the uplinkTxDirectCurrentTwoCarrierList the list of uplink Tx DC locations for the configured intra-band uplink carrier aggregation in the SCG;

NOTE 0b:It is expected that the reportUplinkTxDirectCurrentTwoCarrier is only received either in masterCellGroup or in secondaryCellGroup but not both.
\( 2> \) if the RRCReconfiguration message includes the mrdc-SecondaryCellGroupConfig with mrdcSecondaryCellGroup set to eutra-SCG:

3> include in the eutra-SCG-Response the E-UTRA RRCConnectionReconfigurationComplete message in accordance with TS 36.331 [10] clause 5.3.5.3;
\( 2> \) if the RRCReconfiguration message includes the mrdc-SecondaryCellGroupConfig with mrdcSecondaryCellGroup set to nr-SCG:

3> include in the nr-SCG-Response the SCG RRCReconfigurationComplete message;
\( 3> \) if the RRCReconfiguration message is applied due to conditional reconfiguration execution:
\( 4> \) include in the selectedCondRRCReconfig the condReconfigld for the selected cell of conditional reconfiguration execution;
\( 2> \) if the RRCReconfiguration includes the reconfigurationWithSync in spCellConfig of an MCG:
3> if the UE has logged measurements available for NR and if the RPLMN is included in plmn-IdentityList stored in VarLogMeasReport:

4> if the sigLoggedMeasType in VarLogMeasReport is included:

ETSI


--- Page 78  ---


3GPP TS 38.331 version 17.0.0 Release 17
77
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) include the sigLogMeasConfigAvailable in the RRCReconfigurationComplete message and set it according to the following:
\( 6> \) if T330 timer is running:
\( 7> \) set sigLogMeasConfigAvailable to true in the RRCReconfigurationComplete message;
\( 6> \) else:
\( 7> \) set sigLogMeasConfigAvailable to false in the RRCReconfigurationComplete message;
\( 4> \) include the \( \log \) MeasAvailable in the RRCReconfiguration Complete message;
4 if Bluetooth measurement results are included in the logged measurements the UE has available for NR:
\( 5> \) include the logMeasAvailableBT in the RRCReconfigurationComplete message;
\( 4> \) if WLAN measurement results are included in the logged measurements the UE has available for NR:
\( 5> \) include the \( \log M e a s A v a i l a b l e W L A N \) in the RRCReconfiguration Complete message;
\( 3> \) if the sigLoggedMeasType in VarLogMeasReport is included:
4> if T330 timer is running:
\( 5> \) set sigLogMeasConfigAvailable to true in the RRCReconfigurationComplete message;
\( 4> \) else:
\( 5> \) if the UE has logged measurements available for NR:
\( 6> \) set sigLogMeasConfigAvailable to false in the RRCReconfiguration Complete message;
\( 3> \) if the UE has connection establishment failure or connection resume failure information available in VarConnEstFailReport or VarConnEstFailReportList and if the RPLMN is equal to plmn-Identity stored in VarConnEstFailReport or VarConnEstFailReportList:
\( 4> \) include connEstFaillnfoAvailable in the RRCReconfigurationComplete message;
\( 3> \) if the UE has radio link failure or handover failure information available in VarRLF-Report and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report; or
\( 3> \) if the UE has radio link failure or handover failure information available in VarRLF-Report of TS 36.331 [10] and if the UE is capable of cross-RAT RLF reporting and if the RPLMN is included in plmnIdentityList stored in VarRLF-Report of TS 36.331 [10]:
\( 4> \) include rff-InfoAvailable in the RRCReconfigurationComplete message;
\( 3> \) if the UE was configured with successHO-Config when connected to the source PCell; and
\( 3> \) if the applied RRCReconfiguration is not due to a conditional reconfiguration execution upon cell selection performed while timer T311 was running, as defined in 5.3.7.3:
\( 4> \) perform the actions for the successful handover report determination as specified in clause 5.7.10.6, upon successfully completing the Random Access procedure triggered for the reconfiguration WithSync in spCellConfig of the MCG;
\( 3> \) if the UE has successful handover information available in VarSuccessHO-Report and if the RPLMN is included in plmn-IdentityList stored in VarSuccessHO-Report:
\( 4> \) include successHO-InfoAvailable in the RRCReconfigurationComplete message;
\( 2> \) if the RRCReconfiguration message was received via SRB1, but not within mrdc-SecondaryCellGroup or EUTRA RRCConnectionReconfiguration or E-UTRA RRCConnectionResume:
\( 3> \) if the UE is configured to provide the measurement gap requirement information of NR target bands:

ETSI


--- Page 79  ---


3GPP TS 38.331 version 17.0.0 Release 17
78
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) if the RRCReconfiguration message includes the needForGapsConfigNR; or
\( 4> \) if the NeedForGapsInfoNR information is changed compared to last time the UE reported this information:
\( 5> \) include the NeedForGapsInfoNR and set the contents as follows:
6> include intraFreq-needForGap and set the gap requirement information of intra-frequency measurement for each NR serving cell;

6> if requestedTargetBandFilterNR is configured, for each supported NR band that is also included in requestedTargetBandFilterNR, include an entry in interFreq-needForGap and set the gap requirement information for that band; otherwise, include an entry in interFreqneedForGap and set the corresponding gap requirement information for each supported NR band;
\( 3> \) if the UE is configured to provide the measurement gap and NCSG requirement information of NR target bands:

4> if the RRCReconfiguration message includes the needForNCSG-ConfigNR; or
4> if the needForNCSG-InfoNR information is changed compared to last time the UE reported this information:
\( 5> \) include the NeedForNCSG-InfoNR and set the contents as follows:
6> include intraFreq-needForNCSG and set the gap and NCSG requirement information of intrafrequency measurement for each NR serving cell;

6> if requestedTargetBandFilterNCSG-NR is configured, for each supported NR band included in requestedTargetBandFilterNCSG-NR, include an entry in interFreq-needForNCSG and set the NCSG requirement information for that band; otherwise, include an entry for each supported NR band in interFreq-needForNCSG and set the corresponding NCSG requirement information;

3> if the UE is configured to provide the measurement gap and NCSG requirement information of E-UTRA target bands:
\( 4> \) if the RRCReconfiguration message includes the needForNCSG-ConfigEUTRA; or
\( 4> \) if the needForNCSG-InfoEUTRA information is changed compared to last time the UE reported this information:

5> include the NeedForNCSG-InfoEUTRA and set the contents as follows:
\( 6> \) if requestedTargetBandFilterNCSG-EUTRA is configured, for each supported E-UTRA band included in requestedTargetBandFitterNCSG-EUTRA, include an entry in needForNCSGEUTRA and set the NCSG requirement information for that band; otherwise, include an entry for each supported E-UTRA band in needForNCSG-EUTRA and set the corresponding NCSG requirement information;
\( 1> \) if the UE is configured with E-UTRA nr-SecondaryCellGroupConfig (UE in (NG)EN-DC):
\( 2> \) if the RRCReconfiguration message was received via E-UTRA SRB1 as specified in TS 36.331 [10]; or
\( 2> \) if the RRCReconfiguration message was received via E-UTRA RRC message RRCConnectionReconfiguration within MobilityFromNRCommand (handover from NR standalone to (NG)EN-DC);

3> if the RRCReconfiguration is applied due to a conditional reconfiguration execution for CPC which is configured via conditionalReconfiguration contained in nr-SecondaryCellGroupConfig specified in TS 36.331 [10]:

4> submit the RRCReconfigurationComplete message via the E-UTRA MCG embedded in E-UTRA RRC message ULInformation TransferMRDC as specified in TS 36.331 [10], clause 5.6.2a.

ETSI


--- Page 80  ---


3GPP TS 38.331 version 17.0.0 Release 17
79
ETSI TS 138331 V17.0.0 (2022-05)

3> else if the RRCReconfiguration message was included in E-UTRA RRCConnectionResume message:
4> submit the RRCReconfigurationComplete message via E-UTRA embedded in E-UTRA RRC message RRCConnectionResumeComplete as specified in TS 36.331 [10], clause 5.3.3.4a;
\( 3> \) else:
4> submit the RRCReconfigurationComplete via E-UTRA embedded in E-UTRA RRC message RRCConnectionReconfigurationComplete as specified in TS 36.331 [10], clause 5.3.5.3/5.3.5.4/5.4.2.3;

3> if the scg-State is not included in the E-UTRA RRCConnectionReconfiguration message containing the RRCReconfiguration message:
\( 4> \) if reconfigurationWithSync was included in spCellConfig of an SCG; or
4> if the SCG was deactivated before the reception of the E-UTRA RRC message containing the RRCReconfiguration message and lower layers consider that a Random Access procedure is needed for SCG activation:

5> initiate the Random Access procedure on the SpCell, as specified in TS 38.321 [3];
4> else:
\( 5> \) the procedure ends;
3> else:
4> the procedure ends;
\( 2> \) if the RRCReconfiguration message was received within \( n r \)-SecondaryCellGroupConfig in RRCConnectionReconfiguration message received via SRB3 within DLInformationTransferMRDC:

3> submit the RRCReconfigurationComplete via E-UTRA embedded in E-UTRA RRC message RRCConnectionReconfigurationComplete as specified in TS 36.331 [10], clause 5.3.5.3/5.3.5.4;

3> if reconfigurationWithSync was included in spCellConfig of an SCG:
\( 4> \) initiate the Random Access procedure on the SpCell, as specified in TS 38.321 [3];
3> else:
4> the procedure ends;
NOTE 1: The order the UE sends the RRCConnectionReconfigurationComplete message and performs the Random Access procedure towards the SCG is left to UE implementation.
\( 2> \) else (RRCReconfiguration was received via SRB3) but not within DLInformationTransferMRDC:
3> submit the RRCReconfigurationComplete message via SRB3 to lower layers for transmission using the new configuration;

NOTE 2: In (NG)EN-DC and NR-DC, in the case RRCReconfiguration is received via SRB1 or within DLInformationTransferMRDC via SRB3, the random access is triggered by RRC layer itself as there is not necessarily other UL transmission. In the case RRCReconfiguration is received via SRB3 but not within DLInformationTransferMRDC, the random access is triggered by the MAC layer due to arrival of RRCReconfigurationComplete-

1> else if the RRCReconfiguration message was received via SRB1 within the nr-SCG within mrdcSecondaryCellGroup (UE in NR-DC, mrdc-SecondaryCellGroup was received in RRCReconfiguration or RRCResume via SRB1):
\( 2> \) if the RRCReconfiguration is applied due to a conditional reconfiguration execution for CPC which is configured via conditionalReconfiguration contained in \( n r \)-SCG within mrdc-SecondaryCellGroup:

3> submit the RRCReconfigurationComplete message via the NR MCG embedded in NR RRC message ULInformationTransferMRDC as specified in clause 5.7.2a_3.

ETSI


--- Page 81  ---


3GPP TS 38.331 version 17.0.0 Release 17
80
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the scg-State is not included in the RRCReconfiguration or RRCResume message containing the RRCReconfiguration message:

3> if reconfigurationWithSync was included in spCellConfig in nr-SCG; or
3> if the SCG was deactivated before the reception of the NR RRC message containing the RRCReconfiguration message and lower layers consider that a Random Access procedure is needed for SCG activation:

4> initiate the Random Access procedure on the PSCell, as specified in TS 38.321 [3];
\( 3> \) else:
4> the procedure ends;
\( 2> \) else
\( 3> \) the procedure ends;
NOTE 2a: The order in which the UE sends the RRCReconfigurationComplete message and performs the Random Access procedure towards the SCG is left to UE implementation.
\( 1> \) else if the RRCReconfiguration message was received via SRB3 (UE in NR-DC):
2 if the RRCReconfiguration message was received within DLInformationTransferMRDC:
3> if the RRCReconfiguration message was received within the nr-SCG within mrdc-SecondaryCellGroup (NR SCG RRC Reconfiguration):

4> if reconfigurationWithSync was included in spCellConfig in nr-SCG:
\( 5> \) initiate the Random Access procedure on the PSCell, as specified in TS 38.321 [3];
4> else:
\( 5> \) the procedure ends;
\( 3> \) else:
4> submit the RRCReconfigurationComplete message via SRB1 to lower layers for transmission using the new configuration;
\( 2> \) else:
3> submit the RRCReconfigurationComplete message via SRB3 to lower layers for transmission using the new configuration;

1> else (RRCReconfiguration was received via SRB1):
\( 2> \) submit the RRCReconfigurationComplete message via SRB1 to lower layers for transmission using the new configuration;
\( 2> \) if this is the first RRCReconfiguration message after successful completion of the RRC re-establishment procedure:

3> resume SRB2, SRB4, and DRBs, multicast MRB, and BH RLC channels for IAB-MT, that are suspended;

1> if reconfiguration WithSync was included in spCellConfig of an MCG or SCG, and when MAC of an NR cell group successfully completes a Random Access procedure triggered above:
\( 2> \) stop timer T304 for that cell group;
\( 2> \) stop timer T310 for source SpCell if running;
\( 2> \) apply the parts of the CSI reporting configuration, the scheduling request configuration and the sounding RS configuration that do not require the UE to know the SFN of the respective target SpCell, if any;

ETSI


--- Page 82  ---


3GPP TS 38.331 version 17.0.0 Release 17
81
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) apply the parts of the measurement and the radio resource configuration that require the UE to know the SFN of the respective target SpCell (e.g. measurement gaps, periodic CQI reporting, scheduling request configuration, sounding RS configuration), if any, upon acquiring the SFN of that target SpCell;
\( 2> \) for each DRB configured as DAPS bearer, request uplink data switching to the PDCP entity, as specified in TS 38.323 [5];
\( 2> \) if the reconfiguration WithSync was included in spCellConfig of an MCG:
\( 3> \) if T390 is running:
4 stop timer T390 for all access categories;
4> perform the actions as specified in 5.3.14.4.
\( 3> \) if T350 is running:
\( 4> \) stop timer T 350 ;
\( 3> \) if RRCReconfiguration does not include dedicatedSIB1-Delivery and
\( 3> \) if the active downlink BWP, which is indicated by the firstActiveDownlinkBWP-Id for the target SpCell of the MCG, has a common search space configured by searchSpaceSIB1:
\( 4> \) acquire the SIB1, which is scheduled as specified in TS 38.213 [13], of the target SpCell of the MCG;
4 upon acquiring SIB1, perform the actions specified in clause 5.2.2.4.2;
\( 2> \) if the reconfigurationWithSync was included in spCellConfig of an MCG; or
\( 2> \) if the reconfiguration WithSync was included in spCellConfig of an SCG and the CPA or CPC was configured
\( 3> \) remove all the entries within VarConditionalReconfig, if any;
\( 3> \) remove all the entries within VarConditionalReconfiguration as specified in TS 36.331 [10], clause 5.3.5.9.6, if any;
\( 3> \) for each measld of the source SpCell configuration, if the associated reportConfig has a reportType set to condTriggerConfig:
\( 4> \) for the associated reportConfigld:
\( 5> \) remove the entry with the matching reportConfigld from the reportConfigList within the VarMeasConfig;
\( 4> \) if the associated measObjectld is only associated to a reportConfig with reportType set to condTriggerConfig:
\( 5> \) remove the entry with the matching measObjectld from the measObjectList within the VarMeasConfig;

4> remove the entry with the matching measld from the measldList within the VarMeasConfig;
\( 2> \) if reconfigurationWithSync was included in masterCellGroup or secondaryCellGroup:
\( 3> \) if the UE initiated transmission of a UEAssistancelnformation message for the corresponding cell group during the last 1 second, and the UE is still configured to provide the concerned UE assistance information for the corresponding cell group; or
\( 3> \) if the RRCReconfiguration message is applied due to a conditional reconfiguration execution, and the UE is configured to provide UE assistance information for the corresponding cell group, and the UE has initiated transmission of a UEAssistancelnformation message for the corresponding cell group since it was configured to do so in accordance with 5.7.4.2:
\( 4> \) initiate transmission of a UEAssistanceInformation message for the corresponding cell group in accordance with clause 5.7.4.3 to provide the concerned UE assistance information;

ETSI


--- Page 83  ---


3GPP TS 38.331 version 17.0.0 Release 17
82
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) start or restart the prohibit timer (if exists) associated with the concerned UE assistance information with the timer value set to the value in corresponding configuration;
\( 3> \) if SIB12 is provided by the target PCell; and the UE initiated transmission of a SidelinkUEInformationNR message indicating a change of NR sidelink communication related parameters relevant in target PCell (i.e. change of sl-RxInterestedFreqList or sl-TxResourceReqList) during the last 1 second preceding reception of the RRCReconfiguration message including reconfigurationWithSync in spCellConfig of an MCG; or
\( 3> \) if the RRCReconfiguration message is applied due to a conditional reconfiguration execution and the UE is capable of NR sidelink communication and SIB12 is provided by the target PCell, and the UE has initiated transmission of a SidelinkUEInformationNR message since it was configured to do so in accordance with 5.8.3.2:
\( 4> \) initiate transmission of the SidelinkUEInformationNR message in accordance with 5.8.3.3;
\( 2> \) the procedure ends.
NOTE 3: The UE is only required to acquire broadcasted SIBI if the UE can acquire it without disrupting unicast or MBS multicast data reception, i.e the broadcast and unicast/MBS multicast beams are quasi co-located.

NOTE 4: The UE sets the content of UEAssistancelnformation according to latest configuration (ie the configuration after applying the RRCReconfiguration message) and latest UE preference. The UE may include more than the concerned UE assistance information within the UEAssistanceInformation according to 5.7.4.2. Therefore, the content of UEAssistancelnformation message might not be the same as the content of the previous UEAssistancelnformation message.
5.3.5.4 Secondary cell group release

The UE shall:
\( 1> \) as a result of SCG release triggered by E-UTRA (i.e (NG)EN-DC case) or NR (i.e. NR-DC case):
\( 2> \) reset SCG MAC, if configured;
\( 2> \) for each RLC bearer that is part of the SCG configuration:
\( 3> \) perform RLC bearer release procedure as specified in 5.3.5.5.3;
\( 2> \) for each BH RLC channel that is part of the SCG configuration:
\( 3> \) perform BH RLC channel release procedure as specified in 5.3 .5 .5 .10 ;
\( 2> \) release the SCG configuration;
2 if CPC was configured,
\( 3> \) remove all the entries within VarConditionalReconfig, if any;
\( 2> \) stop timer T310 for the corresponding SpCell, if running;
\( 2> \) stop timer T312 for the corresponding SpCell, if running;
\( 2> \) stop timer T304 for the corresponding SpCell, if running.
NOTE: Release of cell group means only release of the lower layer configuration of the cell group but the RadioBearerConfig may not be released.
5.3.5.5 Cell Group configuration
5.3.5.5.1 General

The network configures the UE with Master Cell Group (MCG), and zero or one Secondary Cell Group (SCG). In (NG)EN-DC, the MCG is configured as specified in TS 36.331 [10], and for NE-DC, the SCG is configured as

ETSI


--- Page 84  ---


3GPP TS 38.331 version 17.0.0 Release 17
83
ETSI TS 138331 V17.0.0 (2022-05)

specified in TS 36.331 [10]. The network provides the configuration parameters for a cell group in the CellGroupConfig IE.

The UE performs the following actions based on a received CellGroupConfig IE:
\( 1> \) if the CellGroupConfig contains the spCellConfig with reconfigurationWithSync:
\( 2> \) perform Reconfiguration with sync according to 5.3.5.5.2;
\( 2> \) resume all suspended radio bearers except the SRBs for the source cell group, and resume SCG transmission for all radio bearers, and resume BH RLC channels and resume SCG transmission for BH RLC channels for [AB-MT, if suspended;

NOTE: If the SCG is deactivated, resuming SCG transmission for all radio bearers does not imply that PDCP PDUs can be transmitted or received on SCG RLC bearers.
\( 1> \) if the CellGroupConfig contains the rlc-BearerToReleaseList or rlc-BearerToReleaseListExt:
\( 2> \) perform RLC bearer release as specified in 5.3.5.5.3;
\( 1> \) if the CellGroupConfig contains the rlc-BearerToAddModList:
\( 2> \) perform the RLC bearer addition/modification as specified in 5.3.5.5.4;
\( 1> \) if the CellGroupConfig contains the mac-CellGroupConfig:
\( 2> \) configure the MAC entity of this cell group as specified in 5.3.5.5.5;
\( 1> \) if the CellGroupConfig contains the sCellToReleaseList:
\( 2> \) perform SCell release as specified in 5.3.5.5.8;
\( 1> \) if the CellGroupConfig contains the spCellConfig:
\( 2> \) configure the SpCell as specified in 5.3.5.5.7;
\( 1> \) if the CellGroupConfig contains the sCellToAddModList:
\( 2> \) perform SCell addition/modification as specified in 5.3.5.5.9;
\( 1> \) if the CellGroupConfig contains the bh-RLC-ChannelToReleaseList:
\( 2> \) perform BH RLC channel release as specified in 5.3.5.5.10;
\( 1> \) if the CellGroupConfig contains the bh-RLC-ChannelToAddModList:
\( 2> \) perform the BH RLC channel addition/modification as specified in 5.3.5.5.11;
\( 1> \) if the CellGroupConfig contains the uu-Relay-RLC-ChannelToReleaseList:
\( 2> \) perform Uu Relay RLC channel release as specified in 5.3.5.5.12;
\( 1> \) if the CellGroupConfig contains the uu-Relay-RLC-ChannelToAddModList:
\( 2> \) perform the Uu Relay RLC channel addition/modification as specified in 5.3.5.5.13;
5.3.5.5.2 Reconfiguration with sync

The UE shall perform the following actions to execute a reconfiguration with sync.
\( 1> \) if the AS security is not activated, perform the actions upon going to RRC_IDLE as specified in 5.3 .11 with the release cause 'other' upon which the procedure ends;
\( 1> \) if no DAPS bearer is configured:
\( 2> \) stop timer T310 for the corresponding SpCell, if running;
\( 1> \) if this procedure is executed for the MCG:

ETSI


--- Page 85  ---


3GPP TS 38.331 version 17.0.0 Release 17
84
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if timer T316 is running;
\( 3> \) stop timer T316;
\( 3> \) clear the information included in VarRLF-Report, if any;
\( 2> \) resume MCG transmission, if suspended.
\( 1> \) stop timer T312 for the corresponding SpCell, if running;
1> if sl-PathSwitchConfig is included:
\( 2> \) consider the target L2 U2N Relay UE to be the one indicated by the targetRelayUEIdentity in the \( s l \) PathSwitchConfig;
\( 2> \) start timer T420 for the corresponding target L2 U2N Relay UE with the timer value set to T420, as included in the sl-PathSwitchConfig;
\( 2> \) apply the value of the newUE-Identity as the C-RNTI;
2> perform the PC5-RRC connection establishment with the target L2 U2N Relay UE indicated by the targetRelayUEIdentity, if needed;
\( 2> \) apply the default configuration of SL-RLC1 as defined in 9.2.4 for SRB1;
1> else (sl-PathSwitchConfig is not included):
\( 2> \) if this procedure is executed for the MCG or if this procedure is executed for an SCG not indicated as deactivated in the E-UTRA or NR RRC message in which the RRCReconfiguration message is embedded:

3> start timer T304 for the corresponding SpCell with the timer value set to \( t 304 \), as included in the reconfigurationWithSync;
\( 2> \) if the frequencyInfoDL is included:
3> consider the target SpCell to be one on the SSB frequency indicated by the frequencyInfoDL with a physical cell identity indicated by the physCellld;
\( 2> \) else:
3> consider the target SpCell to be one on the SSB frequency of the source SpCell with a physical cell identity indicated by the physCellld;
\( 2> \) start synchronising to the DL of the target SpCell;
\( 2> \) apply the specified BCCH configuration defined in 9.1.1.1 for the target SpCell;
2> acquire the MIB of the target SpCell, which is scheduled as specified in TS 38.213 [13];
NOTE 1: The UE should perform the reconfiguration with sync as soon as possible following the reception of the RRC message triggering the reconfiguration with sync, which could be before confirming successful reception (HARQ and ARQ) of this message.

NOTE 2: The UE may omit reading the \( M I B \) if the UE already has the required timing information, or the timing information is not needed for random access.

NOTE 2a: A UE with DAPS bearer does not monitor for system information updates in the source PCell.
\( 2> \) If any DAPS bearer is configured:
\( 3> \) create a MAC entity for the target cell group with the same configuration as the MAC entity for the source cell group;

3> for each DAPS bearer:
4> establish an RLC entity or entities for the target cell group, with the same configurations as for the source cell group;

ETSI


--- Page 86  ---


3GPP TS 38.331 version 17.0.0 Release 17
85
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) establish the logical channel for the target cell group, with the same configurations as for the source cell group;

NOTE 2b: In order to understand if a DAPS bearer is configured, the UE needs to check the presence of the field daps-Config within the RadioBearerConfig IE received in radioBearerConfig or radioBearerConfig2.
\( 3> \) for each SRB:
\( 4> \) establish an RLC entity for the target cell group, with the same configurations as for the source cell group;
\( 4> \) establish the logical channel for the target cell group, with the same configurations as for the source cell group;
\( 3> \) suspend SRBs for the source cell group;
NOTE 3: Void
\( 3> \) apply the value of the newUE-Identity as the C-RNTI in the target cell group;
\( 3> \) configure lower layers for the target SpCell in accordance with the received spCellConfigCommon;
\( 3> \) configure lower layers for the target SpCell in accordance with any additional fields, not covered in the previous, if included in the received reconfiguration WithSync.
\( 2> \) else:
\( 3> \) reset the MAC entity of this cell group;
\( 3> \) consider the SCell(s) of this cell group, if configured, that are not included in the SCellToAddModList in the RRCReconfiguration message, to be in deactivated state;
\( 3> \) apply the value of the newUE-Identity as the C-RNTI for this cell group;
\( 3> \) configure lower layers in accordance with the received spCellConfigCommon;
\( 3> \) configure lower layers in accordance with any additional fields, not covered in the previous, if included in the received reconfiguration WithSync.
\( 2> \) if the UE is connected with a L2 U2N Relay UE (i.e. the UE is a L2 U2N Remote UE at the source side):
\( 3> \) perform the PC5-RRC connection release as specified in 5.8.9.5.
Upon L2 U2N Relay UE receiving reconfiguration WithSync, it either triggers PC5-S release or sends Notification message to the connected L2 U2N Remote UE(s) in accordance with 58.9.10.
5.3.5.5.3 RLC bearer release

The UE shall:
\( 1> \) for each logicalChannelldentity/LogicalChannelldentityExt value included in the rlc-BearerToReleaseList/rlcBearerToReleaseListExt that is part of the current UE configuration within the same cell group (LCH release); or
\( 1> \) for each logicalChannelldentity value that is to be released as the result of an SCG release according to 5.3.5.4:
\( 2> \) release the RLC entity or entities as specified in TS 38.322 [4], clause 5.1.3;
2> release the corresponding logical channel.
5.3.5.5.4 RLC bearer addition/modification

For each \( R L C \)-BearerConfig received in the rlc-BearerToAddModList [E the UE shall:
\( 1> \) if the UE's current configuration contains an RLC bearer with the received logicalChannelldentity/LogicalChannelldentityExt within the same cell group:

ETSI


--- Page 87  ---


3GPP TS 38.331 version 17.0.0 Release 17
86
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the RLC bearer is associated with an DAPS bearer, or
\( 2> \) if any DAPS bearer is configured and the RLC bearer is associated with an SRB:
\( 3> \) reconfigure the RLC entity or entities for the target cell group in accordance with the received rlc-Config;
3> reconfigure the logical channel for the target cell group in accordance with the received macLogicalChannelConfig;
\( 2> \) else:
\( 3> \) if reestablish \( R L C \) is received:
4> re-establish the RLC entity as specified in TS 38.322 [4];
\( 3> \) reconfigure the RLC entity or entities in accordance with the received rlc-Config;
\( 3> \) reconfigure the logical channel in accordance with the received mac-LogicalChannelConfig;
NOTE 1: The network does not re-associate an already configured logical channel with another radio bearer. Hence servedRadioBearer or servedMBS-RadioBearer is not present in this case.

NOTE 2: In DAPS handover, the UE may perform RLC entity re-establishment (if reestablishRLC is set) for an RLC bearer associated with a non-DAPS bearer when indication of successful completion of random access towards target cell is received from lower layers as specified in TS 38.321 [3].

1> else (a logical channel with the given logicalChannelldentity/LogicalChannelldentityExt is not configured within the same cell group, including the case when full configuration option is used):
\( 2> \) if the servedRadioBearer associates the logical channel with an SRB and ric-Config is not included:
3> establish an RLC entity in accordance with the default configuration defined in 9.2 for the corresponding SRB;
\( 2> \) else:
\( 3> \) establish an RLC entity in accordance with the received \( r l c \)-Config;
\( 2> \) if the servedRadioBearer associates the logical channel with an SRB and if mac-LogicalChannelConfig is not included:

3> configure this MAC entity with a logical channel in accordance to the default configuration defined in 9.2 for the corresponding SRB;
\( 2> \) else:
\( 3> \) configure this MAC entity with a logical channel in accordance to the received macLogicalChannelConfig;
\( 2> \) associate this logical channel with the PDCP entity identified by servedRadioBearer or servedMBSRadioBearer.
5.3.5.5.5 MAC entity configuration

The UE shall:
\( 1> \) if SCG MAC is not part of the current UE configuration (i.e. SCG establishment):
\( 2> \) create an SCG MAC entity;
\( 1> \) if any DAPS bearer is configured:
\( 2> \) reconfigure the MAC main configuration for the target cell group in accordance with the received macCellGroupConfig excluding tag-ToReleaseList and tag-ToAddModList;

1> else:

ETSI


--- Page 88  ---


3GPP TS 38.331 version 17.0.0 Release 17
87
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) reconfigure the MAC main configuration of the cell group in accordance with the received macCellGroupConfig excluding tag-ToReleaseList and tag-ToAddModList;
\( 1> \) if the received mac-CellGroupConfig includes the tag-ToReleaseList:
\( 2> \) for each \( T A G-I d \) value included in the tag-ToReleaseList that is part of the current UE configuration:
\( 3> \) release the TAG indicated by TAG-Id;
\( 1> \) if the received mac-CellGroupConfig includes the tag-ToAddModList:
⇒ for each tag-Id value included in tag-ToAddModList that is not part of the current UE configuration (TAG addition):
\( 3> \) add the TAG, corresponding to the \( t a g-I d \), in accordance with the received timeAlignmentTimer;
\( 2> \) for each \( t a g \)-Id value included in tag-ToAddModList that is part of the current UE configuration (TAG modification):
\( 3> \) reconfigure the TAG, corresponding to the \( t a g-I d \), in accordance with the received timeAlignmentTimer.
5.3.5.5.6 RLF Timers \& Constants configuration

The UE shall:
\( 1> \) if the received rff-TimersAndConstants is set to release:
\( 2> \) if any DAPS bearer is configured:
\( 3> \) use values for timers \( \mathrm{T} 301, \mathrm{~T} 310, \mathrm{~T} 311 \) and constants \( \mathrm{N} 310, \mathrm{~N} 311 \) for the target cell group, as included in ue-TimersAndConstants received in SIBI;
\( 2> \) else:
\( 3> \) use values for timers \( \mathrm{T} 301, \mathrm{~T} 310, \mathrm{~T} 311 \) and constants \( \mathrm{N} 310, \mathrm{~N} 311 \), as included in ueTimersAndConstants received in SIB1;

1> else:
\( 2> \) if any DAPS bearer is configured:
\( 3> \) configure the value of timers and constants for the target cell group in accordance with received \( n f \) TimersAndConstants;
\( 2> \) else:
\( 3> \) (re-)configure the value of timers and constants in accordance with received Iff-TimersAndConstants;
\( 3> \) stop timer T310 for this cell group, if running;
\( 3> \) stop timer T312 for this cell group, if running;
3> reset the counters N310 and N311.
5.3.5.5.7 SpCell Configuration

The UE shall:
\( 1> \) if the UE is connected with a L2 U2N Relay UE via the PC5-RRC connection (i.e the UE is a L2 U2N Remote UE):
\( 2> \) use values for timers T300, T301 and T319 as included in ue-TimersAndConstants-RemoteUE received in SIBl;
\( 2> \) use value for timers T311, as included in ue-TimersAndConstants received in SIB1;
1> else

ETSI


--- Page 89  ---


3GPP TS 38.331 version 17.0.0 Release 17
88
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the SpCellConfig contains the rif-TimersAndConstants:
\( 3> \) configure the RLF timers and constants for this cell group as specified in 5.3.5.5.6;
\( 2> \) else if \( n f \)-TimersAndConstants is not configured for this cell group:
\( 3> \) if any DAPS bearer is configured:
4> use values for timers T301, T310, T311 and constants N310, N311 for the target cell group, as included in ue-TimersAndConstants received in SIB1;

3> else
4> use values for timers T301, T310, T311 and constants N310, N311, as included in ueTimersAndConstants received in SIB1;
\( 2> \) if the SpCellConfig contains spCellConfigDedicated:
\( 3> \) configure the SpCell in accordance with the spCellConfigDedicated;
\( 3> \) consider the bandwidth part indicated in firstActiveUplinkBWP-Id if configured to be the active uplink bandwidth part;
\( 3> \) consider the bandwidth part indicated in firstActiveDownlinkBWP-Id if configured to be the active downlink bandwidth part or the bandwidth part for Radio Link Monitoring, Beam Failure Detection and measurements if the SpCellConfig is included in an RRCReconfiguration message contained in an NR or E-UTRA RRC message indicating that the SCG is deactivated;

3> if any of the reference signal(s) that are used for radio link monitoring are reconfigured by the received spCellConfigDedicated:

4> stop timer T310 for the corresponding SpCell, if running;
4> stop timer T312 for the corresponding SpCell, if running;
4> reset the counters N310 and N311.
\( 1> \) if the SpCellConfig contains the lowMobilityEvaluationConnected:
\( 2> \) the UE may perform the evaluation of the low mobility criterion for this cell group as specified in 5.7.13.1;
\( 1> \) if the SpCellConfig contains the goodServingCellEvaluationRLM:
\( 2> \) the UE may perform the evaluation of the good serving cell quality criterion for this cell group as specified in 5.7.13.2;
\( 1> \) if the SpCellConfig contains the goodServingCellEvaluationBFD:
\( 2> \) the UE may perform the evaluation of the good serving cell quality criterion for this serving cell as specified in 5.7.13.2;
5.3.5.5.8 SCell Release

The UE shall:
1> if the release is triggered by reception of the sCellToReleaseList:
⊗ for each sCellIndex value included in the sCellToReleaseList:
\( 3> \) if the current UE configuration includes an SCell with value sCellIndex:
4> release the SCell.
5.3.5.5.9 SCell Addition/Modification

The UE shall:

ETSI


--- Page 90  ---


3GPP TS 38.331 version 17.0.0 Release 17
89
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) for each sCellIndex value included in the sCellToAddModList that is not part of the current UE configuration (SCell addition):
\( 2> \) add the SCell, corresponding to the sCelllndex, in accordance with the sCellConfigCommon and sCellConfigDedicated;
\( 2> \) if the sCellState is included:
\( 3> \) configure lower layers to consider the SCell to be in activated state;
\( 2> \) else:
\( 3> \) configure lower layers to consider the SCell to be in deactivated state;
\( 2> \) for each measld included in the measIdList within VarMeasConfig:
\( 3> \) if SCells are not applicable for the associated measurement; and
\( 3> \) if the concerned SCell is included in cellsTriggeredList defined within the VarMeasReportList for this measld:

4 remove the concerned SCell from cellsTriggeredList defined within the VarMeasReportList for this measld;
\( 2> \) if the SCellConfig contains the goodServingCellEvaluationBFD:
\( 3> \) the UE may perform the evaluation of the good serving cell quality criterion for this serving cell as specified in 5.7.13.2.
\( 1> \) for each sCellIndex value included in the sCellToAddModList that is part of the current UE configuration (SCell modification):
\( 2> \) modify the SCell configuration in accordance with the sCellConfigDedicated;
\( 2> \) if the sCellToAddModList was received in an RRCReconfiguration message including reconfiguration WithSync, or received in an RRCResume message, or received in an RRCReconfiguration message including reconfiguration WithSync embedded in an RRCResume message or embedded in an RRCReconfiguration message or embedded in an E-UTRA RRCConnectionReconfiguration message or embedded in an E-UTRA RRCConnectionResume message:
\( 3> \) if the sCellState is included:
\( 4> \) configure lower layers to consider the SCell to be in activated state;
\( 3> \) else:
\( 4> \) configure lower layers to consider the SCell to be in deactivated state.
\( 2> \) if the SCellConfig contains the goodServingCellEvaluationBFD:
\( 3> \) the UE may perform the evaluation of the good serving cell quality criterion for this serving cell as specified in 5.7.13.2.
5.3.5.5.10 BH RLC channel release

The [AB-node shall:
\( 1> \) for each BH-RLC-ChannellD value included in the bh-RLC-ChannelToReleaseList that is part of the current [AB-node configuration within the same cell group (LCH release); or
\( 1> \) for each \( B H \)-RLC-ChannellD value that is to be released as the result of an SCG release according to 5.3.5.4:
\( 2> \) release the RLC entity or entities as specified in TS 38.322 [4], clause 5.1.3;
\( 2> \) release the corresponding logical channel.

ETSI


--- Page 91  ---


3GPP TS 38.331 version 17.0.0 Release 17
90
ETSI TS 138331 V17.0.0 (2022-05)
5.3.5.5.11 BH RLC channel addition/modification

For each BH-RLC-ChannelConfig received in the bh-RLC-ChannelToAddModList IE the IAB-node shall:
\( 1> \) if the current configuration contains a BH RLC Channel with the received \( b h-R L C \)-ChannellD within the same cell group:
\( 2> \) if reestablishRLC is received:
3> re-establish the RLC entity as specified in TS 38.322 [4];
\( 2> \) reconfigure the RLC entity or entities in accordance with the received rlc-Config;
\( 2> \) reconfigure the logical channel in accordance with the received mac-LogicalChannelConfig;
\( 1> \) else (a backhaul logical channel with the given \( B H-R L C \)-ChannellD was not configured before within the same cell group):
\( 2> \) establish an RLC entity in accordance with the received rlc-Config;
\( 2> \) configure this MAC entity with a logical channel in accordance to the received mac-LogicalChannelConfig-
5.3.5.5.12 Uu Relay RLC channel release

The L2 U2N Relay UE shall:
1> for each Uu-Relay-RLC-ChannellD value included in the uu-Relay-RLC-ChannelToReleaseList that is part of the current configuration within the same cell group (LCH release):
\( 2> \) release the RLC entity as specified in TS 38.322 [4], clause 5.1.3;
\( 2> \) release the corresponding logical channel.
5.3.5.5.13 Uu Relay RLC channel addition/modification

For each Uu-Relay-RLC-ChannelConfig received in the Uu-Relay-RLC-ChannelToAddModList IE the L2 U2N Relay UE shall:
\( 1> \) if the current configuration contains a Uu Relay RLC channel with the received \( u u- \) Relay-RLC-ChannellD within the same cell group:
\( 2> \) if reestablishRLC is received:
3> re-establish the RLC entity as specified in TS 38.322 [4];
\( 2> \) reconfigure the RLC entity in accordance with the received \( r / c \)-Config;
\( 2> \) reconfigure the logical channel in accordance with the received mac-LogicalChannelConfig;
1> else (a logical channel with the given Uu-Relay-RLC-ChannellD was not configured before within the same cell group):
\( 2> \) establish an RLC entity in accordance with the received rlc-Config;
\( 2> \) configure this MAC entity with a logical channel in accordance to the received mac-LogicalChannelConfig-
5.3.5.6 Radio Bearer configuration
5.3.5.6.1 General

The UE shall perform the following actions based on a received RadioBearerConfig IE:
\( 1> \) if the RadioBearerConfig includes the srb3-ToRelease or srb4-ToRelease:
\( 2> \) perform the SRB release as specified in 5.3.5.6.2;

ETSI


--- Page 92  ---


3GPP TS 38.331 version 17.0.0 Release 17
91
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if the RadioBearerConfig includes the \( s r b \)-ToAddModList or if any DAPS bearer is configured:
\( 2> \) perform the SRB addition or reconfiguration as specified in 5.3.5.6.3;
\( 1> \) if the RadioBearerConfig includes the drb-ToReleaseList:
\( 2> \) perform DRB release as specified in 5.3.5.6.4;
\( 1> \) if the RadioBearerConfig includes the drb-ToAddModList:
\( 2> \) perform DRB addition or reconfiguration as specified in 5.3.5.6.5;
\( 1> \) if the RadioBearerConfig includes the mrb-ToReleaseList:
\( 2> \) perform multicast MRB release as specified in 5.3.5.6.6;
\( 1> \) if the RadioBearerConfig includes the mrb-ToAddModList:
\( 2> \) perform multicast MRB addition or reconfiguration as specified in 5.3.5.6.7;
\( 1> \) release all SDAP entities, if any, that have no associated DRB as specified in TS 37.324 [24] clause 5.1.2, and indicate the release of the user plane resources for PDU Sessions associated with the released SDAP entities to upper layers;
\( 1> \) release all SDAP entities that have no associated multicast MRB , and indicate the release of user plane resources for these MBS multicast sessions to upper layers.
5.3.5.6.2 SRB release

The UE shall:
\( 1> \) release the PDCP entity and the srb-Identity of the SRB3 or SRB4.
5.3.5.6.3 SRB addition/modification

The UE shall:
\( 1> \) If any DAPS bearer is configured, for each SRB:
2> establish a PDCP entity for the target cell group as specified in TS 38.323 [5], with the same configuration as the PDCP entity for the source cell group;
\( 2> \) if the masterKeyUpdate is received:
\( 3> \) configure the PDCP entity with the security algorithms according to securityConfig and apply the keys ( \( \mathrm{K}_{\mathrm{RRC} \text { enc }} \) and \( \mathrm{K}_{\mathrm{RRC} \text { mt }} \) ) associated with the master key ( \( \mathrm{K}_{\mathrm{gNB}} \) );
\( 2> \) else:
\( 3> \) configure the PDCP entity for the target cell group with state variables continuation as specified in TS 38.323 [5], and with the same security configuration as the PDCP entity for the source cell group;
\( 1> \) for each \( s r b \)-Identity value included in the srb-ToAddModList that is not part of the current UE configuration (SRB establishment or reconfiguration from E-UTRA PDCP to NR PDCP):
\( 2> \) establish a PDCP entity;
\( 2> \) if AS security has been activated:
\( 3> \) if target RAT of handover is E-UTRA/5GC; or
\( 3> \) if the UE is connected to E-UTRA/5GC:
4 if the UE is capable of E-UTRA/5GC, but not capable of NGEN-DC:
\( 5> \) configure the PDCP entity with the security algorithms and keys ( \( \mathrm{K}_{\mathrm{RRCenc}} \) and \( \mathrm{K}_{\mathrm{RRCint}} \) ) configured/derived as specified in TS 36.331 [10];

ETSI


--- Page 93  ---


3GPP TS 38.331 version 17.0.0 Release 17
92
ETSI TS 138331 V17.0.0 (2022-05)

4> else (i.e., UE capable of NGEN-DC):
\( 5> \) configure the PDCP entity with the security algorithms according to securityConfig and apply the keys ( \( \mathrm{K}_{\text {RRCenc }} \) and \( \mathrm{K}_{\text {RRC int }} \) ) associated with the master key ( \( \mathrm{K}_{\text {eNB }} \) ) or secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ) as indicated in keyToUse, if applicable;
\( 3> \) else (i.e., UE connected to NR or UE connected to E-UTRA/EPC):
\( 4> \) configure the PDCP entity with the security algorithms according to securityConfig and apply the keys ( \( \mathrm{K}_{\mathrm{RRCenc}} \) and \( \mathrm{K}_{\mathrm{RRCint}} \) ) associated with the master key ( \( \mathrm{K}_{\mathrm{eNB}} / \mathrm{K}_{\mathrm{gNB}} \) ) or secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ) as indicated in keyToUse, if applicable;
\( 2> \) if the current UE configuration as configured by E-UTRA in TS 36.331 [10] includes an SRB identified with the same srb-Identity value:
\( 3> \) associate the E-UTRA RLC entity and DCCH of this SRB with the NR PDCP entity;
\( 3> \) release the E-UTRA PDCP entity of this SRB;
\( 2> \) if the pdcp-Config is included:
\( 3> \) configure the PDCP entity in accordance with the received pdcp-Config;
\( 2> \) else:
\( 3> \) configure the PDCP entity in accordance with the default configuration defined in 9.2.1 for the corresponding SRB;

1> if any DAPS bearer is configured, for each srb-Identity value included in the srb-ToAddModList that is part of the current UE configuration:
\( 2> \) if the pdcp-Config is included:
\( 3> \) reconfigure the PDCP entity for the target cell group in accordance with the received pdcp-Config;
\( 1> \) else, for each srb-Identity value included in the srb-ToAddModList that is part of the current UE configuration:
\( 2> \) if the reestablishPDCP is set:
\( 3> \) if target RAT of handover is E-UTRA/5GC; or
3> if the UE is connected to E-UTRA/5GC:
4 - if the UE is capable of E-UTRA/5GC, but not capable of NGEN-DC:
\( 5> \) configure the PDCP entity to apply the integrity protection algorithm and \( \mathrm{K}_{\text {RRCmt }} \) key configured/derived as specified in TS 36.331 [10], i.e. the integrity protection configuration shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;
\( 5> \) configure the PDCP entity to apply the ciphering algorithm and \( \mathrm{K}_{\mathrm{RRC} \text { enc }} \) key configured/derived as specified in TS 36.331 [10], i.e. the ciphering configuration shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;

4> else (i.e., a UE capable of NGEN-DC):
\( 5> \) configure the PDCP entity to apply the integrity protection algorithm and \( \mathrm{K}_{\mathrm{RRC} \text { mt }} \) key associated with the master key ( \( \mathrm{K}_{\varepsilon \mathrm{NB}} \) ) or secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ), as indicated in keyToUse, i.e. the integrity protection configuration shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;
\( 5> \) configure the PDCP entity to apply the ciphering algorithm and \( \mathrm{K}_{\mathrm{RRC} \text { enc }} \) key associated with the master key ( \( \mathrm{K}_{\varepsilon \mathrm{NB}} \) ) or secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ) as indicated in keyToUse, i.e. the ciphering configuration shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;

ETSI


--- Page 94  ---


3GPP TS 38.331 version 17.0.0 Release 17
93
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) else (i.e., UE connected to NR or UE in EN-DC):
\( 4> \) configure the PDCP entity to apply the integrity protection algorithm and \( \mathrm{K}_{\mathrm{RRC} \text { int }} \) key associated with the master key ( \( \mathrm{K}_{\mathrm{eNB}} / \mathrm{K}_{\mathrm{gNB}} \) ) or secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ), as indicated in keyToUse, i.e. the integrity protection configuration shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;
\( 4> \) configure the PDCP entity to apply the ciphering algorithm and \( \mathrm{K}_{\mathrm{RRC} \text { enc }} \) key associated with the master key ( \( \mathrm{K}_{\varepsilon \mathrm{NB}} / \mathrm{K}_{\mathrm{gNB}} \) ) or secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ) as indicated in keyToUse, i.e. the ciphering configuration shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;

3> re-establish the PDCP entity of this SRB as specified in TS 38.323 [5];
\( 2> \) else, if the discardOnPDCP is set:
3> trigger the PDCP entity to perform SDU discard as specified in TS 38.323 [5];
\( 2> \) if the pdcp-Config is included:
\( 3> \) reconfigure the PDCP entity in accordance with the received pdcp-Config.
5.3.5.6.4 DRB release

The UE shall:
1> for each \( d r b \)-Identity value included in the \( d r b \)-ToReleaseList that is part of the current UE configuration; or
\( 1> \) for each \( d r b \)-Identity value that is to be released as the result of full configuration according to 5.3.5.11:
\( 2> \) release the PDCP entity and the drb-Identity;
\( 2> \) if SDAP entity associated with this DRB is configured:
\( 3> \) indicate the release of the DRB to SDAP entity associated with this DRB (TS 37.324 [24], clause 5.3.3);
\( 2> \) if the DRB is associated with an eps-BearerIdentity:
3> if a new bearer is not added either with NR or E-UTRA with same eps-BearerIdentity:
4> indicate the release of the DRB and the eps-BearerIdentity of the released DRB to upper layers.
NOTE 1: The UE does not consider the message as erroneous if the \( d r b \)-ToReleaseList includes any drb-Identity value that is not part of the current UE configuration.

NOTE 2: Whether or not the RLC and MAC entities associated with this PDCP entity are reset or released is determined by the CellGroupConfig.
5.3.5.6.5 DRB addition/modification

The UE shall:
1> for each \( d r b \)-Identity value included in the \( d r b \)-ToAddModList that is not part of the current UE configuration (DRB establishment including the case when full configuration option is used):
\( 2> \) establish a PDCP entity and configure it in accordance with the received pdcp-Config;
\( 2> \) if the PDCP entity of this DRB is not configured with cipheringDisabled:
3> if target RAT of handover is E-UTRA/5GC; or
3> if the UE is connected to E-UTRA/5GC:
4> if the UE is capable of E-UTRA/5GC but not capable of NGEN-DC:

ETSI


--- Page 95  ---


3GPP TS 38.331 version 17.0.0 Release 17
94
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) configure the PDCP entity with the ciphering algorithm and \( \mathrm{K}_{\text {UPenc }} \) key configured/derived as specified in TS 36.331 [10];

4> else (i.e., a UE capable of NGEN-DC):
\( 5> \) configure the PDCP entity with the ciphering algorithms according to securityConfig and apply the key ( \( \mathrm{K}_{\text {UPenc }} \) ) associated with the master key ( \( \mathrm{K}_{\mathrm{eNB}} \) ) or secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ) as indicated in keyToUse, if applicable;
\( 3> \) else (i.e., UE connected to NR or UE connected to E-UTRA/EPC):
\( 4> \) configure the PDCP entity with the ciphering algorithms according to securityConfig and apply the \( \mathrm{K}_{\text {UPenc }} \) key associated with the master key ( \( \mathrm{K}_{\text {eNB }} / \mathrm{K}_{\text {gNB }} \) ) or the secondary key (S \( -\mathrm{K}_{\text {gNB }} / \mathrm{S}-\mathrm{K}_{\text {eNB }} \) ) as indicated in keyToUse;
\( 2> \) if the PDCP entity of this DRB is configured with integrityProtection:
\( 3> \) configure the PDCP entity with the integrity protection algorithms according to securityConfig and apply the \( \mathrm{K}_{\text {UPInt }} \) key associated with the master ( \( \mathrm{K}_{\mathrm{cNB}} / \mathrm{K}_{\mathrm{gNB}} \) ) or the secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ) as indicated in keyToUse;
\( 2> \) if an sdap-Config is included:
\( 3> \) if an SDAP entity with the received pdu-Session does not exist:
\( 4> \) establish an SDAP entity as specified in TS 37.324 [24] clause 5.1.1;
4- if an SDAP entity with the received pdu-Session did not exist prior to receiving this reconfiguration:
\( 5> \) indicate the establishment of the user plane resources for the pdu-Session to upper layers;
\( 3> \) configure the SDAP entity in accordance with the received sdap-Config as specified in TS 37.324 [24] and associate the DRB with the SDAP entity;
\( 3> \) for each QFI value added in mappedQoS-FlowsToAdd, if the QFI value is previously configured, the QFI value is released from the old DRB;
\( 2> \) if the DRB is associated with an eps-BearerIdentity:
\( 3> \) if the DRB was configured with the same eps-BearerIdentity either by NR or E-UTRA prior to receiving this reconfiguration:
\( 4> \) associate the established DRB with the corresponding eps-BearerIdentity;
\( 3> \) else:
4 indicate the establishment of the \( \mathrm{DRB}(\mathrm{s}) \) and the eps-BearerIdentity of the established \( \mathrm{DRB}(\mathrm{s}) \) to upper layers;
\( 1> \) for each \( d r b \)-Identity value included in the \( d r b \)-ToAddModList that is part of the current UE configuration and configured as DAPS bearer:
\( 2> \) reconfigure the PDCP entity to configure DAPS with the ciphering function, integrity protection function and ROHC function of the target cell group as specified in TS 38.323 [5] and configure it in accordance with the received pdcp-Config;
\( 2> \) if the masterKeyUpdate is received:
\( 3> \) if the ciphering function of the target cell group PDCP entity is not configured with cipheringDisabled:
\( 4> \) configure the ciphering function of the target cell group PDCP entity with the ciphering algorithm according to securityConfig and apply the \( \mathrm{K}_{\text {UPenc }} \) key associated with the master key ( \( \mathrm{K}_{\mathrm{gNB}} \) ), as indicated in keyToUse, i.e the ciphering configuration shall be applied to all subsequent PDCP PDUs received from the target cell group and sent to the target cell group by the UE;
\( 3> \) if the integrity protection function of the target cell group PDCP entity is configured with
integrityProtection:

ETSI


--- Page 96  ---


3GPP TS 38.331 version 17.0.0 Release 17
95
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) configure the integrity protection function of the target cell group PDCP entity with the integrity protection algorithms according to securityConfig and apply the \( \mathrm{K}_{\mathrm{UPmt}} \) key associated with the master key ( \( \mathrm{K}_{\mathrm{gNB}} \) ) as indicated in keyToUse;
\( 2> \) else:
\( 3> \) configure the ciphering function and the integrity protection function of the target cell group PDCP entity with the same security configuration as the PDCP entity for the source cell group;
\( 2> \) if the sdap-Config is included and when indication of successful completion of random access towards target cell is received from lower layers as specified in [3]:

3> reconfigure the SDAP entity in accordance with the received sdap-Config as specified in TS 37.324 [24];
3> for each QFI value added in mappedQoS-FlowsToAdd, if the QFI value is previously configured, the QFI value is released from the old DRB;
\( 1> \) for each \( d r b \)-Identity value included in the \( d r b \)-ToAddModList that is part of the current UE configuration and not configured as DAPS bearer:
\( 2> \) if the reestablishPDCP is set:
\( 3> \) if target RAT of handover is E-UTRA/5GC; or
3> if the UE is connected to E-UTRA/5GC:
\( 4> \) if the UE is capable of E-UTRA/5GC but not capable of NGEN-DC:
\( 5> \) if the PDCP entity of this DRB is not configured with cipheringDisabled:
\( 6> \) configure the PDCP entity with the ciphering algorithm and \( K_{\text {UPenc }} \) key configured/derived as specified in TS 36.331 [10], clause 5.4.2.3, i.e the ciphering configuration shall be applied to all subsequent PDCP PDUs received and sent by the UE;

4> else (i.e., a UE capable of NGEN-DC):
\( 5> \) if the PDCP entity of this DRB is not configured with cipheringDisabled:
6> configure the PDCP entity with the ciphering algorithm and \( \mathrm{K}_{\text {UPenc }} \) key associated with the master key ( \( \mathrm{K}_{\mathrm{eNB}} \) ) or the secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) ), as indicated in keyToUse, i.e. the ciphering configuration shall be applied to all subsequent PDCP PDUs received and sent by the UE;
\( 3> \) else (i.e., UE connected to NR or UE connected to E-UTRA/EPC (in EN-DC or capable of EN-DC)):
\( 4> \) if the PDCP entity of this DRB is not configured with cipheringDisabled:
\( 5> \) configure the PDCP entity with the ciphering algorithm and \( \mathrm{K}_{\text {UPenc }} \) key associated with the master key ( \( \mathrm{K}_{\varepsilon \mathrm{NB}} / \mathrm{K}_{\mathrm{gNB}} \) ) or the secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} / \mathrm{S}-\mathrm{K}_{\varepsilon \mathrm{NB}} \) ), as indicated in keyToUse, i.e. the ciphering configuration shall be applied to all subsequent PDCP PDUs received and sent by the UE;

4> if the PDCP entity of this DRB is configured with integrityProtection:
\( 5> \) configure the PDCP entity with the integrity protection algorithms according to securityConfig and apply the \( \mathrm{K}_{\mathrm{UP} \text { Int }} \) key associated with the master key \( \left(\mathrm{K}_{\mathrm{eNB}} / \mathrm{K}_{\mathrm{gNB}}\right) \) or the secondary key \( \left(\mathrm{S}-\mathrm{K}_{\mathrm{gNB}}\right) \) as indicated in keyToUse;

3> if drb-ContinueROHC is included in pdcp-Config:
\( 4> \) indicate to lower layer that \( d r b \)-ContinueROHC is configured;
\( 3> \) if drb-ContinueEHC-DL is included in pdcp-Config:
\( 4> \) indicate to lower layer that \( d r b \)-ContinueEHC-DL is configured;
\( 3> \) if drb-ContinueEHC-UL is included in pdcp-Config:

ETSI


--- Page 97  ---


3GPP TS 38.331 version 17.0.0 Release 17
96
ETSI TS 138331 V17.0.0 (2022-05)

4> indicate to lower layer that drb-ContinueEHC-UL is configured;
3> if drb-ContinueUDC is included in pdcp-Config:
4> indicate to lower layer that drb-ContinueUDC is configured; 3> re-establish the PDCP entity of this DRB as specified in TS 38.323 [5], clause 5.1.2;
\( 2> \) else, if the recoverPDCP is set:
3> trigger the PDCP entity of this DRB to perform data recovery as specified in TS 38.323 [5];
\( 2> \) if the pdcp-Config is included:
\( 3> \) reconfigure the PDCP entity in accordance with the received pdcp-Config.
\( 2> \) if the sdap-Config is included:
3> reconfigure the SDAP entity in accordance with the received sdap-Config as specified in TS37.324 [24];
3> for each QFI value added in mappedQoS-FlowsToAdd, if the QFI value is previously configured, the QFI value is released from the old DRB;

NOTE 1: Void.
NOTE 2: When determining whether a \( d r b \)-Identity value is part of the current UE configuration, the UE does not distinguish which RadioBearerConfig and DRB-ToAddModList that DRB was originally configured in. To re-associate a DRB with a different key ( \( \mathrm{K}_{\varepsilon \mathrm{NB}} \) to \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}}, \mathrm{K}_{\mathrm{gNB}} \) to \( \mathrm{S}-\mathrm{K}_{\varepsilon \mathrm{NB}}, \mathrm{K}_{\mathrm{gNB}} \) to \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \), or vice versa), the network provides the drb-Identity value in the (target) drb-ToAddModList and sets the reestablishPDCP flag. The network does not list the drb-Identity in the (source) drb-ToReleaseList.

NOTE 3: When setting the reestablishPDCP flag for a radio bearer, the network ensures that the RLC receiver entities do not deliver old PDCP PDUs to the re-established PDCP entity. It does that e.g. by triggering a reconfiguration with sync of the cell group hosting the old RLC entity or by releasing the old RLC entity.

NOTE 4: In this specification, UE configuration refers to the parameters configured by NR RRC unless otherwise stated.

NOTE 5: Ciphering and integrity protection can be enabled or disabled for a DRB. The enabling/disabling of ciphering or integrity protection can be changed only by releasing and adding the DRB.

NOTE 6: In DAPS handover, the UE may perform PDCP entity re-establishment (if reestablishPDCP is set) or the PDCP data recovery (if recoverPDCP is set) for a non-DAPS bearer when indication of successful completion of random access towards target cell is received from lower layers as specified in TS 38.321 [3]. In this case, the UE suspends data transmission and reception for all non-DAPS bearers in the source MCG for duration of the DAPS handover.
5.3.5.6.6 Multicast MRB release

The UE shall:
\( 1> \) for each \( m r b \)-Identity value included in the \( m r b \)-ToReleaseList that is part of the current UE configuration; or
\( 1> \) for each \( m r b \)-Identity value that is to be released as the result of full configuration according to 5.3.5.11:
\( 2> \) release the PDCP entity and the mrb-Identity;
\( 2> \) indicate the release of the multicast MRB and the tmgi of the released multicast MRB to upper layers.
NOTE 1: The UE does not consider the message as erroneous if the mrb-ToReleaseList includes any mrb-Identity value that is not part of the current UE configuration.

NOTE 2: Whether or not the RLC and MAC entities associated with this PDCP entity are reset or released is determined by the CellGroupConfig.

ETSI


--- Page 98  ---


3GPP TS 38.331 version 17.0.0 Release 17
97
ETSI TS 138331 V17.0.0 (2022-05)
5.3.5.6.7 Multicast MRB addition/modification

The UE shall:
\( 1> \) for each \( m r b \)-Identity value included in the mrb-ToAddModList for which mrb-IdentityNew is included (multicast MRB ID change):
\( 2> \) update the mrb-Identity to the value mrb-IdentityNew;
\( 1> \) for each \( m r b \)-Identity value included in the mrb-ToAddModList that is not part of the current UE configuration (multicast MRB establishment including the case when full configuration option is used):
\( 2> \) establish a PDCP entity and configure it in accordance with the received pdcp-Config;
\( 2> \) if the multicast MRB was configured with the same tmgi prior to receiving this reconfiguration message:
\( 3> \) associate the established multicast MRB with the corresponding \( t m g i \);
\( 2> \) else:
\( 3> \) indicate the establishment of the multicast \( \operatorname{MRB}(\mathrm{s}) \) and the \( t m g i \) of the established multicast \( \operatorname{MRB}(\mathrm{s}) \) to upper layers;
\( 2> \) if an SDAP entity with the received tmgi does not exist:
3> establish an SDAP entity as specified in TS 37.324 [24] clause 5.1.1;
\( 1> \) for each \( m r b \)-Identity value included in the mrb-ToAddModList that is part of the current UE configuration (prior treating this mrb-ToAddModList):
\( 2> \) if the reestablishPDCP is set:
3> if drb-ContinueROHC is included in pdcp-Config:
\( 4> \) indicate to lower layer that \( d r b \)-ContinueROHC is configured;
3> if drb-ContinueEHC-DL is included in pdcp-Config:
4> indicate to lower layer that \( d r b \)-ContinueEHC-DL is configured;
3> re-establish the PDCP entity of this multicast MRB as specified in TS 38.323 [5], clause 5.1.2;
\( 2> \) else, if the recoverPDCP is set:
3> trigger the PDCP entity of this MRB to perform data recovery as specified in TS 38.323 [5];
\( 2> \) if the pdcp-Config is included:
3> reconfigure the PDCP entity in accordance with the received pdcp-Config.
NOTE 1: When setting the reestablishPDCP flag for a radio bearer, the network ensures that the RLC receiver entities do not deliver old PDCP PDUs to the re-established PDCP entity. It does that e.g. by triggering a reconfiguration with sync of the cell group hosting the old RLC entity or by releasing the old RLC entity.

NOTE 2: In this specification, UE configuration refers to the parameters configured by NR RRC unless otherwise stated.
5.3.5.7 AS Security key update

The UE shall:
1> if UE is connected to E-UTRA/EPC or E-UTRA/5GC:
\( 2> \) upon reception of \( s k \)-Counter as specified in TS 36.331 [10]:
3> update the \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) key based on the \( \mathrm{K}_{\mathrm{eNB}} \) key and using the received \( s k \)-Counter value, as specified in TS 33.401 [30] for EN-DC, or TS 33.501 [11] for NGEN-DC;

ETSI


--- Page 99  ---


3GPP TS 38.331 version 17.0.0 Release 17
98
ETSI TS 138331 V17.0.0 (2022-05)

3> derive the \( K_{R R C e n c} \) and \( K_{U P e n c} \) keys as specified in TS 33.401 [30] for EN-DC, or TS 33.501 [11] for NGEN-DC;

3> derive the \( \mathrm{K}_{\text {RRGint }} \) and \( \mathrm{K}_{\text {UPmt }} \) keys as specified in TS 33.401 [30] for EN-DC or TS 33.501 [11] for NGENDC.

1> else if this procedure was initiated due to reception of the masterKeyUpdate:
\( 2> \) if the nas-Container is included in the received masterKeyUpdate:
3> forward the nas-Container to the upper layers;
\( 2> \) if the keySetChangeIndicator is set to true:
3> derive or update the \( \mathrm{K}_{\mathrm{gNB}} \) key based on the \( \mathrm{K}_{\mathrm{AMF}} \) key, as specified in TS 33.501 [11];
\( 2> \) else:
3> derive or update the \( \mathrm{K}_{\mathrm{gNB}} \) key based on the current \( \mathrm{K}_{\mathrm{gNB}} \) key or the NH , using the nextHopChainingCount value indicated in the received masterKeyUpdate, as specified in TS 33.501 [11];
\( 2> \) store the nextHopChainingCount value;
\( 2> \) derive the keys associated with the \( \mathrm{K}_{\mathrm{gNB}} \) key as follows:
\( 3> \) if the securityAlgorithmConfig is included in SecurityConfig:
\( 4> \) derive the \( \mathrm{K}_{\text {RRCenc }} \) and \( \mathrm{K}_{\text {UPenc }} \) keys associated with the cipheringAlgorithm indicated in the securityAlgorithmConfig, as specified in TS 33.501 [11];

4> derive the \( \mathrm{K}_{\mathrm{RRC} \text { int }} \) and \( \mathrm{K}_{\text {UPnt }} \) keys associated with the integrityProtAlgorithm indicated in the securityAlgorithmConfig, as specified in TS 33.501 [11];
\( 3> \) else:
4> derive the \( \mathrm{K}_{\mathrm{RRCenc}} \) and \( \mathrm{K}_{\mathrm{UPenc}} \) keys associated with the current cipheringAlgorithm, as specified in TS \( 33.501[11] ; \)

4> derive the \( \mathrm{K}_{\mathrm{RRC} \text { int }} \) and \( \mathrm{K}_{\text {UPnt }} \) keys associated with the current integrityProtAlgorithm, as specified in TS 33.501 [11].

NOTE 1: Ciphering and integrity protection are optional to configure for the DRBs.
\( 1> \) else if this procedure was initiated due to reception of the \( s k \)-Counter (UE is in NE-DC, or NR-DC, or is configured with SN terminated bearer(s)):
\( 2> \) derive or update the secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) or S-KeNB) based on the KgNB key and using the received \( s k \) Counter value, as specified in TS 33.501 [11];
\( 2> \) derive the \( K_{\text {RRCenc }} \) key and the \( K_{\text {UPenc }} \) key as specified in TS 33.501 [11] using the ciphering algorithms indicated in the RadioBearerConfig associated with the secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) or S-KeNB) as indicated by keyToUse;
\( 2> \) derive the \( K_{\text {RRCint }} \) key and the \( K_{\text {UPint }} \) key as specified in TS 33.501 [11] using the integrity protection algorithms indicated in the RadioBearerConfig associated with the secondary key ( \( \mathrm{S}-\mathrm{K}_{\mathrm{gNB}} \) or S-KeNB) as indicated by keyToUse;

NOTE 2: If the UE has no radio bearer configured with keyToUse set to secondary and receives the sk-Counter without any RadioBearerConfig with keyToUse set to secondary, the UE does not consider it as an invalid reconfiguration.

ETSI


--- Page 100  ---


3GPP TS 38.331 version 17.0.0 Release 17
99
ETSI TS 138331 V17.0.0 (2022-05)
5.3.5.8 Reconfiguration failure
5.3.5.8.1 Void
5.3.5.8.2 Inability to comply with RRCReconfiguration

NOTE 00: The UE behaviour specified in this clause does not apply to the fields in ServingCellConfigCommon that are defined in release-16 and later. The UE ignores, i.e. does not take an action on and does not store, the fields that it does not support or does not comprehend.

The UE shall:
\( 1> \) if the UE is in (NG)EN-DC:
\( 2> \) if the UE is unable to comply with (part of) the configuration included in the RRCReconfiguration message received over SRB3;
\( 3> \) if the RRCReconfiguration message was received as part of ConditionalReconfiguration:
\( 4> \) continue using the configuration used prior to when the inability to comply with the RRCReconfiguration message was detected;
\( 3> \) else:
\( 4> \) continue using the configuration used prior to the reception of RRCReconfiguration message;
\( 3> \) if MCG transmission is not suspended:
\( 4> \) initiate the SCG failure information procedure as specified in clause 5.7 .3 to report SCG reconfiguration error, upon which the connection reconfiguration procedure ends;
\( 3> \) else:
\( 4> \) intitate the connection re-establishment procedure as specified in TS 36.331 [10], clause 5.3.7, upon which the connection reconfiguration procedure ends;
\( 2> \) else, if the UE is unable to comply with (part of) the configuration included in the RRCReconfiguration message received over SRB1;
\( 3> \) if the RRCReconfiguration message was received as part of ConditionalReconfiguration:
4 continue using the configuration used prior to when the inability to comply with the RRCReconfiguration message was detected;
\( 3> \) else:
\( 4> \) continue using the configuration used prior to the reception of RRCReconfiguration message;
\( 3> \) initiate the connection re-establishment procedure as specified in TS 36.331 [10], clause 5.3.7, upon which the connection reconfiguration procedure ends.
\( 1> \) else if \( R R C \) Reconfiguration is received via NR (i.e., NR standalone, NE-DC, or NR-DC):
\( 2> \) if the UE is unable to comply with (part of) the configuration included in the RRCReconfiguration message received over SRB3;

NOTE 0: This case does not apply in NE-DC.
\( 3> \) if the RRCReconfiguration message was received as part of ConditionalReconfiguration:
4 continue using the configuration used prior to when the inability to comply with the RRCReconfiguration message was detected;
\( 3> \) else:
\( 4> \) continue using the configuration used prior to the reception of RRCReconfiguration message;

ETSI


--- Page 101  ---


3GPP TS 38.331 version 17.0.0 Release 17
100
ETSI TS 138331 V17.0.0 (2022-05)

3> if MCG transmission is not suspended:
4> initiate the SCG failure information procedure as specified in clause 5.7 .3 to report SCG reconfiguration error, upon which the connection reconfiguration procedure ends;
\( 3> \) else:
\( 4> \) initiate the connection re-establishment procedure as specified in clause 5.3.7, upon which the connection reconfiguration procedure ends;
\( 2> \) else if the UE is unable to comply with (part of) the configuration included in the RRCReconfiguration message received over the SRB1 or if the upper layers indicate that the nas-Container is invalid:

NOTE 0a: The compliance also covers the SCG configuration carried within octet strings e.g. field mrdcSecondaryCellGroupConfig. Le. the failure behaviour defined also applies in case the UE cannot comply with the embedded SCG configuration or with the combination of (parts of) the MCG and SCG configurations.

NOTE Ob: The compliance also covers the V2X sidelink configuration carried within an octet string, e.g. field \( s \) ConfigDedicatedEUTRA. Le. the failure behaviour defined also applies in case the UE cannot comply with the embedded V2X sidelink configuration.
\( 3> \) if the RRCReconfiguration message was received as part of ConditionalReconfiguration:
\( 4> \) continue using the configuration used prior to when the inability to comply with the RRCReconfiguration message was detected;

3> else:
\( 4> \) continue using the configuration used prior to the reception of RRCReconfiguration message;
\( 3> \) if AS security has not been activated:
4> perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'other'
\( 3> \) else if AS security has been activated but SRB2 and at least one DRB or multicast MRB or, for IAB, SRB2, have not been setup:

4> perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'RRC connection failure';

3> else:
4> initiate the connection re-establishment procedure as specified in 5.3.7, upon which the reconfiguration procedure ends;
\( 1> \) else if RRCReconfiguration is received via other RAT (Handover to NR failure):
\( 2> \) if the UE is unable to comply with any part of the configuration included in the RRCReconfiguration message or if the upper layers indicate that the nas-Container is invalid:

3> perform the actions defined for this failure case as defined in the specifications applicable for the other RAT.

NOTE 1: The UE may apply above failure handling also in case the RRCReconfiguration message causes a protocol error for which the generic error handling as defined in clause 10 specifies that the UE shall ignore the message.

NOTE 2: If the UE is unable to comply with part of the configuration, it does not apply any part of the configuration, i.e. there is no partial success/failure.

NOTE 3: It is up to UE implementation whether the compliance check for an RRCReconfiguration received as part of ConditionalReconfiguration is performed upon the reception of the message or upon CHO, CPA and CPC execution (when the message is required to be applied).

ETSI


--- Page 102  ---


3GPP TS 38.331 version 17.0.0 Release 17
101
ETSI TS 138331 V17.0.0 (2022-05)
5.3.5.8.3 T304 expiry (Reconfiguration with sync Failure) or T420 expiry (Path switch failure)

The UE shall:
1> if T304 of the MCG expires, or
1> if T420 expires, or,
1> if the target L2 U2N Relay UE changes its serving PCell before path switch (i.e. the received RRCReconfiguration message containing reconfigurationWithSync indicating path switch as specified in 5.3.5.5.2):
\( 2> \) release dedicated preambles provided in rach-ConfigDedicated if configured;
\( 2> \) release dedicated msgA PUSCH resources provided in rach-ConfigDedicated if configured;
\( 2> \) if any DAPS bearer is configured, and radio link failure is not detected in the source PCell, according to clause 5.3.10.3:
\( 3> \) reset MAC for the target PCell and release the MAC configuration for the target PCell ;
3> for each DAPS bearer:
4 release the RLC entity or entities as specified in TS 38.322 [4], clause 5.1.3, and the associated logical channel for the target PCell;

4> reconfigure the PDCP entity to release DAPS as specified in TS 38.323 [5];
\( 3> \) for each SRB:
4> if the masterKeyUpdate was not received:
\( 5> \) configure the PDCP entity for the source PCell with state variables continuation as specified in TS 38.323 [5];

4> release the PDCP entity for the target PCell;
4> release the RLC entity as specified in TS 38.322 [4], clause 5.1.3, and the associated logical channel for the target PCell;
\( 4> \) trigger the PDCP entity for the source PCell to perform SDU discard as specified in TS 38.323 [5];
4> re-establish the RLC entity for the source PCell;
\( 3> \) release the physical channel configuration for the target PCell;
\( 3> \) discard the keys used in target PCell (the \( \mathrm{K}_{\mathrm{gNB}} \) key, the \( \mathrm{K}_{\text {RRCenc }} \) key, the \( \mathrm{K}_{\text {RRCint }} \) key, the \( \mathrm{K}_{\text {UPint }} \) key and the Kupene key), if any;

3> resume suspended SRBs in the source PCell;
\( 3> \) for each non-DAPS bearer:
4> revert back to the UE configuration used for the DRB or multicast MRB in the source PCell, includes PDCP, RLC states variables, the security configuration and the data stored in transmission and reception buffers in PDCP and RLC entities;

3> revert back to the UE measurement configuration used in the source PCell;
3> store the handover failure information in VarRLF-Report as described in the clause 5.3.10.5;
\( 3> \) initiate the failure information procedure as specified in clause 5.7 .5 to report DAPS handover failure.
\( 2> \) else:
3> revert back to the UE configuration used in the source PCell;

ETSI


--- Page 103  ---


3GPP TS 38.331 version 17.0.0 Release 17
102
ETSI TS 138331 V17.0.0 (2022-05)

3> if the associated T304 was not initiated upon cell selection performed while timer T311 was running, as defined in clause 5.3.7.3:

4> store the handover failure information in VarRLF-Report as described in the clause 5.3.10.5;
3> initiate the connection re-establishment procedure as specified in clause 5.3.7.
NOTE 1: In the context above, "the UE configuration" includes state variables and parameters of each radio bearer.
1> else if T304 of a secondary cell group expires:
\( 2> \) if MCG transmission is not suspended:
\( 3> \) release dedicated preambles provided in rach-ConfigDedicated, if configured;
3> initiate the SCG failure information procedure as specified in clause 5.7.3 to report SCG reconfiguration with sync failure, upon which the RRC reconfiguration procedure ends;
\( 2> \) else:
\( 3> \) if the UE is in NR-DC:
\( 4> \) initiate the connection re-establishment procedure as specified in clause 5.3.7;
\( 3> \) else (the UE is in (NG) EN-DC):
4> initiate the connection re-establishment procedure as specified in TS 36.331 [10], clause 5.3.7;
1> else if T304 expires when RRCReconfiguration is received via other RAT (HO to NR failure):
\( 2> \) reset MAC;
\( 2> \) perform the actions defined for this failure case as defined in the specifications applicable for the other RAT.
NOTE 2: In this clause, the term 'handover failure' has been used to refer to 'reconfiguration with sync failure'.
5.3.5.9 Other configuration

The UE shall:
\( 1> \) if the received otherConfig includes the delayBudgetReportingConfig:
\( 2> \) if delayBudgetReportingConfig is set to setup:
\( 3> \) consider itself to be configured to send delay budget reports in accordance with 5.7.4;
\( 2> \) else:
3> consider itself not to be configured to send delay budget reports and stop timer T342, if running.
\( 1> \) if the received otherConfig includes the overheatingAssistanceConfig:
\( 2> \) if overheatingAssistanceConfig is set to setup:
\( 3> \) consider itself to be configured to provide overheating assistance information in accordance with 5.7.4;
\( 2> \) else:
\( 3> \) consider itself not to be configured to provide overheating assistance information and stop timer T345, if running;

1> if the received otherConfig includes the idc-AssistanceConfig:
2 if idc-AssistanceConfig is set to setup:
\( 3> \) consider itself to be configured to provide IDC assistance information in accordance with 5.7.4;
\( 2> \) else:

ETSI


--- Page 104  ---


3GPP TS 38.331 version 17.0.0 Release 17
103
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) consider itself not to be configured to provide IDC assistance information;
\( 1> \) if the received otherConfig includes the \( d r x \)-PreferenceConfig:
\( 2> \) if dræ-PreferenceConfig is set to setup:
3> consider itself to be configured to provide its preference on DRX parameters for power saving for the cell group in accordance with 5.7.4;
\( 2> \) else:
3> consider itself not to be configured to provide its preference on DRX parameters for power saving for the cell group and stop timer T346a associated with the cell group, if running;
\( 1> \) if the received otherConfig includes the maxBW-PreferenceConfig:
\( 2> \) if maxBW-PreferenceConfig is set to setup:
3> consider itself to be configured to provide its preference on the maximum aggregated bandwidth for power saving for the cell group in accordance with 5.7.4;

3> if otherConfig includes maxBW-PreferenceConfigFR2-2:
4> consider itself to be configured to provide its preference on the maximum aggregated bandwidth for FR2-2 for power saving for the cell group in accordance with 5.7.4;
\( 2> \) else:
\( 3> \) consider itself not to be configured to provide its preference on the maximum aggregated bandwidth for power saving for the cell group and stop timer T346b associated with the cell group, if running;
\( 1> \) if the received otherConfig includes the maxCC-PreferenceConfig:
\( 2> \) if maxCC-PreferenceConfig is set to setup:
\( 3> \) consider itself to be configured to provide its preference on the maximum number of secondary component carriers for power saving for the cell group in accordance with 5.7.4;
\( 2> \) else:
3> consider itself not to be configured to provide its preference on the maximum number of secondary component carriers for power saving for the cell group and stop timer T346c associated with the cell group, if running;
\( 1> \) if the received otherConfig includes the maxMIMO-LayerPreferenceConfig:
\( 2> \) if maxMIMO-LayerPreferenceConfig is set to setup:
\( 3> \) consider itself to be configured to provide its preference on the maximum number of MIMO layers for power saving for the cell group in accordance with 5.7.4;

3> if otherConfig includes maxMIMO-LayerPreferenceConfigFR2-2:
\( 4> \) consider itself to be configured to provide its preference on the maximum number of MIMO layers for FR2-2 for power saving for the cell group in accordance with 5.7.4;
\( 2> \) else:
\( 3> \) consider itself not to be configured to provide its preference on the maximum number of MIMO layers for power saving for the cell group and stop timer T346d associated with the cell group, if running;

1> if the received otherConfig includes the minSchedulingOffsetPreferenceConfig:
\( 2> \) if minSchedulingOffsetPreferenceConfig is set to setup:
\( 3> \) consider itself to be configured to provide its preference on the minimum scheduling offset for cross-slot scheduling for power saving for the cell group in accordance with 5.7.4;

ETSI


--- Page 105  ---


3GPP TS 38.331 version 17.0.0 Release 17
104
ETSI TS 138331 V17.0.0 (2022-05)

3> if otherConfig includes minSchedulingOffsetPreferenceConfigExt:
4> consider itself to be configured to provide its preference on the minimum scheduling offset for 480 kHz SCS and/or 960 kHz SCS for cross-slot scheduling for power saving for the cell group in accordance with 5.7.4;
\( 2> \) else:
3> consider itself not to be configured to provide its preference on the minimum scheduling offset for crossslot scheduling for power saving for the cell group and stop timer T346e associated with the cell group, if running;
\( 1> \) if the received otherConfig includes the releasePreferenceConfig:
\( 2> \) if releasePreferenceConfig is set to setup:
3> consider itself to be configured to provide assistance information to transition out of RRC_CONNECTED in accordance with 5.7.4;
\( 2> \) else:
3> consider itself not to be configured to provide assistance information to transition out of RRC_CONNECTED and stop timer T346f, if running.
\( 1> \) if the received otherConfig includes the obtainCommonLocation:
\( 2> \) include available detailed location information for any subsequent measurement report or any subsequent RLF report and SCGFailureInformation;

NOTE 1: The UE is requested to attempt to have valid detailed location information available whenever sending a measurement report for which it is configured to include available detailed location information. The UE may not succeed e.g. because the user manually disabled the GPS hardware, due to no/poor satellite coverage. Further details, e.g. regarding when to activate GNSS, are up to UE implementation.
\( 1> \) if the received otherConfig includes the btNameList:
\( 2> \) if btNameList is set to setup, include available Bluetooth measurement results for any subsequent measurement report or any subsequent RLF report and SCGFailureInformation;
\( 1> \) if the received otherConfig includes the wlanNameList:
\( 2> \) if wlanNameList is set to setup, include available WLAN measurement results for any subsequent measurement report or any subsequent RLF report and SCGFailureInformation;
\( 1> \) if the received otherConfig includes the sensorNameList:
\( 2> \) if sensorNameList is set to setup, include available Sensor measurement results for any subsequent measurement report or any subsequent RLF report and SCGFailureInformation;

NOTE 2: The UE is requested to attempt to have valid Bluetooth measurements, WLAN measurements and Sensor measurements whenever sending a measurement report for which it is configured to include these measurements. The UE may not succeed e.g. because the user manually disabled the WLAN or Bluetooth or Sensor hardware. Further details, e.g. regarding when to activate WLAN or Bluetooth or Sensor, are up to UE implementation.
\( 1> \) if the received otherConfig includes the \( s \)-AssistanceConfigNR:
\( 2> \) consider itself to be configured to provide configured grant assistance information for NR sidelink communication in accordance with 5.7.4;

1> if the received otherConfig includes the referenceTimePreferenceReporting:
\( 2> \) consider itself to be configured to provide UE reference time assistance information in accordance with 5.7.4;
1> else:
\( 2> \) consider itself not to be configured to provide UE reference time assistance information;

ETSI


--- Page 106  ---


3GPP TS 38.331 version 17.0.0 Release 17
105
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if the received otherConfig includes the successHO-Config:
\( 2> \) consider itself to be configured to provide the successful handover information in accordance with 5.7.10.6;
1> else:
\( 2> \) consider itself not to be configured to provide the successful handover information.
\( 1> \) if the received otherConfig includes the \( u \)-GapFR2-PreferenceConfig:
\( 2> \) consider itself to be configured to provide its preference on FR2 UL gap in accordance with 5.7.4;
1> else:
\( 2> \) consider itself not to be configured to provide its preference on FR2 UL gap;
1> if the received otherConfig includes the musim-GapAssistanceConfig:
\( 2> \) if musim-GapAssistanceConfig is set to setup:
3> consider itself to be configured to provide MUSIM assistance information without leaving RRC_CONNECTED in accordance with 5.7.4;
\( 2> \) else:
3> consider itself not to be configured to provide MUSIM assistance information without leaving RRC_CONNECTED in accordance with 5.7 .4 and stop timer T346h, if running;
\( 1> \) if the received otherConfig includes the musim-LeaveAssistanceConfig:
\( 2> \) if musim-LeaveAssistanceConfig is set to setup:
\( 3> \) consider itself to be configured to provide MUSIM assistance information for leaving RRC_CONNECTED in accordance with 5.7.4;
\( 2> \) else:
\( 3> \) consider itself not to be configured to provide MUSIM assistance information for leaving RRC_CONNECTED in accordance with 5.7.4 and stop timer T346g, if running.

1> if the received otherConfig includes the rim-RelaxationReportingConfig:
\( 2> \) if rim-RelaxationReportingConfig is set to setup:
\( 3> \) consider itself to be configured to report the relaxation state of RLM measurements with 5.7.4;
\( 2> \) else:
3> consider itself not to be configured to report the relaxation state of RLM measurements;
\( 1> \) if the received otherConfig includes the bfd-RelaxationReportingConfig:
\( 2> \) if bfd-RelaxationReportingConfig is set to setup:
\( 3> \) consider itself to be configured to report the relaxation state of BFD measurements with 5.7.4;
\( 2> \) else:
\( 3> \) consider itself not to be configured to report the relaxation state of BFD measurements;
\( 1> \) if the received otherConfig includes the scg-DeactivationPreferenceConfig:
\( 2> \) if the scg-DeactivationPreferenceConfig is set to setup:
\( 3> \) consider itself to be configured to provide its SCG deactivation preference in accordance with 5.7.4;
\( 2> \) else:

ETSI


--- Page 107  ---


3GPP TS 38.331 version 17.0.0 Release 17
106
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) consider itself not to be configured to provide its SCG deactivation preference and stop timer T346i, if running.
5.3.5.10 MR-DC release

The UE shall:
1> as a result of MR-DC release triggered by E-UTRA or NR:
\( 2> \) release SRB3, if established, as specified in 5.3.5.6.2;
\( 2> \) release measConfig associated with SCG;
\( 2> \) if the UE is configured with NR SCG:
3> release the SCG configuration as specified in clause 5.3.5.4;
3> release otherConfig associated with the SCG, if configured;
3> stop timers T346a, T346b, T346c, T346d, T346e, T346j and T346k associated with the SCG, if running;
3> release bap-Config associated with the SCG, if configured;
3> release iab-IP-AddressConfigurationList associated with the SCG, if configured;
\( 2> \) else if the UE is configured with E-UTRA SCG:
3> release the SCG configuration as specified in TS 36.331 [10], clause 5.3.10.19 to release the E-UTRA SCG;
5.3.5.11 Full configuration

The UE shall:
\( 1> \) release/ clear all current dedicated radio configurations except for the following:
- the MCG C-RNTI;
- the AS security configurations associated with the master key;
- the SRB1/SRB2 configurations and DRB/multicast MRB configurations as configured by radioBearerConfig or radioBearerConfig2.

NOTE 1: Radio configuration is not just the resource configuration but includes other configurations like MeasConfig. Radio configuration also includes the RLC bearer configurations as configured by RLCBearerConfig. In case NR-DC or NE-DC is configured, this also includes the entire NR or E-UTRA SCG configuration which are released according to the MR-DC release procedure as specified in 5.3.5.10.

NOTE 1a: For NR sidelink communication, the radio configuration includes the sidelink RRC configuration received from the network, but does not include the sidelink RRC reconfiguration and sidelink UE capability received from other UEs via PC5-RRC. In addition, the UE considers the new NR sidelink configurations as full configuration, in case of state transition and change of system information used for NR sidelink communication.

NOTE 1b: To establish the RLC bearer of SRB(s) after release due to fullConfig, the network can include the srbIdentity within srb-ToAddModList (i.e. the UE applies RLC default configuration) and/or provide ricBearerToAddModList of concerned SRB(s) explicitly.
- the logged measurement configuration;
\( 1> \) if the spCellConfig in the masterCellGroup includes the reconfigurationWithSync:
\( 2> \) release/ clear all current common radio configurations;
\( 2> \) use the default values specified in 9.2.3 for timers T310, T311 and constants N310, N311;

ETSI


--- Page 108  ---


3GPP TS 38.331 version 17.0.0 Release 17
107
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) else (full configuration after re-establishment or during RRC resume):
2 if the UE is connected with a L2 U2N Relay UE via the PC5-RRC connection (i.e the UE is a L2 U2N Remote UE):

3> use values for timers T300, T301 and T319 as included in ue-TimersAndConstants-RemoteUE received in SIBI;

3> use value for timer T311, as included in ue-TimersAndConstants received in SIBI
\( 2> \) else:
3> use values for timers T301, T310, T311 and constants N310, N311, as included in ueTimersAndConstants received in SIB1;

1> if no measConfigAppLayerId is included:
\( 2> \) inform upper layers about the release of all application layer measurement configurations;
\( 2> \) discard any received application layer measurement report from upper layers;
\( 2> \) consider itself not to be configured to send application layer measurement report.
1> apply the default L1 parameter values as specified in corresponding physical layer specifications except for the following:
- parameters for which values are provided in SIBI;
\( 1> \) apply the default MAC Cell Group configuration as specified in 9.2.2;
1> for each srb-Identity value included in the srb-ToAddModList (SRB reconfiguration):
\( 2> \) establish an RLC entity for the corresponding SRB;
\( 2> \) apply the default SRB configuration defined in 9.2.1 for the corresponding SRB;
NOTE 2: This is to get the SRBs (SRB1 and SRB2 for reconfiguration with sync and SRB2 for resume and reconfiguration after re-establishment) to a known state from which the reconfiguration message can do further configuration.

1> for each pdu-Session that is part of the current UE configuration:
\( 2> \) release the SDAP entity (clause 5.1.2 in TS 37.324 [24]);
\( 2> \) release each DRB associated to the pdu-Session as specified in 5.3.5.6.4;
NOTE 3: This will retain the pdu-Session but remove the DRBs including drb-identity of these bearers from the current UE configuration. Setup of the DRBs within the AS is described in clause 5.3.5.6.5 using the new configuration. The pdu-Session acts as the anchor for associating the released and re-setup DRB. In the AS the DRB re-setup is equivalent with a new DRB setup (including new PDCP and logical channel configurations).
\( 1> \) for each \( t m g i \) that is part of the current UE configuration:
\( 2> \) release the SDAP entity (clause 5.1.2 in TS 37.324 [24]);
\( 2> \) release each multicast MRB associated to the tmgi as specified in 5.3.5.6.6;
NOTE 4: This will retain the tmgi but remove the multicast MRBs including mrb-identity of these bearers from the current UE configuration. Setup of the multicast MRBs within the AS is described in clause 5.3.5.6.7 using the new configuration. The tmgi acts as the anchor for associating the released and re-setup multicast MRB. In the AS the multicast MRB re-setup is equivalent with a new multicast MRB setup (including new PDCP and logical channel configurations).

1> for each pdu-Session that is part of the current UE configuration but not added with same pdu-Session in the drbToAddModList:

ETSI


--- Page 109  ---


3GPP TS 38.331 version 17.0.0 Release 17
108
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the procedure was triggered due to reconfiguration with sync:
\( 3> \) indicate the release of the user plane resources for the pdu-Session to upper layers after successful reconfiguration with sync;
\( 2> \) else:
\( 3> \) indicate the release of the user plane resources for the pdu-Session to upper layers immediately;
\( 1> \) for each \( t m g i \) that is part of the current UE configuration but not added with the same \( t m g i \) in the \( m r b \) ToAddModList:
\( 2> \) if the procedure was triggered due to reconfiguration with sync:
\( 3> \) indicate the release of the user plane resources for the \( t m g i \) to upper layers after successful reconfiguration with sync;
\( 2> \) else:
\( 3> \) indicate the release of the user plane resources for the \( t m g i \) to upper layers immediately.
5.3.5.12 BAP configuration

The [AB-MT shall:
\( 1> \) if the bap-Config is set to setup:
\( 2> \) if no BAP entity is established:
\( 3> \) establish a BAP entity as specified in TS 38.340 [47];
\( 2> \) if bap-address is included:
\( 3> \) configure the BAP entity to use the bap-Address as this node's BAP address;
\( 2> \) if defaultUL-BAP-RoutingID is included:
\( 3> \) configure the BAP entity to apply the default UL BAP routing ID according to the configuration;
\( 2> \) if defaultUL-BH-RLC-Channel is included
\( 3> \) configure the BAP entity to apply the default UL BH RLC channel according to the configuration;
\( 2> \) if flow ControlFeedbackType is included:
\( 3> \) configure the BAP entity to apply the flow control feedback according to the configuration;
\( 1> \) if the bap-Config is set to release:
2> release the BAP entity as specified in TS 38.340 [47].
5.3.5.12a IAB Other Configuration
5.3.5.12a. 1 IP address management
5.3.5.12a.1.1 IP Address Release

The [AB-MT shall:
\( 1> \) if the release is triggered by reception of the iab-IP-AddressToReleaseList:
\( 2> \) for each iab-IP-AddressIndex value included in iab-IP-AddressToReleaseList:
\( 3> \) release the corresponding IAB-IP-AddressConfiguration.

ETSI


--- Page 110  ---


3GPP TS 38.331 version 17.0.0 Release 17
109
ETSI TS 138331 V17.0.0 (2022-05)
5.3.5.12a.1.2 IP Address Addition/Modification

The IAB-MT shall:
\( 1> \) for each iab-IP-AddressIndex value included in the iab-IP-AddressToAddModList that is not part of the current IAB-MT configuration:
\( 2> \) add the IP address indicated in iab-IP-Address, corresponding to the iab-IP-AddressIndex.
2 if added IP address is iPv4-Address:
\( 3> \) if tab-IP-Usage is set to \( f l-C \) :
\( 4> \) store the received IPv4 address for F1-C traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else if iab-IP-Usage is set to fl-U:
4> store the received IPv4 address for F1-U traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else if iab-IP-Usage is set to non-FI:
4> store the received IPv4 address for non-F1 traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else:
4> store the received IPv4 address for all traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.
\( 2> \) else if iPv6-Address is included:
\( 3> \) if tab-IP-Usage is set to \( f l-C \) :
\( 4> \) store the received IPv6 address for F1-C traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else if iab-IP-Usage is set to fl-U:
\( 4> \) store the received IPv6 address for F1-U traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else if iab-IP-Usage is set to non-F1:
4> store the received IPv6 address for non-F1 traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else:
\( 4> \) store the received IPv6 address for all traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.
\( 2> \) else if iPv6-Prefix is included in iab-IP-AddressToAddModList:
3> if iab-IP-Usage is set to fl-C:
4> store the received [Pv6 address prefix for F1-C traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else if iab-IP-Usage is set to fl-U:
4> store the received [Pv6 address prefix for F1-U traffic together with the [AB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else if iab-IP-Usage is set to non-Fl:

ETSI


--- Page 111  ---


3GPP TS 38.331 version 17.0.0 Release 17
110
ETSI TS 138331 V17.0.0 (2022-05)

4> store the received [Pv6 address prefix for non-F1 traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

3> else:
4> store the received IPv6 address prefix for all traffic together with the IAB-donor-DU BAP address corresponding to the iab-IP-AddressIndex.

1> for each iab-IP-AddressIndex value included in the iab-IP-AddressToAddModList that is part of the current IABMT configuration :
\( 2> \) modify the IP address configuration(s) in accordance with the IAB-IP-AddressConfiguration corresponding to the iab-IP-AddressIndex.
5.3.5.13 Conditional Reconfiguration
5.3.5.13.1 General

The network configures the UE with one or more candidate target SpCells in the conditional reconfiguration. The UE evaluates the condition of each configured candidate target SpCell. The UE applies the conditional reconfiguration associated with one of the target SpCells which fulfils associated execution condition. The network provides the configuration parameters for the target SpCell in the ConditionalReconfiguration IE.

The UE performs the following actions based on a received ConditionalReconfiguration IE:
1> if the ConditionalReconfiguration contains the condReconfigToRemoveList:
\( 2> \) perform conditional reconfiguration removal procedure as specified in 5.3.5.13.2;
1> if the ConditionalReconfiguration contains the condReconfigToAddModList:
\( 2> \) perform conditional reconfiguration addition/modification as specified in 5.3.5.13.3;
5.3.5.13.2 Conditional reconfiguration removal

The UE shall:
1> for each condReconfigld value included in the condReconfigToRemoveList that is part of the current UE conditional reconfiguration in VarConditionalReconfig:
\( 2> \) remove the entry with the matching condReconfigId from the VarConditionalReconfig;
NOTE: The UE does not consider the message as erroneous if the condReconfigToRemoveList includes any condReconfigld value that is not part of the current UE configuration.
5.3.5.13.3 Conditional reconfiguration addition/modification

For each condReconfigld received in the condReconfigToAddModList IE the UE shall:
\( 1> \) if an entry with the matching condReconfigld exists in the condReconfigToAddModList within the VarConditionalReconfig:
\( 2> \) if the entry in condReconfigToAddModList includes an condExecutionCond or condExecutionCondSCG;
3> replace condExecutionCond or condExecutionCondSCG within the VarConditionalReconfig with the value received for this condReconfigId;
\( 2> \) if the entry in condReconfigToAddModList includes an condRRCReconfig;
3> replace condRRCReconfig within the VarConditionalReconfig with the value received for this condReconfigld;

1> else:
\( 2> \) add a new entry for this condReconfigld within the VarConditionalReconfig;

ETSI


--- Page 112  ---


3GPP TS 38.331 version 17.0.0 Release 17
111
ETSI TS 138331 V17.0.0 (2022-05)

1> perform conditional reconfiguration evaluation as specified in 5.3.5.13.4;
5.3.5.13.4 Conditional reconfiguration evaluation

The UE shall:
\( 1> \) for each condReconfigld within the VarConditionalReconfig:
\( 2> \) if the RRCReconfiguration within condRRCReconfig includes the masterCellGroup including the reconfigurationWithSync, consider the cell which has a physical cell identity matching the value indicated in the ServingCellConfigCommon included in the reconfigurationWithSync within the masterCellGroup in the received condRRCReconfig to be applicable cell;
\( 2> \) if the RRCReconfiguration within condRRCReconfig includes the secondaryCellGroup including the reconfigurationWithSync, consider the cell which has a physical cell identity matching the value indicated in the ServingCellConfigCommon included in the reconfigurationWithSync within the secondaryCellGroup within the received condRRCReconfig to be applicable cell;
\( 2> \) if condExecutionCondSCG is configured:
\( 3> \) in the remainder of the procedures, consider each measId indicated in the condExecutionCondSCG as a measId in the VarMeasConfig associated with the SCG measConfig;
\( 2> \) if condExecutionCond is configured:
3> if it is configured via SRB3 or configured within \( n r \)-SCG or within \( n r \)-SecondaryCellGroupConfig (specified in TS 36.331 [10]) via SRB1:

4> in the remainder of the procedures, consider each measId indicated in the condExecutionCond as a measId in the VarMeasConfig associated with the SCG measConfig;

3> otherwise:
4> in the remainder of the procedures, consider each measId indicated in the condExecutionCond as a measId in the VarMeasConfig associated with the MCG measConfig;
\( 2> \) for each measId included in the measIdList within VarMeasConfig indicated in the condExecutionCond or condExecutionCondSCG associated to condReconfigld:

3> if the condEventld is associated with condEventT1, and if the entry condition(s) applicable for this event associated with the condReconfigld, i.e. the event corresponding with the condEventId(s) of the corresponding condTriggerConfig within VarConditionalReconfig, is fulfilled for the applicable cells; or
\( 3> \) if the condEventld is associated with condEventD1, and if the entry condition(s) applicable for this event associated with the condReconfigld, i.e. the event corresponding with the condEventId(s) of the corresponding condTriggerConfig within VarConditionalReconfig, is fulfilled for the applicable cells during the corresponding timeToTrigger defined for this event within the VarConditionalReconfig; or
\( 3> \) if the condEventld is associated with condEventA3, condEventA4 or condEventA5, and if the entry condition(s) applicable for this event associated with the condReconfigld, i.e. the event corresponding with the condEventId(s) of the corresponding condTriggerConfig within VarConditionalReconfig, is fulfilled for the applicable cells for all measurements after layer 3 filtering taken during the corresponding timeToTrigger defined for this event within the VarConditionalReconfig:

4> consider the event associated to that measId to be fulfilled;
3> if the measId for this event associated with the condReconfigId has been modified; or
3> if the condEventld is associated with condEventT1, and if the leaving condition(s) applicable for this event associated with the condReconfigId, i.e. the event corresponding with the condEventId(s) of the corresponding condTriggerConfig within VarConditionalReconfig, is fulfilled for the applicable cells; or
\( 3> \) if the condEventld is associated with condEventD1, and if the leaving condition(s) applicable for this event associated with the condReconfigId, i.e. the event corresponding with the condEventId(s) of the

ETSI


--- Page 113  ---


3GPP TS 38.331 version 17.0.0 Release 17
112
ETSI TS 138331 V17.0.0 (2022-05)

corresponding condTriggerConfig within VarConditionalReconfig, is fulfilled for the applicable cells during the corresponding timeToTrigger defined for this event within the VarConditionalReconfig; or
\( 3> \) if the condEventld is associated with condEventA3, condEventA4 or condEventA5, and if the leaving condition(s) applicable for this event associated with the condReconfigld, i.e the event corresponding with the condEventld(s) of the corresponding condTriggerConfig within VarConditionalReconfig, is fulfilled for the applicable cells for all measurements after layer 3 filtering taken during the corresponding timeToTrigger defined for this event within the VarConditionalReconfig:
\( 4> \) consider the event associated to that measld to be not fulfilled;
\( 2> \) if event(s) associated to all measld(s) within condTriggerConfig for a target candidate cell within the stored condRRCReconfig are fulfilled:
\( 3> \) consider the target candidate cell within the stored condRRCReconfig, associated to that condReconfigld, as a triggered cell;
\( 3> \) initiate the conditional reconfiguration execution, as specified in 5.3.5.13.5;
NOTE: Up to 2 Measld can be configured for each condReconfigld. The conditional reconfiguration event of the 2 Measld may have the same or different event conditions, triggering quantity, time to trigger, and triggering threshold.
5.3.5.13.4a Conditional reconfiguration evaluation of SN initiated inter-SN CPC for EN-DC

Editors Note: FFS If EN-DC support in 5.3.5.13.4a should be merged to 5.3.5.13.4.
The UE shall:
\( 1> \) for each condReconfigld within the VarConditionalReconfig specified in TS 36.331[10],:
\( 1> \) in the remainder of the procedures, consider each measId indicated in the IE of CondReconfigExecCondSN contained in the triggerConditionSN as specified in TS 36.331[10], as a measld in the VarMeasConfig associated with the SCG measConfig;
\( 1> \) for each measld included in the measldList within VarMeasConfig indicated in the CondReconfigExecCondSN contained in the triggerConditionSN associated to the condReconfigurationId as specified in TS 36.331[10]:
\( 2> \) if the entry condition(s) applicable for the event associated with that measld, is fulfilled for the applicable cells for all measurements after layer 3 filtering taken during the corresponding timeToTrigger defined for this event associated with that measld:
\( 3> \) consider this event to be fulfilled;
\( 2> \) if the measld for this event has been modified; or
\( 2> \) if the leaving condition(s) applicable for this event associated with that measld, is fulfilled for the applicable cells for all measurements after layer 3 filtering taken during the corresponding timeToTrigger defined for this event associated with that measld:
\( 3> \) consider this event associated to that measld to be not fulfilled;
\( 1> \) if trigger conditions for all events associated with the measId(s) indicated in the IE of CondReconfigExecCondSN contained in the triggerConditionSN as specified in TS 36.331[10]), are fulfilled:
\( 2> \) consider the target cell candidate within the RRCReconfiguration message contained in \( n r \) -
SecondaryCellGroupConfig in the RRCConnectionReconfiguration message, as specified in TS 36.331[10], contained in the stored condReconfigurationToApply, associated to that condReconfigurationId as specified in TS \( 36.331[10] \) ), clause 5.3.5.9.4, as a triggered cell;
\( 2> \) initiate the conditional reconfiguration execution, as specified in TS 36.331[10]), clause 5.3.5.9.5;

ETSI


--- Page 114  ---


3GPP TS 38.331 version 17.0.0 Release 17
113
ETSI TS 138331 V17.0.0 (2022-05)

NOTE: If multiple NR cells are triggered in conditional reconfiguration execution, it is up to UE implementation which one to select, e.g. the UE considers beams and beam quality to select one of the triggered cells for execution.
5.3.5.13.5 Conditional reconfiguration execution

The UE shall:
1> if more than one triggered cell exists:
\( 2> \) select one of the triggered cells as the selected cell for conditional reconfiguration execution;
1> else:
\( 2> \) consider the triggered cell as the selected cell for conditional reconfiguration execution;
\( 1> \) for the selected cell of conditional reconfiguration execution:
\( 2> \) apply the stored condRRCReconfig of the selected cell and perform the actions as specified in 5.3.5.3;
NOTE: If multiple NR cells are triggered in conditional reconfiguration execution, it is up to UE implementation which one to select, e.g. the UE considers beams and beam quality to select one of the triggered cells for execution.
5.3.5.13a SCG activation

Upon initiating the procedure, the UE shall:
1> if the UE is configured with an SCG after receiving the message for which this procedure is initiated:
\( 2> \) consider the SCG to be activated;
2 if the UE was configured with a deactivated SCG before receiving the message for which this procedure is initiated:

Editor's note:FFS whether to remove the condition above if that is handled in TS 38.321.
3> resume performing radio link monitoring on the SCG, if previously stopped;
3> indicate to lower layers that the SCG is activated.
5.3.5.13b SCG deactivation

Upon initiating the procedure, the UE shall:
1> consider the SCG to be deactivated;
\( 1> \) reset SCG MAC;
1> indicate to lower layers that the SCG is deactivated;
Editor's note: FFS whether to make the above statement conditional to the SCG being previously activated.
1> If bfd-and-RLM is not configured to true:
\( 2> \) stop radio link monitoring on the SCG;
\( 2> \) indicate to lower layers to stop beam failure detection on the PSCell;
\( 2> \) stop timer T310 for this cell group, if running;
\( 2> \) stop timer T312 for this cell group, if running;
\( 2> \) reset the counters N310 and N311;

ETSI


--- Page 115  ---


3GPP TS 38.331 version 17.0.0 Release 17
114
ETSI TS 138331 V17.0.0 (2022-05)

1> if the UE was in RRC_CONNECTED and the SCG was activated before receiving the message for which this procedure is initiated:

2 if SRB3 was configured before the reception of the RRCReconfiguration or of the RRCConnectionReconfiguration and SRB3 is not to be released according to any RadioBearerConfig included in the RRCReconfiguration or in the RRCConnectionReconfiguration as specified in TS 36.331[10]:

3> trigger the PDCP entity of SRB3 to perform SDU discard as specified in TS 38.323 [5];
3> re-establish the RLC entity of SRB3 as specified in TS 38.322 [4].
5.3.5.13c FR2 UL gap configuration

The UE shall:
1> if ul-GapFR2-Config is set to setup:
\( 2> \) if an FR2 UL gap configuration is already setup, release the FR2 UL gap configuration;
\( 2> \) setup the FR2 UL gap configuration indicated by the ul-GapFR2-Config in accordance with the received gapOffset, i.e., the first subframe of each gap occurs at an SFN and subframe meeting the following condition:

SFN mod T = FLOOR (gapOffse/10);
if the UGRP is larger than 5 ms :
subframe \( = \) gapOffset \( \bmod 10 \);
else:
subframe \( = \) gapOffset or \( ( \) gapOffset +5\( ) \);
with \( \mathrm{T}=\mathrm{CEIL}(\mathrm{UGRP} / 10) \).
\( 1> \) else if ul-GapFR2-Config is set to release:
\( 2> \) release the FR2 UL gap configuration.
NOTE 1: For \( u \)-GapFR2-Config configuration with synchronous CA, the SFN and subframe of a serving cell on FR2 frequency is used in the gap calculation. For ul-GapFR2-Config configuration with asynchronous CA, the SFN and subframe of a serving cell on FR2 frequency indicated by the refFR2ServCellAsyncCA in ul-GapFR2-Config is used in the gap calculation.
5.3.5.13d Application layer measurement configuration

The UE shall:
1> if measConfigAppLayerToAddReleaseList is included in appLayerMeasConfig within RRCReconfiguration or RRCResume:
\( 2> \) for each measConfigAppLayerId value included in the measConfigAppLayerToReleaseList:
3> forward the measConfigAppLayerId and inform upper layers about the release of the application layer measurement configuration including any RAN visible configuration;
\( 3> \) discard any received application layer measurement report received from upper layers;
3> consider itself not to be configured to send application layer measurement report for the measConfigAppLayerId.

1> if measConfigAppLayerToAddModList is included in appLayerMeasConfig within RRCReconfiguration or RRCResume:
\( 2> \) for each measConfigAppLayerId value included in the measConfigAppLayerToAddModList:

ETSI


--- Page 116  ---


3GPP TS 38.331 version 17.0.0 Release 17
115
ETSI TS 138331 V17.0.0 (2022-05)

3> if measConfigAppLayerContainer is included for the corresponding MeasConfigAppLayer configuration:
\( 4> \) forward the measConfigAppLayerContainer, the measConfigAppLayerId and the serviceType to upper layers considering the serviceType;

3> consider itself to be configured to send application layer measurement report for the measConfigAppLayerId in accordance with 5.7.16;

3> forward the transmissionOfSessionStartStop, if received, to upper layers;
3> if ran-VisibleParameters is set to setup and the parameters have been received;
\( 4> \) forward the measConfigAppLayerId, the ran-VisiblePeriodicity, the numberOfBufferLevelEntries and the reportInitialPlayOutDelay to upper layers considering the serviceType;

3> else if ran-VisibleParameters is set to release:
4> forward the measConfigAppLayerId and inform upper layers about the release of the RAN visible application layer measurement configuration;
\( 3> \) if pauseReporting is set to true:
4> if at least one segment, but not all segments, of a segmented MeasurementReportAppLayer message containing an application layer measurement report associated with the measConfigAppLayerId has been submitted to lower layers for transmission:

5> submit the remaining segments of the MeasurementReportAppLayer message to lower layers for transmission;
\( 4> \) suspend submitting application layer measurement report containers to lower layers for the application layer measurement configuration associated with the measConfigAppLayerId;

4> store any previously or subsequently received application layer measurement report containers associated with the measConfigAppLayerId for which no segment, or full message, has been submitted to lower layers for transmission;

3> else if pauseReporting is set to false and if transmission of application layer measurement report containers has previously been suspended for the application layer measurement configuration associated with the measConfigAppLayerId:
\( 4> \) submit stored application layer measurement report containers to lower layers for the application layer measurements configuration associated with the measConfigAppLayerId;

4> resume submitting application layer measurement report containers to lower layers for the application layer measurement configuration associated with the measConfigAppLayerId;

NOTE 1: The UE may discard reports when the memory reserved for storing application layer measurement reports becomes full.

NOTE 2: The transmission of RAN visible reports is not paused when pauseReporting is set to true.
5.3.5.14 Sidelink dedicated configuration

Upon initiating the procedure, the UE shall:
\( 1> \) if \( s \) l-FreqInfoToReleaseList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) for each entry included in the received \( s \) /-FreqInfoToReleaseList that is part of the current UE configuration:
\( 3> \) release the related configurations from the stored NR sidelink communication configurations;
\( 1> \) if \( s \) l-FreqInfoToAddModList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) if configured to receive NR sidelink communication:

ETSI


--- Page 117  ---


3GPP TS 38.331 version 17.0.0 Release 17
116
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) use the resource pool(s) indicated by \( s l \)-RxPool for NR sidelink communication reception, as specified in 5.8.7;
\( 2> \) if configured to transmit NR sidelink communication:
\( 3> \) use the resource pool(s) indicated by \( s i \)-TxPoolSelectedNormal, sl-TxPoolSelectedNormalPS, slTxPoolScheduling or sl-TxPoolExceptional for NR sidelink communication transmission, as specified in 5.8.8;
\( 2> \) if configured to receive NR sidelink discovery:
\( 3> \) use the resource pool(s) indicated by \( s l \)-DiscRxPool or \( s l \)-RxPool for NR sidelink discovery reception, as specified in 5.8.13.2;

2 if configured to transmit NR sidelink discovery:
3> use the resource pool(s) indicated by sl-DiscTxPoolSelected, sl-DiscTxPoolScheduling, slTxPoolSelectedNormal, sl-TxPoolScheduling or sl-TxPoolExceptional for NR sidelink discovery transmission, as specified in 5.8.13.3;
\( 2> \) perform CBR measurement on the transmission resource pool(s) indicated by sl-TxPoolSelectedNormal, slTxPoolSelectedNormalPS, sl-TxPoolScheduling, sl-DiscTxPoolSelected, sl-DiscTxPoolScheduling or slTxPoolExceptional for NR sidelink communication transmission, as specified in 5.5.3;
\( 2> \) use the synchronization configuration parameters for NR sidelink communication on frequencies included in sl-FreqInfoToAddModList, as specified in 5.8.5;
\( 1> \) if sl-RadioBearerToReleaseList or sl-RLC-BearerToReleaseList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) perform sidelink DRB release as specified in 5.8.9.1a.1;
\( 1> \) if \( s \) l-RadioBearerToAddModList or sl-RLC-BearerToAddModList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) perform sidelink DRB addition/modification as specified in 5.8.9.1a.2;
\( 1> \) if \( s \) l-ScheduledConfig is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) configure the MAC entity parameters, which are to be used for NR sidelink communication, in accordance with the received \( s l \)-ScheduledConfig;
\( 1> \) if \( s \)-UE-SelectedConfig is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) configure the parameters, which are to be used for NR sidelink communication, in accordance with the received \( s \)-UE-SelectedConfig;
\( 1> \) if \( s \) l-MeasConfigInfoToReleaseList is included in \( s \) l-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) for each SL-DestinationIndex included in the received sl-MeasConfigInfoToReleaseList that is part of the current UE configuration:
\( 3> \) remove the entry with the matching SL-DestinationIndex from the stored NR sidelink measurement configuration information;
\( 1> \) if \( s \) l-MeasConfigInfoToAddModList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) for each sl-DestinationIndex included in the received sl-MeasConfigInfoToAddModList that is part of the current stored NR sidelink measurement configuration:
\( 3> \) reconfigure the entry according to the value received for this \( s l \)-DestinationIndex from the stored NR sidelink measurement configuration information;
\( 2> \) for each \( s \) /-DestinationIndex included in the received \( s \) /-MeasConfigInfoToAddModList that is not part of the current stored NR sidelink measurement configuration:
\( 3> \) add a new entry for this \( s l \)-DestinationIndex to the stored NR sidelink measurement configuration.

ETSI


--- Page 118  ---


3GPP TS 38.331 version 17.0.0 Release 17
117
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if sl-DRX-ConfigUC-ToReleaseList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) for each \( S L \)-DestinationIndex included in the received sl-DRX-ConfigUC-ToReleaseList that is part of the current UE configuration:
\( 3> \) remove the entry with the matching \( S L \)-DestinationIndex from the stored NR sidelink DRX configuration information;
\( 1> \) if \( s \)-DRX-Config UC-ToAddModList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) for each sl-DestinationIndex included in the received sl-DRX-ConfigUC-ToAddModList that is part of the current stored NR sidelink DRX configuration:
\( 3> \) reconfigure the entry according to the value received for this \( s \)-DestinationIndex from the stored NR sidelink DRX configuration information;
\( 2> \) for each \( s \)-DestinationIndex included in the received \( s \)-DRX-ConfigUC-ToAddModList that is not part of the current stored NR sidelink DRX configuration:
\( 3> \) add a new entry for this \( s \)-DestinationIndex to the stored NR sidelink DRX configuration.
\( 1> \) if \( s \)-RLC-ChannelToReleaseList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) perform PC5 Relay RLC channel release as specified in 5.8.9.1.2;
\( 1> \) if \( s \) /-RLC-ChannelToAddModList is included in sl-ConfigDedicatedNR within RRCReconfiguration:
\( 2> \) perform PC5 Relay RLC channel addition/modification as specified in 5.8.9.1.2;
5.3.5.15 L2 U2N Relay UE configuration
5.3.5.15.1 General

The network configures the L2 U2N Relay UE with relay operation related configurations. For each connected L2 U2N Remote UE indicated in sl-L2Identity-Remote, the network provides the configuration parameters used for data relaying.

The UE performs the following actions based on a received s/-L2RelayUEConfig:
\( 1> \) if the sl-L2RelayUEConfig contains the sl-RemoteUE-ToReleaseList:
\( 2> \) perform the L2 U2N Remote UE release as specified in 5.3.5.15.2;
\( 1> \) if the sl-L2RelayUEConfig contains the sl-RemoteUE-ToAddModList:
\( 2> \) perform the L2 U2N Remote UE addition/modification as specified in 5.3.5.15.3;
5.3.5.15.2 L2 U2N Remote UE Release

The L2 U2N Relay UE shall:
\( 1> \) if the release is triggered by reception of the \( s / \)-RemoteUE-ToReleaseList:
\( 2> \) for each sl-L2Identity-Remote value included in the s/-RemoteUE-ToReleaseList:
\( 3> \) if the current UE has a PC5 RRC connection to a L2 U2N Remote UE with sl-L2Identity-Remote: 4 perform the PC5-RRC connection release as specified in 5.8.9.5.
5.3.5.15.3 L2 U2N Remote UE Addition/Modification

The L2 U2N Relay UE shall:
\( 1> \) for each \( s \) /-L2Identity-Remote value included in the \( s \)-RemoteUE-ToAddModList that is not part of the current UE configuration (L2 U2N Remote UE Addition):

ETSI


--- Page 119  ---


3GPP TS 38.331 version 17.0.0 Release 17
118
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) configure the parameters to SRAP entity in accordance with the \( s l \)-SRAP-Config-Relay;
\( 1> \) for each sl-L2Identity-Remote value included in the sl-RemoteUE-ToAddModList that is part of the current UE configuration (L2 U2N Remote UE modification):
\( 2> \) modify the configuration in accordance with the \( s l \)-SRAP-Config-Relay;
5.3.5.16 L2 U2N Remote UE configuration
5.3.5.16.1 General

The network configures the L2 U2N Remote UE with relay operation related configurations, e.g. SRAP configuration.
The UE performs the following actions:
\( 1> \) if the \( s \) l-L2RemoteUEConfig contains the \( s \) l-SRAP-Config-Remote:
\( 2> \) configure the parameters to SRAP entity in accordance with the \( s l \)-SRAP-Config-Remote;
\( 1> \) if the \( s \)-L2RemoteUEConfig contains the \( s \)-ServingCellInfo:
\( 2> \) use the value of the sl-PhysCellld as the physical cell identity of the PCell;
\( 2> \) use the value of the sl-UEIdentityRemote as the C-RNTI in the PCell.
5.3.6 Counter check
5.3.6.1 General

Figure 5.3.6.1-1: Counter check procedure

The counter check procedure is used by the network to request the UE to verify the amount of data sent/received on each DRB. More specifically, the UE is requested to check if, for each DRB, the most significant bits of the COUNT match with the values indicated by the network.

NOTE: The procedure enables the network to detect packet insertion by an intruder (a 'man in the middle').
5.3.6.2 Initiation

The network initiates the procedure by sending a CounterCheck message.
NOTE: The network may initiate the procedure when any of the COUNT values reaches a specific value.
5.3.6.3 Reception of the CounterCheck message by the UE

Upon receiving the CounterCheck message, the UE shall:
1> for each DRB that is established:
\( 2> \) if no COUNT exists for a given direction (uplink or downlink) because it is a uni-directional bearer configured only for the other direction:

ETSI


--- Page 120  ---


3GPP TS 38.331 version 17.0.0 Release 17
119
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) assume the COUNT value to be 0 for the unused direction;
\( 2> \) if the drb-Identity is not included in the drb-CountMSB-InfoList:
3> include the DRB in the drb-CountInfoList in the CounterCheckResponse message by including the drbIdentity, the count-Uplink and the count-Downlink set to the value of TX_NEXT -1 and RX_NEXT -1 (specified in TS 38.323 [5]), respectively;
\( 2> \) else if, for at least one direction, the most significant bits of the COUNT are different from the value indicated in the drb-CountMSB-InfoList:

3> include the DRB in the drb-CountInfoList in the CounterCheckResponse message by including the drbIdentity, the count-Uplink and the count-Downlink set to the value of TX_NEXT -1 and RX_NEXT -1 (specified in TS 38.323 [5]), respectively;

1> for each DRB that is included in the drb-CountMSB-InfoList in the CounterCheck message that is not established:
\( 2> \) include the DRB in the drb-CountInfoList in the CounterCheckResponse message by including the drbIdentity, the count-Uplink and the count-Downlink with the most significant bits set identical to the corresponding values in the drb-CountMSB-InfoList and the least significant bits set to zero;

1> submit the CounterCheckResponse message to lower layers for transmission upon which the procedure ends.
5.3.7 RRC connection re-establishment
5.3.7.1 General

Figure 5.3.7.1-1: RRC connection re-establishment, successful

Figure 5.3.7.1-2: RRC re-establishment, fallback to RRC establishment, successful

The purpose of this procedure is to re-establish the RRC connection. A UE in RRC_CONNECTED, for which AS security has been activated with SRB2 and at least one DRB/multicast MRB setup or, for [AB, SRB2, may initiate the procedure in order to continue the RRC connection. The connection re-establishment succeeds if the network is able to find and verify a valid UE context or, if the UE context cannot be retrieved, and the network responds with an RRCSetup according to clause 5.3.3.4.

ETSI


--- Page 121  ---


3GPP TS 38.331 version 17.0.0 Release 17
120
ETSI TS 138331 V17.0.0 (2022-05)

The network applies the procedure e g as follows:
- When AS security has been activated and the network retrieves or verifies the UE context:
- to re-activate AS security without changing algorithms;
- to re-establish and resume the SRB1;
- When UE is re-establishing an RRC connection, and the network is not able to retrieve or verify the UE context:
- to discard the stored AS Context and release all RBs and BH RLC channels and Uu Relay RLC channels;
- to fallback to establish a new RRC connection.

If AS security has not been activated, the UE shall not initiate the procedure but instead moves to RRC_IDLE directly, with release cause 'other'. If AS security has been activated, but SRB2 and at least one DRB or multicast MRB or, for [AB, SRB2, are not setup, the UE does not initiate the procedure but instead moves to RRC_IDLE directly, with release cause 'RRC connection failure'.
5.3.7.2 Initiation

The UE initiates the procedure when one of the following conditions is met:
\( 1> \) upon detecting radio link failure of the MCG and \( t 316 \) is not configured, in accordance with 5.3 .10 ; or
\( 1> \) upon detecting radio link failure of the MCG while SCG transmission is suspended, in accordance with 5.3 .10 ; or
\( 1> \) upon detecting radio link failure of the MCG while PSCell change or PSCell addition is ongoing, in accordance with 5.3.10; or
\( 1> \) upon re-configuration with sync failure of the MCG, in accordance with clause 5.3.5.8.3; or
\( 1> \) upon mobility from NR failure, in accordance with clause 5.4 .3 .5 ; or
\( 1> \) upon integrity check failure indication from lower layers concerning SRB1 or SRB2, except if the integrity check failure is detected on the RRCReestablishment message; or
\( 1> \) upon an RRC connection reconfiguration failure, in accordance with clause 5.3.5.8.2; or
\( 1> \) upon detecting radio link failure for the SCG while MCG transmission is suspended, in accordance with clause 5.3.10.3 in NR-DC or in accordance with TS 36.331 [10] clause 5.3.11.3 in NE-DC; or

1> upon reconfiguration with sync failure of the SCG while MCG transmission is suspended in accordance with clause 5.3.5.8.3; or
\( 1> \) upon SCG change failure while MCG transmission is suspended in accordance with TS 36.331 [10] clause 5.3.5.7a; or
\( 1> \) upon SCG configuration failure while MCG transmission is suspended in accordance with clause 5.3.5.8.2 in NR-DC or in accordance with TS 36.331 [10] clause 5.3.5.5 in NE-DC; or
\( 1> \) upon integrity check failure indication from SCG lower layers concerning SRB3 while MCG is suspended; or
\( 1> \) upon T316 expiry, in accordance with clause 5.7.3b.5; or
1> upon detecting sidelink radio link failure by L2 U2N Remote UE in RRC_CONNECTED, in accordance with clause 5.8.9.3; or
\( 1> \) upon reception of NotificationMessageSidelink including indicationType by L2 U2N Remote UE in RRC_CONNECTED, in accordance with clause 5.8.9.10.

Upon initiation of the procedure, the UE shall:
\( 1> \) stop timer T310, if running;
\( 1> \) stop timer T312, if running;

ETSI


--- Page 122  ---


3GPP TS 38.331 version 17.0.0 Release 17
121
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) stop timer T304, if running;
\( 1> \) start timer T311;
\( 1> \) stop timer T316, if running;
\( 1> \) if UE is not configured with conditionalReconfiguration:
\( 2> \) reset MAC;
\( 2> \) release spCellConfig, if configured;
\( 2> \) suspend all RBs, and BH RLC channels for [AB-MT, and Uu Relay RLC channels for L2 U2N Relay UE, except SRB0;
\( 2> \) release the MCG SCell(s), if configured;
\( 2> \) if MR-DC is configured:
\( 3> \) perform MR-DC release, as specified in clause 5.3.5.10;
\( 2> \) release delayBudgetReportingConfig, if configured and stop timer T342, if running;
\( 2> \) release overheatingAssistanceConfig, if configured and stop timer T345, if running;
\( 2> \) release idc-AssistanceConfig, if configured;
2> release btNameList, if configured;
\( 2> \) release wlanNameList, if configured;
\( 2> \) release sensorNameList, if configured;
\( 2> \) release drx-PreferenceConfig for the MCG, if configured and stop timer T346a associated with the MCG, if running;

2 release maxBW-PreferenceConfig for the MCG, if configured and stop timer T346b associated with the MCG, if running;
\( 2> \) release maxCC-PreferenceConfig for the MCG, if configured and stop timer T346c associated with the MCG, if running;

2 release maxMIMO-LayerPreferenceConfig for the MCG, if configured and stop timer T346d associated with the MCG, if running;
\( 2> \) release minSchedulingOffsetPreferenceConfig for the MCG, if configured stop timer T346e associated with the MCG, if running;
\( 2> \) release nim-RelaxationReportingConfig for the MCG, if configured and stop timer T346j associated with the MCG, if running;
\( 2> \) release bfd-RelaxationReportingConfig for the MCG, if configured and stop timer T346k associated with the MCG, if running;
\( 2> \) release releasePreferenceConfig, if configured stop timer T346f, if running;
\( 2> \) release onDemandSIB-Request if configured, and stop timer T350, if running;
\( 2> \) release referenceTimePreferenceReporting, if configured;
\( 2> \) release \( s \) l-AssistanceConfigNR, if configured;
\( 2> \) release obtainCommonLocation, if configured;
\( 2> \) release musim-GapAssistanceConfig, if configured and stop timer T346h, if running;
\( 2> \) release musim-LeaveAssistanceConfig, if configured;

ETSI


--- Page 123  ---


3GPP TS 38.331 version 17.0.0 Release 17
122
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) release scg-DeactivationPreferenceConfig, if configured, and stop timer T346i, if running;
1> release successHO-Config, if configured;
\( 1> \) if any DAPS bearer is configured:
\( 2> \) reset the source MAC and release the source MAC configuration;
\( 2> \) for each DAPS bearer:
3> release the RLC entity or entities as specified in TS 38.322 [4], clause 5.1.3, and the associated logical channel for the source SpCell;

3> reconfigure the PDCP entity to release DAPS as specified in TS 38.323 [5];
\( 2> \) for each SRB:
3> release the PDCP entity for the source SpCell;
3> release the RLC entity as specified in TS 38.322 [4], clause 5.1.3, and the associated logical channel for the source SpCell;
\( 2> \) release the physical channel configuration for the source SpCell;
\( 2> \) discard the keys used in the source SpCell (the \( \mathrm{K}_{\mathrm{gNB}} \) key, the \( \mathrm{K}_{\mathrm{RRCenc}} \) key, the \( \mathrm{K}_{\mathrm{RRC} \text { int }} \) key, the \( \mathrm{K}_{\text {UPint }} \) key and the \( K_{\text {UPenc }} \) key), if any;
\( 1> \) release \( s \) /-L2RelayUEConfig, if configured;
\( 1> \) release \( s \) /-L2RemoteUEConfig, if configured;
\( 1> \) release the SRAP entity, if configured;
1> if the UE is connected with a L2 U2N Relay UE via PC5-RRC connection (i.e. the UE is a L2 U2N Remote UE):
\( 2> \) if the PC5-RRC connection with the U2N Relay UE is determined to be released:
\( 3> \) perform the PC5-RRC connection release as specified in 5.8.9.5;
3> perform either cell selection in accordance with the cell selection process as specified in TS 38.304 [20], or relay selection as specified in clause 5.8.15.3, or both;
\( 2> \) else maintain the PC5 RRC connection and stop T311 if running;
NOTE 1: It is up to Remote UE implementation whether to release or keep the current unicast PC5 link.
1> else:
\( 2> \) perform cell selection in accordance with the cell selection process as specified in TS 38.304 [20].
NOTE 2: For L2 U2N Remote UE, if both a suitable cell and a suitable relay are available, the UE can select either one based on its implementation.
5.3.7.3 Actions following cell selection while T311 is running

Upon selecting a suitable NR cell, the UE shall:
\( 1> \) ensure having valid and up to date essential system information as specified in clause 5.2.2.2;
\( 1> \) stop timer T311;
1> if T390 is running:
\( 2> \) stop timer T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4;

ETSI


--- Page 124  ---


3GPP TS 38.331 version 17.0.0 Release 17
123
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if the cell selection is triggered by detecting radio link failure of the MCG or re-configuration with sync failure of the MCG or mobility from NR failure, and
\( 1> \) if attemptCondReconfig is configured; and
1> if the selected cell is one of the candidate cells for which the reconfigurationWithSync is included in the masterCellGroup in VarConditionalReconfig:
\( 2> \) set the choCellld in the VarRLF-Report to the global cell identity and tracking area code, if available, otherwise to the physical cell identity and carrier frequency of the selected cell;
\( 2> \) apply the stored condRRCReconfig associated to the selected cell and perform actions as specified in 5.3.5.3;
NOTE 1: It is left to network implementation to how to avoid keystream reuse in case of CHO based recovery after a failed handover without key change.

1> else:
\( 2> \) if UE is configured with conditionalReconfiguration:
\( 3> \) reset MAC;
3> release spCellConfig, if configured;
3> release the MCG SCell(s), if configured;
3> release delayBudgetReportingConfig, if configured and stop timer T342, if running;
3> release overheatingAssistanceConfig, if configured and stop timer T345, if running;
\( 3> \) if MR-DC is configured:
\( 4> \) perform MR-DC release, as specified in clause 5.3_5.10;
3> release idc-AssistanceConfig, if configured;
3> release btNameList, if configured;
3> release wlanNameList, if configured;
3> release sensorNameList, if configured;
3> release drx-PreferenceConfig for the MCG, if configured and stop timer T346a associated with the MCG, if running;

3> release maxBW-PreferenceConfig for the MCG, if configured and stop timer T346b associated with the MCG, if running;

3> release maxCC-PreferenceConfig for the MCG, if configured and stop timer T346c associated with the MCG, if running;

3> release maxMIMO-LayerPreferenceConfig for the MCG, if configured and stop timer T346d associated with the MCG, if running;

3> release minSchedulingOffsetPreferenceConfig for the MCG, if configured and stop timer T346e associated with the MCG, if running;

3> release rim-RelaxationReportingConfig for the MCG, if configured and stop timer T346j associated with the MCG, if running;

3> release bfd-RelaxationReportingConfig for the MCG, if configured and stop timer T346k associated with the MCG, if running;

3> release releasePreferenceConfig, if configured and stop timer T346f, if running;
3> release onDemandSIB-Request if configured, and stop timer T350, if running;
3> release referenceTimePreferenceReporting, if configured;

ETSI


--- Page 125  ---


3GPP TS 38.331 version 17.0.0 Release 17
124
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) release \( s \)-AssistanceConfigNR, if configured;
\( 3> \) release obtain CommonLocation, if configured;
\( 3> \) release scg-DeactivationPreferenceConfig, if configured, and stop timer T346i, if running;
\( 3> \) suspend all RBs, except SRB0;
\( 2> \) remove all the entries within VarConditionalReconfig, if any;
\( 2> \) for each measld, if the associated reportConfig has a reportType set to condTriggerConfig:
\( 3> \) for the associated reportConfigld:
\( 4> \) remove the entry with the matching reportConfigld from the reportConfigList within the VarMeasConfig;
\( 3> \) if the associated measObjectld is only associated to a reportConfig with reportType set to condTriggerConfig:

4 remove the entry with the matching measObjectld from the measObjectList within the VarMeasConfig;
\( 3> \) remove the entry with the matching measld from the measldList within the VarMeasConfig;
\( 2> \) start timer T301;
\( 2> \) apply the default L1 parameter values as specified in corresponding physical layer specifications except for the parameters for which values are provided in SIBI;
\( 2> \) apply the default MAC Cell Group configuration as specified in 9.2.2;
\( 2> \) apply the CCCH configuration as specified in 9.1.1.2;
\( 2> \) apply the timeAlignmentTimerCommon included in SIBI;
\( 2> \) initiate transmission of the RRCReestablishmentRequest message in accordance with 5.3.7.4;
NOTE 2: This procedure applies also if the UE returns to the source PCell.
Upon selecting an inter-RAT cell, the UE shall:
\( 1> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'RRC connection failure'.
5.3.7.3a Actions following relay selection while T311 is running

Upon selecting a suitable L2 U2N Relay UE, the L2 U2N Remote UE shall:
\( 1> \) ensure having valid and up to date essential system information as specified in clause 5.2.2.2;
\( 1> \) stop timer T311;
\( 1> \) if T390 is running:
\( 2> \) stop timer T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4;
\( 1> \) start timer T301;
\( 1> \) apply the specified configuration of SL-RLC0 as specified in 9.1.1.4;
\( 1> \) apply the SDAP configuration and PDCP configuration as specified in 9.1.1.2 for SRB0;
\( 1> \) initiate transmission of the RRCReestablishmentRequest message in accordance with 5.3 .7 .4 .

ETSI


--- Page 126  ---


3GPP TS 38.331 version 17.0.0 Release 17
125
ETSI TS 138331 V17.0.0 (2022-05)
5.3.7.4 Actions related to transmission of RRCReestablishmentRequest message

The UE shall set the contents of RRCReestablishmentRequest message as follows:
\( 1> \) if the procedure was initiated due to radio link failure as specified in 5.3 .10 .3 or reconfiguration with sync failure as specified in 5.3.5.8.3:
\( 2> \) set the reestablishmentCellld in the VarRLF-Report to the global cell identity of the selected cell;
\( 1> \) set the ue-Identity as follows:
\( 2> \) set the \( c \)-RNTI to the C-RNTI used in the source PCell (reconfiguration with sync or mobility from NR failure) or used in the PCell in which the trigger for the re-establishment occurred (other cases);
\( 2> \) set the physCellld to the physical cell identity of the source PCell (reconfiguration with sync or mobility from NR failure) or of the PCell in which the trigger for the re-establishment occurred (other cases);
\( 2> \) set the shortMAC-I to the 16 least significant bits of the MAC-I calculated:
\( 3> \) over the ASN 1 encoded as per clause 8 (i.e., a multiple of 8 bits) VarShortMAC-Input;
\( 3> \) with the \( K_{R R C n t} \) key and integrity protection algorithm that was used in the source PCell (reconfiguration with sync or mobility from NR failure) or of the PCell in which the trigger for the re-establishment occurred (other cases); and
\( 3> \) with all input bits for COUNT, BEARER and DIRECTION set to binary ones;
\( 1> \) set the reestablishmentCause as follows:
\( 2> \) if the re-establishment procedure was initiated due to reconfiguration failure as specified in 5.3 .5 .8 .2 :
\( 3> \) set the reestablishmentCause to the value reconfigurationFailure;
\( 2> \) else if the re-establishment procedure was initiated due to reconfiguration with sync failure as specified in 5.35 .8 .3 (intra-NR handover failure) or 5.4 .3 .5 (inter-RAT mobility from NR failure):
\( 3> \) set the reestablishmentCause to the value handoverFailure;
\( 2> \) else:
\( 3> \) set the reestablishmentCause to the value otherFailure;
\( 1> \) re-establish PDCP for SRB1;
\( 1> \) if the UE is connected with a L2 U2N Relay UE via PC5-RRC connection (i.e the UE is a L2 U2N Remote UE):
\( 2> \) apply the default configuration of SL-RLC1 as defined in 9.2.4 for SRB1;
\( 2> \) apply the default configuration of PDCP defined in 9.2.1 for SRB1;
\( 1> \) else:
\( 2> \) re-establish RLC for SRB1;
\( 2> \) apply the default configuration defined in 9.2 .1 for SRB1;
\( 1> \) configure lower layers to suspend integrity protection and ciphering for SRB1;
NOTE: Ciphering is not applied for the subsequent \( R R C R e e s t a b l i s h m e n t \) message used to resume the connection. An integrity check is performed by lower layers, but merely upon request from RRC.
\( 1> \) resume SRB1;
1> submit the RRCReestablishmentRequest message to lower layers for transmission.

ETSI


--- Page 127  ---


3GPP TS 38.331 version 17.0.0 Release 17
126
ETSI TS 138331 V17.0.0 (2022-05)
5.3.7.5 Reception of the RRCReestablishment by the UE

The UE shall:
\( 1> \) stop timer T301;
1> if the RRCReestablishment message includes the sl-L2RemoteUEConfig (i.e. the UE is a L2 U2N Remote UE):
\( 2> \) perform the L2 U2N Remote UE configuration procedure as specified in 5.3.5.16;
1> else:
\( 2> \) consider the current cell to be the PCell;
\( 1> \) update the \( \mathrm{K}_{\mathrm{gNB}} \) key based on the current \( \mathrm{K}_{\mathrm{gNB}} \) key or the NH , using the received nextHopChainingCount value, as specified in TS 33.501[11];
\( 1> \) store the nextHopChainingCount value indicated in the RRCReestablishment message;
\( 1> \) derive the \( K_{R R C e n c} \) and \( K_{U P e n c} \) keys associated with the previously configured cipheringAlgorithm, as specified in TS 33.501 [11];
\( 1> \) derive the \( K_{R R C_{1 n t}} \) and \( K_{U P m t} \) keys associated with the previously configured integrityProtAlgorithm, as specified in TS 33.501 [11].
\( 1> \) request lower layers to verify the integrity protection of the RRCReestablishment message, using the previously configured algorithm and the \( \mathrm{K}_{\mathrm{RRCint}} \) key;
\( 1> \) if the integrity protection check of the RRCReestablishment message fails:
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'RRC connection failure', upon which the procedure ends;
\( 1> \) configure lower layers to resume integrity protection for SRB1 using the previously configured algorithm and the \( K_{R R C \text { mt }} \) key immediately, i.e., integrity protection shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;
\( 1> \) configure lower layers to resume ciphering for SRB1 using the previously configured algorithm and, the \( \mathrm{K}_{\mathrm{RRCenc}} \) key immediately, i.e, ciphering shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;
\( 1> \) release the measurement gap configuration indicated by the measGapConfig, if configured;
\( 1> \) release the measurement gap configuration indicated by the musim-GapConfig, if configured;
\( 1> \) set the content of RRCReestablishmentComplete message as follows:
\( 2> \) if the UE has logged measurements available for NR and if the RPLMN is included in plmn-IdentityList stored in VarLogMeasReport:
\( 3> \) if the sigLoggedMeasType in VarLogMeasReport is included:
4> include the sigLogMeasConfigAvailable in the RRCReestablishmentComplete message and set it according to the following:
\( 5> \) if T330 timer is running:
\( 6> \) set sigLogMeasConfigAvailable to true in the RRCReestablishmentComplete message;
\( 5> \) else:
6> set sigLogMeasConfigAvailable to false in the RRCReestablishmentComplete message;
\( 3> \) include the \( l o g \) MeasAvailable in the RRCReestablishmentComplete message;
\( 3> \) if Bluetooth measurement results are included in the logged measurements the UE has available for NR:
\( 4> \) include the \( \log \) MeasAvailableBT in the RRCReestablishmentComplete message;

ETSI


--- Page 128  ---


3GPP TS 38.331 version 17.0.0 Release 17
127
ETSI TS 138331 V17.0.0 (2022-05)

3> if WLAN measurement results are included in the logged measurements the UE has available for NR: \( 4> \) include the \( \log \) MeasAvailableWLAN in the RRCReestablishmentComplete message;
\( 2> \) if the sigLoggedMeasType in VarLogMeasReport is included:
3> if T330 timer is running:
4> set sigLogMeasConfigAvailable to true in the RRCReestablishmentComplete message;
\( 3> \) else:
\( 4> \) if the UE has logged measurements available for NR:
\( 5> \) set sigLogMeasConfigAvailable to false in the RRCReestablishmentComplete message;
\( 2> \) if the UE has connection establishment failure or connection resume failure information available in VarConnEstFailReport or VarConnEstFailReportList and if the RPLMN is equal to plmn-Identity stored in VarConnEstFailReport or VarConnEstFailReportList:

3> include connEstFaillnfoAvailable in the RRCReestablishmentComplete message;
\( 2> \) if the UE has radio link failure or handover failure information available in VarRLF-Report and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report; or
\( 2> \) if the UE has radio link failure or handover failure information available in VarRLF-Report of TS 36.331 [10] and if the UE is capable of cross-RAT RLF reporting and if the RPLMN is included in pimn-ldentityList stored in VarRLF-Report of TS 36.331 [10]:

3> include iff-InfoAvailable in the RRCReestablishmentComplete message;
\( 2> \) if the UE has successful handover information available in VarSuccessHO-Report and if the RPLMN is included in plmn-IdentityList stored in VarSuccessHO-Report:

3> include successHO-InfoAvailable in the RRCReestablishmentComplete message;
1> submit the RRCReestablishmentComplete message to lower layers for transmission;
1> the procedure ends.
5.3.7.6 T311 expiry

Upon T311 expiry, the UE shall:
\( 1> \) if the procedure was initiated due to radio link failure or handover failure:
\( 2> \) set the noSuitableCellFound in the VarRLF-Report to true;
1> perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'RRC connection failure'.
5.3.7.7 T301 expiry or selected cell no longer suitable

The UE shall:
1> if timer T301 expires; or
1> if the selected cell becomes no longer suitable according to the cell selection criteria as specified in TS 38.304
[20]:
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'RRC connection failure'.
5.3.7.8 Reception of the RRCSetup by the UE

The UE shall:

ETSI


--- Page 129  ---


3GPP TS 38.331 version 17.0.0 Release 17
128
ETSI TS 138331 V17.0.0 (2022-05)

1> perform the RRC connection establishment procedure as specified in 5.3.3.4.
5.3.8 RRC connection release
5.3.8.1 General

Figure 5.3.8.1-1: RRC connection release, successful

The purpose of this procedure is:
- to release the RRC connection, which includes the release of the established radio bearers (except for broadcast MRBs), BH RLC channels, Uu Relay RLC channels as well as all radio resources; or
- to suspend the RRC connection only if SRB2 and at least one DRB or multicast MRB or, for IAB, SRB2, are setup, which includes the suspension of the established radio bearers.
5.3.8.2 Initiation

The network initiates the RRC connection release procedure to transit a UE in RRC_CONNECTED to RRC_IDLE; or to transit a UE in RRC_CONNECTED to RRC_INACTIVE only if SRB2 and at least one DRB or multicast MRB or, for [AB, SRB2, is setup in RRC_CONNECTED; or to transit a UE in RRC_INACTIVE back to RRC_INACTIVE when the UE tries to resume; or to transit a UE in RRC_INACTIVE to RRC_IDLE when the UE tries to resume. The procedure can also be used to release and redirect a UE to another frequency.
5.3.8.3 Reception of the RRCRelease by the UE

The UE shall:
1> delay the following actions defined in this clause 60 ms from the moment the RRCRelease message was received or optionally when lower layers indicate that the receipt of the RRCRelease message has been successfully acknowledged, whichever is earlier;
\( 1> \) stop timer T380, if running;
\( 1> \) stop timer T320, if running;
1> if timer T316 is running;
\( 2> \) stop timer T316;
\( 2> \) clear the information included in VarRLF-Report, if any;
\( 1> \) stop timer T350, if running;
\( 1> \) stop timer T346g, if running;
\( 1> \) if the AS security is not activated:
\( 2> \) ignore any field included in RRCRelease message except waitTime;
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11 with the release cause 'other' upon which the procedure ends;

1> if the RRCRelease message includes redirectedCarrierInfo indicating redirection to eutra:

ETSI


--- Page 130  ---


3GPP TS 38.331 version 17.0.0 Release 17
129
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if cnType is included:
\( 3> \) after the cell selection, indicate the available CN Type(s) and the received cnType to upper layers;
NOTE 1: Handling the case if the E-UTRA cell selected after the redirection does not support the core network type specified by the cnType, is up to UE implementation.
\( 2> \) if voiceFallbackIndication is included:
3> consider the RRC connection release was for EPS fallback for IMS voice (see TS 23.502 [43]);
1> if the RRCRelease message includes the cellReselectionPriorities or freqPriorityListNRSlicing:
\( 2> \) store the cell reselection priority information provided by the cellReselectionPriorities or freqPriorityListNRSlicing;
\( 2> \) if the \( t 320 \) is included:
\( 3> \) start timer T320, with the timer value set according to the value of \( t 320 \);
1> else:
2> apply the cell reselection priority information broadcast in the system information;
\( 1> \) if deprioritisation Req is included and the UE supports RRC connection release with deprioritisation:
\( 2> \) start or restart timer T325 with the timer value set to the deprioritisationTimer signalled;
\( 2> \) store the deprioritisationReq until T325 expiry;
NOTE 1a: The UE stores the deprioritisation request irrespective of any cell reselection absolute priority assignments (by dedicated or common signalling) and regardless of RRC connections in NR or other RATs unless specified otherwise.
\( 1> \) if the RRCRelease includes the measIdleConfig:
\( 2> \) if T331 is running:
3> stop timer T331;
\( 3> \) perform the actions as specified in 5.7.8.3;
\( 2> \) if the measIdleConfig is set to setup:
3> store the received measIdleDuration in VarMeasIdleConfig;
\( 3> \) start timer T331 with the value set to measIdleDuration;
3> if the measIdleConfig contains measIdleCarrierListNR:
4> store the received measIdleCarrierListNR in VarMeasIdleConfig;
3> if the measIdleConfig contains measIdleCarrierListEUTRA:
4> store the received measIdleCarrierListEUTRA in VarMeasIdleConfig;
3> if the measIdleConfig contains validityAreaList:
4> store the received validityAreaList in VarMeasIdleConfig;
\( 1> \) if the RRCRelease includes suspendConfig:
\( 2> \) reset MAC and release the default MAC Cell Group configuration, if any;
\( 2> \) apply the received suspendConfig except the received nextHopChainingCount;
\( 2> \) if the sdt-Config is configured:
\( 3> \) for each of the DRB in the sdt-DRB-List:

ETSI


--- Page 131  ---


3GPP TS 38.331 version 17.0.0 Release 17
130
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) consider the DRB to be configured for SDT;
\( 3> \) if sdt-SRB2-Indication is configured:
4> consider the SRB2 to be configured for SDT;
3> for each of the RLC bearer that is part of the UE configuration:
4> re-establish the RLC entity as specified in TS 38.322 [4];
\( 3> \) for SRB2, if it is resumed and for SRB1:
4> trigger the PDCP entity to perform SDU discard as specified in TS 38.323 [5];
3> if configured grant resources for SDT are configured:
4> configure the MAC entity with the configured grant resources for SDT and instruct MAC to start the cg-SDT-TimeAlignmentTimer;
\( 2> \) remove all the entries within VarConditionalReconfig, if any;
\( 2> \) for each measld, if the associated reportConfig has a reportType set to condTriggerConfig:
3> for the associated reportConfigld:
\( 4> \) remove the entry with the matching reportConfigId from the reportConfigList within the VarMeasConfig;
\( 3> \) if the associated measObjectld is only associated to a reportConfig with reportType set to condTriggerConfig:

4> remove the entry with the matching measObjectld from the measObjectList within the VarMeasConfig;
\( 3> \) remove the entry with the matching measId from the measIdList within the VarMeasConfig;
\( 2> \) re-establish RLC entities for SRB1;
\( 2> \) if the RRCRelease message with suspendConfig was received in response to an RRCResumeRequest or an RRCResumeRequest I:
\( 3> \) stop the timer T319 if running;
3> stop timer T319a if running;
\( 3> \) in the stored UE Inactive AS context:
4> replace the \( \mathrm{K}_{\mathrm{gNB}} \) and \( \mathrm{K}_{\text {RRCint }} \) keys with the current \( \mathrm{K}_{\mathrm{gNB}} \) and \( \mathrm{K}_{\text {RRCint }} \) keyS;
4> replace the nextHopChainingCount with the value of nextHopChainingCount received in the RRCRelease message;
\( 4> \) replace the cellldentity with the cellldentity of the cell the UE has received the RRCRelease message;
\( 4> \) if the suspendConfig contains the sl-ServingCellInfo (i.e. the UE is a L2 U2N Remote UE):
\( 5> \) replace the physical cell identity with the value of the \( s l \)-PhysCellld;
\( 5> \) replace the C-RNTI with the value of the sl-UEIdentityRemote;
4> else:
5> replace the C-RNTI with the C-RNTI used in the cell (see TS 38.321 [3]) the UE has received the RRCRelease message;
\( 5> \) replace the physical cell identity with the physical cell identity of the cell the UE has received the RRCRelease message;

ETSI


--- Page 132  ---


3GPP TS 38.331 version 17.0.0 Release 17
131
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) replace the nextHopChainingCount with the value associated with the current \( \mathrm{K}_{\mathrm{gNB}} \);
\( 2> \) else:
3> store in the UE Inactive AS Context the nextHopChainingCount received in the RRCRelease message, the current \( \mathrm{K}_{\mathrm{gNB}} \) and \( \mathrm{K}_{\mathrm{RRC} \text { int }} \) keys, the ROHC state, the stored QoS flow to DRB mapping rules, the application layer measurement configuration, the C-RNTI used in the source PCell, the cellldentity and the physical cell identity of the source PCell, the spCellConfigCommon within ReconfigurationWithSync of the NR PSCell (if configured) and all other parameters configured except for:
- parameters within ReconfigurationWithSync of the PCell;
- parameters within ReconfigurationWithSync of the NR PSCell, if configured;
- parameters within MobilityControllnfoSCG of the E-UTRA PSCell, if configured;
- servingCellConfigCommonSIB;
- sl-L2RelayUEConfig, if configured;
- sl-L2RemoteUEConfig, if configured;

3> store any previously or subsequently received application layer measurement reports for which no segment, or full message, has been submitted to lower layers for transmission;

NOTE 2: NR sidelink communication related configurations and logged measurement configuration are not stored as UE Inactive AS Context, when UE enters RRC_INACTIVE.
\( 2> \) suspend all SRB(s) and DRB(s) and multicast MRB(s), except SRB0;
\( 2> \) indicate PDCP suspend to lower layers of all DRBs and multicast MRBs;
\( 2> \) if the \( t 380 \) is included:
3> start timer T380, with the timer value set to \( t 380 \);
\( 2> \) if the RRCRelease message is including the waitTime:
\( 3> \) start timer T302 with the value set to the waitTime;
\( 3> \) inform upper layers that access barring is applicable for all access categories except categories ' 0 ' and ' 2 ';
\( 2> \) if T390 is running:
3> stop timer T390 for all access categories;
\( 3> \) perform the actions as specified in 5.3.14.4;
\( 2> \) indicate the suspension of the RRC connection to upper layers;
\( 2> \) enter RRC_INACTIVE and perform cell selection as specified in TS 38.304 [20];
1> else
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with the release cause 'other'.
5.3.8.4 T320 expiry

The UE shall:
1> if T320 expires:
\( 2> \) if stored, discard the cell reselection priority information provided by the cellReselectionPriorities or inherited from another RAT;
\( 2> \) apply the cell reselection priority information broadcast in the system information.

ETSI


--- Page 133  ---


3GPP TS 38.331 version 17.0.0 Release 17
132
ETSI TS 138331 V17.0.0 (2022-05)
5.3.8.5 UE actions upon the expiry of Data/nactivityTimer

Upon receiving the expiry of DataInactivityTimer from lower layers while in RRC_CONNECTED, the UE shall:
\( 1> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'RRC connection failure'.
5.3.8.6 T346g expiry

The UE shall:
\( 1> \) if T346g expires:
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'other'.
5.3.9 RRC connection release requested by upper layers
5.3.9.1 General

The purpose of this procedure is to release the RRC connection. Access to the current PCell may be barred as a result of this procedure.
5.3.9.2 Initiation

The UE initiates the procedure when upper layers request the release of the RRC connection as specified in TS 24.501 [23]. The UE shall not initiate the procedure for power saving purposes.

The UE shall:
\( 1> \) if the upper layers indicate barring of the PCell:
2> treat the PCell used prior to entering RRC_IDLE as barred according to TS 38.304[20];
\( 1> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'other'.
5.3.10 Radio link failure related actions
5.3.10.1 Detection of physical layer problems in RRC_CONNECTED

The UE shall:
\( 1> \) if any DAPS bearer is configured, upon receiving N310 consecutive "out-of-sync" indications for the source SpCell from lower layers and T304 is running:
\( 2> \) start timer T310 for the source SpCell.
\( 1> \) upon receiving N310 consecutive "out-of-sync" indications for the SpCell from lower layers while neither T300, T301, T304, T311, T316 nor T319 are running:
\( 2> \) start timer T310 for the corresponding SpCell.
5.3.10.2 Recovery of physical layer problems

Upon receiving N311 consecutive "in-sync" indications for the SpCell from lower layers while T310 is running, the UE shall:
\( 1> \) stop timer T310 for the corresponding SpCell.
\( 1> \) stop timer T312 for the corresponding SpCell, if running.
NOTE 1: In this case, the UE maintains the RRC connection without explicit signalling, i.e the UE maintains the entire radio resource configuration.

ETSI


--- Page 134  ---


3GPP TS 38.331 version 17.0.0 Release 17
133
ETSI TS 138331 V17.0.0 (2022-05)

NOTE 2: Periods in time where neither "in-sync" nor "out-of-sync" is reported by L1 do not affect the evaluation of the number of consecutive "in-sync" or "out-of-sync" indications.
5.3.10.3 Detection of radio link failure

The UE shall:
1> if any DAPS bearer is configured and T304 is running:
\( 2> \) upon T310 expiry in source SpCell; or
\( 2> \) upon random access problem indication from source MCG MAC; or
\( 2> \) upon indication from source MCG RLC that the maximum number of retransmissions has been reached; or
\( 2> \) upon consistent uplink LBT failure indication from source MCG MAC:
3> consider radio link failure to be detected for the source MCG i.e. source RLF;
3> suspend the transmission and reception of all DRBs and multicast MRBs in the source MCG;
\( 3> \) reset MAC for the source MCG ;
3> release the source connection.
1> else:
\( 2> \) during a DAPS handover: the following only applies for the target PCell;
\( 2> \) upon T310 expiry in PCell; or
\( 2> \) upon T312 expiry in PCell; or
\( 2> \) upon random access problem indication from MCG MAC while neither T300, T301, T304, T311 nor T319 are running; or
\( 2> \) upon indication from MCG RLC that the maximum number of retransmissions has been reached; or
\( 2> \) if connected as an [AB-node, upon BH RLF indication received on BAP entity from the MCG; or
\( 2> \) upon consistent uplink LBT failure indication from MCG MAC while T304 is not running:
3> if the indication is from MCG RLC and CA duplication is configured and activated for MCG, and for the corresponding logical channel allowedServingCells only includes SCell(s):
\( 4> \) initiate the failure information procedure as specified in 5.7 .5 to report RLC failure.
\( 3> \) else:
\( 4> \) consider radio link failure to be detected for the MCG, i.e. MCG RLF;
4> discard any segments of segmented RRC messages stored according to 5.7.6.3;
NOTE: Void.
4- if AS security has not been activated:
\( 5> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'other';-
4> else if AS security has been activated but SRB2 and at least one DRB or multicast MRB or, for IAB, SRB2, have not been setup:
\( 5> \) store the radio link failure information in the VarRLF-Report as described in clause 5.3.10.5;
\( 5> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'RRC connection failure';

4> else:

ETSI


--- Page 135  ---


3GPP TS 38.331 version 17.0.0 Release 17
134
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) store the radio link failure information in the VarRLF-Report as described in clause 5.3.10.5;
\( 5> \) if T316 is configured; and
5> if SCG transmission is not suspended; and
\( 5> \) if the SCG is not deactivated; and
\( 5> \) if neither PSCell change nor PSCell addition is ongoing (i.e. timer T304 for the NR PSCell is not running in case of NR-DC or timer T307 of the E-UTRA PSCell is not running as specified in TS 36.331 [10], clause 5.3.10.10, in NE-DC):
\( 6> \) initiate the MCG failure information procedure as specified in 5.7.3b to report MCG radio link failure.
\( 5> \) else:
\( 6> \) initiate the connection re-establishment procedure as specified in 5.3.7.
Upon L2 U2N Relay UE detecting radio link failure, it either triggers PC5-S release or sends Notification message to the connected L2 U2N Remote UE(s) in accordance with 5.8.9.10.

The UE shall:
\( 1> \) upon T310 expiry in PSCell; or
1> upon T312 expiry in PSCell; or
1> upon random access problem indication from SCG MAC; or
1> upon indication from SCG RLC that the maximum number of retransmissions has been reached; or
\( 1> \) if connected as an [AB-node, upon BH RLF indication received on BAP entity from the SCG; or
1> upon consistent uplink LBT failure indication from SCG MAC:
\( 2> \) if the indication is from SCG RLC and CA duplication is configured and activated for SCG, and for the corresponding logical channel allowedServingCells only includes SCell(s):
\( 3> \) initiate the failure information procedure as specified in 5.7 .5 to report RLC failure.
\( 2> \) else:
\( 3> \) consider radio link failure to be detected for the SCG, i.e. SCG RLF;
3> if MCG transmission is not suspended:
4> initiate the SCG failure information procedure as specified in 5.7.3 to report SCG radio link failure.
\( 3> \) else:
4> if the UE is in NR-DC:
\( 5> \) initiate the connection re-establishment procedure as specified in 5.3.7;
4> else (the UE is in (NG)EN-DC):
\( 5> \) initiate the connection re-establishment procedure as specified in TS 36.331 [10], clause 5.3.7;
5.3.10.4 RLF cause determination

The UE shall set the iff-Cause in the VarRLF-Report as follows:
\( 1> \) if the UE declares radio link failure due to T310 expiry:
\( 2> \) set the rlf-Cause as t310-Expiry;
\( 1> \) else if the UE declares radio link failure due to the random access problem indication from MCG MAC:

ETSI


--- Page 136  ---


3GPP TS 38.331 version 17.0.0 Release 17
135
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the random access procedure was initiated for beam failure recovery:
\( 3> \) set the rlf-Cause as beamFailureRecoveryFailure;
\( 2> \) else:
3> set the rif-Cause as randomAccessProblem;
1> else if the UE declares radio link failure due to the reaching of maximum number of retransmissions from the MCG RLC:
\( 2> \) set the nf-Cause as ric-MaxNumRetx;
1> else if the UE declares radio link failure due to consistent uplink LBT failures:
\( 2> \) set the rif-Cause as IbtFailure;
\( 1> \) else if the IAB-MT declares radio link failure due to the reception of a BH RLF indication on BAP entity:
\( 2> \) set the rlf-Cause as bh-rifRecoveryFailure.
1> else if the UE declares radio link failure due to T312 expiry:
\( 2> \) set the rlf-Cause as t312-Expiry;
5.3.10.5 RLF report content determination

The UE shall determine the content in the VarRLF-Report as follows:
\( 1> \) clear the information included in VarRLF-Report, if any;
\( 1> \) set the pimn-IdentityList to include the list of EPLMNs stored by the UE (i.e. includes the RPLMN);
1> set the measResultLastServCell to include the cell level RSRP, RSRQ and the available SINR, of the source PCell (in case HO failure) or PCell (in case RLF) based on the available SSB and CSI-RS measurements collected up to the moment the UE detected failure;
\( 1> \) if the SS/PBCH block-based measurement quantities are available:
\( 2> \) set the rsIndexResults in measResultLastServCell to include all the available measurement quantities of the source PCell (in case HO failure) or PCell (in case RLF), ordered such that the highest SS/PBCH block RSRP is listed first if SS/PBCH block RSRP measurement results are available, otherwise the highest SS/PBCH block RSRQ is listed first if SS/PBCH block RSRQ measurement results are available, otherwise the highest SS/PBCH block SINR is listed first, based on the available SS/PBCH block based measurements collected up to the moment the UE detected failure;

1> if the CSI-RS based measurement quantities are available:
\( 2> \) set the rsIndexResults in measResultLastServCell to include all the available measurement quantities of the source PCell (in case HO failure) or PCell (in case RLF), ordered such that the highest CSI-RS RSRP is listed first if CSI-RS RSRP measurement results are available, otherwise the highest CSI-RS RSRQ is listed first if CSI-RS RSRQ measurement results are available, otherwise the highest CSI-RS SINR is listed first, based on the available CSI-RS based measurements collected up to the moment the UE detected failure;

1> set the ssbRLMConfigBitmap and/or csi-rsRLMConfigBitmap in measResultLastServCell to include the radio link monitoring configuration of the source PCell(in case HO failure) or PCell (in case RLF), if available;

1> for each of the configured measObjectNR in which measurements are available:
\( 2> \) if the SS/PBCH block-based measurement quantities are available:
3> set the measResultListNR in measResultNeighCells to include all the available measurement quantities of the best measured cells, other than the source PCell (in case HO failure) or PCell (in case RLF), ordered such that the cell with highest SS/PBCH block RSRP is listed first if SS/PBCH block RSRP measurement results are available, otherwise the cell with highest SS/PBCH block RSRQ is listed first if SS/PBCH block RSRQ measurement results are available, otherwise the cell with highest SS/PBCH block SINR is

ETSI


--- Page 137  ---


3GPP TS 38.331 version 17.0.0 Release 17
136
ETSI TS 138331 V17.0.0 (2022-05)

listed first, based on the available SS/PBCH block based measurements collected up to the moment the UE detected failure;
\( 4> \) for each neighbour cell included, include the optional fields that are available;
\( 2> \) if the CSI-RS based measurement quantities are available:
3> set the measResultListNR in measResultNeighCells to include all the available measurement quantities of the best measured cells, other than the source PCell (in case HO failure) or PCell (in case RLF), ordered such that the cell with highest CSI-RS RSRP is listed first if CSI-RS RSRP measurement results are available, otherwise the cell with highest CSI-RS RSRQ is listed first if CSI-RS RSRQ measurement results are available, otherwise the cell with highest CSI-RS SINR is listed first, based on the available CSI-RS based measurements collected up to the moment the UE detected radio link failure;

4> for each neighbour cell included, include the optional fields that are available;
\( 2> \) for each neighbour cell, if any, included in measResultListNR in measResultNeighCells:
3> if the neighbour cell is one of the candidate cells for which the reconfigurationWithSync is included in the masterCellGroup in VarConditionalReconfig at the moment of the detected failure:

4> set choConfig in MeasResult2NR to the execution condition for each measld within condTriggerConfig associated to the neighbour cell within VarConditionalReconfig;

4> if at least one execution condition included in choConfig in MeasResult2NR was fulfilled at the moment of conditional reconfiguration execution, or radio link failure:
\( 5> \) if the first entry of choConfig corresponds to a fullfilled execution condition at the moment of conditional reconfiguration execution, or radio link failure:
\( 6> \) set condFirstEventFullfilled to true;
\( 5> \) if the second entry of choConfig, if available, corresponds to a fullfilled execution condition at the moment of conditional reconfiguration execution, or radio link failure:

6> set condSecondEventFullfilled to true;
\( 5> \) if the first entry of choConfig corresponds to a fulfilled execution condition at the moment of conditional reconfiguration execution, or radio link failure; and
\( 5> \) if the second entry of choConfig, if available, corresponds to a fulfilled execution condition at the moment of conditional reconfiguration execution, or radio link failure:

6> set firstTriggeredEvent to the execution condition condFirstEvent corresponding to the first entry of choConfig or to the execution condition condSecondEvent corresponding to the second entry of choConfig, whichever execution condition was fulfilled first in time;
\( 6> \) set timeBetweenEvents to the elapsed time between the point in time of fullfilling the condition in choConfig that was fulfilled first in time, and the point in time of fullfilling the condition in choConfig that was fulfilled second in time;

1> for each of the configured EUTRA frequencies in which measurements are available;
\( 2> \) set the measResultListEUTRA in measResultNeighCells to include the best measured cells ordered such that the cell with highest RSRP is listed first if RSRP measurement results are available, otherwise the cell with highest RSRQ is listed first, and based on measurements collected up to the moment the UE detected failure;

3> for each neighbour cell included, include the optional fields that are available;
NOTE 1: The measured quantities are filtered by the L3 filter as configured in the mobility measurement configuration. The measurements are based on the time domain measurement resource restriction, if configured. Exclude-listed cells are not required to be reported.
\( 1> \) set the \( c-R N T I \) to the C-RNTI used in the source PCell(in case HO failure) or PCell (in case RLF);

ETSI


--- Page 138  ---


3GPP TS 38.331 version 17.0.0 Release 17
137
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if the failure is detected due to reconfiguration with sync failure as described in 5.3.5.8.3, set the fields in VarRLF-report as follows:
\( 2> \) set the connectionFailureType to hof;
2 if any DAPS bearer was configured while T304 was running:
\( 3> \) set lastHO-Type to daps;
\( 3> \) if radio link failure was detected in the source PCell, according to clause \( 5.3 .10 .3: 4> \) set timeConnSourceDAPS-Failure to the time between the initiation of the DAPS handover execution and the radio link failure detected in the source PCell while T304 was running;
\( 4> \) set the \( n f \)-Cause to the trigger for detecting the source radio link failure in accordance with clause 5.3.10.4;
\( 2> \) set the nrFailedPCellld in failedPCellld to the global cell identity and tracking area code, if available, and otherwise to the physical cell identity and carrier frequency of the target PCell of the failed handover;
\( 2> \) include nrPreviousCell in previousPCellld and set it to the global cell identity and tracking area code of the PCell where the last RRCReconfiguration message including reconfigurationWithSync was received;
\( 2> \) set the timeConnFailure to the elapsed time since reception of the last RRCReconfiguration message including the reconfiguration WithSync;
\( 1> \) else if the failure is detected due to Mobility from NR failure as described in 5.4.3.5, set the fields in VarRLFreport as follows:
\( 2> \) set the connectionFailureType to hof;
2> if last MobilityFromNRCommand concerned a failed inter-RAT handover from NR to E-UTRA and if the UE supports Radio Link Failure Report for Inter-RAT MRO EUTRA (NR to EUTRA):
\( 3> \) set the eutraFailedPCellld in failedPCellld to the global cell identity and tracking area code, if available, and otherwise to the physical cell identity and carrier frequency of the target PCell of the failed handover;
\( 2> \) include nrPreviousCell in previousPCellld and set it to the global cell identity and tracking area code of the PCell where the last MobilityFromNRCommand message was received;
\( 2> \) if configuration of the conditional handover is available in VarConditionalReconfig at the moment of the handover failure:
\( 3> \) set timeSinceCHO-Reconfig to the time elapsed between the execution of the last RRCReconfiguration message including reconfiguration WithSync for the target PCell of the failed conditional handover, and the reception in the source PCell of the last conditionalReconfiguration including the condRRCReconfig of the target PCell of the failed conditional handover;
\( 3> \) set choCandidateCellList to include the global cell identity and tracking area code, if available, and otherwise to the physical cell identity and carrier frequency of each of the candidate target cells for conditional handover included in condRRCReconfig within VarConditionalReconfig at the time of the failed conditional handover, excluding the candidate target cells included in measResu/NeighCells;
\( 2> \) set the timeConnFailure to the elapsed time since the initialization of the handover associated to the last MobilityFromNRCommand message;
\( 1> \) else if the failure is detected due to radio link failure as described in 5.3 .10 .3 , set the fields in VarRLF-report as follows:
\( 2> \) set the connectionFailureType to rlf;
\( 2> \) set the \( r l f \)-Cause to the trigger for detecting radio link failure in accordance with clause 5.3 .10 .4 ;
2> set the nrFailedPCellld in failedPCellld to the global cell identity and the tracking area code, if available, and otherwise to the physical cell identity and carrier frequency of the PCell where radio link failure is detected;

ETSI


--- Page 139  ---


3GPP TS 38.331 version 17.0.0 Release 17
138
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if an RRCReconfiguration message including the reconfiguration WithSync was received before the connection failure:
\( 3> \) if the last RRCReconfiguration message including the reconfigurationWithSync concerned an intra NR handover:
\( 4> \) include the nrPreviousCell in previousPCellld and set it to the global cell identity and the tracking area code of the PCell where the last executed RRCReconfiguration message including reconfiguration WithSync was received;

4 if the last executed RRCReconfiguration message including reconfiguration WithSync was concerning a DAPS handover:
\( 5> \) set lastHO-Type to daps;
\( 4> \) else if the last executed RRCReconfiguration message including reconfigurationWithSync was concerning a conditional handover:
\( 5> \) set lastHO-Type to cho;
\( 4> \) set the timeConnFailure to the elapsed time since the execution of the last RRCReconfiguration message including the reconfiguration WithSync;
\( 3> \) else if the last RRCReconfiguration message including the reconfigurationWithSync concerned a handover to NR from E-UTRA and if the UE supports Radio Link Failure Report for Inter-RAT MRO EUTRA:
\( 4> \) include the eutraPreviousCell in previousPCellld and set it to the global cell identity and the tracking area code of the E-UTRA PCell where the last RRCReconfiguration message including reconfiguration WithSync was received embedded in E-UTRA RRC message MobilityFromEUTRACommand message as specified in TS 36.331 [10] clause 5.4.3.3;
\( 4> \) set the timeConnFailure to the elapsed time since reception of the last RRCReconfiguration message including the reconfiguration WithSync embedded in E-UTRA RRC message MobilityFromEUTRACommand message as specified in TS 36.331 [10] clause 5.4.3.3;
\( 3> \) if configuration of the conditional handover is available in VarConditionalReconfig at the moment of radio link failure:
\( 3> \) set choCandidateCellList to include the global cell identity and tracking area code of all the candidate target cells for conditional handover included in condRRCReconfig within VarConditionalReconfig at the time of radio link failure, excluding the candidate target cells included in measResu/NeighCells;
\( 2> \) if configuration of the conditional handover is available in VarConditionalReconfig at the moment of declaring the radio link failure:
\( 3> \) set timeSinceCHO-Reconfig to the time elapsed between the detection of the radio link failure, and the reception, in the source PCell, of the last conditionalReconfiguration including the condRRCReconfig message;
\( 1> \) if connectionFailureType is rlf and the rlf-Cause is set to randomAccessProblem or beamFailureRecoveryFailure; or
\( 1> \) if connectionFailureType is hof and if the failed handover is an intra-RAT handover:
\( 2> \) set the ra-Information Common to include the random-access related information as described in clause 5.7.10.5;
\( 1> \) if available, set the locationInfo as in 5.3.3.7.
The UE may discard the radio link failure information or handover failure information, i.e. release the UE variable VarRLF-Report, 48 hours after the radio link failure/handover failure is detected.

NOTE 2: In this clause, the term 'handover failure' has been used to refer to 'reconfiguration with sync failure'.

ETSI


--- Page 140  ---


3GPP TS 38.331 version 17.0.0 Release 17
139
ETSI TS 138331 V17.0.0 (2022-05)
5.3.11 UE actions upon going to RRC_IDLE

The UE shall:
\( 1> \) reset MAC ;
\( 1> \) set the variable pendingRNA-Update to false, if that is set to true;
\( 1> \) if going to RRC_IDLE was triggered by reception of the RRCRelease message including a waitTime:
\( 2> \) if T302 is running:
\( 3> \) stop timer T302;
\( 2> \) start timer T302 with the value set to the waitTime;
\( 2> \) inform upper layers that access barring is applicable for all access categories except categories ' 0 ' and ' 2 '.
1> else:
\( 2> \) if T302 is running:
3> stop timer T302;
\( 3> \) perform the actions as specified in 5.3.14.4;
\( 1> \) if T390 is running:
\( 2> \) stop timer T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4;
1> if the UE is leaving RRC_INACTIVE:
\( 2> \) if going to RRC_IDLE was not triggered by reception of the RRCRelease message:
\( 3> \) if stored, discard the cell reselection priority information provided by the cellReselectionPriorities;
\( 3> \) stop the timer T320, if running;
\( 1> \) stop all timers that are running except \( \mathrm{T} 302, \mathrm{~T} 320, \mathrm{~T} 325, \mathrm{~T} 330, \mathrm{~T} 331 \) and T 400 ;
\( 1> \) discard the UE [nactive AS context, if any;
\( 1> \) release the suspendConfig, if configured;
\( 1> \) remove all the entries within VarConditionalReconfig, if any;
\( 1> \) for each measld, if the associated reportConfig has a reportType set to condTriggerConfig:
\( 2> \) for the associated reportConfigld:
\( 3> \) remove the entry with the matching reportConfigld from the reportConfigList within the VarMeasConfig;
\( 2> \) if the associated measObjectld is only associated to a reportConfig with reportType set to condTriggerConfig:
\( 3> \) remove the entry with the matching measObjectld from the measObjectList within the VarMeasConfig;
\( 2> \) remove the entry with the matching measld from the measldList within the VarMeasConfig;
\( 1> \) discard the \( K_{g N B} \) key, the \( S-K_{g N B} \) key, the \( S-K_{e N B} \) key, the \( K_{R R C e n c} \) key, the \( K_{R R C \text { int }} \) key, the \( K_{U P \text { int }} \) key and the Kupenc key, if any;
\( 1> \) release all radio resources, including release of the RLC entity, the BAP entity, the MAC configuration and the associated PDCP entity and SDAP for all established RBs, BH RLC channels, Uu Relay RLC channels, PC5 Relay channels and SRAP entity;

ETSI


--- Page 141  ---


3GPP TS 38.331 version 17.0.0 Release 17
140
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) indicate the release of the RRC connection to upper layers together with the release cause;
1> inform upper layers about the release of all application layer measurement configurations;
\( 1> \) discard any application layer measurement reports which were not transmitted yet;
\( 1> \) discard any segments of segmented RRC messages stored according to 5.7.6.3;
1> except if going to RRC_IDLE was triggered by inter-RAT cell reselection while the UE is in RRC_INACTIVE or RRC_IDLE or when selecting an inter-RAT cell while T311 was running or when selecting an E-UTRA cell for EPS fallback for IMS voice as specified in 5.4.3.5:
\( 2> \) enter RRC_IDLE and perform cell selection as specified in TS 38.304 [20];
5.3.12 UE actions upon PUCCH/SRS release request

Upon receiving a PUCCH release request from lower layers, for all bandwidth parts of an indicated serving cell the UE shall:

1> release PUCCH-CSI-Resources configured in CSI-ReportConfig;
1> release SchedulingRequestResourceConfig instances configured in PUCCH-Config-
Upon receiving an SRS release request from lower layers, for all bandwidth parts of an indicated serving cell the UE shall:
\( 1> \) release SRS-Resource instances configured in SRS-Config-
Upon receiving a positioning SRS configuration for RRC_INACTIVE release request from lower layers, the UE shall:
\( 1> \) release the configured srs-PosRRC-InactiveConfig-
5.3.13 RRC connection resume
5.3.13.1 General

Figure 5.3.13.1-1: RRC connection resume, successful

Figure 5.3.13.1-2: \( \mathbf{R R C} \) connection resume fallback to \( \mathbf{R R C} \) connection establishment, successful

ETSI


--- Page 142  ---


3GPP TS 38.331 version 17.0.0 Release 17
141
ETSI TS 138331 V17.0.0 (2022-05)

Figure 5.3.13.1-3: RRC connection resume followed by network release, successful

Figure 5.3.13.1-4: RRC connection resume followed by network suspend, successful

Figure 5.3.13.1-5: RRC connection resume, network reject

The purpose of this procedure is to resume a suspended RRC connection, including resuming \( \mathrm{SRB}(\mathrm{s}), \mathrm{DRB}(\mathrm{s}) \) and multicast MRB(s) or perform an RNA update. This procedure is also used to initiate SDT in RRC_INACTIVE.
5.3.13.1a Conditions for resuming RRC Connection for NR sidelink communication/discovery/V2X sidelink communication

For NR sidelink communication/discovery an RRC connection is resumed only in the following cases:
1> if configured by upper layers to transmit NR sidelink communication/discovery and related data is available for transmission:
\( 2> \) if the frequency on which the UE is configured to transmit NR sidelink communication is included in \( s l \) FreqInfoList within SIB12 provided by the cell on which the UE camps; and if the valid version of SIB12 does not include \( s l \)-TxPoolSelectedNormal for the concerned frequency; or
\( 2> \) if the frequency on which the UE is configured to transmit NR sidelink discovery is included in \( s l \) FreqInfoList within SIB12 provided by the cell on which the UE camps; and if the valid version of SIB12 does not include sl-DiscTxPoolSelected or sl-TxPoolSelectedNormal for the concerned frequency;

For L2 U2N Relay UE in RRC_INACTIVE, an RRC connection establishment is resumed in the following cases:
1> if any message is received from the L2 U2N Remote UE via SL-RLC0 as specified in 9.1.1.4 or SL-RLC1 as specified in 9.2.4;

For V2X sidelink communication an RRC connection resume is initiated only when the conditions specified for V2X sidelink communication in clause 5.3.3.1a of TS 36.331 [10] are met.

ETSI


--- Page 143  ---


3GPP TS 38.331 version 17.0.0 Release 17
142
ETSI TS 138331 V17.0.0 (2022-05)

NOTE: Upper layers initiate an RRC connection resume. The interaction with NAS is left to UE implementation.
5.3.13.1b Conditions for initiating SDT

AUE in RRC_INACTIVE initiates the resume procedure for SDT when all of the following conditions are fulfilled:
\( 1> \) the upper layers request resumption of RRC connection; and
1> SIBl includes sat-ConfigCommon; and
\( 1> \) sdt-Config is configured; and \( 1> \) all the pending data in UL is mapped to the radio bearers configured for SDT; and

1> lower layers indicate that conditions for initiating SDT as specified in TS 38.321 [3] are fulfilled.
5.3.13.2 Initiation

The UE initiates the procedure when upper layers or AS (when responding to RAN paging, upon triggering RNA updates while the UE is in RRC_INACTIVE, for NR sidelink communication/V2X sidelink communication as specified in clause 5-3.13.1a) requests the resume of a suspended RRC connection or for initiating SDT as specified in clause 5.3.13.1b.

The UE shall ensure having valid and up to date essential system information as specified in clause 5.2.2.2 before initiating this procedure.

Upon initiation of the procedure, the UE shall:
1> if the resumption of the RRC connection is triggered by response to NG-RAN paging:
\( 2> \) select ' 0 ' as the Access Category;
\( 2> \) perform the unified access control procedure as specified in 5.3.14 using the selected Access Category and one or more Access Identities provided by upper layers;
\( 3> \) if the access attempt is barred, the procedure ends;
\( 1> \) else if the resumption of the RRC connection is triggered by upper layers:
\( 2> \) if the upper layers provide an Access Category and one or more Access Identities:
\( 3> \) perform the unified access control procedure as specified in 5.3.14 using the Access Category and Access Identities provided by upper layers;

4> if the access attempt is barred, the procedure ends;
\( 2> \) if the resumption occurs after release with redirect with mpsPriorityIndication:
3> set the resumeCause to mps-PriorityAccess;
\( 2> \) else:
\( 3> \) set the resumeCause in accordance with the information received from upper layers;
\( 1> \) else if the resumption of the RRC connection is triggered due to an RNA update as specified in 5.3.13.8:
\( 2> \) if an emergency service is ongoing:
NOTE 1: How the RRC layer in the UE is aware of an ongoing emergency service is up to UE implementation.
3> select '2' as the Access Category;
3> set the resumeCause to emergency;
2> else:
\( 3> \) select ' 8 ' as the Access Category;

ETSI


--- Page 144  ---


3GPP TS 38.331 version 17.0.0 Release 17
143
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) perform the unified access control procedure as specified in 5.3.14 using the selected Access Category and one or more Access [dentities to be applied as specified in TS 24.501 [23];
\( 3> \) if the access attempt is barred:
\( 4> \) set the variable pending \( R N A \)-Update to true;
\( 4> \) the procedure ends;
NOTE 2: In case the L2 U2N Relay UE initiates RRC connection resume according to conditions as specified in 5.3.13.1a, the L2 U2N Relay UE sets the resume Cause by implementation. If the cause value in the message received from the L2 U2N Remote UE via SL-RLC0 is emergency, mps-PriorityAccess, or mcsPriorityAccess, the L2 U2N Relay UE can set the same value. Otherwise, the L2 U2N Relay UE does not set the value as emergency, mps-PriorityAccess, or mcs-PriorityAccess.
\( 1> \) if the UE is in NE-DC or NR-DC:
\( 2> \) if the UE does not support maintaining SCG configuration upon connection resumption:
\( 3> \) release the MR-DC related configurations (ie., as specified in 5.3 .5 .10 ) from the UE Inactive AS context, if stored;
\( 1> \) if the UE does not support maintaining the MCG SCell configurations upon connection resumption:
\( 2> \) release the MCG SCell(s) from the UE [nactive AS context, if stored;
\( 1> \) if the UE performs connection resumption in a different cell than the cell where srs-PosRRC-InactiveConfig was configured;
\( 2> \) release srs-PosRRC-InactiveConfig, if configured;
Editor's Note: This agreement/clause may not be needed because we have this agreement TA timer configuration is invalidated upon any cell reselection; see 5.7.15.
\( 1> \) if the UE is connected with a L2 U2N Relay UE via PC5-RRC connection (ie the UE is a L2 U2N Remote UE):
\( 2> \) apply the default configuration of SL-RLC1 as defined in 9.2 .4 for SRB1;
\( 2> \) apply the default PDCP configuration defined in 9.2.1 for SRB1;
\( 1> \) else:
\( 2> \) apply the default L1 parameter values as specified in corresponding physical layer specifications, except for the parameters for which values are provided in SIBI;
\( 2> \) apply the default SRB1 configuration as specified in 9.2.1;
\( 2> \) apply the default MAC Cell Group configuration as specified in 9.2.2;
\( 1> \) release delayBudgetReportingConfig from the UE Inactive AS context, if stored;
\( 1> \) stop timer T342, if running;
\( 1> \) release overheatingAssistanceConfig from the UE Inactive AS context, if stored;
\( 1> \) stop timer T345, if running;
\( 1> \) release idc-AssistanceConfig from the UE Inactive AS context, if stored;
\( 1> \) release \( d r x \)-PreferenceConfig for all configured cell groups from the UE [nactive AS context, if stored;
\( 1> \) stop all instances of timer T346a, if running;
\( 1> \) release \( \max B W \)-PreferenceConfig for all configured cell groups from the UE Inactive AS context, if stored;
\( 1> \) stop all instances of timer T346b, if running;
\( 1> \) release maxCC-PreferenceConfig for all configured cell groups from the UE Inactive AS context, if stored;

ETSI


--- Page 145  ---


3GPP TS 38.331 version 17.0.0 Release 17
144
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) stop all instances of timer T346c, if running;
\( 1> \) release maxMIMO-LayerPreferenceConfig for all configured cell groups from the UE Inactive AS context, if stored;
\( 1> \) stop all instances of timer T346d, if running;
\( 1> \) release minSchedulingOffsetPreferenceConfig for all configured cell groups from the UE Inactive AS context, if stored;
\( 1> \) stop all instances of timer T346e, if running;
\( 1> \) release \( n \) m-RelaxationReportingConfig for all configured cell groups from the UE Inactive AS context, if stored;
\( 1> \) stop all instances of timer T346j, if running;
\( 1> \) release \( b f d \)-RelaxationReportingConfig for all configured cell groups from the UE Inactive AS context, if stored;
\( 1> \) stop all instances of timer T346k, if running;
\( 1> \) release releasePreferenceConfig from the UE Inactive AS context, if stored;
\( 1> \) release wlanNameList from the UE Inactive AS context, if stored;
\( 1> \) release btNameList from the UE [nactive AS context, if stored;
\( 1> \) release sensorNameList from the UE Inactive AS context, if stored;
\( 1> \) release obtainCommonLocation from the UE Inactive AS context, if stored;
\( 1> \) stop timer T346f, if running;
\( 1> \) stop timer T346i, if running;
\( 1> \) release referenceTimePreferenceReporting from the UE [nactive AS context, if stored;
\( 1> \) release \( s / \)-AssistanceConfigNR from the UE Inactive AS context, if stored;
1> release musim-GapAssistanceConfig from the UE Inactive AS context, if stored and stop timer T346h, if running;
\( 1> \) release musim-LeaveAssistanceConfig from the UE Inactive AS context, if stored;
\( 1> \) if the UE is connected with a L2 U2N Relay UE via PC5-RRC connection (ie the UE is a L2 U2N Remote UE):
\( 2> \) apply the specified configuration of SL-RLC0 used for the delivery of RRC message over SRB0 as specified in 9.1.1.4;
\( 2> \) apply the SDAP configuration and PDCP configuration as specified in 9.1.1.2 for SRB0;
1> else:
\( 2> \) apply the CCCH configuration as specified in 9.1.1.2;
\( 2> \) apply the timeAlignmentTimerCommon included in SIBI;
\( 1> \) if sdt-MAC-PHY-CG-Config is configured:
\( 2> \) if the resume procedure is initiated in a cell that is different to the PCell in which the UE received the stored sdt-MAC-PHY-CG-Config:
\( 3> \) release the stored sdt-MAC-PHY-CG-Config;
\( 1> \) if conditions for initiating SDT in accordance with 5.3 .13 .1 b are fulfilled:
\( 2> \) consider the resume procedure is initiated for SDT;
\( 2> \) start timer T319a;

ETSI


--- Page 146  ---


3GPP TS 38.331 version 17.0.0 Release 17
145
ETSI TS 138331 V17.0.0 (2022-05)

1> else:
\( 2> \) start timer T319;
\( 2> \) instruct the MAC entity to consider the cg-SDT-TimeAlignmentTimer as expired, if it is running;
\( 1> \) set the variable pendingRNA-Update to false;
\( 1> \) release successHO-Config from the UE Inactive AS context, if stored;
\( 1> \) initiate transmission of the RRCResumeRequest message or RRCResumeRequest 1 in accordance with 5.3.13.3.
5.3.13.3 Actions related to transmission of RRCResumeRequest or RRCResumeRequest1 message

The UE shall set the contents of RRCResumeRequest or RRCResumeRequest I message as follows:
\( 1> \) if field \( u s e F \) UllResumelD is signalled in SIBI:
\( 2> \) select RRCResumeRequestl as the message to use;
\( 2> \) set the resumeldentity to the stored fullI-RNTI value;
1> else:
\( 2> \) select RRCResumeRequest as the message to use;
\( 2> \) set the resumeldentity to the stored shortl-RNTI value;
\( 1> \) restore the RRC configuration, RoHC state, the stored QoS flow to DRB mapping rules and the \( K_{g N B} \) and \( K_{R R C \text { int }} \) keys from the stored UE Inactive AS context except for the following:
- masterCellGroup;
- mrdc-SecondaryCellGroup, if stored; and
- pdcp-Config;
\( 1> \) set the resumeMAC-I to the 16 least significant bits of the MAC-I calculated:
\( 2> \) over the ASN 1 encoded as per clause 8 (i.e., a multiple of 8 bits) VarResumeMAC-Input;
\( 2> \) with the \( K_{R R C n t} \) key in the UE [nactive AS Context and the previously configured integrity protection algorithm; and
\( 2> \) with all input bits for COUNT, BEARER and DIRECTION set to binary ones;
\( 1> \) derive the \( \mathrm{K}_{\mathrm{gNB}} \) key based on the current \( \mathrm{K}_{\mathrm{gNB}} \) key or the NH , using the nextHopChainingCount value received in the previous RRCRelease message and stored in the UE Inactive AS Context, as specified in TS 33.501[11];
\( 1> \) derive the \( K_{R R C e n c} \) key, the \( K_{R R C i n t} \) key, the \( K_{\text {UPint }} \) key and the \( K_{\text {UPenc }} \) key;
\( 1> \) configure lower layers to apply integrity protection for all radio bearers except SRB0 and MRBs using the configured algorithm and the \( K_{R R C \text { mt }} \) key and \( K_{\text {UPmn }} \) key derived in this clause immediately, i.e., integrity protection shall be applied to all subsequent messages received and sent by the UE;

NOTE 1: Only DRBs with previously configured UP integrity protection shall resume integrity protection.
\( 1> \) configure lower layers to apply ciphering for all radio bearers except SRB0 and MRBs and to apply the configured ciphering algorithm, the \( K_{R R C e n c} \) key and the \( K_{\text {UPENC }} \) key derived in this clause, ie the ciphering configuration shall be applied to all subsequent messages received and sent by the UE;
\( 1> \) re-establish PDCP entities for SRB1;
\( 1> \) resume SRB1;
\( 1> \) if the resume procedure is initiated for SDT:

ETSI


--- Page 147  ---


3GPP TS 38.331 version 17.0.0 Release 17
146
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) for each radio bearer that is configured for SDT:
3> restore the configuration associated with the RLC bearers of masterCellGroup and pdcp-Config from the UE Inactive AS context;

3> re-establish PDCP entity for the radio bearer without triggering PDCP status report;
\( 2> \) resume all the radio bearers that are configured for SDT;
\( 1> \) submit the selected message RRCResumeRequest or RRCResumeRequest I for transmission to lower layers
NOTE 2: Only DRBs with previously configured UP ciphering shall resume ciphering.
If lower layers indicate an integrity check failure while T319 or T319a is running, perform actions specified in 5.3.13.5.
The UE shall continue cell re-selection related measurements as well as cell re-selection evaluation. If the conditions for cell re-selection are fulfilled, the UE shall perform cell re-selection as specified in 5.3.13.6.
5.3.13.4 Reception of the RRCResume by the UE

The UE shall:
\( 1> \) stop timer T319, if running;
1> stop timer T319a, if running;
\( 1> \) stop timer T380, if running;
1> if T331 is running:
\( 2> \) stop timer T331;
\( 2> \) perform the actions as specified in 5.7.8.3;
\( 1> \) if the RRCResume includes the fullConfig:
\( 2> \) perform the full configuration procedure as specified in 5.3.5.11;
1> else:
\( 2> \) if the RRCResume does not include the restoreMCG-SCells:
3> release the MCG SCell(s) from the UE Inactive AS context, if stored;
\( 2> \) if the RRCResume does not include the restoreSCG:
\( 3> \) release the MR-DC related configurations (i.e., as specified in 5.3.5.10) from the UE Inactive AS context, if stored;
\( 2> \) restore the masterCellGroup, mrdc-SecondaryCellGroup, if stored, and pdcp-Config from the UE Inactive AS context;
\( 2> \) configure lower layers to consider the restored MCG and SCG SCell(s) (if any) to be in deactivated state;
\( 1> \) discard the UE Inactive AS context;
\( 1> \) store the used nextHopChainingCount value associated to the current \( \mathrm{K}_{\mathrm{gNB}} \);
1> release the suspendConfig except the ran-NotificationArealnfo;
\( 1> \) if the RRCResume includes the masterCellGroup:
\( 2> \) perform the cell group configuration for the received masterCellGroup according to 5.3.5.5;
\( 1> \) if the RRCResume includes the mrdc-SecondaryCellGroup:
\( 2> \) if the received \( m r d c \)-SecondaryCellGroup is set to \( n r \)-SCG:

ETSI


--- Page 148  ---


3GPP TS 38.331 version 17.0.0 Release 17
147
ETSI TS 138331 V17.0.0 (2022-05)

3> if the RRCResume includes the scg-State:
4> perform SCG deactivation as specified in 5.3.5.13b;
3> else:
4> perform SCG activation as specified in 5.3.5.13a;
\( 3> \) perform the RRC reconfiguration according to 5.3.5.3 for the RRCReconfiguration message included in \( n r-S C G ; \)
\( 2> \) if the received mrdc-SecondaryCellGroup is set to eutra-SCG:
3> perform the RRC connection reconfiguration as specified in TS 36.331 [10], clause 5.3.5.3 for the RRCConnectionReconfiguration message included in eutra-SCG;
\( 1> \) if the RRCResume includes the radioBearerConfig:
\( 2> \) perform the radio bearer configuration according to 5.3.5.6;
\( 1> \) if the RRCResume message includes the \( s k \)-Counter:
\( 2> \) perform security key update procedure as specified in 5.3.5.7;
\( 1> \) if the RRCResume message includes the radioBearerConfig2:
\( 2> \) perform the radio bearer configuration according to 5.3.5.6;
\( 1> \) if the RRCResume message includes the needForGapsConfigNR:
\( 2> \) if needForGapsConfigNR is set to setup:
\( 3> \) consider itself to be configured to provide the measurement gap requirement information of NR target bands;
\( 2> \) else:
\( 3> \) consider itself not to be configured to provide the measurement gap requirement information of NR target bands;
\( 1> \) if the RRCResume message includes the needForNCSG-ConfigNR:
\( 2> \) if needForNCSG-ConfigNR is set to setup:
\( 3> \) consider itself to be configured to provide the measurement gap and NCSG requirement information of NR target bands;
\( 2> \) else:
3> consider itself not to be configured to provide the measurement gap and NCSG requirement information of NR target bands;
\( 1> \) if the RRCResume message includes the needForNCSG-ConfigEUTRA:
\( 2> \) if needForNCSG-ConfigEUTRA is set to setup:
3> consider itself to be configured to provide the measurement gap and NCSG requirement information of E-UTRA target bands;
\( 2> \) else:
\( 3> \) consider itself not to be configured to provide the measurement gap and NCSG requirement information of E-UTRA target bands;

1> if the RRCResume message includes the appLayerMeasConfig:
\( 2> \) perform the application layer measurement configuration procedure as specified in 5.3.5.13d;

ETSI


--- Page 149  ---


3GPP TS 38.331 version 17.0.0 Release 17
148
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) resume SRB2 (if suspended), SRB3 (if configured), all DRBs (that are suspended) and multicast MRBs;
\( 1> \) if stored, discard the cell reselection priority information provided by the cellReselectionPriorities or inherited from another RAT;
\( 1> \) stop timer T320, if running;
\( 1> \) if the RRCResume message includes the measConfig:
\( 2> \) perform the measurement configuration procedure as specified in 5.5.2;
1> resume measurements if suspended;
1> if T390 is running:
\( 2> \) stop timer T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4;
1> if T302 is running:
\( 2> \) stop timer T302;
\( 2> \) perform the actions as specified in 5.3.14.4;
\( 1> \) enter RRC_CONNECTED;
\( 1> \) indicate to upper layers that the suspended RRC connection has been resumed;
1> stop the cell re-selection procedure;
1> stop relay reselection procedure if any for L2 U2N Remote UE;
\( 1> \) consider the current cell to be the PCell;
1> set the content of the of RRCResumeComplete message as follows:
\( 2> \) if the upper layer provides NAS PDU, set the dedicatedNAS-Message to include the information received from upper layers;

2 if upper layers provides a PLMN:
3> if the UE is either allowed or instructed to access the PLMN via a cell for which at least one CAG ID is broadcast:

4> set the selectedPLMN-Identity from the npn-IdentityInfoList;
\( 3> \) else:
4> set the selectedPLMN-Identity to the PLMN selected by upper layers from the plmn-IdentityInfoList;
\( 2> \) if the masterCellGroup contains the reportUplinkTxDirectCurrent:
3> include the uplinkTxDirectCurrentList for each MCG serving cell with UL;
3> include uplinkDirectCurrentBWP-SUL for each MCG serving cell configured with SUL carrier, if any, within the uplinkTxDirectCurrentList;
\( 2> \) if the masterCellGroup contains the reportUplinkTxDirectCurrentTwoCarrier:
3> include in the uplinkTxDirectCurrentTwoCarrierList the list of uplink Tx DC locations for the configured uplink carrier aggregation in the MCG;
\( 2> \) if the UE has idle/inactive measurement information concerning cells other than the PCell available in VarMeasIdleReport:

3> if the idleModeMeasurementReq is included in the RRCResume message:

ETSI


--- Page 150  ---


3GPP TS 38.331 version 17.0.0 Release 17
149
ETSI TS 138331 V17.0.0 (2022-05)

4> set the measResultldleEUTRA in the RRCResumeComplete message to the value of measReportIdleEUTRA in the VarMeasIdleReport, if available;

4> set the measResultldleNR in the RRCResumeComplete message to the value of measReportIdleNR in the VarMeasIdleReport, if available;
\( 4> \) discard the VarMeasIdleReport upon successful delivery of the RRCResumeComplete message is confirmed by lower layers;
\( 3> \) else:
\( 4> \) if the SIB1 contains idleModeMeasurementsNR and the UE has NR idle/inactive measurement information concerning cells other than the PCell available in VarMeasIdleReport; or

4> if the SIB1 contains idleModeMeasurementsEUTRA and the UE has E-UTRA idle/inactive measurement information available in VarMeasIdleReport:
\( 5> \) include the idleMeasAvailable;
\( 2> \) if the RRCResume message includes mrdc-SecondaryCellGroup set to eutra-SCG:
3> include in the eutra-SCG-Response the E-UTRA RRCConnectionReconfigurationComplete message in accordance with TS 36.331 [10] clause 5.3.5.3;
\( 2> \) if the RRCResume message includes mrdc-SecondaryCellGroup set to \( n r-S C G \) :
3> include in the nr-SCG-Response the SCG RRCReconfigurationComplete message;
\( 2> \) if the UE has logged measurements available for NR and if the RPLMN is included in plmn-IdentityList stored in VarLogMeasReport:

3> if the sigLoggedMeasType in VarLogMeasReport is included:
\( 4> \) include the sigLogMeasConfigAvailable in the RRCResumeComplete message and set it according to the following:
\( 5> \) if T330 timer is running:
6> set sigLogMeasConfigAvailable to true in the RRCResumeComplete message;
\( 5> \) else:
6> set sigLogMeasConfigAvailable to false in the RRCResumeComplete message;
3> include the logMeasAvailable in the RRCResumeComplete message;
\( 3> \) if Bluetooth measurement results are included in the logged measurements the UE has available for NR:
4> include the logMeasAvailableBT in the RRCResumeComplete message;
3> if WLAN measurement results are included in the logged measurements the UE has available for NR:
\( 4> \) include the \( \log \) MeasAvailableWLAN in the RRCResumeComplete message;
\( 2> \) if the sigLoggedMeasType in VarLogMeasReport is included:
3> if T330 timer is running:
4> set sigLogMeasConfigAvailable to true in the RRCResumeComplete message;
\( 3> \) else:
4 - if the UE has logged measurements available for NR:
\( 5> \) set sigLogMeasConfigAvailable to false in the RRCResumeComplete message;

ETSI


--- Page 151  ---


3GPP TS 38.331 version 17.0.0 Release 17
150
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the UE has connection establishment failure or connection resume failure information available in VarConnEstFailReport or VarConnEstFailReportList and if the RPLMN is equal to plmn-Identity stored in VarConnEstFailReport or VarConnEstFailReportList:

3> include connEstFaillnfoAvailable in the RRCResumeComplete message;
\( 2> \) if the UE has radio link failure or handover failure information available in VarRLF-Report and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report; or
\( 2> \) if the UE has radio link failure or handover failure information available in VarRLF-Report of TS 36.331 [10] and if the UE is capable of cross-RAT RLF reporting and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report of TS 36.331 [10]:
\( 3> \) include rlf-InfoAvailable in the RRCResumeComplete message;
\( 2> \) if the UE has successful handover information available in VarSuccessHO-Report and if the RPLMN is included in plmn-IdentityList stored in VarSuccessHO-Report:

3> include successHO-InfoAvailable in the RRCResumeComplete message;
\( 2> \) if the UE supports storage of mobility history information and the UE has mobility history information available in VarMobilityHistoryReport:

3> include the mobilityHistoryAvail in the RRCResumeComplete message;
\( 2> \) if speedStateReselectionPars is configured in the SIB2:
3> include the mobilityState in the RRCResumeComplete message and set it to the mobility state (as specified in TS 38.304 [20]) of the UE just prior to entering RRC_CONNECTED state;
\( 2> \) if the UE is configured to provide the measurement gap requirement information of NR target bands:
3> include the NeedForGapsInfoNR and set the contents as follows:
4> include intraFreq-needForGap and set the gap requirement information of intra-frequency measurement for each NR serving cell;

4> if requestedTargetBandFilterNR is configured, for each supported NR band that is also included in requestedTargetBandFilterNR, include an entry in interFreq-needForGap and set the gap requirement information for that band; otherwise, include an entry in interFreq-needForGap and set the corresponding gap requirement information for each supported NR band;
\( 2> \) if the UE is configured to provide the measurement gap and NCSG requirement information of NR target bands:

3> include the NeedForNCSG-InfoNR and set the contents as follows:
4> include intraFreq-needForNCSG and set the gap and NCSG requirement information of intrafrequency measurement for each NR serving cell;

4> if requestedTargetBandFilterNCSG-NR is configured, for each supported NR band included in requestedTargetBandFilterNCSG-NR, include an entry in interFreq-needForNCSG and set the NCSG requirement information for that band; otherwise, include an entry for each supported NR band in interFreq-needForNCSG and set the corresponding NCSG requirement information;
\( 2> \) if the UE is configured to provide the measurement gap and NCSG requirement information of E-UTRA target bands:

3> include the NeedForNCSG-InfoEUTRA and set the contents as follows:
\( 4> \) if requestedTargetBandFilterNCSG-EUTRA is configured, for each supported E-UTRA band included in requestedTargetBandFilterNCSG-EUTRA, include an entry in needForNCSG-EUTRA and set the NCSG requirement information for that band; otherwise, include an entry for each supported E-UTRA band in needForNCSG-EUTRA and set the corresponding NCSG requirement information;

1> submit the RRCResumeComplete message to lower layers for transmission;

ETSI


--- Page 152  ---


3GPP TS 38.331 version 17.0.0 Release 17
151
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) the procedure ends.
5.3.13.5 Handling of failure to resume RRC Connection

The UE shall:
\( 1> \) if timer T319 expires:
\( 2> \) if the UE has connection establishment failure information or connection resume failure information available in VarConnEstFailReport and if the RPLMN is not equal to plmn-identity stored in VarConnEstFailReport; or
\( 2> \) if the cell identity of current cell is not equal to the cell identity stored in measResultFailedCell in VarConnEstFailReport:
\( 3> \) reset the numberOfConnFail to 0;
\( 2> \) if the UE has connection establishment failure informaton or connection resume failure information available in VarConnEstFailReportList and if the RPLMN is not equal to plmn-identity stored in VarConnEstFailReportList:
\( 3> \) clear the content included in VarConnEstFailReportList;
\( 2> \) clear the content included in VarConnEstFailReport except for the numberOfConnFail, if any;
\( 2> \) store the following connection resume failure information in the VarConnEstFailReport by setting its fields as follows:
\( 3> \) set the plmn-Identity to the PLMN selected by upper layers (see TS 24.501 [23]) from the PLMN(s) included in the plmn-IdentitylnfoList in SIB1;
\( 3> \) set the measResultFailedCell to include the global cell identity, tracking area code, the cell level and SS/PBCH block level RSRP, and RSRQ, and SS/PBCH block indexes, of the failed cell based on the available SSB measurements collected up to the moment the UE detected connection resume failure;
\( 3> \) if available, set the measResultNeighCells, in order of decreasing ranking-criterion as used for cell reselection, to include neighbouring cell measurements for at most the following number of neighbouring cells: 6 intra-frequency and 3 inter-frequency neighbours per frequency as well as 3 inter-RAT neighbours, per frequency/ set of frequencies per RAT and according to the following:

4 for each neighbour cell included, include the optional fields that are available;
NOTE: The UE includes the latest results of the available measurements as used for cell reselection evaluation, which are performed in accordance with the performance requirements as specified in TS 38.133 [14].
\( 3> \) if available, set the locationInfo as in 5.3.3.7;
\( 3> \) set perRAInfoList to indicate the performed random access procedure related information as specified in 5.7.10.5;
\( 3> \) if numberOfConnFail is smaller than 8 :
\( 4> \) increment the numberOfConnFail by 1;
\( 2> \) if the UE supports multiple CEF report:
3> if the cgi-Info in the measResultFailedCell in the newly added VarConnEstFailReport is the same as the cgi-Info in the measResultFailedCell in the last entry in the VarConnEstFailReportList:
\( 4> \) except for the numberOfConnFail, replace all information elements for the enty with the VarConnEstFailReport:
\( 3> \) else:
\( 4> \) if the maxCEFReport-r 17 has not been reached:

ETSI


--- Page 153  ---


3GPP TS 38.331 version 17.0.0 Release 17
152
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) append the VarConnEstFailReport as a new entry in the VarConnEstFailReportList;
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'RRC Resume failure'.

1> else if upon receiving Integrity check failure indication from lower layers while T319 or T319a is running:
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'RRC Resume failure'.

1> else if indication from the MCG RLC that the maximum number of retransmissions has been reached is received while T319a is running; or

1> if random access problem indication is received from MCG MAC while T319a is running; or
1> if the lower layers indicate that cg-SDT-TimeAlignmentTimer expired before receiving network response for the UL CG-SDT transmission with CCCH message while T319a is running; or

1> if T319a expires:
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'RRC Resume failure'.

The UE may discard the connection resume failure or connection establishment failure information, i.e release the UE variable VarConnEstFailReport, 48 hours after the last connection resume failure is detected.

The L2 U2N Relay UE either triggers PC5-S release or sends Notification message to the connected L2 U2N Remote UE(s) in accordance with 5.8.9.10.
5.3.13.6 Cell re-selection or cell selection or L2 U2N relay (re)selection while T390, T319, T319a or T302 is running (UE in RRC_INACTIVE)

The UE shall:
1> if cell reselection occurs while T319 or T302 or T319a is running; or
1> if relay reselection occurs while T319 is running; or
1> if cell changes due to relay reselection while T302 is running:
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'RRC Resume failure';

1> else if cell selection or reselection occurs while T390 is running, or cell change due to relay selection or reselection occurs while T390 is running:
\( 2> \) stop T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4.
5.3.13.7 Reception of the RRCSetup by the UE

The UE shall:
1> perform the RRC connection setup procedure as specified in 5.3.3.4.
5.3.13.8 RNA update

In RRC_INACTIVE state, the UE shall:
1> if T380 expires; or
\( 1> \) if RNA Update is triggered at reception of SIB1, as specified in 5.2.2.4.2:
\( 2> \) if T319a is not running:

ETSI


--- Page 154  ---


3GPP TS 38.331 version 17.0.0 Release 17
153
ETSI TS 138331 V17.0.0 (2022-05)

3> initiate RRC connection resume procedure in 5.3.13.2 with resumeCause set to ma-Update; \( 1> \) if barring is alleviated for Access Category ' 8 ' or Access Category ' 2 ', as specified in 5.3.14.4:
\( 2> \) if upper layers do not request RRC the resumption of an RRC connection, and
\( 2> \) if the variable pendingRNA-Update is set to true:
\( 3> \) initiate RRC connection resume procedure in 5.3.13.2 with resumeCause value set to rna-Update.
If the UE in RRC_INACTIVE state fails to find a suitable cell and camps on the acceptable cell to obtain limited service as defined in TS 38.304 [20], the UE shall:

1> perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'other'.
NOTE: It is left to UE implementation how to behave when T380 expires while the UE is camped neither on a suitable nor on an acceptable cell.
5.3.13.9 Reception of the RRCRelease by the UE

The UE shall:
1> perform the actions as specified in 5.3.8.
5.3.13.10 Reception of the RRCReject by the UE

The UE shall:
1> perform the actions as specified in 5.3.15.
5.3.13.11 Inability to comply with RRCResume

The UE shall:
\( 1> \) if the UE is unable to comply with (part of) the configuration included in the RRCResume message;
\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'RRC Resume failure'.

NOTE 1: The UE may apply above failure handling also in case the RRCResume message causes a protocol error for which the generic error handling as defined in 10 specifies that the UE shall ignore the message.

NOTE 2: If the UE is unable to comply with part of the configuration, it does not apply any part of the configuration, i.e. there is no partial success/failure.
5.3.13.12 Inter RAT cell reselection

Upon reselecting to an inter-RAT cell, the UE shall:
\( 1> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'other'.
5.3.14 Unified Access Control
5.3.14.1 General

The purpose of this procedure is to perform access barring check for an access attempt associated with a given Access Category and one or more Access Identities upon request from upper layers according to TS 24.501 [23] or the RRC layer. This procedure does not apply to IAB-MT. This procedure does not apply to L2 U2N Relay UE initiating RRC connection establishment or RRC connection resume upon reception of any message from a L2 U2N remote UE via SLRLC0 or SL-RLC1 in accordance to 5.3.3.1a and 5.3.13.1a.

After a PCell change in RRC_CONNECTED the UE shall defer access barring checks until it has obtained SIB1 (as specified in 5.2.2.2) from the target cell.

ETSI


--- Page 155  ---


3GPP TS 38.331 version 17.0.0 Release 17
154
ETSI TS 138331 V17.0.0 (2022-05)
5.3.14.2 Initiation

Upon initiation of the procedure, the UE shall:
\( 1> \) if timer T390 is running for the Access Category:
\( 2> \) consider the access attempt as barred;
\( 1> \) else if timer T302 is running and the Access Category is neither ' 2 ' nor ' 0 ':
\( 2> \) consider the access attempt as barred;
1> else:
\( 2> \) if the Access Category is ' 0 ':
\( 3> \) consider the access attempt as allowed;
\( 2> \) else:
\( 3> \) if SIBI includes uac-BarringPerPLMN-List that contains a UAC-BarringPerPLMN for the selected PLMN or SNPN:

4> if the procedure in 5.2.2.4.2 for a selected PLMN resulted in use of information in npn-IdentitylnfoList and UAC-BarringPerPLMN has an entry with the plmn-Identitylndex corresponding to used information in this list:
\( 5> \) select the UAC-BarringPerPLMN entry with the plmn-IdentityIndex corresponding to used information in the npn-IdentitylnfoList;
\( 4> \) else:
\( 5> \) select the UAC-BarringPerPLMN entry with the plmn-IdentityIndex corresponding to the selected PLMN and the PLMN-IdentityInfo, if any, or the selected SNPN and the npn-IdentityInfoList;
\( 3> \) if any UAC-BarringPerPLMN entry is selected:
\( 4> \) in the remainder of this procedure, use the selected UAC-BarringPerPLMN entry (i.e presence or absence of access barring parameters in this entry) irrespective of the uac-BarringForCommon included in SIBI;
\( 3> \) else if SIB1 includes uac-BarringForCommon:
\( 4> \) in the remainder of this procedure use the \( u a c \)-BarringForCommon (i.e presence or absence of these parameters) included in SIBI;
\( 3> \) else:
\( 4> \) consider the access attempt as allowed;
\( 3> \) if \( u a c \)-BarringForCommon is applicable or the \( u a c \)-ACBarringListType indicates that \( u a c \) ExplicitACBarringList is used:
\( 4> \) if the corresponding UAC-BarringPerCatList contains a UAC-BarringPerCat entry corresponding to the Access Category:
\( 5> \) select the UAC-BarringPerCat entry;
\( 5> \) if the uac-BarringInfoSetList contains a UAC-BarringInfoSet entry corresponding to the selected uac-barringInfoSetIndex in the UAC-BarringPerCat:
\( 6> \) select the UAC-BarringInfoSet entry;
\( 6> \) perform access barring check for the Access Category as specified in 5.3.14.5, using the selected UAC-BarringInfoSet as "UAC barring parameter";
\( 5> \) else:

ETSI


--- Page 156  ---


3GPP TS 38.331 version 17.0.0 Release 17
155
ETSI TS 138331 V17.0.0 (2022-05)

\( 6> \) consider the access attempt as allowed;
4> else:
\( 5> \) consider the access attempt as allowed;
3> else if the uac-ACBarringListType indicates that uac-ImplicitACBarringList is used:
4> select the uac-BarringInfoSetIndex corresponding to the Access Category in the uacImplicitACBarringList;
\( 4> \) if the uac-BarringInfoSetList contains the UAC-BarringInfoSet entry corresponding to the selected uac-BarringInfoSetIndex:
\( 5> \) select the UAC-BarringInfoSet entry;
\( 5> \) perform access barring check for the Access Category as specified in 5.3.14.5, using the selected UAC-BarringInfoSet as "UAC barring parameter";
\( 4> \) else:
\( 5> \) consider the access attempt as allowed;
3> else:
4> consider the access attempt as allowed;
\( 1> \) if the access barring check was requested by upper layers:
\( 2> \) if the access attempt is considered as barred:
3> if timer T302 is running:
4> if timer T390 is running for Access Category '2':
\( 5> \) inform the upper layer that access barring is applicable for all access categories except categories ' 0 ', upon which the procedure ends;
4) else
\( 5> \) inform the upper layer that access barring is applicable for all access categories except categories ' 0 ' and ' 2 ', upon which the procedure ends;

3> else:
\( 4> \) inform upper layers that the access attempt for the Access Category is barred, upon which the procedure ends;
\( 2> \) else:
\( 3> \) inform upper layers that the access attempt for the Access Category is allowed, upon which the procedure ends;

1> else:
\( 2> \) the procedure ends.
5.3.14.3 Void
5.3.14.4 T302, T390 expiry or stop (Barring alleviation)

The UE shall:
1> if timer T302 expires or is stopped:
\( 2> \) for each Access Category for which T390 is not running:

ETSI


--- Page 157  ---


3GPP TS 38.331 version 17.0.0 Release 17
156
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) consider the barring for this Access Category to be alleviated:
1> else if timer T390 corresponding to an Access Category other than '2' expires or is stopped, and if timer T302 is not running:
\( 2> \) consider the barring for this Access Category to be alleviated;
1> else if timer T390 corresponding to the Access Category '2' expires or is stopped:
\( 2> \) consider the barring for this Access Category to be alleviated;
\( 1> \) when barring for an Access Category is considered being alleviated:
\( 2> \) if the Access Category was informed to upper layers as barred:
\( 3> \) inform upper layers about barring alleviation for the Access Category.
\( 2> \) if barring is alleviated for Access Category ' 8 '; or
\( 2> \) if barring is alleviated for Access Category '2':
\( 3> \) perform actions specified in 5.3.13.8;
5.3.14.5 Access barring check

The UE shall:
\( 1> \) if one or more Access [dentities equal to \( 1,2,11,12,13,14 \), or 15 are indicated according to TS 24.501 [23], and

1> if for at least one of these Access Identities the corresponding bit in the uac-BarringForAccessIdentity contained in "UAC barring parameter" is set to zero:
\( 2> \) consider the access attempt as allowed;
1> else:
\( 2> \) if the establishment of the RRC connection is the result of release with redirect with mpsPriorityIndication (either in NR or E-UTRAN); and
\( 2> \) if the bit corresponding to Access Identity 1 in the uac-BarringForAccessldentity contained in the "UAC barring parameter" is set to zero:
\( 3> \) consider the access attempt as allowed;
\( 2> \) else if Access [dentity 3 is indicated:
\( 3> \) draw a random number 'rand' uniformly distributed in the range: \( 0 \leq \) rand \( <1 \);
3> if 'rand' is lower than the value indicated by uac-BarringFactorForAIB included in "UAC barring parameter":
\( 4> \) consider the access attempt as allowed;
\( 3> \) else:
4> consider the access attempt as barred;
\( 2> \) else:
\( 3> \) draw a random number 'rand' uniformly distributed in the range: \( 0 \leq \) rand \( <1 \);
3> if 'rand' is lower than the value indicated by uac-BarringFactor included in "UAC barring parameter":
4> consider the access attempt as allowed;
\( 3> \) else:

ETSI


--- Page 158  ---


3GPP TS 38.331 version 17.0.0 Release 17
157
ETSI TS 138331 V17.0.0 (2022-05)

4> consider the access attempt as barred;
\( 1> \) if the access attempt is considered as barred:
\( 2> \) draw a random number 'rand' that is uniformly distributed in the range \( 0 \leq \) rand \( <1 \);
\( 2> \) start timer T390 for the Access Category with the timer value calculated as follows, using the uacBarringTime included in "UAC barring parameter":
\[
\text { T390 }=(0.7+0.6 \neq \text { rand }) \neq \text { uac-BarringTime. }
\]
5.3.15 RRC connection reject
5.3.15.1 Initiation

The UE initiates the procedure upon the reception of \( R R C R \) eject when the UE tries to establish or resume an RRC connection.
5.3.15.2 Reception of the RRCReject by the UE

The UE shall:
\( 1> \) stop timer T300, if running;
\( 1> \) stop timer T319, if running;
1> stop timer T319a, if running;
\( 1> \) stop timer T302, if running;
\( 1> \) reset MAC and release the default MAC Cell Group configuration;
\( 1> \) if waitTime is configured in the RRCReject:
\( 2> \) start timer T302, with the timer value set to the waitTime;
\( 1> \) if \( R R C \) Reject is received in response to a request from upper layers:
\( 2> \) inform the upper layer that access barring is applicable for all access categories except categories ' 0 ' and ' 2 ';
\( 1> \) if RRCReject is received in response to an RRCSetupRequest:
\( 2> \) inform upper layers about the failure to setup the RRC connection, upon which the procedure ends;
\( 1> \) else if RRCReject is received in response to an RRCResumeRequest or an RRCResumeRequest I:
\( 2> \) if resume is triggered by upper layers:
\( 3> \) inform upper layers about the failure to resume the RRC connection;
\( 2> \) if resume is triggered due to an RNA update; or
\( 2> \) if resume is triggered for SDT and T380 is not running:
\( 3> \) set the variable pendingRNA-Update to true;
\( 2> \) discard the current \( \mathrm{K}_{\mathrm{gNB}} \) key, the \( \mathrm{K}_{\mathrm{RRCenc}} \) key, the \( \mathrm{K}_{\mathrm{RRC} \text { int }} \) key, the \( \mathrm{K}_{\text {UPint }} \) key and the \( \mathrm{K}_{\text {UPenc }} \) key derived in
accordance with 5.3.13.3;
\( 2> \) suspend SRB1 and the radio bearers configured for SDT, if any;
\( 2> \) for each radio bearer configured for SDT:
\( 3> \) indicate PDCP suspend to lower layers;
3> re-establish the RLC entity as specified in TS 38.322 [4];

ETSI


--- Page 159  ---


3GPP TS 38.331 version 17.0.0 Release 17
158
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) the procedure ends;
Upon L2 U2N Relay UE receives RRCReject, it either triggers PC5-S release or sends Notification message to the connected L2 U2N Remote UE(s) in accordance with 5.8.9.10.

The RRC_INACTIVE UE shall continue to monitor paging while the timer T302 is running.
NOTE: If timer T331 is running, the UE continues to perform idle/inactive measurements according to 5.7.8.
5.4 Inter-RAT mobility
5.4.1 Introduction

Network controlled inter-RAT mobility between NR and E-UTRA, where E-UTRA can be connected to either EPC or 5GC, and from NR to UTRA-FDD is supported.
5.4.2 Handover to NR
5.4.2.1 General

Figure 5.4.2.1-1: Handover to NR, successful

The purpose of this procedure is to, under the control of the network, transfer a connection between the UE and another Radio Access Network (e.g. E-UTRAN) to NR.

The handover to NR procedure applies when SRBs, possibly in combination with DRBs, are established in another RAT. Handover from E-UTRA to NR applies only after integrity has been activated in E-UTRA.
5.4.2.2 Initiation

The RAN using another RAT initiates the handover to NR procedure, in accordance with the specifications applicable for the other RAT, by sending the RRCReconfiguration message via the radio access technology from which the interRAT handover is performed.

The network applies the procedure as follows:
- to activate ciphering, possibly using NULL algorithm, if not yet activated in the other RAT;
- to re-establish SRBs and one or more DRBs;
5.4.2.3 Reception of the RRCReconfiguration by the UE

The UE shall:
1> apply the default L1 parameter values as specified in corresponding physical layer specifications except for the parameters for which values are provided in SIBI;

1> apply the default MAC Cell Group configuration as specified in 9.2.2;
\( 1> \) perform RRC reconfiguration procedure as specified in 5.3.5;

ETSI


--- Page 160  ---


3GPP TS 38.331 version 17.0.0 Release 17
159
ETSI TS 138331 V17.0.0 (2022-05)

NOTE: If the UE is connected to 5GC of the source E-UTRA cell, the delta configuration for PDCP and SDAP can be used for intra-system inter-RAT handover. For other cases, source RAT configuration is not considered when the UE applies the reconfiguration message of target RAT.
5.4.3 Mobility from NR
5.4.3.1 General

Figure 5.4.3.1-1: Mobility from NR, successful

Figure 5.4.3.1-2: Mobility from NR, failure

The purpose of this procedure is to move a UE in RRC_CONNECTED to a cell using other RAT, e.g. E-UTRA, UTRA-FDD. The mobility from NR procedure covers the following type of mobility:
- handover, i.e. the MobilityFromNRCommand message includes radio resources that have been allocated for the UE in the target cell;
5.4.3.2 Initiation

The network initiates the mobility from NR procedure to a UE in RRC_CONNECTED, possibly in response to a MeasurementReport or an MCGFailureInformation message, by sending a MobilityFromNRCommand message. The network applies the procedure as follows:
- the procedure is initiated only when AS security has been activated, and SRB2 with at least one DRB are setup and not suspended;
- the procedure is not initiated if any DAPS bearer is configured;
5.4.3.3 Reception of the MobilityFromNRCommand by the UE

The UE shall:
\( 1> \) stop timer T310, if running;
\( 1> \) stop timer T312, if running;
1> if T316 is running:
\( 2> \) stop timer T316;
\( 2> \) clear the information included in VarRLF-Report, if any;
1> if T390 is running:

ETSI


--- Page 161  ---


3GPP TS 38.331 version 17.0.0 Release 17
160
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) stop timer T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4;
\( 1> \) if the targetRAT-Type is set to eutra:
\( 2> \) consider inter-RAT mobility as initiated towards E-UTRA;
\( 2> \) forward the nas-SecurityParamFromNR to the upper layers, if included;
1> else if the targetRAT-Type is set to utra-fdd:
\( 2> \) consider inter-RAT mobility as initiated towards UTRA-FDD;
\( 2> \) forward the nas-SecurityParamFromNR to the upper layers, if included;
\( 1> \) access the target cell indicated in the inter-RAT message in accordance with the specifications of the target RAT.
5.4.3.4 Successful completion of the mobility from NR

Upon successfully completing the handover, at the source side the UE shall:
\( 1> \) reset MAC;
\( 1> \) stop all timers that are running except T325, T330 and T400;
1> release ran-NotificationArealnfo, if stored;
\( 1> \) release the AS security context including the \( \mathrm{K}_{\text {RRCenc }} \) key, the \( \mathrm{K}_{\text {RRCInt }} \) key, the \( \mathrm{K}_{\text {UPint }} \) key and the \( \mathrm{K}_{\text {UPenc }} \) key, if stored;
\( 1> \) release all radio resources, including release of the RLC entity and the MAC configuration;
\( 1> \) release the associated PDCP entity and SDAP entity for all established RBs;
NOTE: PDCP and SDAP configured by the source RAT prior to the handover that are reconfigured and re-used by target RAT when delta signalling (i.e., during inter-RAT intra-system handover when fullConfig is not present) is used, are not released as part of this procedure.
\( 1> \) if the targetRAT-Type is set to eutra and the nas-SecurityParamFromNR is included: or
1> if the targetRAT-Type is set to utra-fdd:
\( 2> \) indicate the release of the RRC connection to upper layers together with the release cause 'other'.
5.4.3.5 Mobility from NR failure

The UE shall:
\( 1> \) if the UE does not succeed in establishing the connection to the target radio access technology:
\( 2> \) if the targetRAT-Type in the received MobilityFromNRCommand is set to eutra and the UE supports Radio Link Failure Report for Inter-RAT MRO EUTRA:
\( 3> \) store handover failure information in VarRLF-Report according to 5.3.10.5;
\( 2> \) if voiceFallbackIndication is included in the MobilityFromNRCommand message:
3> attempt to select an E-UTRA cell:
4> if a suitable E-UTRA cell is selected:
\( 5> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11, with release cause 'RRC connection failure';
\( 4> \) else:

ETSI


--- Page 162  ---


3GPP TS 38.331 version 17.0.0 Release 17
161
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) revert back to the configuration used in the source PCell;
\( 5> \) initiate the connection re-establishment procedure as specified in clause 5.3.7;
\( 2> \) else:
3> revert back to the configuration used in the source PCell;
\( 3> \) initiate the connection re-establishment procedure as specified in clause 5.3.7;
1> else if the UE is unable to comply with any part of the configuration included in the MobilityFromNRCommand message; or

1> if there is a protocol error in the inter RAT information included in the MobilityFromNRCommand message, causing the UE to fail the procedure according to the specifications applicable for the target RAT:
\( 2> \) if the targetRAT-Type in the received MobilityFromNRCommand is set to eutra and the UE supports Radio Link Failure Report for Inter-RAT MRO EUTRA:
\( 3> \) store handover failure information in VarRLF-Report according to 5.3.10.5;
\( 2> \) revert back to the configuration used in the source PCell;
\( 2> \) initiate the connection re-establishment procedure as specified in clause 5.3.7.
5.5 Measurements
5.5.1 Introduction

The network may configure an RRC_CONNECTED UE to perform measurements. The network may configure the UE to report them in accordance with the measurement configuration or perform conditional reconfiguration evaluation in accordance with the conditional reconfiguration. The measurement configuration is provided by means of dedicated signalling i.e. using the RRCReconfiguration or RRCResume.

The network may configure the UE to perform the following types of measurements:
- NR measurements;
- Inter-RAT measurements of E-UTRA frequencies;
- Inter-RAT measurements of UTRA-FDD frequencies;
- NR sidelink measurements of L2 U2N Relay UEs.

The network may configure the UE to report the following measurement information based on SS/PBCH block(s):
- Measurement results per SS/PBCH block;
- Measurement results per cell based on SS/PBCH block(s);
- SS/PBCH block(s) indexes.

The network may configure the UE to report the following measurement information based on CSI-RS resources:
- Measurement results per CSI-RS resource;
- Measurement results per cell based on CSI-RS resource(s);
- CSI-RS resource measurement identifiers.

The network may configure the UE to perform the following types of measurements for NR sidelink and V2X sidelink:
- CBR measurements.

The network may configure the UE to report the following CLI measurement information based on SRS resources:

ETSI


--- Page 163  ---


3GPP TS 38.331 version 17.0.0 Release 17
162
ETSI TS 138331 V17.0.0 (2022-05)
- Measurement results per SRS resource;
- SRS resource(s) indexes.

The network may configure the UE to report the following CLI measurement information based on CLI-RSSI resources:
- Measurement results per CLI-RSSI resource;
- CLI-RSSI resource(s) indexes.

The network may configure the UE to report the following Rx-Tx time difference measurement information based on CSI-RS for tracking or PRS:
- UE Rx-Tx time difference measurement result.

The measurement configuration includes the following parameters:
1. Measurement objects: A list of objects on which the UE shall perform the measurements.
- For intra-frequency and inter-frequency measurements a measurement object indicates the frequency/time location and subcarrier spacing of reference signals to be measured. Associated with this measurement object, the network may configure a list of cell specific offsets, a list of 'exclude-listed' cells and a list of 'allow-listed' cells. Exclude-listed cells are not applicable in event evaluation or measurement reporting. Allow-listed cells are the only ones applicable in event evaluation or measurement reporting.
- The measObjectld of the MO which corresponds to each serving cell is indicated by servingCellMO within the serving cell configuration.
- For inter-RAT E-UTRA measurements a measurement object is a single E-UTRA carrier frequency. Associated with this E-UTRA carrier frequency, the network can configure a list of cell specific offsets and a list of 'exclude-listed' cells. Exclude-listed cells are not applicable in event evaluation or measurement reporting.
- For inter-RAT UTRA-FDD measurements a measurement object is a set of cells on a single UTRA-FDD carrier frequency.
- For NR sidelink measurements of L2 U2N Relay UEs, a measurement object is a single NR sidelink frequency to be measured.
- For CBR measurement of NR sidelink communication, a measurement object is a set of transmission resource pool(s) on a single carrier frequency for NR sidelink communication.
- For CLI measurements a measurement object indicates the frequency/time location of SRS resources and/or CLI-RSSI resources, and subcarrier spacing of SRS resources to be measured.
2. Reporting configurations: A list of reporting configurations where there can be one or multiple reporting configurations per measurement object. Each measurement reporting configuration consists of the following:
- Reporting criterion: The criterion that triggers the UE to send a measurement report. This can either be periodical or a single event description.
- RS type: The RS that the UE uses for beam and cell measurement results (SS/PBCH block or CSI-RS).
- Reporting format: The quantities per cell and per beam that the UE includes in the measurement report (e.g. RSRP) and other associated information such as the maximum number of cells and the maximum number beams per cell to report.

In case of conditional reconfiguration, each configuration consists of the following:
- Execution criteria: The criteria the UE uses for conditional reconfiguration execution.
- RS type: The RS that the UE uses for obtaining beam and cell measurement results (SS/PBCH block-based or CSI-RS-based), used for evaluating conditional reconfiguration execution condition.
3. Measurement identities: For measurement reporting, a list of measurement identities where each measurement identity links one measurement object with one reporting configuration. By configuring multiple measurement

ETSI


--- Page 164  ---


3GPP TS 38.331 version 17.0.0 Release 17
163
ETSI TS 138331 V17.0.0 (2022-05)

identities, it is possible to link more than one measurement object to the same reporting configuration, as well as to link more than one reporting configuration to the same measurement object. The measurement identity is also included in the measurement report that triggered the reporting, serving as a reference to the network. For conditional reconfiguration triggering, one measurement identity links to exactly one conditional reconfiguration trigger configuration. And up to 2 measurement identities can be linked to one conditional reconfiguration execution condition.
4. Quantity configurations: The quantity configuration defines the measurement filtering configuration used for all event evaluation and related reporting, and for periodical reporting of that measurement. For NR measurements, the network may configure up to 2 quantity configurations with a reference in the NR measurement object to the configuration that is to be used. In each configuration, different filter coefficients can be configured for different measurement quantities, for different RS types, and for measurements per cell and per beam.
5. Measurement gaps: Periods that the UE may use to perform measurements.

Editor Note: It is FFS whether and how the definition of measurement gap should be updated due to pre-configured MG_

A UE in RRC_CONNECTED maintains a measurement object list, a reporting configuration list, and a measurement identities list according to signalling and procedures in this specification. The measurement object list possibly includes NR measurement object(s), CLI measurement object(s), inter-RAT objects, and L2 U2N Relay objects. Similarly, the reporting configuration list includes NR, inter-RAT, and L2 U2N Relay reporting configurations. Any measurement object can be linked to any reporting configuration of the same RAT type. Some reporting configurations may not be linked to a measurement object. Likewise, some measurement objects may not be linked to a reporting configuration.

The measurement procedures distinguish the following types of cells:
1. The NR serving cell(s) - these are the SpCell and one or more SCells.
2. Listed cells - these are cells listed within the measurement object(s).
3. Detected cells - these are cells that are not listed within the measurement object(s) but are detected by the UE on the SSB frequency(ies) and subcarrier spacing(s) indicated by the measurement object(s).

For NR measurement object(s), the UE measures and reports on the serving cell(s)/serving Relay UE (for L2 U2N Remote UE), listed cells and/or detected cells. For inter-RAT measurements object(s) of E-UTRA, the UE measures and reports on listed cells and detected cells and, for RSSI and channel occupancy measurements, the UE measures and reports on the configured resources on the indicated frequency. For inter-RAT measurements object(s) of UTRA-FDD, the UE measures and reports on listed cells. For CLI measurement object(s), the UE measures and reports on configured measurement resources (i.e. SRS resources and/or CLI-RSSI resources). For L2 U2N Relay object(s), the UE measures and reports on the serving NR cell(s), as well as the discovered L2 U2N Relay UEs.

Whenever the procedural specification, other than contained in clause 5.5 .2 , refers to a field it concerns a field included in the VarMeasConfig unless explicitly stated otherwise i.e. only the measurement configuration procedure covers the direct UE action related to the received measConfig.

In NR-DC, the UE may receive two independent measConfig:
- a measConfig, associated with MCG, that is included in the RRCReconfiguration message received via SRB1; and
- a measConfig, associated with SCG, that is included in the RRCReconfiguration message received via SRB3, or, alternatively, included within a RRCReconfiguration message embedded in a RRCReconfiguration message received via SRB1.

In this case, the UE maintains two independent VarMeasConfig and VarMeasReportList, one associated with each measConfig, and independently performs all the procedures in clause 5.5 for each measConfig and the associated VarMeasConfig and VarMeasReportList, unless explicitly stated otherwise.

The configurations related to CBR measurements are only included in the measConfig associated with MCG.
The configurations related to Rx -Tx time difference measurement are only included in the measConfig associated with MCG_

ETSI


--- Page 165  ---


3GPP TS 38.331 version 17.0.0 Release 17
164
ETSI TS 138331 V17.0.0 (2022-05)
5.5.2 Measurement configuration
5.5.2.1 General

The network applies the procedure as follows:
- to ensure that, whenever the UE has a measConfig associated with a CG, it includes a measObject for the SpCell and for each NR SCell of the CG to be measured;
- to configure at most one measurement identity across all CGs using a reporting configuration with the reportType set to reportCGI;
- to configure at most one measurement identity per the node hosting PDCP entity using a reporting configuration with the ul-DelayValueConfig;
- to configure at most one measurement identity per the node hosting PDCP entity using a reporting configuration with the ul-Excess Delay Config;
- to ensure that, in the measConfig associated with a CG:
- for all SSB based measurements there is at most one measurement object with the same ssbFrequency;
- an smtcl included in any measurement object with the same ssbFrequency has the same value and that an \( s m t c 2 \) included in any measurement object with the same ssbFrequency has the same value and that an smtc3list included in any measurement object with the same ssbFrequency has the same value and that an smtc4list included in any measurement object with the same ssbFrequency has the same value;
- to ensure that all measurement objects configured in this specification and in TS 36.331 [10] with the same ssbFrequency have the same ssbSubcarrierSpacing;
- to ensure that, if a measurement object associated with the MCG has the same ssbFrequency as a measurement object associated with the SCG:
- for that ssbFrequency, the measurement window according to the smtcl configured by the MCG includes the measurement window according to the smtcl configured by the SCG, or vice-versa, with an accuracy of the maximum receive timing difference specified in TS 38.133 [14].
- if both measurement objects are used for RSSI measurements, bits in measurementSlots in both objects corresponding to the same slot are set to the same value. Also, the endSymbol is the same in both objects.
- to ensure that, if a measurement object has the same ssbFrequency as a measurement object configured in TS 36.331 [10]:
- for that ssbFrequency, the measurement window according to the smtc configured in TS 36.331 [10] includes the measurement window according to the smtcl configured in TS 38.331, or vice-versa, with an accuracy of the maximum receive timing difference specified in TS 38.133 [14].
- if both measurement objects are used for RSSI measurements, bits in measurementSlots in both objects corresponding to the same slot are set to the same value. Also, the endSymbol is the same in both objects.
- when the UE is in NE-DC, NR-DC, or NR standalone, to configure at most one measurement identity across all CGs using a reporting configuration with the reportType set to reportSFTD;

For CSI-RS resources, the network applies the procedure as follows:
- to ensure that all CSI-RS resources configured in each measurement object have the same center frequency, (startPRB+floor(nrofPRBs/2))
- to ensure that the total number of CSI-RS resources configured in each measurement object does not exceed the maximum number specified in TS 38.214 [19].

The UE shall:
\( 1> \) if the received measConfig includes the measObjectToRemoveList:
\( 2> \) perform the measurement object removal procedure as specified in 5.5.2.4;

ETSI


--- Page 166  ---


3GPP TS 38.331 version 17.0.0 Release 17
165
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if the received measConfig includes the measObjectToAddModList:
\( 2> \) perform the measurement object addition/modification procedure as specified in 5.5.2.5;
\( 1> \) if the received measConfig includes the reportConfigToRemoveList:
\( 2> \) perform the reporting configuration removal procedure as specified in 5.5.2.6;
\( 1> \) if the received measConfig includes the reportConfigToAddModList:
\( 2> \) perform the reporting configuration addition/modification procedure as specified in 5.5.2.7;
\( 1> \) if the received measConfig includes the quantityConfig:
\( 2> \) perform the quantity configuration procedure as specified in 5.5.2.8;
\( 1> \) if the received measConfig includes the measIdToRemoveList:
\( 2> \) perform the measurement identity removal procedure as specified in 5.5.2.2;
\( 1> \) if the received measConfig includes the measIdToAddModList:
\( 2> \) perform the measurement identity addition/modification procedure as specified in 5.5.2.3;
\( 1> \) if the received measConfig includes the measGapConfig:
\( 2> \) perform the measurement gap configuration procedure as specified in 5.5.2.9;
\( 1> \) if the received measConfig includes the measGapSharingConfig:
\( 2> \) perform the measurement gap sharing configuration procedure as specified in 5.5.2.11;
\( 1> \) if the received measConfig includes the \( s \)-MeasureConfig:
\( 2> \) if \( s \)-MeasureConfig is set to \( s s b \)-RSRP, set parameter \( s s b \)-RSRP of \( s \)-MeasureConfig within VarMeasConfig to the lowest value of the RSRP ranges indicated by the received value of \( s \)-MeasureConfig;
\( 2> \) else, set parameter csi-RSRP of s-MeasureConfig within VarMeasConfig to the lowest value of the RSRP ranges indicated by the received value of \( s \)-MeasureConfig.
5.5.2.2 Measurement identity removal

The UE shall:
\( 1> \) for each measId included in the received measIdToRemoveList that is part of the current UE configuration in VarMeasConfig:
\( 2> \) remove the entry with the matching measld from the measIdList within the VarMeasConfig;
\( 2> \) remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
\( 2> \) stop the periodical reporting timer or timer T321 or timer T322, whichever one is running, and reset the associated information (e.g. timeToTrigger) for this measId.

NOTE: The UE does not consider the message as erroneous if the measIdToRemoveList includes any measId value that is not part of the current UE configuration.
5.5.2.3 Measurement identity addition/modification

The network applies the procedure as follows:
- configure a measld only if the corresponding measurement object, the corresponding reporting configuration and the corresponding quantity configuration, are configured.

The UE shall:
\( 1> \) for each measId included in the received measIdToAddModList:

ETSI


--- Page 167  ---


3GPP TS 38.331 version 17.0.0 Release 17
166
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if an entry with the matching measld exists in the measldList within the VarMeasConfig:
\( 3> \) replace the entry with the value received for this measld;
\( 2> \) else:
\( 3> \) add a new entry for this measId within the VarMeasConfig;
\( 2> \) remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
\( 2> \) stop the periodical reporting timer or timer T321 or timer T322, whichever one is running, and reset the associated information (e.g. timeToTrigger) for this measId;

NOTE 1: If the measld associated with reportConfig for conditional reconfiguration is modified, the conditions are considered to be not fulfilled as specified in 5.3.5.13.4.
\( 2> \) if the reportType is set to reportCGI in the reportConfig associated with this measld:
\( 3> \) if the measObject associated with this measld concerns E-UTRA:
\( 4> \) if the useAutonomousGaps is included in the reportConfig associated with this measId:
\( 5> \) start timer T321 with the timer value set to 200 ms for this measld;
\( 4> \) else:
\( 5> \) start timer T321 with the timer value set to 1 second for this measld;
\( 3> \) if the measObject associated with this measld concerns NR:
4 if the measObject associated with this measld concerns FR1:
\( 5> \) if the useAutonomousGaps is included in the reportConfig associated with this measld:
\( 6> \) start timer T321 with the timer value set to 2 seconds for this measld;
\( 5> \) else:
6> start timer T321 with the timer value set to 2 seconds for this measld;
4 if the measObject associated with this measld concerns FR2:
\( 5> \) if the useAutonomousGaps is included in the reportConfig associated with this measld:
\( 6> \) start timer T321 with the timer value set to 5 seconds for this measld;
\( 5> \) else:
\( 6> \) start timer T321 with the timer value set to 16 seconds for this measld.
\( 2> \) if the reportType is set to reportSFTD in the reportConfigNR associated with this measId and the drx-SFTDNeighMeas is included:
\( 3> \) if the measObject associated with this measld concerns FR1:
4 start timer T322 with the timer value set to 3 seconds for this measld;
\( 3> \) if the measObject associated with this measld concerns FR2:
\( 4> \) start timer T322 with the timer value set to 24 seconds for this measld.
5.5.2.4 Measurement object removal

The UE shall:
\( 1> \) for each measObjectld included in the received measObjectToRemoveList that is part of measObjectList in VarMeasConfig:

ETSI


--- Page 168  ---


3GPP TS 38.331 version 17.0.0 Release 17
167
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) remove the entry with the matching measObjectld from the measObjectList within the VarMeasConfig;
\( 2> \) remove all measld associated with this measObjectld from the measldList within the VarMeasConfig, if any;
2 if a measld is removed from the measldList:
\( 3> \) remove the measurement reporting entry for this measld from the VarMeasReportList, if included;
\( 3> \) stop the periodical reporting timer or timer T321 or timer T322, whichever is running, and reset the associated information (e.g. timeToTrigger) for this measId.

NOTE: The UE does not consider the message as erroneous if the measObjectToRemoveList includes any measObjectld value that is not part of the current UE configuration.
5.5.2.5 Measurement object addition/modification

The UE shall:
\( 1> \) for each measObjectld included in the received measObjectToAddModList:
\( 2> \) if an entry with the matching measObjectld exists in the measObjectList within the VarMeasConfig, for this entry:
\( 3> \) reconfigure the entry with the value received for this measObject, except for the fields cellsToAddModList, excludedCellsToAddModList, allowedCellsToAddModList, cellsToRemoveList, excludedCellsToRemoveList, allowedCellsToRemoveList, tx-PoolMeasToRemoveList, txPoolMeasToAddModList, ssb-PositionQCL-CellsToRemoveList, and ssb-PositionQCLCellsToAddModList;
\( 3> \) if the received measObject includes the cellsToRemoveList:
\( 4> \) for each physCellld included in the cellsToRemoveList:
\( 5> \) remove the entry with the matching \( p h y s C e l l l d \) from the cellsToAddModList;
\( 3> \) if the received measObject includes the cellsToAddModList:
4 for each physCellld value included in the cellsToAddModList:
\( 5> \) if an entry with the matching physCellld exists in the cellsToAddModList:
\( 6> \) replace the entry with the value received for this \( p h y s C e l l l d \);
\( 5> \) else:
\( 6> \) add a new entry for the received physCellld to the cellsToAddModList;
\( 3> \) if the received measObject includes the excludedCellsToRemoveList:
\( 4> \) for each pci-Rangelndex included in the excludedCellsToRemoveList:
\( 5> \) remove the entry with the matching pci-Rangelndex from the excludedCellsToAddModList;
NOTE 1: For each pci-RangeIndex included in the excludedCellsToRemoveList that concerns overlapping ranges of cells, a cell is removed from the exclude-list of cells only if all PCI ranges containing it are removed.
\( 3> \) if the received measObject includes the excludedCellsToAddModList:
4 for each pci-Rangelndex included in the excludedCellsToAddModList:
\( 5> \) if an entry with the matching pci-RangeIndex is included in the excludedCellsToAddModList:
\( 6> \) replace the entry with the value received for this pci-RangeIndex;
\( 5> \) else:
\( 6> \) add a new entry for the received pci-Rangelndex to the excludedCellsToAddModList;

ETSI


--- Page 169  ---


3GPP TS 38.331 version 17.0.0 Release 17
168
ETSI TS 138331 V17.0.0 (2022-05)

3> if the received measObject includes the allowedCellsToRemoveList:
4> for each pci-RangeIndex included in the allowedCellsToRemoveList:
\( 5> \) remove the entry with the matching pci-RangeIndex from the allowedCellsToAddModList;
NOTE2: For each pci-RangeIndex included in the allowedCellsToRemoveList that concerns overlapping ranges of cells, a cell is removed from the allow-list of cells only if all PCI ranges containing it are removed.
\( 3> \) if the received measObject includes the allowedCellsToAddModList:
\( 4> \) for each pci-RangeIndex included in the allowedCellsToAddModList:
\( 5> \) if an entry with the matching pci-RangeIndex is included in the allowedCellsToAddModList:
\( 6> \) replace the entry with the value received for this pci-RangeIndex;
5> else:
\( 6> \) add a new entry for the received pci-RangeIndex to the allowedCellsToAddModList
3> for each measId associated with this measObjectld in the measIdList within the VarMeasConfig, if any:
4> remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
4> stop the periodical reporting timer or timer T321 or timer T322, whichever one is running, and reset the associated information (e.g. timeToTrigger) for this measId;
\( 3> \) if the received measObject includes the \( t x \)-PoolMeasToRemoveList:
4> for each transmission resource pool indicated in tx-PoolMeasToRemoveList:
\( 5> \) remove the entry with the matching identity of the transmission resource pool from the \( t x \) PoolMeasToAddModList;

3> if the received measObject includes the \( t x \)-PoolMeasToAddModList:
\( 4> \) for each transmission resource pool indicated in \( t x \)-PoolMeasToAddModList:
\( 5> \) if an entry with the matching identity of the transmission resource pool exists in the \( t x \) -
PoolMeasToAddModList:
6> replace the entry with the value received for this transmission resource pool;
\( 5> \) else:
\( 6> \) add a new entry for the received identity of the transmission resource pool to the \( t x \) PoolMeasToAddModList;

3> if the received measObject includes the ssb-PositionQCL-CellsToRemoveList:
4> for each physCellld included in the ssb-PositionQCL-CellsToRemoveList:
\( 5> \) remove the entry with the matching physCellld from the ssb-PositionQCL-CellsToAddModList;
3> if the received measObject includes the ssb-PositionQCL-CellsToAddModList:
\( 4> \) for each physCellId included in the ssb-PositionQCL-CellsToAddModList:
\( 5> \) if an entry with the matching physCellld exists in the ssb-PositionQCL-CellsToAddModList:
\( 6> \) replace the entry with the value received for this physCellld;
\( 5> \) else:
6> add a new entry for the received physCellId to the ssb-PositionQCL-CellsToAddModList;
\( 2> \) else:

ETSI


--- Page 170  ---


3GPP TS 38.331 version 17.0.0 Release 17
169
ETSI TS 138331 V17.0.0 (2022-05)

3> add a new entry for the received measObject to the measObjectList within VarMeasConfig-
5.5.2.6 Reporting configuration removal

The UE shall:
1> for each reportConfigId included in the received reportConfigToRemoveList that is part of the current UE configuration in VarMeasConfig:
\( 2> \) remove the entry with the matching reportConfigId from the reportConfigList within the VarMeasConfig;
\( 2> \) remove all measId associated with the reportConfigId from the measIdList within the VarMeasConfig, if any;
\( 2> \) if a measld is removed from the measldList:
3> remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
3> stop the periodical reporting timer or timer T321 or timer T322, whichever one is running, and reset the associated information (e.g. timeToTrigger) for this measId.

NOTE: The UE does not consider the message as erroneous if the reportConfigToRemoveList includes any reportConfigld value that is not part of the current UE configuration.
5.5.2.7 Reporting configuration addition/modification

The UE shall:
\( 1> \) for each reportConfigId included in the received reportConfigToAddModList:
\( 2> \) if an entry with the matching reportConfigld exists in the reportConfigList within the VarMeasConfig, for this entry:

3> reconfigure the entry with the value received for this reportConfig;
3> for each measId associated with this reportConfigId included in the measIdList within the VarMeasConfig, if any:

4> remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
4> stop the periodical reporting timer or timer T321 or timer T322, whichever one is running, and reset the associated information (e.g. timeToTrigger) for this measId;
\( 2> \) else:
\( 3> \) add a new entry for the received reportConfig to the reportConfigList within the VarMeasConfig-
5.5.2.8 Quantity configuration

The UE shall:
1> for each RAT for which the received quantityConfig includes parameter(s):
\( 2> \) set the corresponding parameter(s) in quantityConfig within VarMeasConfig to the value of the received quantityConfig parameter(s);

1> for each measId included in the measIdList within VarMeasConfig:
\( 2> \) remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
\( 2> \) stop the periodical reporting timer or timer T321 or timer T322, whichever one is running, and reset the associated information (e.g. timeToTrigger) for this measId.
5.5.2.9 Measurement gap configuration

The UE shall:

ETSI


--- Page 171  ---


3GPP TS 38.331 version 17.0.0 Release 17
170
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if \( g a p F R 1 \) is set to setup:
\( 2> \) if an FR1 measurement gap configuration configured by \( g a p F R I \) is already setup, release the FR1 measurement gap configuration;
\( 2> \) setup the FR1 measurement gap configuration indicated by the gapFRI in accordance with the received gapOffset, i.e., the first subframe of each gap occurs at an SFN and subframe meeting the following condition:

SFN \( \bmod T= \) FLOOR(gapOffset/ 10 );
subframe \( = \) gapOffset \( \bmod 10 \);
with \( T=\mathrm{MGRP} / 10 \) as defined in TS 38.133 [14];
2> apply the specified timing advance \( m g t a \) to the gap occurrences calculated above (i.e the UE starts the measurement mgta ms before the gap subframe occurrences);
\( 2> \) associate the FR1 measurement gap with the measGapld indicated by the GapConfig (if present);
\( 1> \) else if \( g a p F R 1 \) is set to release:
\( 2> \) release the FR1 measurement gap configuration configured by gapFR1;
\( 1> \) if \( g a p F R 2 \) is set to setup:
\( 2> \) if an FR2 measurement gap configuration configured by \( g a p F R 2 \) is already setup, release the FR2 measurement gap configuration;
\( 2> \) setup the FR2 measurement gap configuration indicated by the gapFR2 in accordance with the received gapOffset, i.e, the first subframe of each gap occurs at an SFN and subframe meeting the following condition:

SFN \( \bmod T= \) FLOOR(gapOffset/10);
subframe \( = \) gapOffset \( \bmod 10 \);
with \( T= \) MGRP/10 as defined in TS 38.133 [14];
\( 2> \) apply the specified timing advance mgta to the gap occurrences calculated above (i.e the UE starts the measurement \( m g t a \mathrm{~ms} \) before the gap subframe occurrences);
\( 2> \) associate the FR2 measurement gap with the measGapld indicated by the GapConfig (if present);
\( 1> \) else if \( g a p F R 2 \) is set to release:
\( 2> \) release the FR2 measurement gap configuration configured by gapFR2;
\( 1> \) if gapUE is set to setup:
\( 2> \) if a per UE measurement gap configuration configured by \( g a p U E \) is already setup, release the per UE measurement gap configuration;
\( 2> \) setup the per UE measurement gap configuration indicated by the gapUE in accordance with the received gapOffset, i.e., the first subframe of each gap occurs at an SFN and subframe meeting the following condition:

SFN \( \bmod T= \) FLOOR(gapOffset/ 10 );
subframe \( = \) gapOffset \( \bmod 10 \);
with \( T=\mathrm{MGRP} / 10 \) as defined in TS 38.133 [14];
2> apply the specified timing advance \( m g t a \) to the gap occurrences calculated above (i.e the UE starts the measurement \( m g t a \mathrm{~ms} \) before the gap subframe occurrences);
\( 2> \) associate the per UE measurement gap with the measGapld indicated by the GapConfig (if present);

ETSI


--- Page 172  ---


3GPP TS 38.331 version 17.0.0 Release 17
171
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) else if gap \( U E \) is set to release:
\( 2> \) release the per UE measurement gap configuration configured by gapUE.
\( 1> \) for each measGapld included in the received gapFR1ToReleaseList:
\( 2> \) release the FR1 measurement gap configuration associated with the measGapld;
\( 1> \) for each measGapld included in the received gapFR2ToReleaseList:
\( 2> \) release the FR2 measurement gap configuration associated with the measGapld;
\( 1> \) for each measGapId included in the received gapUEToReleaseList:
\( 2> \) release the per UE measurement gap configuration associated with the measGapld;
\( 1> \) for each GapConfig received in gapFR1ToAddModList:
\( 2> \) if an FR1 measurement gap configuration associated with the measGapld indicated by the GapConfig is already setup, release the FR1 measurement gap configuration;
\( 2> \) setup an FR1 measurement gap configuration indicated by the GapConfig in accordance with the received gapOffset, i.e., the first subframe of each gap occurs at an SFN and subframe meeting the following condition:

SFN \( \bmod T= \) FLOOR(gapOffset/10);
subframe \( = \) gapOffset \( \bmod 10 \);
with \( T=\mathrm{MGRP} / 10 \) as defined in TS 38.133 [14];
\( 2> \) apply the specified timing advance \( m g t a \) to the gap occurrences calculated above (i.e the UE starts the measurement \( m g t a \mathrm{~ms} \) before the gap subframe occurrences);
\( 2> \) associate the FR1 measurement gap with the measGapld indicated by the GapConfig;
\( 2> \) if gapSharing in the GapConfig is present:
\( 3> \) setup the gap sharing configuration for the FR1 measurement gap in accordance with the received gapSharing as defined in TS 38.133 [14];
\( 2> \) else:
\( 3> \) release the gap sharing configuration (if configured) for the FR1 measurement gap;
\( 1> \) for each GapConfig received in gapFR2ToAddModList:
\( 2> \) if an FR2 measurement gap configuration associated with the measGapld indicated by the GapConfig is already setup, release the FR2 measurement gap configuration;
\( 2> \) setup an FR2 measurement gap configuration indicated by the GapConfig in accordance with the received gapOffset, i.e., the first subframe of each gap occurs at an SFN and subframe meeting the following condition:

SFN \( \bmod T= \) FLOOR(gapOffset/10);
subframe \( = \) gapOffset \( \bmod 10 \);
with \( T=\mathrm{MGRP} / 10 \) as defined in TS 38.133 [14];
2> apply the specified timing advance \( m g t a \) to the gap occurrences calculated above (i.e the UE starts the measurement \( m g t a \mathrm{~ms} \) before the gap subframe occurrences);
\( 2> \) associate the FR2 measurement gap with the measGapld indicated by the GapConfig;
\( 2> \) if gapSharing in the GapConfig is present:

ETSI


--- Page 173  ---


3GPP TS 38.331 version 17.0.0 Release 17
172
ETSI TS 138331 V17.0.0 (2022-05)

3> setup the gap sharing configuration for the FR2 measurement gap in accordance with the received gapSharing as defined in TS 38.133 [14];
\( 2> \) else:
\( 3> \) release the gap sharing configuration (if configured) for the FR2 measurement gap;
1> for each GapConfig received in gapUEToAddModList:
\( 2> \) if a per UE measurement gap configuration associated with the measGapld indicated by the GapConfig is already setup, release the per UE measurement gap configuration;
\( 2> \) setup a per UE measurement gap configuration indicated by the GapConfig in accordance with the received gapOffset, i.e., the first subframe of each gap occurs at an SFN and subframe meeting the following condition:
\( \mathrm{SFN} \bmod T=\mathrm{FLOOR}( \) gapOffset/10);
subframe \( = \) gapOffset \( \bmod 10 \);
with \( T= \) MGRP/10 as defined in TS 38.133 [14];
\( 2> \) apply the specified timing advance \( m g t a \) to the gap occurrences calculated above (i.e. the UE starts the
measurement \( m g t a \mathrm{~ms} \) before the gap subframe occurrences);
\( 2> \) associate the per UE measurement gap with the measGapld indicated by the GapConfig;
\( 2> \) if gapSharing in the GapConfig is present:
\( 3> \) setup the gap sharing configuration for the per UE measurement gap in accordance with the received gapSharing as defined in TS 38.133 [14];
\( 2> \) else:
\( 3> \) release the gap sharing configuration (if configured) for the per UE measurement gap;
1> for each FR1, FR2, and per UE measurement gap that is setup:
\( 2> \) if preConfigInd-r17 in the corresponding GapConfig is present:
3> determine whether the measurement gap is activated or not according to TS 38.133 [14];
\( 2> \) else:
\( 3> \) consider the measurement gap to be activated;
NOTE 1: For FR2 gap configuration with synchronous CA, for the UE in NE-DC or NR-DC, the SFN and subframe of the serving cell indicated by the refServCellIndicator is used in the gap calculation. Otherwise, the SFN and subframe of a serving cell on FR2 frequency is used in the gap calculation

NOTE 2: For FR1 gap or per UE gap configuration, for the UE in NE-DC or NR-DC, the SFN and subframe of the serving cell indicated by the refServCellindicator in is used in the gap calculation. Otherwise, the SFN and subframe of the PCell is used in the gap calculation.

NOTE 3: For FR2 gap configuration with asynchronous CA, for the UE in NE-DC or NR-DC, the SFN and subframe of the serving cell indicated by the refServCellIndicator and refFR2ServCellAsyncCA is used in the gap calculation. Otherwise, the SFN and subframe of a serving cell on FR2 frequency indicated by the refFR2ServCellAsyncCA is used in the gap calculation
5.5.2.10 Reference signal measurement timing configuration

The UE shall setup the first SS/PBCH block measurement timing configuration (SMTC) in accordance with the received periodicityAndOffset parameter (providing Periodicity and Offset value for the following condition) in the smtcl configuration. The first subframe of each SMTC occasion occurs at an SFN and subframe of the NR SpCell meeting the following condition:

ETSI


--- Page 174  ---


3GPP TS 38.331 version 17.0.0 Release 17
173
ETSI TS 138331 V17.0.0 (2022-05)
```
SFN \( \bmod T=( \) FLOOR (Offset/10));
if the Periodicity is larger than \( s f 5 \) :
    subframe \( = \) Offset \( \bmod 10 \);
else:
    subframe \( = \) Offset or \( ( \) Offset +5\( ) \);
with \( T=\operatorname{CEIL}( \) Periodicity/10).
```


If \( \operatorname{smtc} 2 \) is present, for cells indicated in the pci-List parameter in smtc2 in the same MeasObjectNR, the UE shall setup an additional SS/PBCH block measurement timing configuration (SMTC) in accordance with the received periodicity parameter in the smtc 2 configuration and use the Offset (derived from parameter periodicityAndOffset) and duration parameter from the smtcl configuration. The first subframe of each SMTC occasion occurs at an SFN and subframe of the NR SpCell meeting the above condition.

If \( s m t c 2-L P \) is present, for cells indicated in the pci-List parameter in \( s m t c 2-L P \) in the same frequency (for intra frequency cell reselection) or different frequency (for inter frequency cell reselection), the UE shall setup an additional SS/PBCH block measurement timing configuration (SMTC) in accordance with the received periodicity parameter in the smtc2-LP configuration and use the Offset (derived from parameter periodicityAndOffset) and duration parameter from the smtc configuration for that frequency. The first subframe of each SMTC occasion occurs at an SFN and subframe of the NR SpCell or serving cell (for cell reselection) meeting the above condition.

If smtc3list is present, for cells indicated in the pci-List parameter in each SSB-MTC3 element of the list in the same MeasObjectNR, the IAB-MT shall setup an additional SS block measurement timing configuration in accordance with the received periodicityAndOffset parameter (using same condition as smtcl to identify the SFN and the subframe for SMTC occasion) in each SSB-MTC3 configuration and use the duration and ssb-ToMeasure parameters from each SSB-MTC3 configuration.

On the indicated ssbFrequency, the UE shall not consider SS/PBCH block transmission in subframes outside the SMTC occasion for RRM measurements based on SS/PBCH blocks and for RRM measurements based on CSI-RS except for SFTD measurement (see TS 38.133 [14], clause 9.3.8).
5.5.2.10a RSSI measurement timing configuration

The UE shall setup the RSSI measurement timing configuration (RMTC) in accordance with the received rmtcPeriodicity and, if configured, with rmtc-SubframeOffset i.e. the first symbol of each RMTC occasion occurs at first symbol of an SFN and subframe of the NR SpCell meeting the following condition:
```
\( \mathrm{SFN} \bmod T=\mathrm{FLOOR}( \) mtc-SubframeOffset/10);
subframe \( = \) rmtc-SubframeOffset \( \bmod 10 \);
with \( T= \) rmtc-Periodicity/ 10 ;
```


On the frequency configured by rmtc-Frequency, the UE shall not consider RSSI measurements outside the configured RMTC occasion which lasts for measDurationSymbols for RSSI and channel occupancy measurements.

The UE derives the RSSI measurement duration from a combination of measDurationSymbols and ref-SCS-CP. At least for RSSI measurement confined within the active DL BWP, the UE performs RSSI measurement using the numerology of the active DL BWP during the derived measurement duration. Otherwise, the numerology used by the UE for measurements is up to UE implementation. If configured, the UE performs RSSI measurements on a bandwidth in accordance with the received \( r m t c \)-Bandwidth.
5.5.2.11 Measurement gap sharing configuration

The UE shall:
\( 1> \) if gapSharingFRI is set to setup:
\( 2> \) if an FR1 measurement gap sharing configuration configured by gapSharingFRI is already setup:
\( 3> \) release the FR1 measurement gap sharing configuration configured by gapSharingFRI;

ETSI


--- Page 175  ---


3GPP TS 38.331 version 17.0.0 Release 17
174
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) setup the FR1 measurement gap sharing configuration indicated by the measGapSharingConfig in accordance with the received gapSharingFRI as defined in TS 38.133 [14];
\( 1> \) else if gapSharingFRI is set to release:
\( 2> \) release the FR1 measurement gap sharing configuration configured by gapSharingFRI;
\( 1> \) if gapSharingFR2 is set to setup:
\( 2> \) if an FR2 measurement gap sharing configuration configured by gapSharingFR2 is already setup:
\( 3> \) release the FR2 measurement gap sharing configuration configured by gapSharingFR2;
\( 2> \) setup the FR2 measurement gap sharing configuration indicated by the measGapSharingConfig in accordance with the received gapSharingFR2 as defined in TS 38.133 [14];
\( 1> \) else if gapSharingFR2 is set to release:
\( 2> \) release the FR2 measurement gap sharing configuration configured by gapSharingFR2.
\( 1> \) if gapSharing \( U E \) is set to setup:
2 if a per UE measurement gap sharing configuration configured by gapSharingUE is already setup:
3> release the per UE measurement gap sharing configuration configured by gapSharingUE;
2> setup the per UE measurement gap sharing configuration indicated by the measGapSharingConfig in accordance with the received gapSharing UE as defined in TS 38.133 [14];
\( 1> \) else if gapSharingUE is set to release:
\( 2> \) release the per UE measurement gap sharing configuration configured by gapSharingUE.
5.5.3 Performing measurements
5.5.3.1 General

An RRC_CONNECTED UE shall derive cell measurement results by measuring one or multiple beams associated per cell as configured by the network, as described in 5.5.3.3. For all cell measurement results, except for RSSI, and CLI measurement results in RRC_CONNECTED, the UE applies the layer 3 filtering as specified in 5.5.3.2, before using the measured results for evaluation of reporting criteria, measurement reporting or the criteria to trigger conditional reconfiguration execution. For cell measurements, the network can configure RSRP, RSRQ, SINR, RSCP or EcN0 as trigger quantity. For CLI measurements, the network can configure SRS-RSRP or CLI-RSSI as trigger quantity. For cell and beam measurements, reporting quantities can be any combination of quantities (i.e. only RSRP; only RSRQ; only SINR; RSRP and RSRQ; RSRP and SINR; RSRQ and SINR; RSRP, RSRQ and SINR; only RSCP; only EcNO; RSCP and EcN0), irrespective of the trigger quantity, and for CLI measurements, reporting quantities can be either SRS-RSRP or CLI-RSSI. For conditional reconfiguration execution, the network can configure up to 2 quantities, both using same RS type. The UE does not apply the layer 3 filtering as specified in 5.5.3.2 to derive the CBR measurements. The UE does not apply the layer 3 filtering as specified in 5.5.3.2 to derive the Rx-Tx time difference measurements.

The network may also configure the UE to report measurement information per beam (which can either be measurement results per beam with respective beam identifier(s) or only beam identifier(s)), derived as described in 5.5.3.3a. If beam measurement information is configured to be included in measurement reports, the UE applies the layer 3 beam filtering as specified in 5.5.3.2. On the other hand, the exact L1 filtering of beam measurements used to derive cell measurement results is implementation dependent.

The UE shall:
1> whenever the UE has a measConfig, perform RSRP and RSRQ measurements for each serving cell for which servingCellMO is configured as follows:
\( 2> \) if the reportConfig associated with at least one measId included in the measIdList within VarMeasConfig contains an rsType set to ssb and ssb-ConfigMobility is configured in the measObject indicated by the servingCellMO:

ETSI


--- Page 176  ---


3GPP TS 38.331 version 17.0.0 Release 17
175
ETSI TS 138331 V17.0.0 (2022-05)

3> if the reportConfig associated with at least one measId included in the measIdList within VarMeasConfig contains a reportQuantityRS-Indexes and maxNrofRS-IndexesToReport and contains an rsType set to ssb:

4> derive layer 3 filtered RSRP and RSRQ per beam for the serving cell based on SS/PBCH block, as described in 5.5.3.3a;
\( 3> \) derive serving cell measurement results based on SS/PBCH block, as described in 5.5.3.3;
\( 2> \) if the reportConfig associated with at least one measId included in the measIdList within VarMeasConfig contains an rsType set to csi-rs and CSI-RS-ResourceConfigMobility is configured in the measObject indicated by the servingCellMO:

3> if the reportConfig associated with at least one measId included in the measIdList within VarMeasConfig contains a reportQuantityRS-Indexes and maxNrofRS-IndexesToReport and contains an rsType set to csi\( r s \) :

4> derive layer 3 filtered RSRP and RSRQ per beam for the serving cell based on CSI-RS, as described in 5.5.3.3a;
\( 3> \) derive serving cell measurement results based on CSI-RS, as described in 5.5.3.3;
\( 1> \) for each serving cell for which servingCellMO is configured, if the reportConfig associated with at least one measId included in the measIdList within VarMeasConfig contains SINR as trigger quantity and/or reporting quantity:
\( 2> \) if the reportConfig contains rsType set to ssb and ssb-ConfigMobility is configured in the servingCellMO:
3> if the reportConfigcontains a reportQuantityRS-Indexes and maxNrofRS-IndexesToReport:
\( 4> \) derive layer 3 filtered SINR per beam for the serving cell based on SS/PBCH block, as described in 5.5.3.3a;
\( 3> \) derive serving cell SINR based on SS/PBCH block, as described in 5.5.3.3;
\( 2> \) if the reportConfig contains rsType set to csi-rs and CSI-RS-ResourceConfigMobility is configured in the servingCellMO:

3> if the reportConfigcontains a reportQuantityRS-Indexes and maxNrofRS-IndexesToReport:
4> derive layer 3 filtered SINR per beam for the serving cell based on CSI-RS, as described in 5.5.3.3a;
\( 3> \) derive serving cell SINR based on CSI-RS, as described in 5.5.3.3;
1> for each measld included in the measIdList within VarMeasConfig:
\( 2> \) if the reportType for the associated reportConfig is set to reportCGI and timer T321 is running:
3> if useAutonomousGaps is configured for the associated reportConfig:
4> perform the corresponding measurements on the frequency and RAT indicated in the associated measObject using autonomous gaps as necessary;
\( 3> \) else:
4> perform the corresponding measurements on the frequency and RAT indicated in the associated measObject using available idle periods;
\( 3> \) if the cell indicated by reportCGI field for the associated measObject is an NR cell and that indicated cell is broadcasting SIBI (see TS 38.213 [13], clause 13):
\( 4> \) try to acquire SIBI in the concerned cell;
3> if the cell indicated by reportCGI field is an E-UTRA cell:
4> try to acquire SystemInformationBlockTypel in the concerned cell;
\( 2> \) if the \( u \)-DelayValueConfig is configured for the associated reportConfig:

ETSI


--- Page 177  ---


3GPP TS 38.331 version 17.0.0 Release 17
176
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) ignore the measObject;
\( 3> \) for each of the configured DRBs, configure the PDCP layer to perform corresponding average UL PDCP packet delay measurement per DRB;
\( 2> \) if the \( u \) /-Excess DelayConfig is configured for the associated reportConfig:
\( 3> \) ignore the measObject;
\( 3> \) for each of the configured DRBs, configure the PDCP layer to perform corresponding UL PDCP Excess Packet Delay delay measurement according to the configured threshold per DRB;
\( 2> \) if the reportType for the associated reportConfig is periodical, eventTriggered or condTriggerConfig:
\( 3> \) if a measurement gap configuration is setup, or
\( 3> \) if the UE does not require measurement gaps to perform the concerned measurements:
\( 4> \) if \( s \)-MeasureConfig is not configured, or
4 if \( s \)-MeasureConfig is set to \( s s b-R S R P \) and the NR SpCell RSRP based on SS/PBCH block, after layer 3 filtering, is lower than \( s s b-R S R P \), or

4 if \( s \)-MeasureConfig is set to csi-RSRP and the NR SpCell RSRP based on CSI-RS, after layer 3 filtering, is lower than csi-RSRP:
\( 5> \) if the measObject is associated to NR and the rsType is set to csi-rs:
\( 6> \) if reportQuantityRS-Indexes and maxNrofRS-IndexesToReport for the associated reportConfig are configured:
\( 7> \) derive layer 3 filtered beam measurements only based on CSI-RS for each measurement quantity indicated in reportQuantityRS-Indexes, as described in 5.5.3.3a;
\( 6> \) derive cell measurement results based on CSI-RS for the trigger quantity and each
measurement quantity indicated in reportQuantityCell using parameters from the associated measObject, as described in 5.5.3.3;
\( 5> \) if the measObject is associated to NR and the rsType is set to \( s s b \) :
\( 6> \) if reportQuantityRS-Indexes and maxNrofRS-IndexesToReport for the associated reportConfig are configured:
\( 7> \) derive layer 3 beam measurements only based on SS/PBCH block for each measurement quantity indicated in reportQuantityRS-Indexes, as described in 5.5.3.3a;
\( 6> \) derive cell measurement results based on SS/PBCH block for the trigger quantity and each measurement quantity indicated in reportQuantityCell using parameters from the associated measObject, as described in 5.5.3.3;
\( 5> \) if the measObject is associated to E-UTRA:
\( 6> \) perform the corresponding measurements associated to neighbouring cells on the frequencies indicated in the concerned measObject, as described in 5.5.3.2;
\( 5> \) if the measObject is associated to UTRA-FDD:
\( 6> \) perform the corresponding measurements associated to neighbouring cells on the frequencies indicated in the concerned measObject, as described in 5.5.3.2;
\( 5> \) if the measObject is associated to L2 U2N Relay UE:
\( 6> \) perform the corresponding measurements associated to candidate Relay UEs on the frequencies indicated in the concerned measObject, as described in 5.5.3.4;

4 if the measRSSI-ReportConfig is configured in the associated reportConfig:

ETSI


--- Page 178  ---


3GPP TS 38.331 version 17.0.0 Release 17
177
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) perform the RSSI and channel occupancy measurements on the frequency indicated in the associated measObject;
\( 2> \) if the reportType for the associated reportConfig is set to reportSFTD and the numberOfReportsSent as defined within the VarMeasReportList for this measld is less than one:
\( 3> \) if the reportSFTD-Meas is set to true:
4 if the measObject is associated to E-UTRA:
\( 5> \) perform SFTD measurements between the PCell and the E-UTRA PSCell;
\( 5> \) if the reportRSRP is set to true;
\( 6> \) perform RSRP measurements for the E-UTRA PSCell;
\( 4> \) else if the measObject is associated to NR:
\( 5> \) perform SFTD measurements between the PCell and the NR PSCell;
\( 5> \) if the reportRSRP is set to true;
\( 6> \) perform RSRP measurements for the NR PSCell based on SSB;
\( 3> \) else if the reportSFTD-NeighMeas is included:
\( 4> \) if the measObject is associated to NR:
\( 5> \) if the \( d r x \)-SFTD-NeighMeas is included:
\( 6> \) perform SFTD measurements between the PCell and the NR neighbouring cell(s) detected based on parameters in the associated measObject using available idle periods;
\( 5> \) else:
\( 6> \) perform SFTD measurements between the PCell and the NR neighbouring cell(s) detected based on parameters in the associated measObject;
\( 5> \) if the reportRSRP is set to true:
\( 6> \) perform RSRP measurements based on SSB for the NR neighbouring cell(s) detected based on parameters in the associated measObject;
\( 2> \) if the reportType for the associated reportConfig is cli-Periodical or cli-EventTriggered:
\( 3> \) perform the corresponding measurements associated to CL[ measurement resources indicated in the concerned measObjectCLF;
\( 2> \) perform the evaluation of reporting criteria as specified in 5.5.4, except if reportConfig is condTriggerConfig-

NOTE 1: The evaluation of conditional reconfiguration execution criteria is specified in 5.3 .5 .13 .
The UE capable of Rx-Tx time difference measurement when configured with measObjectRxTxDiff shall:
1> perform the corresponding Rx -Tx time difference measurements associated with downlink reference signals indicated in the concerned measObjectRxTxDiff-

The UE capable of CBR measurement when configured to transmit NR sidelink communication shall:
\( 1> \) If the frequency used for NR sidelink communication is included in sl-FreqInfoToAddModList in slConfig DedicatedNR within RRCReconfiguration message or included in sl-ConfigCommonNR within SIB12:
\( 2> \) if the UE is in RRC_IDLE or in RRC_INACTIVE:
\( 3> \) if the cell chosen for NR sidelink communication provides SIB12 which includes \( s \) TxPoolSelectedNormal or sl-TxPoolExceptional for the concerned frequency:

ETSI


--- Page 179  ---


3GPP TS 38.331 version 17.0.0 Release 17
178
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) perform CBR measurement on pools in \( s l \)-TxPoolSelectedNormal and \( s l \)-TxPoolExceptional for the concerned frequency in SIB12;
\( 2> \) if the UE is in RRC_CONNECTED:
\( 3> \) if \( t x \)-PoolMeasToAddModList is included in VarMeasConfig:
\( 4> \) perform CBR measurements on each transmission resource pool indicated in the \( t x \) PoolMeasToAddModList;
\( 3> \) if \( s \)-TxPoolSelectedNormal, sl-TxPoolScheduling or sl-TxPoolExceptional is included in slConfigDedicatedNR for the concerned frequency within RRCReconfiguration:
\( 4> \) perform CBR measurement on pool(s) in sl-TxPoolSelectedNormal, sl-TxPoolScheduling or slTxPoolExceptional if included in sl-ConfigDedicatedNR for the concerned frequency within RRCReconfiguration;
\( 3> \) else if the cell chosen for NR sidelink communication provides SIB12 which includes \( s \) TxPoolSelectedNormal or sl-TxPoolExceptional for the concerned frequency:
\( 4> \) perform CBR measurement on pool(s) in \( s / \)-TxPoolSelectedNormal and \( s / \)-TxPoolExceptional for the concerned frequency in SIB12;

1> else:
\( 2> \) perform CBR measurement on pool(s) in sl-TxPoolSelectedNormal and sl-TxPoolExceptional in SidelinkPreconfigNR for the concerned frequency.

NOTE 2: In case the configurations for NR sidelink communication and CBR measurement are acquired via the EUTRA, configurations for NR sidelink communication in SIB12, sl-ConfigDedicatedNR within RRCReconfiguration used in this clause are provided by the configurations in SystemInformationBlockType28, sl-ConfigDedicatedForNR within RRCConnectionReconfiguration as specified in TS 36.331 [10], respectively.

NOTE 3: If a UE that is configured by upper layers to transmit V2X sidelink communication is configured by NR with transmission resource pool(s) and the measurement objects concerning V2X sidelink communication (i.e. by sl-ConfigDedicatedEUTRA-Info), it shall perform CBR measurement as specified in clause 5.5 .3 of TS 36.331 [10], based on the transmission resource pool(s) and the measurement object(s) concerning V2X sidelink communication configured by NR.

NOTE 4: For V2X sidelink communication, each of the CBR measurement results is associated with a resource pool, as indicated by the poolReportld (see TS 36.331 [10]), that refers to a pool as included in sl-ConfigDedicatedEUTRA-Info or SIB13.

Editors Note: FFS to specify that the UE ignores measId(s) that were not indicated in the condExecutionCond/triggerCondition.
5.5.3.2 Layer 3 filtering

The UE shall:
\( 1> \) for each cell measurement quantity, each beam measurement quantity, each sidelink measurement quantity as needed in clause 5.8.10, for each CLI measurement quantity that the UE performs measurements according to 5.5.3.1, and for each candidate L2 U2N Relay UE measurement quantity according to 5.5.3.4:
\( 2> \) filter the measured result, before using for evaluation of reporting criteria or for measurement reporting, by the following formula:
\[
F_{\mathrm{n}}=(1-a)^{*} F_{\mathrm{n}-1}+a^{*} M_{\mathrm{n}}
\]
where
\( M_{n} \) is the latest received measurement result from the physical layer;

ETSI


--- Page 180  ---


3GPP TS 38.331 version 17.0.0 Release 17
179
ETSI TS 138331 V17.0.0 (2022-05)

\( F_{n} \) is the updated filtered measurement result, that is used for evaluation of reporting criteria or for measurement reporting;
\( F_{n-1} \) is the old filtered measurement result, where \( F_{\theta} \) is set to \( M_{1} \) when the first measurement result from the physical layer is received; and for MeasObjectNR, \( a=1 / 2^{(k i / 4)} \), where \( k_{i} \) is the filterCoefficient for the corresponding measurement quantity of the \( i \) : th QuantityConfigNR in quantityConfigNR-List, and \( i \) is indicated by quantityConfigIndex in MeasObjectNR; for other measurements, \( \boldsymbol{a}=1 / 2^{(k / 4)} \), where \( \boldsymbol{k} \) is the filterCoefficient for the corresponding measurement quantity received by the quantityConfig; for UTRA-FDD, \( \mathrm{a}=1 / 2^{(\mathrm{k} / 4)} \), where k is the filterCoefficient for the corresponding measurement quantity received by quantityConfigUTRA-FDD in the QuantityConfig;
\( 2> \) adapt the filter such that the time characteristics of the filter are preserved at different input rates, observing that the filterCoefficient \( k \) assumes a sample rate equal to \( \mathrm{X} m s \); The value of X is equivalent to one intrafrequency L1 measurement period as defined in TS 38.133 [14] assuming non-DRX operation, and depends on frequency range.

NOTE 1: If \( \boldsymbol{k} \) is set to 0 , no layer 3 filtering is applicable.
NOTE 2: The filtering is performed in the same domain as used for evaluation of reporting criteria or for measurement reporting, i.e., logarithmic filtering for logarithmic measurements.

NOTE 3: The filter input rate is implementation dependent, to fulfil the performance requirements set in TS 38.133 [14]. For further details about the physical layer measurements, see TS 38.133 [14].

NOTE 4: For CLI-RSSI measurement, it is up to UE implementation whether to reset filtering upon BWP switch.
5.5.3.3 Derivation of cell measurement results

The network may configure the UE in RRC_CONNECTED to derive RSRP, RSRQ and SINR measurement results per cell associated to NR measurement objects based on parameters configured in the measObject (e.g. maximum number of beams to be averaged and beam consolidation thresholds) and in the reportConfig (rsType to be measured, SS/PBCH block or CSI-RS).

The network may configure the UE in RRC_IDLE or in RRC_INACTIVE to derive RSRP and RSRQ measurement results per cell associated to NR carriers based on parameters configured in measldleCarrierListNR within VarMeasIdleConfig for measurements performed according to 5.7.8.2a

The UE shall:
1> for each cell measurement quantity to be derived based on SS/PBCH block:
\( 2> \) if nrofSS-BlocksToAverage is not configured in the associated measObject in RRC_CONNECTED or in the associated entry in measIdleCarrierListNR within VarMeasIdleConfig in RRC_IDLE/RRC_INACTIVE; or
\( 2> \) if absThreshSS-BlocksConsolidation is not configured in the associated measObject in RRC_CONNECTED or in the associated entry in measIdleCarrierListNR within VarMeasIdleConfig in RRC_IDLE/RRC_INACTIVE; or
\( 2> \) if the highest beam measurement quantity value is below or equal to absThreshSS-BlocksConsolidation:
\( 3> \) derive each cell measurement quantity based on SS/PBCH block as the highest beam measurement quantity value, where each beam measurement quantity is described in TS 38.215 [9];
\( 2> \) else:
3> derive each cell measurement quantity based on SS/PBCH block as the linear power scale average of the highest beam measurement quantity values above absThreshSS-BlocksConsolidation where the total number of averaged beams shall not exceed nrofSS-BlocksToAverage, and where each beam measurement quantity is described in TS 38.215 [9];
\( 2> \) if in RRC_CONNECTED, apply layer 3 cell filtering as described in 5.5.3.2;
1> for each cell measurement quantity to be derived based on CSI-RS:

ETSI


--- Page 181  ---


3GPP TS 38.331 version 17.0.0 Release 17
180
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) consider a CSI-RS resource to be applicable for deriving cell measurements when the concerned CSI-RS resource is included in the csi-rs-CellMobility including the physCellld of the cell in theCSI-RSResourceConfigMobility in the associated measObject;
\( 2> \) if nrofCSI-RS-ResourcesToAverage in the associated measObject is not configured; or
\( 2> \) if absThreshCSI-RS-Consolidation in the associated measObject is not configured; or
\( 2> \) if the highest beam measurement quantity value is below or equal to absThreshCSI-RS-Consolidation:
3> derive each cell measurement quantity based on applicable CSI-RS resources for the cell as the highest beam measurement quantity value, where each beam measurement quantity is described in TS 38.215 [9];
\( 2> \) else:
\( 3> \) derive each cell measurement quantity based on CSI-RS as the linear power scale average of the highest beam measurement quantity values above absThreshCSI-RS-Consolidation where the total number of averaged beams shall not exceed nrofCSI-RS-ResourcesToAverage;
\( 2> \) apply layer 3 cell filtering as described in 5.5.3.2.
5.5.3.3a Derivation of layer 3 beam filtered measurement

The UE shall:
\( 1> \) for each layer 3 beam filtered measurement quantity to be derived based on SS/PBCH block;
\( 2> \) derive each configured beam measurement quantity based on SS/PBCH block as described in TS 38.215[9], and apply layer 3 beam filtering as described in 5.5.3.2;
\( 1> \) for each layer 3 beam filtered measurement quantity to be derived based on CSI-RS;
\( 2> \) derive each configured beam measurement quantity based on CSI-RS as described in TS 38.215 [9], and apply layer 3 beam filtering as described in 5.5.3.2.
5.5.3.4 Derivation of L2 U2N Relay UE measurement results

A UE may be configured by network to derive NR sidelink measurement results of serving L2 Relay UE or candidate L2 U2N Relay UEs associated to the measurement objects configured in the measObjectRelay.

The UE shall:
1> for each L2 U2N Relay UE measurement quantity to be derived:
\( 2> \) derive the corresponding measurement quantity based on DMRS as described in TS 38.215 [9] of the L2 U2N Relay UE associated to the NR sidelink frequency indicated in the concerned measObjectRelay;
\( 2> \) apply layer 3 filtering as described in 5.5.3.2;
5.5.4 Measurement report triggering
5.5.4.1 General

If AS security has been activated successfully, the UE shall:
1> for each measId included in the measIdList within VarMeasConfig:
\( 2> \) if the corresponding reportConfig includes a reportType set to eventTriggered or periodical:
\( 3> \) if the corresponding measObject concerns NR:
4> if the corresponding reportConfig includes measRSSI-ReportConfig:
\( 5> \) consider the resource indicated by the rmtc-Config on the associated frequency to be applicable;

ETSI


--- Page 182  ---


3GPP TS 38.331 version 17.0.0 Release 17
181
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) if the eventA1 or eventA2 is configured in the corresponding reportConfig:
\( 5> \) consider only the serving cell to be applicable;
\( 4> \) if the eventA3 or eventA5 is configured in the corresponding reportConfig:
\( 5> \) if a serving cell is associated with a measObjectNR and neighbours are associated with another measObjectNR, consider any serving cell associated with the other measObjectNR to be a neighbouring cell as well;

4> if corresponding reportConfig includes reportType set to periodical; or
4> for measurement events other than eventAl or eventA2:
\( 5> \) if useAllowedCellList is set to true:
\( 6> \) consider any neighbouring cell detected based on parameters in the associated measObjectNR to be applicable when the concerned cell is included in the allowedCellsToAddModList defined within the VarMeasConfig for this measId;

5> else:
\( 6> \) consider any neighbouring cell detected based on parameters in the associated measObjectNR to be applicable when the concerned cell is not included in the excludedCellsToAddModList defined within the VarMeasConfig for this measId;
\( 3> \) else if the corresponding measObject concerns E-UTRA:
\( 4> \) if eventB1 or eventB2 is configured in the corresponding reportConfig:
\( 5> \) consider a serving cell, if any, on the associated E-UTRA frequency as neighbour cell;
\( 4> \) consider any neighbouring cell detected on the associated frequency to be applicable when the concerned cell is not included in the excludedCellsToAddModListEUTRAN defined within the VarMeasConfig for this measId;
\( 3> \) else if the corresponding measObject concerns UTRA-FDD:
4> if eventB1-UTRA-FDD or eventB2-UTRA-FDD is configured in the corresponding reportConfig; or
4> if corresponding reportConfig includes reportType set to periodical:
\( 5> \) consider a neighbouring cell on the associated frequency to be applicable when the concerned cell is included in the cellsToAddModList defined within the VarMeasConfig for this measId;

3> else if the corresponding measObject concerns L2 U2N Relay UE:
\( 4> \) if eventY1-Relay is configured in the corresponding reportConfig; or
4> if corresponding reportConfig includes reportType set to periodical:
\( 5> \) consider any L2 U2N Relay UE detected on the associated frequency to be applicable for this measld;
\( 2> \) else if the corresponding reportConfig includes a reportType set to reportCGI:
3> consider the cell detected on the associated measObject which has a physical cell identity matching the value of the cellForWhichToReportCGI included in the corresponding reportConfig within the VarMeasConfig to be applicable;
\( 2> \) else if the corresponding reportConfig includes a reportType set to reportSFTD:
\( 3> \) if the corresponding measObject concerns NR:
4> if the reportSFTD-Meas is set to true:
\( 5> \) consider the NR PSCell to be applicable;

ETSI


--- Page 183  ---


3GPP TS 38.331 version 17.0.0 Release 17
182
ETSI TS 138331 V17.0.0 (2022-05)

4> else if the reportSFTD-NeighMeas is included:
\( 5> \) if cellsFor WhichToReportSFTD is configured in the corresponding reportConfig:
\( 6> \) consider any NR neighbouring cell detected on the associated measObjectNR which has a physical cell identity that is included in the cellsFor WhichToReportSFTD to be applicable;
\( 5> \) else:
\( 6> \) consider up to 3 strongest NR neighbouring cells detected based on parameters in the associated measObjectNR to be applicable when the concerned cells are not included in the excludedCellsToAddModList defined within the VarMeasConfig for this measld;
\( 3> \) else if the corresponding measObject concerns E-UTRA:
\( 4> \) if the reportSFTD-Meas is set to true:
\( 5> \) consider the E-UTRA PSCell to be applicable;
\( 2> \) else if the corresponding reportConfig includes a reportType set to cli-Periodical or cli-EventTriggered:
\( 3> \) consider all CLI measurement resources included in the corresponding measObject to be applicable;
\( 2> \) else if the corresponding reportConfig includes a reportType set to rxTxPeriodical:
\( 3> \) consider all Rx -Tx time difference measurement resources included in the corresponding measObject to be applicable;
\( 2> \) if the corresponding reportConfig concerns the reporting for NR sidelink communication (i.e.
reportConfigNR-SL):
\( 3> \) consider the transmission resource pools indicated by the \( t x \)-PoolMeasToAddModList defined within the VarMeasConfig for this measld to be applicable;
\( 2> \) if the reportType is set to eventTriggered and if the entry condition applicable for this event, i.e the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable cells for all measurements after layer 3 filtering taken during timeToTrigger defined for this event within the VarMeasConfig, while the VarMeasReportList does not include a measurement reporting entry for this measld (a first cell triggers the event):
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measld;
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) include the concerned cell(s) in the cellsTriggeredList defined within the VarMeasReportList for this measld;
\( 3> \) if useT312 is set to true in reportConfig for this event:
4- if T310 for the corresponding SpCell is running; and
4 if T312 is not running for corresponding SpCell:
\( 5> \) start timer T312 for the corresponding SpCell with the value of T312 configured in the corresponding measObjectNR;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5.5;
\( 2> \) else if the reportType is set to eventTriggered and if the entry condition applicable for this event, i.e. the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable cells not included in the cellsTriggeredList for all measurements after layer 3 filtering taken during timeToTrigger defined for this event within the VarMeasConfig (a subsequent cell triggers the event):
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;

ETSI


--- Page 184  ---


3GPP TS 38.331 version 17.0.0 Release 17
183
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) include the concerned cell(s) in the cellsTriggeredList defined within the VarMeasReportList for this measld;
\( 3> \) if useT312 is set to true in reportConfig for this event:
4 if T310 for the corresponding SpCell is running; and
4 if T312 is not running for corresponding SpCell:
\( 5> \) start timer T312 for the corresponding SpCell with the value of T312 configured in the corresponding measObjectNR;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5 .5 ;
\( 2> \) else if the reportType is set to eventTriggered and if the leaving condition applicable for this event is fulfilled for one or more of the cells included in the cellsTriggeredList defined within the VarMeasReportList for this measld for all measurements after layer 3 filtering taken during timeToTrigger defined within the VarMeasConfig for this event:
\( 3> \) remove the concerned cell(s) in the cellsTriggeredList defined within the VarMeasReportList for this measld;
\( 3> \) if reportOnLeave is set to true for the corresponding reporting configuration:
\( 4> \) initiate the measurement reporting procedure, as specified in 5.5.5;
\( 3> \) if the cellsTriggeredList defined within the VarMeasReportList for this measld is empty:
4 remove the measurement reporting entry within the VarMeasReportList for this measld;
\( 4> \) stop the periodical reporting timer for this measld, if running;
\( 2> \) if the reportType is set to eventTriggered and if the entry condition applicable for this event, i.e the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable L2 U2N Relay UEs for all measurements after layer 3 filtering taken during timeToTrigger defined for this event within the VarMeasConfig, while the VarMeasReportList does not include a measurement reporting entry for this measld (a first L2 U2N Relay UE triggers the event):
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measld;
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
3> include the concerned L2 U2N Relay UE(s) in the relaysTriggeredList defined within the VarMeasReportList for this measld;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5 .5 ;
\( 2> \) else if the reportType is set to eventTriggered and if the entry condition applicable for this event, i.e the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable L2 U2N Relay UEs not included in the relaysTriggeredList for all measurements after layer 3 filtering taken during timeToTrigger defined for this event within the VarMeasConfig (a subsequent L2 U2N Relay UE triggers the event):
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) include the concerned L2 U2N Relay UE(s) in the relaysTriggeredList defined within the VarMeasReportList for this measld;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5.5;
\( 2> \) else if the reportType is set to eventTriggered and if the leaving condition applicable for this event is fulfilled for one or more of the L2 U2N Relay UEs included in the relaysTriggeredList defined within the VarMeasReportList for this measld for all measurements after layer 3 filtering taken during timeToTrigger defined within the VarMeasConfig for this event:
\( 3> \) remove the concerned L2 U2N Relay UE(s) in the relaysTriggeredList defined within the VarMeasReportList for this measId;

ETSI


--- Page 185  ---


3GPP TS 38.331 version 17.0.0 Release 17
184
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) if reportOnLeave is set to true for the corresponding reporting configuration:
\( 4> \) initiate the measurement reporting procedure, as specified in 5.5.5;
\( 3> \) if the relaysTriggeredList defined within the VarMeasReportList for this measld is empty:
4> remove the measurement reporting entry within the VarMeasReportList for this measld;
\( 4> \) stop the periodical reporting timer for this measld, if running;
\( 2> \) else if the reportType is set to eventTriggered and if the entry condition applicable for this event, i.e. the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable transmission resource pools for all measurements taken during timeToTrigger defined for this event within the VarMeasConfig, while the VarMeasReportList does not include an measurement reporting entry for this measld (a first transmission resource pool triggers the event):
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measld;
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) include the concerned transmission resource pool(s) in the poolsTriggeredList defined within the VarMeasReportList for this measld;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5 .5 ;
\( 2> \) else if the reportType is set to eventTriggered and if the entry condition applicable for this event, i.e. the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable transmission resource pools not included in the poolsTriggeredList for all measurements taken during timeToTrigger defined for this event within the VarMeasConfig (a subsequent transmission resource pool triggers the event):
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) include the concerned transmission resource pool(s) in the poolsTriggeredList defined within the VarMeasReportList for this measld;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5 .5 ;
\( 2> \) else if the reportType is set to eventTriggered and if the leaving condition applicable for this event is fulfilled for one or more applicable transmission resource pools included in the poolsTriggeredList defined within the VarMeasReportList for this measId for all measurements taken during timeToTrigger defined within the VarMeasConfig for this event:
\( 3> \) remove the concerned transmission resource pool(s) in the poolsTriggeredList defined within the VarMeasReportList for this measld;
\( 3> \) if the poolsTriggeredList defined within the VarMeasReportList for this measId is empty:
4 remove the measurement reporting entry within the VarMeasReportList for this measld;
\( 4> \) stop the periodical reporting timer for this measld, if running
\( 2> \) else if the reportType is set to eventTriggered and if the eventld is set to eventDI and if the entering condition applicable for this event, i.e the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled during timeToTrigger defined within the VarMeasConfig for this event:
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measld;
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5 .5 ;
NOTE 1: Void.
\( 2> \) if reportType is set to periodical and if a (first) measurement result is available:
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measld;

ETSI


--- Page 186  ---


3GPP TS 38.331 version 17.0.0 Release 17
185
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) if the corresponding reportConfig includes measRSSI-ReportConfig:
\( 4> \) initiate the measurement reporting procedure as specified in 5.5 .5 immediately when RSSI sample values are reported by the physical layer after the first L1 measurement duration;
\( 3> \) else if the corresponding reportConfig includes the ul-DelayValueConfig:
\( 4> \) initiate the measurement reporting procedure, as specified in 5.5 .5 , immediately after a first measurement result is provided from lower layers of the associated DRB identity;
\( 3> \) else if the corresponding reportConfig includes the \( u \) /-ExcessDelayConfig:
\( 4> \) initiate the measurement reporting procedure, as specified in 5.5 .5 , immediately after a first measurement result is provided from lower layers of the associated DRB identity(ies) according to the configured threshold per DRB identity(ies);
\( 3> \) else if the reportAmount exceeds 1 :
4 - initiate the measurement reporting procedure, as specified in 5.5 .5 , immediately after the quantity to be reported becomes available for the NR SpCell or for the serving L2 U2N Relay UE (if the UE is a L2 U2N Remote UE);
\( 3> \) else (i.e. the reportAmount is equal to 1 ):
\( 4> \) initiate the measurement reporting procedure, as specified in 5.5 .5 , immediately after the quantity to be reported becomes available for the NR SpCell and for the strongest cell among the applicable cells, or for the NR SpCell and for the strongest L2 U2N Relay UEs among the applicable L2 U2N Relay UEs; or initiate the measurement reporting procedure, as specified in 5.5 .5 , immediately after the quantity to be reported becomes available for the serving L2 U2N Relay UE and for the strongest cell among the applicable cells (if the UE is a L2 U2N Remote UE);
\( 2> \) if, in case the corresponding reportConfig concerns the reporting for NR sidelink communication, reportType is set to periodical and if a (first) measurement result is available:
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measld;
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5 .5 , immediately after the quantity to be reported becomes available for the NR SpCell and CBR measurement results become available;
\( 2> \) if the reportType is set to cli-EventTriggered and if the entry condition applicable for this event, i.e the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable CLI measurement resources for all measurements after layer 3 filtering taken during timeToTrigger defined for this event within the VarMeasConfig, while the VarMeasReportList does not include a measurement reporting entry for this measld (a first CLI measurement resource triggers the event):
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measld;
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) include the concerned CLI measurement resource(s) in the cli-TriggeredList defined within the VarMeasReportList for this measId;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5.5;
\( 2> \) else if the reportType is set to cli-EventTriggered and if the entry condition applicable for this event, i.e the event corresponding with the eventld of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more CLI measurement resources not included in the cli-TriggeredList for all measurements after layer 3 filtering taken during timeToTrigger defined for this event within the VarMeasConfig (a subsequent CLI measurement resource triggers the event):
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;

ETSI


--- Page 187  ---


3GPP TS 38.331 version 17.0.0 Release 17
186
ETSI TS 138331 V17.0.0 (2022-05)

3> include the concerned CLI measurement resource(s) in the cli-TriggeredList defined within the VarMeasReportList for this measId;

3> initiate the measurement reporting procedure, as specified in 5.5.5;
\( 2> \) else if the reportType is set to cli-EventTriggered and if the leaving condition applicable for this event is fulfilled for one or more of the CLI measurement resources included in the cli-TriggeredList defined within the VarMeasReportList for this measId for all measurements after layer 3 filtering taken during timeToTrigger defined within the VarMeasConfig for this event:
\( 3> \) remove the concerned CLI measurement resource(s) in the cli-TriggeredList defined within the VarMeasReportList for this measId;

3> if reportOnLeave is set to true for the corresponding reporting configuration:
\( 4> \) initiate the measurement reporting procedure, as specified in 5.5.5;
3> if the cli-TriggeredList defined within the VarMeasReportList for this measId is empty:
4> remove the measurement reporting entry within the VarMeasReportList for this measId;
4> stop the periodical reporting timer for this measid, if running;
\( 2> \) if reportType is set to cli-Periodical and if a (first) measurement result is available:
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measId;
3> set the numberOfReportsSent defined within the VarMeasReportList for this measId to 0;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5.5, immediately after the quantity to be reported becomes available for at least one CLI measurement resource;
\( 2> \) if reportType is set to \( r x T x P \) eriodical and if a (first) measurement result is available:
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measId;
3> set the numberOfReportsSent defined within the VarMeasReportList for this measId to 0;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5.5;
\( 2> \) upon expiry of the periodical reporting timer for this measId:
3> initiate the measurement reporting procedure, as specified in 5.5.5.
\( 2> \) if the corresponding reportConfig includes a reportType is set to reportSFTD:
\( 3> \) if the corresponding measObject concerns NR:
4> if the drx-SFTD-NeighMeas is included:
\( 5> \) if the quantity to be reported becomes available for each requested pair of PCell and NR cell:
\( 6> \) stop timer T322;
\( 6> \) initiate the measurement reporting procedure, as specified in 5.5.5;
4) else
\( 5> \) initiate the measurement reporting procedure, as specified in 5.5.5, immediately after the quantity to be reported becomes available for each requested pair of PCell and NR cell or the maximal measurement reporting delay as specified in TS 38.133 [14];

3> else if the corresponding measObject concerns E-UTRA:
\( 4> \) initiate the measurement reporting procedure, as specified in 5.5.5, immediately after the quantity to be reported becomes available for the pair of PCell and E-UTRA PSCell or the maximal measurement reporting delay as specified in TS 38.133 [14];

ETSI


--- Page 188  ---


3GPP TS 38.331 version 17.0.0 Release 17
187
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if report Type is set to report \( C G I \) :
\( 3> \) if the UE acquired the SIBI or SystemInformationBlockTypel for the requested cell; or
\( 3> \) if the UE detects that the requested NR cell is not transmitting SIB1 (see TS 38.213 [13], clause 13):
\( 4> \) stop timer T321;
\( 4> \) include a measurement reporting entry within the VarMeasReportList for this measld;
\( 4> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 4> \) initiate the measurement reporting procedure, as specified in 5.5.5;
\( 2> \) upon the expiry of T321 for this measld:
\( 3> \) include a measurement reporting entry within the VarMeasReportList for this measld;
\( 3> \) set the numberOfReportsSent defined within the VarMeasReportList for this measld to 0;
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5 .5 .
\( 2> \) upon the expiry of T322 for this measld:
\( 3> \) initiate the measurement reporting procedure, as specified in 5.5 .5 .
5.5.4.2 Event A1 (Serving becomes better than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition A1-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition A1-2, as specified below, is fulfilled;
\( 1> \) for this measurement, consider the NR serving cell corresponding to the associated measObjectNR associated with this event.

Inequality A1-1 (Entering condition)
Ms - Hys > Thresh
Inequality A1-2 (Leaving condition)
\( M s+H y s< \) Thresh
The variables in the formula are defined as follows:
\( M s \) is the measurement result of the serving cell, not taking into account any offsets.
Hys is the hysteresis parameter for this event (i.e hysteresis as defined within reportConfigNR for this event).
Thresh is the threshold parameter for this event (i.e. al-Threshold as defined within reportConfigNR for this event).
\( M s \) is expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Hys is expressed in dB.
Thresh is expressed in the same unit as \( M s \).
5.5.4.3 Event A2 (Serving becomes worse than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition A2-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition A2-2, as specified below, is fulfilled;

ETSI


--- Page 189  ---


3GPP TS 38.331 version 17.0.0 Release 17
188
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) for this measurement, consider the serving cell indicated by the measObjectNR associated to this event.
Inequality A2-1 (Entering condition)
Ms + Hys < Thresh
Inequality A2-2 (Leaving condition)
\( M s-H y s> \) Thresh
The variables in the formula are defined as follows:
\( M s \) is the measurement result of the serving cell, not taking into account any offsets.
Hys is the hysteresis parameter for this event (i.e hysteresis as defined within reportConfigNR for this event).
Thresh is the threshold parameter for this event (i.e. a2-Threshold as defined within reportConfigNR for this event).
\( M s \) is expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Hys is expressed in dB.
Thresh is expressed in the same unit as \( M s \).
5.5.4.4 Event A3 (Neighbour becomes offset better than SpCell)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition A3-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition A3-2, as specified below, is fulfilled;
\( 1> \) use the SpCell for Mp, Ofp and Ocp.
NOTE 1: The cell(s) that triggers the event has reference signals indicated in the measObjectNR associated to this event which may be different from the NR SpCell measObjectNR.

Inequality A3-1 (Entering condition)
\( M n+O f n+O c n-H y s>M p+O f p+O c p+O f f \)
Inequality A3-2 (Leaving condition)
\( M n+O f n+O c n+H y s<M p+O f p+O c p+O f f \)
The variables in the formula are defined as follows:
\( M n \) is the measurement result of the neighbouring cell, not taking into account any offsets.
\( O f n \) is the measurement object specific offset of the reference signal of the neighbour cell (i.e. offsetMO as defined within measObjectNR corresponding to the neighbour cell).

Ocn is the cell specific offset of the neighbour cell (i.e. cellndividualOffset as defined within measObjectNR corresponding to the frequency of the neighbour cell), and set to zero if not configured for the neighbour cell.
\( M p \) is the measurement result of the SpCell, not taking into account any offsets.
Ofp is the measurement object specific offset of the SpCell (i.e. offsetMO as defined within measObjectNR corresponding to the SpCell).
\( O c p \) is the cell specific offset of the SpCell (ie celllndividualOffset as defined within measObjectNR corresponding to the SpCell), and is set to zero if not configured for the SpCell.

Hys is the hysteresis parameter for this event (i.e hysteresis as defined within reportConfigNR for this event).
Off is the offset parameter for this event (i.e. a3-Offset as defined within reportConfigNR for this event).
\( M n, M p \) are expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.

ETSI


--- Page 190  ---


3GPP TS 38.331 version 17.0.0 Release 17
189
ETSI TS 138331 V17.0.0 (2022-05)

Ofn, Ocn, Ofp, Ocp, Hys, Off are expressed in dB.
NOTE 2: The definition of Event A3 also applies to CondEvent A3.
5.5.4.5 Event A4 (Neighbour becomes better than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition A4-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition A4-2, as specified below, is fulfilled.
Inequality A4-1 (Entering condition)
\( M n+O f n+O c n-H y s>T h r e s h \)
Inequality A4-2 (Leaving condition)
\( M n+O f n+O c n+H y s<T h r e s h \)
The variables in the formula are defined as follows:
\( M n \) is the measurement result of the neighbouring cell, not taking into account any offsets.
Ofn is the measurement object specific offset of the neighbour cell (i.e. offsetMO as defined within measObjectNR corresponding to the neighbour cell).

Ocn is the measurement object specific offset of the neighbour cell (i.e. celllndividualOffset as defined within measObjectNR corresponding to the neighbour cell), and set to zero if not configured for the neighbour cell.
\( H y s \) is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNR for this event).
Thresh is the threshold parameter for this event (i.e. a4-Threshold as defined within reportConfigNR for this event).
Mn is expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Ofn, Ocn, Hys are expressed in dB.
Thresh is expressed in the same unit as Mn.
NOTE: The definition of Event A4 also applies to CondEvent A4.
5.5.4.6 Event A5 (SpCell becomes worse than threshold1 and neighbour becomes better than threshold2)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when both condition A5-1 and condition A5-2, as specified below, are fulfilled;

1> consider the leaving condition for this event to be satisfied when condition A5-3 or condition A5-4, i.e. at least one of the two, as specified below, is fulfilled;

1> use the SpCell for Mp.
NOTE 1: The parameters of the reference signal(s) of the cell(s) that triggers the event are indicated in the measObjectNR associated to the event which may be different from the measObjectNR of the NR SpCell.

Inequality A5-1 (Entering condition 1)
\( M p+H y s< \) Thresh \( l \)
Inequality A5-2 (Entering condition 2)
\( M n+O f n+O c n-H y s>T h r e s h 2 \)
Inequality A5-3 (Leaving condition 1)

ETSI


--- Page 191  ---


3GPP TS 38.331 version 17.0.0 Release 17
190
ETSI TS 138331 V17.0.0 (2022-05)

Mp - Hys > Thresh l
Inequality A5-4 (Leaving condition 2)
\( M n+O f n+O c n+H y s<T h r e s h 2 \)
The variables in the formula are defined as follows:
\( M p \) is the measurement result of the NR SpCell, not taking into account any offsets.
\( M n \) is the measurement result of the neighbouring cell, not taking into account any offsets.
Ofn is the measurement object specific offset of the neighbour cell (i.e. offsetMO as defined within measObjectNR corresponding to the neighbour cell).

Ocn is the cell specific offset of the neighbour cell (i.e. cellndividualOffset as defined within measObjectNR corresponding to the neighbour cell), and set to zero if not configured for the neighbour cell.
\( H y s \) is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNR for this event).
Threshl is the threshold parameter for this event (i.e a 5 -Thresholdl as defined within reportConfigNR for this event).

Thresh2 is the threshold parameter for this event (i.e. a5-Threshold2 as defined within reportConfigNR for this event).

Mn, Mp are expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Ofn, Ocn, Hys are expressed in dB.
Threshlis expressed in the same unit as Mp.
Thresh 2 is expressed in the same unit as Mn.
NOTE 2: The definition of Event A5 also applies to CondEvent A5.
5.5.4.7 Event A6 (Neighbour becomes offset better than SCell)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition A6-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition A6-2, as specified below, is fulfilled;
\( 1> \) for this measurement, consider the (secondary) cell corresponding to the measObjectNR associated to this event to be the serving cell.

NOTE: The reference signal(s) of the neighbour(s) and the reference signal(s) of the SCell are both indicated in the associated measObjectNR.

Inequality A6-1 (Entering condition)
\( M n+O c n-H y s>M s+O c s+O f f \)
Inequality A6-2 (Leaving condition)
\( M n+O c n+H y s<M s+O c s+O f f \)
The variables in the formula are defined as follows:
\( M n \) is the measurement result of the neighbouring cell, not taking into account any offsets.
Ocn is the cell specific offset of the neighbour cell (i.e. celllndividualOffset as defined within the associated measObjectNR), and set to zero if not configured for the neighbour cell.
\( M s \) is the measurement result of the serving cell, not taking into account any offsets.

ETSI


--- Page 192  ---


3GPP TS 38.331 version 17.0.0 Release 17
191
ETSI TS 138331 V17.0.0 (2022-05)

Ocs is the cell specific offset of the serving cell (i.e. cellndividualOffset as defined within the associated measObject \( N R \) ), and is set to zero if not configured for the serving cell.

Hys is the hysteresis parameter for this event (i.e hysteresis as defined within reportConfigNR for this event).
Off is the offset parameter for this event (i.e. a6-Offset as defined within reportConfigNR for this event).
\( M n, M s \) are expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Ocn, Ocs, Hys, Off are expressed in dB.
5.5.4.8 Event B1 (Inter RAT neighbour becomes better than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition B1-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition B1-2, as specified below, is fulfilled.
Inequality B1-1 (Entering condition)
\( M n+O f n+O c n-H y s> \) Thresh
Inequality B1-2 (Leaving condition)
\( M n+O f n+O c n+H y s<T h r e s h \)
The variables in the formula are defined as follows:
\( M n \) is the measurement result of the inter-RAT neighbour cell, not taking into account any offsets.
Ofn is the measurement object specific offset of the frequency of the inter-RAT neighbour cell (i.e. eutra- \( Q \) OffsetRange as defined within the measObjectEUTRA corresponding to the frequency of the neighbour interRAT cell, utra-FDD-Q-OffsetRange as defined within the measObjectUTRA-FDD corresponding to the frequency of the neighbour inter-RAT cell).

Ocn is the cell specific offset of the inter-RAT neighbour cell (i.e. cellIndividualOffset as defined within the measObjectEUTRA corresponding to the neighbour inter-RAT cell), and set to zero if not configured for the neighbour cell.

Hys is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigInterRAT for this event).
Thresh is the threshold parameter for this event (i.e. bl-ThresholdEUTRA as defined within reportConfigInterRAT for this event, bl-ThresholdUTRA-FDD as defined for UTRA-FDD within reportConfigInterRAT for this event).
\( M n \) is expressed in dBm or in dB , depending on the measurement quantity of the inter-RAT neighbour cell.
Ofn, Ocn, Hys are expressed in dB.
Thresh is expressed in the same unit as \( M n \).
5.5.4.9 Event B2 (PCell becomes worse than threshold1 and inter RAT neighbour becomes better than threshold2)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when both condition B2-1 and condition B2-2, as specified below, are fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition B2-3 or condition B2-4, i.e. at least one of the two, as specified below, is fulfilled;

Inequality B2-1 (Entering condition 1)
\( M p+H y s< \) Threshl

ETSI


--- Page 193  ---


3GPP TS 38.331 version 17.0.0 Release 17
192
ETSI TS 138331 V17.0.0 (2022-05)

Inequality B2-2 (Entering condition 2)
\( M n+O f n+O c n-H y s>T h r e s h 2 \)
Inequality B2-3 (Leaving condition 1)
Mp - Hys > Thresh l
Inequality B2-4 (Leaving condition 2)
\( M n+O f n+O c n+H y s<T h r e s h 2 \)
The variables in the formula are defined as follows:
\( M_{p} \) is the measurement result of the PCell, not taking into account any offsets.
\( M n \) is the measurement result of the inter-RAT neighbour cell, not taking into account any offsets.
Ofn is the measurement object specific offset of the frequency of the inter-RAT neighbour cell (i.e. eutra-QOffsetRange as defined within the measObjectEUTRA corresponding to the frequency of the inter-RAT neighbour cell, utra-FDD-Q-OffsetRange as defined within the measObjectUTRA-FDD corresponding to the frequency of the neighbour inter-RAT cell).

Ocn is the cell specific offset of the inter-RAT neighbour cell (i.e. cellIndividualOffset as defined within the measObjectEUTRA corresponding to the neighbour inter-RAT cell), and set to zero if not configured for the neighbour cell.
\( H y s \) is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigInterRAT for this event).
Thresh1 is the threshold parameter for this event (i.e. b2-Thresholdl as defined within reportConfigInterRAT for this event).

Thresh2 is the threshold parameter for this event (i.e. b2-Threshold2EUTRA as defined within reportConfigInterRAT for this event, b2-Threshold2UTRA-FDD as defined for UTRA-FDD within reportConfigInterRAT for this event).
\( M p \) is expressed in dBm in case of RSRP, or in dB in case of RSRQ and SINR.
\( M n \) is expressed in dBm or dB , depending on the measurement quantity of the inter-RAT neighbour cell.
Ofn, Ocn, Hys are expressed in dB.
Thresh I is expressed in the same unit as Mp.
Thresh 2 is expressed in the same unit as Mn.
5.5.4.10 Event I1 (Interference becomes higher than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition [1-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition [1-2, as specified below, is fulfilled.
Inequality [1-1 (Entering condition)
Mi-Hys > Thresh
Inequality [1-2 (Leaving condition)
Mi + Hys < Thresh
The variables in the formula are defined as follows:
\( M i \) is the measurement result of the interference, not taking into account any offsets.
Hys is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNR for this event).

ETSI


--- Page 194  ---


3GPP TS 38.331 version 17.0.0 Release 17
193
ETSI TS 138331 V17.0.0 (2022-05)

Thresh is the threshold parameter for this event (i.e. il-Threshold as defined within reportConfigNR for this event).
Mi, Thresh are expressed in dBm .
Hys is expressed in dB.
5.5.4.11 Event C1 (The NR sidelink channel busy ratio is above a threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition C1-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition C1-2, as specified below, is fulfilled; Inequality C1-1 (Entering condition)

Ms-Hys > Thresh
Inequality C1-2 (Leaving condition)
Ms + Hys \( < \) Thresh
The variables in the formula are defined as follows:
\( M s \) is the measurement result of channel busy ratio of the transmission resource pool, not taking into account any offsets.
\( H y s \) is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNR-SL for this event).
Thresh is the threshold parameter for this event (i.e. cl-Threshold as defined within reportConfigNR-SL for this event).
\( M s \) is expressed in decimal from 0 to 1 in steps of 0.01 .
Hys is expressed is in the same unit as Ms.
Thresh is expressed in the same unit as Ms.
5.5.4.12 Event C2 (The NR sidelink channel busy ratio is below a threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition C2-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition C2-2, as specified below, is fulfilled; Inequality C2-1 (Entering condition)
\( M s+H y s< \) Thresh
Inequality C2-2 (Leaving condition)
Ms-Hys> Thresh
The variables in the formula are defined as follows:
\( M s \) is the measurement result of channel busy ratio of the transmission resource pool, not taking into account any offsets.
\( H y s \) is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNR-SL for this event).
Thresh is the threshold parameter for this event (i.e. c2-Threshold as defined within reportConfigNR-SL for this event).
\( M s \) is expressed in decimal from 0 to 1 in steps of 0.01 .

ETSI


--- Page 195  ---


3GPP TS 38.331 version 17.0.0 Release 17
194
ETSI TS 138331 V17.0.0 (2022-05)

Hys is expressed is in the same unit as \( M s \).
Thresh is expressed in the same unit as Ms.
5.5.4.13 Void
5.5.4.14 Void
5.5.4.15 Event D1

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when both condition D1-1 and conditionD1-2, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition D1-3 or conditionD1-4, as specified below, is fulfilled;

Inequality D1-1 (Entering condition 1)
Ml1 - Hys > Thresh 1
Inequality D1-2 (Entering condition 2)
Ml2 + Hys < Thresh 2
Inequality D1-3 (Leaving condition 1)
Ml1 + Hys < Thresh 1
Inequality D1-4 (Leaving condition 2)
Ml2 - Hys > Thresh 2
The variables in the formula are defined as follows:
MII is the UE location, represented by the distance between UE and a reference location parameter for this event (i.e. referenceLocation I as defined within reportConfigNR for this event), not taking into account any offsets.

MI2 is the UE location, represented by the distance between UE and a reference location parameter for this event (i.e. referenceLocation 2 as defined within reportConfigNR for this event), not taking into account any offsets but.
\( H y s \) is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNR for this event).
ThreshI is the threshold for this event defined as a distance, configured with parameter distanceFromReferencel, from a reference location configured with parameter referenceLocation I within reportConfigNR for this event.

Thresh 2 is the threshold for this event defined as a distance, configured with parameter distanceFromReference2, from a reference location configured with parameter referenceLocation 2 within reportConfigNR for this event.

MII is expressed in meters.
MI2 is expressed in meters.
Hys is expressed in the same unit as MII.
Thresh is expressed in the same unit as MII.
NOTE: The definition of Event D1 also applies to CondEvent D1.
5.5.4.16 CondEvent T1

The UE shall:

ETSI


--- Page 196  ---


3GPP TS 38.331 version 17.0.0 Release 17
195
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) consider the entering condition for this event to be satisfied when condition T1-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition T1-2, as specified below, is fulfilled;
Inequality T1-1 (Entering condition)
M \( > \) Thresh 1
Inequality T1-2 (Leaving condition)
Mt > Thresh1 + Duration
The variables in the formula are defined as follows:
\( M t \) is the time measured at UE.
Thresh1 is the threshold parameter for this event (i.e. tl-Threshold as defined within reportConfigNR for this event).

Duration is the duration parameter for this event (i.e. duration as defined within reportConfigNR for this event).
Mt is expressed in \( m s \).
Thresh is expressed in the same unit as Mt.
5.5.4.17 Event X1 (Serving L2 U2N Relay UE becomes worse than threshold1 and NR Cell becomes better than threshold2)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when both condition X1-1 and condition X1-2, as specified below, are fulfilled;

1> consider the leaving condition for this event to be satisfied when condition X1-3 or condition X1-4, i.e. at least one of the two, as specified below, is fulfilled;

Inequality X1-1 (Entering condition 1)
\( M r+H y s< \) Thresh \( l \)
Inequality X1-2 (Entering condition 2)
\( M n+O f n+O c n-H y s>T h r e s h 2 \)
Inequality X1-3 (Leaving condition 1)
Mr - Hys > Thresh l
Inequality X1-4 (Leaving condition 2)
\( M n+O f n+O c n+H y s<T h r e s h 2 \)
The variables in the formula are defined as follows:
\( M r \) is the measurement result of the serving L2 U2N Relay UE, not taking into account any offsets.
\( M n \) is the measurement result of the NR cell, not taking into account any offsets.
Ofn is the measurement object specific offset of the frequency of the NR cell.
Ocn is the cell specific offset of the NR cell, and set to zero if not configured for the cell.
\( H y s \) is the hysteresis parameter for this event.
Threshl is the threshold parameter for this event (i.e. xl-Thresholdl-Relay as defined within reportConfigNR for this event).

ETSI


--- Page 197  ---


3GPP TS 38.331 version 17.0.0 Release 17
196
ETSI TS 138331 V17.0.0 (2022-05)

Thresh2 is the threshold parameter for this event (i.e x1-Threshold2 as defined within reportConfigNR for this event).

Mr is expressed in dBm .
\( M n \) is expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Ofn, Ocn, Hys are expressed in dB.
Threshl is expressed in the same unit as Mr.
Thresh 2 is expressed in the same unit as Mn.
5.5.4.18 Event X2 (Serving L2 U2N Relay UE becomes worse than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition X2-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition X2-2, as specified below, is fulfilled;
Inequality X2-1 (Entering condition)
\( M r+H y s< \) Thresh
Inequality X2-2 (Leaving condition)
Mr - Hys > Thresh
The variables in the formula are defined as follows:
Mr is the measurement result of the serving L2 U2N Relay UE, not taking into account any offsets.
\( H y s \) is the hysteresis parameter for this event.
Thresh is the threshold parameter for this event (i.e. \( x 2 \)-Threshold-Relay as defined within reportConfigNR for this event).

Mr is expressed in dBm .
Hys are expressed in dB.
Thresh is expressed in the same unit as Mr.
5.5.4.19 Event Y1 (PCell becomes worse than threshold1 and candidate L2 U2N Relay UE becomes better than threshold2)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when both condition Y1-1 and condition Y1-2, as specified below, are fulfilled;

1> consider the leaving condition for this event to be satisfied when condition Y1-3 or condition Y1-4, i.e. at least one of the two, as specified below, is fulfilled;

Inequality Y1-1 (Entering condition 1)
\( M p+H y s< \) Thresh \( l \)
Inequality Y1-2 (Entering condition 2)
Mr-Hys > Thresh2
Inequality Y1-3 (Leaving condition 1)
Mp - Hys > Thresh l

ETSI


--- Page 198  ---


3GPP TS 38.331 version 17.0.0 Release 17
197
ETSI TS 138331 V17.0.0 (2022-05)

Inequality Y1-4 (Leaving condition 2)
\( M r+H y s< \) Thresh 2
The variables in the formula are defined as follows:
\( M p \) is the measurement result of the PCell, not taking into account any offsets.
Mr is the measurement result of the candidate L2 U2N Relay UE, not taking into account any offsets.
\( H y s \) is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigInterRAT for this event).
Thresh I is the threshold parameter for this event (i.e yl-Thresholdl as defined within reportConfigInterRAT for this event).

Thresh 2 is the threshold parameter for this event (i.e. yl-Threshold2-Relay as defined within reportConfigInterRAT for this even).
\( M p \) is expressed in dBm in case of RSRP, or in dB in case of RSRQ and SINR.
Mr is expressed in dBm or dB , depending on the measurement quantity of candidate L 2 U2N Relay UE.
Hys are expressed in dB.
Thresh 1 is expressed in the same unit as \( M p \).
Thresh 2 is expressed in the same unit as Mr.
5.5.4.20 Event Y2 (Candidate L2 U2N Relay UE becomes better than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition Y2-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition Y2-2, as specified below, is fulfilled; Inequality Y2-1 (Entering condition)

Mr-Hys > Thresh2
Inequality Y2-2 (Leaving condition)
\( M r+H y s< \) Thresh 2
The variables in the formula are defined as follows:
Mr is the measurement result of the candidate L2 U2N Relay UE, not taking into account any offsets.
\( H y s \) is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigInterRAT for this event).
Thresh is the threshold parameter for this event (i.e. \( y 2 \)-Threshold-Relay as defined within reportConfigInterRAT for this event).

Mr is expressed in dBm or dB , depending on the measurement quantity of candidate L2 U2N Relay UE.
Hys are expressed in dB.
Thresh is expressed in the same unit as \( M r \).

ETSI


--- Page 199  ---


3GPP TS 38.331 version 17.0.0 Release 17
198
ETSI TS 138331 V17.0.0 (2022-05)
5.5.5 Measurement reporting
5.5.5.1 General

Figure 5.5.5.1-1: Measurement reporting

The purpose of this procedure is to transfer measurement results from the UE to the network. The UE shall initiate this procedure only after successful AS security activation.

For the measld for which the measurement reporting procedure was triggered, the UE shall set the measResults within the MeasurementReport message as follows:
\( 1> \) set the measid to the measurement identity that triggered the measurement reporting;
1> for each serving cell configured with servingCellMO:
\( 2> \) if the reportConfig associated with the measId that triggered the measurement reporting includes rsType:
3> if the serving cell measurements based on the rsType included in the reportConfig that triggered the measurement report are available:

4> set the measResultServingCell within measResultServingMOList to include RSRP, RSRQ and the available SINR of the serving cell, derived based on the rsType included in the reportConfig that triggered the measurement report;
\( 2> \) else:
3> if SSB based serving cell measurements are available:
4> set the measResultServingCell within measResultServingMOList to include RSRP, RSRQ and the available SINR of the serving cell, derived based on SSB;

3> else if CSI-RS based serving cell measurements are available:
4> set the measResultServingCell within measResultServingMOList to include RSRP, RSRQ and the available SINR of the serving cell, derived based on CSI-RS;

1> set the servCellId within measResultServingMOList to include each NR serving cell that is configured with serving CellMO, if any;
\( 1> \) if the reportConfig associated with the measId that triggered the measurement reporting includes reportQuantityRS-Indexes and maxNrofRS-IndexesToReport:
\( 2> \) for each serving cell configured with servingCellMO, include beam measurement information according to the associated reportConfig as described in 5.5.5.2;
\( 1> \) if the reportConfig associated with the measId that triggered the measurement reporting includes reportAddNeighMeas:
\( 2> \) for each measObjectld referenced in the measIdList which is also referenced with servingCellMO, other than the measObjectld corresponding with the measld that triggered the measurement reporting:

3> if the measObjectNR indicated by the servingCellMO includes the RS resource configuration corresponding to the rsType indicated in the reportConfig:

4> set the measResultBestNeighCell within measResultServingMOList to include the physCellld and the available measurement quantities based on the reportQuantityCell and rsType indicated in

ETSI


--- Page 200  ---


3GPP TS 38.331 version 17.0.0 Release 17
199
ETSI TS 138331 V17.0.0 (2022-05)

reportConfig of the non-serving cell corresponding to the concerned measObjectNR with the highest measured RSRP if RSRP measurement results are available for cells corresponding to this measObjectNR, otherwise with the highest measured RSRQ if RSRQ measurement results are available for cells corresponding to this measObjectNR, otherwise with the highest measured SINR;
\( 4> \) if the reportConfig associated with the measld that triggered the measurement reporting includes reportQuantityRS-Indexes and maxNrofRS-IndexesToReport:
\( 5> \) for each best non-serving cell included in the measurement report:
\( 6> \) include beam measurement information according to the associated reportConfig as described in 5.5.5.2;
\( 1> \) if the reportConfig associated with the measld that triggered the measurement reporting is set to eventTriggered and eventID is set to eventA3, or eventA4, or eventA5, or eventB1, or eventB2:
\( 2> \) if the UE is in NE-DC and the measurement configuration that triggered this measurement report is associated with the MCG:
\( 3> \) set the measResultServFreqListEUTRA-SCG to include an entry for each E-UTRA SCG serving frequency with the following:
\( 4> \) include carrierFreq of the E-UTRA serving frequency;
4> set the measResultServingCell to include the available measurement quantities that the UE is configured to measure by the measurement configuration associated with the SCG;
\( 4> \) if reportConfig associated with the measld that triggered the measurement reporting includes reportAddNeighMeas:
\( 5> \) set the measResultServFreqListEUTRA-SCG to include within measResultBestNeighCell the quantities of the best non-serving cell, based on RSRP, on the concerned serving frequency;
\( 1> \) if reportConfig associated with the measld that triggered the measurement reporting is set to eventTriggered and eventID is set to eventA3, or eventA4, or eventA5:
\( 2> \) if the UE is in NR-DC and the measurement configuration that triggered this measurement report is associated with the MCG:
\( 3> \) set the measResultServFreqListNR-SCG to include for each NR SCG serving cell that is configured with serving CellMO, if any, the following:

4 if the reportConfig associated with the measld that triggered the measurement reporting includes rsType:
\( 5> \) if the serving cell measurements based on the rsType included in the reportConfig that triggered the measurement report are available according to the measurement configuration associated with the SCG:
\( 6> \) set the measResultServingCell within measResultServFreqListNR-SCG to include RSRP, RSRQ and the available SINR of the serving cell, derived based on the rsType included in the reportConfig that triggered the measurement report;
\( 4> \) else:
\( 5> \) if SSB based serving cell measurements are available according to the measurement configuration associated with the SCG:
\( 6> \) set the measResultServingCell within measResultServFreqListNR-SCG to include RSRP, RSRQ and the available SINR of the serving cell, derived based on SSB;
\( 5> \) else if CSI-RS based serving cell measurements are available according to the measurement configuration associated with the SCG:

6> set the measResultServingCell within measResultServFreqListNR-SCG to include RSRP, RSRQ and the available SINR of the serving cell, derived based on CSI-RS;

ETSI


--- Page 201  ---


3GPP TS 38.331 version 17.0.0 Release 17
200
ETSI TS 138331 V17.0.0 (2022-05)

4- if results for the serving cell derived based on SSB are included:
\( 5> \) include the ssbFrequency to the value indicated by ssbFrequency as included in the MeasObjectNR of the serving cell;

4- if results for the serving cell derived based on CSI-RS are included:
5> include the refFreqCSI-RS to the value indicated by refFreqCSI-RS as included in the MeasObjectNR of the serving cell;

4> if the reportConfig associated with the measId that triggered the measurement reporting includes reportQuantityRS-Indexes and maxNrofRS-IndexesToReport:
\( 5> \) for each serving cell configured with servingCellMO, include beam measurement information according to the associated reportConfig as described in 5.5.5.2, where availability is considered according to the measurement configuration associated with the SCG;
\( 4> \) if reportConfig associated with the measId that triggered the measurement reporting includes reportAddNeighMeas:
\( 5> \) if the measObjectNR indicated by the servingCellMO includes the RS resource configuration corresponding to the rsType indicated in the reportConfig:

6> set the measResultBestNeighCellListNR within measResultServFreqListNR-SCG to include one entry with the physCellld and the available measurement quantities based on the reportQuantityCell and rsType indicated in reportConfig of the non-serving cell corresponding to the concerned measObjectNR with the highest measured RSRP if RSRP measurement results are available for cells corresponding to this measObjectNR, otherwise with the highest measured RSRQ if RSRQ measurement results are available for cells corresponding to this measObjectNR, otherwise with the highest measured SINR, where availability is considered according to the measurement configuration associated with the SCG;
\( 7> \) if the reportConfig associated with the measId that triggered the measurement reporting includes reportQuantityRS-Indexes and maxNrofRS-IndexesToReport:

8> for each best non-serving cell included in the measurement report:
9> include beam measurement information according to the associated reportConfig as described in 5.5.5.2, where availability is considered according to the measurement configuration associated with the SCG;
\( 1> \) if the measRSSI-ReportConfig is configured within the corresponding reportConfig for this measId:
\( 2> \) set the rssi-Result to the linear average of sample value(s) provided by lower layers in the reportInterval;
\( 2> \) set the channelOccupancy to the rounded percentage of sample values which are beyond the channelOccupancyThreshold within all the sample values in the reportInterval;

1> if the UE is connected with a L2 U2N Relay UE via PC5-RRC connection (i.e. the UE is a L2 U2N Remote UE):
\( 2> \) set the sl-MeasResultServingRelay to include the SL-RSRP of the serving L2 U2N Relay UE;
NOTE 1: In case of no data transmission from L2 U2N Relay UE to L2 U2N Remote UE, it is left to UE implementation whether to use SL-RSRP or SD-RSRP when setting the sl-MeasResultServingRelay of the serving L2 U2N Relay UE.
\( 1> \) if there is at least one applicable neighbouring cell to report:
\( 2> \) if the reportType is set to eventTriggered or periodical:
\( 3> \) if the measurement report concerns the candidate L2 U2N Relay UE:
4> set the sl-MeasResultCandRelay to include the best candidate L2 U2N Relay UEs up to maxReportCells in accordance with the following:
\( 5> \) if the reportType is set to eventTriggered:

ETSI


--- Page 202  ---


3GPP TS 38.331 version 17.0.0 Release 17
201
ETSI TS 138331 V17.0.0 (2022-05)

6> include the L2 U2N Relay UEs included in the relaysTriggeredList as defined within the VarMeasReportList for this measId;
\( 5> \) else:
6> include the applicable L2 U2N Relay UEs for which the new measurement results became available since the last periodical reporting or since the measurement was initiated or reset;

3> else:
4> set the measResultNeighCells to include the best neighbouring cells up to maxReportCells in accordance with the following:
\( 5> \) if the reportType is set to eventTriggered:
6> include the cells included in the cellsTriggeredList as defined within the VarMeasReportList for this measld;

5> else:
\( 6> \) include the applicable cells for which the new measurement results became available since the last periodical reporting or since the measurement was initiated or reset;

3> for each cell that is included in the measResultNeighCells, include the physCellld;
3> for each L2 U2N Relay UE that is included in the sl-MeasResultsCandRelay, include the slRelayUEIdentity;
\( 3> \) if the reportType is set to eventTriggered or periodical:
4> for each included cell/L2 U2N Relay UE, include the layer 3 filtered measured results in accordance with the reportConfig for this measld, ordered as follows:
\( 5> \) if the measObject associated with this measId concerns NR:
\( 6> \) if \( r s \) Type in the associated reportConfig is set to \( s s b \) :
\( 7> \) set resultsSSB-Cell within the measResult to include the SS/PBCH block based quantity(ies) indicated in the reportQuantityCell within the concerned reportConfig, in decreasing order of the sorting quantity, determined as specified in 5.5.5.3, i.e. the best cell is included first;

7> if reportQuantityRS-Indexes and maxNrofRS-IndexesToReport are configured, include beam measurement information as described in 5.5.5.2;

6> else if \( r s \) Type in the associated reportConfig is set to \( c s i-r s \) :
7> set resultsCSI-RS-Cell within the measResult to include the CSI-RS based quantity(ies) indicated in the reportQuantityCell within the concerned reportConfig, in decreasing order of the sorting quantity, determined as specified in 5.5.5.3, i.e the best cell is included first;

7> if reportQuantityRS-Indexes and maxNrofRS-IndexesToReport are configured, include beam measurement information as described in 5.5.5.2;
\( 5> \) if the measObject associated with this measId concerns E-UTRA:
6> set the measResult to include the quantity(ies) indicated in the reportQuantity within the concerned reportConfigInterRAT in decreasing order of the sorting quantity, determined as specified in 5.5.5.3, i.e. the best cell is included first;
\( 5> \) if the measObject associated with this measId concerns UTRA-FDD and if ReportConfigInterRAT includes the reportQuantityUTRA-FDD:

6> set the measResult to include the quantity(ies) indicated in the reportQuantityUTRA-FDD within the concerned reportConfigInterRAT in decreasing order of the sorting quantity, determined as specified in 5.5.5.3, i.e the best cell is included first;

ETSI


--- Page 203  ---


3GPP TS 38.331 version 17.0.0 Release 17
202
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) if the measObject associated with this measld concerns L2 U2N Relay UE:
6> set the measResult to include the quantity(ies) indicated in the reportQuantityRelay within the concerned reportConfigRelay in decreasing order of the sorting quantity, determined as specified in 5.5.5.3, i.e the best L2 U2N Relay UE is included first;
\( 2> \) else:
\( 3> \) if the cell indicated by cellForWhichToReportCGI is an NR cell:
\( 4> \) if plmn-IdentityInfoList of the cgi-Info for the concerned cell has been obtained:
\( 5> \) include the plmn-IdentityInfoList including plmn-IdentityList, trackingAreaCode (if available), ranac (if available), cellldentity and cellReservedForOperator Use for each entry of the plmnIdentityInfoList;
\( 5> \) include frequencyBandList if available;
4> if \( n r \)-CGI-Reporting-NPN is supported by the UE and npn-IdentitylnfoList of the cgi-Info for the concerned cell has been obtained:
\( 5> \) include the npn-IdentityInfoList including npn-IdentityList, trackingAreaCode, ranac (if available), cellldentity and cellReservedForOperatorUse for each entry of the mpn-IdentityInfoList;
\( 5> \) include cellReservedForOther Use if available;
4> else if MIB indicates the SIBI is not broadcast:
\( 5> \) include the noSIBI including the ssb-SubcarrierOffset and pdcch-ConfigSIBl obtained from MIB of the concerned cell;
\( 3> \) if the cell indicated by cellForWhichToReportCGI is an E-UTRA cell:
\( 4> \) if all mandatory fields of the cgi-Info-EPC for the concerned cell have been obtained:
\( 5> \) include in the cgi-Info-EPC the fields broadcasted in E-UTRA SystemInformationBlockTypel associated to EPC;
\( 4> \) if the UE is E-UTRA/5GC capable and all mandatory fields of the cgi-Info-5GC for the concerned cell have been obtained:
\( 5> \) include in the cgi-Info-5GC the fields broadcasted in E-UTRA SystemInformationBlockTypel associated to 5 GC ;

4 if the mandatory present fields of the cgi-Info for the cell indicated by the cellForWhichToReportCGI in the associated measObject have been obtained:
\( 5> \) include the freqBandIndicator;
\( 5> \) if the cell broadcasts the multiBandlnfoList, include the multiBandlnfoList;
\( 5> \) if the cell broadcasts the freqBandIndicatorPriority, include the freqBandIndicatorPriority;
\( 1> \) if the corresponding measObject concerns NR:
\( 2> \) if the reportSFTD-Meas is set to true within the corresponding reportConfigNR for this measId:
\( 3> \) set the measResultSFTD-NR in accordance with the following:
\( 4> \) set sfn-OffsetResult and frameBoundaryOffsetResult to the measurement results provided by lower layers;
\( 4> \) if the reportRSRP is set to true;
\( 5> \) set \( r s r p \)-Result to the RSRP of the NR PSCell derived based on SSB;
\( 2> \) else if the reportSFTD-NeighMeas is included within the corresponding reportConfigNR for this measld:

ETSI


--- Page 204  ---


3GPP TS 38.331 version 17.0.0 Release 17
203
ETSI TS 138331 V17.0.0 (2022-05)

3> for each applicable cell which measurement results are available, include an entry in the measResultCellListSFTD-NR and set the contents as follows:
\( 4> \) set physCellld to the physical cell identity of the concerned NR neighbour cell.
\( 4> \) set sfn-OffsetResult and frameBoundaryOffsetResult to the measurement results provided by lower layers;
\( 4> \) if the reportRSRP is set to true:
\( 5> \) set \( r s r p \)-Result to the RSRP of the concerned cell derived based on SSB;
\( 1> \) else if the corresponding measObject concerns E-UTRA:
\( 2> \) if the reportSFTD-Meas is set to true within the corresponding reportConfigInterRAT for this measId:
\( 3> \) set the measResultSFTD-EUTRA in accordance with the following:
\( 4> \) set sfn-OffsetResult and frameBoundaryOffsetResult to the measurement results provided by lower layers;
\( 4> \) if the report \( R S R P \) is set to true;
\( 5> \) set rsrpResult-EUTRA to the RSRP of the EUTRA PSCell;
\( 1> \) if average uplink PDCP delay values are available:
\( 2> \) set the ul-PDCP-DelayValueResultList to include the corresponding average uplink PDCP delay values;
\( 1> \) if PDCP excess delay measurements are available:
\( 2> \) set the \( u \) /-PDCP-ExcessDelayResultList to include the corresponding PDCP excess delay measurements;
\( 1> \) if the includeCommonLocationInfo is configured in the corresponding reportConfig for this measId and detailed location information that has not been reported is available, set the content of commonLocationInfo of the locationInfo as follows:
\( 2> \) include the locationTimestamp;
\( 2> \) include the locationCoordinate, if available;
\( 2> \) include the velocityEstimate, if available;
\( 2> \) include the locationError, if available;
\( 2> \) include the locationSource, if available;
\( 2> \) if available, include the gnss-TOD-msec,
\( 1> \) if the includeWLAN-Meas is configured in the corresponding reportConfig for this measld, set the wlanLocationInfo of the locationInfo in the measResults as follows:
\( 2> \) if available, include the \( \log M e a s R e s u l t W L A N \), in order of decreasing RSSI for WLAN APs;
\( 1> \) if the includeBT-Meas is configured in the corresponding reportConfig for this measld, set the BT-LocationInfo of the locationInfo in the measResults as follows:
\( 2> \) if available, include the \( \log M e a s R e s u l t B T \), in order of decreasing RSSI for Bluetooth beacons;
\( 1> \) if the includeSensor-Meas is configured in the corresponding reportConfig for this measld, set the sensorLocationInfo of the locationInfo in the measResults as follows:
\( 2> \) if available, include the sensor-MeasurementInformation;
\( 2> \) if available, include the sensor-MotionInformation;
\( 1> \) if there is at least one applicable transmission resource pool for NR sidelink communication (for measResultsSL):

ETSI


--- Page 205  ---


3GPP TS 38.331 version 17.0.0 Release 17
204
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) set the measResultsListSL to include the CBR measurement results in accordance with the following:
3> if the reportType is set to eventTriggered:
4> include the transmission resource pools included in the poolsTriggeredList as defined within the VarMeasReportList for this measId;

3> else:
4> include the applicable transmission resource pools for which the new measurement results became available since the last periodical reporting or since the measurement was initiated or reset;
\( 3> \) if the corresponding measObject concerns NR sidelink communication, then for each transmission resource pool to be reported:
\( 4> \) set the \( s l \)-poolReportIdentity to the identity of this transmission resource pool;
4> set the \( s l \)-CBR-ResultsNR to the CBR measurement results on PSSCH and PSCCH of this transmission resource pool provided by lower layers, if available;

NOTE 1: Void.
\( 1> \) if there is at least one applicable CLI measurement resource to report:
\( 2> \) if the reportType is set to cli-EventTriggered or cli-Periodical:
3> set the measResultCLI to include the most interfering SRS resources or most interfering CLI-RSSI resources up to maxReportCLI in accordance with the following:

4> if the reportType is set to cli-EventTriggered:
\( 5> \) if trigger quantity is set to \( s r s-R S R P \) i.e. il-Threshold is set to srs-RSRP:
6> include the SRS resource included in the cli-TriggeredList as defined within the VarMeasReportList for this measId;
\( 5> \) if trigger quantity is set to cli-RSSI i.e il-Threshold is set to cli-RSSI:
\( 6> \) include the CLI-RSSI resource included in the cli-TriggeredList as defined within the VarMeasReportList for this measId;
\( 4> \) else:
\( 5> \) if reportQuantity \( C L I \) is set to srs-rsrp:
6> include the applicable SRS resources for which the new measurement results became available since the last periodical reporting or since the measurement was initiated or reset;

5> else:
6> include the applicable CLI-RSSI resources for which the new measurement results became available since the last periodical reporting or since the measurement was initiated or reset;

4> for each SRS resource that is included in the measResultCLI:
\( 5> \) include the srs-Resourceld;
\( 5> \) set \( s r s-R S R P \)-Result to include the layer 3 filtered measured results in decreasing order, i.e. the most interfering SRS resource is included first;

4> for each CLI-RSSI resource that is included in the measResultCLI:
\( 5> \) include the rssi-Resourceld;
\( 5> \) set \( c i t \)-RSSI-Result to include the layer 3 filtered measured results in decreasing order, i.e the most interfering CLI-RSSI resource is included first;

1> if there is at least one applicable UE Rx-Tx time difference measurement to report:

ETSI


--- Page 206  ---


3GPP TS 38.331 version 17.0.0 Release 17
205
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) set measResultRxTxTimeDiff to the latest measurement result;
Editor's note ([IoT): It is assumed (without explicit RAN2 agreements) that only the latest measurement is included in the report, e.g., no filtered measurement, no multiple measurement reports. Proponent companies for other measurement reporting can bring discussion paper in the maintenance phase.
\( 1> \) increment the numberOfReportsSent as defined within the VarMeasReportList for this measId by 1;
\( 1> \) stop the periodical reporting timer, if running;
\( 1> \) if the numberOfReportsSent as defined within the VarMeasReportList for this measId is less than the reportAmount as defined within the corresponding reportConfig for this measld:
\( 2> \) start the periodical reporting timer with the value of reportInterval as defined within the corresponding reportConfig for this measId;

1> else:
\( 2> \) if the reportType is set to periodical or cli-Periodical or rxTxPeriodical:
\( 3> \) remove the entry within the VarMeasReportList for this measId;
\( 3> \) remove this measld from the measIdList within VarMeasConfig;
\( 1> \) if the measurement reporting was configured by asl-ConfigDedicatedNR received within the
RRCConnection Reconfiguration:
\( 2> \) submit the MeasurementReport message to lower layers for transmission via SRB1, embedded in E-UTRA RRC message ULInformationTransferIRAT as specified TS 36.331 [10], clause 5.6.28;
\( 1> \) else if the UE is in (NG)EN-DC:
\( 2> \) if SRB3 is configured and the SCG is not deactivated:
3> submit the MeasurementReport message via SRB3 to lower layers for transmission, upon which the procedure ends;
\( 2> \) else:
3> submit the MeasurementReport message via E-UTRA embedded in E-UTRA RRC message ULInformationTransferMRDC as specified in TS 36.331 [10].
\( 1> \) else if the UE is in NR-DC:
\( 2> \) if the measurement configuration that triggered this measurement report is associated with the SCG:
\( 3> \) if SRB3 is configured and the SCG is not deactivated:
4> submit the MeasurementReport message via SRB3 to lower layers for transmission, upon which the procedure ends;

3> else:
4> submit the MeasurementReport message via SRB1 embedded in NR RRC message
ULInformationTransferMRDC as specified in 5.7.2a.3;
\( 2> \) else:
3> submit the MeasurementReport message via SRB1 to lower layers for transmission, upon which the procedure ends;

1> else:
\( 2> \) submit the MeasurementReport message to lower layers for transmission, upon which the procedure ends.

ETSI


--- Page 207  ---


3GPP TS 38.331 version 17.0.0 Release 17
206
ETSI TS 138331 V17.0.0 (2022-05)
5.5.5.2 Reporting of beam measurement information

For beam measurement information to be included in a measurement report the UE shall:
\( 1> \) if reportType is set to eventTriggered:
\( 2> \) consider the trigger quantity as the sorting quantity if available, otherwise RSRP as sorting quantity if available, otherwise RSRQ as sorting quantity if available, otherwise SINR as sorting quantity;
\( 1> \) if reportType is set to periodical:
\( 2> \) if a single reporting quantity is set to true in reportQuantityRS-Indexes;
\( 3> \) consider the configured single quantity as the sorting quantity;
\( 2> \) else:
\( 3> \) if rsrp is set to true;
\( 4> \) consider RSRP as the sorting quantity;
\( 3> \) else:
\( 4> \) consider RSRQ as the sorting quantity;
\( 1> \) set rsIndexResults to include up to maxNrofRS-IndexesToReport SS/PBCH block indexes or CSI-RS indexes in order of decreasing sorting quantity as follows:
\( 2> \) if the measurement information to be included is based on SS/PBCH block:
\( 3> \) include within resultsSSB-Indexes the index associated to the best beam for that SS/PBCH block sorting quantity and if absThreshSS-BlocksConsolidation is included in the VarMeasConfig for the measObject associated to the cell for which beams are to be reported, the remaining beams whose sorting quantity is above absThreshSS-BlocksConsolidation;
\( 3> \) if includeBeamMeasurements is set to true, include the SS/PBCH based measurement results for the quantities in reportQuantityRS-Indexes for each SS/PBCH block index;
\( 2> \) else if the beam measurement information to be included is based on CSI-RS:
\( 3> \) include within resultsCSI-RS-Indexes the index associated to the best beam for that CSI-RS sorting quantity and, if absThreshCSI-RS-Consolidation is included in the VarMeasConfig for the measObject associated to the cell for which beams are to be reported, the remaining beams whose sorting quantity is above absThreshCSI-RS-Consolidation;
\( 3> \) if includeBeamMeasurements is set to true, include the CSI-RS based measurement results for the quantities in reportQuantityRS-Indexes for each CSI-RS index.
5.5.5.3 Sorting of cell measurement results

The UE shall determine the sorting quantity according to parameters of the reportConfig associated with the measld that triggered the reporting:
\( 1> \) if the reportType is set to eventTriggered:
\( 2> \) for an NR cell, consider the quantity used in the aN-Threshold (for eventAl, eventA2 and eventA4) or in the a5-Threshold2 (for eventA5) or in the aN-Offset (for eventA3 and eventA6) as the sorting quantity;
\( 2> \) for an E-UTRA cell, consider the quantity used in the \( b N \)-ThresholdEUTRA as the sorting quantity;
\( 2> \) for an UTRA-FDD cell, consider the quantity used in the \( b N \)-ThresholdUTRA-FDD as the sorting quantity;
\( 2> \) for a candidate L2 U2N Relay UE, consider the y \( N \)-Threshold2-Relay as the sorting quantity;
\( 1> \) if the reportType is set to periodical:

ETSI


--- Page 208  ---


3GPP TS 38.331 version 17.0.0 Release 17
207
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) determine the sorting quantity according to reportQuantityCell for an NR cell, and according to reportQuantity for an E-UTRA cell, as below:
\( 3> \) if a single quantity is set to true:
4> consider this quantity as the sorting quantity;
3> else:
\( 4> \) if rsrp is set to true;
\( 5> \) consider RSRP as the sorting quantity;
4> else:
\( 5> \) consider RSRQ as the sorting quantity;
\( 2> \) determine the sorting quantity according to reportQuantityUTRA-FDD for UTRA-FDD cell, as below:
\( 3> \) if a single quantity is set to true:
4> consider this quantity as the sorting quantity;
3> else:
\( 4> \) consider RSCP as the sorting quantity.
\( 2> \) for a candidate L2 U2N Relay UE, consider the reportQuantityRelay as the sorting quantity;
5.5.6 Location measurement indication
5.5.6.1 General

Figure 5.5.5.1-1: Location measurement indication

The purpose of this procedure is to indicate to the network that the UE is going to start/stop location related measurements towards E-UTRA or NR (eutra-RSTD, \( n r \)-RSTD, \( n r \)-UE-RxTxTimeDiff, \( n r \)-PRS-RSRP) which require measurement gaps or start/stop detection of subframe and slot timing towards E-UTRA (eutra-FineTimingDetection) which requires measurement gaps. UE shall initiate this procedure only after successful AS security activation.

NOTE: It is a network decision to configure the measurement gap.
5.5.6.2 Initiation

The UE shall:
1> if and only if upper layers indicate to start performing location measurements towards E-UTRA or NR or start subframe and slot timing detection towards E-UTRA, and the UE requires measurement gaps for these operations while measurement gaps are either not configured or not sufficient:
\( 2> \) if preconfigured measurement gaps are configured and the UE considers that at least one of the preconfigured gaps meets the measurement gap requirements:

Editor's Note: check if Reference for TS 38.133 on measurement gap requirements is needed.

ETSI


--- Page 209  ---


3GPP TS 38.331 version 17.0.0 Release 17
208
ETSI TS 138331 V17.0.0 (2022-05)

3> trigger the lower layers to initiate the measurement gap activation request using UL MAC CE as specified in TS 38.321 [6];
\( 2> \) else:
\( 3> \) initiate the procedure to indicate start;
NOTE 1: The UE verifies the measurement gap situation only upon receiving the indication from upper layers. If at this point in time sufficient gaps are available, the UE does not initiate the procedure. Unless it receives a new indication from upper layers, the UE is only allowed to further repeat the procedure in the same PCell once per frequency of the target RAT if the provided measurement gaps are insufficient.
\( 1> \) if and only if upper layers indicate to stop performing location measurements towards E-UTRA or NR or stop subframe and slot timing detection towards E-UTRA and preConfigGapID is not activated:
\( 2> \) initiate the procedure to indicate stop.
NOTE 2: The UE may initiate the procedure to indicate stop even if it did not previously initiate the procedure to indicate start.
\( 1> \) if preConfigGapID is activated:
\( 2> \) if a request from upper layers to transmit either a new preConfigGapID or to modify the current measGapConfig is received; or
\( 2> \) if a request from upper layers indicate that the current gap is not needed:
3> trigger the lower layers to deactivate the current active measurement gap as specified in TS 38.321 [6];
5.5.6.3 Actions related to transmission of LocationMeasurementIndication message

The UE shall set the contents of LocationMeasurementIndication message as follows:
\( 1> \) if the procedure is initiated to indicate start of location related measurements:
\( 2> \) if the procedure is initiated for RSTD measurements towards E-UTRA:
3> set the measurementIndication to the eutra-RSTD according to the information received from upper layers;
\( 2> \) else if the procedure is initiated for positioning measurement towards NR:
3> set the measurementIndication to the \( n r \)-PRS-Measurement according to the information received from upper layers;
\( 1> \) else if the procedure is initiated to indicate stop of location related measurements:
\( 2> \) set the measurementIndication to the value release;
\( 1> \) if the procedure is initiated to indicate start of subframe and slot timing detection towards E-UTRA:
\( 2> \) set the measurementIndication to the value eutra-FineTimingDetection;
\( 1> \) else if the procedure is initiated to indicate stop of subframe and slot timing detection towards E-UTRA:
\( 2> \) set the measurementIndication to the value release;
1> submit the LocationMeasurementIndication message to lower layers for transmission, upon which the procedure ends.

ETSI


--- Page 210  ---


3GPP TS 38.331 version 17.0.0 Release 17
209
ETSI TS 138331 V17.0.0 (2022-05)
5.5a Logged Measurements
5.5a. 1 Logged Measurement Configuration
5.5a.1.1 General

Figure 5.5a.1.1-1: Logged measurement configuration

The purpose of this procedure is to configure the UE to perform logging of measurement results while in RRC_IDLE and RRC_INACTIVE. The procedure applies to logged measurements capable UEs that are in RRC_CONNECTED.

NOTE: NG-RAN may retrieve stored logged measurement information by means of the UE information procedure.
5.5a.1.2 Initiation

NG-RAN initiates the logged measurement configuration procedure to UE in RRC_CONNECTED by sending the LoggedMeasurementConfiguration message.
5.5a.1.3 Reception of the LoggedMeasurementConfiguration by the UE

Upon receiving the LoggedMeasurementConfiguration message the UE shall:
1> discard the logged measurement configuration as well as the logged measurement information as specified in 5.5a.2;

1> store the received loggingDuration, reportType and areaConfiguration, if included, in VarLogMeasConfig;
1> if the LoggedMeasurementConfiguration message includes plmn-IdentityList:
\( 2> \) set plmn-IdentityList in VarLogMeasReport to include the RPLMN as well as the PLMNs included in plmnIdentityList;

1> else:
\( 2> \) set plmn-IdentityList in VarLogMeasReport to include the RPLMN;
\( 1> \) store the received absoluteTimeInfo, traceReference, traceRecordingSessionRef, and \( t c e-I d \), and sigLoggedMeas Type in VarLogMeasReport;
\( 1> \) store the received \( b t \)-NameList, if included, in VarLogMeasConfig;
1> store the received wlan-NameList, if included, in VarLogMeasConfig;
1> store the received sensor-NameList, if included, in VarLogMeasConfig;
\( 1> \) start timer T330 with the timer value set to the loggingDuration;
\( 1> \) store the received earlyMeasIndication, if included, in VarLogMeasConfig;

ETSI


--- Page 211  ---


3GPP TS 38.331 version 17.0.0 Release 17
210
ETSI TS 138331 V17.0.0 (2022-05)
5.5a.1.4 T330 expiry

Upon expiry of T330 the UE shall:
1> release VarLogMeasConfig;
The UE is allowed to discard stored logged measurements, i.e. to release VarLogMeasReport, 48 hours after T330 expiry.
5.5a.2 Release of Logged Measurement Configuration
5.5a.2.1 General

The purpose of this procedure is to release the logged measurement configuration as well as the logged measurement information.
5.5a.2.2 Initiation

The UE shall initiate the procedure upon receiving a logged measurement configuration in another RAT. The UE shall also initiate the procedure upon power off or upon deregistration.

The UE shall:
\( 1> \) stop timer T330, if running;
\( 1> \) if stored, discard the logged measurement configuration as well as the logged measurement information, i.e. release the UE variables VarLogMeasConfig and VarLogMeasReport.
5.5a.3 Measurements logging
5.5a.3.1 General

This procedure specifies the logging of available measurements by a UE in RRC_IDLE and RRC_INACTIVE that has a logged measurement configuration. The actual process of logging within the UE, takes place in RRC IDLE state could continue in RRC INACT IVE state or vice versa.
5.5a.3.2 Initiation

While T330 is running and T319a is not running, the UE shall:
\( 1> \) if measurement logging is suspended:
\( 2> \) if during the last logging interval the IDC problems detected by the UE is resolved, resume measurement logging;

1> if not suspended, perform the logging in accordance with the following:
\( 2> \) if the reportType is set to periodical in the VarLogMeasConfig:
\( 3> \) if the UE is in any cell selection state (as specified in TS 38.304 [20]):
4> perform the logging at regular time intervals, as defined by the loggingInterval in the VarLogMeasConfig;
\( 3> \) if the UE is in camped normally state on an NR cell and if the RPLMN is included in plmn-IdentityList stored in VarLogMeasReport:

4> if areaConfiguration is not included in VarLogMeasConfig; or
\( 4> \) if the serving cell is part of the area indicated by areaConfig in areaConfiguration in VarLogMeasConfig:

ETSI


--- Page 212  ---


3GPP TS 38.331 version 17.0.0 Release 17
211
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) perform the logging at regular time intervals, as defined by the logging Interval in the VarLogMeasConfig;
\( 2> \) else if the reportType is set to eventTriggered, and eventType is set to outOfCoverage:
3> perform the logging at regular time intervals as defined by the loggingInterval in VarLogMeasConfig only when the UE is in any cell selection state;

3> upon transition from any cell selection state to camped normally state in NR:
4> if the RPLMN is included in plmn-IdentityList stored in VarLogMeasReport; and
4> if areaConfiguration is not included in VarLogMeasConfig or if the current camping cell is part of the area indicated by areaConfig of areaConfiguration in VarLogMeasConfig:

5> perform the logging;
\( 2> \) else if the reportType is set to eventTriggered and eventType is set to eventL1:
\( 3> \) if the UE is in camped normally state on an NR cell and if the RPLMN is included in plmn-IdentityList stored in VarLogMeasReport:

4> if areaConfiguration is not included in VarLogMeasConfig; or
4> if the serving cell is part of the area indicated by areaConfig in areaConfiguration in VarLogMeasConfig;
\( 5> \) perform the logging at regular time intervals as defined by the loggingInterval in VarLogMeasConfig only when the conditions indicated by the eventLl are met;
\( 2> \) when performing the logging:
\( 3> \) if the UE detected IDC problems during the last logging interval:
4> if measResultServCell in VarLogMeasReport is not empty:
\( 5> \) include inDeviceCoexDetected;
\( 5> \) suspend measurement logging from the next logging interval;
4> else:
\( 5> \) suspend measurement logging;
3> set the relativeTimeStamp to indicate the elapsed time since the moment at which the logged measurement configuration was received;

3> if location information became available during the last logging interval, set the content of the locationInfo as in 5.3.3.7:

3> if the UE is in any cell selection state (as specified in TS 38.304 [20]):
4> set anyCellSelectionDetected to indicate the detection of no suitable or no acceptable cell found;
4> if the reportType is set to eventTriggered in the VarLogMeasConfig; and
4> if the RPLMN at the time of entering the any cell selection state is included in plmn-IdentityList stored in VarLogMeasReport; and

4- if areaConfiguration is not included in VarLogMeasConfig or if the last suitable cell that the UE was camping on is part of the area indicated by areaConfig of areaConfiguration in VarLogMeasConfig:
\( 5> \) set the servCellldentity to indicate global cell identity of the last suitable cell that the UE was camping on;
\( 5> \) set the measResultServingCell to include the quantities of the last suitable cell the UE was camping on;

ETSI


--- Page 213  ---


3GPP TS 38.331 version 17.0.0 Release 17
212
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) else if the reportType is set to periodical in the VarLogMeasConfig:
\( 5> \) set the servCellldentity to indicate global cell identity of the last logged cell that the UE was camping on;
\( 5> \) set the measResultServingCell to include the quantities of the last logged cell the UE was camping on;
\( 3> \) else:
\( 4> \) set the servCellldentity to indicate global cell identity of the cell the UE is camping on;
\( 4> \) set the measResultServingCell to include the quantities of the cell the UE is camping on;
\( 3> \) if available, set the measResultNeighCells, in order of decreasing ranking-criterion as used for cell reselection, to include measurements of neighbouring cell that became available during the last logging interval and according to the following:

4 - include measurement results for at most 6 neighbouring cells on the NR serving frequency and for at most 3 cells per NR neighbouring frequency and for the NR neighbouring frequencies in accordance with the following:
\( 5> \) if interFreqTargetInfo is included in VarLogMeasConfig:
\( 6> \) if earlyMeasIndication is included in VarLogMeasConfig;
\( 7> \) include measurement results for NR neighbouring frequencies that are included in both interFreqTargetInfo and either in measIdleCarrierListNR or SIB4;
\( 6> \) else:
\( 7> \) include measurement results for NR neighbouring frequencies that are included in both interFreqTargetInfo and SIB4;
\( 5> \) else:
\( 6> \) if earlyMeasIndication is included in VarLogMeasConfig;
\( 7> \) include measurement results for NR neighbouring frequencies that are included in measIdleCarrierListNR or SIB4;
\( 6> \) else:
\( 7> \) include measurement results for NR neighbouring frequencies that are included in SIB4;
\( 4> \) include measurement results for at most 3 neighbours per inter-RAT frequency in accordance with the following:
\( 5> \) if earlyMeasIndication is included in VarLogMeasConfig:
\( 6> \) include measurement results for inter-RAT neighbouring frequencies that are included in measIdleCarrierListEUTRA or SIB5;
\( 5> \) else:
\( 6> \) include measurement results for inter-RAT frequencies that are included in SIB5;
4 for each neighbour cell included, include the optional fields that are available;
NOTE 1: The UE includes the latest results of the available measurements as used for cell reselection evaluation in RRC_IDLE or RRC_INACTIVE, which are performed in accordance with the performance requirements as specified in TS 38.133 [14].

NOTE 2: For logging the measurements on frequencies (indicated in measldleCarrierListNR/ measIdleCarrierListEUTRA) in the logged measurement, the qualityThreshold in measIdleConfig should not be applied, and how the UE logs the measurements on the frequencies is left to the UE implementation.

ETSI


--- Page 214  ---


3GPP TS 38.331 version 17.0.0 Release 17
213
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) when the memory reserved for the logged measurement information becomes full, stop timer T330 and perform the same actions as performed upon expiry of T330, as specified in 5.5a.1.4.
5.6 UE capabilities
5.6.1 UE capability transfer
5.6.1.1 General

This clause describes how the UE compiles and transfers its UE capability information upon receiving a UECapabilityEnquiry from the network.

Figure 5.6.1.1-1: UE capability transfer
5.6.1.2 Initiation

The network initiates the procedure to a UE in RRC_CONNECTED when it needs (additional) UE radio access capability information. The network should retrieve UE capabilities only after AS security activation. Network does not forward UE capabilities that were retrieved before AS security activation to the CN.
5.6.1.3 Reception of the UECapabilityEnquiry by the UE

The UE shall set the contents of UECapabilityInformation message as follows:
\( 1> \) if the ue-CapabilityRAT-RequestList contains a UE-CapabilityRAT-Request with rat-Type set to \( n r \) :
\( 2> \) include in the ue-CapabilityRAT-ContainerList a UE-CapabilityRAT-Container of the type UE-NRCapability and with the rat-Type set to \( n r \);
\( 2> \) include the supportedBandCombinationList, featureSets and featureSetCombinations as specified in clause 5.6.1.4;

1> if the ue-CapabilityRAT-RequestList contains a UE-CapabilityRAT-Request with rat-Type set to eutra-nr:
\( 2> \) if the UE supports (NG)EN-DC or NE-DC:
3> include in the ue-CapabilityRAT-ContainerList a UE-CapabilityRAT-Container of the type UE-MRDCCapability and with the rat-Type set to eutra-nr;

3> include the supportedBandCombinationList and featureSetCombinations as specified in clause 5.6.1.4;
\( 1> \) if the ue-CapabilityRAT-RequestList contains a UE-CapabilityRAT-Request with rat-Type set to eutra:
\( 2> \) if the UE supports E-UTRA:
3> include in the ue-CapabilityRAT-ContainerList a ue-CapabilityRAT-Container of the type UE-EUTRACapability and with the rat-Type set to eutra as specified in TS 36.331 [10], clause 5.6.3.3, according to the capabilityRequestFilter, if received;
\( 1> \) if the ue-CapabilityRAT-RequestList contains a UE-CapabilityRAT-Request with rat-Type set to utra-fdd:
\( 2> \) if the UE supports UTRA-FDD:

ETSI


--- Page 215  ---


3GPP TS 38.331 version 17.0.0 Release 17
214
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) include the UE radio access capabilities for UTRA-FDD within a ue-CapabilityRAT-Container and with the rat-Type set to utra-fdd;
\( 1> \) if the RRC message segmentation is enabled based on the field \( m c \)-SegAllowed received, and the encoded RRC message is larger than the maximum supported size of a PDCP SDU specified in TS 38.323 [5]:
\( 2> \) initiate the UL message segment transfer procedure as specified in clause 5.7 .7 ;
1> else:
\( 2> \) submit the UECapabilityInformation message to lower layers for transmission, upon which the procedure ends.
5.6.1.4 Setting band combinations, feature set combinations and feature sets supported by the UE

The UE invokes the procedures in this clause if the NR or E-UTRA network requests UE capabilities for \( n r \), eutra-nr or eutra. This procedure is invoked once per requested rat-Type (see clause 5.61 .3 for capability enquiry by the NR network; see TS 36.331 [10], clause 5.6.3.3 for capability enquiry by the E-UTRA network). The UE shall ensure that the feature set [Ds are consistent across feature sets, feature set combinations and band combinations in all three UE capability containers that the network queries with the same fields with the same values, i.e. \( U E \) CapabilityRequestFilterNR, UE-CapabilityRequestFilterCommon and fields in UECapabilityEnquiry message (i.e-requestedFreqBandsNR-MRDC, requestedCapabilityNR, eutra-nr-only flag, and requestedCapabilityCommon) as defined in TS 36.331, where applicable.

NOTE 1: Capability enquiry without frequencyBandListFilter is not supported.
NOTE 2: In EN-DC, the gNB needs the capabilities for RAT types \( n r \) and eutra-nr and it uses the featureSets in the UE-NR-Capability together with the featureSetCombinations in the UE-MRDC-Capability to determine the NR UE capabilities for the supported MRDC band combinations. Similarly, the eNB needs the capabilities for RAT types eutra and eutra-nr and it uses the featureSetsEUTRA in the UE-EUTRACapability together with the featureSetCombinations in the UE-MRDC-Capability to determine the EUTRA UE capabilities for the supported MRDC band combinations. Hence, the IDs used in the featureSets must match the IDs referred to in featureSetCombinations across all three containers. The requirement on consistency implies that there are no undefined feature sets and feature set combinations.

NOTE 3: If the UE cannot include all feature sets and feature set combinations due to message size or list size constraints, it is up to UE implementation which feature sets and feature set combinations it prioritizes.

The UE shall:
\( 1> \) compile a list of "candidate band combinations" according to the filter criteria in capabilityRequestFilterCommon (if included), only consisting of bands included in frequencyBandListFilter, and prioritized in the order of frequencyBandListFilter (i.e. first include band combinations containing the first-listed band, then include remaining band combinations containing the second-listed band, and so on), where for each band in the band combination, the parameters of the band do not exceed maxBandwidthRequestedDL, maxBandwidthRequestedUL, maxCarriersRequestedDL, maxCarriersRequestedUL, ca-BandwidthClassDLEUTRA or ca-BandwidthClassUL-EUTRA, whichever are received;
\( 1> \) for each band combination included in the list of "candidate band combinations":
\( 2> \) if the network (E-UTRA) included the eutra-nr-only field, or
\( 2> \) if the requested rat-Type is eutra:
\( 3> \) remove the NR-only band combination from the list of "candidate band combinations";
NOTE 4: The (E-UTRA) network may request capabilities for \( n r \) but indicate with the eutra-nr-only flag that the UE shall not include any NR band combinations in the UE-NR-Capability. In this case the procedural text above removes all NR-only band combinations from the candidate list and thereby also avoids inclusion of corresponding feature set combinations and feature sets below.
\( 2> \) if it is regarded as a fallback band combination with the same capabilities of another band combination included in the list of "candidate band combinations", and

ETSI


--- Page 216  ---


3GPP TS 38.331 version 17.0.0 Release 17
215
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if this fallback band combination is generated by releasing at least one SCell or uplink configuration of SCell or SUL according to TS 38.306 [26]:
\( 3> \) remove the band combination from the list of "candidate band combinations";
NOTE 5: Even if the network requests (only) capabilities for \( n r \), it may include E-UTRA band numbers in the frequencyBandListFilter to ensure that the UE includes all necessary feature sets needed for subsequently requested eutra-nr capabilities. At this point of the procedure the list of "candidate band combinations" contains all NR- and/or E-UTRA-NR band combinations that match the filter (frequencyBandListFilter) provided by the NW and that match the eutra-nr-only flag (if RAT-Type n \( r \) is requested by E-UTRA). In the following, this candidate list is used to derive the band combinations, feature set combinations and feature sets to be reported in the requested capability container.
\( 1> \) if the requested rat-Type is \( n r \) :
\( 2> \) include into supportedBandCombinationList as many NR-only band combinations as possible from the list of "candidate band combinations", starting from the first entry;

3> if srs-SwitchingTimeRequest is received:
4> if SRS carrier switching is supported;
\( 5> \) include srs-SwitchingTimesListNR for each band combination;
4> set srs-SwitchingTimeRequested to true;
\( 2> \) include, into featureSetCombinations, the feature set combinations referenced from the supported band combinations as included in supportedBandCombinationList according to the previous;
\( 2> \) compile a list of "candidate feature set combinations" referenced from the list of "candidate band combinations" excluding entries (rows in feature set combinations) with same or lower capabilities;
\( 2> \) if uplinkTxSwitchRequest is received:
3> include into supportedBandCombinationList-UplinkTxSwitch as many NR-only band combinations that supported UL TX switching as possible from the list of "candidate band combinations", starting from the first entry;

4> if srs-SwitchingTimeRequest is received:
\( 5> \) if SRS carrier switching is supported;
\( 6> \) include srs-SwitchingTimesListNR for each band combination;
\( 5> \) set srs-SwitchingTimeRequested to true;
3> include, into featureSetCombinations, the feature set combinations referenced from the supported band combinations as included in supportedBandCombinationList-UplinkTxSwitch according to the previous;

NOTE 6: This list of "candidate feature set combinations" contains the feature set combinations used for NR-only as well as E-UTRA-NR band combinations. It is used to derive a list of NR feature sets referred to from the feature set combinations in the UE-NR-Capability and from the feature set combinations in a UE-MRDC-Capability container.
\( 2> \) include into featureSets the feature sets referenced from the "candidate feature set combinations" and may exclude the feature sets with the parameters that exceed any of maxBandwidthRequestedDL, maxBandwidthRequestedUL, maxCarriersRequestedDL or maxCarriersRequestedUL, whichever are received;
\( 1> \) else, if the requested rat-Type is eutra-nr:
\( 2> \) include into supportedBandCombinationList and/or supportedBandCombinationListNEDC-Only as many E-UTRA-NR band combinations as possible from the list of "candidate band combinations", starting from the first entry;

3> if srs-SwitchingTimeRequest is received:

ETSI


--- Page 217  ---


3GPP TS 38.331 version 17.0.0 Release 17
216
ETSI TS 138331 V17.0.0 (2022-05)

\( 4- \) if SRS carrier switching is supported;
\( 5> \) include srs-SwitchingTimesListNR and srs-SwitchingTimesListEUTRA for each band combination;
4> set srs-SwitchingTimeRequested to true;
\( 2> \) include, into featureSetCombinations, the feature set combinations referenced from the supported band combinations as included in supportedBandCombinationList according to the previous;
\( 2> \) if uplinkTxSwitchRequest is received:
\( 3> \) include into supportedBandCombinationList-UplinkTxSwitch as many E-UTRA-NR band combinations that supported UL TX switching as possible from the list of "candidate band combinations", starting from the first entry;

4 if srs-SwitchingTimeRequest is received:
\( 5> \) if SRS carrier switching is supported;
6> include srs-SwitchingTimesListNR and srs-SwitchingTimesListEUTRA for each band combination;
\( 5> \) set srs-SwitchingTimeRequested to true;
\( 3> \) include, into featureSetCombinations, the feature set combinations referenced from the supported band combinations as included in supportedBandCombinationList-UplinkTxSwitch according to the previous;
\( 1> \) else (if the requested rat-Type is eutra):
\( 2> \) compile a list of "candidate feature set combinations" referenced from the list of "candidate band combinations" excluding entries (rows in feature set combinations) with same or lower capabilities;

NOTE 7: This list of "candidate feature set combinations" contains the feature set combinations used for E-UTRANR band combinations. It is used to derive a list of E-UTRA feature sets referred to from the feature set combinations in a UE-MRDC-Capability container.
\( 2> \) include into featureSetsEUTRA (in the UE-EUTRA-Capability) the feature sets referenced from the "candidate feature set combinations" and may exclude the feature sets with the parameters that exceed \( c a \) -BandwidthClassDL-EUTRA or ca-BandwidthClassUL-EUTRA, whichever are received;
\( 1> \) include the received frequencyBandListFilter in the field appliedFreqBandListFilter of the requested UE capability, except if the requested rat-Type is \( n r \) and the network included the eutra-nr-only field;
\( 1> \) if the network included ue-CapabilityEnquiryExt:
\( 2> \) include the received ue-CapabilityEnquiryExt in the field receivedFilters;

ETSI


--- Page 218  ---


3GPP TS 38.331 version 17.0.0 Release 17
217
ETSI TS 138331 V17.0.0 (2022-05)
5.6.1.5 Void
5.7 Other
5.7.1 DL information transfer
5.7.1.1 General

Figure 5.7.1.1-1: DL information transfer

The purpose of this procedure is to transfer NAS dedicated information from NG-RAN to a UE in RRC_CONNECTED or to a UE in RRC_INACTIVE during SDT, or to transfer F1-C related information from IAB Donor-CU to IAB-DU via IAB-MT in RRC_CONNECTED.
5.7.1.2 Initiation

The network initiates the DL information transfer procedure whenever there is a need to transfer NAS dedicated information, or F1-C related information. The network initiates the DL information transfer procedure by sending the DLInformationTransfer message.
5.7.1.3 Reception of the DLInformationTransfer by the UE

Upon receiving DLInformationTransfer message, the UE shall:
1> if dedicatedNAS-Message is included:
\( 2> \) forward dedicatedNAS-Message to upper layers.
\( 1> \) if referenceTimeInfo is included:
\( 2> \) calculate the reference time based on the time, referenceSFN and timeInfoType if it is included;
\( 2> \) calculate the uncertainty of the reference time based on the uncertainty, if uncertainty is included;
\( 2> \) inform upper layers of the reference time and, if uncertainty is included, of the uncertainty;
\( 2> \) ignore all further referenceTimeInfo received in SIB9, if any.
1> if sib9Fallback is included:
\( 2> \) fallback to receive referenceTimeInfo in SIB9.
\( 1> \) if \( x \) TxTimeDiff-gNB is included:
\( 2> \) calculate the propagation delay based on the UE Rx-Tx time difference measurement and the received Rx-Tx time difference measurement at the gNB ;
\( 2> \) inform upper layers of the propagation delay.
Upon receiving DLInformationTransfer message, the IAB-MT shall:
\( 1> \) if dedicatedInfoFIc is included:
\( 2> \) forward dedicatedInfoFlc to the [AB-DU.

ETSI


--- Page 219  ---


3GPP TS 38.331 version 17.0.0 Release 17
218
ETSI TS 138331 V17.0.0 (2022-05)
5.7.1a DL information transfer for MR-DC
5.7.1a. 1 General

Figure 5.7.1a.1-1: DL information transfer MR-DC

The purpose of this procedure is to transfer RRC messages from the network to the UE over SRB3 (e.g. an NR RRC reconfiguration message including reconfiguration WithSync, an E-UTRA RRC connection reconfiguration message including mobilityControllnfo, an RRC connection release message, a MobilityFromNRCommand message, or a MobilityFromEUTRACommand message) during fast MCG link recovery.
5.7.1a. 2 Initiation

The network initiates this procedure whenever there is a need to transfer an RRC message during fast MCG link recovery.
5.7.1a. 3 Actions related to reception of DLInformationTransferMRDC message

Upon receiving the DLInformationTransferMRDC, the UE shall:
\( 1> \) if the RRCReconfiguration message is included in dl-DCCH-MessageNR:
\( 2> \) perform the RRC reconfiguration procedure according to 5.3.5.3;
1> else if the RRCRelease message is included in dl-DCCH-MessageNR:
\( 2> \) perform the RRC release procedure according to 5.3.8;
1> else if the MobilityFromNRCommand message is included in the dl-DCCH-MessageNR:
\( 2> \) perform the mobility from NR procedure according to 5.4.3.3;
\( 1> \) else if the E-UTRA RRCConnectionReconfiguration message is included in dl-DCCH-MessageEUTRA:
\( 2> \) perform the RRC connection reconfiguration procedure as specified in TS 36.331 [10], clause 5.3.5.4;
1> else if the E-UTRA RRCConnectionRelease message is included in dl-DCCH-MessageEUTRA:
\( 2> \) perform the RRC connection release as specified in TS 36.331 [10], clause 5.3.8;
\( 1> \) else if the MobilityFromEUTRACommand message is included in the dl-DCCH-MessageEUTRA:
\( 2> \) perform the mobility from E-UTRA procedure as specified in TS 36.331 [10], clause 5.4.3.3;

ETSI


--- Page 220  ---


3GPP TS 38.331 version 17.0.0 Release 17
219
ETSI TS 138331 V17.0.0 (2022-05)
5.7.2 UL information transfer
5.7.2.1 General

Figure 5.7.2.1-1: UL information transfer

The purpose of this procedure is to transfer NAS dedicated information from the UE to the network, or to transfer F1-C related information from IAB-DU to IAB Donor-CU via IAB-MT in RRC CONNECTED.
5.7.2.2 Initiation

AUE in RRC_CONNECTED or a UE in RRC_INACTIVE during SDT initiates the UL information transfer procedure whenever there is a need to transfer NAS dedicated information. The UE initiates the UL information transfer procedure by sending the ULInformation Transfer message. In addition, an [AB-MT in RRC CONNECTED initiates the UL information transfer procedure whenever there is a need to transfer F1-C related information. When F1-C related information has to be transferred, the IAB-MT shall initiate the procedure only if SBR2 or split SRB2 is established.
5.7.2.3 Actions related to transmission of ULInformationTransfer message

The UE shall set the contents of the ULInformationTransfer message as follows:
\( 1> \) if the upper layer provides NAS PDU:
\( 2> \) set the dedicatedNAS-Message to include the information received from upper layers;
\( 1> \) for the IAB-MT, if there is a need to transfer F1-C related information:
\( 2> \) include the dedicatedInfoF1c;
1> submit the ULInformationTransfer message to lower layers for transmission, upon which the procedure ends.
5.7.2.4 Failure to deliver ULInformationTransfer message

The UE shall:
\( 1> \) if AS security is not started and radio link failure occurs before the successful delivery of ULInformationTransfer messages has been confirmed by lower layers; or
\( 1> \) if PDCP re-establishment or release/addition (e.g due to key refresh upon PCell or PSCell change, or RRC connection re-establishment, or failure of resume procedure initiated for SDT) occurs on an SRB on which ULInformationTransfer messages were submitted for transmission but successful delivery of these messages was not confirmed by lower layers:
\( 2> \) inform upper layers about the possible failure to deliver the information contained in the concerned ULInformationTransfer messages, unless the messages only include dedicatedInfoFlc.

ETSI


--- Page 221  ---


3GPP TS 38.331 version 17.0.0 Release 17
220
ETSI TS 138331 V17.0.0 (2022-05)
5.7.2a UL information transfer for MR-DC
5.7.2a. 1 General

Figure 5.7.2a.1-1: UL information transfer MR-DC

The purpose of this procedure is to transfer MR-DC dedicated information from the UE to the network e.g. the NR or EUTRA RRC MeasurementReport, FailureInformation, UEAssistanceInformation, RRCReconfigurationComplete or MCGFailureInformation message.
5.7.2a. 2 Initiation

A UE in RRC_CONNECTED initiates the UL information transfer for MR-DC procedure whenever there is a need to transfer MR-DC dedicated information. L.e. the procedure is not used during an RRC connection reconfiguration involving NR or E-UTRA connection reconfiguration, in which case the MR DC information is piggybacked to the RRCReconfigurationComplete message, except in the case the UE executes an intra-SN CPC.
5.7.2a. 3 Actions related to transmission of ULInformation TransferMRDC message

The UE shall set the contents of the ULInformationTransferMRDC message as follows:
\( 1> \) if there is a need to transfer MR-DC dedicated information related to NR:
\( 2> \) set the ul-DCCH-MessageNR to include the NR MR-DC dedicated information to be transferred (e.g., NR RRC MeasurementReport, UEAssistanceInformation, FailureInformation, RRCReconfigurationComplete or MCGFailureInformation message);
\( 1> \) else if there is a need to transfer MR-DC dedicated information related to E-UTRA:
\( 2> \) set the u-DCCH-MessageEUTRA to include the E-UTRA MR-DC dedicated information to be transferred (e.g., E-UTRA RRC MeasurementReport, or MCGFailureInformation message);

1> submit the ULInformationTransferMRDC message to lower layers for transmission, upon which the procedure ends.
5.7.2b UL transfer of IRAT information
5.7.2b. 1 General

Figure 5.7.2b.1-1: UL transfer of IRAT information

The purpose of this procedure is to transfer from the UE to NR MCG dedicated information terminated at the NR MCG but specified by another RAT e.g. the E-UTRA MeasurementReport message, the E-UTRA SidelinkUEInformation

ETSI


--- Page 222  ---


3GPP TS 38.331 version 17.0.0 Release 17
221
ETSI TS 138331 V17.0.0 (2022-05)

message or the E-UTRA UEAssistanceInformation message. The specific information transferred in this message is set in accordance with:
- the procedure specified in 5.6.10 of TS 36.331 [10] for E-UTRA UEAssistanceInformation message;
- the procedure specified in 5.10 .2 of TS 36.331 [10] for E-UTRA SidelinkUEInformation message;
- the procedure specified in 5.5.5 of TS 36.331 [10] for E-UTRA MeasurementReport Message.
5.7.2b. 2 Initiation

A UE in RRC_CONNECTED initiates the UL information transfer procedure whenever there is a need to transfer dedicated inter-RAT information as specified in TS 36.331 [10].
5.7.2b. 3 Actions related to transmission of ULInformation TransferIRAT message

The UE shall set the contents of the ULInformationTransferIRAT message as follows:
1> if there is a need to transfer dedicated LTE information related to V2X sidelink communications:
\( 2> \) set the ul-DCCH-MessageEUTRA to include the V2X sidelink communication information to be transferred (e.g. the E-UTRA RRC MeasurementReport message, the E-UTRA RRC SidelinkUEInformation message, or the E-UTRA RRC UEAssistanceInformation message);

1> submit the ULInformationTransferIRAT message to lower layers for transmission, upon which the procedure ends;
5.7.3 SCG failure information
5.7.3.1 General

Figure 5.7.3.1-1: SCG failure information

The purpose of this procedure is to inform E-UTRAN or NR MN about an SCG failure the UE has experienced i.e. SCG radio link failure, failure of SCG reconfiguration with sync, SCG configuration failure for RRC message on SRB3, SCG integrity check failure, and consistent uplink LBT failures on PSCell for operation with shared spectrum channel access.
5.7.3.2 Initiation

A UE initiates the procedure to report SCG failures when neither MCG nor SCG transmission is suspended and when one of the following conditions is met:
\( 1> \) upon detecting radio link failure for the SCG, in accordance with clause 5.3.10.3;
1> upon detecting beam failure of the PSCell while the SCG is deactivated, in accordance with TS 38.321[3];
\( 1> \) upon reconfiguration with sync failure of the SCG, in accordance with clause 5.3.5.8.3;
\( 1> \) upon SCG configuration failure, in accordance with clause 5.3.5.8.2;
1> upon integrity check failure indication from SCG lower layers concerning SRB3.

ETSI


--- Page 223  ---


3GPP TS 38.331 version 17.0.0 Release 17
222
ETSI TS 138331 V17.0.0 (2022-05)

Upon initiating the procedure, the UE shall:
\( 1> \) if the procedure was not initiated due to beam failure of the PSCell while the SCG is deactivated:
\( 2> \) suspend SCG transmission for all SRBs, DRBs and, if any, BH RLC channels;
\( 2> \) reset SCG MAC;
1> stop T304 for the SCG, if running;
\( 1> \) stop conditional reconfiguration evaluation for CPC, if configured;
\( 1> \) if the UE is in (NG)EN-DC:
\( 2> \) initiate transmission of the SCGFailureInformationNR message as specified in TS 36.331 [10], clause 5.6.13a.

1> else:
\( 2> \) initiate transmission of the SCGFailureInformation message in accordance with 5.7.3.5.
5.7.3.3 Failure type determination for (NG)EN-DC

The UE shall set the SCG failure type as follows:
1> if the UE initiates transmission of the SCGFailureInformationNR message due to T310 expiry:
\( 2> \) set the failureType as t310-Expiry;
1> else if the UE initiates transmission of the SCGFailureInformationNR message due to T312 expiry:
\( 2> \) set the failureType as any value and set the failureType-v1610 as t312-Expiry;
\( 1> \) else if the UE initiates transmission of the SCGFailureInformationNR message to provide reconfiguration with sync failure information for an SCG:
\( 2> \) set the failureType as synchReconfigFailureSCG;
1> else if the UE initiates transmission of the SCGFailureInformationNR message to provide random access problem indication from SCG MAC:
\( 2> \) if the random access procedure was initiated for beam failure recovery:
3> set the failureType as randomAccessProblem and set the failureType-v1610 as beamFailureRecoveryFailure;
\( 2> \) else:
3> set the failureType as randomAccessProblem;
1> else if the UE initiates transmission of the SCGFailureInformationNR message to provide indication from SCG RLC that the maximum number of retransmissions has been reached:
\( 2> \) set the failureType as ric-MaxNumRetx;
1> else if the UE initiates transmission of the SCGFailureInformationNR message due to SRB3 integrity check failure:
\( 2> \) set the failureType as srb3-IntegrityFailure;
\( 1> \) else if the UE initiates transmission of the SCGFailureInformationNR message due to Reconfiguration failure of NR RRC reconfiguration message:
\( 2> \) set the failureType as scg-reconfigFailure;
\( 1> \) else if the UE initiates transmission of the SCGFailurelnformationNR message due to consistent uplink LBT failures:

ETSI


--- Page 224  ---


3GPP TS 38.331 version 17.0.0 Release 17
223
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) set the failureType as any value and set the failureType-v1610 as scg-IbtFailure;
\( 1> \) else if connected as an \( [\mathrm{AB} \)-node and the SCGFailurelnformationNR is initiated due to the reception of a BH
RLF indication on BAP entity from the SCG:
\( 2> \) set the failure Type as any value and set failureType-v1610 as bh-RLF.
\( 1> \) else if the UE initiates transmission of the SCGFailurelnformationNR message due to beam failure of the PSCell while the SCG is deactivated:
\( 2> \) set the failureType as any value and set failureType-v 1610 as beamFailure
5.7.3.4 Setting the contents of MeasResultSCG-Failure

The UE shall set the contents of the MeasResultSCG-Failure as follows:
\( 1> \) for each MeasObjectNR configured on NR SCG for which a measld is configured and measurement results are available:
\( 2> \) include an entry in measResultPerMOList;
\( 2> \) if there is a measld configured with the MeasObjectNR and a reportConfig which has rsType set to ssb:
\( 3> \) set ssbFrequency to the value indicated by ssbFrequency as included in the MeasObjectNR;
\( 2> \) if there is a measld configured with the MeasObjectNR and a reportConfig which has rsType set to csi-rs:
\( 3> \) set refFreqCSI-RS to the value indicated by refFreqCSI-RS as included in the associated measurement object;
\( 2> \) if a serving cell is associated with the MeasObjectNR:
\( 3> \) set measResultServingCell to include the available quantities of the concerned cell and in accordance with the performance requirements in TS 38.133 [14];
\( 2> \) set the measResultNeighCellList to include the best measured cells, ordered such that the best cell is listed first, and based on measurements collected up to the moment the UE detected the failure, and set its fields as follows;
\( 3> \) ordering the cells with sorting as follows:
\( 4> \) based on SS/PBCH block if SS/PBCH block measurement results are available and otherwise based on CSI-RS;

4 using RSRP if RSRP measurement results are available, otherwise using RSRQ if RSRQ measurement results are available, otherwise using SINR;
\( 3> \) for each neighbour cell included:
\( 4> \) include the optional fields that are available.
NOTE: The measured quantities are filtered by the L3 filter as configured in the mobility measurement configuration. The measurements are based on the time domain measurement resource restriction, if configured. Exclude-listed cells are not required to be reported.
\( 2> \) if available, set the locationInfo as in 5.3.3.7.:
5.7.3.5 Actions related to transmission of SCGFailureInformation message

The UE shall set the contents of the SCGFailurelnformation message as follows:
\( 1> \) if the UE initiates transmission of the SCGFailurelnformation message due to T310 expiry:
\( 2> \) set the failure Type as 1310 -Expiry;
\( 1> \) else if the UE initiates transmission of the SCGFailurelnformation message due to T312 expiry:

ETSI


--- Page 225  ---


3GPP TS 38.331 version 17.0.0 Release 17
224
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) set the failureType as other and set the failureType-vl610 as t312-Expiry;
\( 1> \) else if the UE initiates transmission of the SCGFailureInformation message to provide reconfiguration with sync failure information for an SCG:
\( 2> \) set the failureType as synchReconfigFailureSCG;
1> else if the UE initiates transmission of the SCGFailureInformation message to provide random access problem indication from SCG MAC:
\( 2> \) if the random access procedure was initiated for beam failure recovery:
\( 3> \) set the failureType as other and set the failureType-v 1610 as beamFailureRecoveryFailure;
\( 2> \) else:
\( 3> \) set the failure Type as randomAccessProblem;
1> else if the UE initiates transmission of the SCGFailurelnformation message to provide indication from SCG RLC that the maximum number of retransmissions has been reached:
\( 2> \) set the failureType as Nc-MaxNumRetx;
\( 1> \) else if the UE initiates transmission of the SCGFailurelnformation message due to SRB3 [P check failure:
\( 2> \) set the failureType as srb3-IntegrityFailure;
\( 1> \) else if the UE initiates transmission of the SCGFailurelnformation message due to Reconfiguration failure of NR RRC reconfiguration message:
\( 2> \) set the failureType as scg-reconfigFailure;
1> else if the UE initiates transmission of the SCGFailurelnformation message due to consistent uplink LBT failures:
\( 2> \) set the failureType as other and set the failureType-v 1610 as scg-IbtFailure;
1> else if connected as an [AB-node and the SCGFailurelnformation is initiated due to the reception of a BH RLF indication on BAP entity from the SCG:
\( 2> \) set the failureType as other and set failureType-vl610 as bh-RLF;
\( 1> \) include and set MeasResultSCG-Failure in accordance with 5.7.3.4;
\( 1> \) for each MeasObjectNR configured by a MeasConfig associated with the MCG, and for which measurement results are available:
\( 2> \) include an entry in measResultFreqList;
\( 2> \) if there is a measld configured with the MeasObjectNR and a reportConfig which has rsType set to ssb:
\( 3> \) set ssbFrequency in measResultFreqList to the value indicated by ssbFrequency as included in the MeasObjectNR;
\( 2> \) if there is a measld configured with the MeasObjectNR and a reportConfig which has rs Type set to csi-rs:
\( 3> \) set refFreqCSI-RS in measResultFreqList to the value indicated by refFreqCSI-RS as included in the associated measurement object;
\( 2> \) if a serving cell is associated with the MeasObjectNR:
\( 3> \) set measResultServingCell in measResultFreqList to include the available quantities of the concerned cell and in accordance with the performance requirements in TS 38.133 [14];
\( 2> \) set the measResultNeighCellList in measResultFreqList to include the best measured cells, ordered such that the best cell is listed first, and based on measurements collected up to the moment the UE detected the failure, and set its fields as follows;

ETSI


--- Page 226  ---


3GPP TS 38.331 version 17.0.0 Release 17
225
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) ordering the cells with sorting as follows:
\( 4> \) based on SS/PBCH block if SS/PBCH block measurement results are available and otherwise based on CSI-RS;

4 - using RSRP if RSRP measurement results are available, otherwise using RSRQ if RSRQ measurement results are available, otherwise using SINR;

3> for each neighbour cell included:
\( 4> \) include the optional fields that are available.
NOTE 1: The measured quantities are filtered by the L3 filter as configured in the mobility measurement configuration. The measurements are based on the time domain measurement resource restriction, if configured. Exclude-listed cells are not required to be reported.

NOTE 2: Field measResultSCG-Failure is used to report available results for NR frequencies the UE is configured to measure by SCG RRC signalling.
\( 1> \) if available, set the locationInfo as in 5.3.3.7.
1> if the UE supports SCG failure for mobility robustness optimization:
\( 2> \) if the failureType is set to synchReconfigFailureSCG; or
\( 2> \) if the failureType is set to randomAccessProblem and the SCG failure was declared while T304 was running:
\( 3> \) set perRAInfoList to indicate the performed random access procedure related information as specified in 5.7.10.5.

3> set the failedPSCellld to the physical cell identity and carrier frequency of the target PSCell of the failed PSCell change;

3> set the previousPSCellld to the physical cell identity and carrier frequency of the source PSCell where the last RRCReconfiguration message including reconfigurationWithSync for the SCG was received;

3> set the timeSCGFailure to the elapsed time since reception of the last RRCReconfiguration message including the reconfigurationWithSync for the SCG;
\( 2> \) else:
3> set the failedPSCellld to the physical cell identity and carrier frequency of the PSCell in which the SCG failure was declared;

3> if the last RRCReconfiguration message including the reconfigurationWithSync for the SCG was received to enter the PSCell in which the SCG failure was declared:

4> set the timeSCGFailure to the elapsed time since reception of the last RRCReconfiguration message including the reconfigurationWithSync for the SCG;
\( 4> \) set the previousPSCellId to the physical cell identity and carrier frequency of the PSCell where the last RRCReconfiguration message including reconfigurationWithSync for the SCG was received;

The UE shall submit the SCGFailureInformation message to lower layers for transmission.

ETSI


--- Page 227  ---


3GPP TS 38.331 version 17.0.0 Release 17
226
ETSI TS 138331 V17.0.0 (2022-05)
5.7.3a EUTRA SCG failure information
5.7.3a.1 General

Figure 5.7.3a.1-1: EUTRA SCG failure information

The purpose of this procedure is to inform NR MN about an SCG failure on E-UTRA SN the UE has experienced (e.g. SCG radio link failure, SCG change failure), as specified in TS 36.331 [10] clause 5.6.13.2.
5.7.3a. 2 Initiation

A UE initiates the procedure to report EUTRA SCG failures when neither NR MCG nor EUTRA SCG transmission is suspended and in accordance with TS 36.331 [10] clause 5.6.13.2. Actions the UE shall perform upon initiating the procedure, other than related to the transmission of the SCGFailureInformationEUTRA message are specified in TS 36.331 [10] clause 5.6.13.2.
5.7.3a.3 Actions related to transmission of SCGFailurelnformationEUTRA message

The UE shall set the contents of the SCGFailureInformationEUTRA message as follows:
1> include failureType within failureReportSCG-EUTRA and set it to indicate the SCG failure in accordance with TS 36.331 [10] clause 5.6.13.4;
\( 1> \) include and set measResultSCG-FailureMRDC in accordance with TS 36.331 [10] clause 5.6.13.5;
\( 1> \) for each EUTRA frequency the UE is configured to measure by measConfig for which measurement results are available:
\( 2> \) set the measResultFreqListMRDC to include the best measured cells, ordered such that the best cell is listed first using RSRP to order if RSRP measurement results are available for cells on this frequency, otherwise using RSRQ to order if RSRQ measurement results are available for cells on this frequency, otherwise using SINR to order, and based on measurements collected up to the moment the UE detected the failure, and for each cell that is included, include the optional fields that are available;

NOTE: Field measResultSCG-FailureMRDC is used to report available results for E-UTRAN frequencies the UE is configured to measure by E-UTRA RRC signalling.
\( 1> \) if available, set the locationInfo as in 5.3.3.7.:
The UE shall submit the SCGFailureInformationEUTRA message to lower layers for transmission.

ETSI


--- Page 228  ---


3GPP TS 38.331 version 17.0.0 Release 17
227
ETSI TS 138331 V17.0.0 (2022-05)
5.7.3b MCG failure information
5.7.3b.1 General

Figure 5.7.3b.1-1: MCG failure information

The purpose of this procedure is to inform the network about an MCG failure the UE has experienced i.e. MCG radio link failure. A UE in RRC_CONNECTED, for which AS security has been activated with SRB2 and at least one DRB or multicast MRB setup or, for IAB, SRB2, may initiate the fast MCG link recovery procedure in order to continue the RRC connection without re-establishment.
5.7.3b. 2 Initiation

A UE configured with split SRB1 or SRB3 initiates the procedure to report MCG failures when neither MCG nor SCG transmission is suspended, the SCG is not deactivated, \( t 316 \) is configured, and when the following condition is met:
\( 1> \) upon detecting radio link failure of the MCG, in accordance with 5.3.10.3, while T316 is not running.
Upon initiating the procedure, the UE shall:
1> stop timer T310 for the PCell, if running;
1> stop timer T312 for the PCell, if running;
\( 1> \) suspend MCG transmission for all SRBs, DRBs, multicast MRBs, except SRB0, and, if any, BH RLC channels;
\( 1> \) reset MCG MAC;
\( 1> \) stop conditional reconfiguration evaluation for CHO , if configured;
\( 1> \) stop conditional reconfiguration evaluation for CPC, if configured;
1> initiate transmission of the MCGFailureInformation message in accordance with 5.7.3b.4.
NOTE: The handling of any outstanding UL RRC messages during the initiation of the fast MCG link recovery is left to UE implementation.
5.7.3b. 3 Failure type determination

The UE shall set the MCG failure type as follows:
1> if the UE initiates transmission of the MCGFailureInformation message due to T310 expiry:
\( 2> \) set the failureType as t310-Expiry;
1> else if the UE initiates transmission of the MCGFailureInformation message due to T312 expiry:
\( 2> \) set the failureType as t312-Expiry;
1> else if the UE initiates transmission of the MCGFailureInformation message to provide random access problem indication from MCG MAC:
\( 2> \) if the random access procedure was initiated for beam failure recovery:

ETSI


--- Page 229  ---


3GPP TS 38.331 version 17.0.0 Release 17
228
ETSI TS 138331 V17.0.0 (2022-05)

3> set the failureType as beamFailureRecoveryFailure;
\( 2> \) else:
3> set the failureType as randomAccessProblem;
1> else if the UE initiates transmission of the MCGFailurelnformation message to provide indication from MCG RLC that the maximum number of retransmissions has been reached:
\( 2> \) set the failureType as ric-MaxNumRetx:
1> else if the UE initiates transmission of the MCGFailureInformation message due to consistent uplink LBT failures on the MCG:
\( 2> \) set the failureType as Ibt-Failure;
1> else if connected as an IAB-node and the MCGFailureInformation message is initiated due to the reception of a BH RLF indication on BAP entity from the MCG:
\( 2> \) set the failureType as bh-RLF.
5.7.3b.4 Actions related to transmission of MCGFailurelnformation message

The UE shall set the contents of the MCGFailureInformation message as follows:
\( 1> \) include and set failureType in accordance with 5.7.3b.3;
1> for each MeasObjectNR configured by a measConfig associated with the MCG, and for which measurement results are available:
\( 2> \) include an entry in measResultFreqList;
\( 2> \) if there is a measld configured with the MeasObjectNR and a reportConfig which has rsType set to ssb:
\( 3> \) set ssbFrequency in measResultFreqList to the value indicated by ssbFrequency as included in the MeasObjectNR;
\( 2> \) if there is a measId configured with the MeasObjectNR and a reportConfig which has rsType set to csi-rs:
3> set refFreqCSI-RS in measResultFreqList to the value indicated by refFreqCSI-RS as included in the associated measurement object;
\( 2> \) if a serving cell is associated with the MeasObjectNR:
3> set measResultServingCell in measResultFreqList to include the available quantities of the concerned cell and in accordance with the performance requirements in TS 38.133 [14];

2> set the measResultNeighCellList in measResultFreqList to include the best measured cells, ordered such that the best cell is listed first, and based on measurements collected up to the moment the UE detected the failure, and set its fields as follows;
\( 3> \) ordering the cells with sorting as follows:
\( 4> \) based on SS/PBCH block if SS/PBCH block measurement results are available and otherwise based on CSI-RS;
\( 4> \) using RSRP if RSRP measurement results are available, otherwise using RSRQ if RSRQ measurement results are available, otherwise using SINR;

3> for each neighbour cell included:
\( 4> \) include the optional fields that are available.
1> for each EUTRA frequency the UE is configured to measure by measConfig for which measurement results are available:

ETSI


--- Page 230  ---


3GPP TS 38.331 version 17.0.0 Release 17
229
ETSI TS 138331 V17.0.0 (2022-05)

2> set the measResultFreqListEUTRA to include the best measured cells, ordered such that the best cell is listed first using RSRP to order the cells if RSRP measurement results are available for cells on this frequency, otherwise using RSRQ to order the cells if RSRQ measurement results are available for cells on this frequency, otherwise using SINR to order the cells, based on measurements collected up to the moment the UE detected the failure, and for each cell that is included, include the optional fields that are available;

1> for each UTRA-FDD frequency the UE is configured to measure by measConfig for which measurement results are available:
\( 2> \) set the measResultFreqListUTRA-FDD to include the best measured cells, ordered such that the best cell is listed first using RSCP to order the cells if RSCP measurement results are available for cells on this frequency, otherwise using EcN0 to order the cells, based on measurements collected up to the moment the UE detected the failure, and for each cell that is included, include the optional fields that are available;

1> if the UE is in NR-DC:
\( 2> \) include and set measResultSCG in accordance with 5.7.3.4;
1> if the UE is in NE-DC:
\( 2> \) include and set measResultSCG-EUTRA in accordance with TS 36.331 [10] clause 5.6.13.5;
NOTE 1: The measured quantities are filtered by the L3 filter as configured in the mobility measurement configuration. The measurements are based on the time domain measurement resource restriction, if configured. Exclude-listed cells are not required to be reported.

NOTE 2: Field measResultSCG-Failure is used to report available results for NR frequencies the UE is configured to measure by SCG RRC signalling.

NOTE 3: Field measResultSCG-EUTRA is used to report available results for E-UTRAN frequencies the UE is configured to measure by E-UTRA RRC signalling.
\( 1> \) if SRB1 is configured as split SRB and pdcp-Duplication is not configured:
\( 2> \) if the primaryPath for the PDCP entity of SRB1 refers to the MCG:
\( 3> \) set the primaryPath to refer to the SCG.
The UE shall:
\( 1> \) start timer T316;
\( 1> \) if SRB1 is configured as split SRB:
2> submit the MCGFailureInformation message to lower layers for transmission via SRB1, upon which the procedure ends;
\( 1> \) else (i.e. SRB3 configured):
\( 2> \) submit the MCGFailureInformation message to lower layers for transmission embedded in NR RRC message ULInformationTransferMRDC via SRB3 as specified in 5.7.2a.3.
5.7.3b.5 T316 expiry

The UE shall:
1> if T316 expires:
\( 2> \) initiate the connection re-establishment procedure as specified in 5.3.7.

ETSI


--- Page 231  ---


3GPP TS 38.331 version 17.0.0 Release 17
230
ETSI TS 138331 V17.0.0 (2022-05)
5.7.4 UE Assistance Information
5.7.4.1 General

Figure 5.7.4.1-1: UE Assistance Information

The purpose of this procedure is for the UE to inform the network of:
- its delay budget report carrying desired increment/decrement in the connected mode DRX cycle length, or;
- its overheating assistance information, or;
- its IDC assistance information, or;
- its preference on DRX parameters for power saving, or;
- its preference on the maximum aggregated bandwidth for power saving, or;
- its preference on the maximum number of secondary component carriers for power saving, or;
- its preference on the maximum number of MIMO layers for power saving, or;
- its preference on the minimum scheduling offset for cross-slot scheduling for power saving, or;
- its preference on the RRC state, or;
- configured grant assistance information for NR sidelink communication, or;
- its preference in being provisioned with reference time information, or;
- its preference for FR2 UL gap, or;
- its preference to transition out of RRC_CONNECTED state for MUSIM operation, or;
- its preference on the MUSIM gaps, or;
- its relaxation state for RLM measurements, or;
- its relaxation state for BFD measurements, or;
- availability of data mapped to radio bearers which are not configured for SDT, or;
- its preference for the SCG to be deactivated, or;
- indicate that the UE has uplink data to transmit for a DRB for which there is no MCG RLC bearer while the SCG is deactivated, or;
- change of its fulfilment status for RRM measurement relaxation criterion.
5.7.4.2 Initiation

A UE capable of providing delay budget report in RRC_CONNECTED may initiate the procedure in several cases, including upon being configured to provide delay budget report and upon change of delay budget preference.

ETSI


--- Page 232  ---


3GPP TS 38.331 version 17.0.0 Release 17
231
ETSI TS 138331 V17.0.0 (2022-05)

A UE capable of providing overheating assistance information in RRC_CONNECTED may initiate the procedure if it was configured to do so, upon detecting internal overheating, or upon detecting that it is no longer experiencing an overheating condition.

A UE capable of providing IDC assistance information in RRC_CONNECTED may initiate the procedure if it was configured to do so, upon detecting IDC problem if the UE did not transmit an IDC assistance information since it was configured to provide IDC indications, or upon change of IDC problem information.

A UE capable of providing its preference on DRX parameters of a cell group for power saving in RRC_CONNECTED may initiate the procedure in several cases, if it was configured to do so, including upon having a preference on DRX parameters and upon change of its preference on DRX parameters.

A UE capable of providing its preference on the maximum aggregated bandwidth of a cell group for power saving in RRC_CONNECTED may initiate the procedure in several cases, if it was configured to do so, including upon having a maximum aggregated bandwidth preference and upon change of its maximum aggregated bandwidth preference.

A UE capable of providing its preference on the maximum number of secondary component carriers of a cell group for power saving in RRC_CONNECTED may initiate the procedure in several cases, if it was configured to do so, including upon having a maximum number of secondary component carriers preference and upon change of its maximum number of secondary component carriers preference.

A UE capable of providing its preference on the maximum number of MIMO layers of a cell group for power saving in RRC_CONNECTED may initiate the procedure in several cases, if it was configured to do so, including upon having a maximum number of MIMO layers preference and upon change of its maximum number of MIMO layers preference.

A UE capable of providing its preference on the minimum scheduling offset for cross-slot scheduling of a cell group for power saving in RRC_CONNECTED may initiate the procedure in several cases, if it was configured to do so, including upon having a minimum scheduling offset preference and upon change of its minimum scheduling offset preference.

A UE capable of providing assistance information to transition out of RRC_CONNECTED state may initiate the procedure if it was configured to do so, upon determining that it prefers to transition out of RRC_CONNECTED state, or upon change of its preferred RRC state.

A UE capable of providing configured grant assistance information for NR sidelink communication in RRC_CONNECTED may initiate the procedure in several cases, including upon being configured to provide traffic pattern information and upon change of traffic patterns.

A UE capable of providing an indication of its preference in being provisioned with reference time information may initiate the procedure upon being configured to provide this indication, or if it was configured to provide this indication and upon change of its preference.

A UE capable of providing an indication of its preference in FR2 UL gap may initiate the procedure if it was configured to do so, upon detecting the need of FR2 UL gap activation/deactivation.

A UE capable of providing MUSIM assistance information may initiate the procedure if it was configured to do so, upon determining that it needs to leave RRC_CONNECTED state, or upon determining it needs the gaps, or upon change of the gap information without leaving RRC_CONNECTED state.

A UE capable of relaxing its RLM measurements of a cell group in RRC_CONNECTED state shall initiate the procedure for providing an indication of its relaxation state for RLM measurements upon being configured to do so, and upon change of its relaxation state for RLM measurements in RRC_CONNECTED state.

A UE capable of relaxing its BFD measurements in serving cells of a cell group in RRC_CONNECTED shall initiate the procedure for providing an indication of its relaxation state for BFD measurements upon being configured to do so, and upon change of its relaxation state for BFD measurements in RRC_CONNECTED state.

Editor's NOTE: How to / whether to limit or remove impact of prohibit timer w.r.t. consistency between UE relaxation state and the corresponding knowledge at gNB.

A UE capable of SDT initiates this procedure when data and/or signalling mapped to radio bearers that are not configured for SDT becomes available during SDT (i.e while T319a is running).

A UE capable of providing its preference for SCG deactivation may initiate the procedure if it was configured to do so, upon determining that it prefers or does no more prefer the SCG to be deactivated.

ETSI


--- Page 233  ---


3GPP TS 38.331 version 17.0.0 Release 17
232
ETSI TS 138331 V17.0.0 (2022-05)

A UE capable of providing an indication of fulfilment of the RRM measurement relaxation criterion in connected mode may initiate the procedure upon change of its fulfilment status for RRM measurement relaxation criterion for connected mode.

Upon initiating the procedure, the UE shall:
1> if configured to provide delay budget report:
\( 2> \) if the UE did not transmit a UEAssistancelnformation message with delayBudgetReport since it was configured to provide delay budget report; or
\( 2> \) if the current delay budget is different from the one indicated in the last transmission of the UEAssistanceInformation message including delayBudgetReport and timer T342 is not running:

3> start or restart timer T342 with the timer value set to the delayBudgetReportingProhibitTimer;
\( 3> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide a delay budget report;

1> if configured to provide overheating assistance information:
\( 2> \) if the overheating condition has been detected and T345 is not running; or
\( 2> \) if the current overheating assistance information is different from the one indicated in the last transmission of the UEAssistanceInformation message including overheatingAssistance and timer T345 is not running:
\( 3> \) start timer T345 with the timer value set to the overheatingIndication ProhibitTimer;
3> initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide overheating assistance information;
\( 1> \) if configured to provide IDC assistance information:
\( 2> \) if the UE did not transmit a UEAssistanceInformation message with idc-Assistance since it was configured to provide IDC assistance information:
\( 3> \) if on one or more frequencies included in candidateServingFreqListNR, the UE is experiencing IDC problems that it cannot solve by itself; or

3> if on one or more supported UL CA combination comprising of carrier frequencies included in candidateServingFreqListNR, the UE is experiencing IDC problems that it cannot solve by itself:
\( 4> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide IDC assistance information;
\( 2> \) else if the current IDC assistance information is different from the one indicated in the last transmission of the UEAssistanceInformation message:
\( 3> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide IDC assistance information;

NOTE 1: The term "IDC problems" refers to interference issues applicable across several subframes/slots where not necessarily all the subframes/slots are affected.

NOTE 2: For the frequencies on which a serving cell or serving cells is configured that is activated, IDC problems consist of interference issues that the UE cannot solve by itself, during either active data exchange or upcoming data activity which is expected in up to a few hundred milliseconds.
For frequencies on which a SCell or SCells is configured that is deactivated, reporting IDC problems indicates an anticipation that the activation of the SCell or SCells would result in interference issues that the UE would not be able to solve by itself.
For a non-serving frequency, reporting IDC problems indicates an anticipation that if the non-serving frequency or frequencies became a serving frequency or serving frequencies then this would result in interference issues that the UE would not be able to solve by itself.
\( 1> \) if configured to provide its preference on DRX parameters of a cell group for power saving:

ETSI


--- Page 234  ---


3GPP TS 38.331 version 17.0.0 Release 17
233
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the UE has a preference on DRX parameters of the cell group and the UE did not transmit a UEAssistanceInformation message with drx-Preference for the cell group since it was configured to provide its preference on DRX parameters of the cell group for power saving; or
\( 2> \) if the current \( d r x \)-Preference information for the cell group is different from the one indicated in the last transmission of the UEAssistanceInformation message including \( d r x \)-Preference for the cell group and timer T346a associated with the cell group is not running:

3> start the timer T346a with the timer value set to the drx-PreferenceProhibitTimer of the cell group;
\( 3> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7.4.3 to provide the current dræ-Preference;
\( 1> \) if configured to provide its preference on the maximum aggregated band width of a cell group for power saving:
\( 2> \) if the UE has a preference on the maximum aggregated bandwidth of the cell group and the UE did not transmit a UEAssistanceInformation message with maxBW-Preference and/or maxBW-PreferenceFR2-2 for the cell group since it was configured to provide its preference on the maximum aggregated bandwidth of the cell group for power saving; or
\( 2> \) if the current maxBW-Preference information for the cell group is different from the one indicated in the last transmission of the UEAssistanceInformation message including maxBW-Preference and/or maxBW-PreferenceFR2-2for the cell group and timer T346b associated with the cell group is not running:

3> start the timer T346b with the timer value set to the maxBW-PreferenceProhibitTimer of the cell group;
\( 3> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7 .4 .3 to provide the current maxB W-Preference and/or maxB W-PreferenceFR2-2;

1> if configured to provide its preference on the maximum number of secondary component carriers of a cell group for power saving:

2 if the UE has a preference on the maximum number of secondary component carriers of the cell group and the UE did not transmit a UEAssistanceInformation message with maxCC-Preference for the cell group since it was configured to provide its preference on the maximum number of secondary component carriers of the cell group for power saving; or
\( 2> \) if the current maxCC-Preference information for the cell group is different from the one indicated in the last transmission of the UEAssistanceInformation message including maxCC-Preference for the cell group and timer T346c associated with the cell group is not running:

3> start the timer T346c with the timer value set to the maxCC-PreferenceProhibitTimer of the cell group;
\( 3> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7.4.3 to provide the current maxCC-Preference;
\( 1> \) if configured to provide its preference on the maximum number of MIMO layers of a cell group for power saving:
\( 2> \) if the UE has a preference on the maximum number of MIMO layers of the cell group and the UE did not transmit a UEAssistancelnformation message with maxMIMO-LayerPreference and/or maxMIMO-LayerPreferenceFR2-2 for the cell group since it was configured to provide its preference on the maximum number of MIMO layers of the cell group for power saving; or
\( 2> \) if the current maxMIMO-LayerPreference information for the cell group is different from the one indicated in the last transmission of the UEAssistanceInformation message including maxMIMO-LayerPreference and/or maxMIMO-LayerPreferenceFR2-2 for the cell group and timer T346d associated with the cell group is not running:

3> start the timer T346d with the timer value set to the maxMIMO-LayerPreferenceProhibitTimer of the cell group;
\( 3> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7.4.3 to provide the current maxMIMO-LayerPreference and/or maxMIMO-LayerPreferenceFR2-2;

ETSI


--- Page 235  ---


3GPP TS 38.331 version 17.0.0 Release 17
234
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if configured to provide its preference on the minimum scheduling offset for cross-slot scheduling of a cell group for power saving:
\( 2> \) if the UE has a preference on the minimum scheduling offset for cross-slot scheduling of the cell group and the UE did not transmit a UEAssistanceInformation message with minSchedulingOffsetPreference and/or minSchedulingOffsetPreferenceExt for the cell group since it was configured to provide its preference on the minimum scheduling offset for cross-slot scheduling of the cell group for power saving; or
\( 2> \) if the current minSchedulingOffsetPreference and/or minSchedulingOffsetPreferenceExt information for the cell group is different from the one indicated in the last transmission of the UEAssistancelnformation message including minSchedulingOffsetPreference and/or minSchedulingOffsetPreferenceExt for the cell group and timer T346e associated with the cell group is not running:
\( 3> \) start the timer T346e with the timer value set to the minSchedulingOffsetPreferenceProhibitTimer of the cell group;
\( 3> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7 .4 .3 to provide the current minSchedulingOffsetPreference and/or minSchedulingOffsetPreferenceExt;
\( 1> \) if configured to provide its release preference and timer T346f is not running:
\( 2> \) if the UE determines that it would prefer to transition out of RRC_CONNECTED state; or
\( 2> \) if the UE is configured with connectedReporting and the UE determines that it would prefer to revert an earlier indication to transition out of RRC_CONNECTED state:
\( 3> \) start timer T346f with the timer value set to the releasePreferenceProhibitTimer;
\( 3> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7 .4 .3 to provide the release preference;
\( 1> \) if configured to provide configured grant assistance information for NR sidelink communication:
\( 2> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7 4.3 to provide configured grant assistance information for NR sidelink communication;
\( 1> \) if configured to provide preference in being provisioned with reference time information:
\( 2> \) if the UE did not transmit a UEAssistancelnformation message with referenceTimeInfoPreference since it was configured to provide preference; or
\( 2> \) if the UE's preference changed from the last time UE initiated transmission of the UEAssistanceInformation message including referenceTimeInfoPreference:
\( 3> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7 .4 .3 to provide preference in being provisioned with reference time information.
\( 1> \) if configured to provide its preference on FR2 UL gap:
\( 2> \) if the UE did not transmit a UEAssistanceInformation message with \( u \) /-GapFR2-Preference since it was configured to provide its preference on FR2 UL gap information:
\( 3> \) if the UE has a preference on FR2 UL gap activation/deactivation:
\( 4> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7 .4 .3 to provide FR2 UL gap preference;
\( 2> \) else if the current FR2 UL gap preference is different from the one indicated in the last transmission of the UEAssistancelnformation message:
\( 3> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7 .4 .3 to provide FR2 UL gap preference.

1> if configured to provide MUSIM assistance information for leaving RRC_CONNECTED:
\( 2> \) if the UE needs to leave RRC_CONNECTED state and the timer T346g is not running:

ETSI


--- Page 236  ---


3GPP TS 38.331 version 17.0.0 Release 17
235
ETSI TS 138331 V17.0.0 (2022-05)

3> initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide MUSIM assistance information for leaving RRC_CONNECTED;

3> start the timer T346g with the timer value set to the musim-LeaveWithoutResponseTimer;
1> if configured to provide MUSIM assistance information without leaving RRC_CONNECTED:
\( 2> \) if the UE has a preference on the MUSIM gap(s) and the UE did not transmit a UEAssistancelnformation message with musim-GapPreferenceList since it was configured to provide MUSIM assistance information without leaving RRC_CONNECTED; or
\( 2> \) if the current musim-GapPreferenceList is different from the one indicated in the last transmission of the UEAssistanceInformation message including musim-GapPreferenceList and the timer T346h is not running:
\( 3> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide the current musim-GapPreferenceList;

3> start the timer T346h with the timer value set to the musim-GapProhibitTimer.
\( 1> \) if configured to provide the relaxation state of RLM measurements of a cell group:
\( 2> \) if the UE did not transmit a UEAssistanceInformation message with rim-MeasRelaxationState since it was configured to provide the relaxation state of RLM measurements for the cell group; or
\( 2> \) if the relaxation state of RLM measurements for the cell group has changed since the last transmission of the UEAssistanceInformation message including rim-MeasRelaxationState of the cell group and timer T346j associated with the cell group is not running:
\( 3> \) start timer T346j with the timer value set to the nim-RelaxtionReportingProhibitTimer;
\( 3> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide the relaxation state of RLM measurements of the cell group;
\( 1> \) if configured to provide the relaxation state of BFD measurements of serving cells of a cell group:
\( 2> \) if the UE did not transmit a UEAssistanceInformation message with bfd-MeasRelaxationState since it was configured to provide the relaxation state of BFD measurements for the cell group; or
\( 2> \) if the relaxation state of BFD measurements in any serving cell of the cell group has changed since the last transmission of the UEAssistanceInformation message including bfd-MeasRelaxationState of the cell group and timer T346k associated with the cell group is not running:

3> start timer T346k with the timer value set to the bfd-RelaxtionReportingProhibitTimer;
\( 3> \) initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide the relaxation state of BFD measurements of serving cells of the cell group.

1> if data and/or signalling mapped to radio bearers not configured for SDT becomes available during SDT (i.e. while T319a is running):
\( 2> \) if the UE did not transmit a UEAssistanceInformation message with nonSDT-DataIndication since the initiation of the current resume procedure for SDT:

3> initiate transmission of the UEAssistanceInformation message in accordance with 5.7.4.3 to provide nonSDT-Datalndication.
\( 1> \) if configured to provide its preference for SCG deactivation and timer T346i is not running;
\( 2> \) if the UE prefers the SCG to be deactivated and did not transmit a UEAssistanceInformation message with scg-DeactivationPreference since it was configured to provide its SCG deactivation preference; or
\( 2> \) if the UE preference for SCG deactivation is different from the last indicated scg-DeactivationPreference since the UE was configured to provide its SCG deactivation preference:

3> start timer T346i with the timer value set to the scg-DeactivationPreferenceProhibitTimer;

ETSI


--- Page 237  ---


3GPP TS 38.331 version 17.0.0 Release 17
236
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7 .4 .3 to provide the UE preference for SCG deactivation;
\( 1> \) if the SCG is deactivated, and,
\( 1> \) the UE has uplink data to send for an SCG RLC entity while the UE previously did not have any uplink data to send for any SCG RLC entity:
\( 2> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7 .4 .3 to indicate that the UE has uplink data to send for a DRB whose DRB-Identity is not included in any RLC-BearerConfig in the CellGroupConfig associated with the MCG.
\( 1> \) if configured to send indications of RRM measurement relaxation criterion fulfilment:
\( 2> \) if the criterion in 5.7.4.4 is met for a period of \( \mathrm{T}_{\text {SearchDelaP-StabonaryConnected: }} \)
\( 3> \) if the UE did not transmit a UEAssistancelnformation message with rrm-MeasRelaxationFulfilment as true since it was configured to provide indications of RRM measurement relaxation criterion fulfilment; or
\( 3> \) the last UEAssistancelnformation message indicated the criterion in 5.7.4.4 is not fulfilled with rrmMeasRelaxationFulfilment as false:
\( 4> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7.4.3 to indicate that the criterion for RRM measurement relaxation for connected mode is fulfilled;
\( 2> \) else:
\( 3> \) if the last UEAssistancelnformation message indicated fulfilment of the criterion in 5.7 .4 .4 with rmm MeasRelaxationFulfilment as true:
\( 4> \) initiate transmission of the UEAssistancelnformation message in accordance with 5.7.4.3 to indicate that the criterion for RRM measurement relaxation for connected mode is not fulfilled.
5.7.4.3 Actions related to transmission of UEAssistanceInformation message

The UE shall set the contents of the UEAssistancelnformation message as follows:
\( 1> \) if transmission of the UEAssistanceInformation message is initiated to provide a delay budget report according to 5.7.4.2 or 5.3.5.3;
\( 2> \) set delayBudgetReport to typel according to a desired value;
\( 1> \) if transmission of the UEAssistancelnformation message is initiated to provide overheating assistance information according to 5.7.4.2 or 5.3.5.3;
\( 2> \) if the UE experiences internal overheating:
\( 3> \) if the UE prefers to temporarily reduce the number of maximum secondary component carriers:
\( 4> \) include reducedMaxCCs in the OverheatingAssistance [E;
\( 4> \) set reducedCCsDL to the number of maximum SCells the UE prefers to be temporarily configured in downlink;
\( 4> \) set reducedCCsUL to the number of maximum SCells the UE prefers to be temporarily configured in uplink;
\( 3> \) if the UE prefers to temporarily reduce maximum aggregated band width of FR1:
\( 4> \) include reducedMaxBW-FRI in the OverheatingAssistance [E;
\( 4> \) set reduced \( B W-D L \) to the maximum aggregated band width the UE prefers to be temporarily configured across all downlink carriers of FR1;

ETSI


--- Page 238  ---


3GPP TS 38.331 version 17.0.0 Release 17
237
ETSI TS 138331 V17.0.0 (2022-05)

4> set reducedBW-UL to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all uplink carriers of FR1;

3> if the UE prefers to temporarily reduce maximum aggregated band width of FR2-1:
\( 4> \) include reducedMaxBW-FR2 in the OverheatingAssistance IE;
4> set reducedBW-DL to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all downlink carriers of FR2-1;

4> set reducedBW-UL to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all uplink carriers of FR2-1;
\( 3> \) if the UE prefers to temporarily reduce maximum aggregated bandwidth of FR2-2:
4> include reducedMaxBW-FR2-2 in the OverheatingAssistance IE;
4> set reducedBW-DL-FR2-2 to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all downlink carriers of FR2-2;

4> set reducedBW-UL-FR2-2 to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all uplink carriers of FR2-2;

3> if the UE prefers to temporarily reduce the number of maximum MIMO layers of each serving cell operating on FR1:

4> include reducedMaxMIMO-LayersFRI in the OverheatingAssistance [E;
4> set reducedMIMO-LayersFR1-DL to the number of maximum MIMO layers of each serving cell operating on FR1 the UE prefers to be temporarily configured in downlink;

4> set reducedMIMO-LayersFRI-UL to the number of maximum MIMO layers of each serving cell operating on FR1 the UE prefers to be temporarily configured in uplink;

3> if the UE prefers to temporarily reduce the number of maximum MIMO layers of each serving cell operating on FR2-1:

4> include reducedMaxMIMO-LayersFR2 in the OverheatingAssistance [E;
4> set reducedMIMO-LayersFR2-DL to the number of maximum MIMO layers of each serving cell operating on FR2-1 the UE prefers to be temporarily configured in downlink;

4> set reducedMIMO-LayersFR2-UL to the number of maximum MIMO layers of each serving cell operating on FR2-1 the UE prefers to be temporarily configured in uplink;

3> if the UE prefers to temporarily reduce the number of maximum MIMO layers of each serving cell operating on FR2-2:

4> include reducedMaxMIMO-LayersFR2-2 in the OverheatingAssistance IE;
4> set reducedMIMO-LayersFR2-2-DL to the number of maximum MIMO layers of each serving cell operating on FR2 the UE prefers to be temporarily configured in downlink;

4> set reducedMIMO-LayersFR2-2-UL to the number of maximum MIMO layers of each serving cell operating on FR2 the UE prefers to be temporarily configured in uplink;
\( 2> \) else (if the UE no longer experiences an overheating condition):
\( 3> \) do not include reducedMaxCCs, reducedMaxBW-FR1, reducedMaxBW-FR2, reducedMaxBW-FR2-2, reducedMaxMIMO-LayersFR1, reducedMaxMIMO-LayersFR2 and reducedMaxMIMO-LayersFR2-2 in OverheatingAssistance [E;

1> if transmission of the UEAssistanceInformation message is initiated to provide IDC assistance information according to 5.7.4.2 or 5.3.5.3:
\( 2> \) if there is at least one carrier frequency included in candidateServingFreqListNR, the UE is experiencing IDC problems that it cannot solve by itself:

ETSI


--- Page 239  ---


3GPP TS 38.331 version 17.0.0 Release 17
238
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) include the field affectedCarrierFreqList with an entry for each affected carrier frequency included in candidateServingFreqListNR;
\( 3> \) for each carrier frequency included in the field affectedCarrierFreqList, include interferenceDirection and set it accordingly;
\( 2> \) if there is at least one supported UL CA combination comprising of carrier frequencies included in candidateServingFreqListNR, the UE is experiencing IDC problems that it cannot solve by itself:
\( 3> \) include victimSystemType for each UL CA combination included in affectedCarrierFreqCombList;
\( 3> \) if the UE sets victimSystemType to wlan or bluetooth:
4> include affectedCarrierFreqCombList with an entry for each supported UL CA combination comprising of carrier frequencies included in candidateServingFreqListNR, that is affected by IDC problems;
\( 3> \) else:
4 optionally include affected CarrierFreq CombList with an entry for each supported UL CA combination comprising of carrier frequencies included in candidateServingFreqListNR, that is affected by IDC problems;

NOTE 1: When sending an UEAssistancelnformation message to inform the IDC problems, the UE includes all IDC assistance information (rather than providing e g the changed part(s) of the IDC assistance information).

NOTE 2: Upon not anymore experiencing a particular IDC problem that the UE previously reported, the UE provides an IDC indication with the modified contents of the UEAssistanceInformation message (e.g. by not including the IDC assistance information in the idc-Assistance field).
\( 1> \) if transmission of the UEAssistancelnformation message is initiated to provide drx-Preference of a cell group for power saving according to 5.7 .4 .2 or 5.3.5.3:
\( 2> \) include dr \( x \)-Preference in the UEAssistanceInformation message;
\( 2> \) if the UE has a preference on DRX parameters for the cell group:
\( 3> \) if the UE has a preference for the long DRX cycle:
4 include preferredDRX-LongCycle in the DRX-Preference IE and set it to the preferred value;
\( 3> \) if the UE has a preference for the DRX inactivity timer:
\( 4> \) include preferredDRX-InactivityTimer in the DRX-Preference IE and set it to the preferred value;
\( 3> \) if the UE has a preference for the short DRX cycle:
\( 4> \) include preferredDRX-ShortCycle in the DRX-Preference IE and set it to the preferred value;
\( 3> \) if the UE has a preference for the short DRX timer:
4 include preferredDRX-ShortCycleTimer in the DRX-Preference IE and set it to the preferred value;
\( 2> \) else (if the UE has no preference on DRX parameters for the cell group):
\( 3> \) do not include preferredDRX-LongCycle, preferredDRX-InactivityTimer, preferredDRX-ShortCycle and preferredDRX-ShortCycleTimer in the DRX-Preference IE;
\( 1> \) if transmission of the UEAssistancelnformation message is initiated to provide maxB W -Preference of a cell group for power saving according to 5.7.4.2 or 5.3.5.3:
\( 2> \) include maxBW-Preference in the UEAssistanceInformation message;
\( 2> \) if the UE has a preference on the maximum aggregated bandwidth for the cell group:
\( 3> \) if the UE prefers to reduce the maximum aggregated band width of FR1:

ETSI


--- Page 240  ---


3GPP TS 38.331 version 17.0.0 Release 17
239
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) include reducedMax \( B W-F R] \) in the Max \( B W \)-Preference \( [E \);
\( 4> \) set reduced \( B W-D L \) to the maximum aggregated bandwidth the UE desires to have configured across all downlink carriers of FR1 in the cell group;
\( 4> \) set reduced \( B W \) - \( U L \) to the maximum aggregated bandwidth the UE desires to have configured across all uplink carriers of FR1 in the cell group;
\( 3> \) if the UE prefers to reduce the maximum aggregated band width of FR2-1:
\( 4> \) include reducedMax \( B W-F R 2 \) in the Max \( B W \)-Preference \( [E \);
\( 4> \) set reduced \( B W-D L \) to the maximum aggregated bandwidth the UE desires to have configured across all downlink carriers of FR2-1 in the cell group;
\( 4> \) set reduced \( B W \) - \( U L \) to the maximum aggregated bandwidth the UE desires to have configured across all uplink carriers of FR2-1 in the cell group;
\( 2> \) else (if the UE has no preference on the maximum aggregated band width for the cell group):
\( 3> \) do not include reducedMax \( B W-F R] \) and reducedMax \( B W-F R 2 \) in the \( M a x B W \)-Preference \( [\mathrm{E} \);
\( 1> \) if transmission of the UEAssistancelnformation message is initiated to provide maxBW-PreferenceFR2-2 of a cell group for power saving according to 5.7.4.2 or 5.3.5.3:
\( 2> \) include maxBW-PreferenceFR2-2 in the UEAssistanceInformation message;
\( 3> \) if the UE prefers to reduce the maximum aggregated band width of FR2-2:
\( 4> \) include reducedMaxBW-FR2-2 in the MaxBW-PreferenceFR2-2 [E;
\( 4> \) set reduced \( B W-F R 2-2-D L \) to the maximum aggregated bandwidth the UE desires to have configured across all downlink carriers of FR2-2 in the cell group;
\( 4> \) set reducedB \( W-F R 2-2-U L \) to the maximum aggregated bandwidth the UE desires to have configured across all uplink carriers of FR2-2 in the cell group;
\( 2> \) else (if the UE has no preference on the maximum aggregated band width for the cell group):
\( 3> \) do not include reducedMaxBW-FR2-2 in the MaxBW-PreferenceFR2-2 [E;
\( 1> \) if transmission of the UEAssistancelnformation message is initiated to provide maxCC-Preference of a cell group for power saving according to 5.7.4.2 or 5.3.5.3:
\( 2> \) include maxCC-Preference in the UEAssistancelnformation message;
\( 2> \) if the UE has a preference on the maximum number of secondary component carriers for the cell group:
\( 3> \) include reducedMaxCCs in the MaxCC-Preference [E;
\( 3> \) set reducedCCsDL to the number of maximum SCells the UE desires to have configured in downlink in the cell group;
\( 3> \) set reducedCCsUL to the number of maximum SCells the UE desires to have configured in uplink in the cell group;
\( 2> \) else (if the UE has no preference on the maximum number of secondary component carriers for the cell group):
\( 3> \) do not include reducedMaxCCs in the MaxCC-Preference [E;
NOTE 3: The UE can implicitly indicate a preference for NR SCG release by reporting the maximum aggregated band width preference for power saving of the cell group, if configured, as zero for both FR1 and FR2, and by reporting the maximum number of secondary component carriers for power saving of the cell group, if configured, as zero for both uplink and downlink.

ETSI


--- Page 241  ---


3GPP TS 38.331 version 17.0.0 Release 17
240
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if transmission of the UEAssistancelnformation message is initiated to provide maxMIMO-LayerPreference of a cell group for power saving according to 5.7 .4 .2 or 5.3 .5 .3 :
\( 2> \) include maxMIMO-LayerPreference in the UEAssistanceInformation message;
\( 2> \) if the UE has a preference on the maximum number of MIMO layers for the cell group:
\( 3> \) if the UE prefers to reduce the number of maximum MIMO layers of each serving cell operating on FR1:
\( 4> \) include reducedMaxMIMO-LayersFRI in the MaxMIMO-LayerPreference [E;
4> set reducedMIMO-LayersFRI-DL to the preferred maximum number of downlink MIMO layers of each BWP of each FR1 serving cell that the UE operates on in the cell group;
\( 4> \) set reducedMIMO-LayersFRI-UL to the preferred maximum number of uplink MIMO layers of each FR1 serving cell that the UE operates on in the cell group;
\( 3> \) if the UE prefers to reduce the number of maximum MIMO layers of each serving cell operating on FR21:
\( 4> \) include reducedMaxMIMO-LayersFR2 in the MaxMIMO-LayerPreference [E;
\( 4> \) set reducedMIMO-LayersFR2-DL to the preferred maximum number of downlink MIMO layers of each BWP of each FR2-1 serving cell that the UE operates on in the cell group;
\( 4> \) set reducedMIMO-LayersFR2-UL to the preferred maximum number of uplink MIMO layers of each FR2-1 serving cell that the UE operates on in the cell group;
\( 2> \) else (if the UE has no preference on the maximum number of MIMO layers for the cell group):
\( 3> \) do not include reducedMaxMIMO-LayersFRI and reducedMaxMIMO-LayersFR2 in the MaxMIMOLayerPreference IE;
\( 1> \) if transmission of the UEAssistancelnformation message is initiated to provide maxMIMO LayerPreferenceFR2
2 of a cell group for power saving according to 5.7 .4 .2 or 5.3 .5 .3 :
\( 2> \) include maxMIMO-LayerPreferenceFR2-2 in the UEAssistancelnformation message;
\( 2> \) if the UE has a preference on the maximum number of MIMO layers for the cell group for FR2-2:
\( 3> \) if the UE prefers to reduce the number of maximum MIMO layers of each serving cell operating on FR2 2:

4> include reducedMaxMIMO-LayersFR2-2 in the MaxMIMO-LayerPreferenceFR2 2 [E;
\( 4> \) set reducedMIMO-LayersFR2-2-DL to the preferred maximum number of downlink MIMO layers of each BWP of each FR2-2 serving cell that the UE operates on in the cell group;
\( 4> \) set reducedMIMO-LayersFR2-2-UL to the preferred maximum number of uplink MIMO layers of each FR2-2 serving cell that the UE operates on in the cell group;
\( 2> \) else (if the UE has no preference on the maximum number of MIMO layers for the cell group):
\( 3> \) do not include reducedMaxMIMO-LayersFR2-2 in the MaxMIMO-LayerPreferenceFR2-2 [E;
\( 1> \) if transmission of the UEAssistanceInformation message is initiated to provide minSchedulingOffsetPreference of a cell group for power saving according to 5.7 .4 .2 or 5.3 .5 .3 :
\( 2> \) include minSchedulingOffsetPreference in the UEAssistanceInformation message;
\( 2> \) if the UE has a preference on the minimum scheduling offset for cross-slot scheduling for the cell group:
\( 3> \) if the UE has a preference for the value of \( \mathrm{K}_{0} \) (TS 38.214 [19], clause 5.1.2.1) for cross-slot scheduling with 15 kHz SCS:
\( 4> \) include preferredK0-SCS-15kHz in the MinSchedulingOffsetPreference [E and set it to the desired value of \( K_{0} \);

ETSI


--- Page 242  ---


3GPP TS 38.331 version 17.0.0 Release 17
241
ETSI TS 138331 V17.0.0 (2022-05)

3> if the UE has a preference for the value of \( \mathrm{K}_{0} \) for cross-slot scheduling with 30 kHz SCS:
4> include preferredK0-SCS-30kHz in the MinSchedulingOffsetPreference IE and set it to the desired value of \( K_{0} \);

3> if the UE has a preference for the value of \( \mathrm{K}_{0} \) for cross-slot scheduling with 60 kHz SCS:
4> include preferredK0-SCS-60kHz in the MinSchedulingOffsetPreference IE and set it to the desired value of \( K_{0} \);
\( 3> \) if the UE has a preference for the value of \( \mathrm{K}_{0} \) for cross-slot scheduling with 120 kHz SCS:
4> include preferredK0-SCS-120kHz in the MinSchedulingOffsetPreference IE and set it to the desired value of \( K_{0} \);
\( 3> \) if the UE has a preference for the value of \( K_{2} \) (TS 38.214 [19], clause 6.1.2.1) for cross-slot scheduling with 15 kHz SCS:

4> include preferredK2-SCS-15kHz in the MinSchedulingOffsetPreference IE and set it to the desired value of \( K_{2} \);

3> if the UE has a preference for the value of \( \mathrm{K}_{2} \) for cross-slot scheduling with 30 kHz SCS:
4> include preferredK2-SCS-30kHz in the MinSchedulingOffsetPreference IE and set it to the desired value of \( K_{2} \);

3> if the UE has a preference for the value of \( \mathrm{K}_{2} \) for cross-slot scheduling with 60 kHz SCS :
4> include preferredK2-SCS-60kHz in the MinSchedulingOffsetPreference IE and set it to the desired value of \( K_{2} \);

3> if the UE has a preference for the value of \( \mathrm{K}_{2} \) for cross-slot scheduling with 120 kHz SCS:
\( 4> \) include preferredK2-SCS-120kHz in the MinSchedulingOffsetPreference IE and set it to the desired value of \( K_{2} ; \)
\( 2> \) else (if the UE has no preference on the minimum scheduling offset for cross-slot scheduling for the cell group):
\( 3> \) do not include preferredK0 and preferredK2 in the MinSchedulingOffsetPreference \( [\mathrm{E} ; \)
\( 1> \) if transmission of the UEAssistancelnformation message is initiated to provide
minSchedulingOffsetPreferenceExt of a cell group for power saving according to 5.7.4.2 or 5.3.5.3:
\( 2> \) include minSchedulingOffsetPreferenceExt in the UEAssistanceInformation message;
\( 2> \) if the UE has a preference on the minimum scheduling offset for cross-slot scheduling for the cell group for FR2-2:

3> include minSchedulingOffsetPreferenceExt in the UEAssistanceInformation message;
4> if the UE has a preference for the value of \( \mathrm{K}_{0} \) (TS 38.214 [19], clause 5.1.2.1) for cross-slot scheduling with 480 kHz SCS:
\( 5> \) include preferredK0-SCS-480kHz in the minSchedulingOffsetPreferenceExt [E and set it to the desired value of \( \mathrm{K}_{0} \);

4> if the UE has a preference for the value of \( \mathrm{K}_{0} \) for cross-slot scheduling with 960 kHz SCS:
\( 5> \) include preferredK0-SCS-960kHz in the minSchedulingOffsetPreferenceExt IE and set it to the desired value of \( \mathrm{K}_{0} \);

4> if the UE has a preference for the value of \( \mathrm{K}_{2} \) for cross-slot scheduling with 480 kHz SCS:
\( 5> \) include preferredK2-SCS-480kHz in the minSchedulingOffsetPreferenceExt [E and set it to the desired value of \( \mathrm{K}_{2} \);

ETSI


--- Page 243  ---


3GPP TS 38.331 version 17.0.0 Release 17
242
ETSI TS 138331 V17.0.0 (2022-05)

4> if the UE has a preference for the value of \( \mathrm{K}_{2} \) for cross-slot scheduling with 960 kHz SCS:
\( 5> \) include preferredK2-SCS-960kHz in the minSchedulingOffsetPreferenceExt IE and set it to the desired value of \( \mathrm{K}_{2} \);

3> else (if the UE has no preference on the minimum scheduling offset for cross-slot scheduling for the cell group):

4> do not include preferredK0 and preferredK2 in the minSchedulingOffsetPreferenceExt [E;
\( 1> \) if transmission of the UEAssistanceInformation message is initiated to provide a release preference according to 5.7.4.2 or 5.3.5.3:
\( 2> \) include releasePreference in the UEAssistanceInformation message;
\( 2> \) set preferredRRC-State to the desired RRC state on transmission of the UEAssistanceInformation message;
1> if transmission of the UEAssistanceInformation message is initiated to provide an indication of preference in being provisioned with reference time information according to 5.7.4.2 or 5.3.5.3:
\( 2> \) if the UE has a preference in being provisioned with reference time information:
\( 3> \) set referenceTimeInfoPreference to true;
\( 2> \) else:
3> set referenceTimeInfoPreference to false.
1> if transmission of the UEAssistanceInformation message is initiated to provide preference on FR2 UL gap according to 5.7.4.2 or 5.3.5.3:
\( 2> \) if the UE has a preference for FR2 UL gap configuration:
3> set ul-GapFR2-PatternPreference to the preferred FR2 UL gap pattern;
\( 2> \) else (if the UE has no preference for the FR2 UL gap configuration):
\( 3> \) do not include ul-GapFR2-PatternPreference in the UL-GapFR2-Preference [E.
1> if transmission of the UEAssistanceInformation message is initiated to provide MUSIM assistance information according to 5.7.4.2 or 5.3.5.3:
\( 2> \) if the UE has a preference for MUSIM periodic gap(s):
\( 3> \) include musim-GapPreferenceList with an entry for each periodic gap the UE prefers to be configured;
4> set musim-Gaplength and musim-GapRepetitionAndOffset in the musim-GapInfo [E to the values of the length and the repetition/offset of the gap(s), respectively, the UE prefers to be configured with;
\( 2> \) if the UE has a preference for MUSIM aperiodic gap:
3> include the field musim-GapPreferenceList, with one entry for the aperiodic gap the UE prefers to be configured;

4> set musim-Gaplength and musim-Starting-SFN-AndSubframe in the musim-GapInfo [E to the values of respectively the length and the starting SFN/subframe of the gap, respectively, the UE prefers to be configured with;
\( 2> \) else (if the UE has no longer preference for the periodic/aperiodic gaps):
3> do not include musim-GapPreferenceList in the musim-Assistance [E;
2> if UE has a preference to leave RRC_CONNECTED state:
\( 3> \) set musim-PreferredRRC-State to the preferred RRC state.
1> if transmission of the UEAssistanceInformation message is initiated to provide the relaxation state of RLM measurements of a cell group according to 5.7.4.2:

ETSI


--- Page 244  ---


3GPP TS 38.331 version 17.0.0 Release 17
243
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the UE performs RLM measurement relaxation on the cell group according to TS 38.133 [14]:
3> set the rim-MeasRelaxationState to true;
\( 2> \) else:
3> set the rim-MeasRelaxationState to false;
\( 1> \) if transmission of the UEAssistanceInformation message is initiated to provide the relaxation state of BFD measurements of a cell group:
\( 2> \) for each serving cell of the cell group:
3> if the UE performs BFD measurement relaxation on this serving cell according to TS 38.133 [14]:
4> set the n -th bit of bfd-MeasRelaxationState to ' 1 ', where n is equal to the servCellIndex value +1 of the serving cell;

3> else:
4> set the n -th bit of bfd-MeasRelaxationState to ' 0 ', where n is equal to the servCellIndex value +1 of the serving cell.

1> if transmission of the UEAssistanceInformation message is initiated to indicate availability of data mapped to radio bearers not configured for SDT according to 5.7.4.2:
\( 2> \) include and set the resumeCause according to the information received from the upper layers, if provided.
1> if transmission of the UEAssistancelnformation message is initiated to provide an indication of preference for SCG deactivation according to 5.7.4.2:
\( 2> \) include scg-DeactivationPreference in the UEAssistanceInformation message;
2> set the scg-DeactivationPreference to scgDeactivationPreferred if the UE prefers the SCG to be deactivated, otherwise set it to noPreference;

1> if transmission of the UEAssistancelnformation message is initiated to provide an indication that the UE has uplink data related to a deactivated SCG according to 5.7.4.2:
\( 2> \) include uplinkData in the UEAssistanceInformation message.
1> if transmission of the UEAssistanceInformation message is initiated to provide an indication about whether the criterion for RRM relaxation for connected mode is fulfilled or not fulfilled:
\( 2> \) if the criterion for RRM measurement relaxation for connected mode is fulfilled:
3> set the rrm-MeasRelaxationFulfilment to true;
\( 2> \) else:
3> set the rrm-MeasRelaxationFulfilment to false.
The UE shall set the contents of the UEAssistancelnformation message for configured grant assistance information for NR sidelink communication:
\( 1> \) if configured to provide configured grant assistance information for NR sidelink communication:
\( 2> \) include the st-UE-AssistanceInformationNR;
NOTE 4: It is up to UE implementation when and how to trigger configured grant assistance information for NR sidelink communication.

The UE shall:
1> if the procedure was triggered to provide configured grant assistance information for NR sidelink communication by an NR RRCReconfiguration message that was embedded within an E-UTRA RRCConnection Reconfiguration:

ETSI


--- Page 245  ---


3GPP TS 38.331 version 17.0.0 Release 17
244
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) submit the UEAssistanceInformation to lower layers via SRB1, embedded in E-UTRA RRC message ULInformationTransferIRAT as specified in TS 36.331 [10], clause 5.6.28;
\( 1> \) else if the UE is in (NG)EN-DC:
2 if SRB3 is configured:
3> submit the UEAssistanceInformation message via SRB3 to lower layers for transmission;
\( 2> \) else:
3> submit the UEAssistanceInformation message via the E-UTRA MCG embedded in E-UTRA RRC message ULInformationTransferMRDC as specified in TS 36.331 [10].
\( 1> \) else if the UE is in NR-DC:
\( 2> \) if the UE assistance configuration that triggered this UE assistance information is associated with the SCG:
3> if SRB3 is configured:
4> submit the UEAssistanceInformation message via SRB3 to lower layers for transmission;
3> else:
4> submit the UEAssistanceInformation message via the NR MCG embedded in NR RRC message ULInformationTransferMRDC as specified in 5.7.2a.3;
\( 2> \) else:
3> submit the UEAssistanceInformation message via SRB1 to lower layers for transmission;
1> else:
\( 2> \) submit the UEAssistanceInformation message to lower layers for transmission.
5.7.4.3a Setting the contents of OverheatingAssistance IE

The UE shall set the contents of OverheatingAssistance IE if initiated to provide overheating assistance indication for SCG in (NG)EN-DC according to clause 5.6.10.3 as specified in TS 36.331 [10]:

1> if the UE prefers to temporarily reduce the number of maximum secondary component carriers for SCG:
\( 2> \) include reducedMaxCCs in the OverheatingAssistance IE;
\( 2> \) set reducedCCsDL to the number of maximum SCells of the SCG the UE prefers to be temporarily configured in downlink;
\( 2> \) set reducedCCsUL to the number of maximum SCells of the SCG the UE prefers to be temporarily configured in uplink;
\( 1> \) if the UE prefers to temporarily reduce maximum aggregated bandwidth of FR1 for SCG:
\( 2> \) include reducedMaxBW-FRI in the OverheatingAssistance [E;
\( 2> \) set reducedBW-FR1-DL to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all downlink carriers of FR1 of the SCG;
\( 2> \) set reducedBW-FRI-UL to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all uplink carriers of FR1 of the SCG;
\( 1> \) if the UE prefers to temporarily reduce maximum aggregated bandwidth of FR2-1 for SCG:
\( 2> \) include reducedMaxBW-FR2 in the OverheatingAssistance IE;
\( 2> \) set reducedBW-FR2-DL to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all downlink carriers of FR2-1 of the SCG;

ETSI


--- Page 246  ---


3GPP TS 38.331 version 17.0.0 Release 17
245
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) set reducedBW-FR2-UL to the maximum aggregated bandwidth the UE prefers to be temporarily configured across all uplink carriers of FR2-1 of the SCG;
\( 1> \) if the UE prefers to temporarily reduce the number of maximum MIMO layers of each serving cell operating on FR1 for SCG:
\( 2> \) include reducedMaxMIMO-LayersFRI in the OverheatingAssistance [E;
\( 2> \) set reducedMIMO-LayersFRI-DL to the number of maximum MIMO layers of each serving cell operating on FR1 of the SCG the UE prefers to be temporarily configured in downlink;
\( 2> \) set reducedMIMO-LayersFRI-UL to the number of maximum MIMO layers of each serving cell operating on FR1 of the SCG the UE prefers to be temporarily configured in uplink;

1> if the UE prefers to temporarily reduce the number of maximum MIMO layers of each serving cell operating on FR2-1 for SCG:
\( 2> \) include reducedMaxMIMO-LayersFR2 in the OverheatingAssistance IE;
\( 2> \) set reducedMIMO-LayersFR2-DL to the number of maximum MIMO layers of each serving cell operating on FR2-1 of the SCG the UE prefers to be temporarily configured in downlink;
\( 2> \) set reducedMIMO-LayersFR2-UL to the number of maximum MIMO layers of each serving cell operating on FR2-1 of the SCG the UE prefers to be temporarily configured in uplink;
5.7.4.4 Relaxed measurement criterion for a stationary UE

The relaxed measurement criterion for a stationary UE is met when:
- (SrxlevReStationaryConnected - Srxlev \( )< \) S \( _{\text {SearchDeltaP-StationaryConnected }} \),

Where:
- Srxlev \( = \) current Srxlev value of the PCell cell (dB).
- Srxlev \( \mathrm{v}_{\mathrm{Re} \text { Stationary } \text { Connected }}= \) reference Srxlev value of the PCell cell (dB), set as follows:
- At the end of RRC reconfiguration procedure as specified in 5.3.5.3, when rrmMeasRelaxationReportingConfig is included in the RRCReconfiguration message; or
- If \( \left(\right. \) Srxlev - Srxlev \( _{\text {ReStatonary }} \) Connected \( )>0 \); or
- If the relaxed measurement criterion has not been met for \( T_{\text {SearchDelaP-StabonaryConnected: }} \)
- The UE shall set the value of Srxlev \( \mathrm{v}_{\mathrm{Re} 5 \text { tationary }{ }^{2} \text { onnected to the current Srxlev value of the serving cell. }} \)
5.7.4a Void
5.7.5 Failure information
5.7.5.1 General

Figure 5.7.5.1-1: Failure information

The purpose of this procedure is to inform the network about a failure detected by the UE.

ETSI


--- Page 247  ---


3GPP TS 38.331 version 17.0.0 Release 17
246
ETSI TS 138331 V17.0.0 (2022-05)
5.7.5.2 Initiation

A UE initiates the procedure when there is a need inform the network about a failure detected by the UE. In particular, the UE initiates the procedure when the following condition is met:
\( 1> \) upon detecting failure for an RLC bearer, in accordance with 5.3.10.3;
\( 1> \) upon detecting DAPS handover failure, in accordance with 5.3.5.8.3;
Upon initiating the procedure, the UE shall:
\( 1> \) initiate transmission of the Failurelnformation message as specified in 5.7.5.3;
5.7.5.3 Actions related to transmission of FailureInformation message

The UE shall:
\( 1> \) if initiated to provide RLC failure information, set FailurelnfoRLC-Bearer as follows:
\( 2> \) set logicalChannelldentity to the logical channel identity of the failing RLC bearer;
\( 2> \) set cellGroupld to the cell group identity of the failing RLC bearer;
\( 2> \) set the failureType as NC-failure;
\( 1> \) if initiated to provide DAPS failure information, set FailureInfoDAPS as follows:
\( 2> \) set the failureType as daps-failure;
1> if used to inform the network about a failure for an MCG RLC bearer or DAPS failure information:
\( 2> \) submit the Failurelnformation message to lower layers for transmission via SRB1;
1> else if used to inform the network about a failure for an SCG RLC bearer:
\( 2> \) if SRB3 is configured;
\( 3> \) submit the Failurelnformation message to lower layers for transmission via SRB3;
\( 2> \) else;
\( 3> \) if the UE is in (NG)EN-DC:
\( 4> \) submit the Failurelnformation message via E-UTRA SRB1 embedded in E-UTRA RRC message ULInformationTransferMRDC as specified in TS 36.331 [10].
\( 3> \) else if the UE is in NR-DC:
\( 4> \) submit the Failurelnformation message via SRB1 embedded in NR RRC message ULInformationTransferMRDC as specified in clause 5.7.2a.3.
5.7.6 DL message segment transfer
5.7.6.1 General

Figure 5.7.6.1-1: DL message segment transfer

ETSI


--- Page 248  ---


3GPP TS 38.331 version 17.0.0 Release 17
247
ETSI TS 138331 V17.0.0 (2022-05)

The purpose of this procedure is to transfer segments of DL DCCH messages from the network to the UE.
NOTE: The segmentation of DL DCCH message is only applicable to RRCReconfiguration and RRCResume messages in this release.
5.7.6.2 Initiation

The network initiates the DL Dedicated Message Segment transfer procedure whenever the encoded RRC message PDU exceeds the maximum PDCP SDU size. The network initiates the DL Dedicated Message Segment transfer procedure by sending the DLDedicatedMessageSegment message.
5.7.6.3 Reception of DLDedicatedMessageSegment by the UE

Upon receiving DLDedicatedMessageSegment message, the UE shall:
1> store the segment included in rrc-MessageSegmentContainer;
1> if all segments of the message have been received:
\( 2> \) assemble the message from the received segments and process the message according to 5.3.5.3 for the RRCReconfiguration message or 5.3.13.4 for the RRCResume message;
\( 2> \) discard all segments.
5.7.7 UL message segment transfer
5.7.7.1 General

Figure 5.7.7.1-1: UL message segment transfer

The purpose of this procedure is to transfer segments of UL DCCH messages from UE to a NG-RAN in RRC_CONNECTED.

NOTE: The segmentation of UL DCCH message is only applicable to UECapabilitylnformation and MeasurementReportAppLayer in this release.
5.7.7.2 Initiation

A UE capable of UL RRC message segmentation in RRC_CONNECTED will initiate the procedure when the following conditions are met:
\( 1> \) if the RRC message segmentation is enabled based on the field \( r c \)-SegAllowed received, and
1> if the encoded RRC message is larger than the maximum supported size of a PDCP SDU specified in TS 38.323 [5];

Upon initiating the procedure, the UE shall:
\( 1> \) initiate transmission of the ULDedicatedMessageSegment message as specified in 5.7.7.3;

ETSI


--- Page 249  ---


3GPP TS 38.331 version 17.0.0 Release 17
248
ETSI TS 138331 V17.0.0 (2022-05)
5.7.7.3 Actions related to transmission of ULDedicatedMessageSegment message

The UE shall segment the encoded RRC PDU based on the maximum supported size of a PDCP SDU specified in TS 38.323 [5]. UE shall minimize the number of segments and set the contents of the ULDedicatedMessageSegment messages as follows:

1> F or each new UL DCCH message, set the segmentNumber to 0 for the first message segment and increment the segmentNumber for each subsequent RRC message segment;
\( 1> \) set rrc-MessageSegmentContainer to include the segment of the UL DCCH message corresponding to the segmentNumber;

1> if the segment included in the rrc-MessageSegmentContainer is the last segment of the UL DCCH message:
\( 2> \) set the rrc-MessageSegmentType to lastSegment;
1> else:
2> set the rrc-MessageSegmentType to notLastSegment;
1> submit all the ULDedicatedMessageSegment messages generated for the segmented RRC message to lower layers for transmission in ascending order based on the segmentNumber, upon which the procedure ends.
5.7.8 Idle/inactive Measurements
5.7.8.1 General

This procedure specifies the measurements to be performed and stored by a UE in RRC_IDLE and RRC_INACTIVE when it has an idle/inactive measurement configuration.
5.7.8.1a Measurement configuration

The purpose of this procedure is to update the idle/inactive measurement configuration.
The UE initiates this procedure while T331 is running and T319a is not running and one of the following conditions is met:

1> upon selecting a cell when entering RRC_IDLE or RRC-INACTIVE from RRC_CONNECTED or RRC_INACTIVE; or
\( 1> \) upon update of system information (SIB4, or SIB11), e.g. due to intra-RAT cell (re)selection;
While in RRC_IDLE or RRC_INACTIVE, and T331 is running, the UE shall:
1> if VarMeasIdleConfig includes neither a measIdleCarrierListEUTRA nor a measIdleCarrierListNR received from the RRCRelease message:
\( 2> \) if the UE supports idlelnactiveEUTRA-MeasReport:
\( 3> \) if the SIB11 includes the measIdleConfigSIB and contains measIdleCarrierListEUTRA:
4> store or replace the measIdleCarrierListEUTRA of measIdleConfigSIB of SIB11 within VarMeasIdleConfig;
\( 3> \) else:
4> remove the measIdleCarrierListEUTRA in VarMeasIdleConfig, if stored;
2> if the UE supports idlelnactiveNR-MeasReport:
3> if SIB11 includes the measIdleConfigSIB and contains measIdleCarrierListNR:
4> store or replace the measIdleCarrierListNR of measIdleConfigSIB of SIBII within VarMeasIdleConfig;

ETSI


--- Page 250  ---


3GPP TS 38.331 version 17.0.0 Release 17
249
ETSI TS 138331 V17.0.0 (2022-05)

3> else:
4> remove the measIdleCarrierListNR in VarMeasIdleConfig, if stored;
1> for each entry in the measIdleCarrierListNR within VarMeasIdleConfig that does not contain an ssb-MeasConfig received from the RRCRelease message:
\( 2> \) if there is an entry in measIdleCarrierListNR in measIdleConfigSIB of SIBII that has the same carrier frequency and subcarrier spacing as the entry in the measIdleCarrierListNR within VarMeasIdleConfig and that contains ssb-MeasConfig:
\( 3> \) delete the ssb-MeasConfig of the corresponding entry in the measIdleCarrierListNR within VarMeasIdleConfig;

3> store the SSB measurement configuration from SIB11 into nrofSS-BlocksToAverage, absThreshSSBlocksConsolidation, smtc, ssb-ToMeasure, deriveSSB-IndexFromCell, and ss-RSSI-Measurement within ssb-MeasConfig of the corresponding entry in the measIdleCarrierListNR within VarMeasIdleConfig;
\( 2> \) else if there is an entry in interFreq CarrierFreqList of SIB4 with the same carrier frequency and subcarrier spacing as the entry in measIdleCarrierListNR within VarMeasIdleConfig:
\( 3> \) delete the ssb-MeasConfig of the corresponding entry in the measIdleCarrierListNR within VarMeasIdleConfig;

3> store the SSB measurement configuration from SIB4 into nrofSS-BlocksToAverage, absThreshSSBlocksConsolidation, smtc, ssb-ToMeasure, deriveSSB-IndexFromCell, and ss-RSSI-Measurement within ssb-MeasConfig of the corresponding entry in the measIdleCarrierListNR within VarMeasIdleConfig;
\( 2> \) else:
\( 3> \) remove the \( s s b \)-MeasConfig of the corresponding entry in the measIdleCarrierListNR within VarMeasIdleConfig, if stored;

1> perform measurements according to 5.7.8.2a.
5.7.8.2 Void
5.7.8.2a Performing measurements

When performing measurements on NR carriers according to this clause, the UE shall derive the cell quality as specified in 5.5.3.3 and consider the beam quality to be the value of the measurement results of the concerned beam, where each result is averaged as described in TS 38.215 [9].

While in RRC_IDLE or RRC_INACTIVE, and T331 is running and and T319a is not running, the UE shall:
1> perform the measurements in accordance with the following:
\( 2> \) if the VarMeasIdleConfig includes the measIdleCarrierListEUTRA and the SIBI contains idleModeMeasurements EUTRA:
\( 3> \) for each entry in measIdleCarrierListEUTRA within VarMeasIdleConfig:
4> if UE supports NE-DC between the serving carrier and the carrier frequency indicated by carrierFreqEUTRA within the corresponding entry:
\( 5> \) perform measurements in the carrier frequency and bandwidth indicated by carrierFreqEUTRA and allowedMeasBandwidth within the corresponding entry;
\( 5> \) if the reportQuantitiesEUTRA is set to rsrq:
\( 6> \) consider RSRQ as the sorting quantity;
\( 5> \) else:
\( 6> \) consider RSRP as the sorting quantity;

ETSI


--- Page 251  ---


3GPP TS 38.331 version 17.0.0 Release 17
250
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) if the measCellListEUTRA is included:
\( 6> \) consider cells identified by each entry within the measCellListEUTRA to be applicable for idle/inactive mode measurement reporting;
\( 5> \) else:
\( 6> \) consider up to maxCellMeasIdle strongest identified cells, according to the sorting quantity, to be applicable for idle/inactive measurement reporting;
\( 5> \) for all cells applicable for idle/inactive measurement reporting, derive measurement results for the measurement quantities indicated by reportQuantitiesEUTRA;
\( 5> \) store the derived measurement results as indicated by reportQuantitiesEUTRA within the measReportIdleEUTRA in VarMeasIdleReport in decreasing order of the sorting quantity, i.e. the best cell is included first, as follows:
\( 6> \) if qualityThresholdEUTRA is configured:
\( 7> \) include the measurement results from the cells applicable for idle/inactive measurement reporting whose RSRP/RSRQ measurement results are above the value(s) provided in qualityThresholdEUTRA;

6> else:
\( 7> \) include the measurement results from all cells applicable for idle/inactive measurement reporting;
\( 2> \) if the VarMeasIdleConfig includes the measIdleCarrierListNR and the SIB1 contains
idleModeMeasurementsNR:
3> for each entry in measIdleCarrierListNR within VarMeasIdleConfig that contains ssb-MeasConfig:
4> if UE supports carrier aggregation or NR-DC between serving carrier and the carrier frequency and subcarrier spacing indicated by carrierFreq and ssbSubCarrierSpacing within the corresponding entry:
\( 5> \) perform measurements in the carrier frequency and subcarrier spacing indicated by carrierFreq and ssbSubCarrierSpacing within the corresponding entry;
\( 5> \) if the reportQuantities is set to rsrq:
\( 6> \) consider RSRQ as the cell sorting quantity;
\( 5> \) else:
\( 6> \) consider RSRP as the cell sorting quantity;
\( 5> \) if the measCellListNR is included:
\( 6> \) consider cells identified by each entry within the measCellListNR to be applicable for idle/inactive measurement reporting;
\( 5> \) else:
6> consider up to maxCellMeasIdle strongest identified cells, according to the sorting quantity, to be applicable for idle/inactive measurement reporting;
\( 5> \) for all cells applicable for idle/inactive measurement reporting, derive cell measurement results for the measurement quantities indicated by reportQuantities;
\( 5> \) store the derived cell measurement results as indicated by reportQuantities for cells applicable for idle/inactive measurement reporting within measResultsPerCarrierListldleNR in the measReportIdleNR in VarMeasIdleReport in decreasing order of the cell sorting quantity, i.e. the best cell is included first, as follows:

6> if qualityThreshold is configured:

ETSI


--- Page 252  ---


3GPP TS 38.331 version 17.0.0 Release 17
251
ETSI TS 138331 V17.0.0 (2022-05)

7> include the measurement results from the cells applicable for idle/inactive measurement reporting whose RSRP/RSRQ measurement results are above the value(s) provided in qualityThreshold;

6> else:
\( 7> \) include the measurement results from all cells applicable for idle/inactive measurement reporting;
\( 5> \) if beamMeasConfigIdle is included in the associated entry in measIdleCarrierListNR and if UE supports idlelnactiveNR-MeasBeamReport for the FR of the carrier frequency indicated by carrierFreq within the associated entry, for each cell in the measurement results:
\( 6> \) derive beam measurements based on SS/PBCH block for each measurement quantity indicated in reportQuantityRS-Indexes, as described in TS 38.215 [9];
\( 6> \) if the reportQuantityRS-Indexes is set to rsrq:
\( 7> \) consider RSRQ as the beam sorting quantity;
6> else:
\( 7> \) consider RSRP as the beam sorting quantity;
6> set resultsSSB-Indexes to include up to maxNrofRS-IndexesToReport SS/PBCH block indexes in order of decreasing beam sorting quantity as follows:

7> include the index associated to the best beam for the sorting quantity and if absThreshSSBlocksConsolidation is included, the remaining beams whose sorting quantity is above absThreshSS-BlocksConsolidation;

6> if the includeBeamMeasurements is set to true:
\( 7> \) include the beam measurement results as indicated by reportQuantityRS-Indexes;
\( 2> \) if, as a result of the procedure in this clause, the UE performs measurements in one or more carrier frequency indicated by measIdleCarrierListNR or measIdleCarrierListEUTRA:

3> store the cell measurement results for RSRP and RSRQ for the serving cell within measResultServingCell in the measReportIdleNR in VarMeasIdleReport.

3> if the VarMeasIdleConfig includes the measIdleCarrierListNR and it contains an entry with carrierFreq set to the value of the serving frequency:

4> if beamMeasConfigIdle is included in that entry, and if the UE supports idlelnactiveNRMeasBeamReport for the FR of the serving cell:
\( 5> \) derive beam measurements based on SS/PBCH block for each measurement quantity indicated in reportQuantityRS-Indexes, as described in TS 38.215 [9];
\( 5> \) if the reportQuantityRS-Indexes is set to rsrq:
\( 6> \) consider RSRQ as the beam sorting quantity;
5> else:
\( 6> \) consider RSRP as the beam sorting quantity;
\( 5> \) set resultsSSB-Indexes to include up to maxNrofRS-IndexesToReport SS/PBCH block indexes in order of decreasing beam sorting quantity as follows:

6> include the index associated to the best beam for the sorting quantity and if absThreshSSBlocksConsolidation is included in SIB2 of serving cell, the remaining beams whose sorting quantity is above absThreshSS-BlocksConsolidation;
\( 5> \) if the includeBeamMeasurements is set to true:

ETSI


--- Page 253  ---


3GPP TS 38.331 version 17.0.0 Release 17
252
ETSI TS 138331 V17.0.0 (2022-05)

\( 6> \) include the beam measurement results as indicated by reportQuantityRS-Indexes;
NOTE 1: How the UE performs idle/inactive measurements is up to UE implementation as long as the requirements in TS 38.133 [14] are met for measurement reporting.

NOTE 2: The UE is not required to perform idle/inactive measurements on a given carrier if the SSB configuration of that carrier provided via dedicated signaling is different from the SSB configuration broadcasted in the serving cell, if any.

NOTE 3: How the UE prioritizes which frequencies to measure or report (in case it is configured with more frequencies than it can measure or report) is left to UE implementation.
5.7.8.3 T331 expiry or stop

The UE shall:
1> if T331 expires or is stopped:
\( 2> \) release the VarMeasIdleConfig-
NOTE: It is up to UE implementation whether to continue idle/inactive measurements according to SIB11 and SIB4 configurations or according to E-UTRA SIB5 and E-UTRA SIB24 configurations as specified in TS 36.331 [10] upon inter-RAT cell reselection to E-UTRA, after T331 has expired or stopped.
5.7.8.4 Cell re-selection or cell selection while T331 is running

The UE shall:
1> if intra-RAT cell selection or reselection occurs while T331 is running:
\( 2> \) if validityAreaList is configured in VarMeasIdleConfig:
\( 3> \) if the serving frequency does not match with the carrierFreq of an entry in the validityAreaList; or
3> if the serving frequency matches with the carrierFreq of an entry in the validityAreaList, the validityCellList is included in that entry, and the physical cell identity of the serving cell does not match with any entry in validityCellList:
\( 4> \) stop timer T331;
\( 4> \) perform the actions as specified in 5.7.8.3, upon which the procedure ends.
1> else if inter-RAT cell selection or reselection occurs while T331 is running:
\( 2> \) stop timer T331;
\( 2> \) perform the actions as specified in 5.7.8.3;
5.7.9 Mobility history information
5.7.9.1 General

This procedure specifies how the mobility history information is stored by the UE, covering RRC_IDLE, RRC_INACTIVE and RRC_CONNECTED.
5.7.9.2 Initiation

If the UE supports storage of mobility history information, the UE shall:
1> Upon addition of a PSCell:
\( 2> \) include an entry in visitedPSCellInfoList in variable VarMobilityHistoryReport possibly after removing the oldest entry, if necessary, according to following:

ETSI


--- Page 254  ---


3GPP TS 38.331 version 17.0.0 Release 17
253
ETSI TS 138331 V17.0.0 (2022-05)

3> set the field timeSpent of the entry according to following:
4> if this is the first PSCell entry for the current PCell since entering the current PCell in RRC_CONNECTED:
\( 5> \) include the entry as the time spent with no PSCell since entering the current PCell in RRC_CONNECTED;

4> else:
\( 5> \) include the time spent with no PSCell since last PSCell release or SCG failure since entering the current PCell in RRC_CONNECTED;

1> Upon change, or release of a PSCell or upon declaring failure in a PSCell (SCG RLF or SCG HOF) while being connected to the current PCell:
\( 2> \) include an entry in visitedPSCellInfoList of the variable VarMobilityHistoryReport possibly after removing the oldest entry, if necessary, according to following:

3> if the global cell identity of the previous PSCell is available:
\( 4> \) include the global cell identity of that cell in the field visitedCellld of the entry;
3> else:
\( 4> \) include the physical cell identity and carrier frequency of that cell in the field visitedCellld of the entry;
\( 3> \) set the field timeSpent of the entry as the time spent in the previous PSCell while being connected to the current PCell;

1> Upon change of suitable cell, consisting of PCell in RRC_CONNECTED (for NR or E-UTRA cell) or serving cell in RRC_INACTIVE (for NR cell) or in RRC_IDLE (for NR or E-UTRA cell), to another NR or E-UTRA cell, or when entering any cell selection' state from 'camped normally' state in NR or LTE or when entering 'any cell selection' state from a suitable cell in RRC_CONNECTED state in NR or LTE:
\( 2> \) include an entry in visitedCellInfoList of the variable VarMobilityHistoryReport possibly after removing the oldest entry, if necessary, according to following:

3> if the global cell identity of the previous PCell/serving cell is available:
4> include the global cell identity of that cell in the field visitedCellld of the entry;
3> else:
\( 4> \) include the physical cell identity and carrier frequency of that cell in the field visitedCellld of the entry;

3> set the field timeSpent of the entry as the time spent in the previous PCell/serving cell;
3> if the UE continues to be connected to the same PSCell during the change of the PCell in
RRC_CONNECTED:
\( 4> \) include an entry in visitedPSCellInfoList of the variable VarMobilityHistoryReport possibly after removing the oldest entry, if necessary, according to following:
\( 5> \) if the global cell identity of the PSCell is available:
\( 6> \) include the global cell identity of that cell in the field visitedCellld of the entry;
\( 5> \) else:
6> include the physical cell identity and carrier frequency of that cell in the field visitedCellld of the entry;
\( 5> \) set the field timeSpent of the entry as the time spent in the PSCell, while being connected to previous PCell;

ETSI


--- Page 255  ---


3GPP TS 38.331 version 17.0.0 Release 17
254
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) else if the UE changes PSCell, or attempts to change PSCell but fails, at the same time as the change of the PCell in RRC_CONNECTED:

4> include an entry in visitedPSCelllnfoList in variable VarMobilityHistoryReport possibly after removing the oldest entry, if necessary, according to following:
\( 5> \) if the global cell identity of the previous PSCell is available:
\( 6> \) include the global cell identity of that cell in the field visitedCellld of the entry;
\( 5> \) else:
\( 6> \) include the physical cell identity and carrier frequency of that cell in the field visitedCellld of the entry;
\( 5> \) set the field timeSpent of the entry as the time spent in the PSCell, while being connected to previous PCell;
\( 3> \) if the UE was not configured with a PSCell at the time of change of PCell in RRC_CONNECTED:
4> include an entry in visitedPSCellInfoList after removing the oldest entry, if necessary, according to the following;
\( 5> \) set the field timeSpent of the entry as the time without PSCell according to the following:
6> if the UE experienced a PSCell release or secondary cell radio link failure since entering the previous PCell in RRC_CONNECTED:
\( 7> \) include the time spent with no PSCell since last PSCell release or secondary cell radio link failure since entering the previous PCell in RRC_CONNECTED;
\( 3> \) if visitedPSCelllnfoList exists in VarMobilityHistoryReport:
\( 4> \) include visitedPSCellInfoList in the visitedCellInfoList of the variable VarMobilityHistoryReport associating it with the latest PCell entry;
\( 4> \) remove visitedPSCelllnfoList from the variable VarMobilityHistoryReport;
1> upon entering 'camped normally' state in NR (in RRC_[DLE or RRC_INACTIVE) or E-UTRA (in RRC_IDLE) while previously in RRC_CONNECTED state NR or LTE while not connected to a PSCell:
\( 2> \) include an entry in visitedPSCellInfoList after removing the oldest entry, if necessary, according to the following;
\( 3> \) set the field timeSpent of the entry as the time without PSCell according to the following:
4- if the UE experienced a PSCell release or secondary cell radio link failure since entering the current PCell in RRC_CONNECTED:
\( 5> \) include the time spent with no PSCell since last PSCell release or SCG radio link failure after entering the current PCell in RRC_CONNECTED.

1> upon entering 'camped normally' state in NR (in RRC_[DLE or RRC_INACTIVE) or E-UTRA (in RRC_IDLE) while previously in 'any cell selection' state or 'camped on any cell' state in NR or LTE:
\( 2> \) include an entry in variable VarMobilityHistoryReport possibly after removing the oldest entry, if necessary, according to following:
\( 3> \) set the field timeSpent of the entry as the time spent in 'any cell selection' state and/or 'camped on any cell' state in NR or LTE.

ETSI


--- Page 256  ---


3GPP TS 38.331 version 17.0.0 Release 17
255
ETSI TS 138331 V17.0.0 (2022-05)
5.7.10 UE Information
5.7.10.1 General

Figure 5.7.10.1-1: UE information procedure

The UE information procedure is used by the network to request the UE to report information.
5.7.10.2 Initiation

The network initiates the procedure by sending the UEInformationRequest message. The network should initiate this procedure only after successful security activation.
5.7.10.3 Reception of the UEInformationRequest message

Upon receiving the UEInformationRequest message, the UE shall, only after successful security activation:
1> if the idleModeMeasurementReq is included in the UEInformationRequest and the UE has stored VarMeasIdleReport that contains measurement information concerning cells other than the PCell:
\( 2> \) set the measResultldleEUTRA in the UEInformationResponse message to the value of measReportIdleEUTRA in the VarMeasIdleReport, if available;
\( 2> \) set the measResultIdleNR in the UEInformationResponse message to the value of measReportIdleNR in the VarMeasIdleReport, if available;
\( 2> \) discard the VarMeasIdleReport upon successful delivery of the UEInformationResponse message confirmed by lower layers;
\( 1> \) if the logMeasReportReq is present and if the RPLMN is included in plmn-IdentityList stored in VarLogMeasReport:

2 if VarLogMeasReport includes one or more logged measurement entries, set the contents of the logMeasReport in the UEInformationResponse message as follows:

3> include the absoluteTimeStamp and set it to the value of absoluteTimeInfo in the VarLogMeasReport;
3> include the traceReference and set it to the value of traceReference in the VarLogMeasReport;
\( 3> \) include the traceRecordingSessionRef and set it to the value of traceRecordingSessionRef in the VarLogMeasReport;
\( 3> \) include the tce-Id and set it to the value of tce-Id in the VarLogMeasReport;
3> include the logMeasInfoList and set it to include one or more entries from the VarLogMeasReport starting from the entries logged first, and for each entry of the logMeasInfoList that is included, include all information stored in the corresponding logMeasInfoList entry in VarLogMeasReport;

3> if the VarLogMeasReport includes one or more additional logged measurement entries that are not included in the logMeasInfoList within the UEInformationResponse message:

ETSI


--- Page 257  ---


3GPP TS 38.331 version 17.0.0 Release 17
256
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) include the \( \log \) MeasAvailable;
4 if bt-LocationInfo is included in locationInfo of one or more of the additional logged measurement entries in VarLogMeasReport that are not included in the logMeasInfoList within the UEInformationResponse message:
\( 5> \) include the logMeasAvailableBT;
4> if wlan-LocationInfo is included in locationInfo of one or more of the additional logged measurement entries in VarLogMeasReport that are not included in the logMeasInfoList within the UEInformationResponse message:
\( 5> \) include the \( \log \) MeasAvailableWLAN;
\( 1> \) if \( r a \)-ReportReq is set to true and the UE has random access related information available in VarRA-Report and if the RPLMN is included in plmn-IdentityList stored in VarRA-Report:
\( 2> \) set the ra-ReportList in the UEInformationResponse message to the value of ra-ReportList in VarRA-Report;
\( 2> \) discard the ra-ReportList from VarRA-Report upon successful delivery of the UEInformationResponse message confirmed by lower layers;
\( 1> \) if \( n f \)-ReportReq is set to true:
\( 2> \) if the UE has radio link failure information or handover failure information available in VarRLF-Report and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report:
\( 3> \) set timeSinceFailure in VarRLF-Report to the time that elapsed since the last radio link failure or handover failure in NR;
\( 3> \) set the \( r l f \)-Report in the UEInformationResponse message to the value of \( r l f \)-Report in VarRLF-Report;
\( 3> \) discard the \( r f f \)-Report from VarRLF-Report upon successful delivery of the UEInformationResponse message confirmed by lower layers;

2> else if the UE is capable of cross-RAT RLF reporting as defined in TS 38.306 [26] and has radio link failure information or handover failure information available in VarRLF-Report of TS 36.331 [10] and if the RPLMN is included in plmn-IdentityList stored in VarRLF-Report of TS 36.331 [10]:
\( 3> \) set timeSinceFailure in VarRLF-Report of TS 36.331 [10] to the time that elapsed since the last radio link failure or handover failure in EUTRA;
\( 3> \) set failedPCellId-EUTRA in the \( r \) ff-Report in the UEInformationResponse message to indicate the PCell in which RLF was detected or the source PCell of the failed handover in the VarRLF-Report of TS 36.331 [10];
\( 3> \) set the measResult-RLF-Report-EUTRA in the rlf-Report in the UEInformationResponse message to the value of nf-Report in VarRLF-Report of TS 36.331 [10];
\( 3> \) discard the rff-Report from VarRLF-Report of TS 36.331 [10] upon successful delivery of the UEInformationResponse message confirmed by lower layers;
\( 1> \) if connEstFailReportReq is set to true and the UE has connection establishment failure or connection resume failure information in VarConnEstFailReport or VarConnEstFailReportList and if the RPLMN is equal to plmnIdentity stored in VarConnEstFailReport:
\( 2> \) set timeSinceFailure in VarConnEstFailReport to the time that elapsed since the last connection establishment failure or connection resume failure in NR;
\( 2> \) set the connEstFailReport in the UEInformationResponse message to the value of connEstFailReport in VarConnEstFailReport;
\( 2> \) for each connEstFailReport in the connEstFailReportList in the UEInformationResponse message, set the value to the value of connEstFailReport in VarConnEstFailReport in VarConnEstFailReportList;

ETSI


--- Page 258  ---


3GPP TS 38.331 version 17.0.0 Release 17
257
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) discard the connEstFailReport from VarConnEstFailReport and VarConnEstFailReportList upon successful delivery of the UEInformationResponse message confirmed by lower layers;
\( 1> \) if the mobilityHistoryReportReq is set to true:
\( 2> \) include the mobilityHistoryReport and set it to include visitedCellInfoList from VarMobilityHistoryReport;
\( 2> \) include in the mobilityHistoryReport an entry for the current PCell, possibly after removing the oldest entry if required, and set its fields as follows:

3> set visitedCellld to the global cell identity or the physical cell identity and carrier frequency of the current PCell:
\( 3> \) set field timeSpent to the time spent in the current PCell;
3> if visitedPSCellInfoList is present in VarMobilityHistoryReport:
4> for the newest entry of the PCell in the mobiliyHistoryReport, include visitedPSCellInfoList from VarMobilityHistoryReport;

4> if the UE is configured with a PSCell:
\( 5> \) for the newest entry of the PCell in the mobiliyHistoryReport, include the current PSCell information in the visitedPSCellInfoList, possibly after removing the oldest entry, if required, and set its fields as follows:

6> set visitedCellld to the global cell identity or the physical cell identity and carrier frequency of the current PSCell:

6> set field timeSpent to the time spent in the current PSCell while being connected to the current PCell;

4> else:
5> for the newest entry of the PCell in the mobiliyHistoryReport, include a new entry in the visitedPSCellInfoList, possibly after removing the oldest entry, if required, and set its fields as follows:

6> set field timeSpent to the time spent without PSCell in the current PCell since last PSCell release or secondary cell radio link failure since connected to the current PCell in RRC_CONNECTED;

3> else:
4> if the UE is configured with a PSCell:
\( 5> \) for the newest entry of the PCell in the mobiliyHistoryReport, include the current PSCell information in the visitedPSCellInfoList, possibly after removing the oldest entry, if required, and set its fields as follows:

6> set visitedCellld to the global cell identity or the physical cell identity and carrier frequency of the current PSCell:

6> set field timeSpent to the time spent in the current PSCell while being connected to the current PCell;
\( 4> \) else:
5> for the newest entry of the PCell in the mobiliyHistoryReport, include a new entry in the visitedPSCellInfoList, possibly after removing the oldest entry, if required, and set its fields as follows:

6> set field timeSpent to the time spent without PSCell in the current PCell since connected to the current PCell in RRC_CONNECTED;

1> if the successHO-ReportReq is set to true and if the RPLMN is included in the plmn-IdentityList stored in VarSuccessHO-Report:

ETSI


--- Page 259  ---


3GPP TS 38.331 version 17.0.0 Release 17
258
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the successHO-Report in the VarSuccessHO-Report concerns a DAPS handover:
3> set upInterruptionTimeAtHO in VarSuccessHO-Report to include the time elapsed between the time of arrival of the last PDCP PDU received from the source cell of the concerned handover and the time of arrival of the first non-duplicate PDCP PDU received from the target cell of the concerned handover, as measured at the time of arrival of the first non-duplicate PDCP PDU received from the target cell
\( 2> \) set the successHO-Report in the UEInformationResponse message to the value of successHO-Report in the VarSuccessHO-Report, if available;
\( 2> \) discard the VarSuccessHO-Report upon successful delivery of the UEInformationResponse message confirmed by lower layers;
\( 1> \) if the logMeasReport is included in the UEInformationResponse:
\( 2> \) submit the UEInformationResponse message to lower layers for transmission via SRB2;
\( 2> \) discard the logged measurement entries included in the logMeasInfoList from VarLogMeasReport upon successful delivery of the UEInformationResponse message confirmed by lower layers;
\( 1> \) else:
\( 2> \) submit the UEInformationResponse message to lower layers for transmission via SRB1.
5.7.10.4 Actions upon successful completion of a random-access procedure or on successful or unsuccessful completion of a procedure for request of ondemand system information

Upon successfully performing random-access procedure initialized with 4-step or 2-step RA type, or upon failed or successfully completed on-demand system information acquisition procedure, the UE shall:

1> if the RPLMN or the PLMN selected by upper layers (see TS24.501 [23]) from the PLMN(s) included in the plmn-IdentityList in SIBI is not included in plmn-IdentityList stored in a non-empty VarRA-Report:
\( 2> \) clear the information included in VarRA-Report;
\( 1> \) if the number of \( R A \)-Report entries stored in the ra-ReportList in VarRA-Report is less than maxRAReport:
\( 2> \) if the number of PLMN entries in plmn-IdentityList stored in VarRA-Report is less than maxPLMN; or
\( 2> \) if the number of PLMN entries in plmn-IdentityList stored in VarRA-Report is equal to maxPLMN and the list of EPLMNs is subset of or equal to the plmn-IdentityList stored in VarRA-Report:

3> append the following contents associated to the successfully completed random-access procedure as a new entry in the VarRA-Report:

4> if the list of EPLMNs has been stored by the UE:
\( 5> \) set the plmn-IdentityList to include the list of EPLMNs stored by the UE (i.e. includes the RPLMN) without exceeding the limit of maxPLMN;
\( 4> \) else:
\( 5> \) set the pimn-Identity, in plmn-IdentityList, to the PLMN selected by upper layers (see TS 24.501
[23]) from the PLMN(s) included in the plmn-IdentityInfoList in SIB1;
4> set the cellld to the global cell identity and the tracking area code, if available, otherwise to the physical cell identity and carrier frequency of the cell in which the corresponding random-access preamble was transmitted;

4> if the corresponding random-access procedure was performed on an SCell of MCG:
\( 5> \) set the spCellld to the global cell identity of the PCell;
\( 4> \) if the corresponding random-access procedure was performed on an SCell of SCG:

ETSI


--- Page 260  ---


3GPP TS 38.331 version 17.0.0 Release 17
259
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) set the spCellld to the global cell identity of the PSCell;
4> set the raPurpose to include the purpose of triggering the random-access procedure;
4> set the ra-Information Common as specified in clause 5.7.10.5.
The UE may discard the random access report information, i.e release the UE variable VarRA-Report, 48 hours after the last successful random access procedure related information is added to the VarRA-Report.

NOTE 1: The UE does not \( \log \) the RA information in the RA report if the triggering event of the random access is consistent UL LBT on SpCell as specified in TS 38.321 [6].
5.7.10.5 RA information determination for RA report and RLF report

The UE shall set the content in ra-InformationCommon as follows:
\( 1> \) set the absoluteFrequencyPointA to indicate the absolute frequency of the reference resource block associated to the random-access resources used in the random-access procedure;
\( 1> \) set the locationAndBandwidth and subcarrierSpacing associated to the UL BWP of the random-access resources used in the random-access procedure;
\( 1> \) if contention based random-access resources are used in the random-access procedure:
\( 2> \) set the msgl-FrequencyStart associated to the 4 step random-access resources if used in the random-access procedure, and if its value is different from the value of msgA-RO-FrequencyStart if it is included in the raInformationCommon;
\( 2> \) set the msgl-FDM associated to the 4 step random-access resources if used in the random-access procedure, and if its value is different from the value of msgA-RO-FDMCFRA if it is included in the raInformation Common;
\( 2> \) if msgl-SubcarrierSpacing associated to the 4 step random-access resources used in the random-access procedure is available, and if its value is different from the value of msgA-SubcarrierSpacing if it is included in the ra-InformationCommon:

3> set the msg 1-SubcarrierSpacing associated to the 4 step random-access resources used in the randomaccess procedure;
\( 2> \) else:
3> set the msgl-SCS-From-prach-ConfigurationIndex to the subcarrier spacing as derived from the prachConfigurationIndex used in the 4-step random-access procedure, and if its value is different from the value of msgA-SCS-From-prach-ConfigurationIndex if it is included in the ra-InformationCommon;
\( 2> \) set the msgA_RO-FrequencyStart and msgA-RO-FDM and msgA-SubcarrierSpacing associated to the 2 step random- access resources if used in the random-access procedure;
\( 2> \) if \( m s g A \)-SubcarrierSpacing associated to the 2 step random-access resources used in the random-access procedure is available:

3> set the msgA-SubcarrierSpacing associated to the 2 step random-access resources used in the randomaccess procedure;
\( 2> \) else:
3> set the msgA-SCS-From-prach-ConfigurationIndex to the subcarrier spacing as derived from the msgA-PRACH-ConfigurationIndex used in the 2-step random-access procedure;
\( 1> \) if contention free random-access resources are used in the random-access procedure:
\( 2> \) set the \( m s g \) l-FrequencyStartCFRA and \( m s g \) l-FDMCFRA associated to the 4 step random-access resources if used in the random-access procedure;
\( 2> \) if msg 1 -SubcarrierSpacing associated to the 4 step random-access resources used in the random-access procedure is available:

ETSI


--- Page 261  ---


3GPP TS 38.331 version 17.0.0 Release 17
260
ETSI TS 138331 V17.0.0 (2022-05)

3> set the msg/-SubcarrierSpacingCFRA associated to the 4 step random-access resources used in the random-access procedure;

2> else:
3> set the msg1-SCS-From-prach-ConfigurationIndex to the subcarrier spacing as derived from the prachConfigurationIndex used in the 4 step random-access procedure;
\( 2> \) set the msgA-RO-FrequencyStartCFRA and msgA-RO-FDMCFRA associated to the 2 step contention free randomaccess resources if used in the random-access procedure;
\( 2> \) set the msgA-MCS, the nrofPRBs-PerMsgA-PO, the msgA-PUSCH-TimeDomainAllocation, the frequencyStartMsgA-PUSCH, the nrofMsgA-PO-FDM associated to the 2 step random-access resources if used in the random-access procedure;
\( 2> \) if \( m s g A \)-SubcarrierSpacing associated to the 2 step random-access resources used in the random-access procedure is available:

3> set the msgA-SubcarrierSpacing associated to the 2 step random-access resources used in the randomaccess procedure;
\( 2> \) else:
3> set the msgA-SCS-From-prach-Configurationlndex to the subcarrier spacing as derived from the msgA-PRACH-ConfigurationIndex used in the 2-step random-access procedure;

1> if the random access procedure is initialized with RA_TYPE set to 2-stepRA as described in TS 38.321 [3]:
\( 2> \) set the dilPathlossRSRP to the measeured RSRP of the DL pathloss reference obtained at the time of RA_Type selection stage of the initialization of the RA procedure as captured in TS 38.321 [3];
\( 2> \) if the configuration for the random access msgA-TransMax was configured in RACH-ConfigDedicated for this random access procedure:

3> set msgA-TransMax to the value of msgA-TransMax in RACH-ConfigDedicated;
\( 2> \) else if msgA-TransMax was configured in RACH-ConfigCommonTwoStepRA:
3> set msgA-TransMax to the value of msgA-TransMax in RACH-ConfigCommonTwoStepRA;
2> set the msgA-PUSCH-PayloadSize to the size of the overall payload available in the UE buffer at the time of initiating the 2 step RA procedure;
\( 1> \) if the purpose of the random access procedure is to request on-demand system information (i.e., if the raPurpose is set to requestForOtherSI or msg3RequestForOtherS/):
\( 2> \) set the intendedSIBs to indicate the SIB(s) the UE wanted to receive as a result of the SI request;
\( 2> \) set the ssbsForSI-Acquisition to indicate the SSB(s) used to receive the SI message;
\( 2> \) if the on-demand system information acquisition was successful:
\( 3> \) set the onDemandSISuccess to true;
\( 2> \) else:
3> set the onDemandSISuccess to false;
1> set the parameters associated to individual random-access attempt in the chronological order of attempts in the perRAInfoList as follows:

2> if the random-access resource used is associated to a SS/PBCH block, set the associated random-access parameters for the successive random-access attempts associated to the same SS/PBCH block for one or more random-access attempts as follows:
\( 3> \) set the ssb-Index to include the SS/PBCH block index associated to the used random-access resource;

ETSI


--- Page 262  ---


3GPP TS 38.331 version 17.0.0 Release 17
261
ETSI TS 138331 V17.0.0 (2022-05)

3> set the numberOfPreamblesSentOnSSB to indicate the number of successive random-access attempts associated to the SS/PBCH block;

3> for each random-access attempt performed on the random-access resource, include the following parameters in the chronological order of the random-access attempt:

4 - if the random-access attempt is performed on the contention based random-access resource and if raPurpose is not equal to 'requestForOtherSF, include contentionDetected as follows:

5> if contention resolution was not successful as specified in TS 38.321 [6] for the transmitted preamble:
\( 6> \) set the contentionDetected to true;
\( 5> \) else:
\( 6> \) set the contentionDetected to false;
\( 4> \) if the random access attempt is a 2 -step random access attempt:
5> if fallback from 2-step random access to 4-step random access occurred during the random access attempt:

6> set fallbackToFourStepRA to true;
5> else:
6> set fallbackToFourStepRA to false;
\( 4> \) if the random-access attempt is performed on the contention based random-access resource; or
4> if the random-access attempt is performed on the contention free random-access resource and if the random-access procedure was initiated due to the PDCCH ordering:
\( 5> \) if the random access attempt is a 4 -step random access attempt and the SS/PBCH block RSRP of the SS/PBCH block corresponding to the random-access resource used in the random-access attempt is above rsrp-ThresholdSSB; or
\( 5> \) if the random access attempt is a 2 -step random access attempt and the SS/PBCH block RSRP of the SS/PBCH block corresponding to the random-access resource used in the random-access attempt is above msgA-RSRP-ThresholdSSB:
\( 6> \) set the dIRSRPAboveThreshold to true;
\( 5> \) else:
\( 6> \) set the diRSRPAboveThreshold to false;
2> else if the random-access resource used is associated to a CSI-RS, set the associated random-access parameters for the successive random-access attempts associated to the same CSI-RS for one or more random-access attempts as follows:

3> set the csi-RS-Index to include the CSI-RS index associated to the used random-access resource;
3> set the numberOfPreamblesSentOnCSI-RS to indicate the number of successive random-access attempts associated to the CSI-RS.

NOTE 1: Void.
5.7.10.6 Actions for the successful handover report determination

The UE shall:
1> if the ratio between the value of the elapsed time of the timer T304 and the configured value of the timer T304, included in the last applied RRCReconfiguration message including the reconfigurationWithSync, is greater than

ETSI


--- Page 263  ---


3GPP TS 38.331 version 17.0.0 Release 17
262
ETSI TS 138331 V17.0.0 (2022-05)

thresholdPercentageT304 included in the successHO-Config received before executing the last reconfiguration with sync; or
\( 1> \) if the ratio between the value of the elapsed time of the timer T310 and the configured value of the timer T310, configured while the UE was connected to the source PCell before executing the last reconfiguration with sync, is greater than thresholdPercentageT310 included in the successHO-Config configured by the source PCell before executing the last reconfiguration with sync; or

1> if the T312 associated to the measurement identity of the target cell was running at the time of initiating the execution of the reconfiguration with sync procedure and if the ratio between the value of the elapsed time of the timer T312 and the configured value of the timer T312, configured while the UE was connected to the source PCell before executing the last reconfiguration with sync, is greater than thresholdPercentageT312 included in the successHO-Config configured by the source PCell before executing the last reconfiguration with sync; or
\( 1> \) if sourceDAPS-FailureReporting included in the successHO-Config before executing the last reconfiguration with sync is set to true and if the last executed handover was a DAPS handover and if an RLF occurred at the source PCell during the DAPS handover while T304 was running:
\( 2> \) store the successful handover information in VarSuccessHO-Report and determine the content in VarSuccessHO-Report as follows:
\( 3> \) clear the information included in VarSuccessHO-Report, if any;
\( 3> \) set the plmn-IdentityList to include the list of EPLMNs stored by the UE (i.e., includes the RPLMN);
\( 3> \) set the \( c-R N T I \) to the C-RNTI assigned by the target PCell of the handover;
\( 3> \) for the source PCell in which the last RRCReconfiguration message including reconfiguration WithSync was applied:
\( 4> \) set the sourceCellID in sourceCelllnfo to the global cell identity and tracking area code of the source PCell;
\( 4> \) set the sourceCellMeas in sourceCellinfo to include the cell level RSRP, RSRQ and the available SINR, of the source PCell based on the available SSB and CSI-RS measurements collected up to the moment the UE sends RRCReconfigurationComplete message,
\( 4> \) set the rsIndexResults in sourceCellMeas to include all the available SSB and CSI-RS measurement quantities of the source PCell collected up to the moment the UE sends RRCReconfigurationComplete message;

4 - if the last executed handover was a DAPS handover and if an RLF occurred at the source PCell during the DAPS handover while T304 was running:
\( 5> \) set the rlf-InSourceDAPS in sourceCelllnfo to true;
\( 3> \) for the target PCell indicated in the last applied RRCReconfiguration message including reconfigurationWithSync:
\( 4> \) set the targetCellID in targetCelllnfo to the global cell identity and tracking area code of the target PCell;
\( 4> \) set the targetCellMeas in targetCellinfo to include the cell level RSRP, RSRQ and the available SINR, of the target PCell based on the available SSB and CSI-RS measurements collected up to the moment the UE sends RRCReconfigurationComplete message;

4> set the rsIndexResults in targetCellMeas to include all the available SSB and CSI-RS measurement quantities of the target PCell collected up to the moment the UE sends RRCReconfigurationComplete message;

4> if the last applied RRCReconfiguration message including reconfiguration WithSync was included in the stored condRRCReconfig:
\( 5> \) set the timeSinceCHO-Reconfig to the time elapsed between the initiation of the execution of conditional reconfiguration for the target PCell and the reception of the last

ETSI


--- Page 264  ---


3GPP TS 38.331 version 17.0.0 Release 17
263
ETSI TS 138331 V17.0.0 (2022-05)

conditionalReconfiguration including the condRRCReconfig of the target PCell in the source PCell;

3> if the ratio between the value of the elapsed time of the timer T304 and the configured value of the T304 timer, included in the last applied RRCReconfiguration message including the reconfigurationWithSync, is greater than thresholdPercentageT304 included in the successHO-Config received before executing the last reconfiguration with sync:
\( 4> \) set t304-cause in shr-Cause to true;
\( 4> \) set the ra-Information Common as specified in clause 5.7.10.5;
\( 3> \) if the ratio between the value of the elapsed time of the timer T310 and the configured value of the T310 timer, configured while the UE was connected to the source PCell before executing the last reconfiguration with sync, is greater than thresholdPercentageT310 included in the successHO-Config configured by the source PCell before executing the last reconfiguration with sync:
\( 4> \) set \( t 310 \)-cause in shr-Cause to true;
\( 3> \) if the ratio between the value of the elapsed time of the timer T312 and the configured value of the T312 timer, configured while the UE was connected to the source PCell before executing the last reconfiguration with sync, is greater than thresholdPercentageT312 included in the successHO-Config configured by the source PCell before executing the last reconfiguration with sync:
\( 4> \) set t312-cause in shr-Cause to true;
\( 3> \) if sourceDAPS-FailureReporting included in the successHO-Config configured by the source PCell before executing the last reconfiguration with sync is set to true, and if the last executed handover was a DAPS handover and if an RLF occurred at the source PCell during the DAPS handover while T304 was running:
\( 4> \) set sourceDAPS-Failure in shr-Cause to true;
\( 3> \) for each of the measObjectNR, configured by the source PCell, in which the last RRCReconfiguration message including reconfiguration WithSync was applied:

4 if measurements are available for the measObjectNR:
\( 5> \) if the SS/PBCH block-based measurement quantities are available:
6> set the measResultListNR in measResultNeighCells to include all the available measurement quantities of the best measured cells, other than the source PCell or target PCell, ordered such that the cell with highest SS/PBCH block RSRP is listed first if SS/PBCH block RSRP measurement results are available, otherwise the cell with highest SS/PBCH block RSRQ is listed first if SS/PBCH block RSRQ measurement results are available, otherwise the cell with highest SS/PBCH block SINR is listed first, based on the available SS/PBCH block based measurements collected up to the moment the UE sends the RRCReconfigurationComplete message;
\( 6> \) for each neighbour cell included, include the optional fields that are available;
\( 5> \) if the CSI-RS measurement quantities are available:
6> set the measResultListNR in measResultNeighCells to include all the available measurement quantities of the best measured cells, other than the source PCell and target PCell, ordered such that the cell with highest CSI-RS RSRP is listed first if CSI-RS RSRP measurement results are available, otherwise the cell with highest CSI-RS RSRQ is listed first if CSI-RS RSRQ measurement results are available, otherwise the cell with highest CSI-RS SINR is listed first, based on the available CSI-RS based measurements collected up to the moment the UE sends the RRCReconfigurationComplete message;
\( 6> \) for each neighbour cell included, include the optional fields that are available;
\( 3> \) for each of the measObjectEUTRA, configured by the source PCell in which the last RRCReconfiguration message including reconfigurationWithSync was applied:

ETSI


--- Page 265  ---


3GPP TS 38.331 version 17.0.0 Release 17
264
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) if measurements are available for the measObjectEUTRA:
\( 5> \) set the measResultListEUTRA in measResultNeighCells to include the best measured cells ordered such that the cell with highest RSRP is listed first if RSRP measurement results are available, otherwise the cell with highest RSRQ is listed first, based on measurements collected up to the moment the UE sends the RRCReconfigurationComplete message;
\( 5> \) for each neighbour cell included, include the optional fields that are available;
3> for each of the neighbour cells included in measResultNeighCells:
4> if the cell was a candidate target cell included in the condRRCReconfig within the conditionalReconfiguration configured by the source PCell, in which the last RRCReconfiguration message including reconfigurationWithSync was applied:
\( 5> \) set the choCandidate to true in measResultNR;
\( 3> \) if available, set the locationInfo as in 5.3.3.7;
\( 1> \) release successHO-Config configured by the source PCell before executing the last reconfiguration with sync.
The UE may discard the successful handover information, i.e., release the UE variable VarSuccessHO-Report, 48 hours after the last successful handover information is added to the VarSuccessHO-Report.
5.7.12 IAB Other Information
5.7.12.1 General

Figure 5.7.12.1-1: IAB Other Information procedure

The IAB Other Information procedure is used by IAB-MT to request the IAB-donor-CU to allocate IP address or inform the IAB-donor-CU of the IP address for the collocated IAB-DU.
5.7.12.2 Initiation

Upon initiation of the procedure, the IAB-MT shall:
1> initiate transmission of the IABOtherInformation message in accordance with 5.7.12.3;
5.7.12.3 Actions related to transmission of IABOtherInformation message

The IAB-MT shall set the contents of IABOtherInformation message as follows:
\( 1> \) if the procedure is used to request IP addresses:
\( 2> \) if IPv4 addresses are requested:
3> set the iab-IPv4-AddressNumReq to the number of [Pv4 addresses requested per specific usage;
2 if IPv6 addresses or [Pv6 address prefixes are requested:

ETSI


--- Page 266  ---


3GPP TS 38.331 version 17.0.0 Release 17
265
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) if IPv6 addresses are requested:
4> set the iab-IPv6-AddressNumReq to the number of IPv6 addresses requested per specific usage;
3> else if [Pv6 address prefixes are requested:
\( 4> \) set the iab-IPv6-AddressPrefixReq to true per specific usage;
1> if the procedure is used to report IP addresses:
\( 2> \) if IPv4 addresses are reported:
3> include iPv4-Address in iab-IPv4-AddressReport, and for each IP address included:
4> if IPv4 addresses are used for F1-C traffic:
\( 5> \) include these addresses in \( f 1 \)-C-Traffic-IP-Address.
4> if IPv4 addresses are used for F1-U traffic:
\( 5> \) include these addresses in \( f 1 \)-U-Traffic-IP-Address.
4> if IPv4 address are used for non-F1 traffic:
\( 5> \) include these addresses in non-fl-Traffic-IP-Address.
4> if IPv4 addresses are used for all traffic:
\( 5> \) include these addresses in all-Traffic-IAB-IP-Address.
\( 2> \) if IPv6 addresses or IPv6 address prefixes are reported:
3> if IPv6 addresses are reported:
4> include iPv6-Address in iab-IPv6-AddressReport, and for each IP address included;
\( 5> \) if IPv6 addresses are used for F1-C traffic:
\( 6> \) include these addresses in \( f 1 \)-C-Traffic-IP-Address.
\( 5> \) if IPv6 addresses are used for F1-U traffic:
\( 6> \) include these addresses in \( f 1 \)-U-Traffic-IP-Address.
\( 5> \) if IPv6 addresses are used for non-F1 traffic:
6> include these addresses in non-fl-Traffic-IP-Address.
\( 5> \) if IPv6 addresses are used for all traffic:
\( 6> \) include these addresses in all-Traffic-IAB-IP-Address.
3> else if [Pv6 address prefixes are reported:
\( 4> \) include these iPv6-Prefix in iab-IPv6-PrefixReport, and for each IP address prefix included;
\( 5> \) if this [Pv6 address prefix is used for F1-C traffic:
\( 6> \) include this prefix in fl-C-Traffic-IP-Address.
\( 5> \) if this [Pv6 address prefix is used for F1-U traffic:
\( 6> \) include this prefix in fl-U-Traffic-IP-Address.
5> if this IPv6 address prefix is used for non-F1 traffic:
6> include this prefix in non-fl-Traffic-IP-Address.
\( 5> \) if this IPv6 address prefix is used for all traffic:

ETSI


--- Page 267  ---


3GPP TS 38.331 version 17.0.0 Release 17
266
ETSI TS 138331 V17.0.0 (2022-05)

\( 6> \) include this prefix in all-Traffic-IAB-IP-Address.
\( 1> \) if the \( I A B-M T \) is in (NG)EN-DC:
\( 2> \) if SRB3 is configured:
3> submit the IABOtherInformation message via SRB3 to lower layers for transmission;
\( 2> \) else:
3> submit the IABOtherInformation message via the E-UTRA MCG embedded in E-UTRA RRC message ULInformationTransferMRDC as specified in TS 36.331 [10].

1> else:
\( 2> \) submit the IABOtherInformation message to lower layers for transmission.
5.7.13 RLM/BFD relaxation

The UE is only allowed to perform RLM and/or BFD relaxation according to requirements specified in TS 38.133 [14] when relaxed measurement criterion for low mobility and/or for good serving cell quality is met.
5.7.13.1 Relaxed measurement criterion for low mobility

The relaxed measurement criterion for UE with low mobility in RRC_CONNECTED is fulfilled when:
- (SS-RSRP \( { }_{\text {ReJ }} \) - SS-RSRP) < \( \mathrm{S}_{\text {SearchDeltaP-Connected, }} \)

Where:
- SS-RSRP = current L3 RSRP measurement of the SpCell based on SSB (dB).
- SS-RSRP \( { }_{\text {ReJ }}= \) reference L3 RSRP measurement of the SpCell based on SSB (dB), set as follows:
- After receiving low mobility criterion configuration, or
- After MAC of the CG successfully completes a Random Access procedure after applying a reconfigurationWithSync in spCellConfig of the CG while low mobility criterion is configured, or
- If (SS-RSRP - SS-RSRP \( { }_{\text {Rer }} \) ) \( >0 \), or
- If the relaxed measurement criterion has not been met for \( \mathrm{T}_{\text {SearchDelap-Connected }} \) :
- The UE shall set the value of SS-RSRP \( { }_{\mathrm{Re} 5} \) to the current SS-RSRP value of the SpCell.
5.7.13.2 Relaxed measurement criterion for good serving cell quality

The relaxed measurement criterion of good serving cell quality for RLM starts to be evaluated after receiving the good serving cell quality criterion configuration and is fulfilled when the downlink radio link quality on the configured RLMRS resource is evaluated to be better than the threshold \( \mathrm{Q}_{11}+\mathrm{XdB}_{3} \), wherein
- \( \quad \mathrm{Q}_{\mathrm{m}} \) is specified in clause 8.1 of TS 38.133 [14].
- X is the parameter offset in goodServingCellEvaluationRLM.

The relaxed measurement criterion of good serving cell quality for BFD starts to be evaluated after receiving the good serving cell quality criterion configuration and is fulfilled when the downlink radio link quality on the configured BFDRS resource is evaluated to be better than the threshold \( \mathrm{Q}_{11}+\mathrm{XdB}_{1} \), wherein
- \( \mathrm{Q}_{\mathrm{in}} \) is specified in clause 8.1 of TS 38.133 [14].

X is the parameter offset in goodServingCellEvaluationBFD.

ETSI


--- Page 268  ---


3GPP TS 38.331 version 17.0.0 Release 17
267
ETSI TS 138331 V17.0.0 (2022-05)
5.7.14 UE Positioning Assistance Information
5.7.14.1 General

Figure 5.7.14.1-1: UE Positioning Assistance Information procedure

The UE Positioning Assistance Information procedure is used by UE to report the UE Positioning Assistance Information. The UE reports the association between UL-SRS resources for positioning and the UE Tx TEG ID.
5.7.14.2 Initiation

A UE capable of providing the association between UL SRS Resource for positioning and UE Tx TEG ID in RRC_CONNECTED may initiate the procedure upon being configured to provide this association information.

Upon initiation of the procedure, the UE shall:
1> if ue-TxTEG-RequestUL-TDOA-Config in SRS-Config IE is configured to request the association between UL SRS Resource for positioning and Tx TEG:
\( 2> \) initiate transmission of the UEPositioningAssistanceInfo message in accordance with 5.7.14.3 to provide the association.
5.7.14.3 Actions related to transmission of UEPositioningAssistanceInfo message

The UE shall set the contents of the UEPositioningAssistancelnfo message as follows:
1> if transmission of the UEPositioningAssistancelnfo message is initiated to provide the association between UL SRS Resource for positioning and Tx TEG according to 5.7.14.2;
\( 2> \) include ue-TxTEG-AssociationList in the UEPositioningAssistanceInfo message;
5.7.15 SRS for Positioning in RRC_INACTIVE
5.7.15.1 General

SRS for Positioning can be configured to be transmitted in RRC_INACTIVE mode.

ETSI


--- Page 269  ---


3GPP TS 38.331 version 17.0.0 Release 17
268
ETSI TS 138331 V17.0.0 (2022-05)

Figure 5.7.15.1-1: SRS For Positioning Configuration in RRC INACTIVE Mode
5.7.15.2 Actions Related to SRS for Positioning at Cell Re-selection in RRC_INACTIVE

The UE shall:
\( 1> \) if cell reselection occurs when srs-PosRRC-InactiveConfig is configured:
\( 2> \) consider the Timing Advance value for SRS for Positioning transmission to be invalid;
\( 2> \) release the srs-PosRRC-InactiveConfig.
Editor's Note: To check further if clause 5.7.14 and 5.7.15 can be consolidated under new clause 5.X NR Positioning similar to clause 5.8 Sidelink.
5.7.16 Application layer measurement reporting
5.7.16.1 General

Figure 5.7.16.1-1: Application layer measurement reporting

The purpose of this procedure is to send application layer measurement reports to the network.
5.7.16.2 Initiation

A UE capable of application layer measurement reporting in RRC_CONNECTED may initiate the procedure when configured with application layer measurement, i.e. when appLayerMeasConfig and SRB4 have been configured by the network.

Upon initiating the procedure, the UE shall:
\( 1> \) for each measConfigAppLayerId:
\( 2> \) if the UE AS has received, but not sent, application layer measurement report from upper layers; and

ETSI


--- Page 270  ---


3GPP TS 38.331 version 17.0.0 Release 17
269
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the application layer measurement reporting has not been suspended for the measConfigAppLayerId associated with the application layer measurement report according to clause 5.3.5.13d:

3> set the measReportAppLayerContainer in the MeasurementReportAppLayer message to the received value of the application layer measurement report;
\( 2> \) set the measConfigAppLayerId in the MeasurementReportAppLayer message to the value of the measConfigAppLayerId received together with application layer measurement report information;
\( 2> \) if session start or stop information has been received from upper layers for the measConfigAppLayerId:
3> set the appLayerSessionStatus to the received value of the application layer measurement information;
2 if RAN visible application layer measurement report has been received from upper layers:
\( 3> \) for each appLayerBufferLevel value in the received RAN visible application layer measurement report:
4> set the appLayerBufferLevel values in the appLayerBufferLevelLIst to the buffer level values received from the upper layer in the order with the first appLayerBufferLevel value set to the newest received buffer level value, the second appLayerBufferLevel value set to the second newest received buffer level value, and so on until all the buffer level values received from the upper layer have been assigned or the configured maximum number of appLayerBufferLevel values have been set, if any;

3> set the initialPlayoutDelay to the received value in the RAN visible application layer measurement report, if any;

3> for each PDU session ID value indicated in the received RAN visible application layer measurement report, if any:

4> set the PDU-SessionID field in the pdu-SessionIdList to the indicated PDU session ID value;
\( 2> \) if the RRC message segmentation is enabled based on the field rrc-SegAllowed received in appLayerMeasConfig, and the encoded RRC message is larger than the maximum supported size of a PDCP SDU specified in TS 38.323 [5]:

3> initiate the UL message segment transfer procedure as specified in clause 5.7.7;
\( 2> \) else:
3> submit the MeasurementReportAppLayer message to lower layers for transmission upon which the procedure ends.
5.8 Sidelink
5.8.1 General

NR sidelink communication consists of unicast, groupcast and broadcast. For unicast, the PC5-RRC connection is a logical connection between a pair of a Source Layer-2 [D and a Destination Layer-2 ID in the AS. The PC5-RRC signalling, as specified in clause 5.8.9, can be initiated after its corresponding PC5 unicast link establishment (TS 23.287 [55]). The PC5-RRC connection and the corresponding sidelink SRBs and sidelink DRB(s) are released when the PC5 unicast link is released as indicated by upper layers.

For each PC5-RRC connection of unicast, one sidelink SRB (i.e. SL-SRB0) is used to transmit the PC5-S message(s) before the PC5-S security has been established. One sidelink SRB (i.e. SL-SRB1) is used to transmit the PC5-S messages to establish the PC5-S security. One sidelink SRB (i.e. SL-SRB2) is used to transmit the PC5-S messages after the PC5-S security has been established, which is protected. One sidelink SRB (i.e. SL-SRB3) is used to transmit the PC5-RRC signalling, which is protected and only sent after the PC5-S security has been established. For U2N Relay operation, one sidelink SRB (i.e. SL-SRB4) is used to transmit/receive the NR sidelink discovery messages.

For unicast of NR sidelink communication, AS security comprises of integrity protection of PC5 signalling (SL-SRB1, SL-SRB2 and SL-SRB3) and user data (SL-DRBs), and it further comprises of ciphering of PC5 signaling (SL-SRB1 only for the Direct Link Security Mode Complete message as specified in TS 24.587[57], SL-SRB2 and SL-SRB3) and user data (SL-DRBs). The ciphering and integrity protection algorithms and parameters for a PC5 unicast link are

ETSI


--- Page 271  ---


3GPP TS 38.331 version 17.0.0 Release 17
270
ETSI TS 138331 V17.0.0 (2022-05)

exchanged by PC5-S messages in the upper layers as specified in TS 33.536 [60], and apply to the corresponding PC5RRC connection in the AS. Once AS security is activated for a PC5 unicast link in the upper layers as specified in TS 33.536 [60], all messages on SL-SRB2 and SL-SRB3 and/or user data on SL-DRBs of the corresponding PC5-RRC connection are integrity protected and/or ciphered by the PDCP.

For unicast of NR sidelink communication, if the change of the key is indicated by the upper layers as specified in TS 24.587 [57], UE re-establishes the PDCP entity of the SL-SRB1, SL-SRB2, SL-SRB3 and SL-DRBs on the corresponding PC5-RRC connection.

NOTE 1: In case the configurations for NR sidelink communication are acquired via the E-UTRA, the configurations for NR sidelink communication in SIB12 and sl-ConfigDedicatedNR within RRCReconfiguration used in clause 5.8 are provided by the configurations in SystemInformationBlockType28 and sl-ConfigDedicatedForNR within RRCConnectionReconfiguration as specified in TS 36.331 [10], respectively.

NOTE 2: In this release, there is one-to-one correspondence between the PC5-RRC connection and the PC5 unicast link as specified in TS 38.300[2].

NOTE 3: All SL-DRBs related to the same PC5-RRC connection have the same activation/deactivation setting for ciphering and the same activation/deactivation setting for integrity protection as in TS 33.536 [60].

NOTE 4: When integrity check failure concerning SL-SRB1 for a specific destination is detected, the UE sends an indication to the upper layers [57].
5.8.2 Conditions for NR sidelink communication operation

The UE shall perform NR sidelink communication operation only if the conditions defined in this clause are met:
1> if the UE's serving cell is suitable (RRC_IDLE or RRC_INACTIVE or RRC_CONNECTED); and if either the selected cell on the frequency used for NR sidelink communication operation belongs to the registered or equivalent PLMN as specified in TS 24.587 [57] or the UE is out of coverage on the frequency used for NR sidelink communication operation as defined in TS 38.304 [20] and TS 36.304 [27]; or

1> if the UE's serving cell (RRC_IDLE or RRC_CONNECTED) fulfils the conditions to support NR sidelink communication in limited service state as specified in TS 23.287 [55]; and if either the serving cell is on the frequency used for NR sidelink communication operation or the UE is out of coverage on the frequency used for NR sidelink communication operation as defined in TS 38.304 [20] and TS 36.304 [27]; or
\( 1> \) if the UE has no serving cell (RRC_IDLE);
5.8.3 Sidelink UE information for NR sidelink communication
5.8.3.1 General

Figure 5.8.3.1-1: Sidelink UE information for NR sidelink communication

The purpose of this procedure is to inform the network that the UE:
- is interested or no longer interested to receive or transmit NR sidelink communication,
- is requesting assignment or release of transmission resource for NR sidelink communication,
- is reporting QoS parameters and QoS profile(s) related to NR sidelink communication,

ETSI


--- Page 272  ---


3GPP TS 38.331 version 17.0.0 Release 17
271
ETSI TS 138331 V17.0.0 (2022-05)
- is reporting that a sidelink radio link failure or sidelink RRC reconfiguration failure has been detected,
- is reporting the sidelink UE capability information of the associated peer UE for unicast communication,
- is reporting the RLC mode information of the sidelink data radio bearer(s) received from the associated peer UE for unicast communication,
- is reporting the sidelink DRX configuration received from the associated peer UE for NR sidelink unicast communication,
- is reporting the sidelink DRX assistance information received from the associated peer UE for NR sidelink unicast communication,
- is reporting, for NR sidelink groupcast or broadcast communication, [FFS on additional information],
- is reporting, for NR sidelink groupcast or broadcast communication, the Destination Layer-2 ID and QoS profile associated with its interested services that sidelink DRX is applied,
- is reporting DRX configuration reject information from its associated peer RX UE, when the UE is a TX UE and is performing sidelink operation with resource allocation mode 1 ,
- is reporting parameters related to U2N relay operation.

Editor's Note: FFS on the additional information/Tx profile, pending on reply from SA2 relate to WA "no additional RAN2 work if SA2 confirms it is feasible (whether the mapping from L2 id to TX profile is feasible in the gNB (like what we did in LTE)".
5.8.3.2 Initiation

A UE capable of NR sidelink communication or NR sidelink discovery or NR sidelink U2N relay operation that is in RRC_CONNECTED may initiate the procedure to indicate it is (interested in) receiving or transmitting NR sidelink communication or NR sidelink discovery or NR sidelink U2N relay operation in several cases including upon successful connection establishment or resuming, upon change of interest, upon changing QoS profiles, upon receiving UECapabilityInformationSidelink from the associated peer UE, upon RLC mode information updated from the associated peer UE or upon change to a PCell providing SIB12 including sl-ConfigCommonNR. A UE capable of NR sidelink communication may initiate the procedure to request assignment of dedicated sidelink DRB configuration and transmission resources for NR sidelink communication transmission. A UE capable of NR sidelink communication may initiate the procedure to report to the network that a sidelink radio link failure or sidelink RRC reconfiguration failure has been declared. A UE capable of NR sidelink discovery may initiate the procedure to request assignment of dedicated resources for sidelink discovery transmission or sidelink discovery reception. A UE capable of U2N relay operation may initiate the procedure to report/update parameters for acting as U2N Relay UE or U2N Remote UE (including L2 Remote UE's source L2 ID).

A UE capable of NR sidelink communication that is in RRC_CONNECTED may initiate the procedure to report the sidelink DRX configuration received from the associated peer UE for NR sidelink unicast communication, upon accepting the sidelink DRX configuration from the associated peer UE. A UE capable of NR sidelink communication that is in RRC_CONNECTED and is performing sidelink operation with resource allocation mode 1 may initiate the procedure to report the sidelink DRX assistance information received from the associated peer UE for NR sidelink unicast communication, upon receiving sidelink DRX assistance information from the associated peer UE.

An RX UE capable of NR sidelink communication that is in RRC_CONNECTED may initiate the procedure to report the Destination Layer-2 ID and QoS profile associated with its interested services that sidelink DRX is applied, for NR sidelink groupcast or broadcast communication.

Upon initiating this procedure, the UE shall:
\( 1> \) if SIB12 including \( s \)-ConfigCommonNR is provided by the PCell:
\( 2> \) ensure having a valid version of SIB12 for the PCell;
\( 2> \) if configured by upper layers to receive NR sidelink communication on the frequency included in \( s l \) FreqInfoList in SIB12 of the PCell:

3> if the UE did not transmit a SidelinkUEInformationNR message since last entering RRC_CONNECTED state; or

ETSI


--- Page 273  ---


3GPP TS 38.331 version 17.0.0 Release 17
272
ETSI TS 138331 V17.0.0 (2022-05)

3> if since the last time the UE transmitted a SidelinkUEInformationNR message the UE connected to a PCell not providing SIB12 including sl-ConfigCommonNR; or

3> if the last transmission of the SidelinkUEInformationNR message did not include sl-RxInterestedFreqList; or if the frequency configured by upper layers to receive NR sidelink communication on has changed since the last transmission of the SidelinkUEInformationNR message:

4> initiate transmission of the SidelinkUEInformationNR message to indicate the NR sidelink communication reception frequency of interest in accordance with 5.8.3.3;

3> if the UE received a sidelink DRX configuration for NR sidelink unicast communication from the associated peer UE and the UE accepted the sidelink DRX configuration:

4> initiate transmission of the SidelinkUEInformationNR message to report the sidelink DRX configuration in accordance with 5.8.3.3;

3> if the UE is an RX UE for NR sidelink groupcast or broadcast communication and is interested in a service that sidelink DRX is applied:

4> initiate transmission of the SidelinkUEInformationNR message to report the Destination Layer-2 ID and QoS profile associated with the service in accordance with 5.8.3.3;
\( 2> \) else:
\( 3> \) if the last transmission of the SidelinkUEInformationNR message included \( s \) /-RxInterestedFreqList:
4> initiate transmission of the SidelinkUEInformationNR message to indicate it is no longer interested in NR sidelink communication reception in accordance with 5.8.3.3;
\( 2> \) if configured by upper layers to transmit NR sidelink communication on the frequency included in \( s l \) FreqInfoList in SIB12 of the PCell:

3> if the UE did not transmit a SidelinkUEInformationNR message since last entering RRC_CONNECTED state; or

3> if since the last time the UE transmitted a SidelinkUEInformationNR message the UE connected to a PCell not providing SIB12 including sl-ConfigCommonNR; or
\( 3> \) if the last transmission of the SidelinkUEInformationNR message did not include \( s l \)-TxResourceReqList; or if the information carried by the \( s \)-TxResourceReqList has changed since the last transmission of the SidelinkUEInformationNR message:

4> initiate transmission of the SidelinkUEInformationNR message to indicate the NR sidelink communication transmission resources required by the UE in accordance with 5.8.3.3;

3> if the UE received a sidelink DRX assistance information for NR sidelink unicast communication from the associated peer UE:

4> initiate transmission of the SidelinkUEInformationNR message to report the sidelink DRX assistance information in accordance with 5.8.3.3;
\( 2> \) else:
3> if the last transmission of the SidelinkUEInformationNR message included sl-TxResourceReqList:
\( 4> \) initiate transmission of the SidelinkUEInformationNR message to indicate it no longer requires NR sidelink communication transmission resources in accordance with 5.8.3.3.
\( 2> \) if configured by upper layer to receive NR sidelink non-relay discovery announcements on the frequency included in sl-FreqInfoList in SIB12 of the PCell including sl-NonRelayDiscovery:

3> if the UE did not transmit a SidelinkUEInformationNR message since last entering RRC_CONNECTED state; or

ETSI


--- Page 274  ---


3GPP TS 38.331 version 17.0.0 Release 17
273
ETSI TS 138331 V17.0.0 (2022-05)

3> if since the last time the UE transmitted a SidelinkUEInformationNR message the UE connected to a PCell not providing SIB12 including sl-ConfigCommonNR or connected to a PCell providing SIB12 but not including \( s \)-NonRelayDiscovery; or

3> if the last transmission of the SidelinkUEInformationNR message did not include \( s \) RxInterestedFreqListDisc; or if the frequency configured by upper layers to receive NR sidelink discovery announcements on has changed since the last transmission of the SidelinkUEInformationNR message:
\( 4> \) initiate transmission of the SidelinkUEInformationNR message to indicate the NR sidelink discovery reception frequency of interest in accordance with 5.8.3.3;
\( 2> \) else:
\( 3> \) if the last transmission of the SidelinkUEInformationNR message included sl-RxInterestedFreqListDisc:
4> initiate transmission of the SidelinkUEInformationNR message to indicate it is no longer interested in NR sidelink discovery announcements reception in accordance with 5.8.3.3;
\( 2> \) if configured by upper layer to receive NR sidelink L2 U2N relay discovery announcements on the frequency included in sl-FreqInfoList in SIB12 of the PCell including sl-L2U2N-Relay; or if configured by upper layer to receive NR sidelink L3 U2N relay discovery announcements on the frequency included in sl-FreqInfoList in SIB12 of the PCell including sl-L3U2N-RelayDiscovery:

3> if the UE did not transmit a SidelinkUEInformationNR message since last entering RRC_CONNECTED state; or

3> if since the last time the UE transmitted a SidelinkUEInformationNR message the UE connected to a PCell not providing SIB12 including sl-ConfigCommonNR or connected to a PCell providing SIB12 but not including sl-L2U2N-Relay in case of L2 U2N relay operation or connected to a PCell providing SIB12 but not including sl-L3U2N-RelayDiscovery in case of L3 U2N relay operation; or

3> if the last transmission of the SidelinkUEInformationNR message did not include \( s \) RxInterestedFreqListDisc; or if the frequency configured by upper layers to receive NR sidelink discovery announcements on has changed since the last transmission of the SidelinkUEInformationNR message:

4> if the UE is (capable of) acting as U2N Relay UE, and if SIB12 includes sl-RelayUE-ConfigCommon, and if the U2N Relay UE threshold conditions as specified in 5.8.14.2 are met; or

4> if the UE is selecting a U2N Relay UE / has a selected U2N Relay UE, and if SIB12 includes sl-RemoteUE-ConfigCommon, and if the U2N Remote UE threshold conditions as specified in 5.8.15.2 are met:

5> initiate transmission of the SidelinkUEInformationNR message to indicate the NR sidelink discovery reception frequency of interest in accordance with 5.8.3.3;
\( 2> \) else:
\( 3> \) if the last transmission of the SidelinkUEInformationNR message included sl-RxInterestedFreqListDisc:
4> initiate transmission of the SidelinkUEInformationNR message to indicate it is no longer interested in NR sidelink discovery announcements reception in accordance with 5.8.3.3;
\( 2> \) if configured by upper layer to transmit NR sidelink non-relay discovery announcements on the frequency included in sl-FreqInfoList in SIB12 of the PCell including sl-NonRelayDiscovery:

3> if the UE did not transmit a SidelinkUEInformationNR message since last entering RRC_CONNECTED state; or

3> if since the last time the UE transmitted a SidelinkUEInformation \( N R \) message the UE connected to a PCell not providing SIB12 including sl-ConfigCommonNR or connected to a PCell providing SIB12 but not including \( s \) /-NonRelayDiscovery; or

ETSI


--- Page 275  ---


3GPP TS 38.331 version 17.0.0 Release 17
274
ETSI TS 138331 V17.0.0 (2022-05)

3> if the last transmission of the SidelinkUEInformationNR message did not include \( s \) TxResourceReqListDisc; or if the information carried by the \( s l \)-TxResourceReqListDisc has changed since the last transmission of the SidelinkUEInformationNR message:
\( 4> \) initiate transmission of the SidelinkUEInformationNR message to indicate the NR sidelink non-relay discovery announcements resources required by the UE in accordance with 5.8.3.3;
\( 2> \) else:
\( 3> \) if the last transmission of the SidelinkUEInformationNR message included \( s l \)-TxResourceReqListDisc:
\( 4> \) initiate transmission of the SidelinkUEInformationNR message to indicate it no longer requires NR sidelink non-relay discovery announcements resources in accordance with 5.8.3.3;
\( 2> \) if configured by upper layer to transmit NR sidelink L2 U2N relay discovery announcements on the frequency included in sl-FreqInfoList in SIB12 of the PCell including sl-L2U2N-Relay; or if configured by upper layer to transmit NR sidelink L3 U2N relay discovery announcements on the frequency included in slFreqInfoList in SIB12 of the PCell including sl-L3U2N-RelayDiscovery:

3> if the UE did not transmit a SidelinkUEInformationNR message since last entering RRC_CONNECTED state; or

3> if since the last time the UE transmitted a SidelinkUEInformationNR message the UE connected to a PCell not providing SIB12 including sl-ConfigCommonNR or connected to a PCell providing SIB12 but not including sl-L2U2N-Relay in case L2 U2N relay operation or connected to a PCell providing SIB12 but not including sl-L3U2N-RelayDiscovery in case of L3 U2N relay operation; or

3> if the last transmission of the SidelinkUEInformationNR message did not include \( s \) TxResourceReqListDisc; or if the information carried by the \( s l \)-TxResourceReqListDisc has changed since the last transmission of the SidelinkUEInformationNR message:

4> if the UE is (capable of) acting as U2N Relay UE, and if SIB12 includes sl-RelayUE-ConfigCommon, and if the U2N Relay UE threshold conditions as specified in 5.8.14.2 are met; or

4> if the UE is selecting a U2N Relay UE/ has a selected U2N Relay UE, and if SIB12 includes s/-RemoteUE-ConfigCommon, and if the U2N Remote UE threshold conditions as specified in 5.8.15.2 are met:
\( 5> \) initiate transmission of the SidelinkUEInformationNR message to indicate the NR sidelink relay discovery announcements resources required by the UE in accordance with 5.8.3.3;
\( 2> \) else:
\( 3> \) if the last transmission of the SidelinkUEInformationNR message included \( s \) /-TxResourceReqListDisc:
\( 4> \) initiate transmission of the SidelinkUEInformationNR message to indicate it no longer requires NR sidelink relay discovery announcements resources in accordance with 5.8.3.3;
\( 2> \) if configured by upper layer to transmit NR sidelink L2 U2N relay communication on the frequency included in sl-FreqInfoList in SIB12 of the PCell including sl-L2U2N-Relay or if configured by upper layer to transmit NR sidelink L3 U2N relay communication on the frequency included in sl-FreqInfoList in SIB12 of the PCell including sl-L3U2N-RelayDiscovery:
\( 3> \) if the UE did not transmit a SidelinkUEInformationNR message since last entering RRC_CONNECTED state; or

3> if since the last time the UE transmitted a SidelinkUEInformationNR message the UE connected to a PCell not providing SIB12 including sl-ConfigCommonNR or connected to a PCell providing SIB12 but not including sl-L2U2N-Relay in case L2 U2N relay operation or connected to a PCell providing SIB12 but not including s/-L3U2N-RelayDiscovery in case of L3 U2N relay operation; or

3> if the last transmission of the SidelinkUEInformationNR message did not include \( s \) TxResourceReqListDisc; or if the information carried by the \( s \) /-TxResourceReqListDisc has changed since the last transmission of the SidelinkUEInformationNR message:

ETSI


--- Page 276  ---


3GPP TS 38.331 version 17.0.0 Release 17
275
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) if the UE is (capable of) acting as U2N Relay UE, and if SIB12 includes sl-RelayUE-ConfigCommon, and if the U2N Relay UE threshold conditions as specified in 5.8.14.2 are met; or

4- if the UE is selecting a U2N Relay UE / has a selected U2N Relay UE, and if SIB 12 includes s/-RemoteUE-ConfigCommon, and if the U2N Remote UE threshold conditions as specified in 5.8.15.2 are met:
\( 5> \) initiate transmission of the SidelinkUEInformationNR message to indicate the NR sidelink relay discovery announcements resources required by the UE in accordance with 5.8.3.3;
\( 2> \) else:
3> if the last transmission of the SidelinkUEInformationNR message included \( s \) /-TxResourceReqListDisc:
\( 4> \) initiate transmission of the SidelinkUEInformationNR message to indicate it no longer requires NR sidelink relay discovery announcements resources in accordance with 5.8.3.3;
5.8.3.3 Actions related to transmission of SidelinkUEInformationNR message

The UE shall set the contents of the SidelinkUEInformationNR message as follows:
\( 1> \) if the UE initiates the procedure to indicate it is (no more) interested to receive NR sidelink communication or to request (configuration/release) of NR sidelink communication transmission resources or to report to the network that a sidelink radio link failure or sidelink RRC reconfiguration failure has been declared or to report to the network the sidelink DRX configuration for NR sidelink unicast communication or to report to the network the sidelink DRX assistance information for NR sidelink unicast communication or to report the Destination Layer-2 ID and QoS profile associated with its interested services that sidelink DRX is applied for NR sidelink groupcast or broadcast communication or to indicate it is (no more) interested to receive NR sidelink discovery announcements or to request (configuration/release) of NR sidelink discovery announcements transmission resources or to request (configuration/ release) of NR sidelink U2N relay communication transmission resources (i.e. UE includes all concerned information, irrespective of what triggered the procedure):
\( 2> \) if SIB12 including sl-ConfigCommonNR is provided by the PCell:
\( 3> \) if configured by upper layers to receive NR sidelink communication:
4 include \( s \)-RxInterestedFreqList and set it to the frequency for NR sidelink communication reception;
4> include \( s l \)-RxDRX-ReportList and set its fields (if needed) as follows for each destination for which it reports to network:
\( 5> \) if \( s \)-DRX-ConfigCommon-GC-BC is included in SIB12-IEs:
\( 6> \) set sl-DRX-ConfigFromTx to include the accepted sidelink DRX configuration of the associated destination, if received from the associated peer UE;

6> set sl-RxInterestedQoS-InfoList to include the QoS profile of its interested service for the associated destination for NR sidelink groupcast or broadcast communication;

3> if configured by upper layers to transmit NR sidelink communication:
4> include \( s l \)-TxResourceReqList and set its fields (if needed) as follows for each destination for which it requests network to assign NR sidelink communication resource:
\( 5> \) set \( s \)-DestinationIdentity to the destination identity configured by upper layer for NR sidelink communication transmission;
\( 5> \) set \( s l \)-CastType to the cast type of the associated destination identity configured by the upper layer for the NR sidelink communication transmission;
\( 5> \) set \( s i \)-RLC-Modelndication to include the RLC mode(s) and optionally QoS profile(s) of the sidelink QoS flow(s) of the associated RLC mode(s), if the associated bi-directional sidelink DRB has been established due to the configuration by RRCReconfigurationSidelink;

ETSI


--- Page 277  ---


3GPP TS 38.331 version 17.0.0 Release 17
276
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) set \( s \)-QoS-InfoList to include QoS profile(s) of the sidelink QoS flow(s) of the associated destination configured by the upper layer for the NR sidelink communication transmission;
\( 5> \) set \( s \)-InterestedFreqList to indicate the frequency of the associated destination for NR sidelink communication transmission;
\( 5> \) set \( s l \)-TypeTxSyncList to the current synchronization reference type used on the associated \( s l \) InterestedFreqList for NR sidelink communication transmission.
\( 5> \) set \( s \)-CapabilityInformationSidelink to include UECapabilityInformationSidelink message, if any, received from the associated peer UE.
\( 5> \) if \( s l-D R X \)-ConfigCommon-GC-BC is included in SIB12-IEs and UE is configured with \( s l- \) ScheduledConfig:
\( 6> \) set \( s l \)-DRX-InfoFromRx to include the sidelink DRX assistance information of the associated destination, if any, received from the associated peer UE;

Editor's Note: FFS on the message used for Tx UE to report DRX configuration reject information.
\( 4> \) if a sidelink radio link failure or a sidelink RRC reconfiguration failure has been declared, according to clauses 5.8.9.3 and 5.8.9.1.8, respectively;
\( 5> \) include \( s \)-FailureList and set its fields as follows for each destination for which it reports the NR sidelink communication failure:
\( 6> \) set \( s \)-Destinationldentity to the destination identity configured by upper layer for NR sidelink communication transmission;
\( 6> \) if the sidelink RLF is detected as specified in clause 5.8.9.3:
\( 7> \) set \( s l \)-Failure as \( r l f \) for the associated destination for the NR sidelink communication transmission;

6> else if RRCReconfigurationFailureSidelink is received:
\( 7> \) set \( s \)-Failure as configFailure for the associated destination for the NR sidelink communication transmission;
\( 3> \) if SIB12 including \( s \)-NonRelayDiscovery and if configured by upper layers to receive NR sidelink nonrelay discovery announcements, or if SIB 12 including sl-L2U2N-Relay and if configured by upper layers to receive NR sidelink L2 U2N relay discovery announcements, or if SIB 12 including sl-L3U2NRelayDiscovery and if configured by upper layers to receive NR sidelink L3 U2N relay discovery announcements:
\( 4> \) include \( s \) /-RxInterestedFreqListDisc and set it to the frequency for NR sidelink discovery announcements reception;
\( 4> \) if the UE is capable of L2 U2N remote UE:
\( 5> \) include \( s / \)-Sourceldentity-Remote \( U E \) and set it to the source identity configured by upper layer for NR sidelink L2 U2N relay communication transmission;
\( 3> \) if SIB12 including \( s \)-NonRelayDiscovery and if configured by upper layers to transmit NR sidelink nonrelay discovery announcements, or if SIB12 including sl-L2U2N-Relay and if configured by upper layers to transmit NR sidelink L2 U2N relay discovery announcements, or if SIB12 including sl-L3U2NRelayDiscovery and if configured by upper layers to transmit NR sidelink L3 U2N relay discovery announcements:
\( 4> \) include \( s \)-TxResourceReqListDis and set its fields (if needed) as follows for each destination for which it requests network to assign NR sidelink discovery announcements resource:
\( 5> \) set \( s \)-DestinationIdentityDisc to the destination identity configured by upper layer for NR sidelink discovery announcements transmission;
\( 5> \) if the UE is acting as L2 U2N Relay UE

ETSI


--- Page 278  ---


3GPP TS 38.331 version 17.0.0 Release 17
277
ETSI TS 138331 V17.0.0 (2022-05)

6> set s/-Sourceldentity-RelayUE to the source identity configured by upper layer for NR sidelink L2 U2N relay discovery announcements transmission;
\( 5> \) set \( s l \)-CastTypeDisc to the cast type of the associated destination identity configured by the upper layer for the NR sidelink discovery announcements transmission;
\( 5> \) set \( s \)-InterestedFreqListDisc to indicate the frequency of the associated destination for NR sidelink discovery announcements transmission;
\( 5> \) set \( s l \)-TypeTxSyncListDisc to the current synchronization reference type used on the associated \( s l \) InterestedFreqList for NR sidelink discovery announcements transmission;
\( 5> \) set \( s l \)-DiscoveryType to the current discovery type of the associated destination identity configured by the upper layer for NR sidelink discovery announcements transmission;
\( 3> \) if configured by upper layers to transmit NR sidelink L2 U2N relay communication and the UE is acting as L2 U2N Relay UE:
\( 4> \) include sl-TxResourceReqL2U2N-Relay in sl-TxResourceReqListCommRelay and set its fields (if needed) as follows for each destination for which it requests network to assign NR sidelink L2 U2N relay communication resource:
\( 5> \) set \( s \)-DestinationIdentityL2U2N to the destination identity configured by upper layer for NR sidelink L2 U2N relay communication transmission;
\( 5> \) set \( s l \)-TxInterestedFreqListL2U2N to indicate the frequency of the associated destination for NR sidelink L2 U2N relay communication transmission;
\( 5> \) set \( s \)-TypeTxSyncListL2U2N to the current synchronization reference type used on the associated sl-InterestedFreqListL2U2N for NR sidelink L2 U2N relay communication transmission;
\( 5> \) set \( s l \)-LocallD-Request to request local ID for L2 U2N Remote UE;
\( 5> \) set \( s \) /-Pagingldentity-RemoteUE to the paging UE ID received from peer L2 U2N Remote UE;
\( 5> \) set \( s \)-CapabilitylnformationSidelink to include UECapabilityInformationSidelink message, if any, received from peer UE.
\( 4> \) include ue-Type and set it to relayUE;
\( 3> \) if configured by upper layers to transmit NR sidelink L2 U2N relay communication and the UE has a selected L2 U2N Relay UE:
\( 4> \) include \( s \)-TxResourceReqL2U2N-Relay in \( s \)-TxResourceReqListCommRelay and set its fields (if needed) as follows to request network to assign NR sidelink L2 U2N relay communication resource:
\( 5> \) set \( s / \)-TxInterestedFreqListL \( 2 U 2 N \) to indicate the frequency of the associated destination for NR sidelink L2 U2N relay communication transmission;
\( 5> \) set sl-TypeTxSyncListL2U2N to the current synchronization reference type used on the associated sl-InterestedFreqListL2U2N for NR sidelink L2 U2N relay communication transmission;
\( 5> \) set \( s \)-CapabilitylnformationSidelink to include UECapabilityInformationSidelink message, if any, received from peer UE.
\( 4> \) include ue-Type and set it to remoteUE;
\( 3> \) if configured by upper layers to transmit NR sidelink L3 U2N relay communication:
\( 4> \) include \( s \)-TxResourceReqL3U2N-Relay in sl-TxResourceReqListCommRelay and set its fields (if needed) as follows for each destination for which it requests network to assign NR sidelink L3 U2N relay communication resource:
\( 5> \) set \( s \)-DestinationIdentity to the destination identity configured by upper layer for NR sidelink L3 U2N relay communication transmission;

ETSI


--- Page 279  ---


3GPP TS 38.331 version 17.0.0 Release 17
278
ETSI TS 138331 V17.0.0 (2022-05)

\( 5> \) set \( s l \)-CastType to the cast type of the associated destination identity configured by the upper layer for the NR sidelink L3 U2N relay communication transmission;
\( 5> \) set \( s l \)-RLC-Modelndication to include the RLC mode(s) and optionally QoS profile(s) of the sidelink QoS flow(s) of the associated RLC mode(s), if the associated bi-directional sidelink DRB has been established due to the configuration by RRCReconfigurationSidelink;
\( 5> \) set \( s l \)-QoS-InfoList to include QoS profile(s) of the sidelink QoS flow(s) of the associated destination configured by the upper layer for the NR sidelink L3 U2N relay communication transmission;
\( 5> \) set \( s l \)-TxInterestedFreqList to indicate the frequency of the associated destination for NR sidelink L3 U2N relay communication transmission;
\( 5> \) set \( s l \)-TypeTxSyncList to the current synchronization reference type used on the associated \( s l \) InterestedFreqList for NR sidelink L3 U2N relay communication transmission.

5> set sl-CapabilityInformationSidelink to include UECapabilityInformationSidelink message, if any, received from peer UE.

4> include ue-Type and set it to relayUE if the UE is acting as NR sidelink L3 U2N Relay UE and to remoteUE otherwise;

1> if the UE initiates the procedure while connected to an E-UTRA PCell:
\( 2> \) submit the SidelinkUEInformationNR to lower layers via SRB1, embedded in E-UTRA RRC message ULInformationTransferIRAT as specified in TS 36.331 [10], clause 5.6.28;

1> else:
\( 2> \) submit the SidelinkUEInformationNR message to lower layers for transmission.
5.8.4 Void
5.8.5 Sidelink synchronisation information transmission for NR sidelink communication
5.8.5.1 General

Figure 5.8.5.1-1: Synchronisation information transmission for NR sidelink communication, in (partial) coverage

ETSI


--- Page 280  ---


3GPP TS 38.331 version 17.0.0 Release 17
279
ETSI TS 138331 V17.0.0 (2022-05)

Figure 5.8.5.1-2: Synchronisation information transmission for NR sidelink communication, out of coverage

The purpose of this procedure is to provide synchronisation information to a UE. This procedure also applies to sidelink discovery.
5.8.5.2 Initiation

A UE capable of NR sidelink communication and SLSS/PSBCH transmission shall, when transmitting NR sidelink communication, and if the conditions for NR sidelink communication operation are met and when the following conditions are met:

1> if in coverage on the frequency used for NR sidelink communication, as defined in TS 38.304 [20]; and has selected GNSS or the cell as synchronization reference as defined in 5.8.6.3; or
\( 1> \) if out of coverage on the frequency used for NR sidelink communication, and the frequency used to transmit NR sidelink communication is included in sl-FreqInfoToAddModList in sl-ConfigDedicatedNR within RRCReconfiguration message or included in sl-FreqInfoList within SIB12; and has selected GNSS or the cell as synchronization reference as defined in 5.8.6.3:
\( 2> \) if in RRC_CONNECTED; and if networkControlledSyncTx is configured and set to on; or
\( 2> \) if networkControlledSyncTx is not configured; and for the concerned frequency syncTxThresh/C is configured; and the RSRP measurement of the reference cell, selected as defined in 5.8.6.3, for NR sidelink communication transmission is below the value of syncTxThreshIC:

3> transmit sidelink SSB on the frequency used for NR sidelink communication in accordance with 5.8.5.3 and TS 38.211 [16], including the transmission of SLSS as specified in 5.8.5.3 and transmission of MasterInformationBlockSidelink as specified in 5.8.9.4.3;

1> else:
\( 2> \) for the frequency used for NR sidelink communication, if syncTxThreshOoC is included in SidelinkPreconfigNR; and the UE is not directly synchronized to GNSS, and the UE has no selected SyncRef UE or the PSBCH-RSRP measurement result of the selected SyncRef UE is below the value of syncTxThreshOoC; or
\( 2> \) for the frequency used for NR sidelink communication, if the UE selects GNSS as the synchronization reference source:

3> transmit sidelink SSB on the frequency used for NR sidelink communication in accordance with TS 38.211 [16], including the transmission of SLSS as specified in 5.8.5.3 and transmission of MasterInformationBlockSidelink as specified in 5.8.9.4.3;
5.8.5.3 Transmission of SLSS

The UE shall select the SLSSID and the slot in which to transmit SLSS as follows:
\( 1> \) if triggered by NR sidelink communication and in coverage on the frequency used for NR sidelink communication, as defined in TS 38.304 [20]; or

1> if triggered by NR sidelink communication, and out of coverage on the frequency used for NR sidelink communication, and the concerned frequency is included in sl-FreqInfoToAddModList in sl-ConfigDedicatedNR within RRCReconfiguration message or included in sl-FreqInfoList within SIB12:

ETSI


--- Page 281  ---


3GPP TS 38.331 version 17.0.0 Release 17
280
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the UE has selected GNSS as synchronization reference in accordance with 5.8.6.2:
\( 3> \) select SLSSID 0;
\( 3> \) use \( s \)-SSB-TimeAllocationl included in the entry of configured \( s \)-SyncConfigList corresponding to the concerned frequency, that includes txParameters and gnss-Sync;
\( 3> \) select the slot(s) indicated by sl-SSB-TimeAllocation l;
\( 2> \) if the UE has selected a cell as synchronization reference in accordance with 5.8.6.2:
3> select the SLSSID included in the entry of configured \( s \) /-SyncConfigList corresponding to the concerned frequency, that includes txParameters and does not include gnss-Sync;
\( 3> \) select the slot(s) indicated by sl-SSB-TimeAllocation I;
1> else if triggered by NR sidelink communication and the UE has GNSS as the synchronization reference:
\( 2> \) select SLSSID 0;
\( 2> \) if \( s \)-SSB-TimeAllocation 3 is configured for the frequency used in SidelinkPreconfigNR:
\( 3> \) select the slot(s) indicated by sl-SSB-TimeAllocation3;
\( 2> \) else:
\( 3> \) select the slot(s) indicated by sl-SSB-TimeAllocation l;
1> else:
\( 2> \) select the synchronisation reference UE (i.e. SyncRef UE) as defined in 5.8.6;
\( 2> \) if the UE has a selected SyncRef UE and inCoverage in the MasterInformationBlockSidelink message received from this UE is set to true; or
\( 2> \) if the UE has a selected SyncRef UE and inCoverage in the MasterInformationBlockSidelink message received from this UE is set to false while the SLSS from this UE is part of the set defined for out of coverage, see TS 38.211 [16]:

3> select the same SLSSID as the SLSSID of the selected SyncRef UE;
3> select the slot in which to transmit the SLSS according to the sl-SSB-TimeAllocation lor sl-SSBTimeAllocation 2 included in the preconfigured sidelink parameters corresponding to the concerned frequency, such that the timing is different from the SLSS of the selected SyncRef UE;
\( 2> \) else if the UE has a selected SyncRef UE and the SLSS from this UE was transmitted on the slot(s) indicated sl-SSB-TimeAllocation3, which is configured for the frequency used in SidelinkPreconfigNR:

3> select SLSSID 337;
3> select the slot(s) indicated by sl-SSB-TimeAllocation2;
\( 2> \) else if the UE has a selected SyncRef UE:
3> select the SLSSID from the set defined for out of coverage having an index that is 336 more than the index of the SLSSID of the selected SyncRef UE, see TS 38.211 [16];

3> select the slot in which to transmit the SLSS according to sl-SSB-TimeAllocation lor sl-SSBTimeAllocation 2 included in the preconfigured sidelink parameters corresponding to the concerned frequency, such that the timing is different from the SLSS of the selected SyncRef UE;

2> else (i.e. no SyncRef UE selected):
3> if the UE has not randomly selected an SLSSID:
\( 4> \) randomly select, using a uniform distribution, an SLSSID from the set of sequences defined for out of coverage except SLSSID 336 and 337, see TS 38.211 [16];

ETSI


--- Page 282  ---


3GPP TS 38.331 version 17.0.0 Release 17
281
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) select the slot in which to transmit the SLSS according to the sl-SSB-TimeAllocationl or sl-SSBTimeAllocation 2 (arbitrary selection between these) included in the preconfigured sidelink parameters in SidelinkPreconfigNR corresponding to the concerned frequency;
5.8.5a Sidelink synchronisation information transmission for V2X sidelink communication
5.8.5a.1 General

Figure 5.8.5a.1-1: Synchronisation information transmission for V2X sidelink communication, in (partial) coverage

Figure 5.8.5a.1-2: Synchronisation information transmission for V2X sidelink communication, out of coverage

The purpose of this procedure is to provide synchronisation information to a UE.
5.8.5a. 2 Initiation

A UE capable of V2X sidelink communication initiates the transmission of SLSS and MasterInformationBlock-SL-V2X according to the conditions and the procedures specified for V2X sidelink communication in clause 5.10 .7 of TS 36.331 [10].

NOTE 1: When applying the procedure in this clause, \( S I B 13 \) and \( S I B 14 \) correspond to SystemInformationBlockType21 and SystemInformationBlockType26 specified in TS 36.331 [10] respectively
5.8.6 Sidelink synchronisation reference
5.8.6.1 General

The purpose of this procedure is to select a synchronisation reference and used when transmitting NR sidelink communication. This procedure also applies to sidelink discovery.
5.8.6.2 Selection and reselection of synchronisation reference

The UE shall:

ETSI


--- Page 283  ---


3GPP TS 38.331 version 17.0.0 Release 17
282
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if the frequency used for NR sidelink communication is included in sl-FreqInfoToAddModList in slConfigDedicatedNR within RRCReconfiguration message or included in sl-ConfigCommonNR within SIB12, and sl-SyncPriority is configured for the concerned frequency and set to gnbEnb:
\( 2> \) select a cell as the synchronization reference source as defined in 5.8.6.3:
\( 1> \) else if the frequency used for NR sidelink communication is included in \( s \)-FreqInfoToAddModList in \( s \) ConfigDedicatedNR within RRCReconfiguration message or included in sl-ConfigCommonNR within SIB12, and sl-SyncPriority for the concerned frequency is not configured or is set to gnss, and GNSS is reliable in accordance with TS 38.101-1 [15] and TS 38.133 [14]:
\( 2> \) select GNSS as the synchronization reference source;
\( 1> \) else if the frequency used for NR sidelink communication is included in SL-PreconfigurationNR, and slSyncPriority in SidelinkPreconfigNR is set to gnss and GNSS is reliable in accordance with TS 38.101-1 [15] and TS 38.133 [14]:
\( 2> \) select GNSS as the synchronization reference source;
1> else:
\( 2> \) perform a full search (i.e covering all subframes and all possible SLSSIDs) to detect candidate SLSS, in accordance with TS 38.133 [14]
\( 2> \) when evaluating the one or more detected SLSSIDs, apply layer 3 filtering as specified in 5.5.3.2 using the preconfigured sl-filterCoefficient, before using the PSBCH-RSRP measurement results;
\( 2> \) if the UE has selected a SyncRef UE:
3> if the PSBCH-RSRP of the strongest candidate SyncRef UE exceeds the minimum requirement TS 38.133 [14] by sl-SyncRefMinHyst and the strongest candidate SyncRef UE belongs to the same priority group as the current SyncRef UE and the PSBCH-RSRP of the strongest candidate SyncRef UE exceeds the PSBCH-RSRP of the current SyncRef UE by syncRefDiffHyst; or

3> if the PSBCH-RSRP of the candidate SyncRef UE exceeds the minimum requirement TS 38.133 [14] by sl-SyncRefMinHyst and the candidate SyncRef UE belongs to a higher priority group than the current SyncRefUE; or

3> if GNSS becomes reliable in accordance with TS 38.101-1 [15] and TS 38.133 [14], and GNSS belongs to a higher priority group than the current SyncRef UE; or
\( 3> \) if a cell is detected and gNB/eNB (if sl-NbAsSync is set to true) belongs to a higher priority group than the current SyncRef UE; or

3> if the PSBCH-RSRP of the current SyncRef UE is less than the minimum requirement defined in TS 38.133 [14]:

4> consider no SyncRef UE to be selected;
2 if the UE has selected GNSS as the synchronization reference for NR sidelink communication:
3> if the PSBCH-RSRP of the candidate SyncRef UE exceeds the minimum requirement defined in TS 38.133 [14] by sl-SyncRefMinHyst and the candidate SyncRef UE belongs to a higher priority group than GNSS; or

3> if GNSS becomes not reliable in accordance with TS 38.101-1 [15] and TS 38.133 [14]:
4> consider GNSS not to be selected;
\( 2> \) if the UE has selected cell as the synchronization reference for NR sidelink communication:
3> if the PSBCH-RSRP of the candidate SyncRef UE exceeds the minimum requirement defined in TS 38.133 [14] by sl-SyncRefMinHyst and the candidate SyncRef UE belongs to a higher priority group than gNB/eNB; or

3> if the selected cell is not detected:

ETSI


--- Page 284  ---


3GPP TS 38.331 version 17.0.0 Release 17
283
ETSI TS 138331 V17.0.0 (2022-05)

4> consider the cell not to be selected;
\( 2> \) if the UE has not selected any synchronization reference:
\( 3> \) if the UE detects one or more SLSSIDs for which the PSBCH-RSRP exceeds the minimum requirement defined in TS 38.133 [14] by sl-SyncRefMinHyst and for which the UE received the corresponding MasterInformationBlockSidelink message (candidate SyncRef UEs), or if the UE detects GNSS that is reliable in accordance with TS 38.101-1 [15] and TS 38.133 [14], or if the UE detects a cell, select a synchronization reference according to the following priority group order:
\( 4> \) if \( s l \)-SyncPriority corresponding to the concerned frequency is set to \( g n b E n b \) :
\( 5> \) UEs of which SLSSID is part of the set defined for in coverage, and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to true, starting with the UE with the highest PSBCH-RSRP result (priority group 1);
\( 5> \) UE of which SLSSID is part of the set defined for in coverage, and inCoverage, included in the MasterInformation BlockSidelink message received from this UE, is set to false, starting with the UE with the highest PSBCH-RSRP result (priority group 2);
\( 5> \) GNSS that is reliable in accordance with TS 38.101-1 [15] and TS 38.133 [14] (priority group 3);
\( 5> \) UEs of which SLSSID is 0 , and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to true, or of which SLSSID is 0 and SLSS is transmitted on slot(s) indicated by sl-SSB-TimeAllocation3, starting with the UE with the highest PSBCH-RSRP result (priority group 4);
\( 5> \) UEs of which SLSSID is 0 and SLSS is not transmitted on slot(s) indicated by \( s l \)-SSBTimeAllocation3, and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to false, starting with the UE with the highest PSBCH-RSRP result (priority group 5);

5> UEs of which SLSSID is 337 and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to false, starting with the UE with the highest PSBCH-RSRP result (priority group 5);
\( 5> \) Other UEs, starting with the UE with the highest PSBCH-RSRP result (priority group 6);
\( 4> \) if \( s l \)-SyncPriority corresponding to the concerned frequency is set to gnss, and \( s l \)-NbAsSync is set to true:
\( 5> \) UEs of which SLSSID is 0 , and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to true, or of which SLSSID is 0 and SLSS is transmitted on slot(s) indicated by sl-SSB-TimeAllocation3, starting with the UE with the highest PSBCH-RSRP result (priority group 1);
\( 5> \) UEs of which SLSSID is 0 and SLSS is not transmitted on slot(s) indicated by sl-SSBTimeAllocation3, and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to false, starting with the UE with the highest PSBCHS-RSRP result (priority group 2);

5> UEs of which SLSSID is 337 and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to false, starting with the UE with the highest PSBCH-RSRP result (priority group 2);
\( 5> \) the cell detected by the UE as defined in 5.8.6.3 (priority group 3);
5> UEs of which SLSSID is part of the set defined for in coverage, and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to true, starting with the UE with the highest PSBCH-RSRP result (priority group 4);
\( 5> \) UE of which SLSSID is part of the set defined for in coverage, and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to false, starting with the UE with the highest PSBCH-RSRP result (priority group 5);
\( 5> \) Other UEs, starting with the UE with the highest S-RSRP result (priority group 6);

ETSI


--- Page 285  ---


3GPP TS 38.331 version 17.0.0 Release 17
284
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) if \( s l \)-SyncPriority corresponding to the concerned frequency is set to gnss, and \( s l-N b A s S y n c \) is set to false:
\( 5> \) UEs of which SLSSID is 0 , and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to true, or of which SLSSID is 0 and SLSS is transmitted on slot(s) indicated by sl-SSB-TimeAllocation3, starting with the UE with the highest PSBCH-RSRP result (priority group 1);
\( 5> \) UES of which SLSSID is 0 and SLSS is not transmitted on slot(s) indicated by sl-SSBTimeAllocation3, and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to false, starting with the UE with the highest PSBCHS-RSRP result (priority group 2);
\( 5> \) UEs of which SLSSID is 337 and inCoverage, included in the MasterInformationBlockSidelink message received from this UE, is set to false, starting with the UE with the highest PSBCH-RSRP result (priority group 2);
\( 5> \) Other UEs, starting with the UE with the highest PSBCH-RSRP result (priority group 3);
NOTE: How the UE achieves subframe boundary alignment between V2X sidelink communication and NR sidelink communication (if both are performed by the UE) is as specified in TS 38.213, clause 16.7.
5.8.6.3 Sidelink communication transmission reference cell selection

A UE capable of NR sidelink communication that is configured by upper layers to transmit NR sidelink communication shall:
\( 1> \) for the frequency used to transmit NR sidelink communication, select a cell to be used as reference for synchronization in accordance with the following:
\( 2> \) if the frequency concerns the primary frequency:
\( 3> \) use the PCell or the serving cell as reference;
\( 2> \) else if the frequency concerns a secondary frequency:
\( 3> \) use the concerned SCell as reference;
\( 2> \) else if the UE is in coverage of the concerned frequency:
\( 3> \) use the DL frequency paired with the one used to transmit NR sidelink communication as reference;
\( 2> \) else (i.e., out of coverage on the concerned frequency):
\( 3> \) use the PCell or the serving cell as reference, if needed;
5.8.7 Sidelink communication reception

A UE capable of NR sidelink communication that is configured by upper layers to receive NR sidelink communication shall:
\( 1> \) if the conditions for NR sidelink communication operation as defined in 5.8 .2 are met:
\( 2> \) if the frequency used for NR sidelink communication is included in \( s \)-FreqInfoToAddModList in RRCReconfiguration message or sl-FreqInfoList included in S/B12:
\( 3> \) if the UE is configured with \( s l \)-RxPool included in RRCReconfiguration message with reconfiguration WithSync (i.e. handover):

4 configure lower layers to monitor sidelink control information and the corresponding data using the pool of resources indicated by sl-RxPool;
\( 3> \) else if the cell chosen for NR sidelink communication provides S/B12:

ETSI


--- Page 286  ---


3GPP TS 38.331 version 17.0.0 Release 17
285
ETSI TS 138331 V17.0.0 (2022-05)

\( 4> \) configure lower layers to monitor sidelink control information and the corresponding data using the pool of resources indicated by sl-RxPool in SIB12;
\( 2> \) else:
3> configure lower layers to monitor sidelink control information and the corresponding data using the pool of resources that were preconfigured by \( s \)-RxPool in SL-Preconfiguration NR, as defined in clause 9.3;
5.8.8 Sidelink communication transmission

A UE capable of NR sidelink communication that is configured by upper layers to transmit NR sidelink communication and has related data to be transmitted shall:
\( 1> \) if the conditions for NR sidelink communication operation as defined in 5.8.2 are met:
\( 2> \) if the frequency used for NR sidelink communication is included in \( s \) /-FreqInfoToAddModList in \( s \) ConfigDedicatedNR within RRCReconfiguration message or included in sl-ConfigCommonNR within SIB12:
\( 3> \) if the UE is in RRC_CONNECTED and uses the frequency included in sl-ConfigDedicatedNR within RRCReconfiguration message:

4> if the UE is configured with \( s \)-ScheduledConfig:
\( 5> \) if T310 for MCG or T311 is running; and if \( s l \)-TxPoolExceptional is included in sl-FreqInfoList for the concerned frequency in SIB12 or included in sl-ConfigDedicatedNR in RRCReconfiguration; or

5> if T301 is running and the cell on which the UE initiated RRC connection re-establishment provides SIB12 including sl-TxPoolExceptional for the concerned frequency; or
\( 5> \) if T304 for MCG is running and the UE is configured with \( s l \)-TxPoolExceptional included in \( s l \) ConfigDedicatedNR for the concerned frequency in RRCReconfiguration:

6> configure lower layers to perform the sidelink resource allocation mode 2 based on random selection using the pool of resources indicated by sl-TxPoolExceptional as defined in TS 38.321 [3];
\( 5> \) else:
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 1 for NR sidelink communication;

5> if T311 is running, configure the lower layers to release the resources indicated by rrcConfiguredSidelinkGrant (if any);

4- if the UE is configured with sl-UE-SelectedConfig:
\( 5> \) if a result of sensing on the resources configured in \( s l \)-TxPoolSelectedNormal for the concerned frequency included in sl-ConfigDedicatedNR within RRCReconfiguration is not available in accordance with TS 38.214 [19];
\( 6> \) if sl-TxPoolExceptional for the concerned frequency is included in RRCReconfiguration; or
6> if the PCell provides SIB12 including sl-TxPoolExceptional in sl-FreqInfoList for the concerned frequency:
\( 7> \) configure lower layers to perform the sidelink resource allocation mode 2 based on random selection using the pool of resources indicated by sl-TxPoolExceptional as defined in TS 38.321 [3];
\( 5> \) else, if the \( s l \)-TxPoolSelectedNormal and/or \( s l \)-TxPoolSelectedNormalPS for the concerned frequency is included in the \( s \)-ConfigDedicatedNR within RRCReconfiguration:

ETSI


--- Page 287  ---


3GPP TS 38.331 version 17.0.0 Release 17
286
ETSI TS 138331 V17.0.0 (2022-05)

\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing (as defined in TS 38.321 [3] and TS 38.214 [19]) using the pools of resources indicated by \( s i \) TxPoolSelectedNormal for the concerned frequency; or
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on resource selection operation according to sl-AllowedResourceSelectionConfig (as defined in TS 38.321 [3] and TS 38.214 [19]) using the pools of resources indicated by sl-TxPoolSelectedNormalPS for the concerned frequency;
\( 3> \) else:
4> if the cell chosen for NR sidelink communication transmission provides SIB12:
\( 5> \) if SIB12 includes \( s \)-TxPoolSelectedNormal and/or \( s \)-TxPoolSelectedNormalPS for the concerned frequency, and a result of sensing on the resources configured in the sl-TxPoolSelectedNormal is available in accordance with TS 38.214 [19]:
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing using the pools of resources indicated by sl-TxPoolSelectedNormal for the concerned frequency as defined in TS 38.321 [3]; or

6> configure lower layers to perform the sidelink resource allocation mode 2 based on resource selection operation according to sl-AllowedResourceSelectionConfig using the pools of resources indicated by sl-TxPoolSe lectedNormalPS for the concerned frequency as defined in TS 38.321 [3];
\( 5> \) else if SIB12 includes sl-TxPoolExceptional for the concerned frequency:
\( 6> \) from the moment the UE initiates RRC connection establishment or RRC connection resume, until receiving an RRCReconfiguration including sl-ConfigDedicatedNR, or receiving an RRCRelease or an RRCReject; or
\( 6> \) if a result of sensing on the resources configured in \( s \)-TxPoolSelectedNormal for the concerned frequency in SIB12 is not available in accordance with TS 38.214 [19]:

7> configure lower layers to perform the sidelink resource allocation mode 2 based on random selection (as defined in TS 38.321 [3]) using one of the pools of resources indicated by \( s l \) TxPoolExceptional for the concerned frequency;
\( 2> \) else:
\( 3> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing (as defined in TS 38.321 [3] and TS 38.213 [13]) using the pools of resources indicated by sl-TxPoolSelectedNormal in SidelinkPreconfigNR for the concerned frequency.

NOTE 1: The UE continues to use resources configured in rrc-ConfiguredSidelinkGrant (while T310 is running) until it is released (i.e. until T310 has expired). The UE does not use sidelink configured grant type 2 resources while T310 is running.

NOTE 2: In case of RRC reconfiguration with sync, the UE uses resources configured in rrcConfiguredSidelinkGrant (while T304 on the MCG is running) if provided by the target cell.

NOTE 3: It is up to UE implementation to determines which one resource allocation scheme is used in the AS based on UE capability (for a UE in RRC_IDLE/RRC_INACTIVE) and the allowed resource schemes \( s \) allowedResourceSelectionConfig in the resource pool configuration.

If configured to perform sidelink resource allocation mode 2 , the UE capable of NR sidelink communication that is configured by upper layers to transmit NR sidelink communication shall perform sensing or resource selection operation according to sl-AllowedResourceSelectionConfig on all pools of resources which may be used for transmission of the sidelink control information and the corresponding data. The pools of resources are indicated by SidelinkPreconfigNR, sl-TxPoolSelectedNormal/sl-TxPoolSelectedNormalPS in sl-ConfigDedicatedNR, or sl-TxPoolSelectedNormal/sl-TxPoolSelectedNormalPS in SIB12 for the concerned frequency, as configured above.

ETSI


--- Page 288  ---


3GPP TS 38.331 version 17.0.0 Release 17
287
ETSI TS 138331 V17.0.0 (2022-05)
5.8.9 Sidelink RRC procedure
5.8.9.1 Sidelink RRC reconfiguration
5.8.9.1.1 General

Figure 5.8.9.1.1-1: Sidelink RRC reconfiguration, successful

Figure 5.8.9.1.1-2: Sidelink RRC reconfiguration, failure

The purpose of this procedure is to modify a PC5-RRC connection, e.g. to establish/modify/release sidelink DRBs, to (re-)configure NR sidelink measurement and reporting, to (re-)configure sidelink CSI reference signal resources and CSI reporting latency bound.

The UE may initiate the sidelink RRC reconfiguration procedure and perform the operation in clause 5.8.9.1.2 on the corresponding PC5-RRC connection in following cases:
- the release of sidelink DRBs associated with the peer UE, as specified in clause 5.8.9.1a.1;
- the establishment of sidelink DRBs associated with the peer UE, as specified in clause 5.8.9.1a.2;
- the modification for the parameters included in SLRB-Config of sidelink DRBs associated with the peer UE, as specified in clause 5.8.9.1a.2;
- the release of PC5 Relay RLC channels for L2 U2N Relay UE and Remote UE, as specified in clause 5.8.9.7.1;
- the establishment of PC5 Relay RLC channels for L2 U2N Relay UE and Remote UE, as specified in clause 5.8.9.7.2;
- the modification for the parameters included in SL-RLC-ChannelConfig-PC5 of PC5 Relay RLC channels for L2 U2N Relay UE and Remote UE, as specified in clause 5.8.9.7.2;
- the (re-)configuration of the peer UE to perform NR sidelink measurement and report.
- the (re-)configuration of the sidelink CSI reference signal resources and CSI reporting latency bound;
- the (re-)configuration of the peer UE to perform sidelink DRX.

In RRC_CONNECTED, the UE applies the NR sidelink communications parameters provided in RRCReconfiguration (if any). In RRC_IDLE or RRC_INACTIVE, the UE applies the NR sidelink communications parameters provided in

ETSI


--- Page 289  ---


3GPP TS 38.331 version 17.0.0 Release 17
288
ETSI TS 138331 V17.0.0 (2022-05)

system information (if any). For other cases, UEs apply the NR sidelink communications parameters provided in SidelinkPreconfigNR (if any). When UE performs state transition between above three cases, the UE applies the NR sidelink communications parameters provided in the new state, after acquisition of the new configurations. Before acquisition of the new configurations, UE continues applying the NR sidelink communications parameters provided in the old state.
5.8.9.1.2 Actions related to transmission of RRCReconfiguration Sidelink message

The UE shall set the contents of RRCReconfigurationSidelink message as follows:
\( 1> \) for each sidelink DRB that is to be released, according to clause 5.8.9.1a.1.1, due to configuration by \( s \) ConfigDedicatedNR, SIB12, SidelinkPreconfigNR or by upper layers:

2> set the SLRB-PC5-ConfigIndex included in the sirb-ConfigToReleaseList corresponding to the sidelink DRB;
1> for each sidelink DRB that is to be established or modified, according to clause 5.8.9.1a.2.1, due to receiving \( s \) ConfigDedicatedNR, SIB12 or SidelinkPreconfigNR:
\( 2> \) set the SLRB-Config included in the strb-ConfigToAddModList, according to the received \( s \) RadioBearerConfig and \( s l \)-RLC-BearerConfig corresponding to the sidelink DRB;
\( 1> \) set the \( s \) /-MeasConfig as follows:
\( 2> \) If the frequency used for NR sidelink communication is included in sl-FreqInfoToAddModList in slConfigDedicatedNR within RRCReconfiguration message or included in sl-ConfigCommonNR within SIB12:

3> if UE is in RRC_CONNECTED:
\( 4> \) set the \( s \)-MeasConfig according to stored NR sidelink measurement configuration information for this destination;

3> if UE is in RRC_IDLE or RRC_INACTIVE:
4> set the sl-MeasConfig according to stored NR sidelink measurement configuration received from SIB12;
\( 2> \) else:
\( 3> \) set the \( s \) /-MeasConfig according to the sl-MeasPreconfig in SidelinkPreconfigNR;
1> start timer T400 for the destination associated with the sidelink DRB;
\( 1> \) set the \( s \) l-CSI-RS-Config;
\( 1> \) set the \( s \) /-LatencyBoundCSI-Report,
NOTE 1: How to set the parameters included in sl-CSI-RS-Config and sl-LatencyBoundCSI-Report is up to UE implementation.
\( 1> \) set the sl-DRX-ConfigUC-PC5 as follows:
\( 2> \) If the frequency used for NR sidelink communication is included in \( s \)-FreqInfoToAddModList in \( s \) ConfigDedicatedNR within RRCReconfiguration message or included in sl-ConfigCommonNR within SIB12:

3> if UE is in RRC_CONNECTED and is performing sidelink operation with resource allocation mode 1:
\( 4> \) set the sl-DRX-ConfigUC-PC5 according to stored NR sidelink DRX configuration information for this destination.

3> else if UE is in RRC_CONNECTED and is performing sidelink operation with resource allocation mode 2:

4 → UE determines the sidelink DRX configuration for unicast for the associated peer UE;
NOTE 2: If UE is in RRC_IDLE or in RRC_INACTIVE or out of coverage, it is up to UE implementation to set the \( s \)-DRX-Config UC-PC5.

ETSI


--- Page 290  ---


3GPP TS 38.331 version 17.0.0 Release 17
289
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) for each PC5 Relay RLC channel that is to be released due to configuration by sl-ConfigDedicatedNR:
\( 2> \) set the SL-RLC-ChannelConfig-PC5 included in the sl-RLC-ChannelToReleaseList-PC5 corresponding to the PC5 Relay RLC channel;
\( 1> \) for each PC5 Relay RLC channel that is to be established or modified due to receiving sl-ConfigDedicatedNR:
\( 2> \) set the SL-RLC-ChannelConfig-PC5 included in the sl-RLC-ChannelToAddModList-PC5, according to the received sl-RLC-ChannelConfig corresponding to the PC5 Relay RLC channel;

The UE shall submit the RRCReconfigurationSidelink message to lower layers for transmission.
5.8.9.1.3 Reception of an RRCReconfiguration Sidelink by the UE

The UE shall perform the following actions upon reception of the RRCReconfigurationSidelink:
\( 1> \) if the RRCReconfigurationSidelink includes the \( s \) l-ResetConfig:
\( 2> \) perform the sidelink reset configuration procedure as specified in 5.8.9.1.10;
\( 1> \) if the RRCReconfigurationSidelink includes the sirb-ConfigToReleaseList:
\( 2> \) for each SLRB-PC5-ConfigIndex value included in the sirb-ConfigToReleaseList that is part of the current UE sidelink configuration;

3> perform the sidelink DRB release procedure, according to clause 5.8.9.1a.1;
1> if the RRCReconfigurationSidelink includes the sirb-ConfigToAddModList:
\( 2> \) for each strb-PC5-ConfigIndex value included in the sirb-ConfigToAddModList that is not part of the current UE sidelink configuration:

3> if sl-MappedQoS-FlowsToAddList is included:
4> apply the SL-PQFI included in sl-MappedQoS-FlowsToAddList;
\( 3> \) perform the sidelink DRB addition procedure, according to clause 5.8.9.1a.2;
2 for each sirb-PC5-ConfigIndex value included in the sirb-ConfigToAddModList that is part of the current UE sidelink configuration:

3> if sl-MappedQoS-FlowsToAddList is included:
4> add the SL-PQFI included in sl-MappedQoS-FlowsToAddList to the corresponding sidelink DRB;
3> if sl-MappedQoS-FlowsToReleaseList is included:
4> remove the SL-PQFI included in sl-MappedQoS-FlowsToReleaseList from the corresponding sidelink DRB;

3> if the sidelink DRB release conditions as described in clause 5.8.9-1a.1.1 are met:
\( 4> \) perform the sidelink DRB release procedure according to clause 5.8.9.1a.1.2;
\( 3> \) else if the sidelink DRB modification conditions as described in clause 5.8.9.1a.2.1 are met:
\( 4> \) perform the sidelink DRB modification procedure according to clause 5.8.9.1a.2.2;
1> if the RRCReconfigurationSidelink message includes the sl-MeasConfig:
\( 2> \) perform the sidelink measurement configuration procedure as specified in 5.8.10;
\( 1> \) if the RRCReconfigurationSidelink message includes the sl-CSI-RS-Config:
2> apply the sidelink CSI-RS configuration;
\( 1> \) if the RRCReconfigurationSidelink message includes the \( s \) /-LatencyBoundCSI-Report:

ETSI


--- Page 291  ---


3GPP TS 38.331 version 17.0.0 Release 17
290
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) apply the configured sidelink CSI report latency bound;
\( 1> \) if the UE is unable to comply with (part of) the configuration included in the RRCReconfigurationSidelink (i.e. sidelink RRC reconfiguration failure):
\( 2> \) continue using the configuration used prior to the reception of the RRCReconfigurationSidelink message;
\( 2> \) set the content of the RRCReconfigurationFailureSidelink message;
3> submit the RRCReconfigurationFailureSidelink message to lower layers for transmission;
\( 1> \) else:
\( 2> \) set the content of the RRCReconfigurationCompleteSidelink message;
3> submit the RRCReconfiguration CompleteSidelink message to lower layers for transmission;
NOTE 1: When the same logical channel is configured with different RLC mode by another UE, the UE handles the case as sidelink RRC reconfiguration failure.
\( 1> \) if the RRCReconfigurationSidelink includes the sl-RLC-ChannelToReleaseList-PC5:
\( 2> \) for each SL-RLC-ChannellD value included in the sl-RLC-ChannelToReleaseList-PC5 that is part of the current UE sidelink configuration;

3> perform the PC5 Relay RLC channel release procedure, according to clause 5.8.9.7.1;
\( 1> \) if the RRCReconfigurationSidelink includes the sl-RLC-ChannelToAddModList-PC5:
\( 2> \) for each sl-RLC-ChannellD-PC5 value included in the sl-RLC-ChannelToAddModList-PC5 that is not part of the current UE sidelink configuration:
\( 3> \) perform the sidelink RLC channle addition procedure, according to clause 5.8.9.7.2;
\( 2> \) for each sl-RLC-ChannellD-PC5 value included in the sl-RLC-ChannelToAddModList-PC5 that is part of the current UE sidelink configuration:

3> perform the PC5 Relay RLC channel modification procedure according to clause 5.8.9.7.2;
5.8.9.1.4 Void
5.8.9.1.5 Void
5.8.9.1.6 Void
5.8.9.1.7 Void
5.8.9.1.8 Reception of an RRCReconfigurationFailureSidelink by the UE

The UE shall perform the following actions upon reception of the RRCReconfigurationFailureSidelink:
1> stop timer T400 for the destination, if running;
\( 1> \) continue using the configuration used prior to corresponding RRCReconfigurationSidelink message;
1> if UE is in RRC_CONNECTED:
\( 2> \) perform the sidelink UE information for NR sidelink communication procedure, as specified in 5.8.3.3 or clause 5.10.15 in TS 36.331 [10];
5.8.9.1.9 Reception of an RRCReconfiguration Complete Sidelink by the UE

The UE shall perform the following actions upon reception of the RRCReconfigurationCompleteSidelink:

ETSI


--- Page 292  ---


3GPP TS 38.331 version 17.0.0 Release 17
291
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) stop timer T400 for the destination, if running;
\( 1> \) consider the configurations in the corresponding RRCReconfigurationSidelink message to be applied.
Editor's Note: to be captured on behaviour after rejection, based on which message used. Related agreement "Keep RX UE's reject option for SL DRX configuration sent by TX UE. If reject happens for initial SL DRX configuration, default SL DRX configuration is no UC SL DRX. FFS on the default SL DRX configuration for non-initial SL DRX configuration. No enhancement to resolve any deadlock issue in Rel-17."
5.8.9.1.10 Sidelink reset configuration

The UE shall:
\( 1> \) release/clear current sidelink radio configuration of this destination received in the RRCReconfigurationSidelink;
\( 1> \) release the sidelink DRBs of this destination, in according to clause 5.8.9.1a.1;
\( 1> \) reset the sidelink specific MAC of this destination.
NOTE 1: Sidelink radio configuration is not just the resource configuration but may include other configurations included in the RRCReconfigurationSidelink message except the sidelink DRBs of this destination.

NOTE 2: After the sidelink DRB release procedure, UE may perform the sidelink DRB addition according to the current sidelink configuration of this destination, received in sl-ConfigDedicatedNR, SIB12 and SidelinkPreconfigNR, according to clause 5.8.9.1a.2.
5.8.9.1a Sidelink radio bearer management
5.8.9.1a. 1 Sidelink DRB release
5.8.9.1a.1.1 Sidelink DRB release conditions

For NR sidelink communication, a sidelink DRB release is initiated in the following cases:
\( 1> \) for groupcast, broadcast and unicast, if strb-Uu-ConfigIndex (if any) of the sidelink DRB is included in \( s \) RadioBearerToReleaseList in sl-ConfigDedicatedNR; or
\( 1> \) for groupcast and broadcast, if no sidelink QoS flow with data indicated by upper layers is mapped to the sidelink DRB for transmission, which is (re)configured by receiving SIB12 or SidelinkPreconfigNR; or
\( 1> \) for groupcast, broadcast and unicast, if SL-RLC-BearerConfigIndex (if any) of the sidelink DRB is included in sl-RLC-BearerToReleaseList in sl-ConfigDedicatedNR; or
\( 1> \) for unicast, if no sidelink QoS flow with data indicated by upper layers is mapped to the sidelink DRB for transmission, which is (re)configured by receiving SIB12 or SidelinkPreconfigNR, and if no sidelink QoS flow mapped to the sidelink DRB, which is (re)configured by receiving RRCReconfigurationSidelink, has data; or
\( 1> \) for unicast, if SLRB-PC5-ConfigIndex (if any) of the sidelink DRB is included in strb-ConfigToReleaseList in RRCReconfigurationSidelink or if sl-ResetConfig is included in RRCReconfigurationSidelink; or
\( 1> \) for unicast, when the corresponding PC5-RRC connection is released due to sidelink RLF being detected, according to clause 5.8.9.3; or
\( 1> \) for unicast, when the corresponding PC5-RRC connection is released due to upper layer request according to clause 5.8.9.5.
5.8.9.1a.1.2 Sidelink DRB release operations

For each sidelink DRB, whose sidelink DRB release conditions are met as in clause 5.8.9.1a.1.1, the UE capable of NR sidelink communication that is configured by upper layers to perform NR sidelink communication shall:
\( 1> \) for groupcast and broadcast; or

ETSI


--- Page 293  ---


3GPP TS 38.331 version 17.0.0 Release 17
292
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) for unicast, if the sidelink DRB release was triggered after the reception of the RRCReconfigurationSidelink message; or
\( 1> \) for unicast, after receiving the RRCReconfigurationCompleteSidelink message, if the sidelink DRB release was triggered due to the configuration received within the sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR or indicated by upper layers:
\( 2> \) release the PDCP entity for NR sidelink communication associated with the sidelink DRB;
\( 2> \) if SDAP entity for NR sidelink communication associated with this sidelink DRB is configured:
\( 3> \) indicate the release of the sidelink DRB to the SDAP entity associated with this sidelink DRB (TS 37.324 [24], clause 5.3.3);
\( 2> \) release SDAP entities for NR sidelink communication, if any, that have no associated sidelink DRB as specified in TS 37.324 [24] clause 5.1.2;
\( 1> \) for groupcast and broadcast; or
\( 1> \) for unicast, after receiving the RRCReconfigurationCompleteSidelink message, if the sidelink DRB release was triggered due to the configuration received within the sl-ConfigDedicatedNR:
\( 2> \) for each \( s / \)-RLC-BearerConfigIndex included in the received \( s / \)-RLC-BearerToReleaseList that is part of the current UE sidelink configuration:
\( 3> \) release the RLC entity and the corresponding logical channel for NR sidelink communication, associated with the \( s /-R L C- \) BearerConfigIndex.
\( 1> \) for unicast, if the sidelink DRB release was triggered due to the reception of the RRCReconfigurationSidelink message; or
\( 1> \) for unicast, after receiving the RRCReconfigurationCompleteSidelink message, if the sidelink DRB release was triggered due to the configuration received within the SIB12, SidelinkPreconfigNR or indicated by upper layers:
\( 2> \) release the RLC entity and the corresponding logical channel for NR sidelink communication associated with the sidelink DRB ;
\( 2> \) perform the sidelink UE information procedure in clause 5.8 .3 for unicast if needed.
\( 1> \) if the sidelink radio link failure is detected for a specific destination:
\( 2> \) release the PDCP entity, RLC entity and the logical channel of the sidelink DRB for the specific destination.
5.8.9.1a.2 Sidelink DRB addition/modification
5.8.9.1a.2.1 Sidelink DRB addition/modification conditions

For NR sidelink communication, a sidelink DRB addition is initiated only in the following cases:
\( 1> \) if any sidelink QoS flow is (re)configured by sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR and is to be mapped to one sidelink DRB, which is not established; or
\( 1> \) if any sidelink QoS flow is (re)configured by RRCReconfigurationSidelink and is to be mapped to a sidelink DRB, which is not established;

For NR sidelink communication, a sidelink DRB modification is initiated only in the following cases:
\( 1> \) if any of the sidelink DRB related parameters is changed by sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR or RRCReconfigurationSidelink for one sidelink DRB, which is established;
5.8.9.1a.2.2 Sidelink DRB addition/modification operations

For the sidelink DRB , whose sidelink DRB addition conditions are met as in clause 5.8.9.1a.2.1, the UE capable of NR sidelink communication that is configured by upper layers to perform NR sidelink communication shall:

ETSI


--- Page 294  ---


3GPP TS 38.331 version 17.0.0 Release 17
293
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) for groupcast and broadcast; or
\( 1> \) for unicast, if the sidelink DRB addition was trigggered due to the reception of the RRCReconfigurationSidelink message; or
\( 1> \) for unicast, after receiving the RRCReconfigurationCompleteSidelink message, if the sidelink DRB addition was triggered due to the configuration received within the sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR or indicated by upper layers:
\( 2> \) if an SDAP entity for NR sidelink communication associated with the destination and the cast type of the sidelink DRB does not exist:
\( 3> \) establish an SDAP entity for NR sidelink communication as specified in TS 37.324 [24] clause 5.1_1;
\( 2> \) (re)configure the SDAP entity in accordance with the \( s l \)-SDAP-ConfigPC5 received in the RRCReconfigurationSidelink or sl-SDAP-Config received in sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR, associated with the sidelink DRB;
\( 2> \) establish a PDCP entity for NR sidelink communication and configure it in accordance with the \( s /-P D C P \) ConfigPC5 received in the RRCReconfigurationSidelink or sl-PDCP-Config received in slConfigDedicatedNR, SIB12, SidelinkPreconfigNR, associated with the sidelink DRB;
\( 2> \) establish a RLC entity for NR sidelink communication and configure it in accordance with the \( s l-R L C- \) ConfigPC5 received in the RRCReconfigurationSidelink or sl-RLC-Config received in slConfigDedicatedNR, SIB12, SidelinkPreconfigNR, associated with sidelink DRB;
\( 2> \) if this procedure was due to the reception of a RRCReconfigurationSidelink message:
\( 3> \) configure the MAC entity with a logical channel in accordance with the \( s /-M A C \) LogicalChannelConfigPC5 received in the RRCReconfigurationSidelink associated with the sidelink DRB, and perform the sidelink UE information procedure in clause 5.8 .3 for unicast if need;
\( 2> \) else:
\( 3> \) configure the MAC entity with a logical channel associated with the sidelink DRB, by assigning a new logical channel identity, in accordance with the sl-MAC-LogicalChannelConfig received in the slConfigDedicatedNR, SIB12, SidelinkPreconfigNR.

NOTE 1: When a sidelink DRB addition is due to the configuration by RRCReconfigurationSidelink, it is up to UE implementation to select the sidelink DRB configuration as necessary transmitting parameters for the sidelink DRB, from the received sl-ConfigDedicatedNR (if in RRC_CONNECTED), SIB12 (if in RRC_IDLE/INACTIVE), SidelinkPreconfigNR (if out of coverage) with the same RLC mode as the one configured in RRCReconfigurationSidelink.

For the sidelink DRB, whose sidelink DRB modification conditions are met as in clause 5.8.9.1a.2.1, the UE capable of NR sidelink communication that is configured by upper layers to perform NR sidelink communication shall:
\( 1> \) for groupcast and broadcast; or
\( 1> \) for unicast, if the sidelink DRB modification was triggered due to the reception of the
RRCReconfigurationSidelink message; or
\( 1> \) for unicast, after receiving the RRCReconfigurationCompleteSidelink message, if the sidelink DRB modification was triggered due to the configuration received within the sl-ConfigDedicatedNR, SIB12 or
SidelinkPreconfigNR:
\( 2> \) reconfigure the SDAP entity of the sidelink DRB, in accordance with the \( s /-S D A P \) - \( C \) onfig \( P C 5 \) received in the RRCReconfigurationSidelink or sl-SDAP-Config received in sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR, if included;
\( 2> \) reconfigure the PDCP entity of the sidelink DRB, in accordance with the \( s /-P D C P \)-ConfigPC5 received in the RRCReconfigurationSidelink or sl-PDCP-Config received in sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR, if included;

ETSI


--- Page 295  ---


3GPP TS 38.331 version 17.0.0 Release 17
294
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) reconfigure the RLC entity of the sidelink DRB, in accordance with the \( s / \) - \( R L C \) - \( C \) onfig \( P C 5 \) received in the RRCReconfigurationSidelink or sl-RLC-Config received in sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR, if included;
\( 2> \) reconfigure the logical channel of the sidelink DRB , in accordance with the \( s / \)-MACLogicalChannelConfigPC5 received in the RRCReconfigurationSidelink or sl-MAC-LogicalChannelConfig received in sl-ConfigDedicatedNR, SIB12, SidelinkPreconfigNR, if included.
5.8.9.1a. 3 Sidelink SRB release

The UE shall:
\( 1> \) if a PC5-RRC connection release for a specific destination is requested by upper layers or AS layer; or
\( 1> \) if the sidelink radio link failure is detected for a specific destination:
\( 2> \) release the PDCP entity, RLC entity and the logical channel of the sidelink SRB for PC5-RRC message of the specific destination;
\( 2> \) consider the PC5-RRC connection is released for the destination.
\( 1> \) if PC5-S transmission for a specific destination is terminated in upper layers:
\( 2> \) release the PDCP entity, RLC entity and the logical channel of the sidelink SRB(s) for PC5-S message of the specific destination;
\( 1> \) if discovery transmission for a specific destination is terminated in upper layers:
\( 2> \) release the PDCP entity, RLC entity and the logical channel of the sidelink SRB4 for discovery message of the specific destination;
5.8.9.1a. 4 Sidelink SRB addition

The UE shall:
\( 1> \) if transmission of PC5-S message for a specific destination is requested by upper layers for sidelink SRB:
\( 2> \) establish PDCP entity, RLC entity and the logical channel of a sidelink SRB for PC5-S message, as specified in clause 9.1.1.4;
\( 1> \) if transmission of discovery message for a specific destination is requested by upper layers for sidelink SRB:
\( 2> \) establish PDCP entity, RLC entity and the logical channel of a sidelink SRB4 for discovery message, as specified in clause 9.1.1.4;
\( 1> \) if a PC5-RRC connection establishment for a specific destination is indicated by upper layers:
\( 2> \) establish PDCP entity, RLC entity and the logical channel of a sidelink SRB for PC5-RRC message of the specific destination, as specified in clause 9.1.1.4;
\( 2> \) consider the PC5-RRC connection is established for the destination.
5.8.9.2 Sidelink UE capability transfer
5.8.9.2.1 General

This clause describes how the UE compiles and transfers its sidelink UE capability information for unicast to the initiating UE.

ETSI


--- Page 296  ---


3GPP TS 38.331 version 17.0.0 Release 17
295
ETSI TS 138331 V17.0.0 (2022-05)

Figure 5.8.9.2.1-1: Sidelink UE capability transfer
5.8.9.2.2 Initiation

The UE may initiate the sidelink UE capability transfer procedure upon indication from upper layer when it needs (additional) UE radio access capability information.
5.8.9.2.3 Actions related to transmission of the UECapabilityEnquirySidelink by the UE

The initiating UE shall set the contents of UECapabilityEnquirySidelink message as follows:
1> include in UE radio access capabilities for sidelink within ue-CapabilityInformationSidelink, if needed;
NOTE 1: It is up to initiating UE to decide whether ue-CapabilityInformationSidelink should be included.
\( 1> \) set frequencyBandListFilterSidelink to include frequency bands for which the peer UE is requested to provide supported bands and band combinations;

NOTE 2: The initiating UE is not allowed to send the UECapabilityEnquirySidelink message without including the field frequencyBandListFilterSidelink.

1> submit the UECapabilityEnquirySidelink message to lower layers for transmission.
5.8.9.2.4 Actions related to reception of the UECapabilityEnquirySidelink by the UE

The peer UE shall set the contents of UECapabilityInformationSidelink message as follows:
\( 1> \) include UE radio access capabilities for sidelink within \( u e \)-CapabilityInformationSidelink;
\( 1> \) compile a list of "candidate band combinations" only consisting of bands included in frequencyBandListFilterSidelink, and prioritized in the order of frequencyBandListFilterSidelink (i.e. first include band combinations containing the first-listed band, then include remaining band combinations containing the second-listed band, and so on).
\( 1> \) include into supportedBandCombinationListSidelinkNR as many band combinations as possible from the list of "candidate band combinations", starting from the first entry;

1> include the received frequencyBandListFilterSidelink in the field appliedFreqBandListFilter of the requested UE capability;

1> submit the UECapabilityInformationSidelink message to lower layers for transmission.
NOTE: If the UE cannot include all band combinations due to message size or list size constraints, it is up to UE implementation which band combinations it prioritizes.
5.8.9.3 Sidelink radio link failure related actions

The UE shall:
\( 1> \) upon indication from sidelink RLC entity that the maximum number of retransmissions for a specific destination has been reached; or

1> upon T400 expiry for a specific destination; or

ETSI


--- Page 297  ---


3GPP TS 38.331 version 17.0.0 Release 17
296
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) upon indication from MAC entity that the maximum number of consecutive HARQ DTX for a specific destination has been reached; or
\( 1> \) upon integrity check failure indication from sidelink PDCP entity concerning SL-SRB2 or SL-SRB3 for a specific destination:
\( 2> \) consider sidelink radio link failure to be detected for this destination;
\( 2> \) release the DRBs of this destination if configured, in according to clause 5.8.9.1a.1;
\( 2> \) release the SRBs of this destination, in according to clause 5.8.9.1a.3;
\( 2> \) release the PC5 Relay RLC channels of this destination if configured, in according to clause 5.8.9.7.1;
\( 2> \) discard the NR sidelink communication related configuration of this destination;
\( 2> \) reset the sidelink specific MAC of this destination;
\( 2> \) consider the PC5-RRC connection is released for the destination;
\( 2> \) indicate the release of the PC5-RRC connection to the upper layers for this destination (i.e. PC5 is unavailable);
\( 2> \) if UE is in RRC_CONNECTED:
3> if the UE is connected with a L2 U2N Relay UE via the PC5-RRC connection (i.e the UE is a L2 U2N Remote UE):

4> initiate the RRC connection re-establishment procedure as specified in 5.3.7.
3> else:
4> perform the sidelink UE information for NR sidelink communication procedure, as specified in 5.8.3.3;

NOTE: It is up to UE implementation on whether and how to indicate to upper layers to maintain the keep-alive procedure [55].
5.8.9.4 Sidelink common control information
5.8.9.4.1 General

The sidelink common control information is carried by MasterInformationBlockSidelink. The sidelink common control information may change at any transmission, i.e neither a modification period nor a change notification mechanism is used. This procedure also applies to sidelink discovery.

A UE configured to receive or transmit NR sidelink communication/discovery shall:
\( 1> \) if the UE has a selected SyncRef UE, as specified in 5.8.6:
\( 2> \) ensure having a valid version of the MasterInformationBlockSidelink message of that SyncRef UE;
5.8.9.4.2 Actions related to reception of MasterInformationBlockSidelink message

Upon receiving MasterInformationBlockSidelink, the UE shall:
\( 1> \) apply the values included in the received MasterInformation BlockSidelink message.
5.8.9.4.3 Transmission of MasterInformationBlockSidelink message

The UE shall set the contents of the MasterInformationBlockSidelink message as follows:
1> if in coverage on the frequency used for the NR sidelink communication as defined in TS 38.304 [20].
\( 2> \) set inCoverage to true;

ETSI


--- Page 298  ---


3GPP TS 38.331 version 17.0.0 Release 17
297
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if tdd-UL-DL-ConfigurationCommon is included in the received SIB1:
3> set sl-TDD-Config to the value representing the same meaning as that is included in \( t d d \)-UL-DLConfigurationCommon, as described in TS 38.213, clause 16.1 [13];
\( 2> \) else:
3> set sl-TDD-Config to the value as specified in TS 38.213 [13], clause 16.1;
\( 2> \) if syncInfoReserved is included in an entry of configured sl-SyncConfigList corresponding to the concerned frequency from the received SIB12:

3> set reservedBits to the value of syncInfoReserved in the received SIB12;
\( 2> \) else:
3> set all bits in reservedBits to 0;
1> else if out of coverage on the frequency used for NR sidelink communication as defined in TS 38.304 [20]; and the concerned frequency is included in sl-FreqInfoToAddModList in RRCReconfiguration or in sl-FreqInfoList within SIB12:
\( 2> \) set inCoverage to true;
\( 2> \) set reservedBits to the value of the corresponding field included in the preconfigured sidelink parameters (i.e. sl-PreconfigGeneral in SidelinkPreconfigNR defined in 9.3);
\( 2> \) set sl-TDD-Config to the value representing the same meaning as that is included in the corresponding field included in the preconfigured sidelink parameters (i.e. \( s l \)-PreconfigGeneral in SL-PreconfigurationNR defined in 9.3) as described in TS 38.213, clause 16.1 [13];
\( 1> \) else if out of coverage on the frequency used for NR sidelink communication as defined in TS 38.304 [20]; and the UE selects GNSS as the synchronization reference and sl-SSB-TimeAllocation3 is not configured for the frequency used in SidelinkPreconfigNR:
\( 2> \) set inCoverage to true;
\( 2> \) set reservedBits to the value of the corresponding field included in the preconfigured sidelink parameters (i.e. sl-PreconfigGeneral in SidelinkPreconfigNR defined in 9.3);
\( 2> \) set sl-TDD-Config to the value representing the same meaning as that is included in the corresponding field included in the preconfigured sidelink parameters (i.e. sl-PreconfigGeneral in SL-PreconfigurationNR defined in 9.3) as described in TS 38.213, clause 16.1 [13];
\( 1> \) else if the UE has a selected SyncRef UE (as defined in 5.8.6):
\( 2> \) set inCoverage to false;
\( 2> \) set sl-TDD-Config and reservedBits to the value of the corresponding field included in the received MasterInformationBlockSidelink;

1> else:
\( 2> \) set inCoverage to false;
\( 2> \) set reservedBits to the value of the corresponding field included in the preconfigured sidelink parameters (i.e. sl-PreconfigGeneral in SidelinkPreconfigNR defined in 9.3);
\( 2> \) set \( s \) /-TDD-Config to the value representing the same meaning as that is included in the corresponding field included in the preconfigured sidelink parameters (i.e. sl-PreconfigGeneral in SL-PreconfigurationNR defined in 9.3) as described in TS 38.213, clause 16.1 [13];
\( 1> \) set directFrameNumber and slotIndex according to the slot used to transmit the SLSS, as specified in 5.8.5.3;
1> submit the MasterInformationBlockSidelink to lower layers for transmission upon which the procedure ends;

ETSI


--- Page 299  ---


3GPP TS 38.331 version 17.0.0 Release 17
298
ETSI TS 138331 V17.0.0 (2022-05)
5.8.9.5 Actions related to PC5-RRC connection release requested by upper layers or AS layer

The UE initiates the procedure when upper layers request the release of the PC5-RRC connection as specified in TS 24.587 [57] or when AS layer releases the the PC5-RRC connection. The UE shall not initiate the procedure for power saving purposes.

The UE shall:
\( 1> \) if the PC5-RRC connection release for the specific destination is requested by upper layers, or initiated at the AS:
\( 2> \) discard the NR sidelink communication related configuration of this destination;
\( 2> \) release the DRBs of this destination if configured, in according to clause 5.8.9.1a.1;
\( 2> \) release the SRBs of this destination, in according to clause 5.8.9.1a.3;
\( 2> \) release the PC5 Relay RLC channels if configured, in according to clause 5.8.9.7.1;
\( 2> \) reset the sidelink specific MAC of this destination.
\( 2> \) consider the PC5-RRC connection is released for the destination;
\( 1> \) if the PC5-RRC connection release is initiated at the AS:
\( 2> \) indicate the upper layers the PC5-RRC connection is released for the destination;
5.8.9.6 UE assistance information Sidelink
5.8.9.6.1 General

Figure 5.8.9.6.1-1: UE assistance Information Sidelink

The purpose of this procedure is for a UE to inform its peer UE of the sidelink DRX assistance information used to determine the sidelink DRX configuration for unicast communication.

For sidelink unicast, a UE may include its desired sidelink DRX configuration in the UEAssistancelnformationSidelink as the sidelink DRX assistance information which is transmitted to its peer UE.

NOTE: It is up to UE implementation to determine its desired sidelink DRX configuration for unicast communication.
5.8.9.6.2 Initiation

For sidelink unicast, if both a RX UE and its peer TX UE for a direction of sidelink communication are capable of sidelink DRX , the RX UE that is interested in sending the sidelink DRX assistance information may send the UEAssistanceInformationSidelink as the sidelink DRX assistance information to its peer UE when the sidelink DRX assistance information has not been sent previously or when the previously transmitted sidelink DRX assistance information has changed.

ETSI


--- Page 300  ---


3GPP TS 38.331 version 17.0.0 Release 17
299
ETSI TS 138331 V17.0.0 (2022-05)
5.8.9.6.3 Actions related to reception of UEAssistanceInformationSidelink message

For sidelink unicast, when a UE is in RRC_CONNECTED and is performing sidelink operation with resource allocation mode 1, it may report the sidelink DRX assistance information received within the UEAssistanceInformationSidelink from its peer UE to the network. For sidelink unicast, when a UE is in RRC_CONNECTED and is performing sidelink operation with resource allocation mode 2 or is in RRC_IDLE or RRC_INACTIVE or out of coverage, and has obtained the sidelink DRX assistance information from the UEAssistanceInformationSidelink transmitted from its peer UE, it may determine the sidelink DRX configuration SL-DRX-ConfigUC for its peer UE based on UE implementation.

NOTE: When UE determines the sidelink DRX configuration for its peer UE, it may take the sidelink DRX assistance information that is received from its peer UE into account.
5.8.9.7 PC5 Relay RLC channel management for L2 U2N relay
5.8.9.7.1 PC5 Relay RLC channel release

The UE shall:
\( 1> \) for each \( s \) l-RLC-ChannellD-PC5 included in the received \( s \) l-RLC-ChannelToReleaseList-PC5 that is part of the current UE sidelink configuration:
\( 2> \) release the RLC entity and the corresponding logical channel associated with the sl-RLC-ChannellD-PC5;
5.8.9.7.2 PC5 Relay RLC channel addition/modification

Upon PC5-RRC connection is established between the L2 U2N Relay UE and L2 U2N Relay UE, the L2 U2N Relay UE shall:
\( 1> \) apply RLC specified configuration of SL-RLC0 as specified in clause 9-1.1.4 and RLC default configuration of SL-RLC1 as specified in clause 9.2.4;

Upon reception of any message from a L2 U2N Remote UE via SL-RLC0, the L2 U2N Relay UE shall:
\( 1> \) apply RLC default configuration of SL-RLC1 as specified in clause 9.2.4;
For each sl-RLC-ChannellD-PC5 received in the sl-RLC-ChannelToAddModList-PC5 IE the UE shall:
\( 1> \) if the current configuration contains a sidelink RLC bearer with the received sl-RLC-ChannellD-PC5:
\( 2> \) reconfigure the sidelink RLC entity or entities in accordance with the received \( s t-R L C \)-ConfigPC5;
\( 2> \) reconfigure the sidelink logical channel in accordance with the received sl-MAC-LogicalChannelConfigPC5;
\( 1> \) else (a PC5 Relay RLC channel with the received \( s \) /-RLC-ChannelID-PC5 was not configured before):
\( 2> \) establish an sidelink RLC entity in accordance with the received \( s / \)-RLC-ConfigPC5;
\( 2> \) configure the sidelink MAC entity with a logical channel in accordance with the received \( s / \)-MACLogicalChannelConfigPC5.

ETSI


--- Page 301  ---


3GPP TS 38.331 version 17.0.0 Release 17
300
ETSI TS 138331 V17.0.0 (2022-05)
5.8.9.8 Remote UE information
5.8.9.8.1 General

Figure 5.8.9.8.1-1: Remote UE information

This procedure is used by the L2 U2N Remote UE in RRC_IDLE/RRC_INACTIVE to inform about the required SIB(s) and provide Paging related information to the connected L2 U2N Relay UE.
5.8.9.8.2 Actions related to transmission of RemoteUEInformationSidelink message

The L2 U2N Remote UE in RRC_IDLE or RRC_INACTIVE shall:
\( 1> \) if the UE has not stored a valid version of a SIB, in accordance with clause 5.2.2.2.1, of one or several required SIB(s) in accordance with clause 5.2.2.1:
\( 2> \) include \( s \)-Requested-SI-List in the RemoteUEInformationSidelink to indicate the requested SIB(s);
1> set si-PagingInfo-RemoteUE as follows:
2> if the L2 U2N Remote UE is in RRC_IDLE:
\( 3> \) include ng-5G-S-TMSI in the sl-Pagingldentity-RemoteUE;
\( 3> \) set UE specific DRX cycle to the value of UE specific Uu DRX cycle configured by upper layer in the sl-PagingCycle-RemoteUE;
\( 2> \) else if the L2 U2N Remote UE is in RRC_INACTIVE:
3> include ng-5G-S-TMSI and full-RNTI in the sl-Pagingldentity-RemoteUE;
3> set UE specific DRX cycle to the minimum value of UE specific Uu DRX cycles (configured by upper layer and configured by RAN) in the \( s l \)-PagingCycle-RemoteUE;

1> submit the RemoteUEInformationSidelink message to lower layers for transmission;
When entering RRC_CONNECTED, if L2 U2N remote UE had send sl-Requested-Sl-List and sl-PagingInfoRemoteUE, the L2 U2N Remote UE shall:
\( 1> \) set the \( s \) /-Requested-SI-List to the value release;
\( 1> \) set the \( s l \)-PagingInfo-RemoteUE to the value release;
1> submit the RemoteUEInformationSidelink message to lower layers for transmission;
5.8.9.8.3 Reception of RemoteUEInformation Sidelink message by the L2 U2N Relay UE

The L2 U2N Relay UE shall:
\( 1> \) if the RemoteUEInformationSidelink includes the sl-PagingInfo-RemoteUE:
\( 2> \) if the UE is in RRC_CONNECTED on an active BWP with common search space configured including pagingSearchSpace; or
\( 2> \) if the UE is in RRC_IDLE or RRC_INACITIVE:
3> if the sl-PagingInfo-RemoteUE is set to setup:

ETSI


--- Page 302  ---


3GPP TS 38.331 version 17.0.0 Release 17
301
ETSI TS 138331 V17.0.0 (2022-05)

4> monitor the Paging message at the L2 U2N Remote UE's paging occasion calculated according to \( s \) -PagingCycle-RemoteUE included in sl-PagingInfo-RemoteUE;
\( 3> \) else (the \( s \) l-PagingInfo-RemoteUE is set to release):
4> stop monitoring the Paging message at the L2 U2N Remote UE's paging occasion;
\( 4> \) release the received paging information in sl-PagingInfo-RemoteUE;
\( 2> \) else (the UE is in RRC_CONNECTED on an active BWP without pagingSearchSpace configured):
\( 3> \) if the sl-PagingInfo-RemoteUE is set to setup:
4> include the received sl-PagingIdentity-RemoteUE in SidelinkUEInformationNR message and perform Sidelink UE information transmission in accordance with 5.8.3;
\( 3> \) else (the \( s \)-PagingInfo-RemoteUE is set to release):
\( 4> \) initiate transmission of the SidelinkUEInformationNR message to release the \( s \) /-PagingldentityRemoteUE in SidelinkUEInformationNR message in accordance with 5.8.3;
\( 4> \) release the received paging information in sl-PagingInfo-RemoteUE;
\( 1> \) if the RemoteUEInformationSidelink includes the \( s / \)-Requested-SI-List:
\( 2> \) if the \( s \)-Requested-SI-List is set to setup:
3> perform acquisition of the system information indicated in sl-Requested-SI-List in accordance with 5.2.2;
\( 2> \) if the \( s \) /-Requested-SI-List is set to release:
3> release received SIB request in sl-Requested-SI-List.
5.8.9.9 Uu message transfer in sidelink
5.8.9.9.1 General

Figure 5.8.9.9.1-1: Uu message transfer in sidelink

The purpose of this procedure is to transfer Paging message and System Information from the L2 U2N Relay UE to the L2 U2N Remote UE in RRC_IDLE/RRC_INACTIVE.
5.8.9.9.2 Actions related to transmission of UuMessage TransferSidelink message

The L2 U2N Relay UE initiates the Uu message transfer procedure when one of the following conditions is met:
\( 1> \) upon receiving Paging message related to the connected L2 U2N Remote UE from network;
\( 1> \) upon acquisition of the SIBs requested by the connected L2 U2N Remote UE (as indicated in sl-Requested-SIList in the RemoteUEInformationSidelink);
\( 1> \) upon receiving the updated SIB1 and the SIBs have been requested by the connected L2 U2N Remote UE from network;

The L2 U2N Relay UE shall set the contents of UuMessageTransferSidelink message as follows:

ETSI


--- Page 303  ---


3GPP TS 38.331 version 17.0.0 Release 17
302
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) include \( s l \)-PagingDelivery if the Paging message received from network containing the associated ue-Identity of the L2 U2N Remote UE;
\( 1> \) include \( s \)-SystemInformationDelivery if any of the conditions for initiating Uu message transfer procedure related to System Information are met;

1> submit the UuMessageTransferSidelink message to lower layers for transmission.
NOTE: The L2 U2N Relay UE always forwards SIB1 to the L2 U2N Remote UE.
5.8.9.9.3 Reception of the UuMessage TransferSidelink

Upon receiving the UuMessageTransferSidelink message, the L2 U2N Remote UE shall:
\( 1> \) if sl-PagingDelivery is included:
\( 2> \) perform the procedure as defined in clause 5.3.2.3;
\( 1> \) if \( s \)-SystemInformationDeliverySidelink is included:
\( 2> \) perform the actions specified in clause 5.2.2.4;
5.8.9.10 Notification Message
5.8.9.10.1 General

Figure 5.8.9.8.1-1: Notification message in sidelink

This procedure is used by a U2N Relay UE to send notification to the connected U2N Remote UE.
5.8.9.10.2 Initiation

The U2N Relay UE can initiate the procedure when one of the following conditions is met:
\( 1> \) upon Uu RLF as specified in 5.3.10;
\( 1> \) upon reception of an RRCReconfiguration including the reconfigurationWithSync;
1> upon cell reselection;
1> upon L2 U2N Relay UE's RRC connection failure including RRC connection reject as specified in 5.3.3.5 and 5.3.13.10, and T300 expiry as specified in 5.3.3.7, and RRC resume failure as specified in 5.3.13.5;
5.8.9.10.3 Actions related to transmission of NotificationMessageSidelink message

The U2N Relay UE shall set the indication type as follows:
1> if the UE initiates transmission of the NotificationMessageSidelink message due to Uu RLF:
\( 2> \) set the indicationType as relayUE-UuRLF;
1> else if the UE initiates transmission of the NotificationMessageSidelink message due to reconfiguration with sync:
\( 2> \) set the indicationType as relayUE-HO;

ETSI


--- Page 304  ---


3GPP TS 38.331 version 17.0.0 Release 17
303
ETSI TS 138331 V17.0.0 (2022-05)

1> else if the UE initiates transmission of the NotificationMessageSidelink message due to cell reselection:
\( 2> \) set the indicationType as relayUE-CellReselection;
\( 1> \) if the UE initiates transmission of the NotificationMessageSidelink message due to Uu RRC connection establishment failure:
\( 2> \) set the indicationType as relayUE-UuRRCFailure;
5.8.9.10.4 Actions related to reception of NotificationMessageSidelink message

Upon receiving the NotificationMessageSidelink, the U2N Remote UE shall:
\( 1> \) if the indicationType is included:
\( 2> \) if the UE is L2 U2N Remote UE in RRC_CONNECTED:
\( 3> \) initiate the RRC connection re-establishment procedure as specified in \( 5.3 .7 ; 2> \) else if the UE is L3 U2N Remote UE, or L2 U2N Remote UE in RRC_IDLE or RRC_INACTIVE:
\( 3> \) if the PC5-RRC connection with the U2N Relay UE is determined to be released:
\( 4> \) perform the PC5-RRC connection release as specified in 5.8.9.5.
\( 3> \) else maintain the PC5-RRC connection;
NOTE: For L3 U2N Remote UE, or L2 U2N Remote UE in RRC_[DLE or RRC_INACTIVE, it is up to Remote UE implementation whether to release or keep the unicast PC5 link.
5.8.10 Sidelink measurement
5.8.10.1 Introduction

The UE may configure the associated peer UE to perform NR sidelink measurement and report on the corresponding PC5-RRC connection in accordance with the NR sidelink measurement configuration for unicast by RRCReconfigurationSidelink message.

The NR sidelink measurement configuration includes the following parameters for a PC5-RRC connection:
1. NR sidelink measurement objects: Object(s) on which the associated peer UE shall perform the NR sidelink measurements.
- For NR sidelink measurement, a NR sidelink measurement object indicates the NR sidelink frequency of reference signals to be measured.
2. NR sidelink reporting configurations: NR sidelink measurement reporting configuration( \( s \) ) where there can be one or multiple NR sidelink reporting configurations per NR sidelink measurement object. Each NR sidelink reporting configuration consists of the following:
- Reporting criterion: The criterion that triggers the UE to send a NR sidelink measurement report. This can either be periodical or a single event description.
- RS type: The RS that the UE uses for NR sidelink measurement results. In this release, only DMRS is supported for NR sidelink measurement.
- Reporting format: The quantities that the UE includes in the measurement report. In this release, only RSRP measurement is supported.
3. NR sidelink measurement identities: \( A \) list of \( N R \) sidelink measurement identities where each \( N R \) sidelink measurement identity links one NR sidelink measurement object with one NR sidelink reporting configuration. By configuring multiple NR sidelink measurement identities, it is possible to link more than one NR sidelink measurement object to the same NR sidelink reporting configuration, as well as to link more than one NR sidelink reporting configuration to the same NR sidelink measurement object. The NR sidelink measurement

ETSI


--- Page 305  ---


3GPP TS 38.331 version 17.0.0 Release 17
304
ETSI TS 138331 V17.0.0 (2022-05)

identity is also included in the NR sidelink measurement report that triggered the reporting, serving as a reference to the network.
4. NR sidelink quantity configurations: The NR sidelink quantity configuration defines the NR sidelink measurement filtering configuration used for all event evaluation and related reporting, and for periodical reporting of that NR sidelink measurement. In each configuration, different filter coefficients can be configured for different NR sidelink measurement quantities.

Both UEs of the PC5-RRC connection maintains a NR sidelink measurement object list, a NR sidelink reporting configuration list, and a NR sidelink measurement identities list according to signalling and procedures in this specification.
5.8.10.2 Sidelink measurement configuration
5.8.10.2.1 General

The UE shall:
\( 1> \) if the received \( s \)-MeasConfig includes the \( s \) /-MeasObjectToRemoveList in the RRCReconfigurationSidelink:
\( 2> \) perform the sidelink measurement object removal procedure as specified in 5.8.10.2.4;
\( 1> \) if the received \( s \) /-MeasConfig includes the s/-MeasObjectToAddModList in the RRCReconfigurationSidelink:
\( 2> \) perform the sidelink measurement object addition/modification procedure as specified in 5.8.10.2.5;
\( 1> \) if the received \( s \)-MeasConfig includes the sl-ReportConfigToRemoveList in the RRCReconfigurationSidelink:
\( 2> \) perform the sidelink reporting configuration removal procedure as specified in 5.8.10.2.6;
\( 1> \) if the received sl-MeasConfig includes the sl-ReportConfigToAddModList in the RRCReconfigurationSidelink:
\( 2> \) perform the sidelink reporting configuration addition/modification procedure as specified in 5.8.10.2.7;
\( 1> \) if the received \( s \)-MeasConfig includes the \( s \)-QuantityConfig in the RRCReconfigurationSidelink:
\( 2> \) perform the sidelink quantity configuration procedure as specified in 5.8.10.2.8;
\( 1> \) if the received \( s / \)-MeasConfig includes the \( s / \)-MeasIdToRemoveList in the RRCReconfigurationSidelink:
\( 2> \) perform the sidelink measurement identity removal procedure as specified in 5.8.10.2.2;
\( 1> \) if the received \( s \)-MeasConfig includes the sl-MeasIdToAddModList in the RRCReconfigurationSidelink:
\( 2> \) perform the sidelink measurement identity addition/modification procedure as specified in 5.8.10.2.3;
5.8.10.2.2 Sidelink measurement identity removal

The UE shall:
\( 1> \) for each \( s \) /-Measld included in the received \( s \) /-MeasldToRemoveList that is part of the current UE configuration in VarMeasConfigSL:
\( 2> \) remove the entry with the matching sl-Measld from the sl-MeasldList within the VarMeasConfigSL;
\( 2> \) remove the NR sidelink measurement reporting entry for this \( s \)-Measld from the VarMeasReportListSL, if included;
\( 2> \) stop the periodical reporting timer and reset the associated information (e.g. sl-TimeToTrigger) for this slMeasld.

NOTE: The UE does not consider the message as erroneous if the \( s / \)-MeasldToRemoveList includes any slMeasld value that is not part of the current UE configuration.

ETSI


--- Page 306  ---


3GPP TS 38.331 version 17.0.0 Release 17
305
ETSI TS 138331 V17.0.0 (2022-05)
5.8.10.2.3 Sidelink measurement identity addition/modification

The UE shall:
1> for each sl-Measld included in the received s/-Meas/dToAddModList:
\( 2> \) if an entry with the matching \( s \)-MeasId exists in the \( s \) /-MeasIdList within the VarMeasConfigSL:
\( 3> \) replace the entry with the value received for this \( s l \)-Measld;
\( 2> \) else:
3> add a new entry for this sl-Measld within the VarMeasConfigSL;
\( 2> \) remove the measurement reporting entry for this \( s l \)-Measld from the VarMeasReportListSL, if included;
\( 2> \) stop the periodical reporting timer and reset the associated information (e.g. sl-TimeToTrigger) for this slMeasld;
5.8.10.2.4 Sidelink measurement object removal

The UE shall:
1> for each sl-MeasObject[d included in the received sl-MeasObjectToRemoveList that is part of sl-MeasObjectList in VarMeasConfigSL:
\( 2> \) remove the entry with the matching \( s \) /-MeasObjectld from the \( s \) /-MeasObjectList within the VarMeasConfigSL;
\( 2> \) remove all \( s \) /-MeasId associated with this sl-MeasObjectld from the sl-MeasldList within the VarMeasConfigSL, if any;
\( 2> \) if a sl-Measld is removed from the sl-MeasldList:
\( 3> \) remove the measurement reporting entry for this \( s \)-Measld from the VarMeasReportListSL, if included;
\( 3> \) stop the periodical reporting timer and reset the associated information (e.g. sl-TimeToTrigger) for this slMeasId.

NOTE: The UE does not consider the message as erroneous if the \( s / \)-MeasObjectToRemoveList includes any \( s / \) MeasObjectld value that is not part of the current UE configuration.
5.8.10.2.5 Sidelink measurement object addition/modification

The UE shall:
\( 1> \) for each \( s \) /-MeasObjectld included in the received \( s \) /-MeasObjectToAddModList:
\( 2> \) if an entry with the matching \( s \)-MeasObjectld exists in the \( s \)-MeasObjectList within the VarMeasConfigSL, for this entry:

3> for each sl-Measld associated with this sl-MeasObjectld included in the sl-MeasIdList within the VarMeasConfigSL, if any:
\( 4> \) remove the measurement reporting entry for this sl-Measld from the VarMeasReportListSL, if included;

4> stop the periodical reporting timer and reset the associated information (e.g. sl-TimeToTrigger) for this sl-Measld;
\( 3> \) reconfigure the entry with the value received for this sl-MeasObject;
\( 2> \) else:
\( 3> \) add a new entry for the received \( s \) l-MeasObject to the \( s \) l-MeasObjectList within VarMeasConfigSL.

ETSI


--- Page 307  ---


3GPP TS 38.331 version 17.0.0 Release 17
306
ETSI TS 138331 V17.0.0 (2022-05)
5.8.10.2.6 Sidelink reporting configuration removal

The UE shall:
\( 1> \) for each \( s \)-ReportConfigId included in the received \( s l \)-ReportConfigToRemoveList that is part of the current UE configuration in VarMeasConfigSL:
\( 2> \) remove the entry with the matching \( s \) l-ReportConfigld from the \( s \) l-ReportConfigList within the VarMeasConfigSL;
\( 2> \) remove all \( s \)-MeasId associated with the \( s l \)-ReportConfigId from the \( s l \)-MeasIdList within the VarMeasConfigSL, if any;
\( 2> \) if a sl-Measld is removed from the sl-MeasldList:
\( 3> \) remove the measurement reporting entry for this \( s l \)-Measld from the VarMeasReportListSL, if included;
\( 3> \) stop the periodical reporting timer and reset the associated information (e.g. sl-TimeToTrigger) for this slMeasld.

NOTE: The UE does not consider the message as erroneous if the \( s l \)-ReportConfigToRemoveList includes any slReportConfigId value that is not part of the current UE configuration.
5.8.10.2.7 Sidelink reporting configuration addition/modification

The UE shall:
\( 1> \) for each sl-ReportConfigId included in the received sl-ReportConfigToAddModList:
\( 2> \) if an entry with the matching \( s \)-ReportConfigId exists in the \( s \)-ReportConfigList within the VarMeasConfigSL, for this entry:
\( 3> \) reconfigure the entry with the value received for this \( s \)-ReportConfig;
\( 3> \) for each \( s \) /-MeasId associated with this \( s \) /-ReportConfigId included in the \( s \) /-MeasldList within the VarMeasConfigSL, if any:

4> remove the measurement reporting entry for this sl-Measld from the VarMeasReportListSL, if included;

4> stop the periodical reporting timer and reset the associated information (e.g. sl-TimeToTrigger) for this sl-Measld;
\( 2> \) else:
\( 3> \) add a new entry for the received \( s \) l-ReportConfig to the \( s \) l-ReportConfigList within the VarMeasConfigSL.
5.8.10.2.8 Sidelink quantity configuration

The UE shall:
1> for each received sl-QuantityConfig:
\( 2> \) set the corresponding parameter(s) in sl-QuantityConfig within VarMeasConfigSL to the value of the received sl-QuantityConfig parameter(s);
\( 1> \) for each \( s \) /-MeasId included in the sl-MeasIdList within VarMeasConfigSL:
\( 2> \) remove the measurement reporting entry for this \( s \)-Measld from the VarMeasReportListSL, if included;
\( 2> \) stop the periodical reporting timer and reset the associated information (e.g. sl-TimeToTrigger) for this slMeasId.

ETSI


--- Page 308  ---


3GPP TS 38.331 version 17.0.0 Release 17
307
ETSI TS 138331 V17.0.0 (2022-05)
5.8.10.3 Performing NR sidelink measurements
5.8.10.3.1 General

A UE shall derive NR sidelink measurement results by measuring one or multiple DMRS associated per PC5-RRC connection as configured by the peer UE associated, as described in 5.8.10.3.2. For all NR sidelink measurement results the UE applies the layer 3 filtering as specified in clause 5.5.3.2, before using the measured results for evaluation of reporting criteria and measurement reporting. In this release, only NR sidelink RSRP can be configured as trigger quantity and reporting quantity.

The UE shall:
\( 1> \) for each \( s \) /-MeasId included in the sl-MeasIdList within VarMeasConfigSL:
\( 2> \) if the \( s \) /-MeasObject is associated to NR sidelink and the \( s l \)-RS-Type is set to dmrs:
\( 3> \) derive the layer 3 filtered NR sidelink measurement result based on DMRS for the trigger quantity and each measurement quantity indicated in \( s \)-ReportQuantity using parameters from the associated \( s \) MeasObject, as described in 5.8.10.3.2.
\( 2> \) perform the evaluation of reporting criteria as specified in 5.8.10.4.
5.8.10.3.2 Derivation of NR sidelink measurement results

The UE may be configured by the peer UE associated to derive NR sidelink RSRP measurement results per PC5-RRC connection associated to the NR sidelink measurement objects based on parameters configured in the sl-MeasObject and in the \( s \)-ReportConfig.

The UE shall:
\( 1> \) for each NR sidelink measurement quantity to be derived based on NR sidelink DMRS:
\( 2> \) derive the corresponding measurement of NR sidelink frequency indicated quantity based on DMRS as described in TS 38.215 [9] in the concerned s/-MeasObject;
\( 2> \) apply layer 3 filtering as described in 5.5.3.2;
5.8.10.4 Sidelink measurement report triggering
5.8.10.4.1 General

The UE shall:
\( 1> \) for each \( s \) /-MeasId included in the sl-MeasIdList within VarMeasConfigSL:
\( 2> \) if the \( s l \)-ReportType is set to \( s l \)-EventTriggered and if the entry condition applicable for this event, i.e. the event corresponding with the \( s \)-Eventld of the corresponding \( s \)-ReportConfig within VarMeasConfigSL, is fulfilled for NR sidelink frequency for all NR sidelink measurements after layer 3 filtering taken during \( s \) TimeToTrigger defined for this event within the VarMeasConfigSL, while the VarMeasReportListSL does not include a NR sidelink measurement reporting entry for this sl-Measld (a first NR sidelink frequency triggers the event):
\( 3> \) include a NR sidelink measurement reporting entry within the VarMeasReportListSL for this s/MeasId;
3> set the \( s i \)-NumberOfReportsSent defined within the VarMeasReportListSL for this \( s i \)-MeasId to 0;
3> include the concerned NR sidelink frequency in the \( s \) /-FrequencyTriggeredList defined within the VarMeasReportListSL for this sl-Measld;
\( 3> \) initiate the NR sidelink measurement reporting procedure, as specified in 5.8.10.5;
\( 2> \) else if the \( s \)-ReportType is set to sl-EventTriggered and if the entry condition applicable for this event, i.e. the event corresponding with the \( s \)-Eventld of the corresponding sl-ReportConfig within VarMeasConfigSL, is fulfilled for NR sidelink frequency not included in the sl-FrequencyTriggeredList for all NR sidelink

ETSI


--- Page 309  ---


3GPP TS 38.331 version 17.0.0 Release 17
308
ETSI TS 138331 V17.0.0 (2022-05)

measurements after layer 3 filtering taken duringsl-TimeToTrigger defined for this event within the VarMeasConfigSL (a subsequent NR sidelink frequency triggers the event):
\( 3> \) set the \( s \)-NumberOfReportsSent defined within the VarMeasReportListSL for this sl-Measld to 0;
\( 3> \) include the concerned NR sidelink frequency in the \( s \)-FrequencyTriggeredList defined within the VarMeasReportListSL for this sl-Measld;
\( 3> \) initiate the NR sidelink measurement reporting procedure, as specified in 5.8.10.5;
\( 2> \) else if the sl-ReportType is set to sl-EventTriggered and if the leaving condition applicable for this event is fulfilled for NR sidelink frequency included in the \( s \)-FrequencyTriggeredList defined within the VarMeasReportListSL for this s/-Measld for all NR sidelink measurements after layer 3 filtering taken during sl-TimeToTrigger defined within the VarMeasConfigSL for this event:
\( 3> \) remove the concerned NR sidelink frequency in the \( s \)-FrequencyTriggeredList defined within the VarMeasReportListSL for this s/-MeasId;
\( 3> \) if \( s \) l-ReportOnLeave is set to true for the corresponding reporting configuration:
\( 4> \) initiate the NR sidelink measurement reporting procedure, as specified in 5.8.10.5;
\( 3> \) if the \( s \)-FrequencyTriggeredList defined within the VarMeasReportListSL for this sl-Measld is empty:
\( 4> \) remove the NR sidelink measurement reporting entry within the VarMeasReportListSL for this \( s l \) Measld;
\( 4> \) stop the periodical reporting timer for this \( s \)-Measld, if running;
\( 2> \) if \( s \)-ReportType is set to \( s \) /-Periodical and if a (first) NR sidelink measurement result is available:
\( 3> \) include a NR sidelink measurement reporting entry within the VarMeasReportListSL for this \( s \)-Measld;
\( 3> \) set the \( s \)-NumberOfReportsSent defined within the VarMeasReportListSL for this sl-Measld to 0;
\( 3> \) initiate the NR sidelink measurement reporting procedure, as specified in 5.8 .10 .5 , immediately after the quantity to be reported becomes available for the NR sidelink frequency:
\( 2> \) upon expiry of the periodical reporting timer for this sl-Measld:
\( 3> \) initiate the NR sidelink measurement reporting procedure, as specified in 5.8 .10 .5 .
5.8.10.4.2 Event S1 (Serving becomes better than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition S1-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition S1-2, as specified below, is fulfilled;
\( 1> \) for this NR sidelink measurement, consider the NR sidelink frequency corresponding to the associated \( s \) MeasObject associated with this event.

Inequality S1-1 (Entering condition)
\( M s-H y s> \) Thresh
Inequality S1-2 (Leaving condition)
\( M s+H y s< \) Thresh
The variables in the formula are defined as follows:
\( M s \) is the NR sidelink measurement result of the NR sidelink frequency, not taking into account any offsets.
Hys is the hysteresis parameter for this event (i.e. sl-Hysteresis as defined within sl-ReportConfig for this event).

ETSI


--- Page 310  ---


3GPP TS 38.331 version 17.0.0 Release 17
309
ETSI TS 138331 V17.0.0 (2022-05)

Thresh is the threshold parameter for this event (i.e. sl-Threshold as defined within sl-ReportConfig for this event).
Ms is expressed in dBm in case of RSRP.
Hys is expressed in dB.
Thresh is expressed in the same unit as Ms.
5.8.10.4.3 Event S2 (Serving becomes worse than threshold)

The UE shall:
\( 1> \) consider the entering condition for this event to be satisfied when condition S2-1, as specified below, is fulfilled;
\( 1> \) consider the leaving condition for this event to be satisfied when condition S2-2, as specified below, is fulfilled;
\( 1> \) for this NR sidelink measurement, consider the NR sidelink frequency indicated by the \( s \) /-MeasObject associated to this event.

Inequality S2-1 (Entering condition)
Ms + Hys \( < \) Thresh
Inequality S2-2 (Leaving condition)
Ms - Hys > Thresh
The variables in the formula are defined as follows:
\( M s \) is the NR sidelink measurement result of the NR sidelink frequency, not taking into account any offsets.
Hys is the hysteresis parameter for this event (i.e. sl-Hysteresis as defined within sl-ReportConfig for this event).
Thresh is the threshold parameter for this event (i.e. s2-Threshold as defined within sl-ReportConfig for this event).
Ms is expressed in dBm in case of RSRP.
Hys is expressed in dB.
Thresh is expressed in the same unit as Ms.
5.8.10.5 Sidelink measurement reporting
5.8.10.5.1 General

Figure 5.8.10.5.1-1: NR sidelink measurement reporting

The purpose of this procedure is to transfer measurement results from the UE to the peer UE associated.
For the \( s l \)-Measl \( d \) for which the NR sidelink measurement reporting procedure was triggered, the UE shall set the \( s l \) MeasResults within the MeasurementReportSidelink message as follows:
\( 1> \) set the \( s / \)-Meas \( l d \) to the measurement identity that triggered the NR sidelink measurement reporting;
\( 1> \) if the \( s l \)-ReportConfig associated with the \( s l \)-Measl \( d \) that triggered the NR sidelink measurement reporting is set to sl-EventTriggered or sl-Periodical:

ETSI


--- Page 311  ---


3GPP TS 38.331 version 17.0.0 Release 17
310
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) set \( s / \)-ResultDMRS within sl-MeasResult to include the NR sidelink DMRS based quantity indicated in the slReportQuantity within the concerned sl-ReportConfig;
\( 1> \) increment the \( s \)-NumberOfReportsSent as defined within the VarMeasReportListSSL for this sl-Measld by 1 ;
\( 1> \) stop the periodical reporting timer, if running;
\( 1> \) if the \( s / \)-NumberOfReportsSent as defined within the VarMeasReportListSL for this \( s / \)-Measld is less than the \( s / \) ReportAmount as defined within the corresponding sl-ReportConfig for this s/-Measld:
\( 2> \) start the periodical reporting timer with the value of \( s l \)-ReportInterval as defined within the corresponding \( s l \) ReportConfig for this sl-Measld;

1> else:
\( 2> \) if the sl-ReportType is set to sl-Periodical:
\( 3> \) remove the entry within the VarMeasReportListSL for this sl-Measld;
\( 3> \) remove this sl-Measld from the sl-MeasldList within VarMeasConfigSL;
\( 1> \) submit the MeasurementReportSidelink message to lower layers for transmission, upon which the procedure ends.
5.8.11 Zone identity calculation

The UE shall determine an identity of the zone (i.e Zone_id) in which it is located using the following formulae, if \( s / \) ZoneConfig is configured:
\[
\begin{array}{l}
x_{1}=\text { Floor }(x / L) \text { Mod } 64 \\
y_{1}=\text { Floor }(y / L) \text { Mod } 64 \\
\text { Zone_id }=y_{1} * 64+x_{1}
\end{array}
\]

The parameters in the formulae are defined as follows:
\( \mathbf{L} \) is the value of sl-ZoneLength included in sl-ZoneConfig;
\( \mathbf{x} \) is the geodesic distance in longitude between UE's current location and geographical coordinates ( 0,0 ) according to WGS84 model [58] and it is expressed in meters;
\( y \) is the geodesic distance in latitude between UE's current location and geographical coordinates ( 0,0 ) according to WGS84 model [58] and it is expressed in meters.

NOTE: How the calculated zone_id is used is specified in TS 38.321 [3].
5.8.12 DFN derivation from GNSS

When the UE selects GNSS as the synchronization reference source, the DFN, the subframe number within a frame and slot number within a frame used for NR sidelink communication/discovery are derived from the current UTC time, by the following formulae:
\[
\begin{array}{c}
D F N=\text { Floor }(0.1 *(\text { Tcurrent }- \text { Tref-OffsetDFN })) \bmod 1024 \\
\text { SubframeNumber }=\text { Floor }(\text { Tcurrent }- \text { Tref-OffsetDFN }) \bmod 10 \\
\text { SlotNumber }=\text { Floor }\left((\text { Tcurrent }- \text { Tref-OffsetDFN })^{*} 2^{\mu}\right) \bmod \left(10^{*} 2^{\mu}\right)
\end{array}
\]

Where:
Tcurrent is the current UTC time obtained from GNSS. This value is expressed in milliseconds;
Tref is the reference UTC time 00:00:00 on Gregorian calendar date 1 January, 1900 (midnight between Thursday, December 31, 1899 and Friday, January 1, 1900). This value is expressed in milliseconds;

ETSI


--- Page 312  ---


3GPP TS 38.331 version 17.0.0 Release 17
311
ETSI TS 138331 V17.0.0 (2022-05)

OffsetDFN is the value \( s l \)-OffsetDFN if configured, otherwise it is zero. This value is expressed in milliseconds.
\( \mu=0 / 1 / 2 / 3 \) corresponding to the \( 15 / 30 / 60 / 120 \mathrm{kHz} \) of SCS for SL, respectively.
NOTE 1: In case of leap second change event, how UE obtains the scheduled time of leap second change to adjust Tcurrent correspondingly is left to UE implementation. How UE handles to avoid the sudden discontinuity of DFN is left to UE implementation.

NOTE 2: Void.
5.8.13 NR sidelink discovery
5.8.13.1 General

The purpose of this procedure is to perform sidelink discovery as specified in TS 23.304 [65].
5.8.13.2 Sidelink discovery monitoring

A UE capable of sidelink discovery that is configured by upper layers to monitor NR sidelink discovery messages shall:
\( 1> \) if the frequency used for NR sidelink discovery is included in \( s \) /-FreqInfoToAddModList in RRCReconfiguration message and sl-DiscConfig is included in RRCReconfiguration; or if the frequency used for NR sidelink discovery is included in sl-FreqInfoList included in SIB12 and sl-DiscConfigCommon is included in SIB12:
\( 2> \) if the UE is configured with sl-DiscRxPool for NR sidelink discovery reception included in RRCReconfiguration message with reconfiguration WithSync (i.e. handover):
\( 3> \) configure lower layers to monitor sidelink control information and the corresponding data using the resource pool indicated by sl-DiscRxPool for NR sidelink discovery reception in RRCReconfiguration;
\( 2> \) else if the UE is configured with \( s l \)-RxPool for NR sidelink discovery reception included in RRCReconfiguration message with reconfiguration WithSync (i.e. handover):
\( 3> \) configure lower layers to monitor sidelink control information and the corresponding data using the resource pool indicated by sl-RxPool for NR sidelink discovery reception in RRCReconfiguration;
\( 2> \) else if the cell chosen for NR sidelink discovery reception provides SIB12:
3> if sl-DiscRxPool for NR sidelink is included in SIB12:
\( 4> \) configure lower layers to monitor sidelink control information and the corresponding data using the resource pool indicated by sl-DiscRxPoo for NR sidelink discovery reception in SIB12;

3> else if sl-RxPool for NR sidelink is included in SIB12:
\( 4> \) configure lower layers to monitor sidelink control information and the corresponding data using the resource pool indicated by sl-RxPool for NR sidelink discovery reception in SIB12;

1> else:
\( 2> \) if out of coverage on the concerned frequency for NR sidelink discovery:
\( 3> \) configure lower layers to monitor sidelink control information and the corresponding data using the resource pool that were preconfigured by sl-DiscRxPool or sl-RxPool for NR sidelink discovery reception in SL-PreconfigurationNR, as defined in clause 9.3;
5.8.13.3 Sidelink discovery transmission

A UE capable of sidelink discovery that is configured by upper layer to transmit NR sidelink discovery message shall:
\( 1> \) if the frequency used for NR sidelink discovery is included in \( s \) /-FreqInfoToAddModList in \( s \) /ConfigDedicatedNR within RRCReconfiguration message and sl-DiscConfig is included in RRCReconfiguration; or if the frequency used for NR sidelink discovery is included in sl-FreqInfoList within SIB12 and slDiscConfigCommon is included in SIB12:

ETSI


--- Page 313  ---


3GPP TS 38.331 version 17.0.0 Release 17
312
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the UE is in RRC_CONNECTED and uses the frequency included in sl-ConfigDedicatedNR within RRCReconfiguration message:
\( 3> \) if the UE is acting as NR sidelink U2N Relay UE, and if the NR sidelink U2N Relay UE threshold conditions as specified in 5.8.14.2 are met based on sl-RelayUE-Config; or

3> if the UE is selecting NR sidelink U2N Relay UE/ has a selected NR sidelink U2N Relay UE, and if the NR sidelink U2N Remote UE threshold conditions as specified in 5.8.15.2 are met based on \( s / \) -RemoteUE-Config; or

3> if the UE is performing NR sidelink non-relay discovery:
4> if the UE is configured with \( s \) /-ScheduledConfig:
\( 5> \) if T310 for MCG or T311 is running; and if \( s l \)-TxPoolExceptional is included in sl-FreqInfoList for the concerned frequency in SIB12 or included in sl-ConfigDedicatedNR in RRCReconfiguration; or
\( 5> \) if T301 is running and the cell on which the UE initiated RRC connection re-establishment provides SIB12 including sl-TxPoolExceptional for the concerned frequency; or
\( 5> \) if T304 for MCG is running and the UE is configured with \( s l \)-TxPoolExceptional included in \( s l \) ConfigDedicatedNR for the concerned frequency in RRCReconfiguration:
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on random selection using the resource pool indicated by sl-TxPoolExceptional as defined in TS 38.321 [3];
\( 5> \) else:
6> configure lower layers to perform the sidelink resource allocation mode 1 using the resource pool indicated by sl-DiscTxPoolScheduling or sl-TxPoolScheduling for NR sidelink discovery transmission on the concerned frequency in RRCReconfiguration;

5> if T311 is running, configure the lower layers to release the resources indicated by rrcConfiguredSidelinkGrant (if any);

4> if the UE is configured with sl-UE-SelectedConfig:
\( 5> \) if a result of sensing on the resources configured in \( s l \)-DiscTxPoolSelected or \( s l \) -
TxPoolSelectedNormal for NR sidelink discovery transmission on the concerned frequency included in sl-ConfigDedicatedNR within RRCReconfiguration is not available in accordance with TS 38.214 [19];
\( 6> \) if \( s l \)-TxPoolExceptional for the concerned frequency is included in RRCReconfiguration; or
6> if the PCell provides SIB12 including sl-TxPoolExceptional in sl-FreqInfoList for the concerned frequency:

7> configure lower layers to perform the sidelink resource allocation mode 2 based on random selection using the resource pool indicated by sl-TxPoolExceptional as defined in TS 38.321 [3];
\( 5> \) else, if the \( s \)-DiscTxPoolSelected for NR sidelink discovery transmission on the concerned frequency is included in the sl-ConfigDedicatedNR within RRCReconfiguration:
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing (as defined in TS 38.321 [3] and TS 38.214 [19]) using the pools of resources indicated by \( s i \) DiscTxPoolSelected for NR sidelink discovery transmission on the concerned frequency in RRCReconfiguration;
\( 5> \) else, if the \( s l \)-TxPoolSelectedNormal for NR sidelink discovery transmission on the concerned frequency is included in the \( s \) /-ConfigDedicatedNR within RRCReconfiguration:
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing (as defined in TS 38.321 [3] and TS 38.214 [19]) using the pools of resources indicated by \( s i \) -

ETSI


--- Page 314  ---


3GPP TS 38.331 version 17.0.0 Release 17
313
ETSI TS 138331 V17.0.0 (2022-05)

TxPoolSelectedNormal for NR sidelink discovery transmission on the concerned frequency in RRCReconfiguration;
\( 2> \) else if the cell chosen for NR sidelink discovery transmission provides S/B12:
\( 3> \) if the UE is acting as NR sidelink U2N Relay UE and if the NR sidelink U2N Relay UE threshold conditions as specified in 5.8.14.2 are met based on sl-RelayUE-ConfigCommon in SIB12; or
\( 3> \) if the UE is selecting NR sidelink U2N Relay UE/ has a selected NR sidelink U2N Relay UE and if the NR sidelink U2N Remote UE threshold conditions as specified in 5.8 .15 .2 are met based on \( s l \) -RemoteUE-ConfigCommon in SIB12; or
\( 3> \) if the UE is performing NR sidelink non-relay discovery:
\( 4> \) if SIB12 includes sl-DiscTxPoolSelected or sl-TxPoolSelectedNormal for NR sidelink discovery transmission on the concerned frequency, and a result of sensing on the resources configured in the \( s \) DiscTxPoolSelected or sl-TxPoolSelectedNormal for NR sidelink discovery transmission is available in accordance with TS 38.214 [19]:
\( 5> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing using the pools of resources indicated by sl-DiscTxPoolSelected or sl-TxPoolSelectedNormal for NR sidelink discovery transmission on the concerned frequency in SIB12 as defined in TS 38.321 [3];
\( 4> \) else if SIB12 includes sl-TxPoolExceptional for the concerned frequency:
\( 5> \) from the moment the UE initiates RRC connection establishment or RRC connection resume, until receiving an \( R R C R \) econfiguration including s/-ConfigDedicatedNR, or receiving an RRCRelease or an RRCReject; or
\( 5> \) if a result of sensing on the resources configured in \( s l \)-DiscTxPoolSelected or \( s l \) TxPoolSelectedNormal for NR sidelink discovery transmission on the concerned frequency in SIB12 is not available in accordance with TS 38.214 [19]:
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on random selection (as defined in TS 38.321 [3]) using one of the pools of resources indicated by slTxPool Exceptional for the concerned frequency;
\( 1> \) else if out of coverage on the concerned frequency for NR sidelink discovery:
2> if the UE is acting as L3 U2N Relay UE and if the NR sidelink U2N Relay UE threshold conditions as specified in 5.8.14.2 are met based on sl-RelayUE-ConfigCommon in SidelinkPreconfigNR; or
\( 2> \) if the UE is selecting NR sidelink U2N Relay UE / has a selected NR sidelink U2N Relay UE and if the NR sidelink U2N Remote UE threshold conditions as specified in 5.8.15.2 are met based on s/-RemoteUEConfigCommon in SidelinkPreconfigNR; or
\( 2> \) if the UE is performing NR sidelink non-relay discovery:
\( 3> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing (as defined in TS 38.321 [3] and TS 38.213 [13]) using the pools of resources indicated in sl-DiscTxPoolSelected or slTxPoolSelectedNormal for NR sidelink discovery transmission on the concerned frequency in SidelinkPreconfigNR.
5.8.14 NR sidelink U2N Relay UE operation
5.8.14.1 General

This procedure is used by a UE supporting NR sidelink U2N Relay UE operation configured by upper layers to receive/ transmit NR sidelink discovery messages to evaluate AS layer conditions.
5.8.14.2 NR sidelink U2N Relay UE threshold conditions

A UE capable of NR sidelink U2N Relay UE operation shall:

ETSI


--- Page 315  ---


3GPP TS 38.331 version 17.0.0 Release 17
314
ETSI TS 138331 V17.0.0 (2022-05)

\( 1> \) if the threshold conditions specified in this clause were not met:
\( 2> \) if threshHighRelay is not configured; or the RSRP measurement of the PCell, or the cell on which the UE camps, is below threshHighRelay by hystMaxRelay if configured; and
\( 2> \) if threshLowRelay is not configured; or the RSRP measurement of the PCell, or the cell on which the UE camps, is above threshLowRelay by hystMinRelay if configured:
\( 3> \) consider the threshold conditions to be met (entry);
1> else:
2 if the RSRP measurement of the PCell, or the cell on which the UE camps, is above threshHighRelay if configured; or
\( 2> \) if the RSRP measurement of the PCell, or the cell on which the UE camps, is below threshLowRelay if configured;
\( 3> \) consider the threshold conditions not to be met (leave);
5.8.15 NR sidelink U2N Remote UE operation
5.8.15.1 General

This procedure is used by a UE supporting NR sidelink U2N Remote UE operationconfigured by upper layers to receive/ transmit NR sidelink discovery message to evaluate AS layer conditions.
5.8.15.2 NR Sidelink U2N Remote UE threshold conditions

A UE capable of NR sidelink U2N Remote UE operation shall:
\( 1> \) if the threshold conditions specified in this clause were not met:
\( 2> \) if threshHighRemote is not configured; or the RSRP measurement of the PCell, or the cell on which the UE camps, is below threshHighRemote by hystMaxRemote if configured, or
\( 2> \) if the UE has no suitable cell:
\( 3> \) consider the threshold conditions to be met (entry);
1> else:
\( 2> \) if the RSRP measurement of the PCell, or the cell on which the UE camps, is above threshHighRemote if configured:
\( 3> \) consider the threshold conditions not to be met (leave);
5.8.15.3 Selection and reselection of NR sidelink U2N Relay UE

A UE capable of NR sidelink U2N Remote UE operation that is configured by upper layers to search for a NR sidelink U2N Relay UE shall:
\( 1> \) if the UE has no suitable cell; or
1> if the RSRP measurement of the cell on which the UE camps (for L2 and L3 U2N Remote UE in RRC_IDLE or RRC_INACTIVE)/ the PCell (for L3 U2N Remote UE in RRC_CONNECTED) is below threshHighRemote within sl-remoteUE-Config:

2 if the UE does not have a selected NR sidelink U2N Relay UE; or
\( 2> \) if the UE has a selected NR sidelink U2N Relay UE, and SL-RSRP of the currently selected NR sidelink U2N Relay UE is available and is below sl-RSRP-Thresh; or

ETSI


--- Page 316  ---


3GPP TS 38.331 version 17.0.0 Release 17
315
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the UE has a selected NR sidelink U2N Relay UE, and SL-RSRP of the currently selected NR sidelink U2N Relay UE is not available, and SD-RSRP of the currently selected U2N Relay UE is below sl-RSRPThresh; or

NOTE 1: U2N Remote UE uses SL-RSRP measurements for relay reselection trigger evaluation when there is data transmission from U2N Relay UE to U2N Remote UE, and it is left to UE implementation whether to use SL-RSRP or SD-RSRP for relay reselection trigger evaluation in case of no data transmission from U2N Relay UE to U2N Remote UE. If SD-RSRP is used, the discovery procedure will be preformed between the U2N Remote UE and the selected U2N Relay UE.
\( 2> \) if the UE has a selected NR sidelink U2N Relay UE, and upper layers indicate not to use the currently selected NR sidelink U2N Relay UE; or

2> if the UE has a selected NR sidelink U2N Relay UE, and upper layers request the release of the PC5-RRC connection or when AS layer releases the the PC5-RRC connection with the currently selected U2N Relay UE as specified in clause 5.8.9.5; or
\( 2> \) if the UE has a selected NR sidelink U2N Relay UE, and sidelink radio link failure is detected on the PC5RRC connection with the current U2N Relay UE as specified in clause 5.8.9.3:
\( 3> \) perform NR sidelink discovery procedure as specified in clause 5.8 .13 in order to search for candidate NR sidelink U2N Relay UEs;

4> when evaluating the one or more detected NR sidelink U2N Relay UEs, apply layer 3 filtering as specified in 5.5.3.2 across measurements that concern the same U2N Relay UE ID and using the \( s l \) -FilterCoefficient-RSRP in SystemInformationBlockTypel2 (in coverage) or the preconfigured sl-FilterCoefficient-RSRP as defined in 9.3 (out of coverage), before using the SD-RSRP measurement results;

4> select a candidate NR sidelink U2N Relay UE for which SD-RSRP exceeds \( s l \)-RSRP-Thresh by \( s l \) HystMin;

NOTE 2: If multiple suitable candidate Relay UEs which meet all AS-layer \& higher layer criteria are available, it is up to Remote UE implementation to choose one Relay UE. The details of the interaction with upper layers are up to UE implementation.
\( 3> \) if the UE did not detect any candidate NR sidelink U2N Relay UE which SD-RSRP exceeds \( s l \)-RSRPThresh by sl-HystMin:
\( 4> \) consider no NR sidelink U2N Relay UE to be selected;
NOTE 3: For L2 U2N Remote UEs in RRC_IDLE/INACTIVE and L3 U2N Remote UEs, the cell (re)selection procedure and relay (re)selection procedure run independently. If both suitable cells and suitable U2N Relay UEs are available, it is up to U2N Remote UE implementation to select either a cell or a U2N Relay UE. Furthermore, L3 U2N Remote UE's selection on both cell and U2N Relay UE is also based on UE implementation.
5.9 MBS Broadcast
5.9.1 Introdcution
5.9.1.1 General

UE receiving or interested to receive MBS broadcast service(s) applies MBS broadcast procedures described in this clause as well as the MBS Interest Indication procedure as specified in clause 5.9.4.

MBS broadcast configuration information is provided on MCCH logical channel. MCCH carries the MBSBroadcastConfiguration message which indicates the MBS broadcast sessions that are provided in the cell as well as the corresponding scheduling related information for these sessions. Optionally, the MBSBroadcastConfiguration message may also contain a list of neighbour cells providing the same broadcast MBS service(s) as provided in the current cell. The configuration information required by the UE to receive MCCH is provided in SIB20. Additionally, System Information provides also an information related to service continuity of MBS broadcast in SIB21.

ETSI


--- Page 317  ---


3GPP TS 38.331 version 17.0.0 Release 17
316
ETSI TS 138331 V17.0.0 (2022-05)
5.9.1.2 MCCH scheduling

The MCCH information (i.e information transmitted in messages sent over MCCH) is transmitted periodically, using a configurable repetition period and within a configured transmission window. MCCH transmissions (and the associated radio resources and MCS) are indicated via the PDCCH addressed to MCCH-RNTI. PDCCH monitoring occasion(s) for MCCH transmission are determined according to the common search space indicated by searchspaceMCCH. If searchspaceMCCH is set to zero, PDCCH monitoring occasions for MCCH message reception in the MCCH transmission window are the same as PDCCH monitoring occasions for SIBI where the mapping between PDCCH monitoring occasions and SSBs is specified in TS 38.213[13]. If searchspaceMCCH is not set to zero, PDCCH monitoring occasions for MCCH message are determined based on search space indicated by searchspaceMCCH. PDCCH monitoring occasions for MCCH message which are not overlapping with UL symbols (determined according to tdd-UL-DL-ConfigurationCommon) are sequentially numbered from one in the MCCH transmission window. The \( [\mathrm{x} \times \mathrm{N}+\mathrm{K}]^{\text {th }} \) PDCCH monitoring occasion for MCCH message in MCCH transmission window corresponds to the \( \mathrm{K}^{\text {th }} \) transmitted SSB, where \( \mathrm{x}=0,1, \ldots \mathrm{X}-1, \mathrm{~K}=1,2, \ldots \mathrm{~N}, \mathrm{~N} \) is the number of actual transmitted SSBs determined according to ssb-PositionsInBurst in SIBI and X is equal to CEIL(number of PDCCH monitoring occasions in MCCH transmission window/N). The actual transmitted SSBs are sequentially numbered from one in ascending order of their SSB indexes. The UE assumes that, in the MCCH transmisson window, PDCCH for an MCCH message is transmitted in at least one PDCCH monitoring occasion corresponding to each transmitted SSB and thus the selection of SSB for the reception MCCH messages is up to UE implementation.
5.9.1.3 MCCH information validity and notification of changes

Change of MCCH information only occurs at specific radio frames, i.e the concept of a modification period is used. Within a modification period, the same MCCH information may be transmitted a number of times, as defined by its scheduling (which is based on a repetition period).

When the network changes (some of) the MCCH information, it notifies the UEs about the change via PDCCH which schedules the MCCH in every repetition period in the current modification period.

Upon receiving a change notification, a UE receiving or interested to receive MBS services transmitted using MBS broadcast acquires the new MCCH information starting from the same slot. The UE applies the previously acquired MCCH information until the UE acquires the new MCCH information. The notification is transmitted with a 2-bit bitmap, see TS 38.212 [17] clause 7.3.1.2.1. The MSB in the 2-bit bitmap, when set to '1', indicates the start of MBS service(s). The LSB in the 2-bit bitmap, when set to ' 1 ', indicates modification of MCCH information other than the change caused by start of new MBS service(s), e.g. modification of a configuration of an on-going MBS session(s), MBS session(s) stop or neighbouring cell information modification.
5.9.2 MCCH information acquisition
5.9.2.1 General

Figure 5.9.2.1-1: MCCH information acquisition

The UE applies the MCCH information acquisition procedure to acquire the MBS broadcast configuration information broadcasted by the network. The procedure applies to MBS capable UEs interested to receive MBS broadcast services that are in RRC_IDLE, RRC_INACTIVE or RRC_CONNECTED with an active BWP with common search space configured by searchSpaceMCCH.

ETSI


--- Page 318  ---


3GPP TS 38.331 version 17.0.0 Release 17
317
ETSI TS 138331 V17.0.0 (2022-05)
5.9.2.2 Initiation

A UE shall apply the MCCH information acquisition procedure upon becoming interested to receive MBS broadcast services. A UE interested to receive MBS broadcast services shall apply the MCCH information acquisition procedure upon entering the cell providing SIB20 (e.g. upon power on, following UE mobility) and upon receiving a notification that the MCCH information has changed due to the start of new MBS service(s). A UE that is receiving data via broadcast MRB shall apply the MCCH information acquisition procedure upon receiving a notification that the MCCH information has changed due to MCCH information modification other than the change caused by the start of new MBS session(s).

Unless explicitly stated otherwise in the procedural specification, the MCCH information acquisition procedure overwrites any stored MCCH information, i.e delta configuration is not applicable for MCCH information and the UE discontinues using a field if it is absent in MCCH information.
5.9.2.3 MCCH information acquisition by the UE

An MBS capable UE interested to or receiving an MBS broadcast service shall:
\( 1> \) if the procedure is triggered by an MCCH information change notification:
\( 2> \) start acquiring the MBSBroadcastConfiguration message on MCCH from the slot in which the change notification was received;
\( 1> \) if the UE enters a cell broadcasting SIB20:
\( 2> \) acquire the MBSBroadcastConfiguration message on MCCH at the next repetition period;
5.9.2.4 Actions upon reception of the MBSBroadcastConfiguration message

No UE requirements related to the contents of the MBSBroadcastConfiguration message apply other than those specified elsewhere e.g. within the corresponding field descriptions.
5.9.3 Broadcast MRB configuration
5.9.3.1 General

The broadcast MRB configuration procedure is used by the UE to configure PDCP, RLC, MAC and the physical layer upon starting and/or stopping to receive an broadcast MRB transmitted on MTCH, or upon modification of a configuration of a broadcast MRB received by the UE. The procedure applies to MBS capable UEs interested to or receiving an MBS broadcast service that are in RRC_IDLE, RRC_INACTIVE or RRC_CONNECTED with an active BWP with common search space configured by searchSpaceMTCH.
5.9.3.2 Initiation

The UE applies the broadcast MRB establishment procedure to start receiving an MBS session of a MBS broadcast service it is interested in. The procedure may be initiated eg- upon start of the MBS session, upon entering a cell providing a MBS broadcast service UE is interested in, upon becoming interested in the MBS broadcast service, upon removal of UE capability limitations inhibiting reception of the MBS broadcast service UE is interested in.

The UE applies the broadcast MRB release procedure to stop receiving a session of a MBS broadcast service. The procedure may be initiated e.g. upon stop of the MBS session, upon leaving the cell broadcasting the MBS service UE is interested in, upon losing interest in the MBS service, when capability limitations start inhibiting reception of the concerned service.
5.9.3.3 Broadcast MRB establishment

Upon a broadcast MRB establishment, the UE shall:
\( 1> \) establish a PDCP entity and an RLC entity in accordance with MRB-InfoBroadcast for this broadcast MRB included in the MBSBroadcastConfiguration message and the configuration specified in 9.1.1.7;

ETSI


--- Page 319  ---


3GPP TS 38.331 version 17.0.0 Release 17
318
ETSI TS 138331 V17.0.0 (2022-05)

1> receive DL-SCH on the cell where the MBSBroadcastConfiguration message was received for the MBS broadcast service for which the broadcast MRB is established and using g-RNTI and mtch-SchedulingInfo (if included) in this message for this MBS broadcast service;
\( 1> \) configure the physical layer in accordance with the mbs-SessionInfoList, searchSpaceMTCH, pdschConfigMTCH, applicable for the broadcast MRB, as included in the MBSBroadcastConfiguration message;
\( 1> \) inform upper layers about the establishment of the broadcast MRB by indicating the corresponding \( t m g i \);
\( 1> \) if an SDAP entity with the received tmgi does not exist:
\( 2> \) establish an SDAP entity as specified in TS 37.324 [24] clause 5.1.1.
5.9.3.4 Broadcast MRB release

Upon broadcast MRB release for MBS broadcast service, the UE shall:
\( 1> \) release the PDCP entity, RLC entity as well as the related MAC and physical layer configuration;
\( 1> \) inform upper layers about the release of the broadcast MRB by indicating the corresponding \( t m g i \);
\( 1> \) if the SDAP entity associated with the corresponding tmgi has no associated MRB:
\( 2> \) release the SDAP entity, as specified in TS 37.324 [24] clause 5.1.2.
5.9.4 MBS Interest Indication
5.9.4.1 General

Figure 5.9.4.1-1: MBS Interest Indication

The purpose of this procedure is to inform the network that the UE in RRC_CONNECTED state is receiving or is interested to receive MBS broadcast service(s) and to inform the network about the priority of MBS broadcast versus unicast reception. MBS Interest Indication can only be sent after AS security activation.
5.9.4.2 Initiation

An MBS capable UE in RRC_CONNECTED may initiate the procedure in several cases including upon successful connection establishment, upon entering or leaving the broadcast service area, upon MBS broadcast session start or stop, upon change of interest, upon change of priority between MBS broadcast reception and unicast reception, upon change to a PCell broadcasting SIB21.

Upon initiating the procedure, the UE shall:
1> if SIB21 is provided by the PCell:
\( 2> \) ensure having a valid version of SIB21 for the PCell;
\( 2> \) if the UE did not transmit MBS Interest Indication since last entering RRC_CONNECTED state; or
\( 2> \) if since the last time the UE transmitted an MBS Interest Indication, the UE connected to a PCell not broadcasting SIB21:

ETSI


--- Page 320  ---


3GPP TS 38.331 version 17.0.0 Release 17
319
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) if the set of MBS broadcast frequencies of interest, determined in accordance with 5.9.4.3, is not empty: 4> set the contents of MBS Interest Indication according to 5.9.4.5 and initiate transmission of the MBSInterestIndication message;
\( 2> \) else:
3> if the set of MBS broadcast frequencies of interest, determined in accordance with 5.9.4.3, is different from \( m b s \)-FreqList included in the last transmission of the MBS Interest Indication; or

3> if the prioritisation of reception of all indicated MBS broadcast frequencies compared to reception of any of the established unicast bearers has changed since the last transmission of the MBS Interest Indication:

4> set the contents of MBS Interest Indication according to 5.9.4.5 and initiate transmission of the MBSInterestIndication message;

NOTE: The UE may send MBS Interest Indication even when it is able to receive the MBS services it is interested in i.e. to avoid that the network allocates a configuration inhibiting MBS broadcast reception.

3> else if SIB20 is provided by the PCell:
4> if since the last time the UE transmitted the MBS Interest Indication, the UE connected to a PCell not broadcasting SIB20; or
\( 4> \) if the set of MBS broadcast services of interest determined in accordance with 5.9.4.4 is different from \( m b s \)-ServiceList included in the last transmission of the MBS Interest Indication:
\( 5> \) set the contents of MBS Interest Indication according to 5.9.4.5 and initiate the transmission of MBSInterestIndication message.
5.9.4.3 MBS frequencies of interest determination

The UE shall:
\( 1> \) consider a frequency to be part of the MBS frequencies of interest if the following conditions are met:
\( 2> \) at least one MBS session the UE is receiving or interested to receive via a broadcast MRB is ongoing or about to start; and

NOTE 1: The UE may determine whether the session is ongoing from the start and stop time indicated in the User Service Description (USD), see TS 38.300 [2] or TS 23.247 [67].
\( 2> \) for at least one of these MBS sessions SIB21 acquired from the PCell includes for the concerned frequency one or more MBS FSAIs as indicated in the USD for this session; and

NOTE 2: The UE considers a frequency to be part of the MBS frequencies of interest even though NG-RAN may (temporarily) not employ a broadcast MRB for the concerned session, i.e. the UE does not verify if the session is indicated on MCCH.
\( 2> \) the supportedBandCombination the UE included in UE-NR-Capability contains at least one band combination including the set of MBS frequencies of interest (i.e. the UE is capable of simultaneously receiving broadcast MRBs on the set of MBS frequencies of interest);

NOTE 3: When evaluating whether the UE is capable of simultaneously receiving broadcast MRBs on the set of MBS frequencies of interest, the UE does not take into account the serving frequencies that it is currently configured with i.e. the UE only considers MBS frequencies it is interested to receive regardless of whether these can be received together with the current serving cells or not.
5.9.4.4 MBS services of interest determination

The UE shall:
1> consider an MBS service to be part of the MBS services of interest if the following conditions are met:
\( 2> \) the UE is receiving or interested to receive this service via a broadcast MRB; and

ETSI


--- Page 321  ---


3GPP TS 38.331 version 17.0.0 Release 17
320
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) the session of this service is ongoing or about to start; and
\( 2> \) one or more MBS FSAIs in the USD for this service is included in SIB21 acquired from the PCell for a frequency belonging to the set of MBS frequencies of interest, determined according to 5.9.4.3.

NOTE: The UE may determine whether the session is ongoing from the start and stop time indicated in the User Service Description (USD), see TS 38.300 [2] or TS 23.247 [67].
5.9.4.5 Setting of the contents of MBS Interest Indication

The UE shall set the contents of the MBS Interest Indication as follows:
\( 1> \) if the set of MBS frequencies of interest, determined in accordance with 5.9.4.3, is not empty:
\( 2> \) include \( m b s \)-FreqList and set it to include the MBS frequencies of interest sorted by decreasing order of interest, using the absoluteFrequencySSB for serving frequency, if applicable, and the ARFCN-ValueNR(s) as included in SIB21 (for neighbouring frequencies);
\( 2> \) include \( m b s \)-Priority if the UE prioritises reception of all indicated MBS frequencies above reception of any of the unicast bearers and multicast MRBs;

NOTE: If the UE prioritises MBS reception and unicast data cannot be supported because of congestion on the MBS carrier(s), NG-RAN may for example initiate release of unicast bearers.
\( 2> \) if SIB20 is scheduled by the PCell:
3> include mbs-ServiceList and set it to indicate the set of MBS services of interest sorted by decreasing order of interest determined in accordance with 5.9.4.4.

ETSI


--- Page 322  ---


3GPP TS 38.331 version 17.0.0 Release 17
321
ETSI TS 138331 V17.0.0 (2022-05)

6 Protocol data units, formats and parameters (ASN.1)
6.1 General
6.1.1 Introduction

The contents of each RRC message is specified in clause 6.2 using ASN 1 to specify the message syntax and using tables when needed to provide further detailed information about the fields specified in the message syntax. The syntax of the information elements that are defined as stand-alone abstract types is further specified in a similar manner in clause 6.3.

Usage of the text "Network always configures the UE with a value for this field" in the field description indicates that the network has to provide a value for the field in this or in a previous message based on delta configuration (for an optional field with Need M). It does not imply a mandatory presence of the field.
6.1.2 Need codes and conditions for optional downlink fields

The need for fields to be present in a message or an abstract type, i.e., the ASN. 1 fields that are specified as OPTIONAL in the abstract notation (ASN.1), is specified by means of comment text tags attached to the OPTIONAL statement in the abstract syntax. All comment text tags are available for use in the downlink direction only. The meaning of each tag is specified in table 6.1.2-1.

If conditions are used, a conditional presence table is provided for the message or information element specifying the need of the field for each condition case. The table also specifies whether UE maintains or releases the value in case the field is absent. The conditions clarify what the UE may expect regarding the setting of the message by the network. Violation of conditions is regarded as invalid network behaviour, which the UE is not required to cope with. Hence the general error handling defined in 10.4 does not apply in case a field is absent although it is mandatory according to the CondC or CondM condition.

For guidelines on the use of need codes and conditions, see Annex A.6 and A.7.

ETSI


--- Page 323  ---


3GPP TS 38.331 version 17.0.0 Release 17
322
ETSI TS 138331 V17.0.0 (2022-05)

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table 6.1.2-1: Meaning of abbreviations used to specify the need for fields to be present}
\begin{tabular}{|l|l|}
\hline Abbreviation & Meaning \\
\hline Cond conditionTag & \begin{tabular}{l}
Conditionally present \\
Presence of the field is specified in a tabular form following the ASN. 1 segment.
\end{tabular} \\
\hline CondC conditionTag & \begin{tabular}{l}
Configuration condition \\
Presence of the field is conditional to other configuration settings.
\end{tabular} \\
\hline CondM conditionTag & \begin{tabular}{l}
Message condition \\
Presence of the field is conditional to other fields included in the message.
\end{tabular} \\
\hline Need S & \begin{tabular}{l}
Specified \\
Used for (configuration) fields, whose field description or procedure specifies the UE behavior performed upon receiving a message with the field absent (and not if field description or procedure specifies the UE behavior when field is not configured).
\end{tabular} \\
\hline Need M & \begin{tabular}{l}
Maintain \\
Used for (configuration) fields that are stored by the UE i.e. not one-shot. Upon receiving a message with the field absent, the UE maintains the current value.
\end{tabular} \\
\hline Need N & \begin{tabular}{l}
No action (one-shot configuration that is not maintained) \\
Used for (configuration) fields that are not stored and whose presence causes a one-time action by the UE. Upon receiving message with the field absent, the UE takes no action.
\end{tabular} \\
\hline Need R & \begin{tabular}{l}
Release \\
Used for (configuration) fields that are stored by the UE i.e. not one-shot. Upon receiving a message with the field absent, the UE releases the current value.
\end{tabular} \\
\hline
\end{tabular}
\end{table}

NOTE: In this version of the specification, the condition tags CondC and CondM are not used.
Any field with Need M or Need N in system information shall be interpreted as Need R.
The need code used within a CondX definition only applies for the case (part of the condition) where it is defined: A condition may have different need codes for different parts of the condition. In particular, the CondX definition may contain the following "otherwise the field is absent" parts:
- "Otherwise, the field is absent": The field is not relevant or should not be configured when this part of the condition applies. In particular, the UE behaviour is not defined when the field is configured via another part of the condition and is reconfigured to this part of the condition. A need code is not provided when the transition from another part of the condition to this part of the condition is not supported, when the field clearly is a one-shot or there is no difference whether UE maintains or releases the value (e.g., in case the field is mandatory present according to the other part of the condition).
- "Otherwise, the field is absent, Need R": The field is released if absent when this part of the condition applies. This handles UE behaviour in case the field is configured via another part of the condition and this part of the condition applies (which means that network can assume UE releases the field if this part of the condition is valid).
- "Otherwise, the field is absent, Need M": The UE retains the field if it was already configured when this part of the condition applies. This means the network cannot release the field , but UE retains the previously configured value.

Use of different Need codes in different parts of a condition should be avoided.
For downlink messages, the need codes, conditions and ASN. 1 defaults specified for a particular (child) field only apply in case the (parent) field including the particular field is present. Thus, if the parent is absent the UE shall not release the field unless the absence of the parent field implies that.

ETSI


--- Page 324  ---


3GPP TS 38.331 version 17.0.0 Release 17
323
ETSI TS 138331 V17.0.0 (2022-05)

For (parent) fields without need codes in downlink messages, if the parent field is absent, UE shall follow the need codes of the child fields. Thus, if parent field is absent, the need code of each child field is followed (i.e. Need \( R \) child fields are released, Need \( M \) child fields are not modified and the actions for Need \( S \) child fields depend on the specified conditions of each field). Examples of (parent) fields in downlink messages without need codes where this rule applies are:
- nonCriticalExtension fields at the end of a message using empty SEQUENCE extension mechanism,
- groups of non-critical extensions using double brackets (referred to as extension groups), and
- non-critical extensions at the end of a message or at the end of a structure, contained in a BIT STRING or OCTET STRING (referred to as parent extension fields).

The handling of need codes as specified in the previous is illustrated by means of an example, as shown in the following ASN.1.
```
-- /example/ ASN1START
```


SEQUENCE 1

SEQUENCE 1
```
RRCMessage-IEs ::=
    fieldl
    field2
    nonCriticalExtension
}
RRCMessage-1570-IEs ::=
    field3
    nonCriticalExtension
}
RRCMessage-vl640-IEs ::=
    field4
    nonCriticalExtension
}
InformationElementl ::=
    fieldll
    fieldl2
    ...;
    [ [
    fieldl3
    fieldl4
    ]]
}
InformationElement2 ::= SEQUENCE \
    field2l
    ...
}
-- ASNISTOP
```

```
InformationElementl OPTIONAL, -- Need M
InformationElement2 OPTIONAL, -- Need R
RRCMessage-vl570-IEs OPTIONAL
```


InformationElement3 OPTIONAL, -- Need M
```
RRCMessage-vl640-IEs OPTIONAL
SEQUENCE \
InformationElement4 OPTIONAL, -- Need R
SEQUENCE {} OPTIONAL
SEQUENCE \
InformationElementll
InformationElementl2
InformationElementl3
InformationElementl4
OPTIONAL, -- Need. M
OPTIONAL, -- Need. R
OPTIONAL, -- Need. R
OPTIONAL -- Need. M
OPTIONAL, -- Need. M
```


The handling of need codes as specified in the previous implies that:
- if fieldl in RRCMessage-IEs is absent, UE does not modify any child fields configured within fieldl (regardless of their need codes);

ETSI


--- Page 325  ---


3GPP TS 38.331 version 17.0.0 Release 17
324
ETSI TS 138331 V17.0.0 (2022-05)
- if field2 in RRCMessage-IEs is absent, UE releases the field2 (and also its child field field2 1);
- if fieldl or field2 in RRCMessage-IEs is present, UE retains or releases their child fields according to the child field presence conditions;
- if field I in RRCMessage-IEs is present but the extension group containing field 13 and field 14 is absent, the UE releases field 13 but does not modify field 14 ;
- if nonCriticalExtension defined by IE RRCMessage-v1570-IEs is absent, the UE does not modify field3 but releases field4;
6.1.3 General rules

In the ASN. 1 of this specification, the first bit of a bit string refers to the leftmost bit, unless stated otherwise.
Upon reception of a list not using ToAddModList and ToReleaseList structure, the UE shall delete all entries of the list currently in the UE configuration before applying the received list and shall consider each entry as newly created. This applies also to lists whose size is extended (i.e. with a second list structure in the ASN. 1 comprising additional entries), unless otherwise specified. This implies that Need M should not be used for fields in the entries of these lists; if used, UE will handle such fields equivalent to a Need R
6.2 RRC messages
6.2.1 General message structure
- \( \quad \) NR-RRC-Definitions

This ASN. 1 segment is the start of the NR RRC PDU definitions.
```
-- ASNISTART
-- TAG-NR-RRC-DEFINITIONS-START
NR-RRC-Definitions DEFINITIONS AUTOMATIC TAGS ::=
BEGIN
IMPORTS
    BandCombinationParametersSidelinkNR-r16
FROM PC5-RRC-Definitions;
-- Editor's Note: TBD during ASN.l review whether/how to avoid IMPORTS to NR-RRC-Definitions
-- TAG-NR-RRC-DEFINITIONS-STOP
-- ASNISTOP
```


ETSI


--- Page 326  ---


3GPP TS 38.331 version 17.0.0 Release 17
325
ETSI TS 138331 V17.0.0 (2022-05)
- BCCH-BCH-Message

The BCCH-BCH-Message class is the set of RRC messages that may be sent from the network to the UE via BCH on the BCCH logical channel.
```
-- ASNISTART
-- TAG-BCCH-BCH-MESSAGE-START
BCCH-BCH-Message ::=
    message
}
BCCH-BCH-MessageType ::=
    mib
    messageClassExtension
}
-- TAG-BCCH-BCH-MESSAGE-STOP
-- ASNISTOP
```

```
SEQUENCE \
    BCCH-BCH-MessageType
CHOICE \
    MIB,
    SEQUENCE {}
            UENCE 
```

- BCCH-DL-SCH-Message

The BCCH-DL-SCH-Message class is the set of RRC messages that may be sent from the network to the UE via DL-SCH on the BCCH logical channel.
```
-- ASNISTART
-- TAG-BCCH-DL-SCH-MESSAGE-START
BCCH-DL-SCH-Message ::= SEQUENCE \
    message
}
BCCH-DL-SCH-MessageType ::= CHOICE [
    cl
        systemInformation SystemInformation,
        systemInformationBlockTypel SIBl
    },
    messageClassExtension SEQUENCE {}
}
-- TAG-BCCH-DL-SCH-MESSAGE-STOP
-- ASNISTOP
```

- DL-CCCH-Message

The DL-CCCH-Message class is the set of RRC messages that may be sent from the Network to the UE on the downlink CCCH logical channel.
-- ASNISTART
-- TAG-DL-CCCH-MESSAGE-START

ETSI


--- Page 327  ---


3GPP TS 38.331 version 17.0.0 Release 17
326
ETSI TS 138331 V17.0.0 (2022-05)
```
DL-CCCH-Message ::=
    message
}
DL-CCCH-MessageType ::=
    cl
        rrcReject
        rrcsetup
        spare2
        sparel
    },
    messageClassExtension SEQUENCE {}
}
-- TAG-DL-CCCH-MESSAGE-STOP
-- ASNISTOP
```

```
SEQUENCE \
    DL-CCCH-MessageType
```

```
CHOICE \
    CHOICE \
        RRCReject,
        RRCSetup,
        NULL,
        NULL
    SEQUENCE {}
```

- DL-DCCH-Message

The DL-DCCH-Message class is the set of RRC messages that may be sent from the network to the UE on the downlink DCCH logical channel.
```
-- ASNISTART
-- TAG-DL-DCCH-MESSAGE-START
DL-DCCH-Message ::= SEQUENCE \
    message
}
DL-DCCH-MessageType ::= CHOICE \
    cl
        \textbf{
        rcReconfiguration RRCReconfiguration,
        rrcResume RRCResume,
        rrcRelease RRCRelease,
        rrcReestablishment RRCReestablishment,
        securityModeCommand SecurityModeComand,
        dlInformationTransfer DLInformationTransfer,
        ueCapabilityEnquiry UECapabilityEnquiry,
        mobilityFromNRComand MobilityFromNRComand,
        dlDedicatedMessageSegment-r16 DLDedicatedMessageSegment-r16,
        veInformationRequest-r16 UEInformationRequest-r16,
        dlInformationTransferMRDC-r16 DLInformationTransferMRDC-r16,
        loggedMeasurementConfiguration-rl6 LoggedMeasurementConfiguration-rl6,
            spare3 NULL, spare2 NULL, sparel NULL
    },
    messageClassExtension SEQUENCE {}
}
-- TAG-DL-DCCH-MESSAGE-STOP
-- ASNISTOP
```


ETSI


--- Page 328  ---


3GPP TS 38.331 version 17.0.0 Release 17
327
ETSI TS 138331 V17.0.0 (2022-05)
- MCCH-Message

The MCCH-Message class is the set of RRC messages that may be sent from the network to the UE on the MCCH logical channel.
```
-- ASNISTART
-- TAG-MCCH-MESSAGE-START
MCCH-Message-rl7 ::= SEQUENCE [
    message MCCH-MessageType-rl7
}
MCCH-MessageType-rl7 ::= CHOICE [
    cl CHOICE [
        mbsBroadcastConfiguration-rl7 MBSBroadcastConfiguration-rl7,
        sparel NULL
    },
    messageClassExtension SEQUENCE {}
}
-- TAG-MCCH-MESSAGE-STOP
-- ASNISTOP
```

- PCCH-Message

The PCCH-Message class is the set of RRC messages that may be sent from the Network to the UE on the PCCH logical channel.
```
-- ASNISTART
-- TAG-PCCH-PCH-MESSAGE-START
PCCH-Message ::= SEQUENCE \
    message
}
PCCH-MessageType ::=
    cl
        - CHOICE [
        sparel NULL
    },
    messageClassExtension SEQUENCE {}
}
-- TAG-PCCH-PCH-MESSAGE-STOP
-- ASNISTOP
```

- UL-CCCH-Message

The UL-CCCH-Message class is the set of 48-bits RRC messages that may be sent from the UE to the Network on the uplink CCCH logical channel.

ETSI


--- Page 329  ---


3GPP TS 38.331 version 17.0.0 Release 17
328
ETSI TS 138331 V17.0.0 (2022-05)
```
-- ASNISTART
-- TAG-UL-CCCH-MESSAGE-START
UL-CCCH-Message ::=
SEQUENCE {
    UL-CCCH-MessageType
}
UL-CCCH-MessageType ::= CHOICE [
    cl
        rrcsetupRequest
        .Hoprequest RRCetupRequest,
        r RRCResumeRequest,
        r RRCReestablishmentRequest,
    },
    messageClassExtension SEQUENCE {}
}
-- TAG-UL-CCCH-MESSAGE-STOP
-- ASNISTOP
```


UL-CCCH1-Message
The UL-CCCH1-Message class is the set of 64-bits RRC messages that may be sent from the UE to the Network on the uplink CCCH1 logical channel.
```
-- ASNISTART
-- TAG-UL-CCCHI-MESSAGE-START
UL-CCCHl-Message ::= SEQUENCE \
    message
}
UL-CCCHl-MessageType ::= CHOICE [
    cl
        rrcResumeRequestl RRCResumeRequestl,
        spare3 NULL,
        spare2 NULL,
        sparel NULL
    },
    messageClassExtension SEQUENCE {}
}
-- TAG-UL-CCCHI-MESSAGE-STOP
-- ASNISTOP
```


ETSI


--- Page 330  ---


3GPP TS 38.331 version 17.0.0 Release 17
329
ETSI TS 138331 V17.0.0 (2022-05)
- UL-DCCH-Message

The UL-DCCH-Message class is the set of RRC messages that may be sent from the UE to the network on the uplink DCCH logical channel.
```
-- ASNISTART
-- TAG-UL-DCCH-MESSAGE-START
UL-DCCH-Message ::=
    message
}
UL-DCCH-MessageType ::=
    cl
        measurementReport MeasurementReport,
        rrcReconfigurationComplete RRCReconfigurationComplete,
        rrcSetupComplete RRCSetupComplete,
        rrcReestablishmentComplete RRCReestablishmentComplete,
        rrcResumeComplete RRCResumeComplete,
        securityModeComplete SecurityModeComplete,
        securityModeFailure SecurityModeFailure,
        ulInformationTransfer ULInformationTransfer,
        locationMeasurementIndication LocationMeasurementIndication,
        ueCapabilityInformation UECapabilityInformation,
        counterCheckResponse CounterCheckResponse,
        ueAssistanceInformation UEAssistanceInformation,
        failureInformation FailureInformation,
        ulInformationTransferMRDC ULInformationTransferMRDC,
        scgFailureInformation SCGFailureInformation,
        scgFailureInformationEUTRA SCGFailureInformationEUTRA
    },
    messageClassExtension CHOICE {
        c2 CHOICE \
            ulDedicatedMessageSegment-rl6 ULDedicatedMessageSegment-rl6,
            dedicatedSIBRequest-r16 DedicatedSIBRequest-r16,
            mcgFailureInformation-r16 MCGFailureInformation-rl6,
            ueInformationResponse-r16 UEInformationResponse-r16,
            sidelinkUEInformationNR-r16 SidelinkUEInformationNR-r16,
            ulInformationTransferIRAT-r16 ULInformationTransferIRAT-rl6,
            iabOtherInformation-rl6 IABOtherInformation-rl6,
            mosInterestIndication-rl7 MBSInterestIndication-rl7,
            uePositioningAssistanceInfo-rl7 UEPositioningAssistanceInfo-rl7,
            measurementReportAppLayer-rl7 MeasurementReportAppLayer-rl7,
                    spare6 NULL, spare5 NULL, spare4 NULL, spare3 NULL, spare2 NULL, sparel NULL
        },
        messageClassExtensionFuture-rl6 SEQUENCE {}
    }
}
-- TAG-UL-DCCH-MESSAGE-STOP
-- ASNISTOP
```


ETSI


--- Page 331  ---


3GPP TS 38.331 version 17.0.0 Release 17
330
ETSI TS 138331 V17.0.0 (2022-05)
6.2.2 Message definitions
- CounterCheck

The CounterCheck message is used by the network to indicate the current COUNT MSB values associated to each DRB and to request the UE to compare these to its COUNT MSB values and to report the comparison results to the network.

Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
CounterCheck message
-- ASNISTART
-- TAG-COUNTERCHECK-START
```
CounterCheck ::= SEQUENCE \
    rrc-TransactionIdentifier
    criticalExtensions
        counterCheck
        criticalExtensionsFuture
    }
}
CounterCheck-IEs ::=
    drb-CountMSB-Infolist
    lateNonCriticalExtension
    nonCriticalExtension
}
DRB-CountMSB-InfoList ::= SEQUENCE (SIZE (l..maxDRB)) OF DRB-CountMSB-Info
DRB-CountMSB-Info ::= SEQUENCE [
    drb-Identity
    countMSB-Uplink
    countMSB-Downlink
}
-- TAG-COUNTERCHECK-STOP
-- ASNISTOP
```


ETSI


--- Page 332  ---


3GPP TS 38.331 version 17.0.0 Release 17
331
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline drb-CountMSB-infoList \\
Indicates the MSBs of the COUNT values of the DRBs. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline DRB-CountMSB-info field descriptions \\
\hline \begin{tabular}{l}
countMSB-Downlink \\
Indicates the value of 25 MSBs from RX_NEXT - 1 (specified in TS 38.323 [5]) associated to this DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
countMSB-Uplink \\
Indicates the value of 25 MSBs from TX NEXT - 1 (specified in TS 38.323 [5]) associated to this DRB.
\end{tabular} \\
\hline
\end{tabular}
- CounterCheckResponse

The CounterCheckResponse message is used by the UE to respond to a CounterCheck message.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
CounterCheckResponse message
```
-- ASNISTART
-- TAG-COUNTERCHECKRESPONSE-START
CounterCheckResponse ::= SEQUENCE {
    rrc-TransactionIdentifier RRC-TransactionIdentifier,
    criticalExtensions CHOICE \
        counterCheckResponse CounterCheckResponse-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
CounterCheckResponse-IEs ::= SEQUENCE [
    drb-CountInfoList
    lateNonCriticalExtension
    nonCriticalExtension
}
DRB-CountInfoList ::= SEQUENCE (SIZE (O..maxDRB)) OF DRB-CountInfo
DRB-CountInfo ::= SEQUENCE \
    drb-Identity
    DRB-Identity,
    count-Uplink INTEGER(0..4294967295),
```


ETSI


--- Page 333  ---


3GPP TS 38.331 version 17.0.0 Release 17
332
ETSI TS 138331 V17.0.0 (2022-05)
```
    count-Downlink
    }
-- TAG-COUNTERCHECKRESPONSE-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline drb-CountinfoList \\
Indicates the COUNT values of the DRBs. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline DRB-Countinfo field descriptions \\
\hline \begin{tabular}{l}
count-Downlink \\
Indicates the value of RX NEXT - 1 (specified in TS 38.323 [5]) associated to this DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
count-Uplink \\
Indicates the value of TX NEXT - 1 (specified in TS 38.323 [5]) associated to this DRB.
\end{tabular} \\
\hline
\end{tabular}
- DedicatedSIBRequest

The DedicatedSIBRequest message is used to request SIB(s) required by the UE in RRC_CONNECTED as specified in clause 5.2.2.3.5.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
DedicatedSIBRequest message
```
-- ASNISTART
-- TAG-DEDICATEDSIBREQUEST-START
DedicatedSIBRequest-rl6 ::= SEQUENCE \
    criticalExtensions CHOICE [
        dedicatedSIBRequest-rl6 DedicatedSIBRequest-rl6-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
DedicatedSIBRequest-rl6-IEs ::= SEQUENCE \
    onDemandSIB-RequestList-r16 SEQUENCE {
        requestedSIB-List-rl6 SEQUENCE (SIZE (l..maxOnDemandSIB-rl6)) OF SIB-ReqInfo-rl6 OPTIONAL,
        requestedPosSIB-List-rl6 SEQUENCE (SIZE (l..maxOnDemandPosSIB-rl6)) OF PosSIB-ReqInfo-rl6 OPTIONAL
    } OPTIONAL,
```


ETSI


--- Page 334  ---


3GPP TS 38.331 version 17.0.0 Release 17
333
ETSI TS 138331 V17.0.0 (2022-05)
```
    lateNonCriticalExtension
    nonCriticalExtension
}
SIB-ReqInfo-rl6 ::=
PosSIB-ReqInfo-rl6 ::=
    gnss-id-rl6
    sbas-id-r16
    posSibType-rl6
                possibTypel-2, posSibTypel-3, posSibTypel-4, posSibTypel-5, posSibTypel-6,
                posSibType2-5, posSibType2-6, posSibType2-7, posSibType2-8, posSibType2-9, posSibType2-10,
                posSibType2-11, posSibType2-12, posSibType2-13, posSibType2-14, posSibType2-15,
                posSibType2-16, posSibType2-17, posSibType2-18, posSibType2-19, posSibType2-20,
                posSibType2-21, posSibType2-22, posSibType2-23, posSibType3-1, posSibType4-1,
                posSibType5-1, posSibType6-1, posSibType6-2, posSibType6-3,..}
}
-- TAG-DEDICATEDSIBREQUEST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline DedicatedSIBRequest field descriptions \\
\hline \begin{tabular}{l}
requestedSIB-List \\
Contains a list of SIB(s) the UE requests while in RRC_CONNECTED.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedPosSIB-List \\
Contains a list of posSIB(s) the UE requests while in RRC_CONNECTED.
\end{tabular} \\
\hline
\end{tabular}

PosSIB-Reqinfo field descriptions

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
gnss-id \\
The presence of this field indicates that the request positioning SIB type is for a specific GNSS. Indicates a specific GNSS (see also TS 37.355 [49])
\end{tabular} \\
\hline \begin{tabular}{l}
sbas-id \\
The presence of this field indicates that the request positioning SIB type is for a specific SBAS. Indicates a specific SBAS (see also TS 37.355 [49]).
\end{tabular} \\
\hline
\end{tabular}
- DLDedicatedMessageSegment

The DLDedicatedMessageSegment message is used to transfer one segment of the RRCResume or RRCReconfiguration messages.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE

ETSI


--- Page 335  ---


3GPP TS 38.331 version 17.0.0 Release 17
334
ETSI TS 138331 V17.0.0 (2022-05)

DLDedicatedMessageSegment message
-- ASNISTART
-- TAG-DLDEDICATEDMESSAGESEGMENT-START
```
DLDedicatedMessageSegment-rl6 ::=
    criticalExtensions
        dlDedicatedMessageSegment-rl6
        criticalExtensionsFuture
    }
}
DLDedicatedMessageSegment-r16-IEs ::=
    segmentNumber-rl6
    rrc-MessageSegmentContainer-r16
    rrc-MessageSegmentType-rl6
    lateNonCriticalExtension
    nonCriticalExtension
}
```

```
SEQUENCE \
    CHOICE \
        DLDedicatedMessageSegment-rl6-IEs,
        SEQUENCE {}
```

SEQUENCE 1
    INTEGER (0. . 4) ,
    OCTET STRING,
    ENUMERATED \{notLastSegment, lastSegment\},
    OCTET STRING OPTIONAL,
    SEQUENCE \{\} OPTIONAL
-- TAG-DLDEDICATEDMESSAGESEGMENT-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline DLDedicatedMessageSegment field descriptions \\
\hline \begin{tabular}{l}
segmentNumber \\
Identifies the sequence number of a segment within the encoded DL DCCH message. The network transmits the segments with continuously increasing segmentNumber order so that the UE's RRC layer may expect to obtain them from lower layers in the correct order. Hence, the UE is not required to perform segment re-ordering on RRC level.
\end{tabular} \\
\hline \begin{tabular}{l}
rrc-MessageSegmentContainer \\
Includes a segment of the encoded DL DCCH message. The size of the included segment in this container should be small enough so the resulting encoded RRC message PDU is less than or equal to the PDCP SDU size limit.
\end{tabular} \\
\hline \begin{tabular}{l}
rrc-MessageSegmentType \\
Indicates whether the included DL DCCH message segment is the last segment of the message or not.
\end{tabular} \\
\hline
\end{tabular}
- DLInformationTransfer

The DLInformationTransfer message is used for the downlink transfer of NAS dedicated information, timing information for the 5G internal system clock, or [AB-DU specific F1-C related information.

Signalling radio bearer: SRB2 or SRB1 (only if SRB2 not established yet. If SRB2 is suspended, the network does not send this message until SRB2 is resumed. If only dedicatedInfoF1c is included, SRB2 is used).

RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE

ETSI


--- Page 336  ---


3GPP TS 38.331 version 17.0.0 Release 17
335
ETSI TS 138331 V17.0.0 (2022-05)

DLInformation Transfer message
```
-- ASNISTART
-- TAG-DLINFORMATIONTRANSEER-START
DLInformationTransfer ::= SEQUENCE {
    rrc-TransactionIdentifier
    criticalExtensions
        dlInformationTransfer
        criticalExtensionsFuture
    }
}
DLInformationTransfer-IEs ::= SEQUENCE {
    dedicatedNAS-Message
    lateNonCriticalExtension
    nonCriticalExtension
}
DLInformationTransfer-vl6l0-IEs ::= SEQUENCE {
    referenceTimeInfo-rl6 ReferenceTimeInfo-rl6
    nonCriticalExtension DLInformationTransfer-
}
DLInformationTransfer-vl700-IEs ::= SEQUENCE {
    dedicatedInfoFlc-rl7 DedicatedInfoFlc-rl7
    rxTxTimeDiff-gNB-rl7 RxTxTimeDiff-rl7
    ta-PDC-rl7
    sib9Fallback-rl7
    nonCriticalExtension
}
-- TAG-DLINFORMATIONTRANSEER-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline DLinformationTransfer field descriptions \\
\hline \begin{tabular}{l}
rxTxTimeDiff-gNB \\
Indicates the Rx-Tx time difference measurement at the gNB (see clause 5.2.3, TS 38.215 [9]). Upon receiving this field, the UE calculates the propagation delay based on the RTT-method. The network does not configure this field, if the UE is configured with ta-PDC with value activate.
\end{tabular} \\
\hline \begin{tabular}{l}
sib9Fallback \\
Indicates that the UE fallbacks to receive reference Timelnfo in SIB9.
\end{tabular} \\
\hline \begin{tabular}{l}
ta-PDC \\
Indicates whether the UE-side TA-based propagation delay compensation (PDC) is activated or de-activated. The network does not configure this field with activate, if the field rxTxTimeDiff-gNB is configured.
\end{tabular} \\
\hline
\end{tabular}
DLInformation TransferMRDC

The DLInformationTransferMRDC message is used for the downlink transfer of RRC messages during fast MCG link recovery.

ETSI


--- Page 337  ---


3GPP TS 38.331 version 17.0.0 Release 17
336
ETSI TS 138331 V17.0.0 (2022-05)

Signalling radio bearer: SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
DLinformation TransferMRDC message
```
-- ASNISTART
-- TAG-DLINFORMATIONTRANSEERMRDC-START
DLInformationTransferMRDC-r16 ::= SEQUENCE {
    criticalExtensions
        cl
            dlInformationTransferMRDC-rl6 DLInformationTransferMRDC-rl6-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
DLInformationTransferMRDC-r16-IEs::= SEQUENCE {
    dl-DCCH-MessageNR-rl6
    dl-DCCH-MessageEUTRA-rl6 OCTET STRING OPTIONAL, -- Need N
    lateNonCriticalextension OCTET STRING OPTIONAL,
    nonCriticalextension SEQUENCE {} OPTIONAL
}
-- TAG-DLINFORMATIONTRANSEERMRDC-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline DLinformationTransferMRDC field descriptions \\
\hline \begin{tabular}{l}
di-DCCH-MessageNR \\
Includes the DL-DCCH-Message. In this version of the specification, the field is only used to transfer the NR RRCReconfiguration, RRCRelease, and MobilityFromNRCommand messages.
\end{tabular} \\
\hline \begin{tabular}{l}
dl-DCCH-MessageEUTRA \\
Includes the DL-DCCH-Message. In this version of the specification, the field is only used to transfer the E-UTRA RRCConnectionReconfiguration, RRCConnectionRelease, and MobilityFromEUTRACommand messages as specified in TS 36.331 [10].
\end{tabular} \\
\hline
\end{tabular}
- FailureInformation

The FailureInformation message is used to inform the network about a failure detected by the UE.

ETSI


--- Page 338  ---


3GPP TS 38.331 version 17.0.0 Release 17
337
ETSI TS 138331 V17.0.0 (2022-05)

Signalling radio bearer: SRB1 or SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to network
FailureInformation message
```
-- ASNISTART
-- TAG-FAILUREINFORMATION-START
FailureInformation ::= SEQUENCE \
    criticalExtensions CHOICE {
        failureInformation
        FailureInformation-IEs,
    }
}
FailureInformation-IEs ::= SEQUENCE \
    failureInfoRLC-Bearer FailureInfoRLC-Bearer OPTIONAL,
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    nonCriticalExtension FailureInformation-vl6l0-IEs OPTIONAL
}
FailureInfoRLC-Bearer ::= SEQUENCE \
    cellGroupId CellGroupId,
    logicalChannelIdentity LogicalChannelIdentity,
    failureType ENUMERATED {rlc-failure, spare3, spare2, sparel}
}
FailureInformation-vl6l0-IEs ::= SEQUENCE [
    failureInfoDAPS-r16 FailureInfoDAPS-rl6 OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
FailureInfoDAPS-r16 ::= SEQUENCE [
    failureType-rl6 ENUMERATED {daps-failure, spare3, spare2, sparel}
}
-- TAG-FAILUREINFORMATION-STOP
-- ASNISTOP
```

- IABOtherInformation

The IABOtherInformation message is used by IAB-MT to request the network to allocate IP addresses for the collocated IAB-DU or inform the network about IP addresses allocated to the collocated IAB-DU.

ETSI


--- Page 339  ---


3GPP TS 38.331 version 17.0.0 Release 17
338
ETSI TS 138331 V17.0.0 (2022-05)

Signalling radio bearer: SRB1 or SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: IAB-MT to Network
IABOtherInformation message
```
-- ASNISTART
-- TAG-IABOTHERINFORMATION-START
IABOtherInformation-rl6 ::= SEQUENCE [
    rrc-TransactionIdentifier RRC-TransactionIdentifier,
    criticalExtensions CHOICE {
        iabOtherInformation-rl6 IABOtherInformation-rl6-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
IABOtherInformation-rl6-IEs ::= SEQUENCE {
    ip-InfoType-rl6 CHOICE {
        iab-IP-Request-r16 SEQUENCE {
            iab-IPv4-AddressNumReq-r16 IAB-IP-AddressNumReq-r16 OPTIONAL,
            iab-IPv6-AddressReq-r16 CHOICE {
                iab-IPv6-AddressNumReq-r16 IAB-IP-AddressNumReq-r16,
                iab-IPv6-AddressPrefixReq-r16 IAB-IP-AddressPrefixReq-r16,
                ...
            } OPTIONAL
        },
        iab-IP-Report-rl6 SEQUENCE {
            iab-IPv4-AddressReport-r16 IAB-IP-AddressAndTraffic-r16 OPTIONAL,
            iab-IPv6-Report-rl6 CHOICE |
                iab-IPv6-AddressReport-rl6 IAB-IP-AddressAndTraffic-rl6,
                iab-IPv6-PrefixReport-rl6 IAB-IP-PrefixAndTraffic-r16,
                ...
            } OPTIONAL
        },
        ...
    },
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
IAB-IP-AddressNumReq-r16 ::= SEQUENCE {
    all-Traffic-NumReq-rl6 INTEGER (1..8) OPTIONAL,
    fl-C-Traffic-NumReq-rl6 INTEGER (1..8) OPTIONAL,
    fl-U-Traffic-NumReq-rl6 INTEGER (1..8) OPTIONAL,
    non-Fl-Traffic-NumReq-rl6 INTEGER (1..8) OPTIONAL,
    \cdots
}
```


ETSI


--- Page 340  ---


3GPP TS 38.331 version 17.0.0 Release 17
339
ETSI TS 138331 V17.0.0 (2022-05)
```
IAB-IP-AddressPrefixReq-r16 ::= SEQUENCE {
    all-Traffic-PrefixReq-rl6 ENUMERATED {true} OPTIONAL,
    fl-C-Traffic-PrefixReq-rl6 ENUMERATED {true} OPTIONAL,
    fl-U-Traffic-PrefixReq-rl6 ENUMERATED {true} OPTIONAL,
    non-Fl-Traffic-PrefixReq-rl6 ENUMERATED {true} OPTIONAL,
...
}
IAB-IP-AddressAndTraffic-rl6 ::= SEQUENCE \
    all-Traffic-IAB-IP-Address-r16 SEQUENCE (SIZE(1..8)) OF IAB-IP-Address-rl6 OPTIONAL,
    fl-C-Traffic-IP-Address-rl6 SEQUENCE (SIZE(1..8)) OF IAB-IP-Address-rl6 OPTIONAL,
    fl-U-Traffic-IP-Address-rl6 SEQUENCE (SIZE(1..8)) OF IAB-IP-Address-rl6 OPTIONAL,
    non-Fl-Traffic-IP-Address-rl6 SEQUENCE (SIZE(1..8)) OF IAB-IP-Address-rl6 OPTIONAL
}
IAB-IP-PrefixAndTraffic-rl6 ::= SEQUENCE [
    all-Traffic-IAB-IP-Address-r16 IAB-IP-Address-r16 OPTIONAL,
    fl-C-Traffic-IP-Address-rl6 IAB-IP-Address-rl6 OPTIONAL,
    fl-U-Traffic-IP-Address-r16 IAB-IP-Address-r16 OPTIONAL,
    non-Fl-Traffic-IP-Address-r16 IAB-IP-Address-r16 OPTIONAL
}
-- TAG-IABOTHERINFORMATION-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline IABOtherinformation-IEs field descriptions \\
\hline \begin{tabular}{l}
iab-IPv4-AddressNumReq \\
This field is used to request the numbers of IPv4 address per specific usage. The specific usages include F1-C traffic, F1-Utraffic, non-F1 traffic and all traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-IPv4-AddressReport \\
This field is used to report the IPv4 address per specific usage assigned by OAM for IAB-DU. The specific usages include F1-C traffic, F1-U traffic, non-F1 traffic and all traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-IPv6-AddressNumReq \\
This field is used to request the numbers of IPv6 address per specific usage. The specific usages include F1-C traffic, F1-U traffic, non-F1 traffic and all traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-IPv6-AddressPrefixReq \\
This field is used to request the prefix of IPv6 address per specific usage. The specific usages include F1-C traffic, F1-U traffic, non-F1 traffic and all traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-IPv6-AddressReport \\
This field is used to report the IPv6 address per specific usage assigned by OAM for IAB-DU. The specific usages include F1-C traffic, F1-U traffic, non-F1 traffic and all traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-IPv6-PrefixReport \\
This field is used to report the prefix of IPv6 address per specific usage assigned by OAM for IAB-DU. The specific usages include F1-C traffic, F1-U traffic, non-F1 traffic and all traffic.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 341  ---


3GPP TS 38.331 version 17.0.0 Release 17
340
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline IAB-IP-AddressNumReq-IEs field descriptions \\
\hline \begin{tabular}{l}
all-Traffic-NumReq \\
This field is used to request the numbers of IP address for all traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
f1-C-Traffic-NumReq \\
This field is used to request the numbers of IP address for F1-C traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
f1-U-Traffic-NumReq \\
This field is used to request the numbers of IP address for F1-U traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
non-F1-Traffic-NumReq \\
This field is used to request the numbers of IP address for non-F1 traffic.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline IAB-IP-AddressPrefixReq-IEs field descriptions \\
\hline \begin{tabular}{l}
all-Traffic-PrefixReq \\
This field is used to request the IPv6 address prefix for all traffic. The length of allocated IPv6 prefix is fixed to 64.
\end{tabular} \\
\hline \begin{tabular}{l}
f1-C-Traffic-PrefixReq \\
This field is used to request the IPv6 address prefix for F1-C traffic. The length of allocated IPv6 prefix is fixed to 64.
\end{tabular} \\
\hline \begin{tabular}{l}
f1-U-Traffic-PrefixReq \\
This field is used to request the IPv6 address prefix for F1-U traffic. The length of allocated IPv6 prefix is fixed to 64.
\end{tabular} \\
\hline \begin{tabular}{l}
non-F1-Traffic-PrefixReq \\
This field is used to request the IPv6 address prefix for non-F1 traffic. The length of allocated IPv6 prefix is fixed to 64.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline IAB-IP-AddressAndTraffic-IEs field descriptions \\
\hline \begin{tabular}{l}
all-Traffic-IAB-IP-Address \\
This field is used to report to IAB-donor-CU the IP address(es) or IPv6 address prefix for all traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
f1-C-Traffic-IP-Address \\
This field is used to report to IAB-donor-CU the IP address(es) or IPv6 address prefix for F1-C traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
f1-U-Traffic-IP-Address \\
This field is used to report to IAB-donor-CU the IP address(es) or IPv6 address prefix for F1-U traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
non-F1-Traffic-IP-Address \\
This field is used to report to IAB-donor-CU the IP address(es) or IPv6 address prefix for non-F1 traffic.
\end{tabular} \\
\hline
\end{tabular}
- LocationMeasurementIndication

The LocationMeasurementIndication message is used to indicate that the UE is going to either start or stop location related measurement which requires measurement gaps.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network

ETSI


--- Page 342  ---


3GPP TS 38.331 version 17.0.0 Release 17
341
ETSI TS 138331 V17.0.0 (2022-05)

LocationMeasurementindication message
```
-- ASNISTART
-- TAG-LOCATIONMEASUREMENTINDICATION-START
LocationMeasurementIndication ::= SEQUENCE {
    criticalExtensions
        locationMeasurementIndication
        criticalExtensionsFuture
    }
}
LocationMeasurementIndication-IEs ::=
    measurementIndication
    lateNonCriticalExtension
    nonCriticalExtension
}
-- TAG-LOCATIONMEASUREMENTINDICATION-STOP
-- ASNISTOP
```

```
SEQUENCE {
    CHOICE {
        LocationMeasurementIndication-IEs,
        SEQUENCE {}
```

```
SEQUENCE {
    SetupRelease {LocationMeasurementInfo},
    OCTET STRING OPTIONAL,
    SEQUENCE{}
```


OPTIONAL
- LoggedMeasurementConfiguration

The LoggedMeasurementConfiguration message is used to perform logging of measurement results while in RRC_IDLE or RRC_INACTIVE. It is used to transfer the logged measurement configuration for network performance optimisation.

Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
LoggedMeasurementConfiguration message
```
-- ASNISTART
-- TAG-LOGGEDMEASUREMENTCONFIGURATION-START
LoggedMeasurementConfiguration-r16::= SEQUENCE [
    criticalExtensions CHOICE {
        loggedMeasurementConfiguration-rl6 LoggedMeasurementConfiguration-rl6-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
LoggedMeasurementConfiguration-rl6-IEs ::= SEQUENCE {
    traceReference-rl6 TraceReference-rl6,
    traceRecordingSessionRef-rl6 OCTET STRING (SIZE (2)),
```


ETSI


--- Page 343  ---


3GPP TS 38.331 version 17.0.0 Release 17
342
ETSI TS 138331 V17.0.0 (2022-05)
```
    tce-Id-rl6
OCTET STRING (SIZE (1)),
    absoluteTimeInfo-rl6 AbsoluteTimeInfo-rl6,
    areaConfiguration-rl6 AreaConfiguration-rl6 OPTIONAL, --Need. R
    plmn-IdentityList-rl6 PLMN-IdentityList2-rl6 OPTIONAL, --Need. R
    bt-NameList-rl6 SetupRelease {BT-NameList-rl6} OPTIONAL, --Need. M
    wlan-NameList-rl6 SetupRelease {WLAN-NameList-rl6} OPTIONAL, --Need. M
    sensor-NameList-rl6 SetupRelease {Sensor-NameList-rl6} OPTIONAL, --Need M
    loggingDuration-rl6 LoggingDuration-rl6,
    reportType CHOICE [
        periodical
        eventTriggered.
        \cdots.
    },
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    nonCriticalExtension LoggedMeasurementConfiguration-vl700-IEs OPTIONAL
}
LoggedMeasurementConfiguration-vl700-IEs ::= SEQUENCE {
    sigLoggedMeasType-rl7 ENUMERATED {true}
    earlyMeasIndication-rl7
    areaConfiguration-vl700 AreaConfiguration-vl700 OPTIONAL, --Need R
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
LoggedPeriodicalReportConfig-rl6 ::= SEQUENCE {
    loggingInterval-rl6 LoggingInterval-rl6,
    ...
    }
LoggedEventTriggerConfig-rl6 ::= SEQUENCE {
    eventType-rl6 EventType-rl6,
    loggingInterval-rl6 LoggingInterval-rl6,
    ...
}
EventType-rl6 ::= CHOICE [
    outOfCoverage NULL,
    eventll SEQUENCE {
        11-Threshold MeasTriggerQuantity,
        hysteresis Hysteresis,
        timeToTrigger TimeToTrigger
    },
    ...
}
-- TAG-LOGGEDMEASUREMENTCONFIGURATION-STOP
-- ASNISTOP
```


ETSI


--- Page 344  ---


3GPP TS 38.331 version 17.0.0 Release 17
343
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline LoggedMeasurementConfiguration field descriptions \\
\hline \begin{tabular}{l}
absolute TimeInfo \\
Indicates the absolute time in the current cell.
\end{tabular} \\
\hline \begin{tabular}{l}
areaConfiguration \\
Used to restrict the area in which the UE performs measurement logging to cells broadcasting either one of the included cell identities or one of the included tracking area codes/ frequencies.
\end{tabular} \\
\hline \begin{tabular}{l}
earlyMeasindication \\
If included, the field indicates the UE is allowed to log measurements on early measurement related frequencies in logged measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
eventType \\
The value outOfCoverage indicates the UE to perform logging of measurements when the UE enters any cell selection state, and the value eventL1 indicates the UE to perform logging of measurements when the triggering condition (similar as event A2 as specified in 5.5.4.3) as configured in the event is met for the camping cell in camped normally state.
\end{tabular} \\
\hline \begin{tabular}{l}
pimn-IdentityList \\
Indicates a set of PLMNs defining when the UE performs measurement logging as well as the associated status indication and information retrieval i.e. the UE performs these actions when the RPLMN is part of this set of PLMNs.
\end{tabular} \\
\hline \begin{tabular}{l}
sigLoggedMeasType \\
If included, the field indicates a signalling based logged measurements (See TS 37.320 [61]).
\end{tabular} \\
\hline \begin{tabular}{l}
tce-id \\
Parameter Trace Collection Entity Id: See TS 32.422 [52].
\end{tabular} \\
\hline \begin{tabular}{l}
traceRecordingSessionRef \\
Parameter Trace Recording Session Reference: See TS 32.422 [52].
\end{tabular} \\
\hline \begin{tabular}{l}
reportType \\
Parameter configures the type of MDT configuration, specifically Periodic MDT configuration or Event Triggerd MDT configuration.
\end{tabular} \\
\hline
\end{tabular}
- MBSBroadcastConfiguration

The MBSBroadcastConfiguration message contains the control information applicable for MBS broadcast services transmitted via broadcast MRB.
Signalling radio bearer: N/A
RLC-SAP: UM
Logical channel: MCCH
Direction: Network to UE
MBSBroadcastConfiguration message
-- ASNISTART
-- TAG-MBSBROADCASTCONFIGURATION-START

MBSBroadcastConfiguration-rl7 : := SEQUENCE [
criticalExtensions CHOICE [
mbsBroadcastConfiguration-rl7 MBSBroadcastConfiguration-rl7-IEs,
criticalextensionsFuture SEQUENCE [\}
\}

ETSI


--- Page 345  ---


3GPP TS 38.331 version 17.0.0 Release 17
344
ETSI TS 138331 V17.0.0 (2022-05)
```
}
MBSBroadcastConfiguration-rl7-IEs ::= SEQUENCE {
    mbs-SessionInfoList-rl7 MBS-SessionInfoList-rl7,
    mbs-NeighbourCellList-rl7 MBS-NeighbourCellList-rl7
```

```
    pdsch-ConfigMTCH-rl7 PDSCH-ConfigBroadcast-rl7
    mtch-SSB-MappingWindowList-rl7 MTCH-SSB-MappingWindowList-rl7
    lateNonCriticalExtension OCTET STRING
    nonCriticalextension SEQUENCE {}
}
```

-- TAG-MBSBROADCASTCONFIGURATION-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline MBSBroadcastConfiguration field descriptions \\
\hline \begin{tabular}{l}
pdsch-ConfigMTCH \\
Provides parameters for acquiring the PDSCH for MTCH. The UE shall use parameters in pdsch-ConfigMCCH also for PDSCH of MTCH when this field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
mbs-SessioninfoList \\
Provides the configuration of each MBS session provided by MBS broadcast in the current cell.
\end{tabular} \\
\hline \begin{tabular}{l}
mbs-NeighbourCellList \\
List of neighbour cells providing MBS broadcast services via broadcast MRB. This field is used by the UE together with mtch-NeighbourCell field signalled for MBS session in the corresponding MBS-Session/nfo. When an empty list is signalled, the UE shall assume that MBS broadcast services listed in the MBSBroadcastConfiguration message are not provided via broadcast MRB in any neighbour cell. When the field is absent, the current serving cell does not provide information about MBS broadcast services in the neighbouring cells, i.e. the UE cannot determine the presence or absence of an MBS service in neighbouring cells based on the absence of this field.
\end{tabular} \\
\hline
\end{tabular}

MBSInterestindication
The MBSInterestIndication message is used to inform network that the UE is receiving/ interested to receive or no longer receiving/ interested to receive MBS broadcast service(s) via a broadcast MRB.

Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
MBSInterestindication message
```
-- ASNISTART
-- TAG-MBSINTERESTINDICATION-START
MBSInterestIndication-rl7 ::= SEQUENCE [
    criticalExtensions CHOICE \
        mbsInterestIndication-rl7 MBSInterestIndication-rl7-IEs,
```


ETSI


--- Page 346  ---


3GPP TS 38.331 version 17.0.0 Release 17
345
ETSI TS 138331 V17.0.0 (2022-05)
```
        criticalExtensionsFuture SEQUENCE \}
    }
}
MBSInterestIndication-rl7-IEs ::= SEQUENCE [
    mbs-FreqList-rl7 CarrierFreqListMBS-rl7 OPTIONAL,
    mos-Priority-rl7 ENUMERATED {true} OPTIONAL,
    mbs-ServiceList-rl7 MBS-ServiceList-rl7 OPTIONAL
}
-- TAG-MBSINTERESTINDICATION-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MBSinterestindication field descriptions \\
\hline \begin{tabular}{l}
mbs-FreqList \\
List of MBS frequencies on which the UE is receiving or interested to receive MBS broadcast service via a broadcast MRB.
\end{tabular} \\
\hline \begin{tabular}{l}
mbs-Priority \\
Indicates whether the UE prioritises MBS broadcast reception above unicast and MBS multicast reception. The field is present (i.e. value true), if the UE prioritises reception of all listed MBS frequencies above reception of any of the unicast bearers. Otherwise the field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
mbs-ServiceList \\
List of MBS broadcast services which the UE is receiving or interested to receive.
\end{tabular} \\
\hline
\end{tabular}

MCGFailureInformation
The MCGFailureInformation message is used to provide information regarding NR MCG failures detected by the UE.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
MCGFailureInformation message
```
-- ASNISTART
-- TAG-MCGFAILUREINFORMATION-START
MCGFailureInformation-rl6 ::= SEQUENCE [
    criticalExtensions CHOICE \
        mcgFailureInformation-r16 MCGFailureInformation-rl6-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
```


ETSI


--- Page 347  ---


3GPP TS 38.331 version 17.0.0 Release 17
346
ETSI TS 138331 V17.0.0 (2022-05)
```
MCGFailureInformation-rl6-IEs ::= SEQUENCE \
    failureReportMCG-r16 FailureReportMCG-r16 OPTIONAL,
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
FailureReportMCG-rl6 ::= SEQUENCE \
    failureType-rl6
        ENUMERATED {t310-Expiry, randomAccessProblem, rlc-MaxNumRetx,
                t312-Expiry-rl6, lot-Failure-rl6, beamFailureRecoveryFailure-rl6,
    measResultFreqList-rl6
    measResultFreqListEUTRA-rl6
    measResultSCG-rl6
    measResultSCG-EUTRA-r16
    measResultFreqListUTRA-FDD-rl6
    ...
}
MeasResultList2UTRA ::= SEQUENCE (SIZE (l..maxFreq)) OF MeasResult2UTRA-FDD-rl6
MeasResult2UTRA-FDD-rl6 ::= SEQUENCE \
    carrierFreq-rl6
    measResultNeighCellList-rl6 MeasResultListUTRA-FDD-rl6
}
MeasResultList2EUTRA ::= SEQUENCE (SIZE (l..maxFreq)) OF MeasResult2EUTRA-rl6
-- TAG-MCGFAILUREINFORMATION-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MC GFailurelnformation field descriptions \\
\hline \begin{tabular}{l}
measResultFreqList \\
The field contains available results of measurements on NR frequencies the UE is configured to measure by the measConfig associated with the MCG.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultFreqListEUTRA \\
The field contains available results of measurements on E-UTRA frequencies the UE is configured to measure by measConfig associated with the MCG.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultFreqListUTRA-FDD \\
The field contains available results of measurements on UTRA FDD frequencies the UE is configured to measure by measConfig associated with the MCG.
\end{tabular} \\
\hline \begin{tabular}{l}
measResu/tSCG \\
The field contains the MeasResuitSCG-Failure IE which includes available measurement results on NR frequencies the UE is configured to measure by the measConfig associated with the SCG.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultSCG-EUTRA \\
The field contains the EUTRA MeasResultSCG-FailureMRDC IE which includes available results of measurements on E-UTRA frequencies the UE is configured to measure by the E-UTRA RRCConnectionReconfiguration message as specified in TS 36.331 [10].
\end{tabular} \\
\hline
\end{tabular}
- MeasurementReport

The MeasurementReport message is used for the indication of measurement results.

ETSI


--- Page 348  ---


3GPP TS 38.331 version 17.0.0 Release 17
347
ETSI TS 138331 V17.0.0 (2022-05)

Signalling radio bearer: SRB1, SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
MeasurementReport message
```
-- ASNISTART
-- TAG-MEASUREMENTREPORT-START
MeasurementReport ::=
    criticalExtensions
        measurementReport
        criticalExtensionsFuture
    }
}
MeasurementReport-IEs ::=
    measResults
    lateNonCriticalExtension
    nonCriticalExtension
}
-- TAG-MEASUREMENTREPORT-STOP
-- ASNISTOP
        \mu
    measResults
    nonCriticalExtension
}
    TAG-MEASUREMENTREPORT-STOP
-- ASNISTOP
```

```
SEQUENCE {
    CHOICE {
        MeasurementReport-IEs,
        SEQUENCE {}
```

```
SEQUENCE \
    MeasResults,
        OCTET STRING OPTIONAL,
        SEQUENCE {}
OPTIONAL
```

- MeasurementReportAppLayer

The MeasurementReportAppLayer message is used for sending application layer measurement report.
Signalling radio bearer: SRB4
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
MeasurementReportAppLayer message
```
-- ASNISTART
-- TAG-MEASUREMENTREPORTAPPLAYER-START
MeasurementReportAppLayer-rl7 ::= SEQUENCE [
```


ETSI


--- Page 349  ---


3GPP TS 38.331 version 17.0.0 Release 17
348
ETSI TS 138331 V17.0.0 (2022-05)
```
    criticalExtensions CHOICE {
```

```
        criticalExtensionsFuture SEQUENCE {}
    }
}
MeasurementReportAppLayer-rl7-IEs ::= SEQUENCE [
    measConfigAppLayerId-rl7 MeasConfigAppLayerId-rl7,
```

```
    applayerSessionStatus-rl7 ENUMERATED {started, stopped}
    ran-VisibleMeasurements-rl7
    lateNonCriticalExtension
    OCTET STRING OPTIONAL,
}
RAN-VisibleMeasurements-rl7 := SEQUENCE {
    appLayerBufferLevelList-rl7 SEQUENCE (SIZE (1..8)) OF AppLayerBufferLevel-rl7 OPTIONAL,
```

```
...
}
AppLayerBufferLevel-rl7 ::= INTEGER (0. 30000)
-- TAG-MEASUREMENTREPORTAPPLAYER-STOP
-- ASN1STOP
```


\begin{tabular}{|l|}
\hline MeasurementReportAppLayer field descriptions \\
\hline \begin{tabular}{l}
appLayerBufferLevel \\
Indicates the application layer buffer level in ms. Value 1 corresponds to 10 ms , value 2 corresponds to 20 ms and so on. If the buffer level is larger than the maximum value of 30000 (5 minutes), the UE reports 30000.
\end{tabular} \\
\hline \begin{tabular}{l}
appLayerSessionStatus \\
Indicates that a QoE session in the application layer starts or stops.
\end{tabular} \\
\hline \begin{tabular}{l}
initialPlayoutDelay \\
Indicates the application layer initial playout delay in ms . Value 1 corresponds to 1 ms , value 2 corresponds to 2 ms and so on. If the intial playout delay is larger than the maximum value of 30000 ms , the UE reports 30000 ms .
\end{tabular} \\
\hline \begin{tabular}{l}
measReportAppLayerContainer \\
The field contains application layer measurements, see Annex L (normative) in TS 26.247 [68], clause 16.5 in TS 26.114 [69] and TS 26.118 [70].
\end{tabular} \\
\hline \begin{tabular}{l}
pdu-SessionidList \\
Contains the identity of the PDU session, or the identities of the PDU sessions, used for application data flows subject to the RAN visible application layer measurements.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) MIB

The MIB includes the system information transmitted on BCH.

ETSI


--- Page 350  ---


3GPP TS 38.331 version 17.0.0 Release 17
349
ETSI TS 138331 V17.0.0 (2022-05)

Signalling radio bearer: N/A
RLC-SAP: TM
Logical channel: BCCH
Direction: Network to UE
MIB
```
-- ASNISTART
-- TAG-MIB-START
MIB ::=
    systemFrameNumber
    subCarrierSpacingCommon
    ssb-SubcarrierOffset
    dmrs-TypeA-Position
    pdech-ConfigSIBl
    cellBarred.
    intraFreqReselection
    spare
}
-- TAG-MIB-STOP
-- ASNISTOP
```

```
SEQUENCE \
    BIT STRING (SIZE (6)),
    ENUMERATED {scsl5or60, scs30or120},
    INTEGER (0..15),
    ENUMERATED {pos2, pos3},
    PDCCH-ConfigSIBl,
    ENUMERATED {barred, notBarred},
    ENUMERATED {allowed, notAllowed},
    BIT STRING (SIZE (1))
```


ETSI


--- Page 351  ---


3GPP TS 38.331 version 17.0.0 Release 17
350
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MIB field descriptions \\
\hline \begin{tabular}{l}
cellBarred \\
Value barred means that the cell is barred, as defined in TS 38.304 [20]. This field is ignored by IAB-MT.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-TypeA-Position \\
Position of (first) DM-RS for downlink (see TS 38.211 [16], clause 7.4.1.1.2) and uplink (see TS 38.211 [16], clause 6.4.1.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
intraFreqReselection \\
Controls cell selection/reselection to intra-frequency cells when the highest ranked cell is barred, or treated as barred by the UE, as specified in TS 38.304 [20]. This field is ignored by IAB-MT.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcch-ConfigSIB1 \\
Determines a common ControlResourceSet (CORESET), a common search space and necessary PDCCH parameters. If the field ssb-SubcarrierOffset indicates that SIB1 is absent, the field pdcch-ConfigS/B1 indicates the frequency positions where the UE may find SS/PBCH block with SIB1 or the frequency range where the network does not provide SS/PBCH block with SIB1 (see TS 38.213 [13], clause 13).
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-SubcarrierOffset \\
Corresponds to ksse (see TS 38.213 [13]), which is the frequency domain offset between SSB and the overall resource block grid in number of subcarriers. (See TS 38.211 [16], clause 7.4.3.1). For operation with shared spectrum channel access (see 37.213 [48]), this field corresponds to \( \bar{k}_{\mathrm{SSB}} \), and \( \mathrm{k}_{\mathrm{ssB}} \) is obtained from \( \bar{k}_{\mathrm{SSB}} \) (see TS 38.211 [16], clause 7.4.3.1); the LSB of this field is used also for deriving the QCL relation between SS/PBCH blocks as specified in TS 38.213 [13], clause 4.1. \\
The value range of this field may be extended by an additional most significant bit encoded within PBCH as specified in TS 38.213 [13]. \\
This field may indicate that this cell does not provide S/B1 and that there is hence no CORESET\#0 configured in M/B (see TS 38.213 [13], clause 13). In this case, the field pdcch-ConfigSIB1 may indicate the frequency positions where the UE may (not) find a SS/PBCH with a control resource set and search space for SIB1 (see TS 38.213 [13], clause 13).
\end{tabular} \\
\hline \begin{tabular}{l}
subCarrierSpacingCommon \\
Subcarrier spacing for SIB1, Msg.2/4 and MsgB for initial access, paging and broadcast SI-messages. If the UE acquires this MIB on an FR1 carrier frequency, the value scs 150 or 60 corresponds to 15 kHz and the value scs 30 or 120 corresponds to 30 kHz . If the UE acquires this M/B on an FR2 carrier frequency, the value scs 150 or 60 corresponds to 60 kHz and the value scs30or120 corresponds to 120 kHz . For operation with shared spectrum channel access in FR1 (see 37.213 [48]) and for operation in FR2-2, the subcarrier spacing for SIB1, Msg.2/4 and MsgB for initial access, paging and broadcast SI-messages is same as that for the corresponding SSB. For operation with shared spectrum channel access, this field instead is used for deriving the QCL relation between SS/PBCH blocks as specified in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
systemFrameNumber \\
The 6 most significant bits (MSB) of the 10-bit System Frame Number (SFN). The 4 LSB of the SFN are conveyed in the PBCH transport block as part of channel coding (i.e. outside the M/B encoding), as defined in clause 7.1 in TS 38.212 [17].
\end{tabular} \\
\hline
\end{tabular}
- MobilityFromNRCommand

The MobilityFromNRCommand message is used to command handover from NR to E-UTRA/EPC, E-UTRA/5GC or UTRA-FDD.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
MobilityFromNRCommand message

-- ASNISTART
ETSI


--- Page 352  ---


3GPP TS 38.331 version 17.0.0 Release 17
351
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-MOBILITYFROMNRCOMMAND-START
```
MobilityFromNRCommand ::=
    rrc-TransactionIdentifier
    criticalExtensions
        mobilityFromNRCommand.
        criticalExtensionsFuture
    }
}
```


MobilityFromNRCommand-IEs : :=
-- TAG-MOBILITYEROMNRCOMMAND-STOP
-- ASNISTOP
```
    targetRAT-Type
    targetRAT-MessageContainer
    nas-SecurityParamFromNR
    lateNonCriticalExtension
    nonCriticalExtension
}
MobilityFromNRCommand-vl610-IEs ::=
    voiceFallbackIndication-rl6
    nonCriticalExtension
}
}
}
l
```

```
SEQUENCE \
    RRC-TransactionIdentifier,
    CHOICE [
        MobilityFromNRCommand-IEs,
        SEQUENCE {}
```

SEQUENCE 1
    ENUMERATED \{ eutra, utra-fdd-vl610, spare2, sparel, ...\},
    OCTET STRING,
    OCTET STRING OPTIONAL, -- COND HO-TOEPCUTRAN
    OCTET STRING OPTIONAL,
    MobilityFromNRCommand-vl610-IEs OPTIONAL
    SEQUENCE 1
        ENUMERATED \{true\} OPTIONAL, -- Need N
        SEQUENCE \{\} OPTIONAL
OPTIONAL
OPTIONAL
-- Cond HO-TOEPCUTRAN
    MobilityFromNRCommand-vl610-IEs
            䏆

OPTIONAL, -- Need N
OPTIONAL

\begin{tabular}{|l|}
\hline MobilityFromNRCommand-IEs field descriptions \\
\hline \begin{tabular}{l}
nas-SecurityParamFromNR \\
If targetRAT-Type is eutra, this field is used to deliver the key synchronisation and Key freshness for the NR to LTE/EPC handovers and a part of the downlink NAS COUNT as specified in TS 33.501 [11]. If targetRAT-Type is utra-fdd, this field is used to deliver the key synchronisation and Key freshness for the NR to FDD UTRAN handover and a part of the downlink NAS COUNT as specified in TS 33.501 [11].
\end{tabular} \\
\hline \begin{tabular}{l}
targetRAT-MessageContainer \\
The field contains a message specified in another standard, as indicated by the targetRAT-Type, and carries information about the target cell identifier(s) and radio parameters relevant for the target radio access technology. A complete message is included, as specified in the other standard. See NOTE 1
\end{tabular} \\
\hline \begin{tabular}{l}
targetRAT-Type \\
Indicates the target RAT type.
\end{tabular} \\
\hline \begin{tabular}{l}
voiceFallbackindication \\
Indicates the handover is triggered by EPS fallback for IMS voice as specified in TS 23.502 [43].
\end{tabular} \\
\hline
\end{tabular}

\begin{table}
\captionsetup{labelformat=empty}
\caption{NOTE 1: The correspondence between the value of the targetRAT-Type, the standard to apply, and the message contained within the targetRAT-MessageContainer is shown in the table below:}
\begin{tabular}{|l|l|l|}
\hline \multicolumn{1}{|c|}{ targetRAT-Type } & \multicolumn{1}{c|}{ Standard to apply } & \multicolumn{1}{c|}{ targetRAT-MessageContainer } \\
\hline eutra & TS 36.331 [10] (clause 5.4.2) & DL-DCCH-Message including the RRCConnectionReconfiguration \\
\hline utra-fdd & TS 25.331 [45] (clause 10.2.16a) & Handover TO UTRAN command \\
\hline
\end{tabular}
\end{table}

ETSI


--- Page 353  ---


3GPP TS 38.331 version 17.0.0 Release 17
352
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline HO-ToEPCUTRAN & This field is mandatory present in case of inter system handover to "EPC" or "FDD UTRAN". Otherwise it is absent. \\
\hline
\end{tabular}
- Paging

The Paging message is used for the notification of one or more UEs.
Signalling radio bearer: N/A
RLC-SAP: TM
Logical channel: PCCH
Direction: Network to UE
Paging message
```
-- ASNISTART
-- TAG-PAGING-START
Paging ::=
    pagingRecordList
    lateNonCriticalExtension
    nonCriticalExtension
}
Paging-vl700-IEs ::=
    pagingRecordList-vl700
    pagingGroupList-rl7
    nonCriticalExtension
}
PagingRecordList ::= SEQUENCE (SIZE(l..maxNrofPageRec)) OF PagingRecord
PagingRecordList-vl700 ::= SEQUENCE (SIZE(l..maxNrofPageRec)) OF PagingRecord-vl700
PagingGroupList-rl7 ::= SEQUENCE (SIZE(l..maxNrofPageGroup-rl7)) OF TMGI-rl7
PagingRecord ::= SEQUENCE \
    ue-Identity
    accessType
    ...
}
PagingRecord-vl700 ::= SEQUENCE {
    pagingCause-rl7
}
PagingUE-Identity ::= CHOICE \
```


SEQUENCE [
```
    ENCE \
    PagingRecordList OPTIONAL, -- Need. N
    OCTET STRING
    Paging-vl700-IEs
SEQUENCE \
    PagingRecordList-vl700 OPTIONAL, -- Need. N
    PagingGroupList-rl7 OPTIONAL,
    SEQUENCE {} OPTIONAL
SEQUENCE (SIZE(l..maxNrofPageRec)) OF PagingRecord
SEQUENCE (SIZE(l..maxNrofPageRec)) OF PagingRecord-vl700
SEQUENCE (SIZE(l..maxNrofPageGroup-rl7)) OF TMGI-rl7
    PagingUE-Identity,
    ENUMERATED {non3GPP} OPTIONAL, -- Need N
    ENUMERATED {voice} OPTIONAL -- Need. N
    bloges)
CHOICE \
```


ETSI


--- Page 354  ---


3GPP TS 38.331 version 17.0.0 Release 17
353
ETSI TS 138331 V17.0.0 (2022-05)
```
    ng-5G-S-TMSI NG-5G-S-TMSI,
    fullI-RNTI I-RNTI-Value,
}
-- TAG-PAGING-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PagingRecord field descriptions \\
\hline \begin{tabular}{l}
access Type \\
Indicates whether the Paging message is originated due to the PDU sessions from the non-3GPP access.
\end{tabular} \\
\hline \begin{tabular}{l}
pagingRecordList \\
If the network includes pagingRecordList-v1700, it includes the same number of entries, and listed in the same order, as in pagingRecordList (i.e. without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
pagingCause \\
Indicates whether the Paging message is originated due to IMS voice. If this field is present and upper layers indicate the support of paging cuase, it implies that the corresponding paging entry is for IMS voice. If this field is not present but pagingRecordList-v1700 is present, it implies that the corresponding paging entry is for a service other than IMS voice. Otherwise, pagingCause is undetermined.
\end{tabular} \\
\hline
\end{tabular}
- RRCReestablishment

The RRCRestablishment message is used to re-establish SRB1.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
RRCReestablishment message
```
-- ASNISTART
-- TAG-RRCREESTABLISHMENT-START
RRCReestablishment ::= SEQUENCE \
    rrc-TransactionIdentifier
    criticalExtensions
        rrcReestablishment
        RRCReestablishment-IEs,
    }
}
RRCReestablishment-IEs ::= SEQUENCE \
    nextHopChainingCount
    lateNonCriticalExtension
    nonCriticalExtension
    RRC-TransactionIdentifier,
    CHOICE \
        RRCReestablishment-IEs,
        SEQUENCE {}
        STRING OPTIONAL,
```


ETSI


--- Page 355  ---


3GPP TS 38.331 version 17.0.0 Release 17
354
ETSI TS 138331 V17.0.0 (2022-05)
```
}
RRCReestablishment-vl700-IEs ::=
    sl-ConfigDedicatedNR-rl7
    sl-L2RemoteUEConfig-rl7
    nonCriticalExtension
}
-- TAG-RRCREESTABLISHMENT-STOP
-- ASNISTOP
}
```

```
SEQUENCE \
    SetupRelease {SL-ConfigDedicatedNR-r16} OPTIONAL, -- Cond L2RemoteUE
    SetupRelease {SL-L2RemoteUEConfig-rl7} OPTIONAL, -- Cond L2RemoteUE
    SEQUENCE {} OPTIONAL
```


\begin{tabular}{|l|}
\hline RRCReestablishment-IEs field descriptions \\
\hline \begin{tabular}{l}
s/-ConfigDedicatedNR \\
The network configures only the PC5 Relay RLC channel and sl-PHY-MAC-RLC-Config for the SRB1.
\end{tabular} \\
\hline \begin{tabular}{l}
s/-L2RemoteUEConfig \\
The network configures only the si-ServingCellinfo and SRAP configuration for the SRB1.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline L2RemoteUE & The field is mandatory present for L2 U2N Remote UE, need M; otherwise it is absent. \\
\hline
\end{tabular}
- RRCReestablishmentComplete

The RRCRestablishmentComplete message is used to confirm the successful completion of an RRC connection re-establishment.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
RRCReestablishmentComplete message
```
-- ASNISTART
-- TAG-RRCREESTABLISHMENTCOMPLETE-START
RRCReestablishmentComplete ::= SEQUENCE \
    rrc-TransactionIdentifier
    criticalExtensions
        rrcReestablishmentComplete
        criticalExtensionsFuture
    }
}
RRCReestablishmentComplete-IEs ::= SEQUENCE {
```


ETSI


--- Page 356  ---


3GPP TS 38.331 version 17.0.0 Release 17
355
ETSI TS 138331 V17.0.0 (2022-05)
```
    lateNonCriticalextension OCTET STRING OPTIONAL,
    nonCriticalExtension RRCReestablishmentComplete-vl610-IEs OPTIONAL
}
RRCReestablishmentComplete-vl6l0-IEs ::= SEQUENCE {
    ue-MeasurementsAvailable-rl6
    nonCriticalExtension
}
-- TAG-RRCREESTABLISHMENTCOMPLETE-STOP
-- ASNISTOP
```

- \( \quad \) RRCReestablishmentRequest

The RRCReestablishmentRequest message is used to request the reestablishment of an RRC connection.
Signalling radio bearer: SRB0
RLC-SAP: TM
Logical channel: CCCH
Direction: UE to Network
RRCReestablishmentRequest message
```
-- ASNISTART
-- TAG-RRCREESTABLISHMENTREQUEST-START
RRCReestablishmentRequest ::= SEQUENCE {
    rrcReestablishmentRequest RRCReestablishmentRequest-IEs
}
RRCReestablishmentRequest-IEs ::= SEQUENCE {
    ue-Identity
    ReestabUE-Identity,
    spare BIT STRING (SIZE (1))
}
ReestabUE-Identity ::= SEQUENCE {
    c-RNTI
    RNTI-Value,
    shrellellefle
}
ReestablishmentCause ::= ENUMERATED {reconfigurationFailure, handoverFailure, otherFailure, sparel}
-- TAG-RRCREESTABLISHMENTREQUEST-STOP
-- ASNISTOP
```


ETSI


--- Page 357  ---


3GPP TS 38.331 version 17.0.0 Release 17
356
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ReestabUE-Identity field descriptions \\
\hline \begin{tabular}{l}
physCellid \\
The Physical Cell Identity of the PCell the UE was connected to prior to the failure.
\end{tabular} \\
\hline
\end{tabular}

The RRCReconfiguration message is the command to modify an RRC connection. It may convey information for measurement configuration, mobility control, radio resource configuration (including RBs, MAC main configuration and physical channel configuration) and AS security configuration.

Signalling radio bearer: SRB1 or SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
RRCReconfiguration message
```
SEQUENCE \
    RRC-TransactionIdentifier,
    CHOICE l
        RRCReconfiguration-IEs,
        SEQUENCE {}
        SEQUENCE {}
```


\begin{tabular}{|l|}
\hline RRCReestablishmentRequest-IEs field descriptions \\
\hline \begin{tabular}{l}
reestablishmentCause \\
Indicates the failure cause that triggered the re-establishment procedure. gNB is not expected to reject a RRCReestablishmentRequest due to unknown cause value being used by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
ue-Identity \\
UE identity included to retrieve UE context and to facilitate contention resolution by lower layers.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RRCReconfiguration

RRCReconfiguration
configuration (including RBs, MAC main configuration and physical channel configuration) and AS security configuration.
"
    RLC-SAP: AM
    Logical channel: DCCH
    Direction: Network to UE

RRCReconfiguration message
```
-- ASNISTART
-- TAG-RRCRECONFIGURATION-START
```


RRCReconfiguration : :=
rrc-TransactionIdentifier
criticalExtensions
rrcReconfiguration
criticalExtensionsFuture
\}
\}

RRCReconfiguration-IEs : :=
radioBearerConfig
secondaryCellGroup
measConfig
lateNonCriticalExtension
nonCriticalExtension
\}
Reconfiguration-IEs : :=
```
        criticalExtensionsFuture
    }
}
    secondaryCellGroup
    measConfig
        lateNonCriticalExtension
    nonCriticalExtension
}
--
-- TAG-RRCRECONFIGURATION-START
        rrc-TransactionIdentifier
        criticalExtensions
                criticalExtensionsFuture
```

                                                                        I
        RadioBearerConfig OPTIONAL, -- Need M
        OCTET STRING (CONTAINING CellGroupConfig)
        MeasConfig
        OCTET STRING
        RRCReconfiguration-vl530-IEs
```
OPTIONAL, -- Need. M
OPTIONAL, -- Cond SCG
OPTIONAL, -- Need. M
OPTIONAL,
OPTIONAL
```


ETSI


--- Page 358  ---


3GPP TS 38.331 version 17.0.0 Release 17
357
ETSI TS 138331 V17.0.0 (2022-05)
```
RRCReconfiguration-vl530-IEs ::= SEQUENCE \
    masterCellGroup
    fullConfig
    dedicatedNAS-MessageList
    masterKeyUpdate
MasterKeyChange
    dedicatedSIBl-Delivery
    dedicatedSystemInformationDelivery
    otherConfig
    nonCriticalExtension
}
RRCReconfiguration-vl540-IEs ::=
    otherConfig-vl540
    nonCriticalExtension
}
RRCReconfiguration-vl560-IEs ::=
    mrdc-SecondaryCellGroupConfig
    radioBearerConfig2
    sk-Counter
    nonCriticalExtension
}
RRCReconfiguration-vl6lO-IEs ::= SEQUENCE \
    otherConfig-vl610
    bap-Config-rl6
    iab-IP-AddressConfigurationList-r16
    conditionalReconfiguration-r16
    daps-SourceRelease-rl6
    t316-r16
    needForGapsConfigNR-rl6
    onDemandSIB-Request-r16
    dedicatedPosSysInfoDelivery-r16
    sl-ConfigDedicatedNR-rl6
    sl-ConfigDedicatedEUTRA-Info-rl6
    targetCellSMTC-SCG-rl6
    nonCriticalExtension
}
RRCReconfiguration-vl700-IEs ::= SEQUENCE [
    otherConfig-vl700
    ul-GapFR2-Config-rl7
    sl-L2RelayUEConfig-rl7
    sl-L2RemoteUEConfig-rl7
    dedicatedPagingDelivery-rl7
    needForNCSG-ConfigNR-rl7
    needForNCSG-ConfigEUTRA-rl7
    musim-GapConfig-rll
    scg-State-rll
    appLayerMeasConfig-rl7
    nonCriticalExtension
}
```

```
SEQUENCE \
OCTET STRING (CONTAINING CellGroupConfig)
ENUMERATED {true}
SEQUENCE (SIZE(1..maxDRB)) OF DedicatedNAS-Message
MasterKeyUpdate
OCTET STRING (CONTAINING SIBl)
OCTET STRING (CONTAINING SystemInformation)
OtherConfig
RRCReconfiguration-vl540-IEs
```

```
EQUENCE \
OtherConfig-vl540
RRCReconfiguration-vl560-IEs
SEQUENCE {
SetupRelease { MRDC-SecondaryCellGroupConfig }
OCTET STRING (CONTAINING RadioBearerConfig)
SK-Counter
RRCReconfiguration-vl610-IEs
therConfig-vl610
SetupRelease { BAP-Config-rl6}}
IAB-IP-AddressConfigurationList-r16
ConditionalReconfiguration-rl6
ENUMERATED{true}
SetupRelease {T316-r16}
SetupRelease {NeedForGapsConfigNR-r16}
SetupRelease { OnDemandSIB-Request-rl6 }
OCTET STRING (CONTAINING PosSystemInformation-rl6-IEs)
SetupRelease {SL-ConfigDedicatedNR-r16}
SetupRelease {SL-ConfigDedicatedEUTRA-Info-rl6}
SSB-MTC
RRCReconfiguration-vl700-IEs

OPTIONAL, -- Need. M
OPTIONAL, -- Cond. EullConfig
OPTIONAL, -- Cond. nonHO
OPTIONAL, -- Cond.
OPTIONAL, -- Need. N
OPTIONAL, -- Need. N
OPTIONAL, -- Need. M
OPTIONAL
OPTIONAL, -- Need. M
OPTIONAL
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. N
OPTIONAL
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. N
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. N
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. S
OPTIONAL
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Cond L2RelayUE
OPTIONAL, -- Cond L2RemoteUE
OPTIONAL, -- L2U2NRelay
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. S
OPTIONAL, -- Need. M
OPTIONAL
```


ETSI


--- Page 359  ---


3GPP TS 38.331 version 17.0.0 Release 17
358
ETSI TS 138331 V17.0.0 (2022-05)
```
MRDC-SecondaryCellGroupConfig ::=
    mrdc-ReleaseAndAdd.
    mrdc-SecondaryCellGroup
        nr-SCG
        eutra-SCG
    }
}
BAP-Config-rl6 ::=
    bap-Address-rl6
    defaultUL-BAP-RoutingID-r16
    defaultUL-BH-RLC-Channel-rl6
    flowControlFeedbackType-rl6
...
}
MasterKeyUpdate ::= SEQUENCE \
    keySetChangeIndicator BOOLEAN,
    nextHopChainingCount NextHopChainingCount,
    nas-Container OCTET STRINO
    ...
}
OndemandSIB-Request-rl6 ::= SEQUENCE {
    onDemandSIB-RequestProhibitTimer-r16 ENUMERATED {s0, s0dot5, sl, s2, s5, s10, s20, s30}
}
T316-r16 := ENUMERATED {ms50, ms100, ms200, ms300, ms400, ms500, ms600, ms1000, ms1500, ms2000}
IAB-IP-AddressConfigurationList-r16 ::= SEQUENCE {
```

```
    ...
}
IAB-IP-AddressConfiguration-r16 := SEQUENCE \
    iab-IP-AddressIndex-r16 IAB-IP-AddressIndex-r16,
```

```
    iab-donor-DU-BAP-Address-r16 BIT STRING (SIZE(10))
\text { ⋯}
}
SL-ConfigDedicatedEUTRA-Info-rl6 ::= SEQUENCE {
    sl-ConfigDedicatedEUTRA-r16
    sl-TimeOffsetEUTRA-List-rl6
}
```

```
                ms2, ms2dot5, ms3, ms4, ms5, ms6, ms8, ms10, ms20}
-- TAG-RRCRECONFIGURATION-STOP
-- ASN1STOP
```


ETSI


--- Page 360  ---


3GPP TS 38.331 version 17.0.0 Release 17
359
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RRCReconfiguration-IEs field descriptions \\
\hline \begin{tabular}{l}
bap-Config \\
This field is used to configure the BAP entity for IAB nodes.
\end{tabular} \\
\hline \begin{tabular}{l}
bap-Address \\
Indicates the BAP address of an IAB-node. The BAP address of an IAB-node cannot be changed once configured to the BAP entity.
\end{tabular} \\
\hline \begin{tabular}{l}
conditionalReconfiguration \\
Configuration of candidate target SpCell(s) and execution condition(s) for conditional handover, conditional PSCell addition or conditional PSCell change. The field is absent if any DAPS bearer is configured or if the masterCellGroup includes ReconfigurationWithSync. For conditional PSCell change, the field is absent if the secondaryCellGroup includes ReconfigurationWithSync. The RRCReconfiguration message contained in DLinformation TransferMRDC cannot contain the field conditionalReconfiguration for conditional PSCell change and conditional PSCell addition.
\end{tabular} \\
\hline \begin{tabular}{l}
daps-SourceRelease \\
Indicates to UE that the source cell part of DAPS operation is to be stopped and the source cell part of DAPS configuration is to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
dedicatedNAS-MessageList \\
This field is used to transfer UE specific NAS layer information between the network and the UE. The RRC layer is transparent for each PDU in the list.
\end{tabular} \\
\hline \begin{tabular}{l}
dedicatedPagingDelivery \\
This field is used to transfer Paging message to the L2 Relay UE in RRC_CONNECTED.
\end{tabular} \\
\hline \begin{tabular}{l}
dedicatedPosSysinfoDelivery \\
This field is used to transfer SIBPos to the UE in RRC_CONNECTED.
\end{tabular} \\
\hline \begin{tabular}{l}
dedicatedSIB1-Delivery \\
This field is used to transfer SIB1 to the UE. The field has the same values as the corresponding configuration in serving CellConfigCommon.
\end{tabular} \\
\hline \begin{tabular}{l}
dedicatedSysteminformationDelivery \\
This field is used to transfer SIB6, SIB7, SIB8 to the UE with an active BWP with no common serach space configured. For UEs in RRC_CONNECTED, this field is used to transfer the SIBs requested on-demand.
\end{tabular} \\
\hline \begin{tabular}{l}
defaultUL-BAP-RoutingID \\
This field is used for IAB-node to configure the default uplink Routing ID, which is used by IAB-node during IAB-node bootstrapping, migration, IAB-MT RRC resume and IABMT RRC re-establishment for F1-C and non-F1 traffic. The defaultUL-BAP-RoutingID can be (re-)configured when IAB-node IP address for F1-C related traffic changes. This field is mandatory only for IAB-node bootstrapping.
\end{tabular} \\
\hline \begin{tabular}{l}
defaultUL-BH-RLC-Channel \\
This field is used for IAB-nodes to configure the default uplink BH RLC channel, which is used by IAB-node during IAB-node bootstrapping, migration, IAB-MT RRC resume and IAB-MT RRC re-establishment for F1-C and non-F1 traffic. The defaultUL-BH-RLC-Channel can be (re-)configured when IAB-node IP address for F1-C related traffic changes, and the new IP address is anchored at a different IAB-donor-DU. This field is mandatory for IAB-node bootstrapping. If the IAB-MT is operating in EN-DC, the default uplink BH RLC channel is referring to an RLC channel on the SCG; Otherwise, it is referring to an RLC channel on the MCG.
\end{tabular} \\
\hline \begin{tabular}{l}
flowControlFeedbackType \\
This field is only used for IAB-node that support hop-by-hop flow control to configure the type of flow control feedback. Value perBH-RLC-Channel indicates that the IAB-node shall provide flow control feedback per BH RLC channel, value perRoutingID indicates that the IAB-node shall provide flow control feedback per routing ID, and value both indicates that the IAB-node shall provide flow control feedback both per BH RLC channel and per routing ID.
\end{tabular} \\
\hline \begin{tabular}{l}
fullConfig \\
Indicates that the full configuration option is applicable for the RRCReconfiguration message for intra-system intra-RAT HO. For inter-RAT HO from E-UTRA to NR, fullConfig indicates whether or not delta signalling of SDAP/PDCP from source RAT is applicable. This field is absent if any DAPS bearer is configured or when the RRCReconfiguration message is transmitted on SRB3, and in an RRCReconfiguration message for SCG contained in another RRCReconfiguration message (or RRCConnectionReconfiguration message, see TS 36.331 [10]) transmitted on SRB1.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-IP-Address \\
This field is used to provide the IP address information for IAB-node.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-IP-Addressindex \\
This field is used to identify a configuration of an IP address.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-IP-Address ToAddModList \\
List of IP addresses allocated for IAB-node to be added and modified.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 361  ---


3GPP TS 38.331 version 17.0.0 Release 17
360
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
iab-IP-AddressToReleaseList \\
List of IP address allocated for IAB-node to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
lab-IP-Usage \\
This field is used to indicate the usage of the assigned IP address. If this field is not configured, the assigned IP address is used for all traffic.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-donor-DU-BAP-Address \\
This field is used to indicate the BAP address of the IAB-donor-DU where the IP address is anchored.
\end{tabular} \\
\hline \begin{tabular}{l}
keySetChangeIndicator \\
Indicates whether UE shall derive a new \( \mathrm{K}_{\mathrm{gNB}} \). If reconfigurationWithSync is included, value true indicates that a \( \mathrm{K}_{\mathrm{gNB}} \) key is derived from a \( \mathrm{K}_{\mathrm{amF}} \) key taken into use through the latest successful NAS SMC procedure, or N2 handover procedure with Kamf change, as described in TS 33.501 [11] for \( \mathrm{K}_{\mathrm{gNb}} \) re-keying. Value false indicates that the new \( \mathrm{K}_{\mathrm{gNB}} \) key is obtained from the current Kgne key or from the NH as described in TS 33.501 [11].
\end{tabular} \\
\hline \begin{tabular}{l}
masterCellGroup \\
Configuration of master cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
mrdc-ReleaseAndAdd \\
This field indicates that the current SCG configuration is released and a new SCG is added at the same time.
\end{tabular} \\
\hline \begin{tabular}{l}
mrdc-SecondaryCellGroup \\
Includes an RRC message for SCG configuration in NR-DC or NE-DC. \\
For NR-DC (nr-SCG), mrdc-SecondaryCellGroup contains the RRCReconfiguration message as generated (entirely) by SN gNB. In this version of the specification, the RRC message can only include fields secondaryCellGroup, otherConfig, conditionalReconfiguration, measConfig and bap-Config. \\
For NE-DC (eutra-SCG), mrdc-SecondaryCellGroup includes the E-UTRA RRCConnectionReconfiguration message as specified in TS 36.331 [10]. In this version of the specification, the E-UTRA RRC message can only include the field scg-Configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapConfig \\
Indicates the MUSIM gap configuration and controls setup/release of MUSIM gaps.
\end{tabular} \\
\hline \begin{tabular}{l}
nas-Container \\
This field is used to transfer UE specific NAS layer information between the network and the UE. The RRC layer is transparent for this field, although it affects activation of AS security after inter-system handover to NR. The content is defined in TS 24.501 [23].
\end{tabular} \\
\hline \begin{tabular}{l}
needForGapsConfigNR \\
Configuration for the UE to report measurement gap requirement information of NR target bands in the RRCReconfigurationComplete and RRCResumeComplete message.
\end{tabular} \\
\hline \begin{tabular}{l}
needForNCSG-ConfigEUTRA \\
Configuration for the UE to report measurement gap and NCSG requirement information of E-UTRA target bands in the RRCReconfigurationComplete and \\
RRCResumeComplete message.
\end{tabular} \\
\hline \begin{tabular}{l}
needForNCSG-ConfigNR \\
Configuration for the UE to report measurement gap and NCSG requirement information of NR target bands in the RRCReconfigurationComplete and RRCResumeComplete message.
\end{tabular} \\
\hline \begin{tabular}{l}
nextHopChainingCount \\
Parameter NCC: See TS 33.501 [11]
\end{tabular} \\
\hline \begin{tabular}{l}
onDemandSIB-Request \\
If the field is present, the UE is allowed to request SIB(s) on-demand while in RRC_CONNECTED according to clause 5.2.2.3.5.
\end{tabular} \\
\hline \begin{tabular}{l}
onDemandSIB-RequestProhibitTimer \\
Prohibit timer for requesting SIB(s) on-demand while in RRC_CONNECTED according to clause 5.2.2.3.5. Value in seconds. Value s0 means prohibit timer is set to 0 seconds, value s0dot5 means prohibit timer is set to 0.5 seconds, value s1 means prohibit timer is set to 1 second and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
otherConfig \\
Contains configuration related to other configurations. When configured for the SCG, only fields drx-PreferenceConfig, maxBW-PreferenceConfig, maxBW-PreferenceConfigFR2-2, maxCC-PreferenceConfig, maxMIMO-LayerPreferenceConfig, maxMIMO-LayerPreferenceConfigFR2-2, minSchedulingOffsetPreferenceConfig, minSchedulingOffsetPreferenceConfigExt, btNameList, wanNameList, sensorNameList and obtainCommonLocation can be included.
\end{tabular} \\
\hline \begin{tabular}{l}
radioBearerConfig \\
Configuration of Radio Beares (DRBs, SRBs, multicast MRBs) including SDAP/PDCP. In EN-DC this field may only be present if the RRCReconfiguration is transmitted over SRB3.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 362  ---


3GPP TS 38.331 version 17.0.0 Release 17
361
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
radioBearerConfig2 \\
Configuration of Radio Bearers (DRBs, SRBs) including SDAP/PDCP. This field can only be used if the UE supports NR-DC or NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
scg-State \\
Indicates that the SCG is in deactivated state. This field is not used in an RRCReconfiguration message received within mrdc-SecondaryCellGroup, E-UTRA RRCConnectionReconfiguration or E-UTRA RRCConnectionResume message. The field is absent if CPA or CPC is configured for the UE, or if the RRCReconfiguration message is contained in CondRRCReconfig.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-L2RelayUEConfig \\
Contains L2 U2N relay operation related configurations used by L2 U2N Relay UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-L2RemoteUEConfig \\
Contains L2 U2N relay operation related configurations used by L2 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
secondaryCellGroup \\
Configuration of secondary cell group ((NG)EN-DC or NR-DC).
\end{tabular} \\
\hline \begin{tabular}{l}
sk-Counter \\
A counter used upon initial configuration of S-Kgnb or S-Kenb, as well as upon refresh of S-Kgnb or S-Kenb. This field is always included either upon initial configuration of an NR SCG or upon configuration of the first RB with keyToUse set to secondary, whichever happens first. This field is absent if there is neither any NR SCG nor any RB with keyToUse set to secondary.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ConfigDedicatedNR \\
This field is used to provide the dedicated configurations for NR sidelink communication/discovery.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-ConfigDedicatedEUTRA-Info \\
This field includes the E-UTRA RRCConnectionReconfiguration as specified in TS 36.331 [10]. In this version of the specification, the E-UTRA RRCConnectionReconfiguration can only includes sidelink related fields for V2X sidelink communication, i.e. si-V2X-ConfigDedicated, si-V2X-SPS-Config, measConfig and/or otherConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TimeOffsetEUTRA \\
This field indicates the possible time offset to (de)activation of V2X sidelink transmission after receiving DCI format 3_1 used for scheduling V2X sidelink communication. Value msOdpt75 corresponds to \( 0.75 \mathrm{~ms}, \mathrm{~ms} 1 \) corresponds to 1 ms and so on. The network includes this field only when si-ConfigDedicatedEUTRA is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
targetCellSMTC-SCG \\
The SSB periodicity/offset/duration configuration of target cell for NR PSCell addition and SN change. When UE receives this field, UE applies the configuration based on the timing reference of NR PCell for PSCell addition and PSCell change for the case of no reconfiguration with sync of MCG, and UE applies the configuration based on the timing reference of target NR PCell for the case of reconfiguration with sync of MCG. If both this field and the smtc in secondaryCellGroup → SpCellConfig \( -> \) reconfigurationWithSync are absent, the UE uses the SMTC in the measObjectNR having the same SSB frequency and subcarrier spacing, as configured before the reception of the RRC message.
\end{tabular} \\
\hline \begin{tabular}{l}
t316 \\
Indicates the value for timer T316 as described in clause 7.1 . Value \( m s 50 \) corresponds to 50 ms , value \( m s 100 \) corresponds to 100 ms and so on. This field can be configured only if the UE is configured with split SRB1 or SRB3.
\end{tabular} \\
\hline \begin{tabular}{l}
ul-GapFR2-Config-r17 \\
Indicates the FR2 UL gap configuration to UE. In EN-DC and NGEN-DC, the SN decides and configures the FR2 UL gap pattern. In NE-DC, the MN decides and configures the FR2 UL gap pattern. In NR-DC without FR2-FR2 band combination, the network entity which configures FR2 bands to UE decides and configures the FR2 UL gap pattern.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 363  ---


3GPP TS 38.331 version 17.0.0 Release 17
362
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline nonHO & The field is absent in case of reconfiguration with sync within NR or to NR; otherwise it is optionally present, need N. \\
\hline securityNASC & This field is mandatory present in case of inter system handover. Otherwise the field is optionally present, need N . \\
\hline MasterKeyChange & This field is mandatory present in case masterCellGroup includes ReconfigurationWithSync and RadioBearerConfig includes SecurityConfig with SecurityAlgorithm Config, indicating a change of the AS security algorithms associated to the master key. If ReconfigurationWithSync is included for other cases, this field is optionally present, need N. Otherwise the field is absent. \\
\hline FullConfig & The field is mandatory present in case of inter-system handover from E-UTRA/EPC to NR. It is optionally present, Need N, during reconfiguration with sync and also in first reconfiguration after reestablishment; or for intra-system handover from EUTRA/5GC to NR. It is absent otherwise. \\
\hline SCG & \begin{tabular}{l}
The field is mandatory present in: \\
- an RRCReconfiguration message contained in an RRCResume message (or in an RRCConnectionResume message, see TS 36.331 [10]), \\
- an RRCReconfiguration message contained in an RRCConnectionReconfiguration message, see TS 36.331 [10], which is contained in DLinformationTransferMRDC transmitted on SRB3 (as a response to ULInformation TransferMRDC including an MCGFailureInformation). \\
The field is optional present, Need M, in: \\
- an RRCReconfiguration message transmitted on SRB3, \\
- an RRCReconfiguration message contained in another RRCReconfiguration message (or in an RRCConnectionReconfiguration message, see TS 36.331 [10]) transmitted on SRB1 \\
- an RRCReconfiguration message contained in another RRCReconfiguration message which is contained in DLInformation TransferMRDC transmitted on SRB3 (as a response to ULInformation TransferMRDC including an MCGFailurelnformation) \\
Otherwise, the field is absent
\end{tabular} \\
\hline L2RelayUE & For L2 U2N Relay UE, the field is optionally present, Need M. Otherwise, it is absent. \\
\hline L2RemoteUE & The field is optional present for L2 U2N Remote UE, need M; otherwise it is absent. \\
\hline L2U2NRelay & For L2 U2N Relay UE, the field is optionally present, Need N. Otherwise, it is absent. \\
\hline
\end{tabular}

RRCReconfiguration Complete
The RRCReconfigurationComplete message is used to confirm the successful completion of an RRC connection reconfiguration.
Signalling radio bearer: SRB1 or SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
RRCReconfigurationComplete message
-- ASNISTART
-- TAG-RRCRECONFIGURATIONCOMPLETE-START

RRCReconfigurationComplete : :=
rrc-TransactionIdentifier

SEQUENCE 1
RRC-TransactionIdentifier,

ETSI


--- Page 364  ---


3GPP TS 38.331 version 17.0.0 Release 17
363
ETSI TS 138331 V17.0.0 (2022-05)
```
    criticalExtensions
        rrcReconfigurationComplete
        criticalExtensionsFuture
    }
}
RRCReconfigurationComplete-IEs ::= SEQUENCE {
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    nonCriticalExtension RRCReconfigurationComplete-vl530-IEs OPTIONAL
}
RRCReconfigurationComplete-vl530-IEs ::= SEQUENCE {
```

```
}
RRCReconfigurationComplete-vl560-IEs ::= SEQUENCE {
    scg-Response
        nr-SCG-Response OCTET STRING (CONTAINING RRCReconfigurationComplete),
        eutra-SCG-Response OCTET STRING
    }
    nonCriticalExtension RRCReconfigurationComplete-vl6l0-IEs
}
RRCReconfigurationComplete-vl6l0-IEs ::= SEQUENCE {
    ue-MeasurementsAvailable-rl6 UE-MeasurementsAvailable-rl6
    needForGapsInfoNR-r16 NeedForGapsInfoNR-rl6
    nonCriticalExtension RRCReconfigurationComplete-vl640-IEs
}
RRCReconfigurationComplete-vl640-IEs ::= SEQUENCE {
    uplinkTxDirectCurrentTwoCarrierList-r16
    nonCriticalExtension
}
RRCReconfigurationComplete-vl700-IEs ::= SEQUENCE {
    needForNCSG-InfoNR-rl7
    needForNCSG-InfoEUTRA-rl7
    selectedCondRRCReconfig-rl7
    nonCriticalExtension
}
-- TAG-RRCRECONEIGURATIONCOMPLETE-STOP
-- ASNISTOP
```


ETSI


--- Page 365  ---


3GPP TS 38.331 version 17.0.0 Release 17
364
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RRCReconfigurationComplete-IEs field descriptions \\
\hline \begin{tabular}{l}
needForGapsinfoNR \\
This field is used to indicate the measurement gap requirement information of the UE for NR target bands.
\end{tabular} \\
\hline \begin{tabular}{l}
needForNCSG-InfoEUTRA \\
This field is used to indicate the measurement gap and NCSG requirement information of the UE for E-UTRA target bands.
\end{tabular} \\
\hline \begin{tabular}{l}
needForNCSG-InfoNR \\
This field is used to indicate the measurement gap and NCSG requirement information of the UE for NR target bands.
\end{tabular} \\
\hline \begin{tabular}{l}
scg-Response \\
In case of NR-DC ( \( n r \)-SCG-Response), this field includes the RRCReconfigurationComplete message. In case of NE-DC (eutra-SCG-Response), this field includes the E- \\
UTRA RRCConnectionReconfigurationComplete message as specified in TS 36.331 [10].
\end{tabular} \\
\hline \begin{tabular}{l}
selectedCondRRCReconfig \\
This field indicates the ID of the selected conditional reconfiguration the UE applied upon the execution of CPA or inter-SN CPC.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkTxDirectCurrentList \\
The Tx Direct Current locations for the configured serving cells and BWPs if requested by the NW (see reportUplinkTxDirectCurrent in CellGroupConfig).
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkTxDirectCurrentTwoCarrierList \\
The Tx Direct Current locations for the configured uplink intra-band CA with two carriers if requested by the NW (see reportUplinkTxDirectCurrentTwoCarrier-r16 in CellGroupConfig).
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RRCReject

The \( R R C \) Reject message is used to reject an RRC connection establishment or an RRC connection resumption.
Signalling radio bearer: SRB0
RLC-SAP: TM
Logical channel: CCCH
Direction: Network to UE
RRCReject message
```
-- ASNISTART
-- TAG-RRCREJECT-START
```

```
RRCReject ::=
    criticalExtensions
        rrcReject
        criticalExtensionsFuture
    }
}
RRCReject-IEs ::=
    waitTime
    lateNonCriticalExtension
    nonCriticalExtension
}
```


SEQUENCE [
CHOICE |
RRCReject-IEs,
SEQUENCE \{\}
SEQUENCE \{\}
```
SEQUENCE [
OCTET STRING
SEQUENCE \{\}
```


RejectWaitTime OPTIONAL, -- Need N
OPTIONAL, OPTIONAL

ETSI


--- Page 366  ---


3GPP TS 38.331 version 17.0.0 Release 17
365
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-RRCREJECT-STOP
-- ASNISTOP

\begin{tabular}{|l|l|}
\hline & RRCReject-IEs field descriptions \\
\hline \begin{tabular}{l}
waitTime \\
Wait time value in seconds. The field is always included.
\end{tabular} & \\
\hline
\end{tabular}

RRCRelease
The RRCRelease message is used to command the release of an RRC connection or the suspension of the RRC connection.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
RRCRelease message
-- ASNISTART
-- TAG-RRCRELEASE-START

RRCRelease : :=
rrc-TransactionIdentifier
criticalExtensions
rrckelease
criticalExtensionsFuture
\}
\}
RRCRelease-IEs: :=
redirectedCarrierInfo
cellReselectionPriorities
suspendConfig
deprioritisationReq
deprioritisationType
deprioritisationTimer
\}
lateNonCriticalExtension
nonCriticalExtension
\}
RRCRelease-vl540-IEs : :=
waitTime
nonCriticalExtension
        criticalExtensionsFuture
    rrc-TransactionIdentifier
    criticalExtensions
        rrckelease
        \}
\}
                deprioritisationTimer
    suspendConfig
    deprioritisationReq
            deprioritisationType
deprioritisationTime
            CROPERSIO
        \}
        nonCriticalExtension

SEQUENCE 1
RRC-TransactionIdentifier,
CHOICE 1
RRCRelease-IEs,
SEQUENCE \{\}
"
    SEQUENCE \{\}
                SEQUENCE
                CE [
            "
SEQUENCE 1
        RedirectedCarrierInfo
        CellReselectionPriorities
        SuspendConfig
        SEQUENCE 1
            ENUMERATED \{frequency, nr\},
                ENUMERATED \{min5, minlo, minl5, min30\}
            OCTET STRING
        RRCRelease-vl540-IEs
SEQUENCE 1
    RejectWaitTime OPTIONAL, -- Need N
    RRCRelease-vl610-IEs OPTIONAL

OPTIONAL, -- Need N
OPTIONAL,
OPTIONAL

ETSI


--- Page 367  ---


3GPP TS 38.331 version 17.0.0 Release 17
366
ETSI TS 138331 V17.0.0 (2022-05)
```
}
```

```
SEQUENCE \
    ENUMERATED {true} OPTIONAL, -- Need N
    SetupRelease {MeasIdleConfigDedicated-rl6} OPTIONAL, -- Need M
    RRCRelease-vl650-IEs OPTIONAL
```

```
RRCRelease-vl610-IEs ::=
    voiceEallbackIndication-rl6
    measIdleConfig-rl6
    nonCriticalExtension
}
RRCRelease-vl650-IEs ::=
    mpsPriorityIndication-rl6
    nonCriticalExtension
}
RedirectedCarrierInfo ::=
    nr
    eutra
    ...
}
RedirectedCarrierInfo-EUTRA ::=
    eutraFrequency
    cnType
}
CarrierInfoNR ::=
    carrierFreq
    ssbSubcarrierSpacing
    smtc
    ...
}
SuspendConfig ::= SEQUENCE \
    fullI-RNTI
    shortI-RNTI
    ran-PagingCycle
    ran-NotificationAreaInfo
    t380
    nextHopChainingCount
    ...;
    [ [
    sl-ServingCellInfo-rl7
    sdt-Config-rl7
    srs-PosRRC-InactiveConfig-rl7
    ran-ExtendedPagingCycle-rl7
    ] ]
}
PeriodicRNAU-TimerValue ::= ENUMERATED {min5, min10, min20, min30, min60, min120, min360, min720}
CellReselectionPriorities := SEQUENCE {
    freqPriorityListEUTRA
    freqPriorityListNR
    t320
SEQUENCE \
    ENUMERATED {true} OPTIONAL, -- Cond Redirection2
    SEQUENCE {} OPTIONAL
CHOICE \
    CarrierInfoNR,
    RedirectedCarrierInfo-EUTRA,
SEQUENCE {
    ARFCN-ValueEUTRA,
    ENUMERATED {epc,fiveGC} OPTIONAL -- Need N
SEQUENCE \
    ARFCN-ValueNR,
    SubcarrierSpacing,
    SSB-MTC
    I-RNTI-Value,
ShortI-RNTI-Value,
PagingCycle,
RAN-NotificationAreaInfo OPTIONAL, -- Need. M
PeriodicRNAU-TimerValue OPTIONAL, -- Need. R
NextHopChainingCount,
SL-ServingCellInfo-rl7
SetupRelease { SDT-Config-rl7 }
SRS-PosRRC-InactiveConfig-rl7
ExtendedPagingCycle-rl7
ENUMERATED { min5, minl0, min20, min30, min60, min120, min360, min720}
    FreqPriorityListNR OPTIONAL, -- Need M
ENUMERATED {min5, min10, min20, min30, min60, minl20, minl80, sparel} OPTIONAL, -- Need R
```


ETSI


--- Page 368  ---


3GPP TS 38.331 version 17.0.0 Release 17
367
ETSI TS 138331 V17.0.0 (2022-05)
```
    ...;
    [[
```

```
    ]]
}
PagingCycle ::=
ExtendedPagingCycle-rl7 ::=
FreqPriorityListeUTRA ::=
FreqPriorityListNR ::=
FreqPriorityEUTRA ::=
    carrierFreq
    cellReselectionPriority
    cellReselectionSubPriority
}
FreqPriorityNR ::=
    carrierFreq
    cellReselectionPriority
    cellReselectionSubPriority
}
RAN-NotificationAreaInfo ::=
    cellList
    ran-AreaConfigList
    ...
}
PLMN-RAN-AreaCellList ::=
PLMN-RAN-AreaCell ::=
    plmn-Identity
    ran-Areacells
}
PLMN-RAN-AreaConfigList ::=
PLMN-RAN-AreaConfig ::=
    plmn-Identity
    ran-Area
}
RAN-AreaConfig ::=
    trackingAreaCode
    ran-AreaCodeList
}
SDT-Config-rl7 ::=
    sdt-DRB-List-rl7
    sdt-SRB2-Indication-rl7
ENUMERATED {rf32, rf64, rfl28, rf256}
ENUMERATED {rf256, rf5l2, rfl024, sparel}
SEQUENCE (SIZE (1..maxFreq)) OF FreqPriorityEUTRA
SEQUENCE (SIZE (1..maxFreq)) OF FreqPriorityNR
SEQUENCE {
ARFCN-ValueEUTRA,
CellReselectionPriority,
CellReselectionSubPriority
SEQUENCE \
ARFCN-ValueNR,
CellReselectionPriority,
CellReselectionSubPriority
CHOICE {
PLMN-RAN-AreaCellList,
PLMN-RAN-AreaConfigList,
SEQUENCE (SIZE (l.. maxPLMNIdentities)) OF PLMN-RAN-AreaCell
SEQUENCE \
PLMN-Identity OPTIONAL, -- Need.S
SEQUENCE (SIZE (1..32)) OF CellIdentity
SEQUENCE (SIZE (l..maxPLMNIdentities)) OF PLMN-RAN-AreaConfig
SEQUENCE {
PLMN-Identity OPTIONAL, -- Need.S
SEQUENCE (SIZE (1..16)) OF RAN-AreaConfig
SEQUENCE {
TrackingAreaCode,
SEQUENCE (SIZE (1..32)) OF RAN-AreaCode
OPTIONAL -- Need. R
SEQUENCE \
SEQUENCE (SIZE (O..maxDRB)) OF DRB-Identity
ENUMERATED {allowed}
OPTIONAL, -- Need M
OPTIONAL, -- Need R
```


ETSI


--- Page 369  ---


3GPP TS 38.331 version 17.0.0 Release 17
368
ETSI TS 138331 V17.0.0 (2022-05)
```
    sdt-MAC-PHY-CG-Config-rl7 SetupRelease {SDT-CG-Config-rl7} OPTIONAL, -- Need M
    sdt-DRB-ContinueROHC-rl7 ENUMERATED [ cell, rna } OPTIONAL -- Need. R
}
SDT-CG-Config-rl7 ::= OCTET STRING (CONTAINING SDT-MAC-PHY-CG-Config-rl7)
SDT-MAC-PHY-CG-Config-rl7 ::= SEQUENCE {
    -- CG-SDT specific configuration
    -- FFS on BSR configuration (e.g. i.e. for the FFS on the logicalChannelSR-DelayTimer)
    -- FFS on delta signalling (We need to clarify how this works, for instance, whether initial BWP dedicated can be considered as
    -- baseline to enable delta configuration or not etc).
    cg-SDT-Config-LCH-restrictionToAddModList-rl7 SEQUENCE (SIZE(1..maxLC-ID)) OF CG-SDT-Config-LCH-restriction-rl7 OPTIONAL, -- Need N
    cg-SDT-Config-LCH-restrictionToReleaseList-rl7 SEQUENCE (SIZE(l..maxLC-ID)) OF LogicalChannelIdentity OPTIONAL, -- Need N
    cg-SDT-Config-Initial-BWP-NUL-rl7 SetupRelease {BWP-Uplink-Dedicated-SDT-rl7} OPTIONAL, -- Need M
    cg-SDT-Config-Initial-BWP-SUL-rl7 SetupRelease {BWP-Uplink-Dedicated-SDT-rl7} OPTIONAL, -- Need M
    cg-SDT-Config-Initial-BWP-DL-rl7 BWP-Downlink-Dedicated-SDT-rl7 OPTIONAL, -- Need M
    cg-SDT-TimeAlignmentTimer-rl7 TimeAlignmentTimer OPTIONAL, -- Need M
    cg-SDT-RSRP-ThresholdSSB-rl7 RSRP-Range OPTIONAL, -- Need. M
    cg-SDT-TA-ValiditationConfig-rl7 SetupRelease { CG-SDT-TA-ValiditationConfig-rl7 } OPTIONAL, -- Need M
    ...
}
CG-SDT-TA-ValiditationConfig-rl7 ::= SEQUENCE {
    cg-SDT-RSRP-ChangeThreshold-rl7 RSRP-Range
}
BWP-Downlink-Dedicated-SDT-rl7 ::= SEQUENCE {
    pdcch-Config-rl7 SetupRelease { PDCCH-Config } OPTIONAL, -- Need M
    pdsch-Config-rl7 SetupRelease { PDSCH-Config } OPTIONAL, -- Need M
    P-Uplink-Dedicated-SDT-rl7 ::= SEQUENCE [
{BWP-Uplink-Dedicated-SDT-rl7 ::= SEQUENCE {}\mathrm{ SetupRelease [ PUSCH-Config } OPTIONAL
    configuredGrantConfigToAddModList-rl7 ConfiguredGrantConfigToAddModList-rl7 OPTIONAL, -- Need N
    configuredGrantConfigToReleaseList-rl7 ConfiguredGrantConfigToReleaseList-rl7 OPTIONAL, -- Need. N
    ...
}
ConfiguredGrantConfigToAddModList-rl7 ::= SEQUENCE (SIZE (l..maxNrofConfiguredGrantConfig-rl6)) OF ConfiguredGrantConfig
ConfiguredGrantConfigToReleaseList-rl7 ::= SEQUENCE (SIZE (l..maxNrofConfiguredGrantConfig-rl6)) OF ConfiguredGrantConfigIndex-rl6
CG-SDT-Config-LCH-restriction-rl7 ::= SEQUENCE |
    logicalChannelIdentity-rl7 LogicalChannelIdentity,
    configuredGrantTypelAllowed-rl7 ENUMERATED {true} OPTIONAL, -- Need. R
    allowedCG-List-rl7 SEQUENCE (SIZE (O.. maxNrofConfiguredGrantConfigMAC-l-rl6)) OF ConfiguredGrantConfigIndexMAC-rl6
OPTIONAL -- Need R
}
SRS-PosRRC-InactiveConfig-rl7 ::= SEQUENCE {
    srs-PosConfig-rl7 SRS-PosConfig-rl7,
    bwp-rl7 BWP OPTIONAL, -- Need. S
    srs-TimeAlignmentTimer-rl7 TimeAlignmentTimer
    inactivePosSRS-RSRP-changeThresh-rl7 RSRP-ChangeThresh-rl7

OPTIONAL, -- Need. S
OPTIONAL, -- Need. R
OPTIONAL, -- Need. R
```


ETSI


--- Page 370  ---


3GPP TS 38.331 version 17.0.0 Release 17
369
ETSI TS 138331 V17.0.0 (2022-05)
```
-- FFS upper limit
    inactivePosSRS-AbsThreshSS-BlocksConsolidation-rl7 RSRP-Range
}
```

```
throughout the specification are FFS.
ffsUpperLimit INTEGER ::= 9999
```

```
--Editor's Note: To be updated to align with SDT, to further update SUL/NUL and BWP--
SRS-PosConfig-rl7 ::= SEQUENCE \
```

```
}
-- TAG-RRCRELEASE-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline RRCRelease-IEs field descriptions \\
\hline \begin{tabular}{l}
cnType \\
Indicate that the UE is redirected to EPC or 5GC.
\end{tabular} \\
\hline \begin{tabular}{l}
deprioritisationReq \\
Indicates whether the current frequency or RAT is to be de-prioritised.
\end{tabular} \\
\hline \begin{tabular}{l}
deprioritisationTimer \\
Indicates the period for which either the current carrier frequency or NR is deprioritised. Value \( \min N \) corresponds to \( N \) minutes.
\end{tabular} \\
\hline \begin{tabular}{l}
measidleConfig \\
Indicates measurement configuration to be stored and used by the UE while in RRC_IDLE or RRC_INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
mpsPriorityindication \\
Indicates the UE can set the establishment cause to mps-PriorityAccess for a new connection to a new RAT following a redirect to NR. If the target RAT is E-UTRA, see TS 36.331 [10]. The gNB sets the indication only for UEs authorized to receive MPS treatment as indicated by ARP and/or QoS characteristics at the gNB, and it is applicable only for this instance of release with redirection to carrier/RAT included in the redirectedCarrierInfo field in the RRCRelease message.
\end{tabular} \\
\hline \begin{tabular}{l}
srs-PosRRCinactiveConfig \\
SRS for positioning confifuration during RRC_INACTIVE State.
\end{tabular} \\
\hline \begin{tabular}{l}
suspendConfig \\
Indicates configuration for the RRC_INACTIVE state. The network does not configure suspendConfig when the network redirect the UE to an inter-RAT carrier frequency or if the UE is configured with a DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
redirectedCarrierinfo \\
Indicates a carrier frequency (downlink for FDD) and is used to redirect the UE to an NR or an inter-RAT carrier frequency, by means of cell selection at transition to RRC_IDLE or RRC_INACTIVE as specified in TS 38.304 [20]. Based on UE capability, the network may include redirectedCarrierlnfo in RRCRelease message with suspend Config if this message is sent in response to an RRCResumeRequest or an RRCResumeRequest 1 which is triggered by the NAS layer (see 5.3.1.4 in TS 24.501 [23]).
\end{tabular} \\
\hline \begin{tabular}{l}
voiceFallbackindication \\
Indicates the RRC release is triggered by EPS fallback for IMS voice as specified in TS 23.502 [43].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 371  ---


3GPP TS 38.331 version 17.0.0 Release 17
370
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CarrierinfoNR field descriptions \\
\hline \begin{tabular}{l}
carrierFreq \\
Indicates the redirected NR frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
ssbSubcarrierSpacing \\
Subcarrier spacing of SSB in the redirected SSB frequency. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 120 or 240 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline \begin{tabular}{l}
smtc \\
The SSB periodicity/offset/duration configuration for the redirected SSB frequency. It is based on timing reference of PCell. If the field is absent, the UE uses the SMTC configured in the measObjectNR having the same SSB frequency and subcarrier spacing.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline & RAN-NotificationArealnfo field descriptions \\
\hline \begin{tabular}{l}
cellist \\
A list of cells configured as RAN area.
\end{tabular} & \\
\hline \begin{tabular}{l}
ran-AreaConfigList \\
A list of RAN area codes or RA code(s) as RAN area.
\end{tabular} & \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PLMN-RAN-AreaConfig field descriptions \\
\hline \begin{tabular}{l}
pimn-identity \\
PLMN Identity to which the cells in ran-Area belong. If the field is absent the UE not in SNPN access mode uses the ID of the registered PLMN. This field is not included for UE in SNPN access mode (for UE in SNPN access mode the ran-Area always belongs to the registered SNPN).
\end{tabular} \\
\hline \begin{tabular}{l}
ran-AreaCodeList \\
The total number of RAN-AreaCodes of all PLMNs does not exceed 32.
\end{tabular} \\
\hline \begin{tabular}{l}
ran-Area \\
Indicates whether TA code(s) or RAN area code(s) are used for the RAN notification area. The network uses only TA code(s) or both TA code(s) and RAN area code(s) to configure a UE. The total number of TACs across all PLMNs does not exceed 16.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PLMN-RAN-AreaCell field descriptions \\
\hline \begin{tabular}{l}
pimn-identity \\
PLMN Identity to which the cells in ran-AreaCells belong. If the field is absent the UE not in SNPN access mode uses the ID of the registered PLMN. This field is not included for UE in SNPN access mode (for UE in SNPN access mode the ran-AreaCells always belongs to the registered SNPN).
\end{tabular} \\
\hline \begin{tabular}{l}
ran-AreaCells \\
The total number of cells of all PLMNs does not exceed 32.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 372  ---


3GPP TS 38.331 version 17.0.0 Release 17
371
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SDT-Config field descriptions \\
\hline \begin{tabular}{l}
sdt-DRB-ContinueROHC \\
Indicates whether the PDCP entity for the radio bearers configured for SDT continues or resets the ROHC header compression protocol during PDCP re-establishment during SDT procedure, as specified in TS 38.323 [5]. Value cell indicates that ROHC header compression continues when the UE resumes for SDT in the same cell as the PCell when the RRCRelease message is received. Value ma indicates that ROHC header compression continues when the UE resumes for SDT in a cell belonging to the same RNA as the PCell when the RRCRelease message is received. If the field is absent PDCP entity for the radio bearers configured for SDT reset the ROHC header compression protocol during PDCP re-establishment during SDT procedure, as specified in TS 38.323 [5].
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-DRB-List \\
Indicates the ID(s) of the DRB(s) that are configured for SDT. If size of the sequence is zero, then the UE assumes that none of the DRBs are configured for SDT. The network only configures MN terminated MCG bearers for SDT.
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-SRB2-indication \\
Indiates whether SRB2 is configured for SDT or not.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SDT-MAC-PHY-CG-Config field descriptions \\
\hline \begin{tabular}{l}
cg-SDT-RSRP-ThresholdSSB \\
An RSRP threshold configured for SSB selection for CG-SDT as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
CG-SDT-TA-ValiditationConfig \\
Configuration for the RSRP based TA validation. If this IE is not configured, then the UE does not perform RSRP based TA validation.
\end{tabular} \\
\hline \begin{tabular}{l}
cg-SDT-timeAlignmentTimer \\
TAT value for CG-SDT as specified in TS 38.321 [3]. The network always configures this when solt-MAC-PHY-CG-Config is configured.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline CG-SDT-TA-ValiditationConfig field descriptions \\
\hline cg-SDT-RSRP-ChangeThreshold \\
The RSRP threshold for TA validation for CG-SDT as specified in TS 38.321 [3]. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SRS-PosRRC-inactiveConfig field descriptions \\
\hline \begin{tabular}{l}
bwp \\
BWP configuration for SRS for Positioning during the RRC_INACTIVE state. If the field is absent UE is configured with an SRS for Positioning associated with the initial UL BWP and transmitted, during the RRC INACTIVE state, inside the initial UL BWP with the same CP and SCS as configured for initial UL BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
inactivePosSRS-AbsThreshSS-BlocksConsolidation \\
absolute RSRP threshold for determining the set of SSBs for derivation of downlink pathloss reference for TA validation.
\end{tabular} \\
\hline \begin{tabular}{l}
inactivePosSRS-NrofSS-Blocks ToAverage \\
number of SSBs with highest RSRPs for derivation of downlink pathloss reference for TA validation
\end{tabular} \\
\hline \begin{tabular}{l}
inactivePosSRS-RSRP-changeThresh \\
RSRP threshold for the increase/decrease of RSRP for time alignment validation
\end{tabular} \\
\hline \begin{tabular}{l}
srs-TimeAlignmnetTimer \\
TA timer for SRS for positioning transmission during RRC_INACTIVE State. \\
Editor's Note: Range to be taken from SDT
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 373  ---


3GPP TS 38.331 version 17.0.0 Release 17
372
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SuspendConfig field descriptions \\
\hline \begin{tabular}{l}
ran-ExtendedPagingCycle \\
The extended DRX (eDRX) cycle for RAN-initiated paging to be applied by the UE. Value \( \boldsymbol{f} \mathbf{f} \mathbf{2 5 6} \) corresponds to 256 radio frames, value \( \boldsymbol{f} \mathbf{5 1 2} \) corresponds to 512 radio frames and so on. The field is only included when the UE is configured with eDRX in RRC_IDLE, see TS 24.401 [23]. Value of the field indicates an eDRX cycle which is shorter or equal to the IDLE mode eDRX cycle configured for the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
ran-NotificationArealnfo \\
Network ensures that the UE in RRC_INACTIVE always has a valid ran-NotificationArealnfo.
\end{tabular} \\
\hline \begin{tabular}{l}
ran-PagingCycle \\
Refers to the UE specific cycle for RAN-initiated paging. Value \( \pi 32 \) corresponds to 32 radio frames, value \( \pi 64 \) corresponds to 64 radio frames and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
t380 \\
Refers to the timer that triggers the periodic RNAU procedure in UE. Value \( \min 5 \) corresponds to 5 minutes, value \( \min 10 \) corresponds to 10 minutes and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ServingCellinfo \\
Indicates the Uu serving Cell related related information.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline L2RemoteUE & The field is mandatory present for L2 U2N Remote UE, need M; otherwise it is absent. \\
\hline Redirection2 & The field is optionally present, Need R, if redirectedCarrier/nfo is included; otherwise the field is not present. \\
\hline
\end{tabular}
- \( \quad \) RRCResume

The RRCResume message is used to resume the suspended RRC connection.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
RRCResume message
-- ASNISTART
-- TAG-RRCRESUME-START

RRCResume : :=
rrc-TransactionIdentifier
criticalExtensions
rrckesume
criticalExtensionsFuture
\}
\}
RRCResume-IEs : :=
radioBearerConfig
masterCellGroup
        criticalExtensionsFuture
    \}
\}
    radioBearerConfig masterCellGroup

SEQUENCE 1
RRC-TransactionIdentifier,
CHOICE 1
RRCResume-IEs,
SEQUENCE \{\}
        SEQUENCE \{\}

SEQUENCE 1
RadioBearerConfig OPTIONAL, -- Need M
OCTET STRING (CONTAINING CellGroupConfig) OPTIONAL, -- Need M

ETSI


--- Page 374  ---


3GPP TS 38.331 version 17.0.0 Release 17
373
ETSI TS 138331 V17.0.0 (2022-05)
```
    measConfig
    fullConfig
    lateNonCriticalExtension
    nonCriticalExtension
}
RRCResume-vl560-IEs ::=
    radioBearerConfig2
    sk-Counter
    nonCriticalExtension
}
RRCResume-vl610-IEs ::=
    idleModeMeasurementReq-r16
    restoreMCG-SCells-rl6
    restoreSCG-rl6
    mrdc-SecondaryCellGroup-rl6
        nr-SCG-rl6
        eutra-SCG-rl6
    }
    needForGapsConfigNR-r16
    nonCriticalExtension
}
RRCResume-vl700-IEs::=
    sl-ConfigDedicatedNR-rl7
    sl-L2RemoteUEConfig-rl7
    needForNCSG-ConfigNR-rl7
    needForNCSG-ConfigEUTRA-rl7
    scg-State-rl7
    appLayerMeasConfig-rl7
    nonCriticalExtension
}
-- TAG-RRCRESUME-STOP
-- ASNISTOP
```


ETSI


--- Page 375  ---


3GPP TS 38.331 version 17.0.0 Release 17
374
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RRCResume-IEs field descriptions \\
\hline \begin{tabular}{l}
idieModeMeasurementReq \\
This field indicates that the UE shall report the idle/inactive measurements, if available, to the network in the RRCResumeComplete message
\end{tabular} \\
\hline \begin{tabular}{l}
masterCellGroup \\
Configuration of the master cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
mrdc-SecondaryCellGroup \\
Includes an RRC message for SCG configuration in NR-DC or NE-DC. \\
For NR-DC (nr-SCG), mrdc-SecondaryCellGroup contains the RRCReconfiguration message as generated (entirely) by SN gNB. In this version of the specification, the RRC message can only include fields secondaryCellGroup (with at least reconfigurationWithSync), otherConfig and measConfig. \\
For NE-DC (eutra-SCG), mrdc-SecondaryCellGroup includes the E-UTRA RRCConnectionReconfiguration message as specified in TS 36.331 [10]. In this version of the specification, the E-UTRA RRC message only include the field scg-Configuration with at least mobilityControllnfoSCG.
\end{tabular} \\
\hline \begin{tabular}{l}
needForGapsConfigNR \\
Configuration for the UE to report measurement gap requirement information of NR target bands in the RRCReconfigurationComplete and RRCResumeComplete message.
\end{tabular} \\
\hline \begin{tabular}{l}
needForNCSG-ConfigEUTRA \\
Configuration for the UE to report measurement gap and NCSG requirement information of E-UTRA target bands in the RRCReconfigurationComplete and \\
RRCResume Complete message.
\end{tabular} \\
\hline \begin{tabular}{l}
needForNCSG-ConfigNR \\
Configuration for the UE to report measurement gap and NCSG requirement information of NR target bands in the RRCReconfigurationComplete and RRCResumeComplete message.
\end{tabular} \\
\hline \begin{tabular}{l}
radioBearerConfig \\
Configuration of Radio Bearers (DRBs, SRBs) including SDAP/PDCP.
\end{tabular} \\
\hline \begin{tabular}{l}
radioBearerConfig2 \\
Configuration of Radio Bearers (DRBs, SRBs) including SDAP/PDCP. This field can only be used if the UE supports NR-DC or NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
restoreMCG-SCells \\
Indicates that the UE shall restore the MCG SCells from the UE Inactive AS Context, if stored.
\end{tabular} \\
\hline \begin{tabular}{l}
restoreSCG \\
Indicates that the UE shall restore the SCG configurations from the UE Inactive AS Context, if stored.
\end{tabular} \\
\hline \begin{tabular}{l}
scg-State \\
Indicates that the SCG is in deactivated state.
\end{tabular} \\
\hline \begin{tabular}{l}
sk-Counter \\
A counter used to derive S-KgnB or S-KenB based on the newly derived \( \mathrm{K}_{\mathrm{gnB}} \) during RRC Resume. The field is only included when there is one or more RB with keyToUse set to secondary or mrdc-SecondaryCellGroup is included.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ConfigDedicatedNR \\
This field is used to provide the dedicated configurations for NR sidelink communication/discovery used by L2 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-L2RemoteUEConfig \\
Contains L2 U2N relay operation related configurations used by L2 U2N Remote UE.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline L2RemoteUE & The field is mandatory present for L2 U2N Remote UE, need M; otherwise it is absent. \\
\hline RestoreSCG & The field is mandatory present if restoreSCG is included. It is optionally present, Need M, otherwise. \\
\hline
\end{tabular}
- \( \quad \) RRCResumeComplete

The RRCResumeComplete message is used to confirm the successful completion of an RRC connection resumption.

ETSI


--- Page 376  ---


3GPP TS 38.331 version 17.0.0 Release 17
375
ETSI TS 138331 V17.0.0 (2022-05)

Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
RRCResumeComplete message
```
-- ASNISTART
-- TAG-RRCRESUMECOMPLETE-START
RRCResumeComplete ::=
SEQUENCE {
RRC-TransactionIdentifier,
CHOICE {
    RRCResumeComplete-IEs,
    SEQUENCE {}
}
RRCResumeComplete-IEs ::= SEQUENCE \
    dedicatedNAS-Message
    selected.PLMN-Identity
    uplinkTxDirectCurrentList
    lateNonCriticalExtension
    nonCriticalExtension
}
RRCResumeComplete-vl610-IEs::=
    idleMeasAvailable-rl6
    measResultIdleEUTRA-rl6
    measResultIdleNR-rl6
    scg-Response-rl6
        nr-SCG-Response
        eutra-SCG-Response
    }
    ue-MeasurementsAvailable-r16
    mobilityHistoryAvail-rl6
    mobilityState-rl6
    needForGapsInfoNR-r16
    nonCriticalExtension
}
RRCResumeComplete-vl640-IEs ::= SEQUENCE [
```

```
    nonCriticalExtension RRCResumeComplete-vl700-IEs
}
RRCResumeComplete-vl700-IEs::= SEQUENCE [
    needForNCSG-InfoNR-rl7
    needForNCSG-InfoEUTRA-rl7
    nonCriticalExtension
    NeedForNCSG-InfoNR-rl7 OPTIONAL,
    NeedForNCSG-InfoEUTRA-rl7
    SEQUENCE {}
```

```
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL
```

```
SEQUENCE \
    ENUMERATED {true}
    MeasResultIdleEUTRA-rl6
    MeasResultIdleNR-rl6
    CHOICE {
        OCTET STRING (CONTAINING RRCReconfigurationComplete),
        OCTET STRING
    UE-MeasurementsAvailable-r16
    ENOMERATED {true}
    ENUMERATED {normal, medium, high, spare}
    NeedForGapsInfoNR-rl6
    RRCResumeComplete-v1640-IEs
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL
OPTIONAL,
OPTIONAL,
OPTIONAL
```


ETSI


--- Page 377  ---


3GPP TS 38.331 version 17.0.0 Release 17
376
ETSI TS 138331 V17.0.0 (2022-05)
\}

-- TAG-RRCRESUMECOMPLETE-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline RRCResumeComplete-IEs field descriptions \\
\hline \begin{tabular}{l}
idleMeasAvailable \\
Indication that the UE has idlefinactive measurement report available.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultidieEUTRA \\
EUTRA measurement results performed during RRC_INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultidieNR \\
NR measurement results performed during RRC_INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
needForGapsinfoNR \\
This field is used to indicate the measurement gap requirement information of the UE for NR target bands.
\end{tabular} \\
\hline \begin{tabular}{l}
needForNCSG-InfoEUTRA \\
This field is used to indicate the measurement gap and NCSG requirement information of the UE for E-UTRA target bands
\end{tabular} \\
\hline \begin{tabular}{l}
needForNCSG-InfoNR \\
This field is used to indicate the measurement gap and NCSG requirement information of the UE for NR target bands
\end{tabular} \\
\hline \begin{tabular}{l}
selectedPLMN-Identity \\
Index of the PLMN selected by the UE from the pimn-fdentitylnfoList or npn-fdentitylnfoList fields included in SIB1.
\end{tabular} \\
\hline \begin{tabular}{l}
uplink TxDirectCurrentList \\
The Tx Direct Current locations for the configured serving cells and BWPs if requested by the NW (see reportUplinkTxDirectCurrent in CellGroupConfig).
\end{tabular} \\
\hline \begin{tabular}{l}
uplink TxDirectCurrentTwo CarrierList \\
The Tx Direct Current locations for the configured uplink intra-band CA with two carriers if requested by the NW (see reportUplinkTxDirectCurrentTwoCarrier-r16 in CellGroupConfig).
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RRCResumeRequest

The RRCResumeRequest message is used to request the resumption of a suspended RRC connection or perform an RNA update.
Signalling radio bearer: SRB0
RLC-SAP: TM
Logical channel: CCCH
Direction: UE to Network
RRCResumeRequest message
-- ASNISTART
-- TAG-RRCRESUMEREQUEST-START

RRCResumeRequest : := rrckesume Request

SEQUENCE 1
RRCResumeRequest-IEs

ETSI


--- Page 378  ---


3GPP TS 38.331 version 17.0.0 Release 17
377
ETSI TS 138331 V17.0.0 (2022-05)
```
}
RRCResumeRequest-IEs ::=
    resumeIdentity
    resumeMAC-I
    resumeCause
    spare
}
```

-- TAG-RRCRESUMEREQUEST-STOP
-- ASNISTOP
```
SEQUENCE \
    ShortI-RNTI-Value,
    BIT STRING (SIZE (16)),
    ResumeCause,
    BIT STRING (SIZE (1))
```


\begin{tabular}{|l|}
\hline RRCResumeRequest-IEs field descriptions \\
\hline \begin{tabular}{l}
resumeCause \\
Provides the resume cause for the RRC connection resume request as provided by the upper layers or RRC. The network is not expected to reject an RRCResumeRequest due to unknown cause value being used by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
resumeldentity \\
UE identity to facilitate UE context retrieval at gNB.
\end{tabular} \\
\hline \begin{tabular}{l}
resumeMAC-I \\
Authentication token to facilitate UE authentication at gNB. The 16 least significant bits of the MAC-I calculated using the AS security configuration as specified in 5.3.13.3.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RRCResumeRequest1

The RRCResumeRequest \( l \) message is used to request the resumption of a suspended RRC connection or perform an RNA update.
Signalling radio bearer: SRB0
RLC-SAP: TM
Logical channel: CCCH 1
Direction: UE to Network
RRCResumeRequest1 message
```
-- ASNISTART
-- TAG-RRCRESUMEREQUESTI-START
RRCResumeRequestl ::= SEQUENCE \
        rrcResumeRequestl RRCResumeRequestl-IEs
}
RRCResumeRequestl-IEs ::= SEQUENCE \
    resumeIdentity I-RNTI-Value,
    resumeMAC-I BIT STRING (SIZE (16)),
    resumeCause ResumeCause,
    spare BIT STRING (SIZE (1))
```


ETSI


--- Page 379  ---


3GPP TS 38.331 version 17.0.0 Release 17
378
ETSI TS 138331 V17.0.0 (2022-05)
\}

-- TAG-RRCRESUMEREQUESTI-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline RRCResumeRequest1-IEs field descriptions \\
\hline \begin{tabular}{l}
resumeCause \\
Provides the resume cause for the RRCResumeRequest 1 as provided by the upper layers or RRC. A gNB is not expected to reject an RRCResumeRequest 1 due to unknown cause value being used by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
resumeldentity \\
UE identity to facilitate UE context retrieval at gNB.
\end{tabular} \\
\hline \begin{tabular}{l}
resumeMAC-I \\
Authentication token to facilitate UE authentication at gNB. The 16 least significant bits of the MAC-I calculated using the AS security configuration as specified in 5.3.13.3.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RRCSetup

The RRCSetup message is used to establish SRB1.
Signalling radio bearer: SRB0
RLC-SAP: TM
Logical channel: CCCH
Direction: Network to UE
RRCSetup message
```
-- ASNISTART
-- TAG-RRCSETUP-START
RRCSetup ::=
    rrc-TransactionIdentifier
    criticalExtensions
        rrcsetup
        criticalExtensionsFuture
    }
}
RRCSetup-IEs ::=
    radioBearerConfig
    masterCellGroup
    lateNonCriticalExtension
    nonCriticalExtension
}
RRCSetup-vl700-IEs ::= SEQUENCE \
}
}
RRCSetup-vl700-IEs ::= SEQUENCE \
```

```
SEQUENCE \
    RRC-TransactionIdentifier,
    CHOICE {
        RRCSetup-IEs,
        SEQUENCE {}
```


ETSI


--- Page 380  ---


3GPP TS 38.331 version 17.0.0 Release 17
379
ETSI TS 138331 V17.0.0 (2022-05)
```
    sl-ConfigDedicatedNR-rl7
    sl-L2RemoteUEConfig-rl7
}
-- TAG-RRCSETUP-STOP
-- ASNISTOP
nonCriticalExtension
```

```
SetupRelease {SL-ConfigDedicatedNR-r16}
OPTIONAL, -- Cond L2RemoteUE
SEQUENCE {}
SEQUENCE {} OPTIONAL
```


\begin{tabular}{|l|}
\hline RRCSetup-IEs field descriptions \\
\hline \begin{tabular}{l}
masterCellGroup \\
The network configures only the RLC bearer for the SRB1, mac-CellGroupConfig, physicalCellGroupConfig and spCellConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
radioBearerConfig \\
Only SRB1 can be configured in RRC setup.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ConfigDedicatedNR \\
The network configures only the PC5 Relay RLC channel and si-PHY-MAC-RLC-Config for the SRB1.
\end{tabular} \\
\hline \begin{tabular}{l}
si-L2RemoteUEConfig \\
The network configures only the si-ServingCellinfo and SRAP configuration for the SRB1.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline L2RemoteUE & The field is mandatory present for L2 U2N Remote UE, need M; otherwise it is absent. \\
\hline
\end{tabular}
- \( \quad \) RRCSetupComplete

The RRCSetupComplete message is used to confirm the successful completion of an RRC connection establishment.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
RRCSetupComplete message
```
-- ASNISTART
-- TAG-RRCSETUPCOMPLETE-START
RRCSetupComplete ::=
    rrc-TransactionIdentifier
    criticalExtensions
        rrcSetupComplete
        criticalExtensionsFuture
SEQUENCE \
    RRC-TransactionIdentifier,
    CHOICE [
        RRCSetupComplete-IEs,
        SEQUENCE {}
    }
}
```


ETSI


--- Page 381  ---


3GPP TS 38.331 version 17.0.0 Release 17
380
ETSI TS 138331 V17.0.0 (2022-05)
```
RRCSetupComplete-IEs ::=
    selected.PLMN-Identity
    registeredAMF
    guami-Type
    s-NSSAI-List
    dedicatedNAS-Message
    ng-5G-S-TMSI-Value
        ng-5G-S-TMSI
        ng-5G-S-TMSI-Part2
    }
    lateNonCriticalExtension
    nonCriticalExtension
}
RRCSetupComplete-vl610-IEs ::=
    iab-NodeIndication-rl6
    idleMeasAvailable-r16
    ue-MeasurementsAvailable-rl6
    mobilityHistoryAvail-rl6
    mobilityState-rl6
    nonCriticalExtension
}
RRCSetupComplete-vl700-IEs ::=
    onboardingRequest-rl7
    nonCriticalExtension
}
RegisteredAMF ::= SEQUENCE \
    plmn-Identity
    amf-Identifier
}
-- TAG-RRCSETUPCOMPLETE-STOP
-- ASNISTOP
```

```
SEQUENCE \
    INTEGER (1 . . maxPLMN) ,
    RegisteredAMF OPTIONAL,
    ENUMERATED {native, mapped} OPTIONAL,
    SEQUENCE (SIZE (l..maxNrofS-NSSAI)) OF S-NSSAI OPTIONAL,
    DedicatedNAS-Message,
    CHOICE [
        NG-5G-S-TMSI,
        BIT STRING (SIZE (9))
            OPTIONAL,
    OCTET STRING OPTIONAL,
    RRCSetupComplete-vl610-IEs OPTIONAL
```

```
SEQUENCE {
    ENUMERATED {true} OPTIONAL,
    ENUMERATED {true} OPTIONAL,
    UE-MeasurementsAvailable-rl6 OPTIONAL,
    ENUMERATED {true}
    ENUMERATED {normal, medium, high, spare}
    RRCSetupComplete-vl700-IEs
SEQUENCE \
    ENUMERATED {true} OPTIONAL,
    SEQUENCE{} OPTIONAL
    PLMN-Identity OPTIONAL,
    AMF-Identifier
```

            "

ETSI


--- Page 382  ---


3GPP TS 38.331 version 17.0.0 Release 17
381
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RRCSetupComplete-IEs field descriptions \\
\hline \begin{tabular}{l}
guami-Type \\
This field is used to indicate whether the GUAMI included is native (derived from native 5G-GUTI) or mapped (from EPS, derived from EPS GUTI) as specified in TS 24.501 [23].
\end{tabular} \\
\hline \begin{tabular}{l}
iab-Nodelndication \\
This field is used to indicate that the connection is being established by an IAB-node as specified in TS 38.300 [2].
\end{tabular} \\
\hline \begin{tabular}{l}
idleMeasAvailable \\
Indication that the UE has idlefinactive measurement report available.
\end{tabular} \\
\hline \begin{tabular}{l}
mobilityState \\
This field indicates the UE mobility state (as defined in TS 38.304 [20], clause 5.2.4.3) just prior to UE going into RRC_CONNECTED state. The UE indicates the value of medium and high when being in Medium-mobility and High-mobility states respectively. Otherwise the UE indicates the value normal.
\end{tabular} \\
\hline \begin{tabular}{l}
ng-5G-S-TMSI-Part2 \\
The leftmost 9 bits of 5G-S-TMSI.
\end{tabular} \\
\hline \begin{tabular}{l}
onboardingRequest \\
This field indicates that the connection is being established for UE onboarding in the selected onboarding SNPN, see TS 23.501 [32].
\end{tabular} \\
\hline \begin{tabular}{l}
registeredAMF \\
This field is used to transfer the GUAMI of the AMF where the UE is registered, as provided by upper layers, see TS 23.003 [21].
\end{tabular} \\
\hline \begin{tabular}{l}
selectedPLMN-identity \\
Index of the PLMN or SNPN selected by the UE from the pimn-Identity/nfoList or npn-Identity/nfoList fields included in SIB1.
\end{tabular} \\
\hline
\end{tabular}
- RRCSetupRequest

The RRCSetupRequest message is used to request the establishment of an RRC connection.
Signalling radio bearer: SRB0
RLC-SAP: TM
Logical channel: CCCH
Direction: UE to Network
RRCSetupRequest message
```
-- ASNISTART
-- TAG-RRCSETUPREQUEST-START
```

```
RRCSetupRequest ::=
    rrcSetupRequest
}
RRCSetupRequest-IEs ::=
    ue-Identity
    establishmentCause
    spare
}
```


ETSI


--- Page 383  ---


3GPP TS 38.331 version 17.0.0 Release 17
382
ETSI TS 138331 V17.0.0 (2022-05)
```
InitialUE-Identity ::=
    ng-5G-S-TMSI-Partl
    randomValue
}
EstablishmentCause ::=
```

```
CHOICE \
    BIT STRING (SIZE (39)),
    BIT STRING (SIZE (39))
ENUMERATED {
    emergency, highPriorityAccess, mt-Access, mo-Signalling,
    mo-Data, mo-VoiceCall, mo-VideoCall, mo-SMS, mps-PriorityAccess, mcs-PriorityAccess,
    spare6, spare5, spare4, spare3, spare2, sparel}
```

-- TAG-RRCSETUPREQUEST-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline RRCSetupRequest-IEs field descriptions \\
\hline \begin{tabular}{l}
establishmentCause \\
Provides the establishment cause for the RRCSetupRequest in accordance with the information received from upper layers. gNB is not expected to reject an RRCSetupRequest due to unknown cause value being used by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
ue-Identity \\
UE identity included to facilitate contention resolution by lower layers.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline & InitialUE-Identity field descriptions \\
\hline ng-5G-S-TMSI-Part1 & \\
\hline The rightmost 39 bits of 5G-S-TMSI. & \\
\hline randomValue & \\
\hline Integer value in the range 0 to \( 2^{39}-1 \). & \\
\hline
\end{tabular}
- \( \quad \) RRCSysteminfoRequest

The RRCSystemInfoRequest message is used to request SI message(s) required by the UE as specified in clause 5.2.2.3.3.
Signalling radio bearer: SRB0
RLC-SAP: TM
Logical channel: CCCH
Direction: UE to Network
RRCSysteminfoRequest message
```
-- ASNISTART
-- TAG-RRCSYSTEMINFOREQUEST-START
RRCSystemInfoRequest ::= SEQUENCE {
    criticalExtensions CHOICE \
```


ETSI


--- Page 384  ---


3GPP TS 38.331 version 17.0.0 Release 17
383
ETSI TS 138331 V17.0.0 (2022-05)
```
        rrcSystemInfoRequest RRCSystemInfoRequest-IEs,
        criticalExtensionsFuture-rl6 CHOICE {
            rrcPosSystemInfoRequest-rl6 RRC-PosSystemInfoRequest-rl6-IEs,
            criticalExtensionsFuture SEQUENCE {}
        }
    }
}
RRCSystemInfoRequest-IEs ::= SEQUENCE {
    requested-SI-List BIT STRING (SIZE (maxSI-Message)), --32bits
    spare BIT STRING (SIZE (12))
}
RRC-PosSystemInfoRequest-rl6-IEs ::= SEQUENCE \
    requestedPosSI-List BIT STRING (SIZE (maxSI-Message)), --32bits
    spare BIT STRING (SIZE (ll))
}
-- TAG-RRCSYSTEMINFOREQUEST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline RRCSysteminfoRequest-IEs field descriptions \\
\hline \begin{tabular}{l}
requested-SI-List \\
Contains a list of requested SI messages. According to the order of entry in the list of SI messages configured by scheduling/nfoList in si-Scheduling/nfo in SIB1, first bit corresponds to first/leftmost listed SI message, second bit corresponds to second listed SI message, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedPosSI-List \\
Contains a list of requested SI messages. According to the order of entry in the list of SI messages configured by posSchedulingInfoList in posS/-Scheduling/nfo in SIB1, first bit corresponds to firstfleftmost listed SI message, second bit corresponds to second listed SI message, and so on.
\end{tabular} \\
\hline
\end{tabular}
- SCGFailureInformation

The SCGFailureInformation message is used to provide information regarding NR SCG failures detected by the UE.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
SCGFailureInformation message
-- ASNISTART
-- TAG-SCGEAILUREINFORMATION-START

SCGEailureInformation ::= SEQUENCE l

ETSI


--- Page 385  ---


3GPP TS 38.331 version 17.0.0 Release 17
384
ETSI TS 138331 V17.0.0 (2022-05)
```
    criticalExtensions
        scgFailureInformation
        criticalExtensionsFuture
    }
}
SCGFailureInformation-IEs ::=
    failureReportSCG
    nonCriticalExtension
}
SCGFailureInformation-vl590-IEs ::=
    lateNonCriticalExtension
    nonCriticalExtension
}
FailureReportSCG ::=
        failureType
        measResultFreqList
        measResultSCG-Failure
        ...;
        [ [
        locationInfo-rl6
    failureType-vl610
        ]],
        [ [
        previous PSCellId-rl7
            physCellId-rl7
            carrierFreq-rl7
        }
        failedPSCellId-rl7
                physCellId-rl7
                carrierFreq-rl7
            }
        timeSCGFailure-rl7
        perRAInfoList-rl7
        ] ]
}
MeasResultFreqList ::=
}
    SCGFailureInformation-IEs ::= SEQUENCE {
        nonCriticalExtension
}
}
    FailureRerreType
```

-- TAG-SCGEAILUREINFORMATION-STOP
-- ASNISTOP
```
                                E
                                                t310-Expiry, randomAccessProblem,
                                            11-MaxNumRetx,
                CHOICE \
                        SCGFailureInformation-IEs,
                    SEQUENCE {}
                                            synchReconfigFailureSCG, scg-ReconfigFailure,
srb3-IntegrityFailure, other-rl6, sparel},
            MeasResultFreqList
            OCTET STRING (CONTAINING MeasResultSCG-Failure) OPTIONAL,
                LocationInfo-r16 OPTIONAL,
            ENUMERATED [scg-lbtFailure-rl6, beamFailureRecoveryFailure-rl6,
                            t312-Expiry-rl6, bh-RLF-rl6, beamFailure-rl7, spare3, spare2, sparel} OPTIONAL
SEQUENCE {
        PhysCellId,
        ARFCN-ValueNR
                                OPTIONAL,
SEQUENCE \
        PhysCellId,
        ARFCN-ValueNR
                            OPTIONAL,
INTEGER (0..1023) OPTIONAL,
PerRAInfoList-rl6 OPTIONAL
    SEQUENCE (SIZE (l..maxFreq)) OF MeasResult2NR
```


ETSI


--- Page 386  ---


3GPP TS 38.331 version 17.0.0 Release 17
385
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SCGFailureinformation field descriptions \\
\hline \begin{tabular}{l}
measResultFreqList \\
The field contains available results of measurements on NR frequencies the UE is configured to measure by measConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultSCG-Failure \\
The field contains the MeasResultSCG-Failure IE which includes available results of measurements on NR frequencies the UE is configured to measure by the NR SCG RRCReconfiguration message.
\end{tabular} \\
\hline \begin{tabular}{l}
previousPSCellid \\
This field indicates the physical cell id and carrier frequency of the cell that is the source PSCell of the last SN change.
\end{tabular} \\
\hline \begin{tabular}{l}
failedPSCellld \\
This field indicates the physical cell id and carrier frequency of the cell in which SCG failure is detected or the target PSCell of the failed PSCell change.
\end{tabular} \\
\hline \begin{tabular}{l}
timeSCGFailure \\
This field is used to indicate the time elapsed since the last execution of RRCReconfiguration with reconfigurationWithSync for the SCG until the SCG failure. Actual value = field value * 100 ms . The maximum value 1023 means 102.3 s or longer.
\end{tabular} \\
\hline
\end{tabular}
- SCGFailureInformationEUTRA

The SCGFailureInformationEUTRA message is used to provide information regarding E-UTRA SCG failures detected by the UE.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
SCGFailureinformationEUTRA message
-- ASNISTART
-- TAG-SCGFAILUREINEORMATIONEUTRA-START

SCGFailureInformationEUTRA : :=
criticalExtensions
scgFailureInformationEUTRA
criticalExtensionsFuture
\}
\}
SCGFailureInformationEUTRA-IEs : :=
failureReportSCG-EUTRA
nonCriticalExtension
\}
SCGFailureInformationEUTRA-vl590-IEs : := SEQUENCE [
lateNonCriticalExtension
nonCriticalExtension
\}
SEQUENCE 1

SEQUENCE 1

CHOICE 1
SCGFailureInformationEUTRA-IEs,
SEQUENCE \{\}

FailureReportSCG-EUTRA OPTIONAL,
SCGFailureInformationEUTRA-vl590-IEs

OCTET STRING OPTIONAL,
SEQUENCE \{\} OPTIONAL
OPTIONAL

OPTIONAL
ETSI


--- Page 387  ---


3GPP TS 38.331 version 17.0.0 Release 17
386
ETSI TS 138331 V17.0.0 (2022-05)
```
FailureReportSCG-EUTRA ::=
    failureType
    measResultFreqListMRDC
    measResultSCG-FailureMRDC
    ...;
    [ [
    locationInfo-rl6
    ] ]
}
MeasResultFreqListFailMRDC ::= SEQUENCE (SIZE (1.. maxFreq)) OF MeasResult2EUTRA
-- TAG-SCGFAILUREINFORMATIONEUTRA-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SCGFailurelnformationEUTRA field descriptions \\
\hline \begin{tabular}{l}
measResultFreqListMRDC \\
The field contains available results of measurements on E-UTRA frequencies the UE is configured to measure by measConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultSCG-FailureMRDC \\
Includes the E-UTRA MeasResuitSCG-FailureMRDC IE as specified in TS 36.331 [10]. The field contains available results of measurements on E-UTRA frequencies the UE is configured to measure by the E-UTRA RRCConnectionReconfiguration message.
\end{tabular} \\
\hline
\end{tabular}
- SecurityModeCommand

The SecurityModeCommand message is used to command the activation of AS security.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
SecurityModeCommand message
```
-- ASNISTART
-- TAG-SECURITYMODECOMMAND-START
SecurityModeCommand ::= SEQUENCE \
    rrc-TransactionIdentifier
    criticalExtensions
        securityModeCommand
        criticalExtensionsFuture
    }
```


ETSI


--- Page 388  ---


3GPP TS 38.331 version 17.0.0 Release 17
387
ETSI TS 138331 V17.0.0 (2022-05)
```
}
SecurityModeCommand-IEs ::=
    securityConfigSMC
    lateNonCriticalExtension
    nonCriticalExtension
}
SecurityConfigSMC ::=
    securityAlgorithmConfig
    ...
}
-- TAG-SECURITYMODECOMMAND-STOP
-- ASNISTOP

SEQUENCE 1
    SecurityConfigSMC,
    OCTET STRING OPTIONAL,
    SEQUENCE[?
SEQUENCE \
    SecurityAlgorithmConfig,
```


\section*{- SecurityModeComplete \\ \( \_\_\_\_ \) \\ SecurityModeComplete}

The SecurityModeComplete message is used to confirm the successful completion of a security mode command.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
\( \_\_\_\_ \)
                                                                                                                                                            "

SecurityModeComplete message
```
-- ASNISTART
-- TAG-SECURITYMODECOMPLETE-START
SecurityModeComplete ::=
    rrc-TransactionIdentifier
    criticalExtensions
        securityModeComplete
        criticalExtensionsFuture
    }
}
SecurityModeComplete-IEs ::= SEQUENCE {
    lateNonCriticalExtension
    nonCriticalExtension
}
-- TAG-SECURITYMODECOMPLETE-STOP
-- ASNISTOP
    String
    SEQUENCE[}
```


SecurityModeComplete message
```
OPTIONAL,
    OPTIONAL
```
OPTIONAL,
OPTIONAL

ETSI


--- Page 389  ---


3GPP TS 38.331 version 17.0.0 Release 17
388
ETSI TS 138331 V17.0.0 (2022-05)
- SecurityModeFailure

The SecurityModeFailure message is used to indicate an unsuccessful completion of a security mode command.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
SecurityModeFailure message
-- ASNISTART
-- TAG-SECURITYMODEFAILURE-START

SecurityModeFailure : :=
rrc-TransactionIdentifier
criticalextensions
securityModeEailure
criticalExtensionsFuture
\}
\}
SecurityModeEailure-IEs : :=
lateNonCriticalExtension
nonCriticalExtension
\}
-- TAG-SECURITYMODEFAILURE-STOP
-- ASNISTOP

SIB1
- SIB1

SEQUENCE 1
RRC-TransactionIdentifier,
CHOICE [
SecurityModeEailure-IEs,
SEQUENCE \{\}

SEQUENCE 1
OCTET STRING OPTIONAL,
SEQUENCE [\}

OPTIONAL

SIB1 contains information relevant when evaluating if a UE is allowed to access a cell and defines the scheduling of other system information. It also contains radio resource configuration information that is common for all UEs and barring information applied to the unified access control.

Signalling radio bearer: N/A
RLC-SAP: TM
Logical channels: BCCH
Direction: Network to UE

ETSI


--- Page 390  ---


3GPP TS 38.331 version 17.0.0 Release 17
389
ETSI TS 138331 V17.0.0 (2022-05)

SIB1 message
```
-- ASNISTART
-- TAG-SIBl-START
SIBl ::= SEQUENCE \
    cellSelectionInfo SEQUENCE {
        q-RxLevMin
        q-RxLevMinOffset
        q-RxLevMinSUL
        q-QualMin
        q-QualMinOffset
    }
    cellAccessRelatedInfo CellAccessRelatedInfo,
    connEstFailureControl
    si-SchedulingInfo
    SI-SchedulingInfo
    ingCellConfigComon ServingCellConfigCommonSIB
    ENUMERATED {true}
    u
    u
    uac-BarringInfo
        dac-BarringForCommon
        UAC-BarringPerPLMN-List
        uac-BarringInfoSetList UAC-BarringInfoSetList,
        uac-AccessCategoryl-SelectionAssistanceInfo CHOICE {
            plmnCommon UAC-AccessCategoryl-SelectionAssistanceInfo,
        }
    }
    useFullResumeID ENUMERATED {true}
    lateNonCriticalExtension OCTET STRING
    nonCriticalExtension SIBl-vl6l0-IEs
}
SIBl-vl6lO-IEs ::= SEQUENCE [
```

```
    idleModeMeasurementsNR-r16 ENUMERATED{true}
    posSI-SchedulingInfo-rl6 PosSI-SchedulingInfo-rl6
    nonCriticalExtension SIBl-vl630-IEs
}
SIBl-vl630-IEs ::= SEQUENCE {
    uac-BarringInfo-vl630 SEQUENCE {
        uac-ACl-SelectAssistInfo-rl6 SEQUENCE (SIZE (2..MAXPLMN)) OF UAC-ACl-SelectAssistInfo-rl6
    }
```

```
}
SIBl-vl700-IEs ::= SEQUENCE {
```

```
    uac-BarringInfo-vl700 SEQUENCE {
```


ETSI


--- Page 391  ---


3GPP TS 38.331 version 17.0.0 Release 17
390
ETSI TS 138331 V17.0.0 (2022-05)
```
    featurePriorities-rl7 SEQUENCE {
        redCapPriority-rl7 seaturePriority-rl7
        \begin{array} { l l } { \text { slicingPriority-rl7} } & { \text { FeaturePriority-rl7} } \\ { \text { ce-Priority-rl7 } } & { \text { FeaturePriority-rl7} } \end{array}
        sdt-Priority-rl7 FeaturePriority-rl7
        .
    j
    si-SchedulingInfo-vl700 SI-SchedulingInfo-vl700
    hyperSEN-rl7 BIT STRING (SIZE (10))
    eDRX-Allowed-rl7 ENUMERATED {true}
    -- FFS whether eDRX-allowed is one or two bits, i.e. separate for idle/inactive
    halfDuplexRedCapAllowed-rl7 ENUMERATED {true}
    -- FFS whether halfDuplexRedCapAllowed is kept, remove also from related procedure
    cellBarredRedCap-rl7 SEQUENCE {
        cellBarredRedCaplRx-rl7 ENUMERATED {barred, notBarred},
        cellBarredRedCap2Rx-rl7 ENUMERATED [barred, notBarred}
    }
    intraFreqReselectionRedCap-rl7 ENUMERATED {allowed, notAllowed}
    nonCriticalExtension SEQUENCE {}
}
UAC-AccessCategoryl-SelectionAssistanceInfo::= ENUMERATED {a, b, c}
UAC-ACl-SelectAssistInfo-rl6 ::= ENUMERATED {a, b, c, notConfigured}
SDT-ConfigCommonSIB-rl7 ::= SEQUENCE \
    sdt-RSRP-Threshold-rl7 RSRP-Range,
```

```
                byte8000, byte9000, byte10000, byte12000, byte24000, byte48000, byte96000},
    t319a-r17 ENUMERATED \ ms100, ms200, ms300, ms 400, ms600, ms1000, ms2000,
                    ms3000, ms4000, spare7, spare6, spare5, spare4, spare3, spare2, sparel},
    ...
}
FeaturePriority-rl7 ::= INTEGER (0..15)
-- TAG-SIBl-STOP
-- ASNISTOP
```


ETSI


--- Page 392  ---


3GPP TS 38.331 version 17.0.0 Release 17
391
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB1 field descriptions \\
\hline \begin{tabular}{l}
cellBarredRedCap1Rx \\
Value barred means that the cell is barred for a RedCap UE with 1 Rx branch, as defined in TS 38.304 [20]. This field is ignored by non-RedCap UEs.
\end{tabular} \\
\hline \begin{tabular}{l}
cellBarredRedCap2Rx \\
Value barred means that the cell is barred for a RedCap UE with 2 Rx branches, as defined in TS 38.304 [20]. This field is ignored by non-RedCap UEs.
\end{tabular} \\
\hline \begin{tabular}{l}
cellSelectioninfo \\
Parameters for cell selection related to the serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
eCallOverIMS-Support \\
Indicates whether the cell supports eCall over IMS services as defined in TS 23.501 [32]. If absent, eCall over IMS is not supported by the network in the cell.
\end{tabular} \\
\hline \begin{tabular}{l}
eDRX-Allowed \\
The presence of this field indicates that extended DRX is allowed in the cell for UEs in RRC_IDLE and in RRC_INACTIVE. The UE shall stop using extended DRX if eDRXAllowed is not present.
\end{tabular} \\
\hline \begin{tabular}{l}
featurePriorities \\
Indicates priorities for features, such as RedCap, Slicing, etc. These priorities are used to determine which FeatureCombinationPreambles the UE shall use when a feature maps to more than one FeatureCombinationPreambles, as specified in TS 38.321 [3]. A lower value means a higher priority. The network does not signal the same priority for more than one feature. The network signals a priority for all feature that map to at least one FeatureCombinationPreambles.
\end{tabular} \\
\hline \begin{tabular}{l}
halfDuplexRedCap-Allowed \\
FFS: The presence of this field indicates whether the cell supports half-duplex FDD RedCap UEs.
\end{tabular} \\
\hline \begin{tabular}{l}
hsdn-Cell \\
This field indicates this is a HSDN cell as specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
hyperSFN \\
Indicates hyper SFN which increments by one when the SFN wraps around.
\end{tabular} \\
\hline \begin{tabular}{l}
idleModeMeasurementsEUTRA \\
This field indicates that a UE that is configured for EUTRA idle/inactive measurements shall perform the measurements while camping in this cell and report availability of these measurements when establishing or resuming a connection in this cell. If absent, a UE is not required to perform EUTRA idle/inactive measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
idieModeMeasurementsNR \\
This field indicates that a UE that is configured for NR idle/inactive measurements shall perform the measurements while camping in this cell and report availability of these measurements when establishing or resuming a connection in this cell. If absent, a UE is not required to perform NR idlefinactive measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
ims-EmergencySupport \\
Indicates whether the cell supports IMS emergency bearer services for UEs in limited service mode. If absent, IMS emergency call is not supported by the network in the cell for UEs in limited service mode.
\end{tabular} \\
\hline \begin{tabular}{l}
intraFreqReselectionRedCap \\
Controls cell selection/reselection to intra-frequency cells for RedCap UEs when this cell is barred, or treated as barred by the RedCap UE, as specified in TS 38.304 [20]. If not present, a RedCap UE treats the cell as barred, i.e.,the UE considers that the cell does not support RedCap.
\end{tabular} \\
\hline \begin{tabular}{l}
q-QualMin \\
Parameter "Qqualmin" in TS 38.304 [20], applicable for serving cell. If the field is absent, the UE applies the (default) value of negative infinity for Qqualmin.
\end{tabular} \\
\hline \begin{tabular}{l}
q-QualMinOffset \\
Parameter "Qqualminoffset" in TS 38.304 [20]. Actual value Qqualminoffset \( = \) field value [dB]. If the field is absent, the UE applies the (default) value of 0 dB for \( Q_{q u a l m i n o f f s e t} \). Affects the minimum required quality level in the cell.
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMin \\
Parameter "Qrxlevmin" in TS 38.304 [20], applicable for serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMinOffset \\
Parameter "Qxlevminoffset" in TS 38.304 [20]. Actual value \( Q_{\text {xlevminoffset }}= \) field value * 2 [dB]. If absent, the UE applies the (default) value of 0 dB for \( Q_{\text {xlevminoffset. }} \) Affects the minimum required Rx level in the cell.
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMinSUL \\
Parameter "Qrxlevmin" in TS 38.304 [20], applicable for serving cell.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 393  ---


3GPP TS 38.331 version 17.0.0 Release 17
392
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
sdt-RSRP-Threshold \\
RSRP threshold for UE to determine whether to perform SDT procedure, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-DataVolumeThreshold \\
Data volume threshold used to determine whether SDT can be initiated, as specified in TS 38.321 [3]. Value byte 32 corresponds to 32 bytes, value byte 100 corresponds to 100 bytes, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-LogicalChannelSR-DelayTimer \\
The value of logicalChanneISR-DelayTimer applied during SDT for logical channels configured with SDT, as specified in TS 38.321 [3]. Value in number of subframes. Value sf 20 corresponds to 20 subframes, sf 40 corresponds to 40 subframes, and so on. If this field is not configured, then logicalChannelSR-DelayTimer is not applied for SDT logical channels.
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellConfigCommon \\
Configuration of the serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
t319a \\
Initial value of the timer T319a. Value \( m s 100 \) corresponds to 100 milliseconds, value \( m s 200 \) corresponds to 200 milliseconds and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
uac-AccessCategory1-SelectionAssistanceinfo \\
Information used to determine whether Access Category 1 applies to the UE, as defined in TS 22.261 [25]. If pimnCommon is chosen, the UAC-AccessCategory1SelectionAssistancelnfo is applicable to all the PLMNs and SNPNs in plmn-IdentitylnfoList and npn-IdentitylnfoList. If individualPLMNList is chosen, the \( 1^{\text {st }} \) entry in the list corresponds to the first network within all of the PLMNs and SNPNs across the pimn-IdentityList and the npn-IdentitylnfoList, the \( 2^{\text {nd }} \) entry in the list corresponds to the second network within all of the PLMNs and SNPNs across the pimn-IdentityList and the npn-IdentitylnfoList and so on. If uac-AC1-SelectAssistinfo-r16 is present, the UE shall ignore the uac-AccessCategory 1-SelectionAssistancelnfo.
\end{tabular} \\
\hline \begin{tabular}{l}
uac-AC1-SelectAssistinfo \\
Information used to determine whether Access Category 1 applies to the UE, as defined in TS 22.261 [25]. The \( 1^{\text {st }} \) entry in the list corresponds to the first network within all of the PLMNs and SNPNs across the pimn-IdentityList and npn-IdentitylnfoList, the \( 2^{\text {nd }} \) entry in the list corresponds to the second network within all of the PLMNs and SNPNs across the pimn-IdentityList and the npn-Identity/nfoList and so on. Value notConfigured indicates that Access Category1 is not configured for the corresponding PLMN/SNPN.
\end{tabular} \\
\hline \begin{tabular}{l}
uac-BarringForCommon \\
Common access control parameters for each access category. Common values are used for all PLMNs/SNPNs, unless overwritten by the PLMN/SNPN specific configuration provided in uac-BarringPerPLMN-List. The parameters are specified by providing an index to the set of configurations (uac-Barring/nfoSetList). UE behaviour upon absence of this field is specified in clause 5.3.14.2.
\end{tabular} \\
\hline \begin{tabular}{l}
ue-TimersAndConstants \\
Timer and constant values to be used by the UE. The cell operating as PCell always provides this field.
\end{tabular} \\
\hline \begin{tabular}{l}
useFullResumelD \\
Indicates which resume identifier and Resume request message should be used. UE uses full-RNT/and RRCResumeRequest/i if the field is present, or short/-RNT/ and RRCResumeRequest if the field is absent.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline MINT & The field is optionally present, Need R, in a cell that provides a configuration for disaster roaming, otherwise it is absent. \\
\hline Standalone & The field is mandatory present in a cell that supports standalone operation, otherwise it is absent. \\
\hline
\end{tabular}
- SidelinkUEInformationNR

The SidelinkUEinformationNR message is used for the indication of NR sidelink UE information to the network.
Signalling radio bearer: SRB1
RLC-SAP: AM

ETSI


--- Page 394  ---


3GPP TS 38.331 version 17.0.0 Release 17
393
ETSI TS 138331 V17.0.0 (2022-05)

Logical channel: DCCH
Direction: UE to Network
SidelinkUEInformationNR message
```
-- ASNISTART
-- TAG-SIDELINKUEINFORMATIONNR-START
SidelinkUEInformationNR-r16::= SEQUENCE {
    criticalExtensions CHOICE {
        sidelinkUEInformationNR-r16 SidelinkUEInformationNR-rl6-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
SidelinkUEInformationNR-r16-IEs ::= SEQUENCE {
    sl-RxInterestedFreqList-rl6 SL-InterestedFreqList-rl6 OPTIONAL,
    sl-TxResourceReqList-rl6
    sl-FailureList-rl6 SL-FailureList-rl6 OPTIONAL,
    lateNonCriticalExtension
    nonCriticalExtension SidelinkUEInformationNR-vl700-IEs OPTIONAL
}
SidelinkUEInformationNR-vl700-IEs ::= SEQUENCE {
    sl-TxResourceReqList-vl700 SL-TxResourceReqList-vl700
    sl-RxDRX-ReportList-vl700 SL-RxDRX-ReportList-vl700
    sl-RxInterestedFreqListDisc-rl7 SL-InterestedFreqList-rl6
    sl-TxResourceReqListDisc-rl7 SL-TxResourceReqListDisc-rl7
    sl-TxResourceReqListCommRelay-rl7 SL-TxResourceReqListCommRelay-rl7
    ue-Type-rl7
    sl-SourceIdentity-RemoteUE-rl7
    nonCriticalExtension
}
SL-InterestedFreqList-rl6 ::= SEQUENCE (SIZE (l..MaxNrofFreqSL-rl6)) OF INTEGER (l..MAXNrofFreqSL-rl6)
SL-TxResourceReqList-rl6 ::= SEQUENCE (SIZE (1..maxNrofSL-Dest-r16)) OF SL-TxResourceReq-rl6
SL-TxResourceReq-rl6 ::= SEQUENCE {
    sl-DestinationIdentity-r16
    sl-CastType-rl6
    sl-RLC-ModeIndicationList-r16
    sl-QOS-InfoList-rl6
    sl-TypeTxSyncList-rl6
    sl-TxInterestedFreqList-rl6
    sl-CapabilityInformationSidelink-rl6 OCTET STRING
}
SL-TxResourceReqList-vl700 ::= SEQUENCE (SIZE (1..maxNrofSL-Dest-r16)) OF SL-TxResourceReq-vl700
SL-RxDRX-ReportList-vl700 ::= SEQUENCE (SIZE (l..maxNrofSL-Dest-r16)) OF SL-RxDRX-Report-vl700
```


ETSI


--- Page 395  ---


3GPP TS 38.331 version 17.0.0 Release 17
394
ETSI TS 138331 V17.0.0 (2022-05)
```
SL-TxResourceReq-vl700 ::= SEQUENCE {
    sl-DRX-InfoFromRx-List-rl7 SEQUENCE (SIZE (l..maxNrofSL-Rx-InfoSet-rl7)) OF SL-DRX-ConfigUC-SemiStatic-rl7 OPTIONAL
}
SL-RxDRX-Report-vl700 ::= SEQUENCE {
    sl-DRX-ConfigFromTx-rl7
    sl-RxInterestedQoS-InfoList-rl7
}
SL-TxResourceReqListDisc-rl7 ::= SEQUENCE (SIZE (l..maxNrofSL-Dest-rl6)) OF SL-TxResourceReqDisc-rl7
SL-TxResourceReqDisc-rl7 ::= SEQUENCE {
    sl-DestinationIdentityDisc-rl7
    sl-SourceIdentity-RelayUE-rl7
    sl-CastTypeDisc-rl7
    sl-TxInterestedFreqListDisc-rl7
    sl-TypeTxSyncListDis-rl7
    sl-DiscoveryType-rl7
    ...
}
SL-TxResourceReqListCommRelay-rl7 ::= SEQUENCE (SIZE (1..maxNrofSL-Dest-rl6)) OF SL-TxResourceReqCommRelay-rl7
SL-TxResourceReqCommRelay-rl7 ::= CHOICE {
    sl-TxResourceReqL2U2N-Relay-rl7
    sl-TxResourceReqL3U2N-Relay-rl7 SL-TxResourceReq-rl6
}
SL-TxResourceReqL2U2N-Relay-rl7 ::= SEQUENCE {
    sl-DestinationIdentityL2U2N-r17 SL-DestinationIdentity-r16 OPTIONAL,
    sl-TxInterestedFreqListL2U2N-rl7
    sl-TypeTxSyncListL2U2N-rl7
    sl-LocalID-Request-rl7
    sl-PagingIdentity-RemoteUE-rl7
    sl
    ...
}
SL-TxInterestedFreqList-rl6 ::= SEQUENCE (SIZE (l..MaxNrofFreqSL-rl6)) OF INTEGER (l..MaxNrofFreqSL-rl6)
SL-QoS-Info-rl6 ::= SEQUENCE [
    sl-QoS-FlowIdentity-rl6
    sl-QoS-Profile-rl6
}
SL-RLC-ModeIndication-rl6 ::=
    sl-Mode-rl6
        sl-AM-Mode-rl6
        sl-UM-Mode-rl6
    },
    sl-QoS-InfoList-rl6
}
SL-FailureList-rl6 ::= SEQUENCE (SIZE (1..maxNrofSL-Dest-rl6)) OF SL-Failure-rl6
```


ETSI


--- Page 396  ---


3GPP TS 38.331 version 17.0.0 Release 17
395
ETSI TS 138331 V17.0.0 (2022-05)
```
SL-Failure-rl6 ::=
    sl-DestinationIdentity-rl6
    sl-Failure-rl6
}
-- TAG-SIDELINKUEINFORMATIONNR-STOP
-- ASNISTOP
```

```
SEQUENCE \
    SL-DestinationIdentity-rl6,
    ENUMERATED {rlf, configFailure, spare6, spare5, spare4, spare3, spare2, sparel}
```


Editor's Note 1: the content of assistance information for determining sidelink DRX configuration, is FFS.
Editor's Note 2: FFS on inactivity timer to be included in assistance information from RX UE to TX UE.

\begin{tabular}{|l|}
\hline SidelinkUEinformationNR field descriptions \\
\hline \begin{tabular}{l}
sl-RxDRX-ReportList \\
Indicates the reported DRX configuration received from peer UE and the reported QoS profile for which service UE is interested to the network for NR sidelink unicast communication.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-RxinterestedFreqList \\
Indicates the index of frequency on which the UE is interested to receive NR sidelink communication. The value 1 corresponds to the frequency of first entry in sl-FreqinfoList broadcast in SIB12, the value 2 corresponds to the frequency of second entry in sl-FreqinfoList broadcast in SIB12 and so on. In this release, only value 1 can be included in the interested frequency list.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Sourceldentity-RemoteUE \\
This field is used to indicate the Source Layer-2 ID to be used to establish PC5 link with L2 U2N Relay UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TxResourceReq \\
Parameters to request the transmission resources for NR sidelink communication to the network in the Sidelink UE Information report.
\end{tabular} \\
\hline \begin{tabular}{l}
ue-Type \\
Indicates the UE is acting as U2N Relay UE or U2N Remote UE.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 397  ---


3GPP TS 38.331 version 17.0.0 Release 17
396
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-TxResourceReq field descriptions \\
\hline \begin{tabular}{l}
si-CapabilityinformationSidelink \\
Includes the UECapabilitylnformationSidelink message (which can be also included in ueCapabilitylnformationSidelink-r16 in UECapabilityEnquirySidelink from peer UE) received from the peer UE.
\end{tabular} \\
\hline \begin{tabular}{l}
si-CastType \\
Indicates the cast type for the corresponding destination for which to request the resource.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Destinationidentity \\
Indicates the destination for which the TX resource request and allocation from the network are concerned.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DRX-InfoFromRx-List \\
Indicates list of the sidelink DRX assistance information received from peer UE for NR sidelink unicast communication.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-QoS-InfoList \\
Includes the QoS profile of the sidelink QoS flow as specified in TS 23.287 [55].
\end{tabular} \\
\hline \begin{tabular}{l}
sI-QoS-Flowldentity \\
This identity uniquely identifies one sidelink QoS flow between the UE and the network in the scope of UE, which is unique for different destination and cast type.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-RLC-Modelndication \\
This field indicates the RLC mode and optionally the related QoS profiles for the sidelink radio bearer, which has not been configured by the network and is initiated by another UE in unicast. The RLC mode for one sidelink radio bearer is aligned between UE and NW by the si-QoS-Flowldentity.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-TxinterestedFreqList \\
Each entry of this field indicates the index of frequency on which the UE is interested to transmit NR sidelink communication. The value 1 corresponds to the frequency of first entry in sl-FreqinfoList broadcast in SIB12, the value 2 corresponds to the frequency of second entry in sl-FreqinfoList broadcast in SIB12 and so on. In this release, only value 1 can be included in the interested frequency list. In this release, only one entry can be included in the list.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-TypeTxSyncList \\
A list of synchronization reference used by the UE. The UE shall include the same number of entries, listed in the same order, as in si-TxinterestedFreqList, i.e. one for each carrier frequency included in si-TxinterestedFreqList.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-Failure field descriptions \\
\hline \begin{tabular}{l}
si-Destinationidentity \\
Indicates the destination for which the SL failure is reporting for unicast.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Failure \\
Indicates the sidelink failure cause for the sidelink RLF (value \( n f \) ) and sidelink AS configuration failure (value configFailure) for the associated destination for unicast.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 398  ---


3GPP TS 38.331 version 17.0.0 Release 17
397
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-RxDRX-Report field descriptions \\
\hline \begin{tabular}{l}
sl-DRX-ConfigFromTx \\
Indicates the sidelink DRX configuration received from peer UE for NR sidelink unicast communication.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RxinterestedQoS-infoList \\
Indicates the QoS profile for which UE reports its interested service to the network, for NR sidelink groupcast or broadcast communication.
\end{tabular} \\
\hline SL-TxResourceReqDisc field descriptions \\
\hline \begin{tabular}{l}
sI-DestinationIdentityDisc \\
This field is used to indicate the destination L2 ID for which the TX resource request and allocation from the network are concerned for discovery by L2 U2N Remote UE, or L2 U2N Relay UE, or L3 U2N Relay UE, or L3 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Sourceldentity-RelayUE \\
This field is used to indicate the source L2 ID of relay-related discovery transmission by L2 U2N Relay UE.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TxinterestedFreqListDisc \\
Each entry of this field indicates the index of frequency on which the UE is interested to transmit NR sidelink discovery. The value 1 corresponds to the frequency of first entry in sl-Freq/nfoList broadcast in SIB12, the value 2 corresponds to the frequency of second entry in sl-FreqlnfoList broadcast in SIB12 and so on. In this release, only value 1 can be included in the interested frequency list. In this release, only one entry can be included in the list.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-TxResourceReqCommRelay field descriptions \\
\hline \begin{tabular}{l}
si-DestinationidentityL2U2N \\
This field is used to indicate the destination L2 ID for which the TX resource request and allocation from the network are concerned for the established PC5 link for relay by L2 U2N Relay UE, or L3 U2N Relay UE, or L3 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-LocallD-Request \\
This field is used to request local UE ID for the corresponding destination by the L2 U2N Relay UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-TxinterestedFreqListL2U2N \\
Each entry of this field indicates the index of frequency on which the UE is interested to transmit NR sidelink communication for established PC5 link for relay. The value 1 corresponds to the frequency of first entry in sl-FreqinfoList broadcast in SIB12, the value 2 corresponds to the frequency of second entry in sl-FreqinfoList broadcast in SIB12 and so on. In this release, only value 1 can be included in the interested frequency list. In this release, only one entry can be included in the list.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-Pagingidentity-RemoteUE \\
This field is used to indicate the paging UE ID for the corresponding destination by the L2 U2N Relay UE.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) Systeminformation

The SystemInformation message is used to convey one or more System Information Blocks or Positioning System Information Blocks. All the SIBs or posSIBs included are transmitted with the same periodicity.

Signalling radio bearer: N/A
RLC-SAP: TM
Logical channels: BCCH
Direction: Network to UE

ETSI


--- Page 399  ---


3GPP TS 38.331 version 17.0.0 Release 17
398
ETSI TS 138331 V17.0.0 (2022-05)

Systeminformation message
```
-- ASNISTART
-- TAG-SYSTEMINFORMATION-START
SystemInformation ::= SEQUENCE \
    criticalExtensions CHOICE \
        systemInformation
        criticalExtensionsFuture-rl6 CHOICE {
            posSystemInformation-r16 PosSystemInformation-rl6-IEs,
            criticalExtensionsFuture SEQUENCE {}
        }
    }
}
SystemInformation-IEs ::=
    sib-TypeAndInfo
        sib2
        sib3 sib4
        sib4 SIB4,
        sib5 SIB5,
        sib6 SIB6,
        sib7 SIB7,
        sib8 SIB8,
        sib9 SIB9,
        ...;
        siblu-vl610 SIBlO-rl6,
        sibll-vl6lu SIBll-rl6,
        sibl2-vl610 SIBl2-rl6,
        sibl3-vl610 SIBl3-rl6,
        sibl4-v1610 SIBl4-r16,
        sibl5-vl700 Sibl6-vl700 SIBl6-rl7,
        sibl6-vl700 Sibl7-vl700 SIBl7-rl7,
        sibl8-vl700 SIBl8-rl7,
        sibl9-vl700 SIBl9-rl7,
        sib20-vl700 SIB20-r17,
        sib21-vl700
        sib2l-vl700 SIB21-rl7
    },
    lateNonCriticalExtension
    nonCriticalExtension
}
-- TAG-SYSTEMINFORMATION-STOP
-- ASNISTOP
```


UEAssistanceInformation
The UEAssistanceInformation message is used for the indication of UE assistance information to the network.
Signalling radio bearer: SRB1, SRB3

ETSI


--- Page 400  ---


3GPP TS 38.331 version 17.0.0 Release 17
399
ETSI TS 138331 V17.0.0 (2022-05)

RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
UEAssistancelnformation message
```
-- ASNISTART
-- TAG-UEASSISTANCEINFORMATION-START
UEAssistanceInformation ::=
    criticalExtensions
        ueAssistanceInformation
        criticalE
    }
}
UEAssistanceInformation-IEs ::= SEQUENCE {
    delayBudgetReport
    lateNonCriticalExtension
    nonCriticalExtension UEAssistanceInformation-vl540-IEs OPTIONAL
}
DelayBudgetReport::= CHOICE \
    typel
                    msMinusl280, msMinus640, msMinus320, msMinusl60, msMinus80, msMinus60, msMinus40,
                    msMinus20, ms0, ms20, ms40, ms60, ms80, ms160, ms320, ms640, ms1280},
    ...
}
UEAssistanceInformation-vl540-IEs ::= SEQUENCE {
    overheatingAssistance
    nonCriticalExtension UEAssistanceInformation-vl6l0-IEs OPTIONAL
}
OverheatingAssistance ::= SEQUENCE \
    reducedMaxCCs
    reducedMaxBW-FRl
    reducedMaxBW-FR2
    reducedMaxMIMO-LayersFRl
        reducedMIMO-LayersFRl-DL
        reducedMIMO-LayersFRl-UL
    } OPTIONAL,
    reducedMaxMIMO-LayersFR2
        reducedMIMO-LayersFR2-DL
        reducedMIMO-LayersFR2-UL
    } OPTIONAL
}
OverheatingAssistance-rl7 ::= SEQUENCE {
    reducedMaxBW-FR2-2-r17
        reducedBW-FR2-2-DL-r17
        reducedBW-FR2-2-UL-r17
        reducedBW-FR2-2-UL-r17
                ReducedAggregatedBandwidth-rl7 OPTIONAL,
```


ETSI


--- Page 401  ---


3GPP TS 38.331 version 17.0.0 Release 17
400
ETSI TS 138331 V17.0.0 (2022-05)
```
    } OPTIONAL,
    reducedMaxMIMO-LayersFR2-2 SEQUENCE {
        reducedMIMO-LayersFR2-2-DL
        reducedMIMO-LayersFR2-2-UL
    } OPTIONAL
}
```

```
ReducedAggregatedBandwidth-r17 ::= ENUMERATED {mhz0, mhz100, mhz200, mhz400, mhz800, mhz1200, mhz1600, mhz2000}
UEAssistanceInformation-vl610-IEs ::= SEQUENCE {
    idc-Assistance-rl6 IDC-Assistance-rl6 OPTIONAL,
    drx-Preference-rl6 DRX-Preference-rl6 OPTIONAL,
    maxBW-Preference-rl6 MaxBW-Preference-rl6 OPTIONAL,
    maxcc-Preference-rl6 MaxCC-Preference-rl6 OPTIONAL,
    maxMIMO-LayerPreference-rl6 MaxMIMO-LayerPreference-rl6 OPTIONAL,
    minSchedulingOffsetPreference-rl6 MinSchedulingOffsetPreference-rl6 OPTIONAL,
    releasePreference-rl6 ReleasePreference-rl6 OPTIONAL,
    sl-UE-AssistanceInformationNR-r16 SL-UE-AssistanceInformationNR-r16 OPTIONAL,
    referenceTimeInfoPreference-rl6 BOOLEAN OPTIONAL,
    nonCriticalextension UEAssistanceInformation-vl700-IEs OPTIONAL
}
UEAssistanceInformation-vl700-IEs ::= SEQUENCE {
    ul-GapFR2-Preference-rl7 UL-GapFR2-Preference-rl7 OPTIONAL,
    musim-Assistance-rl7 MUSIM-Assistance-rl7 OPTIONAL,
    overheatingAssistance-rl7 OverheatingAssistance-rl7 OPTIONAL,
    maxBW-PreferenceFR2-2-rl7 MaxBW-PreferenceFR2-2-rl7 OPTIONAL,
    maxMIMO-LayerPreferenceFR2-2-rl7 MaxMIMO-LayerPreferenceFR2-2-rl7 OPTIONAL,
    minSchedulingOffsetPreferenceExt-rl7 MinSchedulingOffsetPreferenceExt-rl7 OPTIONAL,
    rlm-MeasRelaxationState-rl7 OPTIONAL,
    bfd-MeasRelaxationState-rl7 BIT STRING (SIZE (32)) OPTIONAL,
    nonSDT-DataIndication-rl7 SEQUENCE {
        resumeCause-rl7 ResumeCause OPTIONAL
    } OPTIONAL,
    scg-DeactivationPreference ENUMERATED { scgDeactivationPreferred, noPreference } OPTIONAL,
    uplinkData-rl7 ENUMERATED { true } OPTIONAL,
    rrm-MeasRelaxationFulfilment-rl7 OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
IDC-Assistance-r16 ::= SEQUENCE \
    affectedCarrierFreqList-rl6 AffectedCarrierFreqList-rl6 OPTIONAL,
    affectedCarrierFreqCombList-rl6 AffectedCarrierFreqCombList-rl6 OPTIONAL,
    ...
}
AffectedCarrierFreqList-rl6 ::= SEQUENCE (SIZE (l.. maxFreqIDC-rl6)) OF AffectedCarrierFreq-rl6
AffectedCarrierFreq-rl6 ::= SEQUENCE {
    carrierFreq-rl6 ARFCN-ValueNR,
    interferenceDirection-rl6 ENUMERATED {nr, other, both, spare}
}
```


ETSI


--- Page 402  ---


3GPP TS 38.331 version 17.0.0 Release 17
401
ETSI TS 138331 V17.0.0 (2022-05)
```
AffectedCarrierFreqCombList-r16 ::= SEQUENCE (SIZE (1..maxCombIDC-rl6)) OF AffectedCarrierFreqComb-rl6
AffectedCarrierFreqComb-rl6 ::= SEQUENCE [
    affectedCarrierFreqComb-r16
    SEQUENCE (SIZE (2..maxNrofServingCells)) OF ARFCN-ValueNR OPTIONAL,
}
VictimSystemType-rl6 ::= SEQUENCE \
    gps-rl6 ENUMERATED {true} OPTIONAL,
    glonass-rl6 ENUMERATED {true} OPTIONAL,
    bds-rl6 ENUMERATED {true} OPTIONAL,
    galileo-rl6 ENUMERATED {true} OPTIONAL,
    navIC-rl6 ENUMERATED {true} OPTIONAL,
    wlan-rl6 ENUMERATED {true} OPTIONAL,
    bluetooth-rl6 ENUMERATED {true} OPTIONAL,
    ...
}
DRX-Preference-rl6 ::= SEQUENCE {
    preferredDRX-InactivityTimer-rl6 ENUMERATED {
                    ms0, msl, ms2, ms3, ms4, ms5, ms6, ms8, msl0, ms20, ms30, ms40, ms50, ms60, ms80,
                    msl00, ms200, ms300, ms500, ms750, ms1280, ms1920, ms2560, spare9, spare8,
                    spare7, spare6, spare5, spare4, spare3, spare2, sparel} OPTIONAL,
    preferredDRX-LongCycle-rl6 ENUMERATED {
                    msl0, ms20, ms32, ms40, ms60, ms64, ms70, ms80, ms128, ms160, ms256, ms320, ms512,
                ms640, msl024, msl280, ms2048, ms2560, ms5120, msl0240, sparel2, sparell, sparel0,
                spare9, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel } OPTIONAL,
    preferredDRX-ShortCycle-rl6 ENUMERATED {
                ms2, ms3, ms4, ms5, ms6, ms7, ms8, msl0, msl4, msl6, ms20, ms30, ms32,
                ms35, ms40, ms64, ms80, msl28, ms160, ms256, ms320, ms512, ms640, spare9,
                spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel } OPTIONAL,
    preferredDRX-ShortCycleTimer-r16 INTEGER (1..16) OPTIONAL
}
MaxBW-Preference-rl6 ::= SEQUENCE \
    reducedMaxBW-FRl-rl6 ReducedMaxBW-FRx-r16 OPTIONAL,
    reducedMaxBW-FR2-r16 ReducedMaxBW-FRx-r16 OPTIONAL
}
MaxBW-PreferenceER2-2-rl7 ::= SEQUENCE [
    reducedMaxBW-FR2-2-r17 SEQUENCE {
        reducedBW-FR2-2-DL-r17 ReducedAggregatedBandwidth-r17 OPTIONAL,
        reducedBW-FR2-2-UL-rl7 ReducedAggregatedBandwidth-rl7 OPTIONAL
    } OPTIONAL
}
MaxCC-Preference-rl6 ::= SEQUENCE \
    reducedMaxCCs-r16 ReducedMaxCCs-r16 OPTIONAL
}
MaxMIMO-LayerPreference-rl6 ::= SEQUENCE {
    reducedMaxMIMO-LayersFRl-rl6 SEQUENCE {
        reducedMIMO-LayersFRl-DL-r16 INTEGER (1..8),
```


ETSI


--- Page 403  ---


3GPP TS 38.331 version 17.0.0 Release 17
402
ETSI TS 138331 V17.0.0 (2022-05)
```
        reducedMIMO-LayersFRl-UL-rl6 INTEGER (1..4)
    } OPTIONAL,
    reducedMaxMIMO-LayersFR2-r16 SEQUENCE {
        reducedMIMO-LayersFR2-DL-r16 INTEGER (1..8),
        reducedMIMO-LayersFR2-UL-r16 INTEGER (1..4)
    } OPTIONAL
}
MaxMIMO-LayerPreferenceFR2-2-rl7 ::= SEQUENCE \
    reducedMaxMIMO-LayersFR2-2-rl7 SEQUENCE {
        reducedMIMO-LayersFR2-2-DL-r17 INTEGER (1..8),
        reducedMIMO-LayersFR2-2-UL-rl7 INTEGER (1..4)
    } OPTIONAL
}
MinSchedulingOffsetPreference-rl6 ::= SEQUENCE [
    preferredKO-rl6 SEQUENCE \
        preferredKO-SCS-15kHz-rl6 ENUMERATED {sll, sl2, sl4, sl6} OPTIONAL,
        preferredKO-SCS-30kHz-rl6 ENUMERATED {sll, sl2, sl4, sl6} OPTIONAL,
        preferredKO-SCS-60kHz-rl6 ENUMERATED {sl2, sl4, sl8, sll2} OPTIONAL,
        preferredKO-SCS-120kHz-rl6 ENUMERATED {sl2, sl4, sl8, sll2}
    }
    preferredK2-r16 SEQUENCE \
        preferredK2-SCS-15kHz-r16 ENUMERATED {sl1, sl2, sl4, sl6} OPTIONAL,
        preferredK2-SCS-30kHz-r16 ENUMERATED {sll, sl2, sl4, sl6} OPTIONAL,
        preferredK2-SCS-60kHz-r16 ENUMERATED {sl2, sl4, sl8, sl12} OPTIONAL,
        preferredK2-SCS-120kHz-rl6 ENUMERATED {sl2, sl4, sl8, sl12} OPTIONAL
    }
}
MinSchedulingOffsetPreferenceExt-rl7 ::= SEQUENCE [
    preferredKO-rl7 SEQUENCE {
        preferredKO-SCS-480kHz-rl7 ENUMERATED {sl8, sll6, sl32, sl48} OPTIONAL,
        preferredKO-SCS-960kHz-rl7 ENUMERATED {sl8, sll6, sl32, sl48} OPTIONAL
    }
    preferredK2-rl7 SEQUENCE {
        preferredK2-SCS-480kHz-r17 ENUMERATED {sl8, sll6, sl32, sl48} OPTIONAL,
        preferredK2-SCS-960kHz-rl7 ENUMERATED {sl8, sll6, sl32, sl48} OPTIONAL
    }
}
MUSIM-Assistance-rl7 ::= SEQUENCE {
    musim-PreferredRRC-State-rl7
    musim-GapPreferenceList-rl7 MUSIM-GapPreferenceList-rl7 OPTIONAL,
    ...
}
MUSIM-GapPreferenceList-rl7 ::= SEQUENCE (SIZE (1..3)) OF MUSIM-GapPrefInfo-rl7
MUSIM-GapPrefInfo-rl7 := SEQUENCE [ -- FFS if reuse IE MUSIM-GapInfo-rl7
    musim-Starting-SFN-AndSubframe-rl7 MUSIM-Starting-SFN-AndSubframe-rl7 OPTIONAL,
    musim-GapLength-rl7 ENUMERATED {ms3, ms4, ms6, msl0, ms20},
    musim-GapRepetitionAndOffset-rl7 CHOICE {
        ms20-r17 INTEGER (0..19),
```


ETSI


--- Page 404  ---


3GPP TS 38.331 version 17.0.0 Release 17
403
ETSI TS 138331 V17.0.0 (2022-05)
```
        ms40-rl7 INTEGER (0..39),
        ms80-r17 INTEGER (0..79),
        msl60-rl7 INTEGER (0..159),
        ms320-r17 INTEGER (0..319),
        ms640-rl7 INTEGER (0..639),
        msl280-r17 INTEGER (0..1279),
        ms2560-rl7 INTEGER (0..2559),
        ms5120-rl7 INTEGER (0..5119),
        \cdots
    } OPTIONAL
}
ReleasePreference-rl6 ::= SEQUENCE [
    preferredRRC-State-rl6 ENUMERATED {idle, inactive, connected, outOfConnected}
}
ReducedMaxBW-FRx-rl6 ::= SEQUENCE \
    reducedBW-DL-r16
    reducedBW-UL-rl6 ReducedAggregatedBandwidth
}
ReducedMaxCCs-r16 ::=
    reducedCCsDL-rl6
    reducedCCsUL-r16
}
SL-UE-AssistanceInformationNR-rl6 ::= SEQUENCE (SIZE (l..MaxNrofTrafficPattern-rl6)) OF SL-TrafficPatternInfo-rl6
SL-TrafficPatternInfo-r16::= SEQUENCE \
```

```
    timingOffset-rl6 INTEGER (0..10239),
    messageSize-rl6 BIT STRING (SIZE (8)),
    sl-QoS-FlowIdentity-rl6 SL-QOS-FlowIdentity-rl6
}
UL-GapFR2-Preference-rl7::= SEQUENCE \
    ul-GapFR2-PatternPreference-rl7 OPTIONAL
--Editor's note: This is to indicate the preferred UL gap pattern, as defined in TS38.133.
}
-- TAG-UEASSISTANCEINFORMATION-STOP
-- ASNISTOP
```


Editor's note: The value range for ReducedAggregatedBandwidth-r17 needs RAN4 confirmation
Editor's note: The value range for preferred K0/K2 for SCS 960 kHz needs RAN1 confirmation

ETSI


--- Page 405  ---


3GPP TS 38.331 version 17.0.0 Release 17
404
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UEAssistancelnformation field descriptions \\
\hline \begin{tabular}{l}
affectedCarrierFreqList \\
Indicates a list of NR carrier frequencies that are affected by IDC problem.
\end{tabular} \\
\hline \begin{tabular}{l}
affectedCarrierFreqCombList \\
Indicates a list of NR carrier frequencie combinations that are affected by IDC problems due to Inter-Modulation Distortion and harmonics from NR when configured with UL CA.
\end{tabular} \\
\hline \begin{tabular}{l}
bfd-MeasRelaxationState \\
Indicates the relaxation state of BFD measurements. Each bit corresponds to a serving cell of the cell group. A serving cell is mapped to the (servCellindex+1)-th bit, starting from MSB. A bit that is set to 1 indicates that the UE performs BFD measurements relaxation on the serving cell mapped on the bit. A bit that is set to 0 indicates that the UE does not perform BFD measurements relaxation on the serving cell mapped on the bit.
\end{tabular} \\
\hline \begin{tabular}{l}
delayBudgetReport \\
Indicates the UE-preferred adjustment to connected mode DRX.
\end{tabular} \\
\hline \begin{tabular}{l}
interferenceDirection \\
Indicates the direction of IDC interference. Value \( n r \) indicates that only NR is victim of IDC interference, value other indicates that only another radio is victim of IDC interference and value both indicates that both NR and another radio are victims of IDC interference. The other radio refers to either the ISM radio or GNSS (see TR 36.816 [44]).
\end{tabular} \\
\hline \begin{tabular}{l}
minSchedulingOffsetPreference \\
Indicates the UE's preferences on minimumScheduling Offset of cross-slot scheduling for power saving.
\end{tabular} \\
\hline \begin{tabular}{l}
minScheduling OffsetPreferenceExt \\
Indicates the UE's preferences on minimumSchedulingOffset of cross-slot scheduling for power saving for SCS 480 kHz and/or 960 kHz .
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapLength \\
Indicates the length of the UE's preferred MUSIM gap length.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapOffset \\
Indicates the gap offset of the UE's preferred MUSIM gap.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapPreferenceList \\
Indicates the MUSIM gap(s) that the UE prefers to be configured with.
\end{tabular} \\
\hline \begin{tabular}{l}
musim- PreferredRRC-State \\
Indicates the UE's preferred RRC state when leaving RRC_CONNECTED.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapRepetitionAndOffsetPeriod \\
Indicates the gap repetition period and gap offset of the UE's preferred periodic MUSIM gap without leaving RRC_CONNECTED state. This field is only used for periodic gaps.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-PrefStarting-SFN-AndSubframex \\
Indicates gap starting position offor UE's preferred aperiodic MUSIM gap without leaving RRC_CONNECTED state
\end{tabular} \\
\hline \begin{tabular}{l}
preferredDRX-InactivityTimer \\
Indicates the UE's preferred DRX inactivity timer length for power saving. Value in ms (milliSecond). \( m s 0 \) corresponds to \( 0, m s 1 \) corresponds to \( 1 \mathrm{~ms}, m s 2 \) corresponds to 2 ms , and so on. If the field is absent from the DRX-Preference IE, it is interpreted as the UE having no preference for the DRX inactivity timer. If secondary DRX group is configured, the preferredDRX-InactivityTimer only applies to the default DRX group.
\end{tabular} \\
\hline \begin{tabular}{l}
preferredDRX-LongCycle \\
Indicates the UE's preferred long DRX cycle length for power saving. Value in \( \mathrm{ms} . \mathrm{ms} 10 \) corresponds to \( 10 \mathrm{~ms}, \mathrm{~ms} 20 \) corresponds to \( 20 \mathrm{~ms}, \mathrm{~ms} 32 \) corresponds to 32 ms , and so on. If preferredDRX-ShortCycle is provided, the value of preferredDRX-LongCycle shall be a multiple of the preferredDRX-ShortCycle value. If the field is absent from the DRX-Preference IE, it is interpreted as the UE having no preference for the long DRX cycle.
\end{tabular} \\
\hline \begin{tabular}{l}
preferredDRX-ShortCycle \\
Indicates the UE's preferred short DRX cycle length for power saving. Value in ms. ms2 corresponds to \( 2 \mathrm{~ms}, \mathrm{~ms} 3 \) corresponds to \( 3 \mathrm{~ms}, \mathrm{~ms} 4 \) corresponds to 4 ms , and so on. If the field is absent from the DRX-Preference IE, it is interpreted as the UE having no preference for the short DRX cycle.
\end{tabular} \\
\hline \begin{tabular}{l}
preferredDRX-ShortCycleTimer \\
Indicates the UE's preferred short DRX cycle timer for power saving. Value in multiples of preferredDRX-ShortCycle. A value of 1 corresponds to preferredDRX-ShortCycle, a value of 2 corresponds to 2 * preferredDRX-ShortCycle and so on. If the field is absent from the DRX-Preference IE, it is interpreted as the UE having no preference for the short DRX cycle timer. A preference for the short DRX cycle is indicated when a preference for the short DRX cycle timer is indicated.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 406  ---


3GPP TS 38.331 version 17.0.0 Release 17
405
ETSI TS 138331 V17.0.0 (2022-05)

UEAssistancelnformation field descriptions
preferredKO
Indicates the UE's preferred value of \( k O \) (slot offset between DCI and its scheduled PDSCH - see TS 38.214 [19], clause 5.1.2.1) for cross-slot scheduling for power saving. Value is defined for each subcarrier spacing (numerology) in units of slots. s/1 corresponds to 1 slot, s/2 corresponds to 2 slots, s/4 corresponds to 4 slots, and so on. If a value for a subcarrier spacing is absent, it is interpreted as the UE having no preference on \( k O \) for cross-slot scheduling for that subcarrier spacing. If the field is absent from the MinSchedulingOffsetPreference IE, it is interpreted as the UE having no preference on \( k O \) for cross-slot scheduling.
preferredK2
Indicates the UE's preferred value of \( k 2 \) (slot offset between DCI and its scheduled PUSCH - see TS 38.214 [19], clause 6.1.2.1) for cross-slot scheduling for power saving. Value is defined for each subcarrier spacing (numerology) in units of slots. s/ 1 corresponds to 1 slot, s \( / 2 \) corresponds to 2 slots, s 4 corresponds to 4 slots, and so on. If a value for a subcarrier spacing is absent, it is interpreted as the UE having no preference on \( k 2 \) for cross-slot scheduling for that subcarrier spacing. If the field is absent from the MinSchedulingOffsetPreference IE, it is interpreted as the UE having no preference on \( k 2 \) for cross-slot scheduling.
preferredRRC-State
Indicates the UE's preferred RRC state. The value idle is indicated if the UE prefers to be released from RRC_CONNECTED and transition to RRC_IDLE. The value inactive is indicated if the UE prefers to be released from RRC_CONNECTED and transition to RRC_INACTIVE. The value connected is indicated if the UE prefers to revert an earlier indication to leave RRC_CONNECTED state. The value outOfConnected is indicated if the UE prefers to be released from RRC_CONNECTED and has no preferred RRC state to transition to. The value connected can only be indicated if the UE is configured with connectedReporting.
reducedBW-FR1
Indicates the UE's preference on reduced configuration corresponding to the maximum aggregated bandwidth across all downlink carrier(s) and across all uplink carrier(s) of FR1, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cell(s) operating on FR1. The aggregated bandwidth across all downlink carrier(s) of FR1 is the sum of bandwidth of active downlink BWP(s) across all activated downlink carrier(s) of FR1. The aggregated bandwidth across all uplink carrier(s) of FR1 is the sum of bandwidth of active uplink BWP(s) across all activated uplink carrier(s) of FR1. If the field is absent from the MaxBW-Preference IE or the OverheatingAssistance IE, it is interpreted as the UE having no preference on the maximum aggregated bandwidth of FR1.
When indicated to address overheating, this maximum aggregated bandwidth includes carrier(s) of FR1 of both the NR MCG and the SCG. This maximum aggregated bandwidth only includes carriers of FR1 of the SCG in (NG)EN-DC. Value \( m h z 0 \) is not used when indicated to address overheating.
When indicated to address power saving, this maximum aggregated bandwidth includes carrier(s) of FR1 of the cell group that this UE assistance information is associated with. The aggregated bandwidth can only range up to the current active configuration when indicated to address power savings.
reducedBW-FR2
Indicates the UE's preference on reduced configuration corresponding to the maximum aggregated bandwidth across all downlink carrier(s) and across all uplink carrier(s) of FR2-1, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cell(s) operating on FR2-1. The aggregated bandwidth across all downlink carrier(s) of FR2-1 is the sum of bandwidth of active downlink BWP(s) across all activated downlink carrier(s) of FR2-1. The aggregated bandwidth across all uplink carrier(s) of FR2 is the sum of bandwidth of active uplink BWP(s) across all activated uplink carrier(s) of FR2-1. If the field is absent from the MaxBW-Preference IE or the OverheatingAssistance IE, it is interpreted as the UE having no preference on the maximum aggregated bandwidth of FR2-1.
When indicated to address overheating, this maximum aggregated bandwidth includes carrier(s) of FR2 of both the NR MCG and the NR SCG. This maximum aggregated bandwidth only includes carriers of FR2-1 of the SCG in (NG)EN-DC.
When indicated to address power saving, this maximum aggregated bandwidth includes carrier(s) of FR2-1 of the cell group that this UE assistance information is associated with. The aggregated bandwidth can only range up to the current active configuration when indicated to address power savings.
reducedMaxBW-FR2-2
Indicates the 'UE's preference on reduced configuration corresponding to the maximum aggregated bandwidth across all downlink carrier(s) and across all uplink carrier(s) of FR2-2, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cell(s) operating on FR2-2. The aggregated bandwidth across all downlink carrier(s) of FR2-2 is the sum of bandwidth of active downlink BWP(s) across all activated downlink carrier(s) of FR2-2. The aggregated bandwidth across all uplink carrier(s) of FR2-2 is the sum of bandwidth of active uplink BWP(s) across all activated uplink carrier(s) of FR2-2. If the field is absent from the MaxBW-PreferenceFR2-2 IE or the OverheatingAssistance IE, it is interpreted as the UE having no preference on the maximum aggregated bandwidth of FR2-2.
When indicated to address overheating, this maximum aggregated bandwidth includes carrier(s) of FR2-2 of both the NR MCG and the NR SCG.
When indicated to address power saving, this maximum aggregated bandwidth includes carrier(s) of FR2-2 of the cell group that this UE assistance information is associated with. The aggregated bandwidth can only range up to the current active configuration when indicated to address power savings.

ETSI


--- Page 407  ---


3GPP TS 38.331 version 17.0.0 Release 17
406
ETSI TS 138331 V17.0.0 (2022-05)

UEAssistancelnformation field descriptions
reducedCCsDL
Indicates the UE's preference on reduced configuration corresponding to the maximum number of downlink SCells indicated by the field, to address overheating or power saving.
When indicated to address overheating, this maximum number includes both SCells of the NR MCG and PSCell/SCells of the SCG. This maximum number only includes PSCell/SCells of the SCG in (NG)EN-DC.
When indicated to address power saving, this maximum number includes PSCell/SCells of the cell group that this UE assistance information is associated with. The maximum number of downlink SCells can only range up to the current active configuration when indicated to address power savings.
reducedCCsUL
Indicates the UE's preference on reduced configuration corresponding to the maximum number of uplink SCells indicated by the field, to address overheating or power saving. When indicated to address overheating, this maximum number includes both SCells of the NR MCG and PSCell/SCells of the SCG. This maximum number only includes PSCell/SCells of the SCG in (NG)EN-DC.
When indicated to address power saving, this maximum number includes PSCell/SCells of the cell group that this UE assistance information is associated with. The maximum number of uplink SCells can only range up to the current active configuration when indicated to address power savings.
reducedMMO-LayersFR1-DL
Indicates the UE's preference on reduced configuration corresponding to the maximum number of downlink MIMO layers of each serving cell operating on FR1 indicated by the field, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cells operating on FR1. The maximum number of downlink MIMO layers can only range up to the maximum number of MIMO layers configured across all activated downlink carrier(s) of FR1 in the cell group when indicated to address power savings.
reducedMIMO-LayersFR1-UL
Indicates the UE's preference on reduced configuration corresponding to the maximum number of uplink MIMO layers of each serving cell operating on FR1 indicated by the field, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cells operating on FR1. The maximum number of uplink MIMO layers can only range up to the maximum number of MIMO layers configured across all activated uplink carrier(s) of FR1 in the cell group when indicated to address power savings.
reducedMMMO-LayersFR2-DL
Indicates the UE's preference on reduced configuration corresponding to the maximum number of downlink MIMO layers of each serving cell operating on FR2-1 indicated by the field, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cells operating on FR2-1. The maximum number of downlink MIMO layers can only range up to the maximum number of MIMO layers configured across all activated downlink carrier(s) of FR2-1 in the cell group when indicated to address power savings.
reducedMMO-LayersFR2-UL
Indicates the UE's preference on reduced configuration corresponding to the maximum number of uplink MIMO layers of each serving cell operating on FR2-1 indicated by the field, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cells operating on FR2-1. The maximum number of uplink MIMO layers can only range up to the maximum number of MIMO layers configured across all activated uplink carrier(s) of FR2-1 in the cell group when indicated to address power savings.
reducedMMO-LayersFR2-2-DL
Indicates the 'UE's preference on reduced configuration corresponding to the maximum number of downlink MIMO layers of each serving cell operating on FR2-2 indicated by the field, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cells operating on FR2-2. The maximum number of downlink MIMO layers can only range up to the maximum number of MIMO layers configured across all activated downlink carrier(s) of FR2-2 in the cell group when indicated to address power savings.
reducedMMO-LayersFR2-2-UL
Indicates the 'UE's preference on reduced configuration corresponding to the maximum number of uplink MIMO layers of each serving cell operating on FR2-2 indicated by the field, to address overheating or power saving. This field is allowed to be reported only when UE is configured with serving cells operating on FR2-2. The maximum number of uplink MIMO layers can only range up to the maximum number of MIMO layers configured across all activated uplink carrier(s) of FR2-2 in the cell group when indicated to address power savings.
reference TimeInfoPreference
Indicates whether the UE prefers being provisioned with the timing information specified in the IE ReferenceTime/nfo.

ETSI


--- Page 408  ---


3GPP TS 38.331 version 17.0.0 Release 17
407
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UEAssistanceInformation field descriptions \\
\hline \begin{tabular}{l}
rim-MeasRelaxationState \\
Indicates the relaxation state of RLM measurements. Value true indicates that the UE performs relaxation of RLM measurements, and value false indicates that the UE does not perform relaxation of RLM measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
rrm-MeasRelaxationFulfilment \\
Indicates whether the UE fulfils the relaxed measurement criterion for stationary UE in 5.7.4.4. Value true indicates that the UE fulfils the criterion, and value false indicates that the UE does not fulfil the criterion.
\end{tabular} \\
\hline \begin{tabular}{l}
si-QoS-Flowidentity \\
This identity uniquely identifies one sidelink QoS flow between the UE and the network in the scope of UE, which is unique for different destination and cast type.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-UE-AssistancelnformationNR \\
Indicates the traffic characteristic of sidelink logical channel(s), specified in the IE SL-TrafficPatterninfo, that are setup for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
starting-SFN \\
indicates gap starting SFN number of UE's preferred aperiodic MUSIM gap without leaving RRC_CONNECTED state
\end{tabular} \\
\hline \begin{tabular}{l}
starting-subframe \\
indicates gap starting subframe number of UE's preferred aperiodic MUSIM gap without leaving RRC_CONNECTED state
\end{tabular} \\
\hline \begin{tabular}{l}
type1 \\
Indicates the preferred amount of increment/decrement to the long DRX cycle length with respect to the current configuration. Value in number of milliseconds. Value ms 40 corresponds to 40 milliseconds, msMinus40 corresponds to -40 milliseconds and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
ul-GapFR2-PatternPreference \\
Indicates the UE's preference on FR2 UL gap pattern.
\end{tabular} \\
\hline \begin{tabular}{l}
victimSystemType \\
Indicate the list of victim system types to which IDC interference is caused from NR when configured with UL CA. Value gps, glonass, bds, galileo and nav/C indicates the type of GNSS. Value wlan indicates WLAN and value bluetooth indicates Bluetooth.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline nonSDT-Data-Indication field descriptions \\
\hline \begin{tabular}{l}
nonSDT-Dataindication \\
Informs the network about the arrival of data mapped to radio bearers not configured for SDT data during SDT.
\end{tabular} \\
\hline \begin{tabular}{l}
resumeCause \\
Provides the resume cause based on the information received from the upper layers.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-TrafficPatterninfo field descriptions \\
\hline \begin{tabular}{l}
messageSize \\
Indicates the maximum TB size based on the observed traffic pattern. The value refers to the index of TS 38.321 [3], table 6.1.3.1-2.
\end{tabular} \\
\hline \begin{tabular}{l}
timingOffset \\
This field indicates the estimated timing for a packet arrival in a sidelink logical channel. Specifically, the value indicates the timing offset with respect to subframe\#0 of SFN\#0 in milliseconds.
\end{tabular} \\
\hline \begin{tabular}{l}
trafficPeriodicity \\
This field indicates the estimated data arrival periodicity in a sidelink logical channel. Value ms20 corresponds to 20 ms , ms50 corresponds to 50 ms and so on.
\end{tabular} \\
\hline
\end{tabular}
- UECapabilityEnquiry

The UECapabilityEnquiry message is used to request UE radio access capabilities for NR as well as for other RATs.

ETSI


--- Page 409  ---


3GPP TS 38.331 version 17.0.0 Release 17
408
ETSI TS 138331 V17.0.0 (2022-05)

Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
UECapabilityEnquiry message
```
-- ASNISTART
-- TAG-UECAPABILITYENOUIRY-START
UECapabilityEnquiry ::=
SEQUENCE {
    RRC-TransactionIdentifier,
    CHOICE [
        UECapabilityEnquiry-IEs,
        SEQUENCE {}
}
UECapabilityEnquiry-IEs ::= SEQUENCE \
    ue-CapabilityRAT-RequestList
    lateNonCriticalExtension
    ue-CapabilityEnquiryExt
}
UECapabilityEnquiry-vl560-IEs ::= SEQUENCE {
    capabilityRequestFilterCommon
    nonCriticalExtension
}
UECapabilityEnquiry-vl610-IEs ::= SEQUENCE {
    rrc-SegAllowed-rl6
    nonCriticalExtension
}
-- TAG-UECAPABILITYENQUIRY-STOP
-- ASNISTOP
```


UECapability/nformation
The IE UECapabilityInformation message is used to transfer UE radio access capabilities requested by the network.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH

ETSI


--- Page 410  ---


3GPP TS 38.331 version 17.0.0 Release 17
409
ETSI TS 138331 V17.0.0 (2022-05)

Direction: UE to Network
UECapabilityInformation message
```
-- ASNISTART
-- TAG-UECAPABILITYINFORMATION-START
UECapabilityInformation ::= SEQUENCE \
    rrc-TransactionIdentifier RRC-TransactionIdentifier,
    criticalExtensions
        ueCapabilityInformation
        criticalExtensionsFuture
    }
}
UECapabilityInformation-IEs ::= SEQUENCE {
    ue-CapabilityRAT-ContainerList
    lateNonCriticalExtension
    nonCriticalExtension
}
-- TAG-UECAPABILITYINFORMATION-STOP
-- ASNISTOP
```


UEInformationRequest
The UEInformationRequest message is used by the network to retrieve information from the UE.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
UEInformationRequest message
```
-- ASNISTART
-- TAG-UEINFORMATIONREQUEST-START
UEInformationRequest-rl6 ::= SEQUENCE \
    rrc-TransactionIdentifier
    criticalExtensions
        ueInformationRequest-rl6
        criticalExtensionsFuture SEQUENCE {}
    }
}
```


ETSI


--- Page 411  ---


3GPP TS 38.331 version 17.0.0 Release 17
410
ETSI TS 138331 V17.0.0 (2022-05)
```
UEInformationRequest-rl6-IEs ::= SEQUENCE {
    idleModeMeasurementReq-rl6 ENUMERATED{true} OPTIONAL, -- Need N
    logMeasReportReq-r16 ENUMERATED {true} OPTIONAL, -- Need N
    connEstFailReportReq-r16 ENUMERATED {true} OPTIONAL, -- Need N
    ra-ReportReq-rl6 ENUMERATED {true} OPTIONAL, -- Need N
    rlf-ReportReq-rl6 ENUMERATED {true} OPTIONAL, -- Need N
    mobilityHistoryReportReq-rl6 ENUMERATED {true}
    lateNonCriticalExtension OCTET STRING
    nonCriticalExtension UEInformationRequest-vl700-IEs
}
UEInformationRequest-vl700-IEs ::= SEQUENCE {
    successHO-ReportReq-rl7 ENUMERATED {true} OPTIONAL, -- Need N
    nonCriticalExtension SEQUENCE {}
}
-- TAG-UEINEORMATIONREQUEST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UEInformationRequest-IEs field descriptions \\
\hline \begin{tabular}{l}
connEstFailReportReq \\
This field is used to indicate whether the UE shall report information about the connection failure.
\end{tabular} \\
\hline \begin{tabular}{l}
idleModeMeasurementReq \\
This field indicates that the UE shall report the idlefinactive measurement information, if available, to the network in the UE/nformationResponse message.
\end{tabular} \\
\hline \begin{tabular}{l}
logMeasReportReq \\
This field is used to indicate whether the UE shall report information about logged measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
mobilityHistoryReportReq \\
This field is used to indicate whether the UE shall report information about mobility history information.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-ReportReq \\
This field is used to indicate whether the UE shall report information about the random access procedure.
\end{tabular} \\
\hline \begin{tabular}{l}
If-ReportReq \\
This field is used to indicate whether the UE shall report information about the radio link failure.
\end{tabular} \\
\hline \begin{tabular}{l}
successHO-ReportReq \\
This field is used to indicate whether the UE shall report information about the successful handover report.
\end{tabular} \\
\hline
\end{tabular}
- UEInformationResponse

The UEInformationResponse message is used by the UE to transfer information requested by the network.
Signalling radio bearer: SRB1 or SRB2 (when logged measurement information is included)
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to network

ETSI


--- Page 412  ---


3GPP TS 38.331 version 17.0.0 Release 17
411
ETSI TS 138331 V17.0.0 (2022-05)

UEInformationResponse message
```
-- ASNISTART
-- TAG-UEINFORMATIONRESPONSE-START
```

```
UEInformationResponse-r16 ::=
    rrc-TransactionIdentifier
    criticalExtensions
        ueInformationResponse-rl6
        criticalExtensionsFuture
    }
}
UEInformationResponse-rl6-IEs ::= SEQUENCE \
    measResultIdleEUTRA-rl6
    measResultIdleNR-rl6
    logMeasReport-rl6
    connEstFailReport-rl6
    ra-ReportList-rl6
    rlf-Report-rl6
    mobilityHistoryReport-rl6
    lateNonCriticalExtension
    nonCriticalExtension
}
UEInformationResponse-vl700-IEs ::= SEQUENCE {
    successHO-Report-rl7
    connEstFailReportList-rl7
    nonCriticalExtension
}
LogMeasReport-r16 ::=
    absoluteTimeStamp-r16
    traceReference-rl6
    traceRecordingSessionRef-rl6
    tce-Id-rl6
    logMeasInfoList-r16
    logMeasAvailable-rl6
    logMeasAvailableBT-r16
    logMeasAvailableWLAN-rl6
    ...
}
LogMeasInfoList-r16 ::=
LogMeasInfo-r16 ::=
    locationInfo-rl6
    relativeTimeStamp-rl6
    servCellIdentity-rl6
    measResultServingCell-rl6
    measResultNeighCells-rl6
        measResultNeighCellListNR
        measResultNeighCellListEUTRA
    },
    },
```


ETSI


--- Page 413  ---


3GPP TS 38.331 version 17.0.0 Release 17
412
ETSI TS 138331 V17.0.0 (2022-05)
```
    anyCellSelectionDetected-rl6
    ...;
    [ [
    inDeviceCoexDetected-rl7 ENUMERATED {true} OPTIONAL
    ]]
}
ConnEstFailReport-rl6 ::= SEQUENCE \
    measResultFailedCell-rl6
    locationInfo-rl6
    measResultNeighCells-rl6
        measResultNeighCellListNR
        measResultNeighCellListEUTRA
    },
    numberOfConnFail-rl6 INTEGER (1..8),
    perRAInfolist-rl6 PerRAInfoList-rl6,
    timeSinceFailure-rl6 TimeSinceFailure-rl6,
    ...
}
ConnEstFailReportList-rl7 ::= SEQUENCE (SIZE (l..MaxCEFReport-rl7)) OF ConnEstFailReport-rl6
MeasResultServingCell-rl6 := SEQUENCE {
    resultsSSB-Cell
    MeasQuantityResults,
        SEQUENCEl
        -ssb-Index SSB-Index,
        r) MeasQuantityResults,
    } OPTIONAL
}
MeasResultFailedCell-rl6 ::= SEQUENCE {
    ggi-Info
    meas CGI-Info-Logging-rl6,
        cellResults-rl6 SEQUENCE\
            resultsSSB-Cell-rl6 MeasQuantityResults
        },
        rsIndexResults-rl6 SEQUENCE\
            resultsSSB-Indexes-rl6 ResultsPerSSB-IndexList
        }
    }
}
RA-ReportList-rl6 ::= SEQUENCE (SIZE (l..maxRAReport-rl6)) OF RA-Report-rl6
RA-Report-rl6::= SEQUENCE {
    cellId-rl6 CHOICE \
        cellGlobalId-rl6 CGI-Info-Logging-rl6,
        pci-arfcn-rl6 SEQUENCE {
            physCellId-rl6 PhysCellId,
            carrierFreq-rl6 ARFCN-ValueNR
        }
    },
    ra-InformationComon-r16 RA-InformationCommon-r16 OPTIONAL,
```


ETSI


--- Page 414  ---


3GPP TS 38.331 version 17.0.0 Release 17
413
ETSI TS 138331 V17.0.0 (2022-05)
```
    raPurpose-rl6
        ENUMERATED {accessRelated, beamFailureRecovery, reconfigurationWithSync, ulUnSynchronized,
            schedulingRequestFailure, noPUCCHResourceAvailable, requestForOtherSI,
            msg3RequestForOtherSI-rl7, spare8, spare7, spare6, spare5, spare4, spare3,
    ...,
    [ [
    spCellID-rl7 CGI-Info-Logging-rl6 OPTIONAL
    ]]
}
RA-InformationCommon-rl6 ::= SEQUENCE {
    absoluteFrequencyPointA-rl6
    locationAndBandwidth-rl6
    subcarrierSpacing-rl6
    msgl-FrequencyStart-rl6
    msgl-FrequencyStartCFRA-rl6
    msgl-SubcarrierSpacing-rl6
    msgl-SubcarrierSpacingCFRA-rl6
    msgl-FDM-rl6
    msgl-FDMCFRA-rl6
    perRAInfoList-rl6
    ...,
    [ [
    perRAInfoList-vl660 PerRAInfoList-vl660 OPTIONAL
    ]],
    [ [
    msgl-SCS-From-prach-ConfigurationIndex-rl6 ENUMERATED {kHzldot25, kHz5, spare2, sparel} OPTIONAL
    ]],
    [ [
    msgA-RO-FrequencyStart-rl7 INTEGER (0..maxNrofPhysicalResourceBlocks-1) OPTIONAL,
    msgA-RO-FrequencyStartCFRA-rl7 INTEGER (0..maxNrofPhysicalResourceBlocks-1) OPTIONAL,
    msgA-SubcarrierSpacing-rl7 SubcarrierSpacing OPTIONAL,
    msgA-RO-FDM-rl7 ENUMERATED {one, two, four, eight} OPTIONAL,
    msgA-RO-FDMCFRA-rl7 ENUMERATED {one, two, four, eight} OPTIONAL,
    msgA-SCS-From-prach-ConfigurationIndex-rl7 ENUMERATED {kHzldot25, kHz5, spare2, sparel} OPTIONAL,
    msgA-TransMax-rl7 ENUMERATED {nl, n2, n4, n6, n8, n10, n20, n50, n100, n200} OPTIONAL,
    msgA-MCS-rl7 INTEGER (0..15) OPTIONAL,
    nrofPRBs-PerMsgA-PO-rl7 INTEGER (1..32) OPTIONAL,
    msgA-PUSCH-TimeDomainAllocation-rl7 INTEGER (l..maxNrofUL-Allocations) OPTIONAL,
    frequencyStartMsgA-PUSCH-r17 INTEGER (0..maxNrofPhysicalResourceBlocks-1) OPTIONAL,
    nrofMsgA-PO-PDM-rl7 ENUMERATED [one, two, four, eight} OPTIONAL,
    dlPathlossRSRP-rl7 RSRP-Range OPTIONAL,
    intendedSIBs-rl7 SEQUENCE (SIZE (l..maxSIB)) OF SIB-Type-rl7 OPTIONAL,
    ssbsForSI-Acquisition-rl7 SEQUENCE (SIZE (1..maxNrofSSBs-rl6)) OF SSB-Index OPTIONAL,
    msgA-PUSCH-PayloadSize-rl7 BIT STRING (SIZE (3)) OPTIONAL,
    onDemandSISuccess-rl7 BOOLEAN OPTIONAL
    ] ]
}
PerRAInfoList-rl6 ::= SEQUENCE (SIZE (1..200)) OF PerRAInfo-rl6
PerRAInfoList-vl660 ::= SEQUENCE (SIZE (1..200)) OF PerRACSI-RSInfo-vl660
PerRAInfo-rl6 ::= CHOICE [
```


ETSI


--- Page 415  ---


3GPP TS 38.331 version 17.0.0 Release 17
414
ETSI TS 138331 V17.0.0 (2022-05)
```
    perRASSBInfoList-rl6 PerRASSBInfo-rl6,
    perRACSI-RSInfoList-rl6 PerRACSI-RSInfo-r16
}
PerRASSBInfo-rl6 ::= SEQUENCE \
    ssb-Index-rl6 SSB-Index,
    numberOfPreamblesSentOnSSB-r16 INTEGER (1..200),
    perRAAttemptInfoList-rl6 PerRAAttemptInfoList-rl6
}
PerRACSI-RSInfo-rl6 ::= SEQUENCE \
    csi-RS-Index-r16 CSI-RS-Index,
    numberOfPreamblesSentOnCSI-RS-rl6 INTEGER (1..200)
}
PerRACSI-RSInfo-vl660 ::= SEQUENCE \
    csi-RS-Index-vl660 INTEGER (1..96) OPTIONAL
}
PerRAAttemptInfoList-rl6 ::= SEQUENCE (SIZE (1..200)) OF PerRAAttemptInfo-rl6
PerRAAttemptInfo-rl6 ::= SEQUENCE {
    contentionDetected-rl6 BOOLEAN OPTIONAL,
    dlRSRPAboveThreshold-rl6 BOOLEAN OPTIONAL,
    ...;
    [ [
    fallbackToFourStepRA-rl7 BOOLEAN OPTIONAL
    ]]
}
```

```
                        sibTypel3-vl610, sibTypel4-vl6l0, spare6, spare5, spare4, spare3, spare2, sparel}
RLF-Report-rl6 ::= CHOICE \
    nr-RLF-Report-rl6
        measResultLastServCell-r16
        measResultNeighCells-rl6
            measResultListNR-r16
            measResultListEUTRA-r16
        }
        c-RNTI-rl6
        previous PCellId-rl6
            nrPreviousCell-rl6
            CGI-Info-Logging-rl6,
        raPreviousCell-rl6
        failedPCellId-rl6 CHOICE {
            nrFailedPCellId-rl6 CHOICE {
                cellGlobalId-rl6 CGI-Info-Logging-rl6,
                pci-arfcn-rl6 SEQUENCE {
                    \begin{array} { l l } { \text { physCellId-rl6 } } & { \text { PhysCellId,} } \\ { \text { carrierFreq-rl6 } } & { \text { ARFCN-Value} } \end{array}
                    carrierFreq-rl6 ARFCN-ValueNR
                }
            },
            eutraFailedPCellId-rl6 CHOICE [
```


ETSI


--- Page 416  ---


3GPP TS 38.331 version 17.0.0 Release 17
415
ETSI TS 138331 V17.0.0 (2022-05)
```
                cellGlobalId-rl6
                pci-arfcn-rl6
                    physCellId-rl6
                    carrierFreq-rl6
                }
            }
        },
        reconnectCellId-rl6
            nrReconnectCellId-rl6
            eutraReconnectCellId-rl6
        }
        timeUntilReconnection-rl6
        reestablishmentCellId-rl6
        timeConnFailure-rl6
        timeSinceFailure-rl6
        connectionFailureType-rl6
        rlf-Cause-rl6
        locationInfo-rl6
        noSuitableCellFound-rl6
        ra-InformationCommon-r16
        ...;
        [ [
        csi-rsRLMConfigBitmap-vl650
        ]],
        [ [
        lastHO-Type-rl7
        timeConnSourceDAPS-Failure-rl7
        timeSinceCHO-Reconfig-rl7
        choCellId-rl7
            cellGlobalId-rl7
            pci-arfcn-rl7
                physCellId-rl7
                carrierFreq-rl7
            }
        }
        choCandidateCellList-rl7
        ]]
    },
    eutra-RLF-Report-r16
        failedPCellId-EUTRA
        measResult-RLF-Report-EUTRA-r16
        ...
    }
}
SuccessHO-Report-rl7 ::=
    sourceCellInfo-rl7
        sourcePCellId-rl7
        sourceCellMeas-rl7
        rlf-InSourceDAPS-rl7
    },
    targetCellInfo-rl7
    }
}
    targetCellInfo-rl7
```

                                CGI-InfoEUTRALogging,
    SEQUENCE [
        EUTRA-PhysCellId,
        ARFCN-ValueEUTRA
        ARFCN-ValueEUTRA
```
CHOICE {
    CGI-Info-Logging-rl6,
    CGI-InfoEUTRALogging
```

                OPTIONAL,
TimeUntilReconnection-rl6 OPTIONAL,
CGI-Info-Logging-rl6 OPTIONAL,
INTEGER (0.1023) OPTIONAL,
TimeSinceEailure-rl6,
ENUMERATED \{rlf, hof\},
ENUMERATED [t310-Expiry, randomAccessProblem, rlc-MaxNumRetx,
                beamFailureRecoveryFailure, lotFailure-rl6,
                bh-rlfRecoveryFailure, t312-expiry-rl7, sparel\},
LocationInfo-rl6 OPTIONAL,
ENUMERATED \{true\} OPTIONAL,
RA-InformationCommon-rl6 OPTIONAL,
BIT STRING (SIZE (96)) OPTIONAL
ENUMERATED [cho, daps, spare2, sparel] OPTIONAL,
TimeConnSourceDAPS-Failure-rl7 OPTIONAL,
TimeSinceCHO-Reconfig-rl7 OPTIONAL,
CHOICE [
    CGI-Info-Logging-rl6,
    SEQUENCE 1
        PhyscellId,
        ARFCN-Valuenr.
                OPTIONAL,
ChoCandidateCellList-rl7 OPTIONAL
SEQUENCE 1
    CGI-InfoEUTRALogging,
    OCTET STRING,
    OCTET STRING,
```
SEQUENCE {
    SEQUENCE {
        CGI-Info-Logging-rl6,
        MeasResultSuccessHONR-rl7 OPTIONAL,
        ENUMERATED {true} OPTIONAL
```

    SEQUENCE 1

ETSI


--- Page 417  ---


3GPP TS 38.331 version 17.0.0 Release 17
416
ETSI TS 138331 V17.0.0 (2022-05)
```
        targetPCellId-rl7 CGI-Info-Logging-rl6,
        targetCellMeas-rl7 MeasResultSuccessHONR-rl7 OPTIONAL
    },
    measResultNeighCells-rl7 SEQUENCE {
        measResultListNR-rl7
        measResultListEUTRA-rl7
    }
    locationInfo-rl7
    timeSinceCHO-Reconfig-rl7
    shr-Cause-rl7
    ra-InformationCommon-rl7
    upInterruptionTimeAtHO-rl7
    c-RNTI-rl7
    ...
}
MeasResultList2NR-r16 ::=
MeasResultList2EUTRA-r16 ::=
MeasResult2NR-r16 ::=
    ssbFrequency-rl6
    refFreqCSI-RS-rl6
    measResultList-r16
}
MeasResultListLogging2NR-r16 ::=
MeasResultLogging2NR-r16 ::=
    carrierFreq-rl6
    measResultListLoggingNR-rl6
}
MeasResultListLoggingNR-rl6 ::=
MeasResultLoggingNR-rl6 ::=
    physCellId-rl6
    resultsSSB-Cell-rl6
    numberOfGoodSSB-rl6
}
MeasResult2EUTRA-r16 ::=
    carrierFreq-rl6
    measResultList-rl6
}
MeasResultRLFNR-r16 ::=
    measResult-rl6
        cellResults-rl6
            resultsSSB-Cell-rl6
            resultsCSI-RS-Cell-rl6
        },
        rsIndexResults-r16 SEQUENCE[
            resultsSSB-Indexes-rl6
            ssbRLMConfigBitmap-rl6
```

```
SEQUENCE (SIZE (l..maxFreq)) OF MeasResult2NR-r16
SEQUENCE (SIZE (1..maxFreq)) OF MeasResult2EUTRA-r16
SEQUENCE \
    ARFCN-ValueNR OPTIONAL,
    ARFCN-ValueNR OPTIONAL,
    MeasResultListNR
SEQUENCE (SIZE (l..maxFreq)) OF MeasResultLogging2NR-rl6
SEQUENCE \
    ARFCN-ValueNR,
    MeasResultListLoggingNR-rl6
SEQUENCE (SIZE (l..maxCellReport)) OF MeasResultLoggingNR-r16
SEQUENCE {
    PhysCellId,
    MeasQuantityResults,
    INTEGER (l..maxNrofSSBs-rl6) OPTIONAL
SEQUENCE {
    ARFCN-ValueEUTRA,
    MeasResultListEUTRA
SEQUENCE \
    SEQUENCE \
        SEQUENCE {
            MeasQuantityResults OPTIONAL,
            MeasQuantityResults OPTIONAL
            ResultsPerSSB-IndexList OPTIONAL,
            BIT STRING (SIZE (64)) OPTIONAL,
```


ETSI


--- Page 418  ---


3GPP TS 38.331 version 17.0.0 Release 17
417
ETSI TS 138331 V17.0.0 (2022-05)
```
            resultsCSI-RS-Indexes-rl6 ResultsPerCSI-RS-IndexList OPTIONAL,
            csi-rsRLMConfigBitmap-rl6 BIT STRING (SIZE (96)) OPTIONAL
        }
    }
}
MeasResultSuccessHONR-rl7::= SEQUENCE {
    measResult-rl7
        - SEQUENCE {
            resultsSSB-Cell-rl7 MeasQuantityResults OPTIONAL,
            resultsCSI-RS-Cell-rl7 MeasQuantityResults OPTIONAL
        },
        rsIndexResults-rl7 SEQUENCE[
            resultsSSB-Indexes-rl7 ResultsPerSSB-IndexList OPTIONAL,
            resultsCSI-RS-Indexes-rl7 ResultsPerCSI-RS-IndexList OPTIONAL
        }
    }
}
ChoCandidateCellList-rl7 ::= SEQUENCE(SIZE (l..maxNrofCondCells-rl6)) OF ChoCandidate-rl7
ChoCandidate-rl7 ::= CHOICE {
    cellGlobalId-rl7
    pci-arfen-rl7
        physCellId-rl7
        carrierFreq-rl7
    }
}
SHR-Cause-rl7 ::= SEQUENCE \
    t304-cause-rl7 ENUMERATED {true} OPTIONAL,
    t310-cause-rl7 ENUMERATED {true}
    t312-cause-rl7 ENUMERATED {true}
    sourceDAPS-Failure-rl7 ENUMERATED {true}
    ...
}
TimeSinceEailure-rl6 ::= INTEGER (0..172800)
MobilityHistoryReport-rl6 ::= VisitedCellInfoList-rl6
TimeUntilReconnection-r16 ::= INTEGER (0..172800)
TimeSinceCHO-Reconfig-rl7 ::= INTEGER (0..1023)
TimeConnSourceDAPS-Failure-rl7 ::= INTEGER (0..1023)
UPInterruptionTimeAtHO-rl7 ::= INTEGER (0..1023)
-- TAG-UEINFORMATIONRESPONSE-STOP
-- ASNISTOP
```


ETSI


--- Page 419  ---


3GPP TS 38.331 version 17.0.0 Release 17
418
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UEInformationResponse-IEs field descriptions \\
\hline \begin{tabular}{l}
logMeasReport \\
This field is used to provide the measurement results stored by the UE associated to logged MDT.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultidieEUTRA \\
EUTRA measurement results performed during RRC_INACTIVE or RRC_IDLE.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultidieNR \\
NR measurement results performed during RRC_INACTIVE or RRC_IDLE.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-ReportList \\
This field is used to provide the list of RA reports that is stored by the UE for the past upto maxRAReport-r16 number of successful random access procedures.
\end{tabular} \\
\hline \begin{tabular}{l}
rlf-Report \\
This field is used to indicate the RLF report related contents.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline LogMeasReport field descriptions \\
\hline \begin{tabular}{l}
absoluteTimeStamp \\
Indicates the absolute time when the logged measurement configuration logging is provided, as indicated by NR within absolute Time/nfo.
\end{tabular} \\
\hline \begin{tabular}{l}
anyCellSelectionDetected \\
This field is used to indicate the detection of any cell selection state, as defined in TS 38.304 [20]. The UE sets this field when performing the logging of measurement results in RRC_IDLE or RRC_INACTIVE and there is no suitable cell or no acceptable cell.
\end{tabular} \\
\hline \begin{tabular}{l}
inDeviceCoexDetected \\
Indicates that measurement logging is suspended due to IDC problem detection.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultServingCell \\
This field refers to the log measurement results taken in the Serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfGoodSSB \\
Indicates the number of good beams (beams that are above absThreshSS-BlocksConsolidation, if configured by the network) associated to the cells within the R value range (which is configured by network for cell reselection) of the highest ranked cell as part of the beam level measurements. If the UE has no SSB of a neighbour cell whose measurement quantity is above the absThreshSS-BlocksConsolidation or if the network has not configured the absThreshSS-BlocksConsolidation, then the UE does not include numberOfGoodSSB for the corresponding neighbour cell. If the UE has no SSB of the serving cell whose measurement quantity is above the absThreshSSBlocksConsolidation or if the network has not configured the absThreshSS-BlocksConsolidation, then the UE shall set the numberOfGoodSSB for the serving cell to one.
\end{tabular} \\
\hline \begin{tabular}{l}
relativeTimeStamp \\
Indicates the time of logging measurement results, measured relative to the absolute Time Stamp. Value in seconds.
\end{tabular} \\
\hline \begin{tabular}{l}
tce-ld \\
Parameter Trace Collection Entity Id: See TS 32.422 [52].
\end{tabular} \\
\hline \begin{tabular}{l}
traceRecordingSessionRef \\
Parameter Trace Recording Session Reference: See TS 32.422 [52].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 420  ---


3GPP TS 38.331 version 17.0.0 Release 17
419
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ConnEstFailReport field descriptions \\
\hline \begin{tabular}{l}
measResultFailedCell \\
This field refers to the last measurement results taken in the cell, where connection establishment failure or connection resume failure happened.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultNeighCells \\
This field refers to the neighbour cell measurements when connection establishment failure or connection resume failure happened.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfConnFail \\
This field is used to indicate the latest number of consecutive failed RRCSetup or RRCResume procedures in the same cell independent of RRC state transition.
\end{tabular} \\
\hline \begin{tabular}{l}
timeSinceFailure \\
This field is used to indicate the time that elapsed since the connection (establishment or resume) failure. Value in seconds. The maximum value 172800 means 172800s or longer.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline RA-InformationCommon field descriptions \\
\hline \begin{tabular}{l}
absoluteFrequencyPointA \\
This field indicates the absolute frequency position of the reference resource block (Common RB 0 ).
\end{tabular} \\
\hline \begin{tabular}{l}
locationAndBandwidth \\
Frequency domain location and bandwidth of the bandwidth part associated to the random-access resources used by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
perRAInfoList, perRAInfoList-v1660 \\
This field provides detailed information about each of the random access attempts in the chronological order of the random access attempts. If perRAInfoList-v1660 is present, it shall contain the same number of entries, listed in the same order as in perRAInfoList-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierSpacing \\
Subcarrier spacing used in the BWP associated to the random-access resources used by the UE.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 421  ---


3GPP TS 38.331 version 17.0.0 Release 17
420
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RA-Report field descriptions \\
\hline \begin{tabular}{l}
cellID \\
This field indicates the CGI of the cell in which the associated random access procedure was performed.
\end{tabular} \\
\hline \begin{tabular}{l}
contentionDetected \\
This field is used to indicate that contention was detected for the transmitted preamble in the given random access attempt or not. This field is not included when the UE performs random access attempt is using contention free random-access resources or when the raPurpose is set to requestForOtherS/or when the RA attempt is a 2 -step RA attempt and fallback to 4-step RA did not occur (i.e. fallbackToFourStepRA is not included or is set to false).
\end{tabular} \\
\hline \begin{tabular}{l}
csi-RS-Index, csi-RS-Index-v1660 \\
This field is used to indicate the CSI-RS index corresponding to the random access attempt. \\
If the random access procedure is for beam failure recovery, the field indicates the NZP-CSI-RS-Resourceld. For CSI-RS index larger than maxNrofCSI-RS-ResourcesRRM-1, the index value is the sum of csi-RS-Index (without suffix) and csi-RS-Index-v1660.
\end{tabular} \\
\hline \begin{tabular}{l}
dIPathlossRSRP \\
Measeured RSRP of the DL pathloss reference obtained at the time of RA_Type selection stage of the RA procedure as captured in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
diRSRPAbove Threshold \\
In 4 step random access procedure, this field is used to indicate whether the DL beam (SSB) quality associated to the random access attempt was above or below the threshold rsrp-ThresholdSSB in beamFailureRecoveryConfig in UL BWP configuration of UL BWP selected for random access procedure initiated for beam failure recovery; Otherwise, rsrp-ThresholdSSB in rach-ConfigCommon in UL BWP configuration of UL BWP selected for random access procedure. \\
In 2 step random access procedure, this field is used to indicate whether the DL beam (SSB) quality associated to the random access attempt was above or below the threshold msgA-RSRP-ThresholdSSB in rach-ConfigCommonTwoStepRA in UL BWP configuration of UL BWP selected for random access procedure.
\end{tabular} \\
\hline \begin{tabular}{l}
fallbackToFourStepRA \\
This field indicates if a fallback indication in MsgB is received (according to TS 38.321 [3]) for the 2-step random access attempt.
\end{tabular} \\
\hline \begin{tabular}{l}
intendedSIBs \\
This field indicates the SIB(s) the UE wanted to receive as a result of the on demand SI request (when the RA procedure is a used as a SI request) initiated by the UE. That is, it indicates the one(s) of the SIB(s) in the SI message(s) requested to be broadcast that the UE was interested in.
\end{tabular} \\
\hline \begin{tabular}{l}
msg1-SCS-From-prach-Configurationindex \\
This field is set by the UE with the corresponding SCS as derived from the prach-Configuration/ndex in RACH-ConfigGeneric when the msg1-SubcarrierSpacing is absent; otherwise, this field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PUSCH-PayloadSize \\
This field indicates the size of the overall payload available in the UE buffer at the time of initiating the 2 step RA procedure. The value refers to the index of TS 38.321 [3], table 6.1.3.1-1, corresponding to the UE buffer size.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RO-FDM \\
This field indicates the number of msgA PRACH transmission occasions Frequency-Division Multiplexed in one time instance for the PRACH resources configured for 2-step CBRA..
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RO-FDMCFRA \\
This field indicates the number of msgA PRACH transmission occasions Frequency-Division Multiplexed in one time instance for the PRACH resources configured for 2-step CFRA.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RO-FrequencyStart \\
This field indicates the lowest resource block of the contention based random-access resources for 2-step CBRA attempts in the random-access procedure. The indication has the form of the offset of the lowest PRACH transmissions occasion with respect to PRB 0 in the frequency domain.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RO-FrequencyStartCFRA \\
This field indicates the lowest resource block of the contention free random-access resources for the 2-step CFRA attempts in the random-access procedure. The indication has the form of the offset of the lowest PRACH transmissions occasion with respect to PRB 0 in the frequency domain.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-SCS-From-prach-Configurationindex \\
This field is set by the UE with the corresponding SCS as derived from the msgA-PRACH-ConfigurationIndex in RACH-ConfigGenericTwoStepRA when the msgASubcarrierSpacing is absent; otherwise, this field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfPreamblesSentOnCSI-RS \\
This field is used to indicate the total number of successive RA preambles that were transmitted on the corresponding CSI-RS.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 422  ---


3GPP TS 38.331 version 17.0.0 Release 17
421
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
numberOfPreamblesSentOnSSB \\
This field is used to indicate the total number of successive RA preambles that were transmitted on the corresponding SS/PBCH block.
\end{tabular} \\
\hline \begin{tabular}{l}
onDemandSISuccess \\
This field is set to true when the RA report entry is included because of either msg1 based on demand SI request or msg3 based on demand SI request and if the on-demand SI request is successful. This field is set to false when the RA report entry is included because of either msg1 based on demand SI request or msg3 based on demand SI request and if the on-demand SI request is not successful. Otherwise, the field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
perRAAttemptinfoList \\
This field provides detailed information about a random access attempt.
\end{tabular} \\
\hline \begin{tabular}{l}
perRACSI-RSinfoList \\
This field provides detailed information about the successive random access attempts associated to the same CSI-RS.
\end{tabular} \\
\hline \begin{tabular}{l}
perRASSBInfoList \\
This field provides detailed information about the successive random access attempts associated to the same SS/PBCH block.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-informationCommon \\
This field is used to provide information on random access attempts. This field is mandatory present.
\end{tabular} \\
\hline \begin{tabular}{l}
raPurpose \\
This field is used to indicate the RA scenario for which the RA report entry is triggered. The RA accesses associated to Initial access from RRC_IDLE, RRC re-establishment procedure, transition from RRC-INACTIVE. The indicator beamFailureRecovery is used in case of successful beam failure recovery related RA procedure in the SpCell [3]. The indicator reconfigurationWithSync is used if the UE executes a reconfiguration with sync. The indicator ulUnSynchronized is used if the random access procedure is initiated in a SpCell by DL or UL data arrival during RRC_CONNECTED when the timeAlignmentTimer is not running in the PTAG or if the RA procedure is initiated in a serving cell by a PDCCH order [3]. The indicator schedulingRequestFailure is used in case of SR failures [3]. The indicator noPUCCHResourceAvailable is used when the UE has no valid SR PUCCH resources configured [3]. The indicator requestForOtherS/is used for MSG1 based on demand SI request. The indicator msg3RequestForOtherS/is used in case of MSG3 based SI request.
\end{tabular} \\
\hline \begin{tabular}{l}
spCellID \\
This field is used to indicate the CGI of the SpCell of the cell group associated to the SCell in which the associated random access procedure was performed. If the UE performs RA procedure on a SCell associated to the MCG, then this field is set to the CGI of the PCell and if the UE performs RA procedure on a SCell associated to the SCG, then this field is set to the CGI of the PSCell. Otherwise, the field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-index \\
This field is used to indicate the SS/PBCH index of the SS/PBCH block corresponding to the random access attempt.
\end{tabular} \\
\hline \begin{tabular}{l}
ssbsForSI-Acquisition \\
This field indicates the SSB(s) (in the form of SSB index(es)) that the UE used to receive the requested SI message(s). The field is present if the purpose of the random access procedure was to request on-demand SI (i.e. if the raPurpose is set to requestForOtherSI or msg3RequestForOtherS). Otherwise, the field is absent.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 423  ---


3GPP TS 38.331 version 17.0.0 Release 17
422
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RLF-Report field descriptions \\
\hline \begin{tabular}{l}
choCandidateCellList \\
This field is used to indicate the list of candidate target cells for conditional handover included in condRRCReconfig at the time of connection failure. The field does not include the candidate target cells included in measResulNeighCells.
\end{tabular} \\
\hline \begin{tabular}{l}
choCellid \\
This field is used to indicate the candidate target cell for conditional handover included in condRRCReconfig that the UE selected for CHO based recovery while T311 is running.
\end{tabular} \\
\hline \begin{tabular}{l}
connectionFailureType \\
This field is used to indicate whether the connection failure is due to radio link failure or handover failure.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-rsRLMConfigBitmap, csi-rsRLMConfigBitmap-v1650 \\
These fields are used to indicate the CSI-RS indexes configured in the RLM configurations for the active BWP when the UE declares RLF or HOF. The UE first fills in the csi-rsRLMConfigBitmap-r16 to indicate the first 96 CSI-RS indexes and then csi-rsRLMConfigBitmap-v1650 to indicate the latter 96 CSI-RS indexes. The first/leftmost bit in csi-rsRLMConfigBitmap-r16 corresponds to CSI-RS index 0, the second bit corresponds to CSI-RS index 1. The firstfleftmost bit in csi-rsRLMConfigBitmap-v1650 corresponds to CSI-RS index 96, the second bit corresponds to CSI-RS index 97. These fields are included only if the RadioLinkMonitoringConfig for the respective BWP is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
c-RNTI \\
This field indicates the C-RNTI used in the PCell upon detecting radio link failure or the C-RNTI used in the source PCell upon handover failure.
\end{tabular} \\
\hline \begin{tabular}{l}
failedPCellid \\
This field is used to indicate the PCell in which RLF is detected or the target PCell of the failed handover. For intra-NR handover \( n r F a i l e d P C e l l d \) is included and for the handover from NR to EUTRA eutraFailedPCellld is included. The UE sets the ARFCN according to the frequency band used for transmission/ reception when the failure occurred.
\end{tabular} \\
\hline \begin{tabular}{l}
failedPCellid-EUTRA \\
This field is used to indicate the PCell in which RLF is detected or the source PCell of the failed handover in an E-UTRA RLF report.
\end{tabular} \\
\hline \begin{tabular}{l}
lastHO-Type \\
This field is used to indicate the type of the last executed handover before the last detected connection failure. The field is set to cho if the last executed handover was initiated by a conditional reconfiguration execution. The field is set to daps if the last executed handover was a DAPS handover.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultListEUTRA \\
This field refers to the last measurement results taken in the neighboring EUTRA Cells, when the radio link failure or handover failure happened.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultListNR \\
This field refers to the last measurement results taken in the neighboring NR Cells, when the radio link failure or handover failure happened or successful handover happened. If configuration of the conditional handover is available in VarConditionalReconfig when the radio link failure happened, or if the the last executed RRCReconfiguration message including reconfigurationWithSync was concerning a conditional handover when the handover failure or the successful handover happened, the UE uses measResuitListNR-r17, otherwise it uses measResuitListNR-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultLastServCell \\
This field refers to the log measurement results taken in the PCell upon detecting radio link failure or the source PCell upon handover failure.
\end{tabular} \\
\hline \begin{tabular}{l}
measResult-RLF-Report-EUTRA \\
Includes the E-UTRA RLF-Report-r9 IE as specified in TS 36.331 [10].
\end{tabular} \\
\hline \begin{tabular}{l}
noSuitableCellFound \\
This field is set by the UE when the T311 expires.
\end{tabular} \\
\hline \begin{tabular}{l}
previousPCellld \\
This field is used to indicate the source PCell of the last handover (source PCell when the last executed RRCReconfiguration message including reconfigurationWithSync was received). For intra-NR handover \( n r P r e v i o u s C e l l \) is included and for the handover from EUTRA to NR eutraPreviousCell is included.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-InformationCommon \\
This field is optionally included when connectionFailureType is set to 'hof' or when connectionFailureType is set to 'rlf' and the \( n f \)-Cause equals to 'randomAccessProblem' or 'beamRecoveryFailure'; otherwise this field is absent.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 424  ---


3GPP TS 38.331 version 17.0.0 Release 17
423
ETSI TS 138331 V17.0.0 (2022-05)

reconnectCellld
This field is used to indicate the cell in which the UE comes back to connected after connection failure and after failing to perform reestablishment. If the UE comes back to RRC CONNECTED in an NR cell then nrReconnectCellll is included and if the UE comes back to RRC CONNECTED in an LTE cell then eutraReconnectCelllD is included reestablishmentCellid
If the UE was not configured with conditionalReconfiguration at the time of re-establishment attempt, or if the cell selected for the re-establishment attempt is not a candidate target cell for conditional reconfiguration, this field is used to indicate the cell in which the re-establishment attempt was made after connection failure.
rif-Cause
This field is used to indicate the cause of the last radio link failure that was detected. In case of handover failure information reporting (i.e., the connectionFailure Type is set to 'hof'), the UE is allowed to set this field to any value.
ssbRLMConfigBitmap
This field is used to indicate the SS/PBCH block indexes configured in the RLM configurations for the active BWP when the UE declares RLF or HOF. The first/leftmost bit corresponds to SSB index 0 , the second bit corresponds to SSB index 1 . This field is included only if the RadioLinkMonitoringConfig for the respective BWP is configured.
timeConnFailure
This field is used to indicate the time elapsed since the last HO execution until connection failure. Actual value \( = \) field value \( { }^{*} 100 \mathrm{~ms} \). The maximum value 1023 means 102.3 s or longer.
timeConnSourceDAPS-Failure
This field is used to indicate the time that elapsed between the last DAPS handover execution and the radio link failure detected in the source cell while T304 is running. Value in milliseconds. The maximum value 1023 means 1023 ms or longer.
timeSinceFailure
This field is used to indicate the time that elapsed since the connection (radio link or handover) failure. Value in seconds. The maximum value 172800 means 172800 s or longer. In the case of failure(s) (either at source or at target or at both) associated to DAPS handover, this field indicates the time elapsed since the latest connection (radio link or handover) failure.
timeSinceCHO-Reconfig
In case of handover failure, this field is used to indicate the time elapsed between the initiation of the last conditional reconfiguration execution towards the target cell and the reception of the latest conditional reconfiguration for this target cell. In case of radio link failure, this field is used to indicate the time elapsed between the radio link failure and the reception of the latest conditional reconfiguration while connected to the source PCell. Actual value \( = \) field value * 100 ms . The maximum value 1023 means 102.3 s or longer.
timeUntilReconnection
This field is used to indicate the time that elapsed between the connection (radio link or handover) failure and the next time the UE comes to RRC CONNECTED in an NR or EUTRA cell, after failing to perform reestablishment. Value in seconds. The maximum value 172800 means 172800s or longer.

\begin{tabular}{|l|}
\hline SuccessHO-Report field descriptions \\
\hline \begin{tabular}{l}
c-RNTI \\
This field indicates the C-RNTI assigned by the target PCell of the handover for which the successful HO report was generated.
\end{tabular} \\
\hline \begin{tabular}{l}
rif-inSourceDAPS \\
This field indicates whether a radio link failure occurred at the source cell while T304 was running, prior to a DAPS handover failure.
\end{tabular} \\
\hline \begin{tabular}{l}
shr-Cause \\
This field is used to indicate the cause of the successful HO report.
\end{tabular} \\
\hline \begin{tabular}{l}
timeSinceCHO-Reconfig \\
This field is used to indicate the time elapsed between the initiation of the last conditional reconfiguration execution towards the target cell and the reception of the latest conditional reconfiguration for this target cell. Actual value \( = \) field value \( { }^{*} 100 \mathrm{~ms} \). The maximum value 1023 means 102.3s or longer.
\end{tabular} \\
\hline \begin{tabular}{l}
upinterruptionTimeAtHO \\
This field is used to indicate the time elapsed between the time of arrival of the last PDCP PDU received from the source cell and the time of arrival of the first non-duplicate PDCP PDU received from the target cell, and it is measured at the time of arrival of the first non-duplicate PDCP PDU received from the target cell only in DAPS HO scenario. \\
Value in milliseconds. The maximum value 1023 means 1023 ms or longer.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 425  ---


3GPP TS 38.331 version 17.0.0 Release 17
424
ETSI TS 138331 V17.0.0 (2022-05)

UEPositioningAssistanceInfo
The UEPositioningAssistancelnfo message is used to provide positioning assistance information as requested by the Network.
Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
UEPositioningAssistancelnfo message
```
-- ASNISTART
-- TAG-UEPOSITIONINGASSISTANCEINFO-START
UEPositioningAssistanceInfo-rl7 ::= SEQUENCE {
    criticalExtensions CHOICE [
        uePositioningAssistanceInfo-rl7 UEPositioningAssistanceInfo-IEs-rl7,
        criticalExtensionsFuture SEQUENCE {}
    }
}
UEPositioningAssistanceInfo-IEs-rl7 ::= SEQUENCE {
    ue-TxTEG-AssociationList-rl7 UE-TxTEG-AssociationList-rl7 OPTIONAL,
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
UE-TxTEG-AssociationList-rl7 := SEQUENCE (SIZE (l..maxUE-Tx-TEG-ID-rl7)) OF UE-TxTEG-Association-rl7
UE-TxTEG-Association-rl7 ::= SEQUENCE {
    ue-TxTEG-ID-rl7 INTEGER (1.. maxUE-Tx-TEG-ID-rl7),
    nr-TimeStamp-rl7 NR-TimeStamp-rl7,
```

```
}
SRS-PosResSetAssociation-rl7 ::= SEQUENCE [
    associatedSRS-PosResourceSetID-rl7 INTEGER (O..maxNrofSRS-PosResourceSets-rl6),
```

```
}
AssociatedSRS-PosResourceId-r17 ::= INTEGER (O.. maxNrofSRS-PosResources-l-rl6)
----------Editor Notes: maxNrOfTEG-ID-rl7 should be decided by RAN1/4.
NR-TimeStamp-rl7 ::= SEQUENCE [
    nr-SEN-rl7 INTEGER (0..1023),
    nr-Slot-rl7 CHOICE {
        scsl5-rl7 INTEGER (0..9),
```


ETSI


--- Page 426  ---


3GPP TS 38.331 version 17.0.0 Release 17
425
ETSI TS 138331 V17.0.0 (2022-05)
```
        scs30-r17 INTEGER (0.19),
        scs60-rl7 INTEGER (0..39),
        scsl20-rl7 INTEGER (0..79)
    },
    ...
}
```

```
rest.----
-- TAG-UEPOSITIONINGASSISTANCEINFO-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UEPositioningAssistancelnfo field descriptions \\
\hline \begin{tabular}{l}
AssociatedSRS-PosResourceld \\
The ID of SRS Positioning Resource (SRS-PosResource) which is associted to a specific UE Tx TEG.
\end{tabular} \\
\hline \begin{tabular}{l}
AssociatedSRS-PosResourceSetiD \\
The ID of SRS Positioning Resource Set (SRS-PosResourceSet) which is associted to a specific UE Tx TEG.
\end{tabular} \\
\hline \begin{tabular}{l}
nr-TimeSTamp \\
This field specifies the latest time instance at which the association is valid prior to the reporting.
\end{tabular} \\
\hline \begin{tabular}{l}
ueTxTEG-ID \\
Identifies the ID of UE Tx TEG.
\end{tabular} \\
\hline
\end{tabular}
- ULDedicatedMessageSegment

The ULDedicatedMessageSegment message is used to transfer segments of the UECapabilityInformation or MeasurementReportAppLayer message. SRB1 is used at transfer of segments of UECapabilityInformation and SRB4 is used at transfer of segments of MeasurementReportAppLayer.

Signalling radio bearer: SRB1 or SRB4
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network

ULDedicatedMessageSegment message
```
-- ASNISTART
-- TAG-ULDEDICATEDMESSAGESEGMENT-START
ULDedicatedMessageSegment-rl6 ::= SEQUENCE \
    criticalExtensions
        ulDedicatedMessageSegment-r16 ULDedicatedMessageSegment-rl6-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
```


ETSI


--- Page 427  ---


3GPP TS 38.331 version 17.0.0 Release 17
426
ETSI TS 138331 V17.0.0 (2022-05)
```
ULDedicatedMessageSegment-r16-IEs ::=
    segmentNumber-r16
    rrc-MessageSegmentContainer-r16
    rrc-MessageSegmentType-rl6
    lateNonCriticalExtension
    nonCriticalExtension
}
```

-- TAG-ULDEDICATEDMESSAGESEGMENT-STOP
-- ASNISTOP
```
SEQUENCE {
    INTEGER (0..15),
    OCTET STRING,
    ENUMERATED {notLastSegment, lastSegment},
    OCTET STRING OPTIONAL,
    SEQUENCE {} OPTIONAL
```


\begin{tabular}{|l|}
\hline ULDedicatedMessageSegment field descriptions \\
\hline \begin{tabular}{l}
segmentNumber \\
Identifies the sequence number of a segment within the encoded UL DCCH message.
\end{tabular} \\
\hline \begin{tabular}{l}
rrc-MessageSegmentContainer \\
Includes a segment of the encoded UL DCCH message. The size of the included segment in this container should be small enough that the resulting encoded RRC message PDU is less than or equal to the PDCP SDU size limit.
\end{tabular} \\
\hline \begin{tabular}{l}
rrc-MessageSegmentType \\
Indicates whether the included UL DCCH message segment is the last segment or not.
\end{tabular} \\
\hline
\end{tabular}
- ULInformationTransfer

The ULInformationTransfer message is used for the uplink transfer of NAS or non-3GPP dedicated information, or [AB-DU specific F1-C related information.
Signalling radio bearer: SRB2 or SRB1 (only if SRB2 not established yet). If SRB2 is suspended, the UE does not send this message until SRB2 is resumed
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to network
ULInformation Transfer message
```
-- ASNISTART
-- TAG-ULINFORMATIONTRANSEER-START
```

```
ULInformationTransfer ::=
    criticalExtensions
        ulInformationTransfer
        criticalExtensionsFuture
    }
}
ULInformationTransfer-IEs ::=
    dedicatedNAS-Message
```


ETSI


--- Page 428  ---


3GPP TS 38.331 version 17.0.0 Release 17
427
ETSI TS 138331 V17.0.0 (2022-05)
```
    lateNonCriticalExtension
    nonCriticalExtension
}
ULInformationTransfer-vl700-IEs ::=
    dedicatedInfoFlc-rl7
    nonCriticalExtension
}
-- TAG-ULINFORMATIONTRANSEER-STOP
-- ASNISTOP
```


OCTET S

ULInformationTransfer-vl700-IEs

SEQUENCE 1 DedicatedInfoFlc-rl7 SEQUENCE \{\}

OPTIONAL, OPTIONAL
```
OPTIONAL,
OPTIONAL
```

- ULInformationTransferIRAT

The ULInformationTransferIRAT message is used for the uplink transfer of information terminated at NR MCG but specified by another RAT. In this version of the specification, the message is used for V2X sidelink communication messages specified in TS 36.331 [10].

Signalling radio bearer: SRB1
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to network
ULInformation TransferIRAT message
```
-- ASNISTART
-- TAG-ULINFORMATIONTRANSEERIRAT-START
ULInformationTransferIRAT-rl6 ::= SEQUENCE \
    criticalExtensions CHOICE {
        cl CHOICE \
            ulInformationTransferIRAT-r16 ULInformationTransferIRAT-rl6-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
ULInformationTransferIRAT-rl6-IEs ::= SEQUENCE [
    ul-DCCH-MessageEUTRA-rl6 OCTET STRING OPTIONAL,
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
-- TAG-ULINFORMATIONTRANSEERIRAT-STOP
-- ASNISTOP
```


ETSI


--- Page 429  ---


3GPP TS 38.331 version 17.0.0 Release 17
428
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ULInformation TransferIRAT field descriptions \\
\hline \begin{tabular}{l}
ul-DCCH-MessageEUTRA \\
Includes the UL-DCCH-Message as defined in TS 36.331 [10]. In this version of the specification, the field is only used to transfer the E-UTRA RRC MeasurementReport, EUTRA RRC SidelinkUE/nformation and the E-UTRA RRC UEAssistancelnformation messages.
\end{tabular} \\
\hline
\end{tabular}

ULInformation TransferMRDC
The ULInformationTransferMRDC message is used for the uplink transfer of MR-DC dedicated information (e.g. for transferring the NR or E-UTRA RRC MeasurementReport message, the FailureInformation message, the UEAssistanceInformation message, the RRCReconfigurationComplete message or the NR or E-UTRA RRC MCGFailureInformation message).

Signalling radio bearer: SRB1, SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
ULInformation TransferMRDC message
```
-- ASNISTART
-- TAG-ULINFORMATIONTRANSEERMRDC-START
ULInformationTransferMRDC ::= SEQUENCE \
    criticalExtensions CHOICE [
        cl
            CHOICE \
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
ULInformationTransferMRDC-IEs::= SEQUENCE [
    ul-DCCH-MessageNR
    ul-DCCH-MessageEUTRA OCTET STRING OPTIONAL,
    lateNonCriticalExtension
    nonCriticalExtension
}
-- TAG-ULINFORMATIONTRANSEERMRDC-STOP
-- ASNISTOP
```


ETSI


--- Page 430  ---


3GPP TS 38.331 version 17.0.0 Release 17
429
ETSI TS 138331 V17.0.0 (2022-05)

ULinformationTransferMRDC field descriptions
ul-DCCH-MessageNR
Includes the UL-DCCH-Message. In this version of the specification, the field is only used to transfer the NR RRC MeasurementReport, RRCReconfigurationComplete, UEAssistancelnformation and Failurelnformation messages when sent via SRB1 and to transfer the NR MCGFailure/nformation message when sent via SRB3.
ul-DCCH-MessageEUTRA
Includes the UL-DCCH-Message. In this version of the specification, the field is only used to transfer the E-UTRA RRC MeasurementReport message when sent via SRB1 and to transfer the E-UTRA MCGFailure/nformation message when sent via SRB3.
6.3 RRC information elements
6.3.0 Parameterized types
- SetupRelease

SetupRelease allows the ElementTypeParam to be used as the referenced data type for the setup and release entries. See A.3.8 for guidelines.
-- ASNISTART
-- TAG-SETUPRELEASE-START

SetupRelease \{ ElementTypeParam \}::= CHOICE \{
release NULL,
setup ElementTypeParam
\}
-- TAG-SETUPRELEASE-STOP
-- ASNISTOP
6.3.1 System information blocks
- \( \quad \) SIB2

SIB2 contains cell re-selection information common for intra-frequency, inter-frequency and/or inter-RAT cell re-selection (i.e. applicable for more than one type of cell reselection but not necessarily all) as well as intra-frequency cell re-selection information other than neighbouring cell related.

SIB2 information element
-- ASNISTART
-- TAG-SIB2-START

SIB2 ::=
cellReselectionInfoCommon
nrofss-BlocksToAverage

SEQUENCE 1
SEQUENCE 1
INTEGER (2. maxNrofSS-BlocksToAverage)
OPTIONAL,

-- Need S
ETSI


--- Page 431  ---


3GPP TS 38.331 version 17.0.0 Release 17
430
ETSI TS 138331 V17.0.0 (2022-05)
```
    absThreshSS-BlocksConsolidation
    rangeToBestCell
    q-Hyst
    speedStateReselectionPars
        mobilityStateParameters
        q-HystSF
            sf-Medium
            sf-High
        }
    }
...
},
cellReselectionServingFreqInfo
    s-NonIntraSearchP
    s-NonIntraSearchQ
    threshServingLowP
    threshServingLowQ
    cellReselectionPriority
    cellReselectionSubPriority
    ...
},
intraFreqCellReselectionInfo
    q-RxLevMin
    q-RxLevMinSUL
    q-QualMin
    s-IntraSearchP
    s-IntraSearchQ
    t-ReselectionNR
    frequencyBandList
    frequencyBandListSUL
    p-Max
    smtc
    ss-RSSI-Measurement
    ssb-ToMeasure
    deriveSSB-IndexFromCell
    ...,
    t-ReselectionNR-SF
    ]],
    [ [
    smtc2-LP-rl6
    ssb-PositionQCL-Common-rl6
    ] ]
},
...,
[ [
relaxedMeasurement-rl6
    lowMobilityEvaluation-rl6
        s-SearchDeltaP-rl6
                    ENUMERATED {
                    dB3, dB6, dB9, dBl2, dBl5,
        t-SearchDeltaP-rl6
```

```
ThresholdNR
RangeToBestCell
ENOMERATED {
    dB0, dBl, dB2, dB3, dB4, dB5, dB6, dB8, dBl0,
    dBl2, dB14, dB16, dB18, dB20, dB22, dB24},
SEQUENCE {
    MobilityStateParameters,
SEQUENCE {
    ENOMERATED {dB-6, dB-4, dB-2, dBO},
    ENUMERATED {dB-6, dB-4, dB-2, dBO}
```

```
SEQUENCE \
    ReselectionThreshold OPTIONAL, -- Need. S
    ReselectionThresholdQ
    ReselectionThreshold,
    ReselectionThresholdQ OPTIONAL, -- Need R
    CellReselectionPriority,
    CellReselectionSubPriority OPTIONAL, -- Need.R
SEQUENCE \
    Q-RxLevMin,
    Q-RxLevMin OPTIONAL, -- Need R
    Q-QualMin OPTIONAL, -- Need.S
    ReselectionThreshold,
    ReselectionThresholdQ OPTIONAL, -- Need. S
    T-Reselection,
    MultiFrequencyBandListNR-SIB OPTIONAL, -- Need. S
    MultiFrequencyBandListNR-SIB OPTIONAL, -- Need R
    P-Max
    SSB-MTC S
    SS-RSSI-Measurement
    SSB-ToMeasure
    BOOLEAN,
OPTIONAL, -- Need. R
```


--- Page 432  ---


3GPP TS 38.331 version 17.0.0 Release 17
431
ETSI TS 138331 V17.0.0 (2022-05)
```
                    s5, sl0, s20, s30, s60, s120, s180,
                    s240, s300, spare7, spare6, spare5,
                spare4, spare3, spare2, sparel}
        } OPTIONAL, -- Need R
        celledgeEvaluation-rl6 SEQUENCE {
            s-SearchThresholdP-rl6 ReselectionThreshold,
            s-SearchThresholdQ-rl6
        }
        combineRelaxedMeasCondition-r16
        ENUMERATED {true}
    }
    ]],
    [ [
```

```
    relaxedMeasurement-rl7
        stationaryMobilityEvaluation-rl7
            s-SearchDeltaP-Stationary-rl7
            t-SearchDeltaP-Stationary-rl7
                    ENUMERATED [s5, sl0, s20, s30, s60, s120, s180, s240, s300, spare7, spare6, spare5,
        },
        celledgeEvaluationWhileStationary-rl7 SEQUENCE {
            s-SearchThresholdP2-rl7
            s-SearchThreshold02-rl7
        }
        combineRelaxedMeasCondition2-rl7 ENUMERATED {true}
    }
    ] ]
}
RangeToBestCell ::= Q-OffsetRange
-- TAG-SIB2-STOP
-- ASNISTOP
```


ETSI


--- Page 433  ---


3GPP TS 38.331 version 17.0.0 Release 17
432
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB2 field descriptions \\
\hline \begin{tabular}{l}
absThreshSS-BlocksConsolidation \\
Threshold for consolidation of L1 measurements per RS index. If the field is absent, the UE uses the measurement quantity as specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
cellEdgeEvaluation \\
Indicates the criteria for a UE to detect that it is not at cell edge, in order to relax measurement requirements for cell reselection (see TS 38.304 [20], clause 5.2.4.9.2 and clause 5.2.4.9.Y).
\end{tabular} \\
\hline \begin{tabular}{l}
cellEdgeEvaluationWhileStationary \\
Indicates the criteria for a UE to detect that it is not at cell edge while stationary, in order to relax measurement requirements for cell reselection (see TS 38.304 [20], clause 5.2.4.9.Y).
\end{tabular} \\
\hline \begin{tabular}{l}
cellEquivalentSize \\
The number of cell count used for mobility state estimation for this cell as specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
cellReselectioninfoCommon \\
Cell re-selection information common for intra-frequency, inter-frequency and/ or inter-RAT cell re-selection.
\end{tabular} \\
\hline \begin{tabular}{l}
cellReselectionServingFreqinfo \\
Information common for non-intra-frequency cell re-selection i.e. cell re-selection to inter-frequency and inter-RAT cells.
\end{tabular} \\
\hline \begin{tabular}{l}
combineRelaxedMeasCondition \\
When both lowMobilityEvalutation and cellEdgeEvalutation criteria are present in SIB2, this parameter configures the UE to fulfil both criteria in order to relax measurement requirements for cell reselection. If the field is absent, the UE is allowed to relax measurement requirements for cell reselection when either or both of the criteria are met. (See TS 38.304 [20], clause 5.2.4.9.0)
\end{tabular} \\
\hline \begin{tabular}{l}
combineRelaxedMeasCondition2 \\
When both stationaryMobilityEvaluation and cellEdgeEvaluationWhileStationary criteria are present in SIB2, this parameter configures the UE to fulfil both criteria in order to relax measurement requirements for cell reselection. If the field is absent, the UE is allowed to relax measurement requirements for cell reselection when only the stationary criteria is met. (See TS 38.304 [20], clause 5.2.4.9.0)
\end{tabular} \\
\hline \begin{tabular}{l}
deriveSSB-IndexFromCell \\
This field indicates whether the UE can utilize serving cell timing to derive the index of SS block transmitted by neighbour cell. If this field is set to true, the UE assumes SFN and frame boundary alignment across cells on the serving frequency as specified in TS 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyBandList \\
Indicates the list of frequency bands for which the NR cell reselection parameters apply. The UE behaviour in case the field is absent is described in clause 5.2.2.4.3.
\end{tabular} \\
\hline \begin{tabular}{l}
highPriorityMeasRelax \\
Indicates whether measurements can be relaxed on high priority frequencies (see TS 38.304 [20], clause 5.2.4.9.0). If the field is absent, the UE shall not relax measurements on high priority frequencies beyond " \( \mathrm{T}_{\text {higher_priority_search" }} \) unless both low mobility and not at cell edge criteria are fulfilled (see TS 38.133 [14], clause 4.2.2.7, and TS 38.304 [20], clause 5.2.4.9.0).
\end{tabular} \\
\hline \begin{tabular}{l}
intraFreqCellReselectioninfo \\
Cell re-selection information common for intra-frequency cells.
\end{tabular} \\
\hline \begin{tabular}{l}
IowMobilityEvaluation \\
Indicates the criteria for a UE to detect low mobility, in order to relax measurement requirements for cell reselection (see TS 38.304 [20], clause 5.2.4.9.1).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofSS-BlocksToAverage \\
Number of SS blocks to average for cell measurement derivation. If the field is absent the UE uses the measurement quantity as specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
p-Max \\
Value in dBm applicable for the intra-frequency neighbouring NR cells. If absent the UE applies the maximum power according to TS 38.101-1 [15] in case of an FR1 cell or TS 38.101-2 [39] in case of an FR2 cell. In this release of the specification, if \( p \)-Max is present on a carrier frequency in FR2, the UE shall ignore the field and applies the maximum power according to TS 38.101-2 [39]. This field is ignored by IAB-MT. The IAB-MT applies output power and emissions requirements, as specified in TS 38.174 [63].
\end{tabular} \\
\hline \begin{tabular}{l}
q-Hyst \\
Parameter "Qhyst" in TS 38.304 [20], Value in dB. Value dB1 corresponds to \( 1 \mathrm{~dB}, d B 2 \) corresponds to 2 dB and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
q-HystSF \\
Parameter "Speed dependent ScalingFactor for Qhyst" in TS 38.304 [20]. The sf-Medium and sf-High concern the additional hysteresis to be applied, in Medium and High Mobility state respectively, to Qhyst as defined in TS 38.304 [20]. In dB. Value \( d B-6 \) corresponds to \( -6 \mathrm{~dB}, d B-4 \) corresponds to -4 dB and so on.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 434  ---


3GPP TS 38.331 version 17.0.0 Release 17
433
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB2 field descriptions \\
\hline \begin{tabular}{l}
q-QualMin \\
Parameter "Qqualmin" in TS 38.304 [20], applicable for intra-frequency neighbour cells. If the field is absent, the UE applies the (default) value of negative infinity for Qqualmin.
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMin \\
Parameter "Qrxlevmin" in TS 38.304 [20], applicable for intra-frequency neighbour cells.
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMinSUL \\
Parameter "Qrxlevmin" in TS 38.304 [20], applicable for intra-frequency neighbour cells.
\end{tabular} \\
\hline \begin{tabular}{l}
rangeToBestCell \\
Parameter "rangeToBestCell" in TS 38.304 [20]. The network configures only non-negative (in dB) values.
\end{tabular} \\
\hline \begin{tabular}{l}
relaxedMeasurement \\
Configuration to allow relaxation of RRM measurement requirements for cell reselection (see TS 38.304 [20], clause 5.2.4.9).
\end{tabular} \\
\hline \begin{tabular}{l}
s-IntraSearchP \\
Parameter "SintraSearchP" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
s-IntraSearchQ \\
Parameter "SintrasearchQ" in TS 38.304 [20]. If the field is absent, the UE applies the (default) value of 0 dB for SintrasearchQ.
\end{tabular} \\
\hline \begin{tabular}{l}
s-NonIntraSearchP \\
Parameter "SnonlntaSearchp" in TS 38.304 [20]. If this field is absent, the UE applies the (default) value of infinity for SnonlntraSearchP.
\end{tabular} \\
\hline \begin{tabular}{l}
s-NonIntraSearchQ \\
Parameter "SnonlntrasearchQ" in TS 38.304 [20]. If the field is absent, the UE applies the (default) value of 0 dB for SnonlntrasearchQ.
\end{tabular} \\
\hline \begin{tabular}{l}
\( s \)-SearchDeltaP \\
Parameter "SsearchDeltar" in TS 38.304 [20]. Value dB3 corresponds to 3 dB , dB6 corresponds to 6 dB and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
s-SearchDeltaP-Stationary \\
Parameter "SsearchDeltaP-Stationary" in TS 38.304 [20]. Value dB3 corresponds to 3 dB , dB6 corresponds to 6 dB and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
s-SearchThresholdP, s-SearchThresholdP2 \\
Parameters "Ssearchthresholdp" and "SsearchThresholdP2" in TS 38.304 [20]. The network configures s-Search ThresholdP and s-Search ThresholdP2 to be less than or equal to sIntraSearchP and s-NonIntraSearchP.
\end{tabular} \\
\hline \begin{tabular}{l}
s-SearchThresholdQ, s-SearchThresholdQ2 \\
Parameters "SsearchThresholdQ" and "SsearchThresholdQ2" in TS 38.304 [20]. The network configures s-Search ThresholdQ and s-SearchThresholdQ2 to be less than or equal to sIntraSearchQ and s-NonIntraSearchQ.
\end{tabular} \\
\hline \begin{tabular}{l}
smtc \\
Measurement timing configuration for intra-frequency measurement. If this field is absent, the UE assumes that SSB periodicity is 5 ms for the intra-frequnecy cells.
\end{tabular} \\
\hline \begin{tabular}{l}
smtc2-LP \\
Measurement timing configuration for intra-frequency neighbour cells with a Long Periodicity (LP) indicated by periodicity in smtc2-LP. The timing offset and duration are equal to the offset and duration indicated in smtc in intraFreqCellReselection/nfo. The periodicity in smtc2-LP can only be set to a value strictly larger than the periodicity in smtc in intraFreqCellReselectioninfo (e.g. if smtc indicates sf20 the Long Periodicity can only be set to sf40, sf80 or sf160, if smtc indicates sf160, smtc2-LP cannot be configured). The pci-List, if present, includes the physical cell identities of the intra-frequency neighbour cells with Long Periodicity. If smtc2-LP is absent, the UE assumes that there are no intra-frequency neighbour cells with a Long Periodicity.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionQCL-Common \\
Indicates the QCL relation between SS/PBCH blocks for intra-frequency neighbor cells as specified in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-ToMeasure \\
The set of SS blocks to be measured within the SMTC measurement duration (see TS 38.215 [9]). When the field is absent the UE measures on all SS-blocks.
\end{tabular} \\
\hline \begin{tabular}{l}
stationaryMobilityEvaluation \\
Indicates the criteria for a UE to detect stationary mobility, in order to relax measurement requirements for cell reselection (see TS 38.304 [20], clause 5.2.4.9.0).
\end{tabular} \\
\hline \begin{tabular}{l}
t-ReselectionNR \\
Parameter "Treselection \( { }_{\mathrm{NR}} \) " in TS 38.304 [20].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 435  ---


3GPP TS 38.331 version 17.0.0 Release 17
434
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB2 field descriptions \\
\hline \begin{tabular}{l}
t-ReselectionNR-SF \\
Parameter "Speed dependent ScalingFactor for Treselectionnr" in TS 38.304 [20]. If the field is absent, the UE behaviour is specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshServingLowP \\
Parameter "Threshserving, Lowp" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshServingLowQ \\
Parameter "Thresh \( { }_{\text {serving, LowQ" in TS } 38.304 \text { [20]. }} \)
\end{tabular} \\
\hline \begin{tabular}{l}
\( t \)-SearchDeltaP \\
Parameter "TsearchDeltaP" in TS 38.304 [20]. Value in seconds. Value s5 means 5 seconds, value s10 means 10 seconds and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
t-SearchDeltaP-Stationary \\
Parameter "TsearchDeltaP-Stationary" in TS 38.304 [20]. Value in seconds. Value s5 means 5 seconds, value s10 means 10 seconds and so on.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline HSDN & The field is optionally present, Need R, if speedStateReselectionPars is present; otherwise the field is not present. \\
\hline SharedSpectrum & \begin{tabular}{l} 
This field is mandatory present if this intra-frequency operates with shared spectrum channel access. Otherwise, it is absent, \\
Need R.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) SIB3

SIB3 contains neighbouring cell related information relevant only for intra-frequency cell re-selection. The IE includes cells with specific re-selection parameters as well as exclude-listed cells.

SIB3 information element
```
-- ASNISTART
-- TAG-SIB3-START
SIB3 ::= SEQUENCE \
    intraFreqNeighCellList
    intraFreqExcludedCellList
    lateNonCriticalExtension
    ...;
    [ [
    intraFreqNeighCellList-vl610
    intraFreqAllowedCellList-rl6
    intraFreqCAG-CellList-rl6
    ]],
    [ [
```

```
    ]]
}
```

```
-- neighbour cells.
```

```
-- system information and it can be the same as or different from the validity timer of the serving cell.
```


ETSI


--- Page 436  ---


3GPP TS 38.331 version 17.0.0 Release 17
435
ETSI TS 138331 V17.0.0 (2022-05)
```
IntraFreqNeighCellList ::= SEQUENCE (SIZE (l..maxCellIntra)) OF IntraFreqNeighCellInfo
IntraFreqNeighCellList-vl6l0::= SEQUENCE (SIZE (l..maxCellIntra)) OF IntraFreqNeighCellInfo-vl6lO
IntraFreqNeighCellInfo ::= SEQUENCE [
    physCellId PhysCellId,
    q-OffsetCell Q-OffsetRange,
    q-RxLevMinOffsetCell INTEGER (1..8) OPTIONAL, -- Need. R
    q-RxLevMinOffsetCellSUL INTEGER (1..8)
    q-QualMinOffsetCell 8)
    ...
}
IntraFreqNeighCellInfo-vl6l0 ::= SEQUENCE {
```

```
}
IntraFreqExcludedCellList ::= SEQUENCE (SIZE (l..maxCellExcluded)) OF PCI-Range
IntraFreqAllowedCellList-rl6 ::= SEQUENCE (SIZE (l..maxCellAllowed)) OF PCI-Range
IntraFreqCAG-CellListPerPLMN-rl6 ::= SEQUENCE {
    plmn-IdentityIndex-rl6 INTEGER (l..maxPLMN),
    cag-CellList-rl6 SEQUENCE (SIZE (l..maxCAG-Cell-rl6)) OF PCI-Range
}
IntraFreqNeighHSDN-CellList-rl7 ::= SEQUENCE (SIZE (l..maxCellIntra)) OF PCI-Range
-- TAG-SIB3-STOP
-- ASNISTOP
```


ETSI


--- Page 437  ---


3GPP TS 38.331 version 17.0.0 Release 17
436
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB3 field descriptions \\
\hline \begin{tabular}{l}
intraFreqAllowedCellList \\
List of allow-listed intra-frequency neighbouring cells, see TS 38.304 [20], clause 5.2.4.
\end{tabular} \\
\hline \begin{tabular}{l}
intraFreqCAG-CellList \\
List of intra-frequency neighbouring CAG cells (as defined in TS 38.304 [20]) per PLMN.
\end{tabular} \\
\hline \begin{tabular}{l}
intraFreqExcludedCellList \\
List of exclude-listed intra-frequency neighbouring cells.
\end{tabular} \\
\hline \begin{tabular}{l}
intraFreqNeighCellList \\
List of intra-frequency neighbouring cells with specific cell re-selection parameters. If intraFreqNeighCellList-v1610 is present, it shall contain the same number of entries, listed in the same order as in intraFreqNeighCellList (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
intraFreqNeighHSDN-CellList \\
List of intra-frequency neighbouring HSDN cells as specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
q-OffsetCell \\
Parameter "Qoffsets,n" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
q-QualMinOffsetCell \\
Parameter "Qqualminoffsetcell" in TS 38.304 [20]. Actual value Qqualminoffsetcell = field value [dB].
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMinOffsetCell \\
Parameter "Qrxlevminoffsetcell" in TS 38.304 [20]. Actual value \( Q_{\text {xxlevminoffsetcell }}= \) field value * 2 [dB].
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMinOffsetCellSUL \\
Parameter "Qrxlevminoffsetcellsul" in TS 38.304 [20]. Actual value \( Q_{\text {xlevminoffsetcellsul }}= \) field value * 2 [dB].
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionQCL \\
Indicates the QCL relation between SS/PBCH blocks for a specific intra-frequency neighbor cell as specified in TS 38.213 [13], clause 4.1. If provided, the cell specific value overwrites the value signalled by ssb-PositionQCL-Common in SIB2 for the indicated cell.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline SharedSpectrum2 & \begin{tabular}{l} 
The field is optional present, Need R, if this intra-frequency or neighbor cell operates with shared spectrum channel access. \\
Otherwise, it is absent, Need R.
\end{tabular} \\
\hline
\end{tabular}
- S/B4

SIB4 contains information relevant for inter-frequency cell re-selection (i.e. information about other NR frequencies and inter-frequency neighbouring cells relevant for cell reselection), which can also be used for NR idle/inactive measurements. The IE includes cell re-selection parameters common for a frequency as well as cell specific re-selection parameters.

SIB4 information element
```
-- ASNISTART
-- TAG-SIB4-START
```

```
SIB4 ::=
    interFreqCarrierFreqList
    lateNonCriticalExtension
    ...;
    [ [
    interFreqCarrierFreqList-vl610 InterFreqCarrierFreqList-vl610 OPTIONAL -- Need R
```


ETSI


--- Page 438  ---


3GPP TS 38.331 version 17.0.0 Release 17
437
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]],
    [ [
    interFreqCarrierFreqList-vl700 InterFreqCarrierFreqList-vl700 OPTIONAL -- Need R
    ]]
}
InterFreqCarrierFreqList ::= SEQUENCE (SIZE (l..maxFreq)) OF InterFreqCarrierFreqInfo
InterFreqCarrierFreqList-vl6l0 ::= SEQUENCE (SIZE (l..maxFreq)) OF InterFreqCarrierFreqInfo-vl6l0
InterFreqCarrierFreqList-vl700 ::= SEQUENCE (SIZE (l..MaxFreq)) OF InterFreqCarrierFreqInfo-vl700
InterFreqCarrierFreqInfo ::= SEQUENCE \
    dl-CarrierFreq ARFCN-ValueNR,
    frequencyBandList MultiFrequencyBandListNR-SIB
    frequencyBandListSUL MultiFrequencyBandListNR-SIB
    nrofSS-BlocksToAverage INTEGER (2..maxNrofSS-BlocksToAverage)
    absThreshSS-BlocksConsolidation ThresholdNR
    smtc
    ssbSubcarrierSpacing SubcarrierSpacing,
    ssb-ToMeasure SSB-ToMeasure
    derivessb-IndexFromCell BOOLEAN,
    ss-RSSI-Measurement SS-RSSI-Measurement
    q-RxLevMin Q-RxLevMin,
    q-RxLevMinSUL Q-RxLevMin
    q-QualMin Q-QualMin
    p-Max P-Max
    t-ReselectionNR T-Reselection,
    t-ReselectionNR-SF SpeedStateScaleFactors OPTIONAL, -- Need S
    threshX-HighP ReselectionThreshold,
    threshX-LowP ReselectionThreshold,
    threshX-Q SEQUENCE {
        threshX-HighQu ReselectionThresholdQ,
        threshX-LowQ ReselectionThresholdQ
    } cellReselectionPriority CellReselectionPriority OPTIONAL, -- Cond. RSRQ
    cellReselectionPriority CellReselectionPriority 
    cellReselectionSubPriority CellReselectio
    interFreqNeighCellList InterFreqNeighCellList
    interFreqExcludedCellList InterFreqExcludedCellList
    ...
}
InterFreqCarrierFreqInfo-vl610 ::= SEQUENCE {
    interFreqNeighCellList-vl610 InterFreqNeighCellList-vl6l0 OPTIONAL, -- Need R
    smtc2-LP-rl6 SSB-MTC2-LP-rl6
    interFreqAllowedCellList-rl6 InterFreqAllowedCellList-rl6
    ssb-PositionQCL-Common-r16 SSB-PositionQCL-Relation-r16 OPTIONAL, -- Cond SharedSpectrum
    interFreqCAG-CellList-rl6 SEQUENCE (SIZE (l..maxPLMN)) OF InterFreqCAG-CellListPerPLMN-rl6 OPTIONAL -- Need R
}
InterFreqCarrierFreqInfo-vl700 ::= SEQUENCE {
    interFreqNeighHSDN-CellList-rl7 InterFreqNeighHSDN-CellList-rl7 OPTIONAL, -- Need R
    highSpeedMeasInterFreq-rl7 ENUMERATED {true} OPTIONAL, -- Need. R
```


ETSI


--- Page 439  ---


3GPP TS 38.331 version 17.0.0 Release 17
438
ETSI TS 138331 V17.0.0 (2022-05)
```
    -- FFS: whether to change above to 'redcapAccessAllowed' and the relevant changes in the procedure.
}
InterFreqNeighHSDN-CellList-rl7 ::= SEQUENCE (SIZE (l..maxCellInter)) OF PCI-Range
InterFreqNeighCellList ::= SEQUENCE (SIZE (l..maxCellInter)) OF InterFreqNeighCellInfo
InterFreqNeighCellList-vl6l0 := SEQUENCE (SIZE (l..MaxCellInter)) OF InterFreqNeighCellInfo-vl6lO
InterFreqNeighCellInfo ::= SEQUENCE {
    physcellId PhysCellId,
    q-OffsetCell Q-OffsetRange,
    q-RxLevMinOffsetCell INTEGER (1..8)
    q-RxLevMinOffsetCellSUL INTEGER (1..8)
    q-QualMinOffsetCell INTEGER (1..8)
    ...
}
InterFreqNeighCellInfo-vl6l0 ::= SEQUENCE {
```

```
}
InterFreqExcludedCellList ::= SEQUENCE (SIZE (l..maxCellExcluded)) OF PCI-Range
InterFreqAllowedCellList-rl6 ::= SEQUENCE (SIZE (l..maxCellAllowed)) OF PCI-Range
InterFreqCAG-CellListPerPLMN-rl6 ::= SEQUENCE {
    plmn-IdentityIndex-r16 INTEGER (1..maxPLMN),
    cag-CellList-rl6 SEQUENCE (SIZE (l..maxCAG-Cell-rl6)) OF PCI-Range
}
-- TAG-SIB4-STOP
-- ASNISTOP
```


ETSI


--- Page 440  ---


3GPP TS 38.331 version 17.0.0 Release 17
439
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB4 field descriptions \\
\hline \begin{tabular}{l}
absThreshSS-BlocksConsolidation \\
Threshold for consolidation of L1 measurements per RS index. If the field is absent, the UE uses the measurement quantity as specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
deriveSSB-IndexFromCell \\
This field indicates whether the UE may use the timing of any detected cell on that frequency to derive the SSB index of all neighbour cells on that frequency. If this field is set to true, the UE assumes SFN and frame boundary alignment across cells on the neighbor frequency as specified in TS 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
di-CarrierFreq \\
This field indicates center frequency of the SS block of the neighbour cells, where the frequency corresponds to a GSCN value as specified in TS 38.101-1 [15].
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyBandList \\
Indicates the list of frequency bands for which the NR cell reselection parameters apply.
\end{tabular} \\
\hline \begin{tabular}{l}
high SpeedMeasinterFreq \\
If the field is set to true and UE supports high speed inter-frequency IDLE/INACTIVE measurements, the UE shall apply the enhanced inter-frequency RRM requirements on the inter-frequency carrier to support high speed up to \( 500 \mathrm{~km} / \mathrm{h} \) in RRC_IDLE/RRC_INACTIVE as specified in TS 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
interFreqAllowedCellList \\
List of allow-listed inter-frequency neighbouring cells, see TS 38.304 [20], clause 5.2.4.
\end{tabular} \\
\hline \begin{tabular}{l}
interFreqCAG-CellList \\
List of inter-frequency neighbouring CAG cells (as defined in TS 38.304 [20] per PLMN.
\end{tabular} \\
\hline \begin{tabular}{l}
interFreqCarrierFreqList \\
List of neighbouring carrier frequencies and frequency specific cell re-selection information. If interFreqCarrierFreqList-v1610 or /interFreqCarrierFreqList-v1700 are present, they shall contain the same number of entries, listed in the same order as in interFreqCarrierFreqList (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
interFreqExcludedCellList \\
List of exclude-listed inter-frequency neighbouring cells.
\end{tabular} \\
\hline \begin{tabular}{l}
interFreqNeighCellList \\
List of inter-frequency neighbouring cells with specific cell re-selection parameters. If interFreqNeighCellList-v1610 is present, it shall contain the same number of entries, listed in the same order as in interFreqNeighCellList (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
interFreqNeighHSDN-CellList \\
List of inter-frequency neighbouring HSDN cells as specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
nrofSS-BlocksToAverage \\
Number of SS blocks to average for cell measurement derivation. If the field is absent, the UE uses the measurement quantity as specified in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
p-Max \\
Value in dBm applicable for the neighbouring NR cells on this carrier frequency. If absent the UE applies the maximum power according to TS 38.101-1 [15] in case of an FR1 cell or TS 38.101-2 [39] in case of an FR2 cell. In this release of the specification, if \( p \)-Max is present on a carrier frequency in FR2, the UE shall ignore the field and applies the maximum power according to TS 38.101-2 [39]. This field is ignored by IAB-MT. The IAB-MT applies output power and emissions requirements, as specified in TS 38.174 [63].
\end{tabular} \\
\hline \begin{tabular}{l}
q-OffsetCell \\
Parameter "Qoffsets,n" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
q-OffsetFreq \\
Parameter "Qoffsetfrequency" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
q-QualMin \\
Parameter "Qqualmin" in TS 38.304 [20]. If the field is absent, the UE applies the (default) value of negative infinity for Qqualmin.
\end{tabular} \\
\hline \begin{tabular}{l}
q-QualMinOffsetCell \\
Parameter "Qqualminoffsetcell" in TS 38.304 [20]. Actual value \( Q_{q u a l m i n o f f s e t c e l l}= \) field value [dB].
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMin \\
Parameter "Qrxlevmin" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMinOffsetCell \\
Parameter "Q:xlevminoffsetcell" in TS 38.304 [20]. Actual value \( Q_{\text {xlevminoffsetcell }}= \) field value * 2 [dB].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 441  ---


3GPP TS 38.331 version 17.0.0 Release 17
440
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB4 field descriptions \\
\hline \begin{tabular}{l}
q-RxLevMinOffsetCellSUL \\
Parameter "Qrxlevminoffsetcellsul" in TS 38.304 [20]. Actual value \( Q_{\text {xlevminoffsetcellsul }}= \) field value * 2 [dB].
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMinSUL \\
Parameter "Qrxlevmin" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
redcapAccessRejected \\
Indicates whether RedCap UEs are not allowed to access the frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
smtc \\
Measurement timing configuration for inter-frequency measurement. If this field is absent, the UE assumes that SSB periodicity is 5 ms in this frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
smtc2-LP \\
Measurement timing configuration for inter-frequency neighbour cells with a Long Periodicity (LP) indicated by periodicity in smtc2-LP. The timing offset and duration are equal to the offset and duration indicated in smtc in InterFreqCarrierFreq/nfo. The periodicity in smtc2-LP can only be set to a value strictly larger than the periodicity in smtc in InterFreqCarrierFreqinfo (e.g. if smtc indicates sf20 the Long Periodicity can only be set to sf40, sf80 or sf160, if smtc indicates sf160, smtc2-LP cannot be configured). The pci-List, if present, includes the physical cell identities of the inter-frequency neighbour cells with Long Periodicity. If smtc2-LP is absent, the UE assumes that there are no inter-frequency neighbour cells with a Long Periodicity.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionQCL \\
Indicates the QCL relation between SS/PBCH blocks for a specific neighbor cell as specified in TS 38.213 [13], clause 4.1. If provided, the cell specific value overwrites the common value signalled by ssb-PositionQCL-Common in S/B4 for the indicated cell.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionQCL-Common \\
Indicates the QCL relation between SS/PBCH blocks for inter-frequency neighbor cells as specified in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-ToMeasure \\
The set of SS blocks to be measured within the SMTC measurement duration (see TS 38.215 [9]). When the field is absent the UE measures on all SS-blocks.
\end{tabular} \\
\hline \begin{tabular}{l}
ssbSubcarrierSpacing \\
Subcarrier spacing of SSB. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 120 or 240 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline \begin{tabular}{l}
threshX-HighP \\
Parameter "Threshx, Highp" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshX-HighQ \\
Parameter "Threshx, HighQ" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshX-LowP \\
Parameter "Threshx, LowP" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshX-LowQ \\
Parameter "Threshx, lowQ" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
t-ReselectionNR \\
Parameter "Treselectionns" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
t-ReselectionNR-SF \\
Parameter "Speed dependent ScalingFactor for Treselection \( { }_{\text {NR" }} \) in TS 38.304 [20]. If the field is absent, the UE behaviour is specified in TS 38.304 [20].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 442  ---


3GPP TS 38.331 version 17.0.0 Release 17
441
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline Mandatory & The field is mandatory present in SIB4. \\
\hline RSRQ & The field is mandatory present if threshServingLowQ is present in SIB2; otherwise it is absent. \\
\hline SharedSpectrum & This field is mandatory present if this inter-frequency operates with shared spectrum channel access. Otherwise, it is absent, Need R. \\
\hline SharedSpectrum2 & The field is optional present, Need R, if this inter-frequency or neighbor cell operates with shared spectrum channel access. Otherwise, it is absent, Need R. \\
\hline
\end{tabular}
- \( \quad \) SIB5

SIB5 contains information relevant only for inter-RAT cell re-selection i.e information about E-UTRA frequencies and E-UTRAs neighbouring cells relevant for cell reselection. The IE includes cell re-selection parameters common for a frequency.

SIB5 information element
-- ASNISTART
-- TAG-SIB5-START

SIB5 : :=
carrierFreqListEUTRA
t -ReselectionEUTRA
t-ReselectionEUTRA-SF
lateNonCriticalExtension
⋯ ,
[ [
carrierFreqListEUTRA-vl610
]],
[ [
carrierFreqListEUTRA-vl700
] ]
\}
CarrierFreqListEUTRA : :=
CarrierFreqListEUTRA-vl610 : :=
CarrierFreqListEUTRA-vl700 : :=
CarrierFreqEUTRA : :=
carrierFreq
eutra-multiBandInfoList
eutra-FreqNeighCellList
eutra-ExcludedCellList
allowedMeasBandwidth
presenceAntennaPortl
cellReselectionPriority
cellReselectionSubPriority
threshX-High
threshX-Low

SEQUENCE 1
CarrierFreqListEUTRA
OPTIONAL, -- Need R
T-Reselection,
SpeedStateScaleFactors
OPTIONAL, -- Need. S
OCTET STRING
OPTIONAL,

CarrierFreqListEUTRA-vl610
OPTIONAL

CarrierFreqListEUTRA-vl700
OPTIONAL
-- Need R

SEQUENCE (SIZE (l..maxEUTRA-Carrier)) OF CarrierFreqEUTRA
SEQUENCE (SIZE (l..maxEUTRA-Carrier)) OF CarrierFreqEUTRA-vl6lo
SEQUENCE (SIZE (l..maxEUTRA-Carrier)) OF CarrierFreqEUTRA-vl700
SEQUENCE 1
ARFCN-ValueEUTRA,
EUTRA-MultiBandInfolist OPTIONAL, -- Need R
EUTRA-FreqNeighCellList
OPTIONAL, -- Need. R
EUTRA-FreqExcludedCellList
OPTIONAL, -- Need R
EUTRA-AllowedMeasBandwidth,
EUTRA-PresenceAntennaPortl,
CellReselectionPriority OPTIONAL, -- Need R
CellReselectionSubPriority OPTIONAL, -- Need R
ReselectionThreshold,
ReselectionThreshold,

ETSI


--- Page 443  ---


3GPP TS 38.331 version 17.0.0 Release 17
442
ETSI TS 138331 V17.0.0 (2022-05)
```
    q-RxLevMin
    INTEGER (-70..-22),
    INTEGER (-34..-3),
    INTEGER (-30..33),
    threshX-Q
        threshX-HighQ ReselectionThresholdQ,
        threshX-LowQ ReselectionThresholdQ
}
CarrierFreqEUTRA-vl610 ::= SEQUENCE [
    highSpeedEUTRACarrier-rl6 ENUMERATED {true} OPTIONAL -- Need R
}
CarrierFreqEUTRA-vl700 ::= SEQUENCE {
    eutra-FreqNeighHSDN-CellList-rl7 EUTRA-FreqNeighHSDN-CellList-rl7 OPTIONAL Need R
}
EUTRA-FreqNeighHSDN-CellList-rl7 ::= SEQUENCE (SIZE (l..maxCellEUTRA)) OF EUTRA-PhysCellIdRange
EUTRA-FreqExcludedCellList ::= SEQUENCE (SIZE (l..maxEUTRA-CellExcluded)) OF EUTRA-PhysCellIdRange
EUTRA-FreqNeighCellList ::= SEQUENCE (SIZE (l..maxCellEUTRA)) OF EUTRA-FreqNeighCellInfo
EUTRA-FreqNeighCellInfo ::= SEQUENCE {
    physCellId.
    dummy
    q EUTRA-Q-OffsetRange,
    q-QuevMinOffsetCell INTEGER (l..8)
}
-- TAG-SIB5-STOP
-- ASNISTOP
```


ETSI


--- Page 444  ---


3GPP TS 38.331 version 17.0.0 Release 17
443
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB5 field descriptions \\
\hline \begin{tabular}{l}
carrierFreqListEUTRA \\
List of carrier frequencies of E-UTRA. If the carrierFreqListEUTRA-v1610/carrierFreqListEUTRA-v1700 is present, it shall contain the same number of entries, listed in the same order as in the carrierFreqListEUTRA (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
dummy \\
This field is not used in the specification. If received it shall be ignored by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
eutra-ExcludedCellList \\
List of exclude-listed E-UTRA neighbouring cells.
\end{tabular} \\
\hline \begin{tabular}{l}
eutra-FreqNeighHSDN-CellList \\
List of neighbouring EUTRA HSDN cells as specified in TS 36.304 [27].
\end{tabular} \\
\hline \begin{tabular}{l}
eutra-multiBandinfoList \\
Indicates the list of frequency bands in addition to the band represented by carrierFreq for which cell reselection parameters are common, and a list of additionalPmax and additionalSpectrumEmission values, as defined in TS 36.101 [22], table 6.2.4-1, for the frequency bands in eutra-multiBand/nfoList
\end{tabular} \\
\hline \begin{tabular}{l}
highSpeedEUTRACarrier \\
If the field is present, the UE shall apply the enhanced NR-EUTRA inter-RAT measurement requirements to support high speed up to \( 500 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.133 [14] to the E-UTRA carrier.
\end{tabular} \\
\hline \begin{tabular}{l}
p-MaxEUTRA \\
The maximum allowed transmission power in dBm on the (uplink) carrier frequency, see TS 36.304 [27].
\end{tabular} \\
\hline \begin{tabular}{l}
q-QualMin \\
Parameter "Qqualmin" in TS 36.304 [27]. Actual value Qqualmin \( = \) field value [dB].
\end{tabular} \\
\hline \begin{tabular}{l}
q-QualMinOffsetCell \\
Parameter " \( Q_{\text {qualminoffsetcell }} \) " in TS 36.304 [27]. Actual value \( Q_{\text {qualminoffsetcell }}= \) field value [dB].
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMin \\
Parameter "Qudevmin" in TS 36.304 [27]. Actual value \( Q_{\text {rxlevmin }}= \) field value * 2 [dBm].
\end{tabular} \\
\hline \begin{tabular}{l}
q-RxLevMinOffsetCell \\
Parameter "Qudevminoffsetcett" in TS 36.304 [27]. Actual value \( Q_{\text {xxlevminoffsetcell }}= \) field value * 2 [dB].
\end{tabular} \\
\hline \begin{tabular}{l}
t-ReselectionEUTRA \\
Parameter "Treselectioneutra" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshX-High \\
Parameter "Threshx, Highp" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshX-HighQ \\
Parameter "Threshx, HighQ" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshX-Low \\
Parameter "Threshx, lowp" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
threshX-LowQ \\
Parameter "Threshx, lowq" in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
t-ReselectionEUTRA-SF \\
Parameter "Speed dependent ScalingFactor for Treselectioneutra" in TS 38.304 [20]. If the field is absent, the UE behaviour is specified in TS 38.304 [20].
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline\( R S R Q \) & The field is mandatory present if the threshServingLowQ is present in SIB2; otherwise it is absent. \\
\hline
\end{tabular}

ETSI


--- Page 445  ---


3GPP TS 38.331 version 17.0.0 Release 17
444
ETSI TS 138331 V17.0.0 (2022-05)
- \( \quad \) SIB6

SIB6 contains an ETWS primary notification.
SIB6 information element
```
-- ASNISTART
-- TAG-SIB6-START
SIB6 ::=
    messageIdentifier
    serialNumber
    warningType
    lateNonCriticalExtension
    ...
}
-- TAG-SIB6-STOP
-- ASNISTOP
```

```
SEQUENCE \
    BIT STRING (SIZE (16)),
    BIT STRING (SIZE (16)),
    OCTET STRING (SIZE (2)),
    OCTET STRING
```


OPTIONAL,

\begin{tabular}{|l|}
\hline SIB6 field descriptions \\
\hline \begin{tabular}{l}
messageldentifier \\
Identifies the source and type of ETWS notification.
\end{tabular} \\
\hline \begin{tabular}{l}
serialNumber \\
Identifies variations of an ETWS notification.
\end{tabular} \\
\hline \begin{tabular}{l}
warningType \\
Identifies the warning type of the ETWS primary notification and provides information on emergency user alert and UE popup.
\end{tabular} \\
\hline
\end{tabular}
```
一
S/B7
```


SIB7 contains an ETWS secondary notification.
SIB7 information element
```
-- ASNISTART
-- TAG-SIB7-START
SIB7 ::=
    messageIdentifier
    serialNumber
    warningMessageSegmentType
    warningMessageSegmentNumber
    warningMessageSegment
    dataCodingScheme
    lateNonCriticalExtension
    ...
}
```

```
SEQUENCE \
    BIT STRING (SIZE (16)),
    BIT STRING (SIZE (16)),
    ENUMERATED {notLastSegment, lastSegment},
    INTEGER (0..63),
    OCTET STRING,
    OCTET STRING (SIZE (1))
    OCTET STRING
```

```
OPTIONAL, -- Cond Segmentl
```


ETSI


--- Page 446  ---


3GPP TS 38.331 version 17.0.0 Release 17
445
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-SIB7-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SIB7 field descriptions \\
\hline \begin{tabular}{l}
dataCodingScheme \\
Identifies the alphabet/coding and the language applied variations of an ETWS notification.
\end{tabular} \\
\hline \begin{tabular}{l}
messageldentifier \\
Identifies the source and type of ETWS notification.
\end{tabular} \\
\hline \begin{tabular}{l}
serialNumber \\
Identifies variations of an ETWS notification.
\end{tabular} \\
\hline \begin{tabular}{l}
warningMessageSegment \\
Carries a segment of the Warning Message Contents IE.
\end{tabular} \\
\hline \begin{tabular}{l}
warningMessageSegmentNumber \\
Segment number of the ETWS warning message segment contained in the SIB. A segment number of zero corresponds to the first segment, A segment number of one corresponds to the second segment, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
warningMessageSegmentType \\
Indicates whether the included ETWS warning message segment is the last segment or not.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|c|c|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline Segment1 & The field is mandatory present in the first segment of S/B7, otherwise it is absent. \\
\hline
\end{tabular}
- \( \quad \) S/B8

S/B8 contains a CMAS notification.
SIB8 information element
```
-- ASNISTART
-- TAG-SIB8-START
SIB8 ::=
    messageIdentifier
    serialNumber
    warningMessageSegmentType ENUMERATED {notLastSegment, lastSegment},
    warningMessageSegmentNumber INTEGER (0..63),
    warningMessageSegment OCTET STRING,
    dataCodingScheme OCTET STRING (SIZE (1)) OPTIONAL, -- Cond Segmentl
    warningAreaCoordinatesSegment OCTET STRING OPTIONAL, -- Need R
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    ...
}
-- TAG-SIB8-STOP
-- ASNISTOP
```


ETSI


--- Page 447  ---


3GPP TS 38.331 version 17.0.0 Release 17
446
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB8 field descriptions \\
\hline \begin{tabular}{l}
dataCodingScheme \\
Identifies the alphabet/coding and the language applied variations of a CMAS notification.
\end{tabular} \\
\hline \begin{tabular}{l}
messageldentifier \\
Identifies the source and type of CMAS notification.
\end{tabular} \\
\hline \begin{tabular}{l}
serialNumber \\
Identifies variations of a CMAS notification.
\end{tabular} \\
\hline \begin{tabular}{l}
warningAreaCoordinatesSegment \\
If present, carries a segment, with one or more octets, of the geographical area where the CMAS warning message is valid as defined in [28]. The first octet of the first warningAreaCoordinatesSegment is equivalent to the first octet of Warning Area Coordinates IE defined in and encoded according to TS 23.041 [29] and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
warningMessageSegment \\
Carries a segment, with one or more octets, of the Warning Message Contents IE defined in TS 38.413 [42]. The first octet of the Warning Message Contents IE is equivalent to the first octet of the CB data IE defined in and encoded according to TS 23.041 [29], clause 9.4.2.2.5, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
warningMessageSegmentNumber \\
Segment number of the CMAS warning message segment contained in the SIB. A segment number of zero corresponds to the first segment, one corresponds to the second segment, and so on. If warning area coordinates are provided for the warning message, then this field applies to both warning message segment and warning area coordinates segment.
\end{tabular} \\
\hline \begin{tabular}{l}
warningMessageSegmentType \\
Indicates whether the included CMAS warning message segment is the last segment or not. If warning area coordinates are provided for the warning message, then this field applies to both warning message segment and warning area coordinates segment.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline Segment1 & The field is mandatory present in the first segment of S/B8, otherwise it is absent. \\
\hline
\end{tabular}
- SIB9

SIB9 contains information related to GPS time and Coordinated Universal Time (UTC). The UE may use the parameters provided in this system information block to obtain the UTC, the GPS and the local time.

NOTE: The UE may use the time information for numerous purposes, possibly involving upper layers e.g. to assist GPS initialisation, to synchronise the UE clock.
SIB9 information element
```
-- ASNISTART
-- TAG-SIB9-START
SIB9 ::=
    timeInfo
        timeInfoUTC
        dayLightSavingTime
        leapSeconds
        localTimeOffset
    }
```

```
SEQUENCE \
    SEQUENCE {
        INTEGER (0..549755813887),
        INTEGER (-127..128)
        INTEGER (-63..64)
```

        BIT STRING (SIZE (2)) OPTIONAL, -- Need R

\begin{tabular}{ll} 
OPTIONAL, & -- Need. R \\
OPTIONAL & -- Need. R \\
OPTIONAL, & -- Need. R
\end{tabular}

ETSI


--- Page 448  ---


3GPP TS 38.331 version 17.0.0 Release 17
447
ETSI TS 138331 V17.0.0 (2022-05)
```
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    ...;
        [ [
    referenceTimeInfo-rl6 ReferenceTimeInfo-rl6 OPTIONAL -- Need R
    ] ]
}
-- TAG-SIB9-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SIB9 field descriptions \\
\hline \begin{tabular}{l}
dayLightSavingTime \\
Indicates if and how daylight-saving time (DST) is applied to obtain the local time. The semantics are the same as the semantics of the Daylight Saving Time IE in TS 24.501 [23] and TS 24.008 [38]. The first/leftmost bit of the bit string contains the b2 of octet 3 and the second bit of the bit string contains b1 of octet 3 in the value part of the Daylight Saving Time IE in TS 24.008 [38].
\end{tabular} \\
\hline \begin{tabular}{l}
leapSeconds \\
Number of leap seconds offset between GPS Time and UTC. UTC and GPS time are related i.e. GPS time -leapSeconds = UTC time.
\end{tabular} \\
\hline \begin{tabular}{l}
loca/TimeOffset \\
Offset between UTC and local time in units of 15 minutes. Actual value \( = \) field value \( { }^{*} 15 \) minutes. Local time of the day is calculated as UTC time + localTimeOffset.
\end{tabular} \\
\hline \begin{tabular}{l}
timeInfoUTC \\
Coordinated Universal Time corresponding to the SFN boundary at or immediately after the ending boundary of the SI-window in which SIB9 is transmitted. The field counts the number of UTC seconds in 10 ms units since 00:00:00 on Gregorian calendar date 1 January, 1900 (midnight between Sunday, December 31, 1899 and Monday, January 1, 1900). See NOTE 1. This field is excluded when determining changes in system information, i.e. changes of time/nfoUTC should neither result in system information change notifications nor in a modification of value Tag in SIB1.
\end{tabular} \\
\hline
\end{tabular}

NOTE 1: The UE may use this field together with the leapSeconds field to obtain GPS time as follows: GPS Time (in seconds) \( = \) timelnfoUTC (in seconds) 2,524,953,600 (seconds) + leapSeconds, where 2,524,953,600 is the number of seconds between 00:00:00 on Gregorian calendar date 1 January, 1900 and 00:00:00 on Gregorian calendar date 6 January, 1980 (start of GPS time).
```
- SIB10
```


SIB10 contains the HRNNs of the NPNs listed in SIB1.
SIB10 information element
```
-- ASNISTART
-- TAG-SIBlO-START
SIBlO-rl6 ::= SEQUENCE \
    hrnn-List-rl6 HRNN-List-rl6
    lateNonCriticalExtension OCTET STRING
    ...
}
HRNN-List-rl6 ::=
SEQUENCE (SIZE (l..maxNPN-rl6)) OF HRNN-rl6
HRNN-rl6 ::=
SEQUENCE \
```


ETSI


--- Page 449  ---


3GPP TS 38.331 version 17.0.0 Release 17
448
ETSI TS 138331 V17.0.0 (2022-05)
```
    hrnn-rl6 OCTET STRING (SIZE(l.. maxHRNN-Len-rl6)) OPTIONAL -- Need R
}
-- TAG-SIBlO-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline \multicolumn{1}{|c|}{ SIB10 field descriptions } \\
\hline HRNN-List \\
The same amount of HRNN (see TS 23.003 [21]) elements as the number of NPNs in SIB 1 are included. The n-th entry of HRNN-List contains the human readable network \\
name of the n-th NPN of SIB1. The hmn in the corresponding entry in HRNN-List is absent if there is no HRNN associated with the given NPN. \\
\hline
\end{tabular}
- SIB11

SIB11 contains information related to idle/inactive measurements.
SIB11 information element
```
-- ASNISTART
-- TAG-SIBll-START
SIBll-rl6 ::= SEQUENCE \
    measIdleConfigSIB-rl6
    lateNonCriticalExtension
    ...
}
-- TAG-SIBll-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SIB11 field descriptions \\
\hline measidieConfigSIB \\
Indicates measurement configuration to be stored and used by the UE while in RRC_IDLE or RRC_INACTIVE. \\
\hline
\end{tabular}
\[
-\quad \text { SIB12 }
\]

SIB12 contains NR sidelink communication configuration.
SIB12 information element
```
-- ASNISTART
-- TAG-SIBl2-START
SIBl2-rl6 ::= SEQUENCE \
    segmentNumber-r16
```

```
SEQUENCE \
    INTEGER (0..63),
```


ETSI


--- Page 450  ---


3GPP TS 38.331 version 17.0.0 Release 17
449
ETSI TS 138331 V17.0.0 (2022-05)
```
    segmentType-rl6 ENUMERATED {notLastSegment, lastSegment},
    segmentContainer-rl6 OCTET STRING
}
SIBl2-IEs-rl6 ::= SEQUENCE [
    sl-ConfigCommonNR-r16 SL-ConfigCommonNR-r16,
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    ...;
    [ [
    sl-DRX-ConfigCommon-GC-BC-rl7 SL-DRX-Config-GC-BC-rl7
    sl-DiscConfigCommon-rl7 SL-DiscConfigCommon-rl7
    sl-L2U2N-Relay ENUMERATED {support}
    sl-NonRelayDiscovery ENUMERATED {support}
    sl-L3U2N-RelayDiscovery ENUMERATED {support}
    ]]
}
SL-ConfigCommonNR-r16 ::= SEQUENCE {
```

```
    sl-UE-SelectedConfig-rl6 SL-UE-SelectedConfig-rl6
    sl-NR-AnchorCarrierFreqList-rl6 SL-NR-AnchorCarrierFreqList-rl6
    sl-EUTRA-AnchorCarrierFreqList-rl6 SL-EUTRA-AnchorCarrierFreqList-rl6
    sl-RadioBearerConfigList-r16 SEQUENCE (SIZE (1..maxNrofSLRB-r16)) OF SL-RadioBearerConfig-rl6
    sl-RLC-BearerConfigList-r16 SEQUENCE (SIZE (l..maxSL-LCID-rl6)) OF SL-RLC-BearerConfig-rl6
    sl-MeasConfigCommon-rl6 SL-MeasConfigCommon-rl6
    sl-CSI-Acquisition-rl6 ENUMERATED {enabled}
    sl-OffsetDFN-rl6 INTEGER (1..1000)
    t400-rl6 ENUMERATED {msl00, ms200, ms300, ms400, ms600, ms1000, ms1500, ms2000}
    sl-MaxNumConsecutiveDTX-r16 ENUMERATED {nl, n2, n3, n4, n6, n8, nl6, n32}
    sl-SSB-PriorityNR-rl6 INTEGER (1..8)
}
SL-NR-AnchorCarrierFreqList-rl6 ::= SEQUENCE (SIZE (1..maxFreqSL-NR-rl6)) OF ARFCN-ValueNR
SL-EUTRA-AnchorCarrierFreqList-rl6 ::= SEQUENCE (SIZE (1..maxFreqSL-EUTRA-r16)) OF ARFCN-ValueEUTRA
SL-DiscConfigCommon-rl7 ::= SEQUENCE {
    sl-RelayUE-ConfigCommon-rl7 SL-RelayUE-Config-rl7,
    sl-RemoteUE-ConfigCommon-rl7 SL-RemoteUE-Config-rl7
}
-- TAG-SIBl2-STOP
-- ASNISTOP
```


ETSI


--- Page 451  ---


3GPP TS 38.331 version 17.0.0 Release 17
450
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SIB12 field descriptions \\
\hline \begin{tabular}{l}
segmentContainer \\
This field includes a segment of the encoded SIB12-IEs. The size of the included segment in this container should be small enough that the SIB message size is less than or equal to the maximum size of a NR SI, i.e. 2976 bits when SIB12 is broadcast.
\end{tabular} \\
\hline \begin{tabular}{l}
segmentNumber \\
This field identifies the sequence number of a segment of SIB12-IEs. A segment number of zero corresponds to the first segment, A segment number of one corresponds to the second segment, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
segmentType \\
This field indicates whether the included segment is the last segment or not.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-CSI-Acquisition \\
This field indicates whether CSI reporting is enabled in sidelink unicast. If not set, SLCSI reporting is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-DRX-ConfigCommon-GC-BC \\
This field indicates the sidelink DRX configuration for groupcast and broadcast communication, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sI-EUTRA-AnchorCarrierFreqList \\
This field indicates the EUTRA anchor carrier frequency list, which can provide the NR sidelink communication configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-FreqinfoList \\
This field indicates the NR sidelink communication configuration on some carrier frequency (ies). In this release, only one entry can be configured in the list.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-L2U2N-Relay \\
This field indicates the support of NR sidelink Layer-2 relay.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-L3U2N-RelayDiscovery \\
This field indicates the support of L3 U2N relay AS-layer capability, i.e. NR sidelink relay discovery.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MaxNumConsecutiveDTX \\
This field indicates the maximum number of consecutive HARQ DTX before triggering sidelink RLF. Value n1 corresponds to 1, value n2 corresponds to 2, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-MeasConfigCommon \\
This field indicates the measurement configurations (e.g. RSRP) for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
si-NonRelayDiscovery \\
This field indicates the support of NR sidelink non-relay discovery.
\end{tabular} \\
\hline \begin{tabular}{l}
si-NR-AnchorCarrierFreqList \\
This field indicates the NR anchor carrier frequency list, which can provide the NR sidelink communication configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-OffsetDFN \\
Indicates the timing offset for the UE to determine DFN timing when GNSS is used for timing reference. Value 1 corresponds to 0.001 milliseconds, value 2 corresponds to 0.002 milliseconds, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-RadioBearerConfigList \\
This field indicates one or multiple sidelink radio bearer configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-RLC-BearerConfigList \\
This field indicates one or multiple sidelink RLC bearer configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SSB-PriorityNR \\
This field indicates the priority of NR sidelink SSB transmission and reception.
\end{tabular} \\
\hline \begin{tabular}{l}
\( t 400 \) \\
Indicates the value for timer T400 as described in clause 7.1. Value ms100 corresponds to 100 ms , value ms 200 corresponds to 200 ms and so on.
\end{tabular} \\
\hline
\end{tabular}
- SIB13

SIB13 contains configurations of V2X sidelink communication defined in TS 36.331 [10].

ETSI


--- Page 452  ---


3GPP TS 38.331 version 17.0.0 Release 17
451
ETSI TS 138331 V17.0.0 (2022-05)

SIB13 information element
```
-- ASNISTART
-- TAG-SIBl3-START
SIBl3-rl6 ::=
    sl-V2X-ConfigCommon-r16
    dumny
    tdd-Config-rl6
    lateNonCriticalExtension
    ...
}
```

SEQUENCE 1
-- TAG-SIBI3-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SIB13 field descriptions \\
\hline \begin{tabular}{l}
dummy \\
This field is not used in the specification and the UE ignores the received value.
\end{tabular} \\
\hline \begin{tabular}{l}
si-V2X-ConfigCommon \\
This field includes the E-UTRA SysteminformationBlockType21 message as specified in TS 36.331 [10].
\end{tabular} \\
\hline \begin{tabular}{l}
tdd-Config \\
This field includes the tdd-Config in E-UTRA SysteminformationBlockType 1 message as specified in TS 36.331 [10].
\end{tabular} \\
\hline
\end{tabular}
- SIB14

SIB14 contains configurations of V2X sidelink communication defined in TS 36.331 [10], which can be used jointly with that included in SIB13.
SIB14 information element
```
-- ASNISTART
-- TAG-SIBl4-START
SIBl4-rl6 ::=
    sl-V2X-ConfigCommonExt-rl6
    lateNonCriticalExtension
    ...
}
```

```
SEQUENCE \
    OCTET STRING,
```

-- TAG-SIBl4-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SIB14 field descriptions \\
\hline si-V2X-ConfigCommonExt \\
This field includes the E-UTRA SysteminformationBlockType26 message as specified in TS 36.331[10]. \\
\hline
\end{tabular}

ETSI


--- Page 453  ---


3GPP TS 38.331 version 17.0.0 Release 17
452
ETSI TS 138331 V17.0.0 (2022-05)
S/B15

SIB15 contains configurations of disaster roaming information.
SIB15 information element
```
-- ASNISTART
-- TAG-SIBl5-START
SIBl5-rl7 ::= SEQUENCE [
    commonPLMNsWithDisasterCondition-rl7 SEQUENCE (SIZE (l..maxPLMN)) OF PLMN-Identity
    applicableDisasterInfoList-rl7 SEQUENCE (SIZE (1..maxPLMN)) OF ApplicableDisasterInfo-rl7
    lateNonCriticalExtension OCTET STRING
    ...
}
ApplicableDisasterInfo-rl7 ::= CHOICE [
    noDisasterRoaming-rl7 NULL,
    oneBitApproach-rl7 NULL, -- The semantics for this approach is pending CTl progress
    commonPLMNs-rl7 NULL,
    dedicatedPLMNs-rl7 SEQUENCE (SIZE (l..maxPLMN)) OF PLMN-Identity
}
-- TAG-SIBl5-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SIB15 field descriptions \\
\hline \begin{tabular}{l}
commonPLMNsWithDisasterCondition \\
A list of PLMN(s) with disaster conditions which can be commonly applicable to the PLMNs sharing the cell.
\end{tabular} \\
\hline \begin{tabular}{l}
applicableDisasterinfoList \\
A list indicating the applicable disaster information for the networks indicated in plmn-IdentityList and npn-IdentityList-r16. The network indicates in this list one entry for each entry of pimn-IdentityList, followed by one entry for each entry of npn-IdentifyList-r16, meaning that this list will have as many entries as the number of entries of the combination of pimn-IdentityList and npn-IdentifyList-r16. The first entry in this list indicates the disaster information applicable for the network(s) in the first entry of pimn-IdentityList/npn-IdentityList-r16, the second entry in this list indicates the disaster information applicable for the network(s) in the second entry of pimn-IdentityList/npn-IdentityList-r16, and so on. Each entry in this list can either be having the value noDisasterRoaming, oneBitApproach, commonPLMNs, or dedicatedPLMNs. If an entry in this list takes the value noDisasterRoaming, disaster roaming is not allowed for this network(s). If an entry in this list takes the value oneBitApproach, [TBD what happens]. If an entry in this list takes the value commonPLMNs, the PLMN(s) with disaster conditions indicated in the field commonPLMNsWithDisasterCondition apply for this entry. If an entry in this list contains the value dedicatedPLMNs, the listed PLMN(s) are the PLMN(s) with disaster conditions that apply to the network(s) corresponding to this entry. For SNPNs, the network indicates the value noDisasterRoaming.
\end{tabular} \\
\hline
\end{tabular}
- SIB16

SIB16 contains configurations of slice specific cell reselection information.

ETSI


--- Page 454  ---


3GPP TS 38.331 version 17.0.0 Release 17
453
ETSI TS 138331 V17.0.0 (2022-05)

SIB16 information element
```
-- ASNISTART
-- TAG-SIBl6-START
SIBl6-rl7 := SEQUENCE \
    freqPriorityListNRSlicing-rl7 FreqPriorityListNRSlicing-rl7 OPTIONAL, -- Need. R
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    ...
}
-- TAG-SIBl6-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SPeqPriorityListNRSlicing \\
This field indicates cell reselection priorities for slicing. \\
\hline
\end{tabular}
- SIB17

SIB17 contains configurations of TRS resources for idle/inactive UEs.
SIB17 information element
```
-- ASNISTART
-- TAG-SIBl7-START
SIBl7-rl7 ::= SEQUENCE {
    segmentNumber-rl7 INTEGER (0..1),
    segmentType-rl7
    segment ENUMERATED {notLastSegment, lastSegment},
}
SIBl7-IEs-rl7 ::= SEQUENCE {
```

```
                sparel} OPTIONAL, -- Need.S
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    ...
}
TRS-ResourceSet-rl7 ::= SEQUENCE [
    powerControlOffsetSS-rl7 ENUMERATED [db-3, db0, db3, db6],
    scramblingID-Info-rl7 CHOICE {
        scramblingIDforCommon-rl7 ScramblingId,
        scramblingIDperResourceListWith2-rl7 SEQUENCE (SIZE (2)) OF ScramblingId,
        scramblingIDperResourceListWith4-rl7 SEQUENCE (SIZE (4)) OF ScramblingId,
    ...
    },
```


ETSI


--- Page 455  ---


3GPP TS 38.331 version 17.0.0 Release 17
454
ETSI TS 138331 V17.0.0 (2022-05)
```
    firstOFDMSymbolInTimeDomain-rl7
    startingRB-rl7
    nrofRBs-rl7
    ssb-Index-rl7
    periodicityAndOffset-rl7
        slotsl0
        slots20
        slots40
        slots80
    },
    frequencyDomainAllocation-rl7
    indBitID-rl7
    nrofResources-rl7
    ...
}
-- TAG-SIBl7-STOP
-- ASNISTOP
```

```
INTEGER (0..9),
INTEGER (0..maxNrofPhysicalResourceBlocks-1),
INTEGER (24..maxNrofPhysicalResourceBlocksPlusl),
SSB-Index,
CHOICE \
    INTEGER (0..9),
    INTEGER (0..19),
    INTEGER (0..39),
    INTEGER (0..79)
BIT STRING (SIZE (4)),
INTEGER (0..5),
ENUMERATED {n2, n4},
```


\begin{tabular}{|l|}
\hline SIB17 field descriptions \\
\hline \begin{tabular}{l}
trs-ResouceSetConfig \\
RS configuration of TRS occasion(s) for idle/inactive UE(s), in terms of a list of \( \mathrm{N}>=1 \) NZP TRS resource set(s). The maximum number of TRS resource sets configured by higher layer is 64 . If a TRS resource is configured, the L1 based availability indication is always enabled based on that configuration. A UE which acquired SIB-X with a TRS configuration but did not yet receive an associated L1-based availability indication considers the configured TRS as unavailable.
\end{tabular} \\
\hline \begin{tabular}{l}
TRS-ResourceSet \\
Common configuration parameters for the TRS resource set.
\end{tabular} \\
\hline \begin{tabular}{l}
validityDuration \\
The valid time duration at least for a paging PDCCH based L1 availability indication, time unit is one default paging cycle. When the validity duration is not configured, UE assumes a default time duration to be 2 default paging cycle(s).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 456  ---


3GPP TS 38.331 version 17.0.0 Release 17
455
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline TRS-ResourceSet field descriptions \\
\hline \begin{tabular}{l}
firstOFDMSymbolln TimeDomain \\
The index of the first OFDM symbol in the PRB used for TRS in a slot. The field indicates first symbol in a slot, a second symbol in the same slot can be derived implicitly with symbol index as firstOFDMSymbollnTimeDomain+4.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyDomainAllocation \\
Indicates the offset of the first RE to RE\#0 in a RB in row1.
\end{tabular} \\
\hline \begin{tabular}{l}
indBitID \\
The index of the associated bit in TRS availability indication field in DCI. Each TRS resource set is configured with an ID i for the association with (i+1)-th indication bit in TRS availability indication field in DCI.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofRBs \\
Number of PRBs across which corresponding TRS resource spans.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofResources \\
The number of TRS resources for a TRS resource set.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityAndOffset \\
The periodicity and slot offset (slot) for periodicTRS. It is used to determine the location of the first slot of TRS resource set. The periodicity value slots 10 corresponds to 10 slots, value slots 20 corresponds to 20 slots, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
powerControlOffsetSS \\
Power offset (dB) of NZP CSI-RS RE to SSS RE.
\end{tabular} \\
\hline \begin{tabular}{l}
scrambling ID-info \\
One or more scrambling IDs are configured for a TRS resource set. If a common scrambling ID is configured, it applies to all the TRS resources within the TRS resource set. Otherwise, each TRS resource within the TRS resource set is provided with a scrambling ID. If the number of TRS resources for the TRS resource set is 2 , scrambling/DperResourceListWith2-r17 is configured, while scrambling/DperResourceListWith4-r17 is configured for the case that the number of TRS resources for the TRS resource set is 4.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-Index \\
The index of reference SSB with which quasi-collocation information is provided as specified in TS 38.214 [19] clause 5.1.5.
\end{tabular} \\
\hline \begin{tabular}{l}
startingRB \\
The PRB index where corresponding TRS resource starts in relation to common resource block \#0 (CRB\#0) on the common resource block grid.
\end{tabular} \\
\hline
\end{tabular}
- SIB18

SIB18 contains Group IDs for Network selection (GINs) to support access using credentials from a Credentials Holder or to enable UE onboarding. SIB18 may only be present if there is at least one SNPN that supports either access using credentials from a Credentials Holder or UE onboarding.

SIB18 information element
```
-- ASNISTART
-- TAG-SIBl8-START
```

```
SIBl8-rl7 ::=
    gin-ElementList-rl7
    ginsPerSNPN-List-rl7
    lateNonCriticalExtension
    ...
}
GIN-Element-rl7 ::= SEQUENCE {
```


ETSI


--- Page 457  ---


3GPP TS 38.331 version 17.0.0 Release 17
456
ETSI TS 138331 V17.0.0 (2022-05)
```
    plmn-Identity-rl7
    nid-List-rl7
}
GINs-perSNPN-rl7 ::=
    supportedGINs-rl7
}
-- TAG-SIBl8-STOP
-- ASNISTOP
```

```
    PLMN-Identity,
    SEQUENCE (SIZE (l..maxGIN-rl7)) OF NID-rl6
SEQUENCE \
    BIT STRING (SIZE (l..MAXGIN-rl7)) OPTIONAL -- Need R
```


\begin{tabular}{|l|}
\hline SIB18 field descriptions \\
\hline \begin{tabular}{l}
gin-ElementList \\
The G/N-ElementList contains one or more GIN elements. Each GIN element contains either one GIN, which is identified by a PLMN ID and a NID, or multiple GINs that share the same PLMN ID. The GIN index \( m \) is defined as \( \mathrm{d} 1+\mathrm{d} 2+\ldots+\mathrm{d}(n-1)+\mathrm{i} \) for the GIN included in the \( n \)-th entry of the gin-ElementList and the \( i \)-th entry of its corresponding G/NElement, where \( d(k) \) is the number of GIN index values used in the \( k \)-th gin-ElementList entry.
\end{tabular} \\
\hline \begin{tabular}{l}
ginsPerSNPN-List \\
Indicates the supported GINs for each SNPN. The network includes the same number of entries as the number of SNPNs in snpn-Access/nfoList in provided in SIB1, and the n-th entry in this list corresponds to the n-th SNPN listed in snpn-AccessinfoList provided in SIB1. It is not present if there is only a single SNPN in snpn-AccessinfoList in SIB1, as in that case all GINs in this SIB is associated with that SNPN.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline GINs-PerSNPN field descriptions \\
\hline \begin{tabular}{l}
supportedGINs \\
Indicates the GINs which are supported by the given SNPN. The first/leftmost bit corresponds to the GIN with GIN index 0 , the second bit corresponds to the GIN with GIN index 1 and so on. A bit set to 1 indicates that the GIN is supported by the SNPN. If the field is is not present, then the corresponding SNPN does not support any GINs.
\end{tabular} \\
\hline
\end{tabular}
- SIB19

SIB19 contains satellite assistance information.
SIB19 information element
```
-- ASNISTART
-- TAG-SIB19-START
SIBl9-rl7 ::= SEQUENCE {
    ntn-Config NTN-Config-rl7
    t-Service-rl7
    referenceLocation-rl7
    ta-Report-rl7
    lateNonCriticalExtension
    ...
}
ReferenceLocation-rl7 ::= ENUMERATED { ffs }
-- TAG-SIBI9-STOP
```


ETSI


--- Page 458  ---


3GPP TS 38.331 version 17.0.0 Release 17
457
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

\begin{tabular}{|l|}
\hline SIB19 field descriptions \\
\hline \begin{tabular}{l}
ntn-Config \\
Provides Ephemeris data, common TA parameters, koffset, validity duration for UL sync information and epoch time when included in SIB19.
\end{tabular} \\
\hline \begin{tabular}{l}
referenceLocation \\
Reference location of a cell provided via NTN quasi-Earth fixed system. FFS for exact field description.
\end{tabular} \\
\hline \begin{tabular}{l}
ta-Report \\
Indicates whether UE specific TA reporting is enabled during initial access (see TS 38.321 [3], clause 5.4.8).
\end{tabular} \\
\hline \begin{tabular}{l}
\( \boldsymbol{t} \)-Service \\
Indicates the time information on when a cell provided via NTN quasi-Earth fixed system is going to stop serving the area it is currently covering. The field counts the number of UTC seconds in 10 ms units since 00:00:00 on Gregorian calendar date 1 January, 1900 (midnight between Sunday, December 31, 1899 and Monday, January 1, 1900).FFS" This field is excluded when determining changes in system information, i.e. changes of \( t \)-Service should neither result in system information change notifications nor in a modification of value Tag in SIB1."
\end{tabular} \\
\hline
\end{tabular}
- SIB20

SIB20 contains the information required to acquire the MCCH configuration for MBS broadcast.
SIB20 information element
```
-- ASNISTART
-- TAG-SIB20-START
SIB20-rl7 ::= SEQUENCE [
    mcch-Config-rl7 MCCH-Config-rl7,
    cfr-ConfigMCCH-MTCH-rl7 CFR-ConfigMCCH-MTCH-rl7,
    lateNonCriticalextension OCTET STRING OPTIONAL,
    ...
}
MCCH-Config-rl7 ::= SEQUENCE {
    mcch-RepetitionPeriodAndOffset-rl7 MCCH-RepetitionPeriodAndOffset-rl7,
    mcch-WindowStartSlot-rl7 INTEGER (0..79),
```

```
    mcch-ModificationPeriod-rl7 ENUMERATED {rf2, rf4, rf8, rfl6, rf32, rf64, rfl28, rf256,
                rf5l2, rfl024, r2048, rf4096, rf8192, rfl6384, rf32768, rf65536}
}
MCCH-RepetitionPeriodAndOffset-rl7 ::= CHOICE {
    rfl-rl7 INTEGER(0),
    rf2-rl7 INTEGER(0..1),
    rf4-rl7 INTEGER(0..3),
    rf8-rl7 INTEGER(0..7),
    rfl6-rl7 INTEGER(0..15),
    rf32-rl7 INTEGER(0..31),
    rf64-rl7 INTEGER(0..63),
    rfl28-rl7 INTEGER(0..127),
```


ETSI


--- Page 459  ---


3GPP TS 38.331 version 17.0.0 Release 17
458
ETSI TS 138331 V17.0.0 (2022-05)
```
    rf256-rl7 INTEGER(0..255)
}
-- TAG-SIB20-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SIB20 field descriptions \\
\hline \begin{tabular}{l}
mcch-WindowDuration \\
Indicates, starting from the slot indicated by mcch-WindowStartSlot, the duration in slot during which MCCH may be scheduled. Absence of this field means that MCCH is only scheduled in the slot indicated by mcch-WindowStartSlot.
\end{tabular} \\
\hline \begin{tabular}{l}
mcch-ModificationPeriod \\
Defines periodically appearing boundaries, i.e. radio frames for which SFN mod mcch-ModificationPeriod \( =0 \). The contents of different transmissions of MCCH information can only be different if there is at least one such boundary in-between them. Value rf2 corresponds to two radio frames, value rf4 corresponds to four radio frames and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
mcch-RepetitionPeriodAndOffset \\
Defines the length and the offset of the MCCH repetition period. rf1 corresponds to a repetition period length of one radio frame, rf2 corresponds to a repetition period length of two radio frames and so on. The corresponding integer value indicates the offset of the repetition period in the number of radio frames. MCCH is scheduled in radio frames for which: SFN mod repetition period length \( = \) offset of the repetition period.
\end{tabular} \\
\hline \begin{tabular}{l}
mcch-WindowStartSlot \\
Indicates the slot in which MCCH transmission window starts.
\end{tabular} \\
\hline
\end{tabular}
- SIB21

SIB21 contains the mapping between frequency and MBS services.
SIB21 information element
```
-- ASNISTART
-- TAG-SIB2l-START
SIB2l-rl7 ::= SEQUENCE {
    mbs-FSAI-IntraFreq-rl7 MBS-FSAI-List-rl7 OPTIONAL, -- Need. R
    mbs-FSAI-InterFreqList-rl7 MBS-FSAI-InterFreqList-rl7 OPTIONAL, -- Need R
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    ...
}
MBS-FSAI-List-rl7 := SEQUENCE (SIZE (l..maxFSAI-MBS-rl7)) OF MBS-FSAI-rl7
MBS-FSAI-InterFreqList-rl7 ::= SEQUENCE (SIZE (l..maxFreq)) OF MBS-FSAI-InterFreq-rl7
MBS-FSAI-InterFreq-rl7 ::= SEQUENCE [
    dl-CarrierFreq-rl7 ARFCN-ValueNR,
    mbs-FSAI-List-rl7 MBS-FSAI-List-rl7
}
MBS-FSAI-rl7 ::= OCTET STRING (SIZE (3))
-- TAG-SIB21-STOP
```


ETSI


--- Page 460  ---


3GPP TS 38.331 version 17.0.0 Release 17
459
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

\begin{tabular}{|l|}
\hline SIB21 field descriptions \\
\hline \begin{tabular}{l}
mbs-FSAl-InterFreqList \\
Contains a list of neighboring frequencies including additional bands, if any, that provide MBS services and the corresponding MBS FSAls.
\end{tabular} \\
\hline \begin{tabular}{l}
mbs-FSAl-IntraFreq \\
Contains the list of MBS FSAIs for the current frequency. For MBS service continuity, the UE shall use all MBS FSAls listed in mbs-FSA/-IntraFreq to derive the MBS frequencies of interest.
\end{tabular} \\
\hline
\end{tabular}
6.3.1a Positioning System information blocks
```
- PosSystemInformation-r16-IEs
-- ASNISTART
-- TAG-POSSYSTEMINFORMATION-R16-IES-START
PosSystemInformation-rl6-IEs ::= SEQUENCE [
    posSIB-TypeAndInfo-rl6 SEQUENCE (SIZE (1..maxSIB)) OF CHOICE \
        posSibl-l-rl6 SIBpos-rl6,
        posSibl-2-rl6 SIBpos-r16,
        posSibl-3-rl6 SIBpos-rl6,
        posSibl-4-r16 SIBpos-r16,
        posSibl-5-rl6 SIBpos-rl6,
        posSibl-6-rl6 SIBpos-r16,
        posSibl-7-rl6 SIBpos-rl6,
        posSibl-8-r16 SIBpos-r16,
        posSib2-l-rl6 SIBpos-r16,
        posSib2-2-rl6 SIBpos-r16,
        posSib2-3-r16 SIBpos-r16,
        posSib2-4-r16 SIBpos-r16,
        posSib2-5-r16 SIBpos-r16,
        posSib2-6-rl6 SIBpos-r16,
        posSib2-7-r16 SIBpos-r16,
        posSib2-8-r16 SIBpos-r16,
        posSib2-9-r16 SIBpos-r16,
        posSib2-10-r16 SIBpos-r16,
        posSib2-11-r16 SIBpos-r16,
        posSib2-12-r16 SIBpos-r16,
        posSib2-13-r16 SIBpos-r16,
        posSib2-14-r16 SIBpos-r16,
        posSib2-15-r16 SIBpos-r16,
        posSib2-16-r16 SIBpos-r16,
        posSib2-17-r16 SIBpos-r16,
        posSib2-18-r16 SIBpos-r16,
        posSib2-19-r16 SIBpos-r16,
        possib2-20-r16 SIBPos-r16,
        posSib2-21-r16 SIBpos-r16,
        posSib2-22-r16 SIBpos-r16,
```


ETSI


--- Page 461  ---


3GPP TS 38.331 version 17.0.0 Release 17
460
ETSI TS 138331 V17.0.0 (2022-05)
```
        posSib2-23-r16 SIBpos-r16,
        posSib3-1-r16 SIBpos-r16,
        posSib4-1-r16 SIBpos-r16,
        posSib5-1-r16 SIBpos-r16,
        posSib6-1-r16 SIBpos-r16,
        possib6-2-r16 SIBPOs-r16,
        possib6-3-r16 SIBPOs-r16,
        ... r
        posSibl-9-vl700 SIBpos-r16,
        posSibl-10-vl700 SIBpos-r16,
        posSib2-24-vl700 SIBpos-r16,
        posSib2-25-vl700 SIBpos-rl6,
        posSib6-4-vl700 SIBpos-r16,
        posSib6-5-vl700 SIBpos-r16,
        posSib6-6-vl700 SIBpos-r16
    },
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
-- TAG-POSSYSTEMINFORMATION-R16-IES-STOP
-- ASNISTOP

- PosSI-SchedulingInfo
-- ASNISTART
-- TAG-POSSI-SCHEDULINGINEO-START
PosSI-SchedulingInfo-rl6 ::= SEQUENCE [
    posSchedulingInfoList-rl6 SEQUENCE (SIZE (l..maxSI-Message)) OF PosSchedulingInfo-rl6,
    posSI-RequestConfig-r16 SI-RequestConfig OPTIONAL, -- Cond MSG-1
    posSI-RequestConfigSUL-rl6 SI-RequestConfig OPTIONAL, -- Cond. SUL-MSG-1
    ...
}
PosSchedulingInfo-rl6 ::= SEQUENCE {
    offsetToSI-Used-rl6 ENUMERATED {true} OPTIONAL, -- Need. R
    posSI-Periodicity-rl6 ENUMERATED {rf8, rfl6, rf32, rf64, rfl28, rf256, rf5l2},
    posSI-BroadcastStatus-rl6 ENUMERATED [broadcasting, notBroadcasting],
    posSIB-MappingInfo-rl6 PosSIB-MappingInfo-rl6,
    ...
}
PosSIB-MappingInfo-rl6 ::= SEQUENCE (SIZE (1..maxSIB)) OF POsSIB-Type-rl6
PosSIB-Type-rl6 ::= SEQUENCE {
    encrypted-rl6
    gnss-id-rl6 GNSS-ID-rl6
    sbas-id-rl6 SBAS-ID-rl6 
    posSibType-rl6 ENUMERATED | posSibTypel-1, posSibTypel-2, posSibTypel-3, posSibTypel-4, posSibTypel-5, posSibTypel-6,
            posSibTypel-7, posSibTypel-8, posSibType2-1, posSibType2-2, posSibType2-3, posSibType2-4,
            posSibType2-5, posSibType2-6, posSibType2-7, posSibType2-8, posSibType2-9, posSibType2-10,
```


ETSI


--- Page 462  ---


3GPP TS 38.331 version 17.0.0 Release 17
461
ETSI TS 138331 V17.0.0 (2022-05)
```
            posSibType2-11, posSibType2-12, posSibType2-13, posSibType2-14, posSibType2-15,
            posSibType2-16, posSibType2-17, posSibType2-18, posSibType2-19, posSibType2-20,
            posSibType2-21, posSibType2-22, posSibType2-23, posSibType3-1, posSibType4-1,
            posSibType5-1,posSibType6-l, posSibType6-2, posSibType6-3,...},
    areaScope-rl6
}
GNSS-ID-rl6 ::= SEQUENCE {
    gnss-id-rl6 ENUMERATED|gps, sbas, qzss, galileo, glonass, bds, ...},
...
}
SBAS-ID-rl6 ::= SEQUENCE {
    sbas-id-rl6 ENUMERATED { waas, egnos, msas, gagan, ...},
    ...
}
-- TAG-POSSI-SCHEDULINGINFO-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PosSI-Schedulinginfo field descriptions \\
\hline \begin{tabular}{l}
areaScope \\
Indicates that a posSIB is area specific. If the field is absent, the posSIB is cell specific.
\end{tabular} \\
\hline \begin{tabular}{l}
encrypted \\
The presence of this field indicates that the pos-sib-type is encrypted as specified in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
gnss-id \\
The presence of this field indicates that the positioning SIB type is for a specific GNSS. Indicates a specific GNSS (see also TS 37.355 [49])
\end{tabular} \\
\hline \begin{tabular}{l}
posSI-BroadcastStatus \\
Indicates if the SI message is being broadcasted or not. Change of posSI-BroadcastStatus should not result in system information change notifications in Short Message transmitted with P-RNTI over DCI (see clause 6.5). The value of the indication is valid until the end of the BCCH modification period when set to broadcasting.
\end{tabular} \\
\hline \begin{tabular}{l}
posSI-RequestConfig \\
Configuration of Msg1 resources that the UE uses for requesting SI-messages for which posS/-BroadcastStatus is set to notBroadcasting.
\end{tabular} \\
\hline \begin{tabular}{l}
posSI-RequestConfigSUL \\
Configuration of Msg1 resources that the UE uses for requesting SI-messages for which posSI-BroadcastStatus is set to notBroadcasting.
\end{tabular} \\
\hline \begin{tabular}{l}
posSIB-Mappinginfo \\
List of the posSIBs mapped to this Systeminformation message.
\end{tabular} \\
\hline \begin{tabular}{l}
posSibType \\
The positioning SIB type is defined in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
posSI-Periodicity \\
Periodicity of the SI-message in radio frames, such that rf8 denotes 8 radio frames, rf16 denotes 16 radio frames, and so on. If the offsetToS/Used is configured, the posS/Periodicity of rf8 cannot be used.
\end{tabular} \\
\hline \begin{tabular}{l}
offsetToSI-Used \\
This field, if present indicates that all the SI messages in posScheduling/nfoList are scheduled with an offset of 8 radio frames compared to SI messages in schedulinginfoList. offsetToS/-Used may be present only if the shortest configured SI message periodicity for SI messages in scheduling/nfoList is 80 ms . If SI offset is used, this field is present in each of the SI messages in the posSchedulinginfoList.
\end{tabular} \\
\hline \begin{tabular}{l}
sbas-id \\
The presence of this field indicates that the positioning SIB type is for a specific SBAS. Indicates a specific SBAS (see also TS 37.355 [49]).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 463  ---


3GPP TS 38.331 version 17.0.0 Release 17
462
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional presence & Explanation \\
\hline MSG-1 & The field is optionally present, Need R, if posS/-BroadcastStatus is set to notBroadcasting for any SI-message included in PosSchedulingInfo. It is absent otherwise. \\
\hline SUL-MSG-1 & The field is optionally present, Need R, if supplementaryUplink is configured in ServingCellConfigCommonSIB and if posS/-BroadcastStatus is set to notBroadcasting for any SI-message included in PosSchedulingInfo. It is absent otherwise. \\
\hline
\end{tabular}
- SIBpos

The IE SIBpos contains positioning assistance data as defined in TS 37.355 [49].
S/Bpos information element
```
-- ASNISTART
-- TAG-SIPOS-START
SIBPOS-rl6 ::= SEQUENCE {
    assistanceDataSIB-Element-rl6 OCTET STRING,
    lateNonCriticalExtension OCTET STRING OPTIONAL,
    ...
}
-- TAG-SIPOS-STOP
-- ASNISTOP
```


SIBpos field descriptions
```
assistanceDataSIB-Element
Parameter AssistanceDataS/Belement defined in TS 37.355 [49]. The firstfleftmost bit of the first octet contains the most significant bit.
```

6.3.2 Radio resource control information elements
- AdditionalSpectrumEmission

The IE AdditionalSpectrumEmission is used to indicate emission requirements to be fulfilled by the UE (see TS 38.101-1 [15], clause 6.2.3, and TS 38.101-2 [39], clause 6.2.3).
Additiona/SpectrumEmission information element
-- ASNISTART
-- TAG-ADDITIONALSPECTRUMEMISSION-START

AdditionalSpectrumEmission : := INTEGER (0. 7)
-- TAG-ADDITIONALSPECTRUMEMISSION-STOP
-- ASNISTOP

ETSI


--- Page 464  ---


3GPP TS 38.331 version 17.0.0 Release 17
463
ETSI TS 138331 V17.0.0 (2022-05)
- Alpha

The IE Alpha defines possible values of a the pathloss compensation coefficient for uplink power control. Value alpha 0 corresponds to the value 0 , Value alpha 04 corresponds to the value 0.4 , Value alpha 05 corresponds to the value 0.5 and so on. Value alphal corresponds to value 1 . See also clause 7.1 of TS 38.213 [13].
-- ASNISTART
-- TAG-ALPHA-START
Alpha :: ENUMERATED [alpha0, alpha04, alpha05, alpha06, alpha07, alpha08, alpha09, alphal\}
-- TAG-ALPHA-STOP
-- ASNISTOP

AMF-Identifier
The IE AMF-Identifier (AMFI) comprises of an AMF Region ID, an AMF Set ID and an AMF Pointer as specified in TS 23.003 [21], clause 2.10.1.
AMF-Identifier information element
-- ASNISTART
-- TAG-AMF-IDENTIFIER-START

AMF-Identifier : :=
BIT STRING (SIZE (24))
-- TAG-AME-IDENTIEIER-STOP
-- ASNISTOP

ARFCN-ValueEUTRA
The IE ARFCN-ValueEUTRA is used to indicate the ARFCN applicable for a downlink, uplink or bi-directional (TDD) E-UTRA carrier frequency, as defined in TS 36.101 [22].

ARFCN-ValueEUTRA information element
-- ASNISTART
-- TAG-ARFCN-VALUEEUTRA-START

ARFCN-ValueEUTRA : :
-- TAG-ARFCN-VALUEEUTRA-STOP
-- ASNISTOP

ETSI


--- Page 465  ---


3GPP TS 38.331 version 17.0.0 Release 17
464
ETSI TS 138331 V17.0.0 (2022-05)
- ARFCN-ValueNR

The IE \( A R F C N \)-ValueNR is used to indicate the ARFCN applicable for a downlink, uplink or bi-directional (TDD) NR global frequency raster, as defined in TS 38.101-1 [15] and TS 38.101-2 [39], clause 5.4.2.
-- ASNISTART
-- TAG-ARFCN-VALUENR-START
ARFCN-ValueNR : : \( \quad \) INTEGER (O. maxNARFCN)
-- TAG-ARFCN-VALUENR-STOP
-- ASNISTOP
- ARFCN-ValueUTRA-FDD

The IE \( A R F C N \)-ValueUTRA-FDD is used to indicate the ARFCN applicable for a downlink (Nd, FDD) UTRA-FDD carrier frequency, as defined in TS 25.331 [45].
ARFCN-ValueUTRA-FDD information element
```
-- ASNISTART
-- TAG-ARFCN-ValueUTRA-FDD-START
ARFCN-ValueUTRA-FDD-rl6 ::= INTEGER (0..16383)
-- TAG-ARFCN-ValueUTRA-FDD-STOP
-- ASNISTOP
```


AvailabilityCombinationsPerCell
The IE AvailabilityCombinationsPerCell is used to configure the AvailabilityCombinations applicable for a cell of the IAB DU (see TS 38.213 [13], clause 14). Note that the IE AvailabilityCombinationsPerCellIndex can only be configured up to 511.

AvailabilityCombinationsPerCel/information element
```
-- ASNISTART
-- TAG-AVAILABILITYCOMBINATIONSPERCELL-START
AvailabilityCombinationsPerCell-rl6 ::= SEQUENCE {
    availabilityCombinationsPerCellIndex-r16 AvailabilityCombinationsPerCellIndex-rl6,
    iab-DU-CellIdentity-rl6 CellIdentity,
```

```
    ...;
    [ [
```

```
OPTIONAL -- Need. M
```


ETSI


--- Page 466  ---


3GPP TS 38.331 version 17.0.0 Release 17
465
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]]
}
AvailabilityCombinationsPerCellIndex-rl6 ::= INTEGER(O..maxNrofDUCells-rl6)
AvailabilityCombination-rl6 ::= SEQUENCE {
    availabilityCombinationId-rl6 AvailabilityCombinationId-rl6,
```

```
}
AvailabilityCombinationId-r16 := INTEGER (0..maxNrofAvailabilityCombinationsPerSet-l-rl6)
AvailabilityCombination-rl7 ::= SEQUENCE [
    availabilityCombinationId-r16 AvailabilityCombinationId-rl6,
```

```
}
RbSetGroup-rl7 ::= SEQUENCE {
```

```
}
-- TAG-AVAILABILITYCOMBINATIONSPERCELL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline AvailabilityCombination field descriptions \\
\hline \begin{tabular}{l}
resourceAvailability \\
Indicates the resource availability of soft symbols for a set of consecutive slots in the time domain. The meaning of this field is described in TS 38.213 [13], Table 14.3. If included in RbSetGroup within AvailabilityCombination-r17, it indicates the availability of soft resources for an RB set group. If included in AvailabilityCombination-r17 when the rbSetGroups is not configured, it indicates the availability of soft resources in one or multiple slots for all RB sets of a DU cell.
\end{tabular} \\
\hline \begin{tabular}{l}
availabilityCombinationld \\
This ID is used in the DCI Format 2 _ 5 payload to dynamically select this AvailabilityCombination, see TS 38.213 [13], clause 14.
\end{tabular} \\
\hline \begin{tabular}{l}
rbSetGroups \\
Indicates the RB set groups configured for the availability combination. Each group includes consecutive RB sets.
\end{tabular} \\
\hline \begin{tabular}{l}
rbSets \\
Indicates the RB sets configured for each RB set group.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline AvailabilityCombinationsPerCell field descriptions \\
\hline \begin{tabular}{l}
iab-DU-Cellidentity \\
The ID of the IAB-DU cell for which the availabilityCombinations are applicable.
\end{tabular} \\
\hline \begin{tabular}{l}
positioninDCI-AI \\
The (starting) position (bit) of the AvailabilityCombination/d for the indicated IAB-DU cell (iab-DU-Cellidentity) within the DCI payload.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 467  ---


3GPP TS 38.331 version 17.0.0 Release 17
466
ETSI TS 138331 V17.0.0 (2022-05)
- Availabilitylndicator

The IE AvailabilityIndicator is used to configure monitoring a PDCCH for Availability Indicators (AI).
Availabilityindicator information element
```
-- ASNISTART
-- TAG-AVAILABILITYINDICATOR-START
AvailabilityIndicator-rl6 ::= SEQUENCE \
    ai-RNTI-rl6 AI-RNTI-rl6,
    dci-PayloadSizeAI-rl6 INTEGER (1..maxAI-DCI-PayloadSize-r16),
```

```
    ...
}
AI-RNTI-rl6 ::= RNTI-Value
```

-- TAG-AVAILABILITYINDICATOR-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline Availabilitylndicator field descriptions \\
\hline \begin{tabular}{l}
ai-RNTI \\
Used by an IAB-MT for detection of DCI format 2_5 indicating AvailabilityCombination/d for an IAB-DU's cells.
\end{tabular} \\
\hline \begin{tabular}{l}
availableCombToAddModList \\
A list of availabilityCombinations to add for the IAB-DU's cells. (see TS 38.213 [13], clause 14).
\end{tabular} \\
\hline \begin{tabular}{l}
availableCombToReleaseList \\
A list of availabilityCombinations to release for the IAB-DU's cells. (see TS 38.213 [13], clause 14).
\end{tabular} \\
\hline \begin{tabular}{l}
dci-PayloadSizeAI \\
Total length of the DCI payload scrambled with ai-RNTI (see TS 38.213 [13]).
\end{tabular} \\
\hline
\end{tabular}
- BAP-RoutingID

The IE BAP-RoutingID is used for IAB-node to configure the BAP Routing ID.
BAP-RoutingID information element
```
-- ASNISTART
-- TAG-BAPROUTINGID-START
BAP-RoutingID-rl6::= SEQUENCEl
    bap-Address-r16
    BIT STRING (SIZE (10)),
}
-- TAG-BAPROUTINGID-STOP
```


ETSI


--- Page 468  ---


3GPP TS 38.331 version 17.0.0 Release 17
467
ETSI TS 138331 V17.0.0 (2022-05)
```
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline BAP-RoutingID field descriptions \\
\hline \begin{tabular}{l}
bap-Address \\
The ID of a destination IAB-node or IAB-donor-DU used in the BAP header.
\end{tabular} \\
\hline \begin{tabular}{l}
bap-Pathld \\
The ID of a path used in the BAP header.
\end{tabular} \\
\hline
\end{tabular}
- BeamFailureRecoveryConfig

The IE BeamFailureRecoveryConfig is used to configure the UE with RACH resources and candidate beams for beam failure recovery in case of beam failure detection. See also TS 38.321 [3], clause 5.1.1.

BeamFailureRecoveryConfig information element
```
-- ASNISTART
-- TAG-BEAMFAILURERECOVERYCONFIG-START
BeamFailureRecoveryConfig ::= SEQUENCE {
    rootSequenceIndex-BFR
    rach-ConfigBER
    rsrp-ThresholdSSB
    candidateBeamRSList
    ssb-perRACH-Occasion
    ra-ssb-OccasionMaskIndex
    recoverySearchSpaceId
    ra-Prioritization
    beamFailureRecoveryTimer
    ...;
    [ [
    msgl-SubcarrierSpacing
    ]],
    [ [
    ra-PrioritizationTwoStep-rl6
    candidateBeamRSListExt-vl610
    ]],
    [ [
    spCell-BER-CBRA-rl6 ENUMERATED {true}
    ] ]
}
PRACH-ResourceDedicatedBFR ::= CHOICE {
    ssb
    BFR-SSB-Resource,
}
BER-SSB-Resource ::= SEQUENCE \
```


ETSI


--- Page 469  ---


3GPP TS 38.331 version 17.0.0 Release 17
468
ETSI TS 138331 V17.0.0 (2022-05)
```
    ssb
    ra-PreambleIndex INTEGER (0..63),
    ...
}
BER-CSIRS-Resource ::= SEQUENCE \
    csi-RS
    ra-OccasionList
    ra-PreambleIndex
    ...
}
CandidateBeamRSListExt-r16::= SEQUENCE (SIZE(1..maxNrofCandidateBeamsExt-rl6)) OF PRACH-ResourceDedicatedBFR
-- TAG-BEAMEAILURERECOVERYCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 470  ---


3GPP TS 38.331 version 17.0.0 Release 17
469
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline BeamFailureRecoveryConfig field descriptions \\
\hline \begin{tabular}{l}
beamFailureRecoveryTimer \\
Timer for beam failure recovery timer. Upon expiration of the timer the UE does not use CFRA for BFR. Value in ms. Value \( m s 10 \) corresponds to 10 ms , value ms 20 corresponds to 20 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateBeamRSList, candidateBeamRSListExt-v1610 \\
Set of reference signals (CSI-RS and/or SSB) identifying the candidate beams for recovery and the associated RA parameters. This set includes all elements of candidateBeamRSList (without suffix) and all elements of candidateBeamRSListExt-v1610. The UE maintains candidateBeamRSList and candidateBeamRSListExt-v1610 separately: Receiving candidateBeamRSListExt-v1610 set to release releases only the entries that were configured by candidateBeamRSListExt-v1610, and receiving candidateBeamRSListExt-v1610 set to setup replaces only the entries that were configured by candidateBeamRSListExt-v1610 with the newly signalled entries. The network configures these reference signals to be within the linked DL BWP (i.e., within the DL BWP with the same bwp-ld) of the UL BWP in which the BeamFailureRecoveryConfig is provided.
\end{tabular} \\
\hline \begin{tabular}{l}
msg1-SubcarrierSpacing \\
Subcarrier spacing for contention free beam failure recovery (see TS 38.211 [16], clause 5.3.2). \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline \begin{tabular}{l}
rsrp-ThresholdSSB \\
L1-RSRP threshold used for determining whether a candidate beam may be used by the UE to attempt contention free random access to recover from beam failure (see TS 38.213 [13], clause 6).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-prioritization \\
Parameters which apply for prioritized random access procedure for BFR (see TS 38.321 [3], clause 5.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-PrioritizationTwoStep \\
Parameters which apply for prioritized 2-step random access procedure for BFR (see TS 38.321 [3], clause 5.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-ssb-OccasionMaskindex \\
Explicitly signalled PRACH Mask Index for RA Resource selection in TS 38.321 [3]. The mask is valid for all SSB resources.
\end{tabular} \\
\hline \begin{tabular}{l}
rach-ConfigBFR \\
Configuration of random access parameters for BFR.
\end{tabular} \\
\hline \begin{tabular}{l}
recoverySearchSpaceld \\
Search space to use for BFR RAR. The network configures this search space to be within the linked DL BWP (i.e., within the DL BWP with the same bwp-ld) of the UL BWP in which the BeamFailureRecoveryConfig is provided. The CORESET associated with the recovery search space cannot be associated with another search space. Network always configures the UE with a value for this field when contention free random access resources for BFR are configured.
\end{tabular} \\
\hline \begin{tabular}{l}
rootSequenceIndex-BFR \\
PRACH root sequence index (see TS 38.211 [16], clause 6.3.3.1) for beam failure recovery.
\end{tabular} \\
\hline \begin{tabular}{l}
spCell-BFR-CBRA \\
Indicates that UE is configured to send BFR MAC CE for SpCell BFR as specified in TS38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-perRACH-Occasion \\
Number of SSBs per RACH occasion for CF-BFR, see TS 38.213 [13], clause 8.1.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 471  ---


3GPP TS 38.331 version 17.0.0 Release 17
470
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline BFR-CSIRS-Resource field descriptions \\
\hline \begin{tabular}{l}
csi-RS \\
The ID of a NZP-CSI-RS-Resource configured in the CS/-MeasConfig of this serving cell. This reference signal determines a candidate beam for beam failure recovery (BFR).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-OccasionList \\
RA occasions that the UE shall use when performing BFR upon selecting the candidate beam identified by this CSI-RS. The network ensures that the RA occasion indexes provided herein are also configured by prach-Configuration/ndex and msg1-FDM. Each RACH occasion is sequentially numbered, first, in increasing order of frequency resource indexes for frequency multiplexed PRACH occasions; second, in increasing order of time resource indexes for time multiplexed PRACH occasions within a PRACH slot and Third, in increasing order of indexes for PRACH slots. \\
If the field is absent the UE uses the RA occasion associated with the SSB that is QCLed with this CSI-RS.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-Preambleindex \\
The RA preamble index to use in the RA occasions associated with this CSI-RS. If the field is absent, the UE uses the preamble index associated with the SSB that is QCLed with this CSI-RS.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline BFR-SSB-Resource field descriptions \\
\hline \begin{tabular}{l}
ra-Preambleindex \\
The preamble index that the UE shall use when performing BFR upon selecting the candidate beams identified by this SSB.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb \\
The ID of an SSB transmitted by this serving cell. It determines a candidate beam for beam failure recovery (BFR).
\end{tabular} \\
\hline
\end{tabular}
- BeamFailureRecoverySCellConfig

The IE BeamFailureRecoverySCellConfig is used to configure the UE with candidate beams for beam failure recovery in case of beam failure detection in SCell. See also TS 38.321 [3], clause 5.17.

BeamFailureRecoverySCel/Config information element
```
-- ASNISTART
-- TAG-BEAMFAILURERECOVERYSCELLCONFIG-START
BeamFailureRecoverySCellConfig-rl6::= SEQUENCE [
```

```
    ...
}
-- TAG-BEAMEAILURERECOVERYSCELLCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 472  ---


3GPP TS 38.331 version 17.0.0 Release 17
471
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline BeamFailureRecoverySCellConfig field descriptions \\
\hline \begin{tabular}{l}
candidateBeamRSSCellList \\
A list of reference signals (CSI-RS and/or SSB) identifying the candidate beams for recovery. The network always configures this parameter in every instance of this IE.
\end{tabular} \\
\hline \begin{tabular}{l}
rsrp-ThresholdBFR \\
L1-RSRP threshold used for determining whether a candidate beam may be included by the UE in BFR MAC CE (see TS 38.213 [13], clause 6). The network always configures this parameter in every instance of this IE.
\end{tabular} \\
\hline
\end{tabular}
- BeamFailureRecoveryServingCellConfig

The IE BeamFailureRecoveryServingCellConfig is used to configure the UE with candidate beams for beam failure recovery in case of beam failure detection in a serving cell when two BFD sets are configured. See also TS 38.321 [3], clause xxx.

Editor's note: how to refer BFD sets will depend how those will be implemented. Same reason candidatebeamlists are not yet associated to BFD sets in field description
BeamFailureRecoveryServingCellConfig information element
```
-- ASNISTART
-- TAG-BEAMFAILURERECOVERYSERVINGCELLCONFIG-START
BeamFailureRecoveryServingCellConfig-rl7 ::= SEQUENCE [
```

```
    ...
}
-- editor's notes: maxNrofCandidateBeams-rll is not known yet
-- TAG-BEAMFAILURERECOVERYSERVINGCELLCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline BeamFailureRecoveryServingCellConfig field descriptions \\
\hline \begin{tabular}{l}
additionalPCI \\
Indicates the physical cell IDs (PCI) of the SSBs in the candidateBeamRSList2.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateBeamRSList, candidateBeamRSList2 \\
A list of reference signals (CSI-RS and/or SSB) identifying the candidate beams for recovery. The network always configures this parameter in every instance of this IE.
\end{tabular} \\
\hline \begin{tabular}{l}
rsrp-ThresholdBFR \\
L1-RSRP threshold used for determining whether a candidate beam may be included by the UE in (enhanced) BFR MAC CE (see TS 38.213 [13], clause 6). The network always configures this parameter in every instance of this IE.
\end{tabular} \\
\hline
\end{tabular}
- BetaOffsets

The IE BetaOffsets is used to configure beta-offset values, see TS 38.213 [13], clause 9.3.

ETSI


--- Page 473  ---


3GPP TS 38.331 version 17.0.0 Release 17
472
ETSI TS 138331 V17.0.0 (2022-05)

BetaOffsets information element
```
-- ASNISTART
-- TAG-BETAOFFSETS-START
BetaOffsets ::=
    betaOffsetACK-Indexl
    betaOffsetACK-Index2
    betaOffsetACK-Index3
    betaOffsetCSI-Partl-Indexl
    betaOffsetCSI-Partl-Index2
    betaOffsetCSI-Part2-Indexl
    betaOffsetCSI-Part2-Index2
}
-- TAG-BETAOFFSETS-STOP
-- ASNISTOP
```

```
SEQUENCE {
    INTEGER(0..31)
    INTEGER(0..31)
    INTEGER(0..31)
    INTEGER(0..31)
    INTEGER(0..31)
    INTEGER(0..31)
```

    INTEGER(0..31) OPTIONAL, -- Need. S
```
OPTIONAL, -- Need S
OPTIONAL, -- Need. S
OPTIONAL, -- Need. S
OPTIONAL, -- Need. S
OPTIONAL, -- Need.S
OPTIONAL -- Need. S
```


\begin{tabular}{|l|}
\hline BetaOffsets field descriptions \\
\hline \begin{tabular}{l}
betaOffsetACK-Index1 \\
Up to 2 bits HARQ-ACK (see TS 38.213 [13], clause 9.3). When the field is absent the UE applies the value 11.
\end{tabular} \\
\hline \begin{tabular}{l}
betaOffsetACK-Index2 \\
Up to 11 bits HARQ-ACK (see TS 38.213 [13], clause 9.3). When the field is absent the UE applies the value 11.
\end{tabular} \\
\hline \begin{tabular}{l}
betaOffsetACK-Index3 \\
Above 11 bits HARQ-ACK (see TS 38.213 [13], clause 9.3). When the field is absent the UE applies the value 11.
\end{tabular} \\
\hline \begin{tabular}{l}
betaOffsetCSI-Part1-Index1 \\
Up to 11 bits of CSI part 1 bits (see TS 38.213 [13], clause 9.3). When the field is absent the UE applies the value 13.
\end{tabular} \\
\hline \begin{tabular}{l}
betaOffsetCSI-Part1-Index2 \\
Above 11 bits of CSI part 1 bits (see TS 38.213 [13], clause 9.3). When the field is absent the UE applies the value 13.
\end{tabular} \\
\hline \begin{tabular}{l}
betaOffsetCSI-Part2-Index1 \\
Up to 11 bits of CSI part 2 bits (see TS 38.213 [13], clause 9.3). When the field is absent the UE applies the value 13.
\end{tabular} \\
\hline \begin{tabular}{l}
betaOffsetCSI-Part2-Index2 \\
Above 11 bits of CSI part 2 bits (see TS 38.213 [13], clause 9.3). When the field is absent the UE applies the value 13.
\end{tabular} \\
\hline
\end{tabular}
- BetaOffsetsCrossPri

The IE BetaOffsetsCrossPri is used to configure beta-offset values for cross-priority HARQ-ACK multiplexing on PUSCH.
BetaOffsetsCrossPri information element
```
-- ASNISTART
-- TAG-BETAOFFSETSCROSSPRI-START
BetaOffsetsCrossPri-rl7 ::= SEQUENCE (SIZE(3)) OF INTEGER(0..31)
-- TAG-BETAOFFSETSCROSSPRI-STOP
-- ASNISTOP
```


ETSI


--- Page 474  ---


3GPP TS 38.331 version 17.0.0 Release 17
473
ETSI TS 138331 V17.0.0 (2022-05)
- BH-LogicalChannelldentity

The IE BH-LogicalChannelldentity is used to identify a logical channel between an IAB-node and its parent IAB-node or IAB-donor-DU.
BH-Logica/Channe//dentity information element
-- ASNISTART
-- TAG-BHLOGICALCHANNELIDENTITY-START

BH-LogicalChannelIdentity-rl6 : := CHOICE [
bh-LogicalChannelIdentity-rl6 LogicalChannelIdentity,
bh-LogicalChannelIdentityExt-rl6 BH-LogicalChannelIdentity-Ext-rl6
\}
-- TAG-BHLOGICALCHANNELIDENTITY-STOP
-- ASNISTOP

\begin{tabular}{|l|l|}
\hline & BH-LogicalChannelldentity field descriptions \\
\hline \begin{tabular}{l}
bh-LogicalChannelldentity \\
ID used for the MAC logical channel.
\end{tabular} & \\
\hline \begin{tabular}{l}
bh-LogicalChannelldentityExt \\
ID used for the MAC logical channel.
\end{tabular} & \\
\hline
\end{tabular}
- BH-LogicalChannelldentity-Ext

The IE BH-LogicalChannelldentity-Ext is used to identify a logical channel between an IAB-node and its parent node.
BH-LogicalChannelldentity-Ext information element
-- ASNISTART
-- TAG-BHLOGICALCHANNELIDENTITYEXT-START
BH-LogicalChannelIdentity-Ext-rl6 : := INTEGER (320.. maxLC-ID-Iab-rl6)
-- TAG-BHLOGICALCHANNELIDENTITYEXT-STOP
-- ASNISTOP
- BH-RLC-ChannelConfig

The IE BH-RLC-ChannelConfig is used to configure an RLC entity, a corresponding logical channel in MAC for BH RLC channel between [AB-node and its parent node.

ETSI


--- Page 475  ---


3GPP TS 38.331 version 17.0.0 Release 17
474
ETSI TS 138331 V17.0.0 (2022-05)

BH-RLC-Channe/Config information element
```
-- ASNISTART
-- TAG-BHRLCCHANNELCONFIG-START
BH-RLC-ChannelConfig-rl6::= SEQUENCE {
    bh-LogicalChannelIdentity-rl6 BH-LogicalChannelIdentity-rl6 OPTIONAL, -- Cond LCH-SetupOnly
    bh-RLC-ChannelID-rl6 BH-RLC-ChannelID-rl6,
    reestablishRLC-r16 ENUMERATED {true} OPTIONAL, -- Need N
    rlc-Config-rl6 RLC-Config OPTIONAL, -- Cond LCH-Setup
    mac-LogicalChannelConfig-rl6 LogicalChannelConfig OPTIONAL, -- Cond LCH-Setup
    ...
}
-- TAG-BHRLCCHANNELCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline BH-RLC-ChannelConfig field descriptions \\
\hline \begin{tabular}{l}
bh-LogicalChannelldentity \\
Indicates the logical channel id for BH RLC channel of the IAB-node.
\end{tabular} \\
\hline \begin{tabular}{l}
bh-RLC-ChannellD \\
Indicates the BH RLC channel in the link between IAB-MT of the IAB-node and IAB-DU of the parent IAB-node or IAB-donor-DU.
\end{tabular} \\
\hline \begin{tabular}{l}
reestablishRLC \\
Indicates that RLC should be re-established.
\end{tabular} \\
\hline \begin{tabular}{l}
ric-Config \\
Determines the RLC mode (UM, AM) and provides corresponding parameters.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline LCH-Setup & This field is mandatory present upon creation of a new Iogical channel for a BH RLC channel. It is optionally present, Need M, otherwise. \\
\hline LCH-SetupOnly & This field is mandatory present upon creation of a new logical channel for a BH RLC channel. It is absent, Need M otherwise. \\
\hline
\end{tabular}
- BH-RLC-ChannellD

The IE BH-RLC-ChannellD is used to identify a BH RLC channel in the link between [AB-MT of the [AB-node and IAB-DU of the parent [AB-node or [AB-donor-DU.
BH-RLC-ChannellD information element
```
-- ASN1START
-- TAG-BHRLCCHANNELID-START
BH-RLC-ChannelID-rl6 ::= BIT STRING (SIZE (16))
-- TAG-BHRLCCHANNELID-STOP
-- ASNISTOP
```


ETSI


--- Page 476  ---


3GPP TS 38.331 version 17.0.0 Release 17
475
ETSI TS 138331 V17.0.0 (2022-05)
- \( \quad \) BSR-Config

The IE BSR-Config is used to configure buffer status reporting.
BSR-Config information element
```
-- ASNISTART
-- TAG-BSR-CONFIG-START
BSR-Config ::=
    periodicBSR-Timer
    retxBSR-Timer
    logicalChannelSR-DelayTimer
    ...
}
-- TAG-BSR-CONFIG-STOP
-- ASNISTOP
```

```
SEQUENCE \
    ENUMERATED { sfl, sf5, sfl0, sfl6, sf20, sf32, sf40, sf64,
        sf80, sfl28, sfl60, sf320, sf640, sfl280, sf2560, infinity},
    ENUMERATED { sfl0, sf20, sf40, sf80, sfl60, sf320, sf640, sfl280, sf2560,
        sf5120, sf10240, spare5, spare4, spare3, spare2, sparel},
    ENUMERATED { sf20, sf40, sf64, sfl28, sf512, sfl024, sf2560, sparel} OPTIONAL, -- Need. R
```


\begin{tabular}{|l|}
\hline BSR-Config field descriptions \\
\hline \begin{tabular}{l}
logicalChannelSR-DelayTimer \\
Value in number of subframes. Value sf20 corresponds to 20 subframes, sf40 corresponds to 40 subframes, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicBSR-Timer \\
Value in number of subframes. Value sf1 corresponds to 1 subframe, value sf5 corresponds to 5 subframes and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
retxBSR-Timer \\
Value in number of subframes. Value sf10 corresponds to 10 subframes, value sf20 corresponds to 20 subframes and so on.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad B W P \)

The IE BWP is used to configure generic parameters of a bandwidth part as defined in TS 38.211 [16], clause 4.5, and TS 38.213 [13], clause 12.
For each serving cell the network configures at least an initial downlink bandwidth part and one (if the serving cell is configured with an uplink) or two (if using supplementary uplink (SUL)) initial uplink bandwidth parts. Furthermore, the network may configure additional uplink and downlink bandwidth parts for a serving cell.

The uplink and downlink bandwidth part configurations are divided into common and dedicated parameters.
BWP information element
```
-- ASNISTART
-- TAG-BWP-START
BWP ::=
    locationAndBandwidth
    subcarrierSpacing
```

```
SEQUENCE {
    INTEGER (0..37949),
    SubcarrierSpacing,
```


ETSI


--- Page 477  ---


3GPP TS 38.331 version 17.0.0 Release 17
476
ETSI TS 138331 V17.0.0 (2022-05)
```
    cyclicPrefix
}
-- TAG-BWP-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline BWP field descriptions \\
\hline \begin{tabular}{l}
cyclicPrefix \\
Indicates whether to use the extended cyclic prefix for this bandwidth part. If not set, the UE uses the normal cyclic prefix. Normal CP is supported for all subcarrier spacings and slot formats. Extended CP is supported only for 60 kHz subcarrier spacing. (see TS 38.211 [16], clause 4.2). Except for SUL, the network ensures the same cyclic prefix length is used in active DL BWP and active UL BWP within a serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
locationAndBandwidth \\
Frequency domain location and bandwidth of this bandwidth part. The value of the field shall be interpreted as resource indicator value (RIV) as defined TS 38.214 [19] with assumptions as described in TS 38.213 [13], clause 12, i.e. setting \( N_{\mathrm{BWP}}^{\text {size }}=275 \). The first PRB is a PRB determined by subcarrierSpacing of this BWP and offsetToCarrier (configured in SCS-Specific Carrier contained within FrequencylnfoDL / FrequencylnfoUL / Frequency/nfoUL-SIB / FrequencylnfoDL-SIB within ServingCellConfigCommon / ServingCellConfigCommonS/B) corresponding to this subcarrier spacing. In case of TDD, a BWP-pair (UL BWP and DL BWP with the same bwp-Id) must have the same center frequency (see TS 38.213 [13], clause 12)
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierSpacing \\
Subcarrier spacing to be used in this BWP for all channels and reference signals unless explicitly configured elsewhere. Corresponds to subcarrier spacing according to TS 38.211 [16], table 4.2-1. The value \( k H z 15 \) corresponds to \( \mu=0 \), value \( k H z 30 \) corresponds to \( \mu=1 \), and so on. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15,30 , or 60 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz \\
For the initial DL BWP and operation in licensed spectrum this field has the same value as the field subCarrierSpacingCommon in MIB of the same serving cell. Except for SUL, the network ensures the same subcarrier spacing is used in active DL BWP and active UL BWP within a serving cell. For the initial DL BWP and operation with shared spectrum channel access, the value of this field corresponds to the subcarrier spacing of the SSB associated to the initial DL BWP.
\end{tabular} \\
\hline
\end{tabular}
- BWP-Downlink

The IE BWP-Downlink is used to configure an additional downlink bandwidth part (not for the initial BWP).
BWP-Downlink information element
```
-- ASNISTART
-- TAG-BWP-DOWNLINK-START
BWP-Downlink ::=
    bwp-Id.
    bwp-Common
    bwp-Dedicated
    ...
}
-- TAG-BWP-DOWNLINK-STOP
```

```
SEQUENCE {
    BWP-Id,
```

    BWP-DownlinkCommon OPTIONAL, -- Cond SetupOtherBWP
    BWP-DownlinkDedicated OPTIONAL, -- Cond SetupOtherBWP

ETSI


--- Page 478  ---


3GPP TS 38.331 version 17.0.0 Release 17
477
ETSI TS 138331 V17.0.0 (2022-05)

-- ASNISTOP

\begin{tabular}{|l|}
\hline BWP-Downlink field descriptions \\
\hline \begin{tabular}{l}
bwp-ld \\
An identifier for this bandwidth part. Other parts of the RRC configuration use the BWP-Id to associate themselves with a particular bandwidth part. \\
The network configures the BWPs with consecutive IDs from 1. The Network does not include the value 0 , since value 0 is reserved for the initial BWP.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline SetupOtherBWP & The field is mandatory present upon configuration of a new DL BWP. The field is optionally present, Need M, otherwise. \\
\hline
\end{tabular}
- BWP-DownlinkCommon

The IE BWP-DownlinkCommon is used to configure the common parameters of a downlink BWP. They are "cell specific" and the network ensures the necessary alignment with corresponding parameters of other UEs. The common parameters of the initial bandwidth part of the PCell are also provided via system information. For all other serving cells, the network provides the common parameters via dedicated signalling.

BWP-DownlinkCommon information element
-- ASNISTART
-- TAG-BWP-DOWNLINKCOMMON-START

BWP-DownlinkCommon : :=
genericParameters
pdech-ConfigCommon
pdsch-ConfigCommon
⋯
\}
-- TAG-BWP-DOWNLINKCOMMON-STOP
-- ASNISTOP

SEQUENCE 1
BWP,
SetupRelease \{ PDCCH-ConfigCommon \} OPTIONAL, -- Need M
SetupRelease \{ PDSCH-ConfigCommon \}
OPTIONAL, -- Need M

BWP-DownlinkCommon field descriptions
pdcch-ConfigCommon
Cell specific parameters for the PDCCH of this BWP. This field is absent for a dormant BWP.
pdsch-ConfigCommon
Cell specific parameters for the PDSCH of this BWP.
- BWP-DownlinkDedicated

The IE BWP-DownlinkDedicated is used to configure the dedicated (UE specific) parameters of a downlink BWP.

ETSI


--- Page 479  ---


3GPP TS 38.331 version 17.0.0 Release 17
478
ETSI TS 138331 V17.0.0 (2022-05)

BWP-DownlinkDedicated information element
```
-- ASNISTART
-- TAG-BWP-DOWNLINKDEDICATED-START
BWP-DownlinkDedicated ::= SEQUENCE {
```

```
    pdsch-Config SetupRelease { PDSCH-Config }
    sps-Config SetupRelease { SpS-Config}
    radioLinkMonitoringConfig SetupRelease { RadioLinkMonitoringConfig}
    ...;
    [ [
    sps-ConfigToAddModList-rl6 SPS-ConfigToAddModList-rl6
    sps-ConfigToReleaseList-rl6 SPS-ConfigToReleaseList-rl6
    sps-ConfigDeactivationStateList-rl6 SPS-ConfigDeactivationStateList-rl6
    beamFailureRecoverySCellConfig-rl6 SetupRelease {BeamFailureRecoverySCellConfig-rl6}
    sl-PDCCH-Config-rl6 SetupRelease { PDCCH-Config}
    sl-V2X-PDCCH-Config-rl6 SetupRelease { PDCCH-Config}
    ]],
    [ [
```

```
    beamFailureRecoveryServingCellConfig-rl7 SetupRelease { BeamFailureRecoveryServingCellConfig-rl7}
    harq-FeedbackEnablingforSPSactive-rl7 BOOLEAN
    cfr-ConfigMulticast-rl7 SetupRelease { CFR-ConfigMulticast-rl}}
    dl-PRS-ProcessingWindowPreConfigAddModList-rl7 DL-PRS-ProcessingWindowPreConfigAddModList-rl7
    dl-PRS-ProcessingWindowPreConfigReleaseList-rl7 DL-PRS-ProcessingWindowPreConfigReleaseList-rl7
    nonCellDefiningSSB-rl7 NonCellDefiningSSB-rl7
    ] ]
```

```
}
SPS-ConfigToAddModList-rl6 ::= SEQUENCE (SIZE (l..maxNrofSPS-Config-rl6)) OF SPS-Config
SPS-ConfigToReleaseList-rl6 := SEQUENCE (SIZE (l..maxNrofSPS-Config-rl6)) OF SPS-ConfigIndex-rl6
SPS-ConfigDeactivationState-r16 ::= SEQUENCE (SIZE (l..maxNrofSPS-Config-rl6)) OF SPS-ConfigIndex-rl6
```

```
-- TAG-BWP-DOWNLINKDEDICATED-STOP
-- ASNISTOP
```


ETSI


--- Page 480  ---


3GPP TS 38.331 version 17.0.0 Release 17
479
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline BWP-DownlinkDedicated field descriptions \\
\hline \begin{tabular}{l}
beamFailureRecoverySCellConfig \\
Configuration of candidate RS for beam failure recovery in SCells.
\end{tabular} \\
\hline \begin{tabular}{l}
cfr-ConfigMulticast \\
UE specific common frequency resource configuration for MBS multicast for one dedicated BWP. This field can be configured within at most one serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
deactivatedMeasGapList \\
Indicates a list of gap IDs where the corresponding pre-configured measurement gaps (i.e. the gaps configured with preConfig/nd) are deactivated upon the switch to this BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-FeedbackEnablingforSPSactive \\
If enabled, UE reports ACK/NACK for the first SPS PDSCH after activation, regardless of if HARQ feedback is enabled or disabled corresponding to the first SPS PDSCH after activation. Otherwise, UE follows configuration of HARQ feedback enabled/disabled corresponding to the first SPS PDSCH after activation.
\end{tabular} \\
\hline \begin{tabular}{l}
nonCellDefiningSSB-r17 \\
If configured, the UE operating in this BWP uses this SSB for the purposes for which it would otherwise have used the cell-defining SSB of the serving cell (e.g. obtaining sync, measurements (FFS on measurements), RLM,...). Furthermore, other parts of the BWP configuration that refer to an SSB (e.g. the "SSB" configured in the QCL-Info IE; the "ssb-Index" configured in the RadioLinkMonitoringRS; CFRA-SSB-Resource; PRACH-ResourceDedicatedBFR) refer implicitily to this NCD-SSB. \\
The NCD-SSB has the same values for the properties (e.g., ssb-PositionsInBurst, PCI, ssb-periodicity, ssb-PBCH-BlockPower) of the corresponding CD-SSB apart from the values of the properties configured in the NonCellDefiningSSB-r17 IE.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcch-Config \\
UE specific PDCCH configuration for one BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-Config \\
UE specific PDSCH configuration for one BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-Config \\
UE specific SPS (Semi-Persistent Scheduling) configuration for one BWP. Except for reconfiguration with sync, the NW does not reconfigure sps-Config when there is an active configured downlink assignment (see TS 38.321 [3]). However, the NW may release the sps-Config at any time. Network can only configure SPS in one BWP using either this field or sps-ConfigToAddModList.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-ConfigDeactivationStateList \\
Indicates a list of the deactivation states in which each state can be mapped to a single or multiple SPS configurations to be deactivated, see clause 10.2 in TS 38.213 [13]. If a state is mapped to multiple SPS configurations, each of these SPS configurations is configured with the same harq-Codebook/D.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-ConfigToAddModList \\
Indicates a list of one or more DL SPS configurations to be added or modified in one BWP. Except for reconfiguration with sync, the NW does not reconfigure a SPS configuration when it is active (see TS 38.321 [3]).
\end{tabular} \\
\hline \begin{tabular}{l}
sps-ConfigToReleaseList \\
Indicates a list of one or more DL SPS configurations to be released. The NW may release a SPS configuration at any time.
\end{tabular} \\
\hline \begin{tabular}{l}
radioLinkMonitoringConfig \\
UE specific configuration of radio link monitoring for detecting cell- and beam radio link failure occasions. The maximum number of failure detection resources should be limited up to 8 for both cell and beam radio link failure detection. For SCells, only periodic 1-port CSI-RS can be configured in IE RadioLinkMonitoringConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PDCCH-Config \\
Indicates the UE specific PDCCH configurations for receiving the SL grants (via SL-RNTI or SL-CS-RNTI) for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
si-V2X-PDCCH-Config \\
Indicates the UE specific PDCCH configurations for receiving SL grants (i.e. sidelink SPS) for V2X sidelink communication.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 481  ---


3GPP TS 38.331 version 17.0.0 Release 17
480
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline PreConfigMG & The field is optionally present, Need R , if there is at least one per UE gap configured with preConfigind or there is at least one per FR gap of the same FR which the BWP belongs to and configured with preConfigind. It is absent otherwise. \\
\hline ScellOnly & The field is optionally present, Need M, in the BWP-DownlinkDedicated of an Scell. It is absent otherwise. \\
\hline
\end{tabular}
- BWP-Id

The IE BWP-Id is used to refer to Bandwidth Parts (BWP). The initial BWP is referred to by BWP-Id 0. The other BWPs are referred to by BWP-Id 1 to maxNrofBWPs.
BWP-Id information element
-- ASNISTART
-- TAG-BWP-ID-START
BWP-Id : :
-- TAG-BWP-ID-STOP
-- ASNISTOP
- BWP-Uplink

The IE BWP-Uplink is used to configure an additional uplink bandwidth part (not for the initial BWP).
BWP-Uplink information element
-- ASNISTART
-- TAG-BWP-UPLINK-START

BWP-Uplink : :
bwp-Id BWP-Id,
⋯
\}
-- TAG-BWP-UPLINK-STOP
-- ASNISTOP

BWP-Uplink field descriptions
bwp-id
An identifier for this bandwidth part. Other parts of the RRC configuration use the BWP-Id to associate themselves with a particular bandwidth part.
The network configures the BWPs with consecutive IDs from 1 . The Network does not include the value 0 , since value 0 is reserved for the initial BWP.

ETSI


--- Page 482  ---


3GPP TS 38.331 version 17.0.0 Release 17
481
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline SetupOtherBWP & The field is mandatory present upon configuration of a new UL BWP. The field is optionally present, Need M, otherwise. \\
\hline
\end{tabular}
- BWP-UplinkCommon

The IE BWP-UplinkCommon is used to configure the common parameters of an uplink BWP. They are "cell specific" and the network ensures the necessary alignment with corresponding parameters of other UEs. The common parameters of the initial bandwidth part of the PCell are also provided via system information. For all other serving cells, the network provides the common parameters via dedicated signalling.

BWP-UplinkCommon information element
```
-- ASNISTART
-- TAG-BWP-UPLINKCOMMON-START
BWP-UplinkCommon ::= SEQUENCE \
    genericParameters BWP,
```

```
    ...;
    [ [
```

```
    useInterlacePUCCH-PUSCH-r16 ENUMERATED [enabled]
```

```
    ]],
    [ [
```

```
    ] ]
}
-- TAG-BWP-UPLINKCOMMON-STOP
-- ASNISTOP
```


ETSI


--- Page 483  ---


3GPP TS 38.331 version 17.0.0 Release 17
482
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline BWP-UplinkCommon field descriptions \\
\hline \begin{tabular}{l}
additionalRACH-ConfigCommon \\
List of feature or feature combination-specific RACH configurations, i.e. the RACH configurations configured in addition to the one configured by rach-ConfigCommon and by msgA-ConfigCommon. \\
Editor's note: Naming of this can be discussed further, e.g. to make it clear that this field can configure msgA-ConfigCommons also.
\end{tabular} \\
\hline \begin{tabular}{l}
enableRA-PrioritizationForSlicing \\
Indicates whether or not the random access prioritization for slicing should override the ra-PrioritizationForAccessIdentity. If value TRUE is configured, the UE should only apply the random access prioritization for slicing. If value FALSE is configured, the UE should only apply ra-PrioritizationForAccessIdentity.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-ConfigCommon \\
Configuration of the cell specific PRACH and PUSCH resource parameters for transmission of MsgA in 2-step random access type procedure. The NW can configure msgAConfigCommon only for UL BWPs if the linked DL BWPs (same bwp-Id as UL-BWP) are the initial DL BWPs or DL BWPs containing the SSB associated to the initial BL BWP
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-ConfigCommon \\
Cell specific parameters for the PUCCH of this BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-ConfigCommon \\
Cell specific parameters for the PUSCH of this BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
rach-ConfigCommon \\
Configuration of cell specific random access parameters which the UE uses for contention based and contention free random access as well as for contention based beam failure recovery in this BWP. The NW configures SSB-based RA (and hence RACH-ConfigCommon) only for UL BWPs if the linked DL BWPs (same bwp-ld as UL-BWP) are the initial DL BWPs or DL BWPs containing the SSB associated to the initial DL BWP. The network configures rach-ConfigCommon, whenever it configures contention free random access (for reconfiguration with sync or for beam failure recovery).
\end{tabular} \\
\hline \begin{tabular}{l}
rach-ConfigCommonlAB \\
Configuration of cell specific random access parameters for the IAB-MT. The IAB specific IAB RACH configuration is used by IAB-MT, if configured.
\end{tabular} \\
\hline \begin{tabular}{l}
useinterlacePUCCH-PUSCH \\
If the field is present, the UE uses uplink frequency domain resource allocation Type 2 for cell-specific PUSCH, e.g., PUSCH scheduled by RAR UL grant (see 38.213 clause 8.3 and 38.214 clause 6.1.2.2) and uses interlaced PUCCH Format 0 and 1 for cell-specific PUCCH (see TS 38.213 [13], clause 9.2.1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline RAPrioSliceAl & The field is optionally present, Need M, if both parameters ra-PrioritizationForAccessIdentity and the random access prioritization for slicing are included, and the field is sent in system information. It is absent otherwise. \\
\hline SpCellOnly2 & The field is optionally present, Need M, in the BWP-UplinkCommon of an SpCell. It is absent otherwise. \\
\hline SpCellOnly 3 & The field is optionally present, Need M, in the BWP-UplinkCommon of an SpCell. It is absent otherwise. \\
\hline
\end{tabular}
- BWP-UplinkDedicated

The IE BWP-UplinkDedicated is used to configure the dedicated (UE specific) parameters of an uplink BWP.
BWP-UplinkDedicated information element
```
-- ASNISTART
-- TAG-BWP-UPLINKDEDICATED-START
BWP-UplinkDedicated ::=
    pucch-Config
    pusch-Config
```

```
SEQUENCE \
    SetupRelease { PUCCH-Config }
    SetupRelease { PUSCH-Config}}
```


OPTIONAL, -- Need M
OPTIONAL, -- Need. M

ETSI


--- Page 484  ---


3GPP TS 38.331 version 17.0.0 Release 17
483
ETSI TS 138331 V17.0.0 (2022-05)
```
    configuredGrantConfig
    srs-Config SetupRelease { SRS-Config}
    beamFailureRecoveryConfig SetupRelease { BeamFailureRecoveryConfig }
    ...;
    [ [
    sl-PUCCH-Config-rl6 SetupRelease { PUCCH-Config}
    cp-ExtensionC2-rl6 INTEGER (1..28)
    cp-ExtensionC3-r16 INTEGER (1..28)
    useInterlacePUCCH-PUSCH-rl6 ENUMERATED {enabled}
    pucch-ConfigurationList-rl6 SetupRelease { PUCCH-ConfigurationList-rl6}
    lbt-FailureRecoveryConfig-rl6 SetupRelease { LBT-FailureRecoveryConfig-rl6}
    configuredGrantConfigToAddModList-r16 ConfiguredGrantConfigToAddModList-rl6
    configuredGrantConfigToReleaseList-rl6 ConfiguredGrantConfigToReleaseList-rl6
    configuredGrantConfigType2DeactivationStateList-rl6 ConfiguredGrantConfigType2DeactivationStateList-rl6
    ]],
    [ [
    ul-TCIState CHOICE {
        lists SEQUENCE {
```

```
        },
        refUnifiedTCIStateList-rl7 RefUnifiedTCIStateList-rl7
    }
    ul-powerControl-rl7 Uplink-powerControlId-rl7
    pucch-ConfigurationListMulticastl-rl7 SetupRelease { PUCCH-ConfigurationList-rl6}
    pucch-ConfigurationListMulticast2-rl7 SetupRelease { PUCCH-ConfigurationList-rl6}}
    ] ]
}
```

```
ConfiguredGrantConfigType2DeactivationStateList-r16 ::=
                SEQUENCE (SIZE (l..maxNrofCG-Type2DeactivationState)) OF ConfiguredGrantConfigType2DeactivationState-rl6
-- TAG-BWP-UPLINKDEDICATED-STOP
-- ASNISTOP
```


ETSI


--- Page 485  ---


3GPP TS 38.331 version 17.0.0 Release 17
484
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline BWP-UplinkDedicated field descriptions \\
\hline \begin{tabular}{l}
beamFailureRecoveryConfig \\
Configuration of beam failure recovery. If supplementaryUplink is present, the field is present only in one of the uplink carriers, either UL or SUL.
\end{tabular} \\
\hline \begin{tabular}{l}
configuredGrantConfig \\
A Configured-Grant of type 1 or type2. It may be configured for UL or SUL but in case of type 1 not for both at a time. Except for reconfiguration with sync, the NW does not reconfigure configured GrantConfig when there is an active configured uplink grant Type 2 (see TS 38.321 [3]). However, the NW may release the configured GrantConfig at any time. Network can only configure configured grant in one BWP using either this field or configuredGrantConfigToAddModList.
\end{tabular} \\
\hline \begin{tabular}{l}
configuredGrantConfigToAddModList \\
Indicates a list of one or more configured grant configurations to be added or modified for one BWP. Except for reconfiguration with sync, the NW does not reconfigure a Type 2 configured grant configuration when it is active (see TS 38.321 [3]). The network configures multiple CG configurations with either all configurations or no configuration configured with cg-Retransmission Timer-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
configuredGrantConfigToReleaseList \\
Indicates a list of one or more UL Configured Grant configurations to be released. The NW may release a configured grant configuration at any time.
\end{tabular} \\
\hline \begin{tabular}{l}
configuredGrantConfigType2DeactivationStateList \\
Indicates a list of the deactivation states in which each state can be mapped to a single or multiple Configured Grant type 2 configurations to be deactivated when the corresponding deactivation DCI is received, see clause 7.3.1 in TS 38.212 [17] and clause 10.2 in TS 38.213 [13].
\end{tabular} \\
\hline \begin{tabular}{l}
cp-ExtensionC2, cp-ExtensionC3 \\
Configures the cyclic prefix (CP) extension (see TS 38.211 [16], clause 5.3.1). For 15 kHz SCS , \{1..28\} are valid for both cp-ExtensionC2 and cp-ExtensionC3. For 30 kHz SCS, \( \{1 . .28\} \) are valid for \( c p \)-ExtensionC2 and \( \{2 . .28\} \) are valid for \( c p \)-ExtensionC3. For 60 kHz SCS, \( \{2 . .28\} \) are valid for \( c p \)-ExtensionC2 and \( \{3 . .28\} \) are valid for \( c p \) ExtensionC3.
\end{tabular} \\
\hline \begin{tabular}{l}
Ibt-FailureRecoveryConfig \\
Configures parameters used for detection of consistent uplink LBT failures for operation with shared spectrum channel access, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-Config \\
PUCCH configuration for one BWP of the normal UL or SUL of a serving cell. If the UE is configured with SUL, the network configures PUCCH only on the BWPs of one of the uplinks (normal UL or SUL). The network configures PUCCH-Config at least on non-initial BWP(s) for SpCell and PUCCH SCell. If supported by the UE, the network may configure at most one additional SCell of a cell group with PUCCH-Config (i.e. PUCCH SCell); if PUCCH cell switching is supported by the UE, the network may configure at most one additional SCell with PUCCH-Config within each PUCCH group. \\
In (NG)EN-DC and NE-DC, the NW configures at most one serving cell per frequency range with PUCCH. In (NG)EN-DC and NE-DC, if two PUCCH groups are configured, the serving cells of the NR PUCCH group in FR2 use the same numerology. For NR-DC, the maximum number of PUCCH groups in each cell group is one, and only the same numerology is supported for the cell group with carriers only in FR2. \\
The NW may configure PUCCH for a BWP when setting up the BWP. The network may also add/remove the pucch-Config in an RRCReconfiguration with reconfigurationWithSync (for SpCell or PUCCH SCell) or with SCell release and add (for PUCCH SCell) to move the PUCCH between the UL and SUL carrier of one serving cell. In other cases, only modifications of a previously configured pucch-Config are allowed. \\
If one (S)UL BWP of a serving cell is configured with PUCCH, all other (S)UL BWPs must be configured with PUCCH, too.
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-ConfigurationList \\
PUCCH configurations for two simultaneously constructed HARQ-ACK codebooks (see TS 38.213 [13], clause 9.1). Different PUCCH Resource IDs are configured in different PUCCH-Config within the pucch-ConfigurationList if configured.
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-ConfigurationListMulticast1 \\
PUCCH configurations for two simultaneously constructed HARQ-ACK codebooks for MBS multicast (see TS 38.213, clause 9).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-ConfigurationListMulticast2 \\
PUCCH configurations for two simultaneously constructed NACK-only feedback for MBS multicast (see TS 38.213, clause 9).
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-Config \\
PUSCH configuration for one BWP of the normal UL or SUL of a serving cell. If the UE is configured with SUL and if it has a PUSCH-Config for both UL and SUL, an ULSUL indicator field in DCI indicates which of the two to use. See TS 38.212 [17], clause 7.3.1.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PUCCH-Config \\
Indicates the UE specific PUCCH configurations used for the HARQ-ACK feedback reporting for NR sidelink communication.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 486  ---


3GPP TS 38.331 version 17.0.0 Release 17
485
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
srs-Config \\
Uplink sounding reference signal configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
ul-powerControl \\
Configures power control parameters for PUCCH, PUSCH and SRS when UE is configured with unifiedtci-StateType.The field is present here only if UL power control is not configured for any UL TCI state and DLorJoint-TCIState.
\end{tabular} \\
\hline \begin{tabular}{l}
ul-TCIState-ToAddModList \\
Indicates a lits of UL TCI states for PUCCH, PUSCH and SRS when UE is configured with unified TCI state operation as specified in TS 38.xxx
\end{tabular} \\
\hline \begin{tabular}{l}
useinterlacePUCCH-PUSCH \\
If the field is present, the UE uses uplink frequency domain resource allocation Type 2 for PUSCH (see 38.213 clause 8.3 and 38.214 clause 6.1 .2 .2 ) and uses interlaced PUCCH Format 0, 1, 2, and 3 for PUCCH (see TS 38.213 [13], clause 9.2.1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline SpCellOnly & The field is optionally present, Need M, in the BWP-UplinkDedicated of an SpCell. It is absent otherwise. \\
\hline
\end{tabular}

NOTE 1: In case of RRCReconfiguration with reconfigurationWithSync, the UE performs a MAC reset, which involves releasing the PUCCH-CSI/SRS/SR configuration in accordance with clause 5.3.12 and TS 38.321 [6], clauses 5.12 and 5.2. Hence, for these parts of the dedicated radio resource configuration, delta signalling is not supported in the message when reconfigurationWithSync is included.

CandidateBeamRS
The IE CandidateBeamRS inlcudes candidate beams for beam failure recovery in case of beam failure detection. See also TS 38.321 [3], clause 5.17.
CandidateBeamRS information element
-- ASNISTART
-- TAG-CANDIDATEBEAMRS-START
```
CandidateBeamRS-r16 ::=
    candidateBeamConfig-r16
        ssb-r16
        csi-RS-rl6
    },
    servingCellId
}
```

```
SEQUENCE \
    CHOICE {
        SSB-Index,
        NZP-CSI-RS-ResourceId
```

-- TAG-CANDIDATEBEAMRS-STOP
-- ASNISTOP

ETSI


--- Page 487  ---


3GPP TS 38.331 version 17.0.0 Release 17
486
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CandidateBeamRS field descriptions \\
\hline \begin{tabular}{l}
candidateBeamConfig \\
Indicates the resource (i.e. SSB or CSI-RS) defining this beam resource.
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellid \\
If the field is absent, the RS belongs to the serving cell in which this BeamFailureSCellRecoveryConfig is configured
\end{tabular} \\
\hline
\end{tabular}
- CellAccessRelatedInfo

The IE CellAccessRelatedInfo indicates cell access related information for this cell.

CellAccessRelatedinfo information element
```
-- ASNISTART
-- TAG-CELLACCESSRELATEDINFO-START
CellAccessRelatedInfo ::= SEQUENCE {
    plmn-IdentityInfolist
    cellReservedForOtherUse ENUMERATED {true} OPTIONAL, -- Need. R
    ...;
    [ [
    cellReservedForFutureUse-rl6 ENUMERATED {true} OPTIONAL, -- Need. R
    npn-IdentityInfoList-r16 NPN-IdentityInfoList-rl6 OPTIONAL -- Need R
    ]],
    [ [
    smpn-AccessInfolist-rl7 SEQUENCE (SIZE (l..maxNPN-rl6)) OF SNPN-AccessInfo-rl7 OPTIONAL -- Need R
    ] ]
}
SNPN-AccessInfo-rl7 ::= SEQUENCE {
    extCH-Supported-rl7 ENUMERATED [true] OPTIONAL, -- Need. R
    extCH-WithoutConfigAllowed-rl7 ENUMERATED [true] OPTIONAL, -- Need. R
    onboardingEnabled-rl7 ENUMERATED {true} OPTIONAL, -- Need R
    imsEmergencySupportForSNPN-rl7 ENUMERATED {true} OPTIONAL -- Need R
}
-- TAG-CELLACCESSRELATEDINFO-STOP
-- ASNISTOP
```


ETSI


--- Page 488  ---


3GPP TS 38.331 version 17.0.0 Release 17
487
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CellAccessRelatedinfo field descriptions \\
\hline \begin{tabular}{l}
cellReservedForFutureUse \\
Indicates whether the cell is reserved, as defined in 38.304 [20] for future use. The field is applicable to all PLMNs and NPNs. This field is ignored by IAB-MT.
\end{tabular} \\
\hline \begin{tabular}{l}
cellReservedForOtherUse \\
Indicates whether the cell is reserved, as defined in 38.304 [20]. The field is applicable to all PLMNs. This field is ignored by IAB-MT for cell barring determination, but still considered by NPN capable IAB-MT for determination of an NPN-only cell.
\end{tabular} \\
\hline \begin{tabular}{l}
npn-IdentitylnfoList \\
The npn-Identity/nfoList is used to configure a set of NPN-/dentity/nfo elements. Each of those elements contains a list of one or more NPN Identities and additional information associated with those NPNs. The total number of PLMNs (identified by a PLMN identity in pimn -/dentityList), PNI-NPNs (identified by a PLMN identity and a CAG-ID), and SNPNs (identified by a PLMN identity and a NID) together in the PLMN-dentitylnfoList and NPN-IdentitylnfoList does not exceed 12, except for the NPN-only cells. A PNI-NPN and SNPN can be included only once, and in only one entry of the NPN-dentitylnfoList. In case of NPN-only cells the PLMN-dentityList contains a single element that does not count to the limit of 12. The NPN index is defined as \( B+c 1+c 2+\ldots+c(n-1)+d 1+d 2+\ldots+d(m-1)+e(i) \) for the NPN identity included in the \( n \)-th entry of NPN-ddentity/nfoList and in the \( m \)-th entry of non-Identitylist within that NPN-IdentitylinfoList entry, and the \( i \)-th entry of its corresponding NPN-Identity, where \\
- \( B \) is the index used for the last PLMN in the PLMN-dentitty/nfoList; in NPN-only cells B is considered 0 ; \\
- c(j) is the number of NPN index values used in the \( j \)-th NPN-IdentitylinfoList entry; \\
- \( d(k) \) is the number of NPN index values used in the \( k \)-th npn-IdentityList entry within the \( n \)-th NPN-IdentitylnfoList entry; \\
- e(i) is \\
- \( i \) if the \( n \)-th entry of NPN-IdentitylnfoList entry is for SNPN(s); \\
- 1 if the \( n \)-th entry of NPN-IdentitylnfoList entry is for PNI-NPN(s).
\end{tabular} \\
\hline \begin{tabular}{l}
pimn-IdentityinfoList \\
The pimn-Identity/nfoList is used to configure a set of PLMN-/dentity/nfo elements. Each of those elements contains a list of one or more PLMN Identities and additional information associated with those PLMNs. A PLMN-identity can be included only once, and in only one entry of the PLMN-ddentity/nfoList. The PLMN index is defined as \( b 1+b 2+\ldots+b(n-1)+i \) for the PLMN included at the \( n \)-th entry of PLMN-/dentity/nfoList and the \( i \)-th entry of its corresponding PLMN-Identity/nfo, where \( b(j) \) is the number of PLMN-Identity entries in each PLMN-Identity/nfo, respectively.
\end{tabular} \\
\hline \begin{tabular}{l}
snpn-AccessinfoList \\
This list provides access related information for each SNPN in npn-ldentitylnfolist, see TS 23.501 [32]. The n-th entry of the list contains the access related information of the n-th SNPN in npn-IdentitylnfoList.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SNPN-Accessinfo field descriptions \\
\hline \begin{tabular}{l}
extCH-Supported \\
Indicates whether the SNPN supports access using credentials from a Credentials Holder as specified in TS 23.501 [32].
\end{tabular} \\
\hline \begin{tabular}{l}
extCH-WithoutConfigAllowed \\
Indicates whether the SNPN allows registration attempts with credentials from a Credentials Holder from UEs that are not explicitly configured to select the SNPN as specified in TS 23.501 [32].
\end{tabular} \\
\hline \begin{tabular}{l}
imsEmergencySupportForSNPN \\
Indicates whether the SNPN supports IMS emergency bearer services for UEs in limited service mode in the cell. If absent, IMS emergency call is not supported by the SNPN in the cell for UEs in limited service mode.
\end{tabular} \\
\hline \begin{tabular}{l}
onboardingEnabled \\
Indicates whether the onboarding SNPN allows registration for onboarding in the cell as specified in TS 23.501 [32].
\end{tabular} \\
\hline
\end{tabular}
- CellAccessRelatedInfo-EUTRA-5GC

The IE CellAccessRelatedInfo-EUTRA-5GC indicates cell access related information for an LTE cell connected to 5GC.

ETSI


--- Page 489  ---


3GPP TS 38.331 version 17.0.0 Release 17
488
ETSI TS 138331 V17.0.0 (2022-05)

CellAccessRelatedinfo-EUTRA-5GC information element
```
-- ASNISTART
-- TAG-CELLACCESSRELATEDINFOEUTRA-5GC-START
CellAccessRelatedInfo-EUTRA-5GC ::= SEQUENCE \
    plmn-IdentityList-eutra-5gc PLMN-IdentityList-EUTRA-5GC,
    trackingAreaCode-eutra-5gc TrackingAreaCode,
    ranac-5gc RAN-AreaCode OPTIONAL,
    cellIdentity-eutra-5gc CellIdentity-EUTRA-5GC
}
PLMN-IdentityList-EUTRA-5GC::= SEQUENCE (SIZE (1..maxPLMN)) OF PLMN-Identity-EUTRA-5GC
PLMN-Identity-EUTRA-5GC ::= CHOICE {
    plmn-Identity-EUTRA-5GC
    plmn-index INTEGER (1..maxPLMN)
}
CellIdentity-EUTRA-5GC ::= CHOICE [
    cellIdentity-EUTRA BIT STRING (SIZE (28)),
    cellId-index INTEGER (1..maxPLMN)
}
-- TAG-CELLACCESSRELATEDINFOEUTRA-5GC-STOP
-- ASNISTOP
```


CellAccessRelatedInfo-EUTRA-EPC
The IE CellAccessRelatedInfo-EUTRA-EPC indicates cell access related information for an LTE cell connected to EPC.
CellAccessRelatedinfo-EUTRA-EPC information element
```
-- ASN1START
-- TAG-CELLACCESSRELATEDINFOEUTRA-EPC-START
CellAccessRelatedInfo-EUTRA-EPC ::= SEQUENCE \
    plmn-IdentityList-eutra-epc PLMN-IdentityList-EUTRA-EPC,
    trackingAreaCode-eutra-epc BIT STRING (SIZE (16)),
    cellIdentity-eutra-epc BIT STRING (SIZE (28))
}
PLMN-IdentityList-EUTRA-EPC::= SEQUENCE (SIZE (1..maxPLMN)) OF PLMN-Identity
-- TAG-CELLACCESSRELATEDINFOEUTRA-EPC-STOP
-- ASN1STOP
```


ETSI


--- Page 490  ---


3GPP TS 38.331 version 17.0.0 Release 17
489
ETSI TS 138331 V17.0.0 (2022-05)
- \( \quad \) CellGroupConfig

The CellGroupConfig IE is used to configure a master cell group (MCG) or secondary cell group (SCG). A cell group comprises of one MAC entity, a set of logical channels with associated RLC entities and of a primary cell (SpCell) and one or more secondary cells (SCells).

CellGroupConfig information element
```
-- ASNISTART
-- TAG-CELLGROUPCONEIG-START
-- Configuration of one Cell-Group:
CellGroupConfig ::= SEQUENCE \
    cellGroupId
    rlc-BearerToAddModList
    rlc-BearerToReleaseList
    mac-CellGroupConfig
    physicalCellGroupConfig
    spCellConfig
    sCellToAddModList
    sCellToReleaseList
    ...;
    [ [
```

```
    ]],
    [ [
    bap-Address-rl6
    bh-RLC-ChannelToAddModList-r16
    bh-RLC-ChannelToReleaseList-rl6
    flc-TransferPath-rl6
    simultaneousTCI-UpdateListl-rl6
    simultaneousTCI-UpdateList2-r16
    simultaneousSpatial-UpdatedListl-r16
    simultaneousSpatial-UpdatedList2-rl6
    uplinkTxSwitchingOption-rl6
    uplinkTxSwitchingPowerBoosting-rl6
    ]],
    [ [
```

```
    ]],
    [ [
    flc-TransferPathNRDC-rl7
    uplinkTxSwitching-2T-Mode-rl7
    uplinkTxSwitching-DualUL-TxState-rl7
    uu-Relay-RLC-ChannelToAddModList-rl7
        OPTIONAL, -- Cond 2Tx
    uu-Relay-RLC-ChannelToReleaseList-rl7
    simultaneousU-TCI-UpdateListl-rl7
    simultaneousU-TCI-UpdateList2-rl7
    simultaneousU-TCI-UpdateList3-rl7
    simultaneousU-TCI-UpdateList4-rl7
    rlc-BearerToReleaseListExt-rl7
    ] ]
```


ETSI


--- Page 491  ---


3GPP TS 38.331 version 17.0.0 Release 17
490
ETSI TS 138331 V17.0.0 (2022-05)
```
}
-- Serving cell specific MAC and PHY parameters for a SpCell:
SpCellConfig ::= SEQUENCE \
    servCellIndex ServCellIndex OPTIONAL, -- Cond SCG
    reconfigurationWithSync ReconfigurationWithSync
    rlf-TimersAndConstants SetupRelease { RLF-TimersAndConstants }
    rlmInSyncOutOfSyncThreshold ENUMERATED {nl}
    spCellConfigDedicated ServingCellConfig
    ...,
    [ [
    lowMobilityEvaluationConnected-rl7 SEQUENCE {
        s-SearchDeltaP-Connected-rl7 ENUMERATED {ffs},
        t-SearchDeltaP-Connected-rl7 ENUMERATED {ffs}
    }
    goodServingCellEvaluationRLM-rl7 GoodServingCellEvaluation-rl7
    goodServingCellEvaluationBFD-rl7 GoodServingCellEvaluation-rl7
    deactivatedSCG-Config-rl7 SetupRelease { DeactivatedSCG-Config-rl7 } OPTIONAL -- Need M
    ]]
}
ReconfigurationWithSync ::= SEQUENCE {
    spCellConfigCommon ServingCellConfigCommon OPTIONAL, -- Need M
    newUE-Identity RNTI-Value,
    t304 ENUMERATED {ms50, msl00, msl50, ms200, ms500, msl000, ms2000, msl0000},
    rach-ConfigDedicated CHOICE |
        uplink RACH-ConfigDedicated,
        supplementaryUplink RACH-ConfigDedicated
    } OPTIONAL, -- Need N
    ...,
    [ [
    smtc SSB-MTC OPTIONAL -- Need S
    ]],
    [ [
    daps-UplinkPowerConfig-rl6 DAPS-UplinkPowerConfig-rl6 OPTIONAL -- Need N
    ]],
    [ [
    sl-PathSwitchConfig-rl7 SL-PathSwitchConfig-rl7 OPTIONAL -- DirectToIndirect-PathSwitch
    ]]
}
DAPS-UplinkPowerConfig-rl6 ::= SEQUENCE {
    p-DAPS-Source-rl6 P-Max,
    p-DAPS-Target-rl6 P-Max,
    uplinkPowerSharingDAPS-Mode-rl6 ENUMERATED {semi-static-model, semi-static-mode2, dynamic}
}
SCellConfig ::= SEQUENCE \
    sCellIndex SCellIndex,
    sCellConfigCommon ServingCellConfigCommon
    sCellConfigDedicated ServingCellConfig OPTIONAL, -- Cond SCellAddMod
    ....
    [ [
    smtc SSB-MTC OPTIONAL -- Need S
```


ETSI


--- Page 492  ---


3GPP TS 38.331 version 17.0.0 Release 17
491
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]],
    [ [
```

```
    ]],
    [ [
```

```
    ]]
```

```
}
SCellSIB20-rl7 ::= OCTET STRING (CONTAINING SystemInformation)
DeactivatedSCG-Config-rl7 ::= SEQUENCE {
    bfd-and-RLM BOOLEAN,
    ...
}
GoodServingCellEvaluation-rl7 ::= SEQUENCE {
    offset-rll
    offsetfRl-rl7 ENUMERATED {db2, db4, db6, db8},
    offsetFR2-rl7 ENUMERATED {db2, db4, db6, db8}
    }
}
SL-PathSwitchConfig-rl7 ::= SEQUENCE \
    targetRelayUEIdentity-rl7 SL-SourceIdentity-rl7,
    t420-rl7 ENUMERATED [ms50, ms100, ms150, ms200, ms500, ms1000, ms2000, ms10000},
    ...
}
-- TAG-CELLGROUPCONFIG-STOP
-- ASNISTOP
```


Editor's NOTE: Whether serving cell quality criterion is configured per Scell for BFD needs RAN4 confirmation.
Editor's NOTE: Current text assumes the low mobility criterion is configured commonly for RLM and BFD. It is FFS whether the low mobility criterion can be configured independently for RLM and BFD.

Editor's NOTE: Values and range of SearchDeltaP-Connected and \( t \)-SearchDeltaP-Connected are still FFS in RAN4.

ETSI


--- Page 493  ---


3GPP TS 38.331 version 17.0.0 Release 17
492
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CellGroupConfig field descriptions \\
\hline \begin{tabular}{l}
bap-Address \\
BAP address of the parent node in cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
bh-RLC-ChannelToAddModList \\
Configuration of the backhaul RLC entities and the corresponding MAC Logical Channels to be added and modified.
\end{tabular} \\
\hline \begin{tabular}{l}
bh-RLC-ChannelToReleaseList \\
List of the backhaul RLC entities and the corresponding MAC Logical Channels to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
f1c-TransferPath \\
The F1-C transfer path that an EN-DC IAB-MT should use for transferring F1-C packets to the IAB-donor-CU. If IAB-MT is configured with ite, IAB-MT can only use LTE leg for F1-C transfer. If IAB-MT is configured with \( n r \), IAB-MT can only use NR leg for F1-C transfer. If IAB-MT is configured with both, it is up to IAB-MT to select an LTE leg or a NR leg for F1-C transfer. If the field is not configured, the IAB node uses the NR leg as the default one.
\end{tabular} \\
\hline \begin{tabular}{l}
f1c-TransferPathNRDC \\
The F1-C transfer path that an NR-DC IAB-MT should use for transferring F1-C packets to the IAB-donor-CU. If IAB-MT is configured with mcg, IAB-MT can only use the MCG for F1-C transfer. If IAB-MT is configured with scg, IAB-MT can only use the SCG for F1-C transfer. If IAB-MT is configured with both, it is up to IAB-MT to select the MCG or the SCG for F1-C transfer.
\end{tabular} \\
\hline \begin{tabular}{l}
mac-CellGroupConfig \\
MAC parameters applicable for the entire cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
ric-BearerToAddModList \\
Configuration of the MAC Logical Channel, the corresponding RLC entities and association with radio bearers.
\end{tabular} \\
\hline \begin{tabular}{l}
reportUplinkTxDirectCurrent \\
Enables reporting of uplink and supplementary uplink Direct Current location information upon BWP configuration and reconfiguration. This field is only present when the BWP configuration is modified or any serving cell is added or removed. This field is absent in the IE CellGroupConfig when provided as part of RRCSetup message. If UE is configured with SUL carrier, UE reports both UL and SUL Direct Current locations.
\end{tabular} \\
\hline \begin{tabular}{l}
reportUplinkTxDirectCurrentTwoCarrier \\
Enables reporting of uplink Direct Current location information when the UE is configured with uplink intra-band CA with two carriers. This field is absent in the IE CellGroupConfig when provided as part of RRCSetup message.
\end{tabular} \\
\hline \begin{tabular}{l}
riminSyncOutOfSyncThreshold \\
BLER threshold pair index for IS/OOS indication generation, see TS 38.133 [14], table 8.1.1-1. n1 corresponds to the value 1. When the field is absent, the UE applies the value 0 . Whenever this is reconfigured, UE resets N310 and N311, and stops T310, if running. Network does not include this field.
\end{tabular} \\
\hline \begin{tabular}{l}
sCellSIB20 \\
This field is used to transfer SIB20 of the SCell in order to allow the UE for MBS broadcast reception on SCell.
\end{tabular} \\
\hline \begin{tabular}{l}
sCellState \\
Indicates whether the SCell shall be considered to be in activated state upon SCell configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
sCellToAddModList \\
List of secondary serving cells (SCells) to be added or modified.
\end{tabular} \\
\hline \begin{tabular}{l}
sCellToReleaseList \\
List of secondary serving cells (SCells) to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
secondaryDRX-GroupConfig \\
The field is used to indicate whether the SCell belongs to the secondary DRX group. All serving cells in the secondary DRX group shall belong to one Frequency Range and all serving cells in the legacy DRX group shall belong to another Frequency Range.
\end{tabular} \\
\hline \begin{tabular}{l}
simultaneousSpatial-UpdatedList1, simultaneousSpatial-UpdatedList2 \\
List of serving cells which can be updated simultaneously for spatial relation with a MAC CE. The simultaneousSpatial-UpdatedList1 and simultaneousSpatial-UpdatedList2 shall not contain same serving cells. Network should not configure serving cells that are configured with a BWP with two different values for the coresetPoollndex in these lists.
\end{tabular} \\
\hline \begin{tabular}{l}
simultaneousTCI-UpdateList1, simultaneousTCI-UpdateList2 \\
List of serving cells which can be updated simultaneously for TCI relation with a MAC CE. The simultaneousTCI-UpdateList1 and simultaneousTCI-UpdateList2 shall not contain same serving cells. Network should not configure serving cells that are configured with a BWP with two different values for the coresetPoollndex in these lists.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 494  ---


3GPP TS 38.331 version 17.0.0 Release 17
493
ETSI TS 138331 V17.0.0 (2022-05)

simultaneousU-TCI-UpdateList1, simultaneousU-TCI-UpdateList2, simultaneousU-TCI-UpdateList3, simultaneousU-TCI-UpdateList4
List of serving cells which can be updated simultaneously for TCI relation with a MAC CE. The different lists shall not contain same serving cells. Network should configure in these lists only serving cells that are configured with unifiedtci-StateType
spCellConfig
Parameters for the SpCell of this cell group (PCell of MCG or PSCell of SCG).
uplinkTxSwitchingOption
Indicates which option is configured for dynamic UL Tx switching for inter-band UL CA or (NG)EN-DC. The field is set to switchedUL if network configures option 1 as specified in TS 38.214 [19], or dualUL if network configures option 2 as specified in TS 38.214 [19]. Network always configures UE with a value for this field in inter-band UL CA case and (NG)EN-DC case where UE supports dynamic UL Tx switching.
uplinkTxSwitchingPowerBoosting
Indicates whether the UE is allowed to enable 3dB boosting on the maximum output power for transmission on carrier2 under the operation state in which 2-port transmission can be supported on carrier2 for inter-band UL CA case with dynamic UL Tx switching as defined in TS 38.101-1 [15]. Network can only configure this field for dynamic UL Tx switching in inter-band UL CA case with power Class 3 as defined in TS 38.101-1 [15].
uplinkTxSwitching-2T-Mode
Indicates 2Tx-2Tx switching mode is configured for inter-band UL CA or SUL, in which the switching gap duration for a triggered uplink switching (as specified in TS 38.214 [19]) is equal to the switching time capability value reported for the switching mode.
If this field is absent and uplinkTxSwitching is configured, it is interpreted that 1Tx-2Tx UL Tx switching is configured as specified in TS 38.214 [19]. In this case, there is one uplink (or one uplink band in case of intra-band) configured with uplinkTxSwitching, on which the maximum number of antenna ports among all configured P-SRS/A-SRS and activated SP-SRS resources should be 1 and non-codebook based UL MIMO is not configured.
uplinkTxSwitching-DualUL-TxState
Indicates the state of Tx chains if the state of Tx chains after the UL Tx switching is not unique (as specified in TS 38.214 [19]) in case of 2Tx-2Tx switching is configured and uplinkTxSwitchingOption is set to dualUL. Value one T indicates 1Tx is assumed to be supported on the carriers on each band, value twoT indicates 2Tx is assumed to be supported on that carrier.
uu-Relay-RLC-Channe/ToAddModList
Configuration of the Uu RLC entities and the corresponding MAC Logical Channels to be added and modified.
uu-Relay-RLC-ChannelToReleaseList
List of the Uu RLC entities and the corresponding MAC Logical Channels to be released.

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline \( 2 T x \) & The field is optionally present, Need R, if uplinkTxSwitching is configured; otherwise it is absent, Need R. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline DeactivatedSCG-Config field descriptions \\
\hline When the SCG is deactivated, indicates whether the UE performs BFD and RLM. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline DAPS-UplinkPowerConfig field descriptions \\
\hline \begin{tabular}{l}
p-DAPS-Source \\
The maximum total transmit power to be used by the UE in the source cell group during DAPS handover.
\end{tabular} \\
\hline \begin{tabular}{l}
p-DAPS-Target \\
The maximum total transmit power to be used by the UE in the target cell group during DAPS handover.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkPowerSharingDAPS-Mode \\
Indicates the uplink power sharing mode that the UE uses in DAPS handover (see TS 38.213 [13]).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 495  ---


3GPP TS 38.331 version 17.0.0 Release 17
494
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline GoodServingCellEvaluation field descriptions \\
\hline \begin{tabular}{l}
offset \\
The parameter " X " (dB) for the good serving cell quality criterion in RRC_CONNECTED, for a cell operating in FR1 and FR2, respectively. If this field is absent, the UE applies the (default) value of \( [0] \mathrm{dB} \) for " X ".
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline ReconfigurationWithSync field descriptions \\
\hline \begin{tabular}{l}
rach-ConfigDedicated \\
Random access configuration to be used for the reconfiguration with sync (e.g. handover). The UE performs the RA according to these parameters in the firstActiveUplinkBWP (see UplinkConfig).
\end{tabular} \\
\hline \begin{tabular}{l}
smtc \\
The SSB periodicity/offset/duration configuration of target cell for NR PSCell change and NR PCell change. The network sets the periodicityAndOffset to indicate the same periodicity as ssb-periodicityServingCell in spCellConfigCommon. \\
For case of NR PCell change, the smtc is based on the timing reference of (source) PCell. For case of NR PSCell change, it is based on the timing reference of source PSCell. If both this field and targetCellSMTC-SCG are absent, the UE uses the SMTC in the measObjectNR having the same SSB frequency and subcarrier spacing, as configured before the reception of the RRC message.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SCellConfig field descriptions \\
\hline \begin{tabular}{l}
deactivatedMeasGapList \\
Indicates a list of gap ID(s) where the corresponding pre-configured measurement gaps (i.e. the gaps configured with preConfig/nd) are deactivated while this SCell is deactivated.
\end{tabular} \\
\hline \begin{tabular}{l}
goodServingCellEvaluationBFD \\
Indicates the criterion for a UE to detect the good serving cell quality for BFD relaxation in an SCell in RRC_CONNECTED.
\end{tabular} \\
\hline \begin{tabular}{l}
smtc \\
The SSB periodicity/offset/duration configuration of target cell for NR SCell addition. The network sets the periodicityAndOffset to indicate the same periodicity as ssbperiodicityServingCell in sCellConfigCommon. The smtc is based on the timing of the SpCell of associated cell group. In case of inter-RAT handover to NR, the timing reference is the NR PCell. In case of intra-NR PCell change (standalone NR) or NR PSCell change (EN-DC), the timing reference is the target SpCell. If the field is absent, the UE uses the SMTC in the measObjectNR having the same SSB frequency and subcarrier spacing, as configured before the reception of the RRC message.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 496  ---


3GPP TS 38.331 version 17.0.0 Release 17
495
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SpCellConfig field descriptions \\
\hline \begin{tabular}{l}
deactivated-SCG-Config \\
Configuration applicable when the SCG is deactivated. The network always configures this field before or when indicating that the SCG is deactivated in an RRCReconfiguration, RRCResume, E-UTRA RRCConnectionReconfiguration or E-UTRA RRCConnectionResume message.
\end{tabular} \\
\hline \begin{tabular}{l}
goodServingCellEvaluationBFD \\
Indicates the criterion for a UE to detect the good serving cell quality for BFD relaxation in the SpCell in RRC_CONNECTED. The field is always configured when the network enables BFD relaxation for the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
goodServingCellEvaluationRLM \\
Indicates the criterion for a UE to detect the good serving cell quality for RLM relaxation in the SpCell in RRC_CONNECTED. The field is always configured when the network enables RLM relaxation for the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
lowMobilityEvaluationConnected \\
Indicates the criterion for a UE to detect low mobility in RRC_CONNECTED in an SpCell. The \( s \)-SearchDeltaP-Connected is the parameter "SsearchDeltaP-connected". And the \( t \) -SearchDeltaP-Connected is the parameter " TsearcheltaP-connected". Low mobility criterion is configured in NR Pcell for the case of NR SA/NR CA/NE-DC/NR-DC, and in the NR PSCell for the case of EN-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
reconfigurationWithSync \\
Parameters for the synchronous reconfiguration to the target SpCell.
\end{tabular} \\
\hline \begin{tabular}{l}
If-TimersAndConstants \\
Timers and constants for detecting and triggering cell-level radio link failure. For the SCG, rif-TimersAndConstants can only be set to setup and is always included at SCG addition.
\end{tabular} \\
\hline \begin{tabular}{l}
servCellindex \\
Serving cell ID of a PSCell. The PCell of the Master Cell Group uses ID \( =0 \).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-PathSwitchConfig field descriptions \\
\hline \begin{tabular}{l}
targetRelayUEldentity \\
Indicates the L2 source ID of the target L2 U2N Relay UE during path switch.
\end{tabular} \\
\hline \begin{tabular}{l}
T420 \\
Indicates the timer value of T420 to be used during during path switch.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 497  ---


3GPP TS 38.331 version 17.0.0 Release 17
496
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline BWP-Reconfig & The field is optionally present, Need N, if the BWPs are reconfigured or if serving cells are added or removed. Otherwise it is absent. \\
\hline DirectTolndirect-PathSwitch & The field is mandatory present at path switch to the target L2 U2N Relay UE, need N. It is absent otherwise. \\
\hline DRX-Config2 & The field is optionally present, Need N, if drx-ConfigSecondaryGroup is configured. It is absent otherwise. \\
\hline PreConfigMG & The field is optionally present, Need R, if there is at least one per UE gap configured with preConfigind or there is at least one per FR gap of the same FR which the SCell belongs to and configured with preConfigind. It is absent otherwise. \\
\hline ReconfWithSync & \begin{tabular}{l}
The field is mandatory present in the RRCReconfiguration message: \\
- in each configured CellGroupConfig for which the SpCell changes, \\
- in the masterCellGroup: \\
- at change of AS security key derived from \( \mathrm{K}_{\mathrm{gnb}} \), \\
- in an RRCReconfiguration message contained in a DLinformationTransferMRDC message, \\
- path switch to the target PCell for a L2 U2N Remote UE, \\
- path switch to the target L2 U2N Relay UE, \\
- in the secondaryCellGroup at: \\
- PSCell addition, \\
- SCG resume with NR-DC or (NG)EN-DC, \\
- update of required SI for PSCell, \\
- change of AS security key derived from S-KgNB in NR-DC while the UE is configured with at least one radio bearer with keyToUse set to secondary and that is not released by this RRCReconfiguration message, \\
- MN handover in (NG)EN-DC. \\
Otherwise, it is optionally present, need M . The field is absent in the masterCellGroup in RRCResume and RRCSetup messages and is absent in the masterCellGroup in RRCReconfiguration messages if source configuration is not released during DAPS handover.
\end{tabular} \\
\hline SCellAdd & The field is mandatory present upon SCell addition; otherwise it is absent, Need M. \\
\hline SCellAddMod & The field is mandatory present upon SCell addition; otherwise it is optionally present, need M. \\
\hline SCellAddSync & The field is optionally present, Need N , in case of SCell addition, reconfiguration with sync, and resuming an RRC connection. It is absent otherwise. \\
\hline SCG & The field is mandatory present in an SpCellConfig for the PSCell. It is absent otherwise. \\
\hline
\end{tabular}

NOTE: In case of change of AS security key derived from S- \( \mathrm{K}_{\mathrm{gNB}} / \mathrm{S}-\mathrm{K}_{\mathrm{eNB}} \), if reconfiguration WithSync is not included in the masterCellGroup, the network releases all existing MCG RLC bearers associated with a radio bearer with keyToUse set to secondary. In case of change of AS security key derived from \( \mathrm{K}_{\mathrm{gNB}} / \mathrm{K}_{\mathrm{eNB}} \), if reconfigurationWithSync is not included in the secondaryCellGroup, the network releases all existing SCG RLC bearers associated with a radio bearer with keyToUse set to primary.
- CellGroupld

The IE CellGroupld is used to identify a cell group. Value 0 identifies the master cell group. Other values identify secondary cell groups. In this version of the specification only values 0 and 1 are supported.

CellGroupld information element

-- ASNISTART
ETSI


--- Page 498  ---


3GPP TS 38.331 version 17.0.0 Release 17
497
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-CELLGROUPID-START
CellGroupId ::= INTEGER (0.. maxSecondaryCellGroups)
-- TAG-CELLGROUPID-STOP
-- ASNISTOP

CellIdentity
The IE Cellldentity is used to unambiguously identify a cell within a PLMN/SNPN.
Cellidentity information element
-- ASNISTART
-- TAG-CELLIDENTITY-START

CellIdentity ::= BIT STRING (SIZE (36))
-- TAG-CELLIDENTITY-STOP
-- ASNISTOP
- CellReselectionPriority

The IE CellReselectionPriority concerns the absolute priority of the concerned carrier frequency, as used by the cell reselection procedure. Corresponds to parameter "priority" in TS 38.304 [20]. Value 0 means lowest priority. The UE behaviour for the case the field is absent, if applicable, is specified in TS 38.304 [20].

CellReselectionPriority information element
-- ASNISTART
-- TAG-CELLRESELECTIONPRIORITY-START
CellReselectionPriority : : INTEGER (0. 7)
-- TAG-CELLRESELECTIONPRIORITY-STOP
-- ASNISTOP
- CellReselectionSubPriority

The IE CellReselectionSubPriority indicates a fractional value to be added to the value of cellReselectionPriority to obtain the absolute priority of the concerned carrier frequency for E-UTRA and NR. Value oDot 2 corresponds to 0.2 , value oDot 4 corresponds to 0.4 and so on.

CellReselectionSubPriority information element

-- ASNISTART
ETSI


--- Page 499  ---


3GPP TS 38.331 version 17.0.0 Release 17
498
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-CELLRESELECTIONSUBPRIORITY-START

CellReselectionSubPriority : \( = \) ENUMERATED [oDot2, oDot4, oDot6, oDot8]
-- TAG-CELLRESELECTIONSUBPRIORITY-STOP
-- ASNISTOP
- CFR-ConfigMulticast

The IE CFR-ConfigMulticast indicates UE specific common frequency resource configuration for multicast for one dedicated BWP.
CFR-ConfigMulticast information element
```
-- ASNISTART
-- TAG-CFRCONFIGMULTICAST-START
CFR-ConfigMulticast-rl7::= SEQUENCE [
    locationAndBandwidthMulticast-rl7
    pdcch-ConfigMulticast-rl7
    pdsch-ConfigMulticast-rl7 PDSCH-Config
    sps-ConfigMulticastToAddModList-rl7
    sps-ConfigMulticastToReleaseList-rl7
}
SPS-ConfigMulticastToAddModList-rl7 ::= SEQUENCE (SIZE (1..8)) OF SPS-Config
SPS-ConfigMulticastToReleaseList-rl7 ::= SEQUENCE (SIZE (1..8)) OF SPS-ConfigIndex-rl6
-- TAG-CFRCONFIGMULTICAST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CFR-ConfigMulticast field descriptions \\
\hline \begin{tabular}{l}
locationAndBandwidthMulticast \\
Frequency domain location and bandwidth for MBS multicast. The value of the field shall be interpreted as resource indicator value (RIV) as defined TS 38.214 [19] with assumptions as described in TS 38.213 [13], clause 12, i.e. setting \( \mathrm{N}^{\wedge} \) size_BWP=275. The first PRB is a PRB determined by subcarrierSpacing of the associated BWP and offsetToCarrier corresponding to this subcarrier spacing. If not configured, the UE applies the value of locationAndBandwidth of the DL BWP in which the cfr-ConfigMulticast is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcch-ConfigMulticast \\
UE specific group-common PDCCH configuration for MBS multicast for one CFR.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-ConfigMulticast \\
UE specific group-common PDSCH configuration for MBS multicast for one CFR.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-ConfigMulticastToAddModList \\
Indicates a list of one or more DL SPS configurations for MBS multicast.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-ConfigMulticastToReleaseList \\
Indicates a list of one or more DL SPS configurations to be released. The NW may release a SPS configuration at any time.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 500  ---


3GPP TS 38.331 version 17.0.0 Release 17
499
ETSI TS 138331 V17.0.0 (2022-05)

CGI-InfoEUTRA
The IE CGI-InfoEUTRA indicates EUTRA cell access related information, which is reported by the UE as part of E-UTRA report CGI procedure.
CGI-InfoEUTRA information element
```
-- ASNISTART
-- TAG-CGI-INFOEUTRA-START
CGI-InfoEUTRA ::=
    cgi-info-EPC
        cgi-info-EPC-legacy
        cgi-info-EPC-list
    }
    cgi-info-5GC
    freqBandIndicator
    multiBandInfoList
    freqBandIndicatorPriority
}
-- TAG-CGI-INFOEUTRA-STOP
-- ASNISTOP
```

```
SEQUENCE \
    SEQUENCE {
        CellAccessRelatedInfo-EUTRA-EPC,
        SEQUENCE (SIZE (1..maxPLMN)) OF CellAccessRelatedInfo-EUTRA-EPC OPTIONAL
            OPTIONAL,
    SEQUENCE (SIZE (1..maxPLMN)) OF CellAccessRelatedInfo-EUTRA-5GC OPTIONAL,
    FreqBandIndicatorEUTRA,
    MultiBandInfolistEUTRA OPTIONAL,
    ENUMERATED {true} OPTIONAL
```


CGI-InfoEUTRALogging
The IE CGI-InfoEUTRALogging indicates EUTRA cell related information, which is reported by the UE as part of RLF reporting procedure.

CGI-InfoEUTRALogging information element
```
-- ASNISTART
-- TAG-CGI-INFOEUTRALOGGING-START
CGI-InfoEUTRALogging ::= SEQUENCE \
    plmn-Identity-eutra-5gc PLMN-Identity OPTIONAL,
    trackingAreaCode-eutra-5gc TrackingAreaCO
    cellIdentity-eutra-5gc \textit{(28))
    plmn-Identity-eutra-epc BIT STRING (SIZE (16))
    cellIdentity-eutra-epc BIT STRING (SIZE (28))
        OPTIONAL,
}
-- TAG-CGI-INFOEUTRALOGGING-STOP
-- ASNISTOP
```


ETSI


--- Page 501  ---


3GPP TS 38.331 version 17.0.0 Release 17
500
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CGI-InfoEUTRALogging field descriptions \\
\hline \begin{tabular}{l}
cellidentity-eutra-epc, cellidentity-eutra-5GC \\
Unambiguously identify a cell within the context of the PLMN. It belongs the first PLMN entry of pimn-IdentityList (when connected to EPC) or of pimn-IdentityList-r15 (when connected to 5GC) in SysteminformationBlockType1.
\end{tabular} \\
\hline \begin{tabular}{l}
pimn-Identity-eutra-epc, pimn-Identity-eutra-5GC \\
Identifies the PLMN of the cell for the reported cellidentity: the first PLMN entry of pimn-IdentityList (when connected to EPC) or of pimn-IdentityList-r15 (when connected to 5GC) in SysteminformationBlock Type1 that contained the reported cellidentity.
\end{tabular} \\
\hline \begin{tabular}{l}
trackingAreaCode-eutra-epc, trackingAreaCode-eutra-5gc \\
Indicates Tracking Area Code to which the cell indicated by cellidentity-eutra-epc, cellidentity-eutra-5GC belongs.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) CGI-InfoNR

The IE CGI-InfoNR indicates cell access related information, which is reported by the UE as part of report CGI procedure.
CGI-InfoNR information element
```
-- ASNISTART
-- TAG-CGI-INFO-NR-START
CGI-InfoNR ::=
    plmn-IdentityInfolist
    frequencyBandList
    noSIBl
        ssb-SubcarrierOffset
        pdcch-ConfigSIBl
    }
    ...;
    [ [
    npn-IdentityInfoList-rl6 NPN-IdentityInfoList-rl6 OPTIONAL
    ]],
    [ [
    cellReservedForOtherUse-rl6 ENUMERATED {true} OPTIONAL
    ]]
}
-- TAG-CGI-INFO-NR-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CGI-InfoNR field descriptions \\
\hline \begin{tabular}{l}
noSIB1 \\
Contains ssb-SubcarrierOffset and pdcch-ConfigS/B1 fields acquired by the UE from MIB of the cell for which report CGI procedure was requested by the network in case SIB1 was not broadcast by the cell.
\end{tabular} \\
\hline \begin{tabular}{l}
cellReservedForOtherUse \\
Contains cellReservedForOtherUse field acquired by the UE that supports \( n r \)-CG/-Reporting-NPN from SIB1 of the cell for which report CGI procedure was requested by the network.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 502  ---


3GPP TS 38.331 version 17.0.0 Release 17
501
ETSI TS 138331 V17.0.0 (2022-05)
- CGI-Info-Logging

The IE CGI-Info-Logging indicates the NR Cell Global Identifier (NCGI) for logging purposes (e.g. RLF report), the globally unique identity, and the TAC information of a cell in NR.

CGI-Info-Logging information element
```
-- ASNISTART
-- TAG-CGI-INFO-LOGGING-START
CGI-Info-Logging-rl6 ::= SEQUENCE {
    plmn-Identity-rl6 PLMN-Identity,
    cellIdentity-rl6 CellIdentity,
    trackingAreaCode-rl6 TrackingAreaCode OPTIONAL
}
-- TAG-CGI-INFO-LOGGING-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CGI-Info-Logging field descriptions \\
\hline \begin{tabular}{l}
cellidentity \\
Unambiguously identify a cell within the context of the PLMN. It belongs the first PLMN-Identity/nfo IE of PLMN-Identity/nfoList in SIB1.
\end{tabular} \\
\hline \begin{tabular}{l}
pimn-Identity \\
Identifies the PLMN of the cell for the reported cellidentity: the first PLMN entry of pimn-/dentityList (in SIB1) in the instance of PLMN-IdentitylnfoList that contained the reported cellidentity.
\end{tabular} \\
\hline \begin{tabular}{l}
trackingAreaCode \\
Indicates Tracking Area Code to which the cell indicated by cellidentity field belongs.
\end{tabular} \\
\hline
\end{tabular}
- CLI-RSSI-Range

The IE CLI-RSSI-Range specifies the value range used in CLI-RSSI measurements and thresholds. The integer value for CLI-RSSI measurements is according to Table 10.1.22.2.2-1 in TS 38.133 [14].

CLI-RSSI-Range information element
-- ASNISTART
-- TAG-CLI-RSSI-RANGE-START
CLI-RSSI-Range-rl6 : :
-- TAG-CLI-RSSI-RANGE-STOP
-- ASNISTOP

ETSI


--- Page 503  ---


3GPP TS 38.331 version 17.0.0 Release 17
502
ETSI TS 138331 V17.0.0 (2022-05)

CodebookConfig
The IE CodebookConfig is used to configure codebooks of Type-I and Type-II (see TS 38.214 [19], clause 5.2.2.2)
CodebookConfig information element
-- ASNISTART
-- TAG-CODEBOOKCONFIG-START
CodebookConfig : :=
codebookType
typel
subType
typeI-SinglePanel
nrOfAntennaports
two
twoTX-CodebookSubsetRestriction
\},
moreThanTwo
n1-n2
two-one-TypeI-SinglePanel-Restriction
two-two-TypeI-SinglePanel-Restriction
four-one-TypeI-SinglePanel-Restriction
three-two-TypeI-SinglePanel-Restriction
six-one-TypeI-SinglePanel-Restriction
four-two-TypeI-SinglePanel-Restriction
eight-one-TypeI-SinglePanel-Restriction
four-three-TypeI-SinglePanel-Restriction
six-two-TypeI-SinglePanel-Restriction
twelve-one-TypeI-SinglePanel-Restriction
four-four-TypeI-SinglePanel-Restriction
eight-two-TypeI-SinglePanel-Restriction
sixteen-one-TypeI-SinglePanel-Restriction
\} ,
typeI-SinglePanel-codebookSubsetRestriction-i2 BIT STRING (SIZE (16)) OPTIONAL -- Need R
\}
\},
typeI-SinglePanel-ri-Restriction BIT STRING (SIZE (8))
\},
typeI-MultiPanel SEQUENCE [
\( \mathrm{ng}-\mathrm{n} 1-\mathrm{n} 2 \)
two-two-one-TypeI-MultiPanel-Restriction
two-four-one-TypeI-MultiPanel-Restriction
four-two-one-TypeI-MultiPanel-Restriction
two-two-two-TypeI-MultiPanel-Restriction
two-eight-one-TypeI-MultiPanel-Restriction
four-four-one-TypeI-MultiPanel-Restriction
two-four-two-TypeI-MultiPanel-Restriction
four-two-two-TypeI-MultiPanel-Restriction
\} ,
ri-Restriction BIT STRING (SIZE (4))
\}
\},

ETSI


--- Page 504  ---


3GPP TS 38.331 version 17.0.0 Release 17
503
ETSI TS 138331 V17.0.0 (2022-05)
```
            codebookMode INTEGER (1..2)
        },
        type2 SEQUENCE {
            subType CHOICE {
                typeII SEQUENCE \
                    nl-n2-codebookSubsetRestriction CHOICE {
                        two-one BIT STRING (SIZE (16)),
                        two-two BIT STRING (SIZE (43)),
                        four-one BIT STRING (SIZE (32)),
                        three-two BIT STRING (SIZE (59)),
                        six-one BIT STRING (SIZE (48)),
                        four-two BIT STRING (SIZE (75)),
                        eight-one BIT STRING (SIZE (64)),
                        four-three BIT STRING (SIZE (107)),
                        six-two BIT STRING (SIZE (107)),
                        twelve-one BIT STRING (SIZE (96)),
                        four-four BIT STRING (SIZE (139)),
                        eight-two BIT STRING (SIZE (139)),
                        sixteen-one BIT STRING (SIZE (128))
                    },
                    typeII-RI-Restriction BIT STRING (SIZE (2))
                },
                typeII-PortSelection SEQUENCE {
                    portSelectionSamplingSize ENUMERATED {nl, n2, n3, n4}
                    typeII-PortSelectionRI-Restriction BIT STRING (SIZE (2))
                }
            },
            phaseAlphabetSize ENUMERATED {n4, n8},
            subbandAmplitude BOOLEAN,
            numberOfBeams ENUMERATED {two, three, four}
        }
    }
}
CodebookConfig-rl6 ::= SEQUENCE {
    codebookType
                CHOICE \
        type2
            subT {
                typeII-rl6 SEQUENCE {
                    nl-n2-codebookSubsetRestriction-rl6 CHOICE {
                        two-one BIT STRING (SIZE (16)),
                        two-two BIT STRING (SIZE (43)),
                        four-one BIT STRING (SIZE (32)),
                        three-two BIT STRING (SIZE (59)),
                        six-one BIT STRING (SIZE (48)),
                        four-two BIT STRING (SIZE (75)),
                        eight-one BIT STRING (SIZE (64)),
                        four-three BIT STRING (SIZE (107)),
                        six-two BIT STRING (SIZE (107)),
                        twelve-one BIT STRING (SIZE (96)),
                        four-four BIT STRING (SIZE (139)),
                        eight-two BIT STRING (SIZE (139)),
                        sixteen-one BIT STRING (SIZE (128))
```


ETSI


--- Page 505  ---


3GPP TS 38.331 version 17.0.0 Release 17
504
ETSI TS 138331 V17.0.0 (2022-05)
```
                    },
                    typeII-RI-Restriction-rl6 BIT STRING (SIZE(4))
                },
                typeII-PortSelection-rl6 SEQUENCE {
                    portSelectionSamplingSize-rl6 ENUMERATED {nl, n2, n3, n4},
                    typeII-PortSelectionRI-Restriction-rl6 BIT STRING (SIZE (4))
                }
            },
        numberOfPMI-Subbands PerCQI-Subband-r16 INTEGER (1..2),
        paramCombination-rl6 INTEGER (1..8)
        }
    }
}
CodebookConfig-rl7 ::= SEQUENCE {
    codebookType \
        typel SEQUENCE {
            typeI-SinglePanell-rl7 SEQUENCE {
                nrOfAntennaPorts CHOICE {
                    two SEQUENCE \
                        twoTX-CodebookSubsetRestrictionl-rl7 BIT STRING (SIZE (6))
                    },
                    moreThanTwo SEQUENCE {
                        nl-n2 CHOICE {
                            two-one-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (8)),
                            two-two-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (64)),
                            four-one-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (16)),
                            three-two-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (96)),
                            six-one-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (24)),
                            four-two-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (128)),
                            eight-one-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (32)),
                            four-three-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (192)),
                            six-two-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (192)),
                            twelve-one-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (48)),
                            four-four-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (256)),
                            eight-two-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (256)),
                            sixteen-one-TypeI-SinglePanel-Restrictionl-rl7 BIT STRING (SIZE (64))
                        }
                    }
                }
            },
            typeI-SinglePanel2-rl7 SEQUENCE {
                nrOfAntennaPorts CHOICE \
                    two SEQUENCE {
                        twoTX-CodebookSubsetRestriction2-rl7 BIT STRING (SIZE (6))
                    },
                    moreThanTwo SEQUENCE {
                        nl-n2 CHOICE {
                            two-one-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (8)),
                            two-two-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (64)),
                            four-one-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (16)),
                            three-two-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (96)),
                            six-one-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (24)),
                            four-two-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (128)),
```


ETSI


--- Page 506  ---


3GPP TS 38.331 version 17.0.0 Release 17
505
ETSI TS 138331 V17.0.0 (2022-05)
```
                            eight-one-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (32)),
                            four-three-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (192)),
                            six-two-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (192)),
                            twelve-one-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (48)),
                            four-four-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (256)),
                            eight-two-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (256)),
                            sixteen-one-TypeI-SinglePanel-Restriction2-rl7 BIT STRING (SIZE (64))
                        }
                    }
                }
            },
            typeI-SinglePanel-ri-RestrictionSTRP-rl7 BIT STRING (SIZE (8)),
            typeI-SinglePanel-ri-RestrictionSDMP-rl7 BIT STRING (SIZE (4))
        },
        type2 SEQUENCE \
            typeII-PortSelection-rl7 SEQUENCE {
                paramCombination-rl7 INTEGER (1..8),
                valueOfN-rl7 ENUMERATED {n2, n4},
                typeII-PortSelectionRI-Restriction-rl7 BIT STRING (SIZE (4))
            }
        }
    }
}
-- TAG-CODEBOOKCONFIG-STOP
-- ASN1STOP
```


ETSI


--- Page 507  ---


3GPP TS 38.331 version 17.0.0 Release 17
506
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CodebookConfig field descriptions \\
\hline \begin{tabular}{l}
codebookMode \\
CodebookMode as specified in TS 38.214 [19], clause 5.2.2.2.2.
\end{tabular} \\
\hline \begin{tabular}{l}
codebookType \\
CodebookType including possibly sub-types and the corresponding parameters for each (see TS 38.214 [19], clause 5.2.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
n1-n2-codebookSubsetRestriction \\
Number of antenna ports in first ( \( n 1 \) ) and second ( \( n 2 \) ) dimension and codebook subset restriction (see TS 38.214 [19] clause 5.2.2.2.3). \\
Number of bits for codebook subset restriction is CEIL(log2(nchoosek(O1*O2,4)))+8*n1*n2 where nchoosek(a,b) = a!/(b!(a-b)!).
\end{tabular} \\
\hline \begin{tabular}{l}
n1-n2 \\
Number of antenna ports in first (n1) and second (n2) dimension and codebook subset restriction (see TS 38.214 [19] clause 5.2.2.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
ng-n1-n2 \\
Codebook subset restriction for Type I Multi-panel codebook (see TS 38.214 [19], clause 5.2.2.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfBeams \\
Number of beams, L, used for linear combination.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfPMI-SubbandsPerCQI-Subband \\
Field indicates how PMI subbands are defined per CQI subband according to TS 38.214 [19], clause 5.2.2.2.5,
\end{tabular} \\
\hline \begin{tabular}{l}
paramCombination \\
Field describes supported parameter combination ( \( L, p_{v}, \beta \) ) as specified in TS 38.214.
\end{tabular} \\
\hline \begin{tabular}{l}
phaseAlphabetSize \\
The size of the PSK alphabet, QPSK or 8-PSK.
\end{tabular} \\
\hline \begin{tabular}{l}
portSelectionSamplingSize \\
The size of the port selection codebook (parameter d), see TS 38.214 [19] clause 5.2.2.2.6.
\end{tabular} \\
\hline \begin{tabular}{l}
ri-Restriction \\
Restriction for RI for Typel-MultiPanel-RI-Restriction (see TS 38.214 [19], clause 5.2.2.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
subbandAmplitude \\
If subband amplitude reporting is activated (true).
\end{tabular} \\
\hline \begin{tabular}{l}
twoTX-CodebookSubsetRestriction \\
Codebook subset restriction for 2TX codebook (see TS 38.214 [19] clause 5.2.2.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
typel-SinglePanel-codebookSubsetRestriction-i2 \\
i2 codebook subset restriction for Type I Single-panel codebook used when reportQuantity is CRI/Ri/i1/CQI (see TS 38.214 [19] clause 5.2.2.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
typel-SinglePanel-ri-Restriction \\
Restriction for RI for Typel-SinglePanel-Rl-Restriction (see TS 38.214 [19], clause 5.2.2.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
typel-SinglePanel1, typel-SinglePanel2 \\
Configures codebooks for CSI calculation when UE is configured with two SRS sets. Network configures the same number of ports for both codebooks.
\end{tabular} \\
\hline \begin{tabular}{l}
typell-PortSelectionRI-Restriction \\
Restriction for RI for Typell-PortSelection-RI-Restriction (see TS 38.214 [19], clauses 5.2.2.2.4 and 5.2.2.2.6).
\end{tabular} \\
\hline \begin{tabular}{l}
typell-RI-Restriction \\
Restriction for RI for Typell-RI-Restriction (see TS 38.214 [19], clauses 5.2.2.2.3 and 5.2.2.2.5).
\end{tabular} \\
\hline
\end{tabular}
- CommonLocationInfo

The IE CommonLocationInfo is used to transfer detailed location information available at the UE to correlate measurements and UE position information.

ETSI


--- Page 508  ---


3GPP TS 38.331 version 17.0.0 Release 17
507
ETSI TS 138331 V17.0.0 (2022-05)

CommonLocationInfo information element
```
-- ASNISTART
-- TAG-COMMONLOCATIONINFO-START
CommonLocationInfo-rl6 ::= SEQUENCE [
    gnss-TOD-msec-rl6 OCTET STRING OPTIONAL,
    locationTimestamp-rl6 OCTET STRING OPTIONAL,
    locationCoordinate-rl6 OCTET STRING OPTIONAL,
    locationError-rl6 OCTET STRING OPTIONAL,
    locationSource-rl6 OCTET STRING OPTIONAL,
    velocityEstimate-rl6 OCTET STRING OPTIONAL
}
-- TAG-COMMONLOCATIONINFO-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CommonLocationinfo field descriptions \\
\hline \begin{tabular}{l}
gnss-TOD-msec \\
Parameter type gnss-TOD-msec defined in TS 37.355 [49]. The first/leftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline \begin{tabular}{l}
IocationTimeStamp \\
Parameter type DisplacementTimeStamp defined in TS 37.355 [49]. The first/leftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline \begin{tabular}{l}
locationCoordinate \\
Parameter type LocationCoordinates defined in TS 37.355 [49]. The first/leftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline \begin{tabular}{l}
IocationError \\
Parameter LocationError defined in TS 37.355 [49]. The first/leftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline \begin{tabular}{l}
locationSource \\
Parameter LocationSource defined in TS 37.355 [49]. The first/leftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline \begin{tabular}{l}
velocityEstimate \\
Parameter type Velocity defined in TS 37.355 [49]. The first/leftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline
\end{tabular}

CondReconfigld
The IE CondReconfigld is used to identify a CHO, CPA or CPC configuration.
CondReconfigid information element
-- ASNISTART
-- TAG-CONDRECONFIGID-START
CondReconfigId-rl6 : := INTEGER (1. maxNrofCondCells-rl6)
-- TAG-CONDRECONFIGID-STOP
-- ASNISTOP

ETSI


--- Page 509  ---


3GPP TS 38.331 version 17.0.0 Release 17
508
ETSI TS 138331 V17.0.0 (2022-05)
- CondReconfigToAddModList

The IE CondReconfigToAddModList concerns a list of conditional reconfigurations to add or modify, with for each entry the condReconfigld and the associated condExecutionCond/condExecutionCondSCG and condRRCReconfig.

CondReconfigToAddModList information element
```
-- ASNISTART
-- TAG-CONDRECONFIGTOADDMODLIST-START
CondReconfigToAddModList-rl6 ::= SEQUENCE (SIZE (l.. maxNrofCondCells-rl6)) OF CondReconfigToAddMod-rl6
CondReconfigToAddMod-rl6 ::= SEQUENCE \
    condReconfigId-rl6
    CondReconfigId-r16,
    SEQUENCE (SIZE (1..2)) OF MeasId OPTIONAL, -- Need. M
    ...;
    [ [
    condExecutionCondSCG-rl7 OCTET STRING (CONTAINING CondReconfigExecCondSCG-rl7) OPTIONAL
    ] ]
}
CondReconfigExecCondSCG-rl7 ::= SEQUENCE (SIZE (1..2)) OF MeasId
-- TAG-CONDRECONFIGTOADDMODLIST-STOP
-- ASN1STOP
```


\begin{tabular}{|l|}
\hline CondReconfigToAddMod field descriptions \\
\hline \begin{tabular}{l}
condExecutionCond \\
The execution condition that needs to be fulfilled in order to trigger the execution of a conditional reconfiguration for CHO, CPA, intra-SN CPC without MN involvement or MN initiated inter-SN CPC. When configuring 2 triggering events (Meas Ids) for a candidate cell, network ensures that both refer to the same measObject. If network configures condEventD1 or condEventT1 for a candidate cell network configures a second triggering event condEventA3, condEventA4 or condEventA5. Network does not configure both condEventD1 or condEventT1 for the same candidate cell. For CPAC, the RRCReconfiguration message contained in condRRCReconfig cannot contain the field scg-State.
\end{tabular} \\
\hline \begin{tabular}{l}
condExecutionCondSCG \\
Contains execution condition that needs to be fulfilled in order to trigger the execution of a conditional reconfiguration for SN initiated inter-SN CPC. The Meas Ids refer to the measConfig associated with the SCG. When configuring 2 triggering events (Meas Ids) for a candidate cell, network ensures that both refer to the same measObject. For each condReconfiguration/d, the network always configures either triggerCondition or triggerConditionSCG (not both).
\end{tabular} \\
\hline \begin{tabular}{l}
condRRCReconfig \\
The RRCReconfiguration message to be applied when the condition(s) are fulfilled. The RRCReconfiguration message contained in condRRCReconfig cannot contain the field conditionalReconfiguration, the field daps-Config or the configuration for target SCG for CHO.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline condReconfigAdd & The field is mandatory present when a condReconfig/d is being added. Otherwise the field is optional, need M. \\
\hline
\end{tabular}

ETSI


--- Page 510  ---


3GPP TS 38.331 version 17.0.0 Release 17
509
ETSI TS 138331 V17.0.0 (2022-05)
- ConditionalReconfiguration

The IE ConditionalReconfiguration is used to add, modify and release the configuration of conditional reconfiguration.
Conditiona/Reconfiguration information element
```
-- ASNISTART
-- TAG-CONDITIONALRECONFIGURATION-START
ConditionalReconfiguration-rl6 ::= SEQUENCE {
    attemptCondReconfig-rl6 ENUMERATED {true} OPTIONAL, -- COND CHO
    condReconfigToRemoveList-rl6 CondReconfigToRemoveList-rl6 OPTIONAL, -- Need. N
    condReconfigToAddModList-r16 CondReconfigToAddModList-r16 OPTIONAL, -- Need. N
    ...
}
CondReconfigToRemoveList-r16 ::= SEQUENCE (SIZE (1.. maxNrofCondCells-rl6)) OF CondReconfigId-rl6
-- TAG-CONDITIONALRECONFIGURATION-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline ConditionalReconfiguration field descriptions \\
\hline \begin{tabular}{l}
attemptCondReconfig \\
If present, the UE shall perform conditional reconfiguration if selected cell is a target candidate cell and it is the first cell selection after failure as described in clause 5.3.7.3.
\end{tabular} \\
\hline \begin{tabular}{l}
condReconfigToAddModList \\
List of the configuration of candidate SpCells to be added or modified for CHO, CPA or CPC.
\end{tabular} \\
\hline \begin{tabular}{l}
condReconfigToRemoveList \\
List of the configuration of candidate SpCells to be removed.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline CHO & \begin{tabular}{l} 
The field is optional present, Need R, if the UE is configured with at least a candidate SpCell for CHO. Otherwise the field is \\
not present.
\end{tabular} \\
\hline
\end{tabular}
- ConfiguredGrantConfig

The IE ConfiguredGrantConfig is used to configure uplink transmission without dynamic grant according to two possible schemes. The actual uplink grant may either be configured via RRC (typel) or provided via the PDCCH (addressed to CS-RNTI) (type2). Multiple Configured Grant configurations may be configured in one BWP of a serving cell.

ConfiguredGrantConfig information element
-- ASNISTART
-- TAG-CONFIGUREDGRANTCONFIG-START
ConfiguredGrantConfig ::= SEQUENCE l

ETSI


--- Page 511  ---


3GPP TS 38.331 version 17.0.0 Release 17
510
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline frequencyHopping & ENUMERATED \{intraSlot, interSlot\} \\
\hline mes-Table & ENUMERATED \{qam256, qam64LowSE\} \\
\hline mos-TableTransformPrecoder & ENUMERATED \{qam256, qam64LowSE\} \\
\hline uci-OnPUSCH & SetupRelease \{ CG-UCI-OnPUSCH \} \\
\hline resourceAllocation & ENUMERATED [ resourceAllocationType0, resourceAllocationTypel, dynamicSwitch \}, \\
\hline rbg-Size & ENUMERATED \{config2\} \\
\hline powerControlLoopToUse & ENUMERATED \{nO, nl\}, \\
\hline transformPrecoder & ENUMERATED \{enabled, disabled\} \\
\hline nrofHARQ-Processes & INTEGER (1..16), \\
\hline repK & ENUMERATED \{nl, n2, n4, n8\}, \\
\hline repK-RV & ENUMERATED \{sl-0231, s2-0303, s3-0000\} \\
\hline periodicity & ENUMERATED [ \\
\hline & sym2, sym7, symlx14, sym2x14, sym4x14, sym5x14, sym8x14, syml0x14, syml6x14, sym20xl4, sym32xl4, sym40xl4, sym64xl4, sym80xl4, syml28xl4, syml60xl4, sym256xl4, sym320xl4, sym512xl4, sym640x14, syml024x14, syml280x14, sym2560x14, sym5120x14, sym6, symlxl2, sym2xl2, sym4x12, sym5x12, sym8xl2, syml0xl2, syml6xl2, sym20xl2, sym32xl2, sym \( 40 \times 12 \), sym \( 64 \times 12 \), sym80x12, syml28x12, syml60xl2, sym256xl2, sym320x12, sym512xl2, sym640xl2, syml280x12, sym2560x12 \\
\hline \}, & \\
\hline configuredGrantTimer & INTEGER (1..64) \\
\hline rrc-ConfiguredUplinkGrant & SEQUENCE 1 \\
\hline precodingAndNumberOfLayers & \\
\hline frequencyHoppingOffset & INTEGER (1.. maxNrofPhysicalResourceBlocks-1) \\
\hline \begin{tabular}{l}
⋯ ; \\
[ [
\end{tabular} & \\
\hline pusch-RepTypeIndicator-r16 & ENUMERATED \{pusch-RepTypeA,pusch-RepTypeB\} \\
\hline frequencyHopping PUSCH-RepTypeB-rl6 & ENUMERATED \{interRepetition, interSlot\} \\
\hline timeReferenceSFN-r16 & ENUMERATED \{sfn512\} \\
\hline \begin{tabular}{l}
]], \\
[ [
\end{tabular} & \\
\hline & \\
\hline pathlossReferenceIndex2-r17 & INTEGER (0. . maxNrofPUSCH-PathlossReferenceRSs-1) \\
\hline srs-ResourceIndicator2-rl7 & INTEGER (0..15) \\
\hline precodingAndNumberOfLayers2-rl7 & INTEGER (0. 63) \\
\hline timeDomainOffset-rl7 & INTEGER (0..40959) \\
\hline cg-SDT-Configuration-rl7 & CG-SDT-Configuration-rl7 \\
\hline ] ] & \\
\hline \} & OPTIONAL, -- Need R \\
\hline ..., & \\
\hline \multicolumn{2}{|l|}{[ [} \\
\hline cg-RetransmissionTimer-r16 & INTEGER (1..64) \\
\hline \multicolumn{2}{|c|}{\multirow{2}{*}{}} \\
\hline & [sym7, symlx14, sym2x14, sym3x14, sym4x14, sym5x14, sym6x14, sym7x14, sym8x14, \\
\hline
\end{tabular}

ETSI


--- Page 512  ---


3GPP TS 38.331 version 17.0.0 Release 17
511
ETSI TS 138331 V17.0.0 (2022-05)
```
    cg-nrofPUSCH-InSlot-rl6
    cg-nrofSlots-rl6
    cg-StartingOffsets-rl6
    cg-UCI-Multiplexing-rl6
    cg-COT-SharingOffset-rl6
    betaOffsetCG-UCI-rl6
    cg-COT-SharingList-rl6
    harq-ProcID-Offset-rl6
    harq-ProcID-Offset2-rl6
    configuredGrantConfigIndex-r16
    configuredGrantConfigIndexMAC-r16
    periodicityExt-rl6
    startingFromRVO-rl6
    phy-PriorityIndex-rl6
    autonomousTx-rl6
    ]],
    [ [
    cg-betaOffsetsCrossPri0-rl7
    cg-betaOffsetsCrossPril-rl7
    mappingPattern-rl7
    sequenceOffsetForRV-rl7
    p0-PUSCH-Alpha2-rl7
    powerControlLoopToUse2-rl7
    cg-COT-SharingList-rl7
    periodicityExt-rl7
    repk-rl7
    nrofHARQ-ProcessesExt-rl7
    harq-ProcID-Offset-vl7
    harq-ProcID-Offset2-vl700
    configuredGrantTimer-vl700
    ]]
}
CG-UCI-ONPUSCH ::= CHOICE [
    dynamic
    semiStatic
}
CG-COT-Sharing-rl6 ::= CHOICE [
    noCOT-Sharing-rl6
    cot-Sharing-rl6
        duration-rl6
        offset-rl6
        channelAccessPriority-rl6
    }
}
CG-COT-Sharing-rl7 ::= CHOICE [
    noCOT-Sharing-rl7
    cot-Sharing-rl7
        duration-rl7
        offset-rl7
    }
}
```


INTEGER (1..7)
INTEGER (1. 40)
CG-StartingOffsets-rl6
ENUMERATED (enabled)
INTEGER (1..39)
INTEGER (0..31)
SEQUENCE (SIZE (1..1709)) OF CG-COT-Sharing-rl6
INTEGER (0.15)
INTEGER (0..15)
ConfiguredGrantConfigIndex-r16
ConfiguredGrantConfigIndexMAC-rl6
INTEGER (1..5120)
ENUMERATED [on, off\}
ENUMERATED \{p0, pl\}
ENUMERATED (enabled)
    OPTIONAL, -- Need R
    OPTIONAL, -- Need R
    OPTIONAL, -- Need R
    OPTIONAL, -- Need R
    OPTIONAL, -- Need R
OPTIONAL, -- Need R
    OPTIONAL, -- Need R
    OPTIONAL, -- Need. M
    OPTIONAL, -- Need M
    OPTIONAL, -- Cond CG-List
    OPTIONAL, -- Cond CG-IndexMAC
    OPTIONAL, -- Need R
    OPTIONAL, -- Need R
    OPTIONAL, -- Need R
    OPTIONAL -- Cond LCH-BasedPrioritization
SetupRelease [BetaOffsetsCrossPriSelCG-rl7]
SetupRelease [ BetaOffsetsCrossPriSelCG-rl7 \}
ENUMERATED [cyclicMapping, sequentialMapping]
INTEGER (0..3)
PO-PUSCH-AlphaSetId.
ENUMERATED \{nO, nl\}
SEQUENCE (SIZE (1..1709)) OF CG-COT-Sharing-rl7
INTEGER (1..40960)
ENUMERATED \{n12, n16, n24, n32\}
INTEGER (17. .32)
INTEGER (16..31)
INTEGER (16..31)
INTEGER (66. . 576)

\begin{tabular}{|l|l|}
\hline OPTIONAL, & -- Need M \\
\hline OPTIONAL, & -- Need M \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Need M \\
\hline OPTIONAL, & -- Need M \\
\hline OPTIONAL, & -- Need M \\
\hline OPTIONAL, & -- Need M \\
\hline OPTIONAL & -- Need R \\
\hline
\end{tabular}

SEQUENCE (SIZE (1.4)) OF BetaOffsets,
BetaOffsets
```
NULL,
SEQUENCE {
    INTEGER (1..39),
    INTEGER (1..39),
    INTEGER (1..4)
```


NULL,
SEQUENCE 1
INTEGER (1..139), INTEGER (1..139)

ETSI


--- Page 513  ---


3GPP TS 38.331 version 17.0.0 Release 17
512
ETSI TS 138331 V17.0.0 (2022-05)
```
CG-StartingOffsets-rl6 ::= SEQUENCE \
    cg-StartingFullBW-InsideCOT-r16 SEQUENCE (SIZE (l..7)) OF INTEGER (0..6) OPTONAL, -- Need. R
    cg-StartingFullBW-OutsideCOT-rl6 SEQUENCE (SIZE (1..7)) OF INTEGER (O..6) OPTIONAL, -- Need R
    cg-StartingPartialBW-InsideCOT-rl6 INTEGER (O..6) OPTIONAL, -- Need R
    cg-StartingPartialBW-OutsideCOT-rl6 INTEGER (0..6) OPTIONAL -- Need R
}
BetaOffsetsCrossPriSelCG-rl7 ::= CHOICE [
    dynamic-rl7 SEQUENCE (SIZE (1.4)) OF BetaOffsetsCrossPri-rl7,
    semiStatic-rl7 BetaOffsetsCrossPri-rl7
}
CG-SDT-Configuration-rl7 ::= SEQUENCE {
    cg-SDT-RetransmissionTimer INTEGER (1..64) OPTIONAL, -- Need R
    sdt-SSB-Subset-rl7 CHOICE [
        shortBitmap-rl7 BIT STRING (SIZE (4)),
        mediumBitmap-rl7 BIT STRING (SIZE (8)),
        longBitmap-rl7 BIT STRING (SIZE (64))
    } OPTIONAL, -- Need. S
```

```
    sdt-PO-PUSCH-r17 INTEGER (-16..15) OPTIONAL, -- Need M
```

```
    sdt-DMRS-Ports-rl7 CHOICE [
        dmrsTypel-rl7 BIT STRING (SIZE (8)),
        dmrsType2-rl7 BIT STRING (SIZE (12))
    } OPTIONAL, -- Need M
    sdt-NrofDMRS-Sequences-rl7 INTEGER (1..2) OPTIONAL -- Need M
}
-- TAG-CONFIGUREDGRANTCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 514  ---


3GPP TS 38.331 version 17.0.0 Release 17
513
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ConfiguredGrantConfig field descriptions \\
\hline \begin{tabular}{l}
antennaPort \\
Indicates the antenna port(s) to be used for this configuration, and the maximum bitwidth is 5. See TS 38.214 [19], clause 6.1.2, and TS 38.212 [17], clause 7.3.1. The network does not configure this for CG-SDT.
\end{tabular} \\
\hline \begin{tabular}{l}
autonomousTx \\
If this field is present, the Configured Grant configuration is configured with autonomous transmission, see TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
betaOffsetCG-UCI \\
Beta offset for CG-UCI in CG-PUSCH, see TS 38.213 [13], clause 9.3
\end{tabular} \\
\hline \begin{tabular}{l}
cg-betaOffsetsCrossPri0, cg-betaOffsetsCrossPri1 \\
Selection between and configuration of dynamic and semi-static beta-offset for multiplexing HARQ-ACK in CG-PUSCH with different priorities. \\
The field cg-betaOffsetsCrossPriO indicates multiplexing LP HARQ-ACK in HP CG-PUSCH. This field is configured only if phy-Prioritylndex-r16 is configured with value p1. \\
The field cg-betaOffsetsCrossPri1 indicates multiplexing HP HARQ-ACK in LP CG-PUSCH. This field is configured only if phy-Prioritylndex-r16 is configured with value p0.
\end{tabular} \\
\hline \begin{tabular}{l}
cg-COT-SharingList \\
Indicates a table for COT sharing combinations (see 37.213 [48], clause 4.1.3). One row of the table can be set to noCOT-Sharing to indicate that there is no channel occupancy sharing. If the cg-Retransmission Timer-r16 is configured and the UE operates as an initiating device in semi-static channel access mode (see TS 37.213 [48], clause 4.3), then cg-COT-SharingList-r16 is configured and the UE ignores the field channelAccessPriority-r16. \\
Editor's note (IIoT): The last part "the UE ignores the field channelAccessPriority-r16" may be already implemented by RAN1 spec 37.213. RAN2 to discuss in the maintenance phase on whether to remove this to avoid misinterpretation. The field cg-COT-SharingList-r17 is only applicable for FR2-2.
\end{tabular} \\
\hline \begin{tabular}{l}
cg-COT-SharingOffset \\
Indicates the offset from the end of the slot where the COT sharing indication in UCI is enabled where the offset in symbols is equal to \( 14^{*} \mathrm{n} \), where n is the signaled value for cg-COT-SharingOffset. Applicable when ul-toDL-COT-SharingED-Threshold-r16 is not configured (see 37.213 [48], clause 4.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
cg-DMRS-Configuration \\
DMRS configuration (see TS 38.214 [19], clause 6.1.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
cg-minDFI-Delay \\
Indicates the minimum duration (in unit of symbols) from the ending symbol of the PUSCH to the starting symbol of the PDCCH containing the downlink feedback indication (DFI) carrying HARQ-ACK for this PUSCH. The HARQ-ACK received before this minimum duration is not considered as valid for this PUSCH (see TS 38.213 [13], clause 10.5). The following minimum duration values are supported, depending on the configured subcarrier spacing [symbols]: \\
\( 15 \mathrm{kHz}: \quad 7, \mathrm{~m}^{\star} 14 \), where \( \mathrm{m}=\{1,2,3,4\} \) \\
\( 30 \mathrm{kHz}: ~ 7, \mathrm{~m}^{*} 14 \), where \( \mathrm{m}=\{1,2,3,4,5,6,7,8\} \) \\
\( 60 \mathrm{kHz}: \quad 7, \mathrm{~m}^{*} 14 \), where \( \mathrm{m}=\{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16\} \)
\end{tabular} \\
\hline \begin{tabular}{l}
cg-nrofPUSCH-inSlot \\
Indicates the number of consecutive PUSCH configured to CG within a slot where the SLIV indicating the first PUSCH and additional PUSCH appended with the same length (see TS 38.214 [19], clause 6.1.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
cg-nrofSlots \\
Indicates the number of allocated slots in a configured grant periodicity following the time instance of configured grant offset (see TS 38.214 [19], clause 6.1.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
cg-RetransmissionTimer \\
Indicates the initial value of the configured retransmission timer (see TS 38.321 [3]) in multiples of periodicity. The value of cg-RetransmissionTimer is always less than or equal to the value of configured GrantTimer. This field is always configured together with harq-Proc/D-Offset. This field is not configured for operation in licensed spectrum or simultaneously with harq-Proc/D-Offset2.
\end{tabular} \\
\hline \begin{tabular}{l}
cg-StartingOffsets \\
This field is not applicable for a UE which is allowed to operate as an initiating device in semi-static channel access mode, i.e., not applicable for a UE configured with UE FFP parameters (e.g. period, offset) regardless whether the UE would initiate its own COT or would share gNB's COT.
\end{tabular} \\
\hline \begin{tabular}{l}
cg-UCI-Multiplexing \\
If present, this field indicates that in the case of PUCCH overlapping with CG-PUSCH(s) within a PUCCH group, the CG-UCI and HARQ-ACK are jointly encoded (see TS 38.213 [13], clause 9).
\end{tabular} \\
\hline \begin{tabular}{l}
configuredGrantConfigindex \\
Indicates the index of the Configured Grant configurations within the BWP.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 515  ---


3GPP TS 38.331 version 17.0.0 Release 17
514
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
configuredGrantConfigindexMAC \\
Indicates the index of the Configured Grant configurations within the MAC entity.
\end{tabular} \\
\hline \begin{tabular}{l}
configuredGrantTimer \\
Indicates the initial value of the configured grant timer (see TS 38.321 [3]) in multiples of periodicity. When cg-RetransmissonTimer is configured, if HARQ processes are shared among different configured grants on the same BWP, configuredGrantTimer *periodicity is set to the same value for the configurations that share HARQ processes on this BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-Seqinitialization \\
The network configures this field if transformPrecoder is disabled or when single DMRS sequence is configured for CG-SDT. Otherwise, the field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyDomainAllocation \\
Indicates the frequency domain resource allocation, see TS 38.214 [19], clause 6.1.2, and TS 38.212 [17], clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyHopping \\
The value intraSlot enables 'Intra-slot frequency hopping' and the value interSlot enables 'Inter-slot frequency hopping'. If the field is absent, frequency hopping is not configured. The field frequencyHopping applies to configured grant for 'pusch-RepTypeA' (see TS 38.214 [19], clause 6.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyHoppingOffset \\
Frequency hopping offset used when frequency hopping is enabled (see TS 38.214 [19], clause 6.1.2 and clause 6.3).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyHoppingPUSCH-RepTypeB \\
Indicates the frequency hopping scheme for Type 1 CG when pusch-RepType/ndicator is set to 'pusch-RepTypeB' (see TS 38.214 [19], clause 6.1). The value interRepetition enables 'Inter-repetition frequency hopping', and the value interSlot enables 'Inter-slot frequency hopping'. If the field is absent, the frequency hopping is not enabled for Type 1 CG.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-ProcID-Offset \\
For operation with shared spectrum channel access configured with cg-RetransmissionTimer-r16, this configures the range of HARQ process IDs which can be used for this configured grant where the UE can select a HARQ process ID within [harg-proc/D-offset, .., (harg-proc/D-offset + nrofHARQ-Processes - 1)].
\end{tabular} \\
\hline \begin{tabular}{l}
harq-ProcID-Offset2 \\
Indicates the offset used in deriving the HARQ process IDs, see TS 38.321 [3], clause 5.4.1. This field is not configured together with cg-RetransmissionTimer-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
mappingPattern \\
Indicates whether the UE should follow Cyclical mapping pattern or Sequential mapping pattern when two SRS resource sets are configured for PUSCH transmission with a Type 1 configured grant and/or a Type 2 configured grant as described in clause 6.1.2.3 of TS 38.214 [19]
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-Table \\
Indicates the MCS table the UE shall use for PUSCH without transform precoding. If the field is absent the UE applies the value qam64.
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-TableTransformPrecoder \\
Indicates the MCS table the UE shall use for PUSCH with transform precoding. If the field is absent the UE applies the value qam64.
\end{tabular} \\
\hline \begin{tabular}{l}
mcsAndTBS \\
The modulation order, target code rate and TB size (see TS 38.214 [19], clause 6.1.2). The NW does not configure the values \( 28-31 \) in this version of the specification.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofHARQ-Processes, nrofHARQ-ProcessesExt \\
The number of HARQ processes configured. It applies for both Type 1 and Type 2. See TS 38.321 [3], clause 5.4.1. If the UE is configured with nrofHARQ-ProcessesExt, the UE shall ignore nrofHARQ-Processes.
\end{tabular} \\
\hline \begin{tabular}{l}
pathlossReferenceindex2 \\
Indicates the reference signal used as PUSCH pathloss reference for the second SRS resource set. When this field is present, pathlossReferencelndex indicates the reference signal used as PUSCH pathloss reference for the first SRS resource set
\end{tabular} \\
\hline \begin{tabular}{l}
p0-PUSCH-Alpha \\
Index of the PO-PUSCH-AlphaSet to be used for this configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
p0-PUSCH-Alpha2 \\
Index of the PO-PUSCH-AlphaSet to be used for second SRS resource set. If this field is present, the p0-PUSCH-Alpha provides index for the P0-PUSCH-AlphaSet to be used for first SRS resource set.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 516  ---


3GPP TS 38.331 version 17.0.0 Release 17
515
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
periodicity \\
Periodicity for UL transmission without UL grant for type 1 and type 2 (see TS 38.321 [3], clause 5.8.2). \\
The following periodicities are supported depending on the configured subcarrier spacing [symbols]:
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityExt \\
This field is used to calculate the periodicity for UL transmission without UL grant for type 1 and type 2 (see TS 38.321 [3], clause 5,8.2). If this field is present, the field periodicity is ignored. \\
The following periodicites are supported depending on the configured subcarrier spacing [symbols]: \\
15 kHz : \\
30 kHz : \\
60 kHz with normal CP: \\
60 kHz with ECP: \\
120 kHz : \\
480 kHz : \\
960 kHz : \\
periodicityExt*14, where periodicityExt has a value between 1 and 640 . \\
periodicityExt*14, where periodicityExt has a value between 1 and 1280. \\
periodicityExt*14, where periodicityExt has a value between 1 and 2560. \\
periodicityExt*12, where periodicityExt has a value between 1 and 2560. \\
periodicityExt*14, where periodicityExt has a value between 1 and 5120 . \\
periodicityExt*14, where periodicityExt has a value between 1 and 20480. \\
periodicityExt*14, where periodicityExt has a value between 1 and 40960.
\end{tabular} \\
\hline \begin{tabular}{l}
phy-Prioritylndex \\
Indicates the PHY priority of CG PUSCH at least for PHY-layer collision handling. Value \( p 0 \) indicates low priority and value \( p 1 \) indicates high priority. The network does not configure this for CG-SDT.
\end{tabular} \\
\hline \begin{tabular}{l}
powerControlloopToUse \\
Closed control loop to apply (see TS 38.213 [13], clause 7.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
powerControlLoopToUse2 \\
Closed control loop to apply to second SRS resource set (see TS 38.213 [13], clause 7.1.1). If this field is present, the powerControlloopToUse applies to the first SRS resource set.
\end{tabular} \\
\hline \begin{tabular}{l}
precodingAndNumberOfLayers \\
Precoding and number of MIMO layers applicable (see TS 38.213 [13], clause 7.1.1). In case of CG-SDT network configures single antenna port for single layer transmission.
\end{tabular} \\
\hline \begin{tabular}{l}
precodingAndNumberOfLayers 2 \\
Indicates the precoding and number of layers for the second SRS resource set. When this field is present, precodingAndNumberOfLayers indicated the precoding and number of layers for the first SRS resource set.
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-RepTypelndicator \\
Indicates whether UE follows the behavior for PUSCH repetition type A or the behavior for PUSCH repetition type B for each Type 1 configured grant configuration. The value pusch-RepTypeA enables the 'PUSCH repetition type A' and the value pusch-RepTypeB enables the 'PUSCH repetition type B' (see TS 38.214 [19], clause 6.1.2.3). The value pusch-RepTypeB is not configured simultaneously with cg-nrofPUSCH-InSlot-r16 and cg-nrofSlots-r16. The network does not configure this field if cg-RetransmissionTimer-r16 is configured for CG operation with shared spectrum channel access.
\end{tabular} \\
\hline \begin{tabular}{l}
rbg-Size \\
Selection between configuration 1 and configuration 2 for RBG size for PUSCH. The UE does not apply this field if resourceAllocation is set to resourceAllocationType1. \\
Otherwise, the UE applies the value config 1 when the field is absent. Note: rbg-Size is used when the transformPrecoder parameter is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
repK-RV \\
The redundancy version (RV) sequence to use. See TS 38.214 [19], clause 6.1.2. The network configures this field if repetitions are used, i.e., if repK is set to \( n 2, n 4 \) or \( n 8 \). This field is not configured when cg-RetransmissionTimer is configured. Otherwise, the field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
repK \\
Number of repetitions K, see TS 38.214 [19]. If the field repK-r17 is present, the UE shall ignore the repK (without suffix).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 517  ---


3GPP TS 38.331 version 17.0.0 Release 17
516
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
resourceAllocation \\
Configuration of resource allocation type 0 and resource allocation type 1. For Type 1 UL data transmission without grant, resourceAllocation should be resourceAllocation TypeO or resourceAllocation Type1.
\end{tabular} \\
\hline \begin{tabular}{l}
rrc-ConfiguredUplinkGrant \\
Configuration for "configured grant" transmission with fully RRC-configured UL grant (Type1). If this field is absent the UE uses UL grant configured by DCI addressed to CSRNTI (Type2).
\end{tabular} \\
\hline \begin{tabular}{l}
sequenceOffsetForRV \\
Configures the RV offset for the starting RV for the first repetition (first actual repetition in PUSCH repetition Type B) towards the second 'SRS resource set' for PUSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
srs-ResourceIndicator \\
Indicates the SRS resource to be used. The network does not configure this for CG-SDT.
\end{tabular} \\
\hline \begin{tabular}{l}
srs-Resourceindicator2 \\
Indicates the SRS resource to be used for the second SRS resource set. When this field is present, the srs-Resourcelndicator is used for the first SRS resource set.
\end{tabular} \\
\hline \begin{tabular}{l}
startingFromRV0 \\
This field is used to determine the initial transmission occasion of a transport block for a given RV sequence, see TS 38.214 [19], clause 6.1.2.3.1. The network does not configure this field if cg-Retransmission Timer-r 16 is configured for CG operation.
\end{tabular} \\
\hline \begin{tabular}{l}
timeDomainAllocation \\
Indicates a combination of start symbol and length and PUSCH mapping type, see TS 38.214 [19], clause 6.1.2 and TS 38.212 [17], clause 7.3.1.
\end{tabular} \\
\hline \begin{tabular}{l}
timeDomainOffset \\
Offset related to the reference SFN indicated by timeReferenceSFN, see TS 38.321 [3], clause 5.8.2. timeDomainOffset-r17 is only applicable to 480 kHz and 960 kHz . If timeDomainOffset-r17 is present, the UE shall ignore timeDomainOffset (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
timeReferenceSFN \\
Indicates SFN used for determination of the offset of a resource in time domain. The UE uses the closest SFN with the indicated number preceding the reception of the configured grant configuration, see TS 38.321 [3], clause 5.8.2. If the field timeReferenceSFN is not present, the reference SFN is 0.
\end{tabular} \\
\hline \begin{tabular}{l}
transformPrecoder \\
Enables or disables transform precoding for type 1 and type2. If the field is absent, the UE enables or disables transform precoding in accordance with the field \( m s g 3 \) transformPrecoder in RACH-ConfigCommon, see TS 38.214 [19], clause 6.1.3.
\end{tabular} \\
\hline \begin{tabular}{l}
uci-OnPUSCH \\
Selection between and configuration of dynamic and semi-static beta-offset. For Type 1 UL data transmission without grant, uci-OnPUSCH should be set to semiStatic.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline CG-COT-Sharing field descriptions \\
\hline \begin{tabular}{l}
channelAccessPriority \\
Indicates the Channel Access Priority Class that the gNB can assume when sharing the UE initiated COT (see 37.213 [48], clause 4.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
duration \\
Indicates the number of DL transmission slots within UE initiated COT (see 37.213 [48], clause 4.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
offset \\
Indicates the number of DL transmission slots from the end of the slot where CG-UCI is detected after which COT sharing can be used (see 37.213 [48], clause 4.1.3).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 518  ---


3GPP TS 38.331 version 17.0.0 Release 17
517
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CG-StartingOffsets field descriptions \\
\hline \begin{tabular}{l}
cg-StartingFullBW-insideCOT \\
A set of configured grant PUSCH transmission starting offsets which indicates the length of a CP extension of the first symbol that is located before the configured resource when frequency domain resource allocation includes all interlaces in the allocated RB set(s) and the CG PUSCH resource is inside gNB COT (see TS 38.214 [19], clause 6.1.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
cg-StartingFullBW-OutsideCOT \\
A set of configured grant PUSCH transmission starting offset indices (see TS 38.211[16], Table 5.3.1-2) which indicates the length of a CP extension of the first symbol that is located before the configured resource when frequency domain resource allocation includes all interlaces in the allocated RB set(s) and the CG PUSCH resource is outside gNB COT (see TS 38.214 [19], clause 6.1.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
cg-StartingPartialBW-insideCOT \\
A set of configured grant PUSCH transmission starting offset index (see TS 38.211[16], Table 5.3.1-2) which indicates the length of a CP extension of the first symbol that is located before the configured resource when frequency domain resource allocation does not include all interlaces in the allocated RB set(s) and the CG PUSCH resource is inside gNB COT (see TS 38.214 [19], clause 6.1.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
cg-StartingPartiaIBW-OutsideCOT \\
A set of configured grant PUSCH transmission starting offset index (see TS 38.211[16], Table 5.3.1-2) which indicates the length of a CP extension of the first symbol that is located before the configured resource when frequency domain resource allocation does not include all interlaces in the allocated RB set(s) and the CG PUSCH resource is outside gNB COT (see TS 38.214 [19], clause 6.1.2.3).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline CG-SDT-Configuration field descriptions \\
\hline \begin{tabular}{l}
sdt-DMRS-Ports \\
Indicates the set of DMRS ports for SSB to PUSCH mapping (see TS 38.213 [13]).
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-NrofDMRS-Sequences \\
Indicates the number of DMRS ports for SSB to PUSCH mapping (see TS 38.213 [13]).
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-SSB-Subset \\
Indicates SSB subset for SSB to CG PUSCH mapping within one CG configuration. If this field is absent, UE assumes the SSB set includes all actually transmitted SSBs configured by SIB1.
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-SSB-PerCG-PUSCH \\
The number of SSBs per CG PUSCH (see TS 38.213 [13]). Value one corresponds to 1 SSBs per CG PUSCH, value two corresponds to 2 SSBs per CG PUSCH and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-P0-PUSCH \\
Indicates P0 value for PUSCH for CG SDT in steps of 1dB (see TS 38.213 [13]). When this field is configured, the UE ignores the p0-PUSCH-Alpha.
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-Alpha \\
Indicates alpha value for PUSCH for CG SDT. alpha 0 indicates value 0 is used alpha04 indicates value 4 is used and so on (see TS 38.213 [13]). When this field is configured, the UE ignores the p0-PUSCH-Alpha.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline LCH-BasedPrioritization & This field is optionally present, Need R, if Ich-BasedPrioritization is configured in the MAC entity. It is absent otherwise. \\
\hline RepTypeB & The field is optionally present if pusch-RepTypeIndicator is set to pusch-RepTypeB, Need S, and absent otherwise. \\
\hline CG-List & The field is mandatory present when included in configuredGrantConfigToAddModList-r16, otherwise the field is absent. \\
\hline CG-IndexMAC & The field is mandatory present if at least one configured grant is configured by configuredGrantConfigToAddModList-r16 in any BWP of this MAC entity, otherwise it is optionally present, need \( R \). \\
\hline
\end{tabular}

ETSI


--- Page 519  ---


3GPP TS 38.331 version 17.0.0 Release 17
518
ETSI TS 138331 V17.0.0 (2022-05)
- ConfiguredGrantConfigIndex

The IE ConfiguredGrantConfigIndex is used to indicate the index of one of multiple UL Configured Grant configurations in one BWP.
ConfiguredGrantConfigIndex information element
```
-- ASNISTART
-- TAG-CONFIGUREDGRANTCONFIGINDEX-START
ConfiguredGrantConfigIndex-rl6 ::= INTEGER (O.. maxNrofConfiguredGrantConfig-l-rl6)
-- TAG-CONFIGUREDGRANTCONFIGINDEX-STOP
-- ASNISTOP
```

- ConfiguredGrantConfigIndexMAC

The IE ConfiguredGrantConfigIndexMAC is used to indicate the unique Configured Grant configurations index per MAC entity.
ConfiguredGrantConfigIndexMAC information element
```
-- ASNISTART
-- TAG-CONFIGUREDGRANTCONFIGINDEXMAC-START
ConfiguredGrantConfigIndexMAC-rl6 ::= INTEGER (0.. maxNrofConfiguredGrantConfigMAC-1-rl6)
-- TAG-CONFIGUREDGRANTCONFIGINDEXMAC-STOP
-- ASNISTOP
```

- ConnEstFailureControl

The IE ConnEstFailureControl is used to configure parameters for connection establishment failure control.
ConnEstFailureContro/information element
```
-- ASNISTART
-- TAG-CONNESTFAILURECONTROL-START
ConnEstFailureControl ::= SEQUENCE \
    connEstFailCount ENUMERATED {nl, n2, n3, n4},
    connEstFailOffsetValidity ENUMERATED {s30, s60, s120, s240, s300, s420, s600, s900},
    connEstFailOffset INTEGER (0..15)
}
-- TAG-CONNESTFAILURECONTROL-STOP
-- ASN1STOP
```


ETSI


--- Page 520  ---


3GPP TS 38.331 version 17.0.0 Release 17
519
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ConnEstFailureControl field descriptions \\
\hline \begin{tabular}{l}
connEstFailCount \\
Number of times that the UE detects T300 expiry on the same cell before applying connEstFailOffset.
\end{tabular} \\
\hline \begin{tabular}{l}
connEstFailOffset \\
Parameter "Qoffsetemp" in TS 38.304 [20]. If the field is absent, the value of infinity shall be used for "Qoffsettemp".
\end{tabular} \\
\hline \begin{tabular}{l}
connEstFailOffsetValidity \\
Amount of time that the UE applies connEstFailOffset before removing the offset from evaluation of the cell. Value s 30 corresponds to 30 seconds, value s 60 corresponds to 60 seconds, and so on.
\end{tabular} \\
\hline
\end{tabular}

ControlResourceSet
The IE ControlResourceSet is used to configure a time/frequency control resource set (CORESET) in which to search for downlink control information (see TS 38.213 [13], clause 10.1).

Contro/ResourceSetinformation element
```
-- ASNISTART
-- TAG-CONTROLRESOURCESET-START
ControlResourceSet ::=
    controlResourceSetId
    frequencyDomainResources
    duration
    cce-REG-MappingType
        interleaved.
            reg-BundleSize
            interleaverSize
            shiftIndex
        },
        nonInterleaved.
    l,
    precoderGranularity
    tci-StatesPDCCH-ToAddList
    tci-StatesPDCCH-ToReleaseList
    tci-PresentInDCI
    pdech-DMRS-ScramblingID
    ...,
    [ [
    rb-Offset-rl6
    tci-PresentDCI-1-2-r16
    coresetPoolIndex-r16
    controlResourcesetId-vl610
    ]],
    [ [
    ]]
}
-- TAG-CONTROLRESOURCESET-STOP
```

    followUnifiedTCIstate-rl7 ENUMERATED [enabled] OPTIONAL -- Need. R

ETSI


--- Page 521  ---


3GPP TS 38.331 version 17.0.0 Release 17
520
ETSI TS 138331 V17.0.0 (2022-05)
ASNISTOP
ETSI


--- Page 522  ---


3GPP TS 38.331 version 17.0.0 Release 17
521
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ControlResourceSet field descriptions \\
\hline \begin{tabular}{l}
cce-REG-MappingType \\
Mapping of Control Channel Elements (CCE) to Resource Element Groups (REG) (see TS 38.211 [16], clauses 7.3.2.2 and 7.4.1.3.2).
\end{tabular} \\
\hline \begin{tabular}{l}
controlResourceSetid \\
Identifies the instance of the ControlResourceSet IE. Value 0 identifies the common CORESET configured in MIB and in ServingCellConfigCommon (controlResourceSetZero) and is hence not used here in the ControlResourceSet IE. Other values identify CORESETs configured by dedicated signalling or in SIB1. The controlResourceSet/d is unique among the BWPs of a serving cell. \\
If the field controlResourceSet/d-v1610 is present, the UE shall ignore the controlResourceSet/d field (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
coresetPoolindex \\
The index of the CORESET pool for this CORESET as specified in TS 38.213 [13] (clauses 9 and 10) and TS 38.214 [19] (clauses 5.1 and 6.1). If the field is absent, the UE applies the value 0 .
\end{tabular} \\
\hline \begin{tabular}{l}
duration \\
Contiguous time duration of the CORESET in number of symbols (see TS 38.211 [16], clause 7.3.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
followUnifiedTCIstate \\
When set to enabled, for PDCCH reception on this CORESET, the UE applies the "indicated" Rel-17 DL only or joint TCI as specified in TS 38.214 clause 5.1.5.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyDomainResources \\
Frequency domain resources for the CORESET. Each bit corresponds a group of 6 RBs, with grouping starting from the first RB group in the BWP. When at least one search space is configured with freqMonitorLocation-r16, only the first \( N_{\text {RBG }, \text { seto }}^{\text {size }} \) bits are valid (see TS 38.213 [13], clause 10.1). The first (left-most / most significant) bit corresponds to the first RB group in the BWP, and so on. A bit that is set to 1 indicates that this RB group belongs to the frequency domain resource of this CORESET. Bits corresponding to a group of RBs not fully contained in the bandwidth part within which the CORESET is configured are set to zero (see TS 38.211 [16], clause 7.3.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
interleaverSize \\
Interleaver-size (see TS 38.211 [16], clause 7.3.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pdcch-DMRS-ScramblingID \\
PDCCH DMRS scrambling initialization (see TS 38.211 [16], clause 7.4.1.3.1). When the field is absent the UE applies the value of the physCellld configured for this serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
precoderGranularity \\
Precoder granularity in frequency domain (see TS 38.211 [16], clauses 7.3.2.2 and 7.4.1.3.2).
\end{tabular} \\
\hline \begin{tabular}{l}
rb-Offset \\
Indicates the RB level offset in units of RB from the first RB of the first 6RB group to the first RB of BWP (see 38.213 [13], clause 10.1).
\end{tabular} \\
\hline \begin{tabular}{l}
reg-BundleSize \\
Resource Element Groups (REGs) can be bundled to create REG bundles. This parameter defines the size of such bundles (see TS 38.211 [16], clause 7.3.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
shiftindex \\
When the field is absent the UE applies the value of the physCell/dconfigured for this serving cell (see TS 38.211 [16], clause 7.3.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
tci-PresentinDCI \\
This field indicates if TCI field is present or absent in DCI format 1_1. When the field is absent the UE considers the TCI to be absent/disabled. In case of cross carrier scheduling, the network sets this field to enabled for the ControlResourceSet used for cross carrier scheduling in DCI format 1_1 in the scheduling cell if enableDefaultBeamForCCS is not configured (see TS 38.214 [19], clause 5.1.5).
\end{tabular} \\
\hline \begin{tabular}{l}
tci-PresentDCl-1-2 \\
Configures the number of bits for "Transmission configuration indicator" in DCI format 1_2. When the field is absent the UE applies the value of 0 bit for the "Transmission configuration indicator" in DCI format \( 1 \_2 \) (see TS 38.212, clause 7.3.1 and TS 38.214, clause 5.1.5). In case of cross carrier scheduling, the network configures this field for the ControlResourceSet used for cross carrier scheduling in DCI format 1_2 in the scheduling cell if enableDefaultBeamForCCS is not configured (see TS 38.214 [19], clause 5.1.5).
\end{tabular} \\
\hline \begin{tabular}{l}
tci-StatesPDCCH-ToAddList \\
A subset of the TCI states defined in pdsch-Config included in the BWP-DownlinkDedicated corresponding to the serving cell and to the DL BWP to which the ControlResourceSet belong to. They are used for providing QCL relationships between the DL RS(s) in one RS Set (TCI-State) and the PDCCH DMRS ports (see TS 38.213 [13], clause 6.). The network configures at most maxNrofTCI-StatesPDCCH entries.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 523  ---


3GPP TS 38.331 version 17.0.0 Release 17
522
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline NotS/B1-initialBWP & \begin{tabular}{l} 
The field is absent in S/B1 and in the PDCCH-ConfigCommon of the initial BWP in ServingCellConfigCommon, if SIB1 is \\
broadcasted. Otherwise, it is optionally present, Need N.
\end{tabular} \\
\hline
\end{tabular}
- ControlResourceSettd

The ControlResourceSetld IE concerns a short identity, used to identify a control resource set within a serving cell. The ControlResourceSetld \( =0 \) identifies the ControlResourceSet\#0 configured via PBCH (MIB) and in controlResourceSetZero (ServingCellConfigCommon). The ID space is used across the BWPs and MBS CFRs of a Serving Cell.

Contro/ResourceSetid information element
-- ASNISTART
-- TAG-CONTROLRESOURCESETID-START

ControlResourceSetId : :=
ControlResourceSetId-rl6 ::=

ControlResourceSetId-vl610 : :=

INTEGER (O. . maxNrofControlResourceSets-1)
INTEGER (O. . maxNrofControlResourceSets-l-rl6)
INTEGER (maxNrofControlResourceSets. . maxNrofControlResourceSets-1-r16)
-- TAG-CONTROLRESOURCESETID-STOP
-- ASNISTOP
- ControlResourceSetZero

The IE ControlResourceSetZero is used to configure CORESET\#0 of the initial BWP (see TS 38.213 [13], clause 13).
Contro/ResourceSetZero information element
-- ASNISTART
-- TAG-CONTROLRESOURCESETZERO-START

ControlResourceSetZero : :=
INTEGER (0.015)
-- TAG-CONTROLRESOURCESETZERO-STOP
-- ASNISTOP
- CrossCarrierSchedulingConfig

The IE CrossCarrierSchedulingConfig is used to specify the configuration when the cross-carrier scheduling is used in a cell.

ETSI


--- Page 524  ---


3GPP TS 38.331 version 17.0.0 Release 17
523
ETSI TS 138331 V17.0.0 (2022-05)

CrossCarrierSchedulingConfig information element
```
-- ASNISTART
-- TAG-CROSSCARRIERSCHEDULINGCONFIG-START
CrossCarrierSchedulingConfig := SEQUENCE \
    schedulingCellInfo CHOICE [
        own SEQUENCE \ -- Cross carrier scheduling: scheduling cell
            cif-Presence BOOLEAN
        l,
        other SEQUENCE { -- Cross carrier scheduling: scheduled cell
            schedulingCellId ServCellIndex,
            cif-InSchedulingCell INTEGER (1..7)
        }
    },
    ...,
    [ [
    carrierIndicatorSize-r16 SEQUENCE \
        carrierIndicatorSizeDCI-1-2-r16 INTEGER (0..3),
        carrierIndicatorSizeDCI-0-2-r16 INTEGER (0..3)
    }
```

```
    ]],
    [ [
    ccs-BlindDetectionSplit-rl7 ENUMERATED loneSeventh, threeFourteenth, twoSeventh, threeSeventh,
                    oneHalf, fourSeventh, fiveSeventh, sparel} OPTIONAL -- Need R
    ] ]
}
-- TAG-CROSSCARRIERSCHEDULINGCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 525  ---


3GPP TS 38.331 version 17.0.0 Release 17
524
ETSI TS 138331 V17.0.0 (2022-05)

CrossCarrierSchedulingConfig field descriptions
carrierindicatorSizeDCI-0-2, carrierindicatorSizeDCI-1-2
Configures the number of bits for the field of carrier indicator in PDCCH DCI format \( 0 \_2 / 1 \_2 \). The field carrierIndicatorSizeDCI-0-2 refers to DCI format \( 0 \_2 \) and the field carrierindicatorSizeDCI-1-2 refers to DCI format 1_2, respectively (see TS 38.212 [17], clause 7.3 .1 and TS 38.213 [13], clause 10.1).
ccs-BlindDetectionSplit
Indicates the share of blind detection candidates and non-overlapping CCEs for PDCCH monitoring on an SpCell and an SCell when cross-carrier scheduling is configured from the SCell for the SpCell (see TS 38.213 [13], clause 10.1.1). The network only configures this field when it sets the field other for an SpCell, i.e., when it configures crosscarrier scheduling of the SpCell by a PDCCH on an Scell.
cif-Presence
The field is used to indicate whether carrier indicator field is present (value true) or not (value false) in PDCCH DCI formats, see TS 38.213 [13]. If cif-Presence is set to true, the CIF value indicating a grant or assignment for this cell is 0 .
cif-inSchedulingCell
The field indicates the CIF value used in the scheduling cell to indicate a grant or assignment applicable for this cell, see TS 38.213 [13]. If configured for an SpCell, the nonfallback DCI formats on the SpCell include same number of CIF bits as the corresponding non-fallback DCI formats on the scheduling cell, and the CIF bits are considered reserved.
enableDefaultBeamForCCS
This field indicates whether default beam selection for cross-carrier scheduled PDSCH is enabled, see TS 38.214 [19]. If not present, the default beam selection behaviour is not applied, i.e. Rel-15 behaviour is applied. This field can only be configured in the cross-scheduled SCell or SpCell.
other
Parameters for cross-carrier scheduling. If configured for an SpCell, the SpCell can be scheduled by the PDCCH on another SCell as well as by the PDCCH on the SpCell. If configured for an SCell, the SCell is scheduled by a PDDCH on another cell.
own
Parameters for self-scheduling, i.e., a serving cell is scheduled by its own PDCCH.
scheduling Cellid
If configured for a SpCell, this field indicates which SCell, in addition to the SpCell, signals the downlink allocations and uplink grants, if applicable, for the concerned SpCell. If configured for a Scell, this field indicates which cell signals the downlink allocations and uplink grants, if applicable, for the concerned SCell. In case the UE is configured with DC, the scheduling cell is part of the same cell group (i.e. MCG or SCG) as the scheduled cell. In case the UE is configured with two PUCCH groups, the scheduling cell and the scheduled cell are within the same PUCCH group. If drx-ConfigSecondaryGroup is configured in the MAC-CellGroupConfig associated with this serving cell, the scheduling cell and the scheduled cell belong to the same Frequency Range. In addition, the serving cell with an aperiodic CSI trigger and the PUSCH resource scheduled for the report are on the same carrier and serving cell, but the cell for which CSI is reported may belong to the same or a different Frequency Range. The network should not trigger a CSI request for a serving cell in the other Frequency Range when that serving cell is outside Active Time.

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline CIF-PRESENCE & The field is mandatory present if the cif-Presence is set to true. The field is absent otherwise. \\
\hline
\end{tabular}
- CSI-AperiodicTriggerStateList

The CSI-AperiodicTriggerStateList IE is used to configure the UE with a list of aperiodic trigger states. Each codepoint of the DCI field "CSI request" is associated with one trigger state (see TS 38.321 [3], clause 6.1.3.13). Upon reception of the value associated with a trigger state, the UE will perform measurement of CSI-RS, CSI-[M and/or SSB (reference signals) and aperiodic reporting on L1 according to all entries in the associatedReportConfigInfoList for that trigger state.

CSI-AperiodicTriggerStateList information element

-- ASNISTART
ETSI


--- Page 526  ---


3GPP TS 38.331 version 17.0.0 Release 17
525
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-CSI-APERIODICTRIGGERSTATELIST-START
CSI-AperiodicTriggerStateList ::= SEQUENCE (SIZE (1..maxNrOfCSI-AperiodicTriggers)) OF CSI-AperiodicTriggerState
CSI-AperiodicTriggerState ::= SEQUENCE \
```

```
    ...
}
CSI-AssociatedReportConfigInfo ::= SEQUENCE \
    reportConfigId.
    CSI-ReportConfigId,
        CHOICE {
            SEQUENCE \
            INTEGER (1..maxNrofNZP-CSI-RS-ResourceSetsPerConfig),
                        SEQUENCE (SIZE(1..maxNrofAP-CSI-RS-ResourcesPerSet)) OF TCI-StateId
        },
        csi-SSB-ResourceSet INTEGER (l..maxNrofCSI-SSB-ResourceSetsPerConfig)
    },
```

```
    ...;
    [ [
```

```
-- of including it".
    ap-CSI-MultiplexingMode-rl7
    resourcesForChannel2-rl7
        nzp-CSI-RS2-rl7
            resourceSet2-rl7
            qcl-info2-rl7
                        SEQUENCE (SIZE(1..MAXNrofAP-CSI-RS-ResourcesPerSet)) OF TCI-StateId
        },
        csi-SSB-ResourceSet2-rl7 INTEGER (1..maxNrofCSI-SSB-ResourceSetsPerConfigExt)
    }
    csi-SSB-ResourceSetExt INTEGER (1..maxNrofCSI-SSB-ResourceSetsPerConfigExt) -- Neer, R
    ]]
}
-- TAG-CSI-APERIODICTRIGGERSTATELIST-STOP
-- ASNISTOP
```


ETSI


--- Page 527  ---


3GPP TS 38.331 version 17.0.0 Release 17
526
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CSI-AssociatedReportConfiginfo field descriptions \\
\hline \begin{tabular}{l}
ap-CSI-MultiplexingMode \\
Indicates if the behavior of transmitting aperiodic CSI on the first PUSCH repetitions corresponding to two SRS resource sets is enabled or not.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-IM-ResourcesForinterference \\
CSI-IM-ResourceSet for interference measurement. Entry number in csi-IM-ResourceSetList in the CSI-ResourceConfig indicated by csi-IM-ResourcesForInterference in the CSI-ReportConfig indicated by reportConfigid above (value 1 corresponds to the first entry, value 2 to the second entry, and so on). The indicated CSI-IM-ResourceSet should have exactly the same number of resources like the NZP-CSI-RS-ResourceSet indicated in resourceSet within nzp-CSI-RS.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-SSB-ResourceSet, csi-SSB-ResourceSet2 \\
CSI-SSB-ResourceSet for channel measurements. Entry number in csi-SSB-ResourceSetList in the CSI-ResourceConfig indicated by resourcesForChannelMeasurement in the CSI-ReportConfig indicated by reportConfig/d above (value 1 corresponds to the first entry, value 2 to the second entry, and so on).
\end{tabular} \\
\hline \begin{tabular}{l}
nzp-CSI-RS-ResourcesForInterference \\
NZP-CSI-RS-ResourceSet for interference measurement. Entry number in nzp-CSI-RS-ResourceSetList in the CSI-ResourceConfig indicated by nzp-CSI-RS- \\
ResourcesForinterference in the CSI-ReportConfig indicated by reportConfigld above (value 1 corresponds to the first entry, value 2 to the second entry, and so on).
\end{tabular} \\
\hline \begin{tabular}{l}
qcl-info, qcl-info2 \\
List of references to TCI-States for providing the QCL source and QCL type for each NZP-CSI-RS-Resource listed in nzp-CSI-RS-Resources of the NZP-CSI-RS-ResourceSet indicated by resourceSet within nzp-CSI-RS. Each TCI-Stateld refers to the TCI-State which has this value for tci-Stateld and is defined in tci-StatesToAddModList in the PDSCH-Config included in the BWP-Downlink corresponding to the serving cell and to the DL BWP to which the resourcesForChannelMeasurement (in the CSI-ReportConfig indicated by reportConfig/d above) belong to. First entry in qc/-info corresponds to first entry in nzp-CSI-RS-Resources of that NZP-CSI-RS-ResourceSet, second entry in qclinfo corresponds to second entry in nzp-CSI-RS-Resources, and so on (see TS 38.214 [19], clause 5.2.1.5.1). When this field is absent for aperiodic CSIRS, the UE shall use QCL information included in the "indicated" DL only/Joint TCI state as specified in TS 38.214
\end{tabular} \\
\hline \begin{tabular}{l}
reportConfigid \\
The reportConfigld of one of the CSI-ReportConfigToAddMod configured in CSI-MeasConfig
\end{tabular} \\
\hline \begin{tabular}{l}
resourcesForChannel2 \\
Configures reference signals for channel measurement corresponding to the second resource set for L1-RSRP measurement as configured in IE CSI-ResourceConfig when nrofReportedGroups-r17 is configured in IE CSI-ReportConfig. If this is present, network configures csi-SSB-ResourceSetExt instead of csi-SSB-ResourceSet and the UE ignores csi-SSB-ResourceSet in resourcesForChannel, and the resourcesForChannel configures the reference signals for channel measurement corresponding to the first resource set for L1-RSRP measurement (see TS 38.214 [19], clause 5.2.1.4). If unifiedtci-StateType is configured, this field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
resourceSet \\
NZP-CSI-RS-ResourceSet for channel measurements. Entry number in nzp-CSI-RS-ResourceSetList in the CSI-ResourceConfig indicated by resourcesForChannelMeasurement in the CSI-ReportConfig indicated by reportConfig/d above (value 1 corresponds to the first entry, value 2 to the second entry, and so on).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline Aperiodic & The field is mandatory present if the NZP-CSI-RS-Resources in the associated resourceSet have the resourceType aperiodic and unifiedtci-StateType is not configured. The field is optional Need R if the NZP-CSI-RS-Resources in the associated resourceSethave the resourceType aperiodic and unifiedtci-StateType is configured. The field is absent otherwise. \\
\hline CSI-IM-ForInterference & This field is mandatory present if the CSI-ReportConfig identified by reportConfigld is configured with csi-IMResourcesForinterference; otherwise it is absent. \\
\hline NZP-CSI-RS-ForInterference & This field is mandatory present if the CSI-ReportConfig identified by reportConfigld is configured with nzp-CSI-RSResourcesForInterference; otherwise it is absent. \\
\hline
\end{tabular}

ETSI


--- Page 528  ---


3GPP TS 38.331 version 17.0.0 Release 17
527
ETSI TS 138331 V17.0.0 (2022-05)
- CSI-FrequencyOccupation

The IE CSI-FrequencyOccupation is used to configure the frequency domain occupation of a channel state information measurement resource (e.g. NZP-CSI-RS-Resource, CSI-IM-Resource).

CSI-FrequencyOccupation information element
```
-- ASNISTART
-- TAG-CSI-FREQUENCYOCCUPATION-START
CSI-FrequencyOccupation ::= SEQUENCE \
    startingRB INTEGER (O.maxNrofPhysicalResourceBlocks-1),
    nrofRBs INTEGER (24..maxNrofPhysicalResourceBlocksPlusl),
    ...
}
-- TAG-CSI-FREQUENCYOCCUPATION-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CSI-FrequencyOccupation field descriptions \\
\hline \begin{tabular}{l}
nrofRBs \\
Number of PRBs across which this CSI resource spans. Only multiples of 4 are allowed. The smallest configurable number is the minimum of 24 and the width of the associated BWP. If the configured value is larger than the width of the corresponding BWP, the UE shall assume that the actual CSI-RS bandwidth is equal to the width of the BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
startingRB \\
PRB where this CSI resource starts in relation to common resource block \#0 (CRB\#0) on the common resource block grid. Only multiples of 4 are allowed ( \( 0,4, \ldots \) )
\end{tabular} \\
\hline
\end{tabular}
- CSI-IM-Resource

The IE CSI-IM-Resource is used to configure one CSI Interference Management (IM) resource.
CSI-IM-Resource information element
```
-- ASNISTART
-- TAG-CSI-IM-RESOURCE-START
CSI-IM-Resource ::=
    csi-IM-ResourceId
    csi-IM-ResourceElementPattern
        patterno
            subcarrierLocation-p0
            symbolLocation-p0
        },
        patternl
            subcarrierLocation-pl
            symbolLocation-pl
        }
```

```
SEQUENCE \
    CSI-IM-ResourceId,
        CHOICE {
            SEQUENCE {
                ENUMERATED {s0, s2, s4, s6, s8, sl0},
                INTEGER (0..12)
            SEQUENCE \
                ENUMERATED { s0, s4, s8 },
                INTEGER (0..13)
```


ETSI


--- Page 529  ---


3GPP TS 38.331 version 17.0.0 Release 17
528
ETSI TS 138331 V17.0.0 (2022-05)
```
    }
    freqBand CSI-FrequencyOccupation OPTIONAL, -- Need M
```

```
    ...
}
-- TAG-CSI-IM-RESOURCE-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CSI-MM-Resource field descriptions \\
\hline \begin{tabular}{l}
csi-IM-ResourceElementPattern \\
The resource element pattern (Pattern0 (2,2) or Pattern1 (4,1)) with corresponding parameters (see TS 38.214 [19], clause 5.2.2.4)
\end{tabular} \\
\hline \begin{tabular}{l}
freqBand \\
Frequency-occupancy of CSI-IM (see TS 38.214 [19], clause 5.2.2.4)
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityAndOffset \\
Periodicity and slot offset for periodic/semi-persistent CSI-IM. Network always configures the UE with a value for this field for periodic and semi-persistent CSI-IM-Resources (as indicated in CSI-ResourceConfig). A change of configuration between periodic or semi-persistent and aperiodic for a CSI-IM-Resource is not supported without a release and add.
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierLocation-p0 \\
OFDM subcarrier occupancy of the CSI-IM resource for Pattern0 (see TS 38.214 [19], clause 5.2.2.4)
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierLocation-p1 \\
OFDM subcarrier occupancy of the CSI-IM resource for Pattern1 (see TS 38.214 [19], clause 5.2.2.4)
\end{tabular} \\
\hline \begin{tabular}{l}
symbollocation-p0 \\
OFDM symbol location of the CSI-IM resource for Pattern0 (see TS 38.214 [19], clause 5.2.2.4)
\end{tabular} \\
\hline \begin{tabular}{l}
symbolLocation-p1 \\
OFDM symbol location of the CSI-IM resource for Pattern1 (see TS 38.214 [19], clause 5.2.2.4)
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{c|}{ Explanation } \\
\hline PeriodicOrSemiPersistent & \begin{tabular}{l} 
The field is optionally present, Need M, for periodic and semi-persistent CSI-IM-Resources (as indicated in CSI- \\
ResourceConfig). The field is absent otherwise.
\end{tabular} \\
\hline
\end{tabular}
- CSI-IM-Resourceld

The IE CSI-IM-Resourceld is used to identify one CSI-IM-Resource-
CSI-IM-Resourceld information element
-- ASNISTART
-- TAG-CSI-IM-RESOURCEID-START

CSI-IM-ResourceId : : INTEGER (O. maxNrofCSI-IM-Resources-1)
-- TAG-CSI-IM-RESOURCEID-STOP
-- ASNISTOP

ETSI


--- Page 530  ---


3GPP TS 38.331 version 17.0.0 Release 17
529
ETSI TS 138331 V17.0.0 (2022-05)
- CSI-IM-ResourceSet

The IE CSI-IM-ResourceSet is used to configure a set of one or more CSI Interference Management (IM) resources (their IDs) and set-specific parameters.
CSI-IM-ResourceSetinformation element
```
-- ASNISTART
-- TAG-CSI-IM-RESOURCESET-START
CSI-IM-ResourceSet ::=
    csi-IM-ResourceSetId
    csi-IM-Resources
    ...
}
-- TAG-CSI-IM-RESOURCESET-STOP
-- ASNISTOP
```

```
SEQUENCE \
    CSI-IM-ResourceSetId,
    SEQUENCE (SIZE(1..maxNrofCSI-IM-ResourcesPerSet)) OF CSI-IM-ResourceId,
```


\begin{tabular}{|l|}
\hline CSI-IM-ResourceSet field descriptions \\
\hline \begin{tabular}{l}
csi-Mi-Resources \\
CSI-IM-Resources associated with this CSI-IM-ResourceSet (see TS 38.214 [19], clause 5.2).
\end{tabular} \\
\hline
\end{tabular}
- CSI-IM-ResourceSettld

The IE CSI-IM-ResourceSetId is used to identify CSI-IM-ResourceSets.
CSI-IM-ResourceSetid information element
```
-- ASNISTART
-- TAG-CSI-IM-RESOURCESETID-START
CSI-IM-ResourceSetId::= INTEGER (O..maxNrofCSI-IM-ResourceSets-1)
-- TAG-CSI-IM-RESOURCESETID-STOP
-- ASNISTOP
```

- CSI-MeasConfig

The IE CSI-MeasConfig is used to configure CSI-RS (reference signals) belonging to the serving cell in which CSI-MeasConfig is included, channel state information reports to be transmitted on PUCCH on the serving cell in which CSI-MeasConfig is included and channel state information reports on PUSCH triggered by DCI received on the serving cell in which CSI-MeasConfig is included. See also TS 38.214 [19], clause 5.2.

CSI-MeasConfig information element

-- ASNISTART
ETSI


--- Page 531  ---


3GPP TS 38.331 version 17.0.0 Release 17
530
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-CSI-MEASCONFIG-START
CSI-MeasConfig ::= SEQUENCE \
```

```
    nzp-CSI-RS-ResourceSetToAddModList SEQUENCE (SIZE (l..maxNrofNZP-CSI-RS-ResourceSets)) OF NZP-CSI-RS-ResourceSet
            OPTIONAL, -- Need N
    nzp-CSI-RS-ResourceSetToReleaseList SEQUENCE (SIZE (1..maxNrofNZP-CSI-RS-ResourceSets)) OF NZP-CSI-RS-ResourceSetId
            OPTIONAL, -- Need. N
```

```
    csi-ResourceConfigToAddModList SEQUENCE (SIZE (l..maxNrofCSI-ResourceConfigurations)) OF CSI-ResourceConfig
            OPTIONAL, -- Need N
    csi-ResourceConfigToReleaseList SEQUENCE (SIZE (l..MaxNrofCSI-ResourceConfigurations)) OF CSI-ResourceConfigId
    OPTIONAL, -- Need N
    csi-ReportConfigToReleaseList SEQUENCE (SIZE (l..maxNrofCSI-ReportConfigurations)) OF CSI-ReportConfigId
            OPTIONAL, -- Need. N
```

```
    ...;
    [ [
```

```
    ]],
    [ [
```

```
    ]]
}
-- TAG-CSI-MEASCONFIG-STOP
-- ASN1STOP
```

ETSI


--- Page 532  ---


3GPP TS 38.331 version 17.0.0 Release 17
531
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CSI-MeasConfig field descriptions \\
\hline \begin{tabular}{l}
aperiodicTriggerStateList \\
Contains trigger states for dynamically selecting one or more aperiodic and semi-persistent reporting configurations and/or triggering one or more aperiodic CSI-RS resource sets for channel and/or interference measurement (see TS 38.214 [19], clause 5.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
csi-M-ResourceSetToAddModList \\
Pool of CSI-IM-ResourceSet which can be referred to from CSI-ResourceConfig or from MAC CEs.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-IM-ResourceToAddModList \\
Pool of CSI-IM-Resource which can be referred to from CSI-IM-ResourceSet.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-ReportConfigToAddModList \\
Configured CSI report settings as specified in TS 38.214 [19] clause 5.2.1.1.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-ResourceConfigToAddModList \\
Configured CSI resource settings as specified in TS 38.214 [19] clause 5.2.1.2.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-SSB-ResourceSetToAddModList \\
Pool of CSI-SSB-ResourceSet which can be referred to from CSI-ResourceConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
nzp-CSI-RS-ResourceSetToAddModList \\
Pool of NZP-CSI-RS-ResourceSet which can be referred to from CSI-ResourceConfig or from MAC CEs.
\end{tabular} \\
\hline \begin{tabular}{l}
nzp-CSI-RS-ResourceToAddModList \\
Pool of NZP-CSI-RS-Resource which can be referred to from NZP-CSI-RS-ResourceSet.
\end{tabular} \\
\hline \begin{tabular}{l}
reportTriggerSize, reportTriggerSizeDCI-0-2 \\
Size of CSI request field in DCI (bits) (see TS 38.214 [19], clause 5.2.1.5.1). The field reportTriggerSize applies to DCI format 0_1 and the field reportTriggerSizeDCI-0-2 applies to DCI format \( 0 \_2 \) (see TS 38.214 [19], clause 5.2.1.5.1).
\end{tabular} \\
\hline \begin{tabular}{l}
scellActivationRS-ConfigToAddModList \\
Configured RS for efficient SCell activation as specified in TS 38.214 [19] clause x.y.z.
\end{tabular} \\
\hline
\end{tabular}
- CSI-ReportConfig

The IE CSI-ReportConfig is used to configure a periodic or semi-persistent report sent on PUCCH on the cell in which the CSI-ReportConfig is included, or to configure a semipersistent or aperiodic report sent on PUSCH triggered by DCI received on the cell in which the CS/-ReportConfig is included (in this case, the cell on which the report is sent is determined by the received DCI). See TS 38.214 [19], clause 5.2.1.

CSI-ReportConfig information element
-- ASNISTART
-- TAG-CSI-REPORTCONFIG-START

CSI-ReportConfig : :
reportConfigId.
CSI-ReportConfigId,
carrier
ServCellIndex OPTIONAL, -- Need. S
resourcesForChannelMeasurement CSI-ResourceConfigId,
csi-IM-ResourcesForInterference CSI-ResourceConfigId
OPTIONAL, -- Need R
nzp-CSI-RS-ResourcesForInterference
CSI-ResourceConfigId OPTIONAL, -- Need R
reportConfigType
CHOICE [
periodic
SEQUENCE 1
reportSlotConfig
CSI-ReportPeriodicityAndOffset,
pucch-CSI-ResourceList
SEQUENCE (SIZE (1..MAXNrofBWPs)) OF PUCCH-CSI-Resource
\},

ETSI


--- Page 533  ---


3GPP TS 38.331 version 17.0.0 Release 17
532
ETSI TS 138331 V17.0.0 (2022-05)
```
    semiPersistentOnPUCCH
        reportSlotConfig
        pucch-CSI-ResourceList
    },
    semiPersistentOnPUSCH SEQUENCE \
        reportSlotConfig
        reportSlotOffsetList
        p0alpha
    },
    aperiodic
        reportSlotOffsetList
    }
},
reportQuantity CHOICE \
    none
    cri-RI-PMI-CQI
    cri-RI-il
    cri-RI-il-CQI
        pdsch-BundleSizeForCSI
    },
    cri-RI-CQI
    cri-RSRP
    ssb-Index-RSRP
    CRi-RI-LI-PMI-CQI
},
reportFreqConfiguration
    cqi-FormatIndicator
    pmi-FormatIndicator
    csi-ReportingBand.
        subbands 3
        subbands 4
        subbands5
        subbands. 6
        subbands}
        subbands8
        subbands9
        subbandslo
        subbandsll
        subbandsl2
        subbandsl3
        subbandsl4
        subbandsl5
        subbandsl6
        subbandsl7
        subbands 18
        ...,
        subbands19-v1530
    } OPTIONAL -- Need S
}
timeRestrictionForChannelMeasurements ENUMERATED [configured, notConfigured],
timeRestrictionForInterferenceMeasurements ENUMERATED [configured, notConfigured],
codebookConfig
dumny
        CodebookConfig
CodebookConfig [nl,
    ENUMERATED {nl, n2}
```


OPTIONAL, -- Need R
ETSI


--- Page 534  ---


3GPP TS 38.331 version 17.0.0 Release 17
533
ETSI TS 138331 V17.0.0 (2022-05)
```
    groupBasedBeamReporting
        enabled.
        disabled
            nrofReportedRS
        }
    },
    cqi-Table ENUMERATED {tablel, table2, table3, table4-rl7} OPTIONAL, -- Need R
    subbandSize ENUMERATED {valuel, value2},
    non-PMI-PortIndication SEQUENCE (SIZE (l..maxNrofNZP-CSI-RS-ResourcesPerConfig)) OF PortIndexFor8Ranks OPTIONAL, -- Need R
    [ [
    semiPersistentOnPUSCH-vl530 SEQUENCE {
        reportSlotConfig-vl530 ENUMERATED {sl4, sl8, sll6}
    } OPTIONAL -- Need. R
    ]],
    [ [
    semiPersistentOnPUSCH-vl610 SEQUENCE {
        reportSlotOffsetListDCI-0-2-rl6 SEQUENCE (SIZE (l.. maxNrofUL-Allocations-rl6)) OF INTEGER(0..32) OPTIONAL, -- Need R
        reportSlotOffsetListDCI-0-1-rl6 SEQUENCE (SIZE (1.. maxNrofUL-Allocations-rl6)) OF INTEGER(0..32) OPTIONAL -- Need R
    } OPTIONAL, -- Need. R
    aperiodic-vl610 SEQUENCE {
        reportSlotOffsetListDCI-0-2-r16 SEQUENCE (SIZE (1.. maxNrofUL-Allocations-rl6)) OF INTEGER(0..32) OPTIONAL, -- Need R
        reportSlotOffsetListDCI-0-1-rl6 SEQUENCE (SIZE (l.. maxNrofUL-Allocations-rl6)) OF INTEGER(0..32) OPTIONAL -- Need R
    } OPTIONAL, -- Need R
    reportQuantity-rl6 CHOICE {
        cri-SINR-rl6 NULL,
        ssb-Index-SINR-r16 NULL
    }
    codebookConfig-rl6 CodebookConfig-rl6 OPTIONAL -- Need. R
    ]],
    [ [
    cqi-BitsPerSubband-rl7 ENUMERATED [bits4}
    nrofReportedGroups-rl7 ENUMERATED {n1, n2, n3, n4}
    codebookConfig-rl7 CodebookConfig-rl7
    sharedCMR-rl7 ENUMERATED {enable}
    csi-ReportMode-rl7 ENUMERATED {model, mode2}
    numberOfSingleTRP-CSI-Model-rl7 ENUMERATED {n0, nl, n2}
    numberOfPMI-SubbandsPerCQI-Subband-rl7 INTEGER(1..2)
    reportQuantity-rl7 CHOICE |
        cri-RSRP-CapabilityIndex-rl7 NULL,
        ssb-Index-RSRP-CapabilityIndex-rl7 NULL,
        cri-SINR-CapabilityIndex-rl7 NULL,
        ssb-Index-SINR-CapabilityIndex-rl7 NULL
    } OPTIONAL -- Need R
    ]]
}
CSI-ReportPeriodicityAndOffset ::= CHOICE \
    slots4 INTEGER(0..3),
    slots5 INTEGER(0..4),
    slots8 INTEGER(0..7),
    slotsl0 INTEGER(0..9),
    slotsl6 INTEGER(0..15),
    slots20 INTEGER(0..19),
```


ETSI


--- Page 535  ---


3GPP TS 38.331 version 17.0.0 Release 17
534
ETSI TS 138331 V17.0.0 (2022-05)
```
    slots40
    slots80
    slotsl60
    slots320
}
PUCCH-CSI-Resource ::=
    uplinkBandwidthPartId.
    pucch-Resource
}
PortIndexFor8Ranks ::=
    portIndex8
        rankl-8
        rank2-8
        rank3-8
        rank 4-8
        rank5-8
        rank6-8
        rank7-8
        rank8-8
    },
    portIndex4
        rankl-4
        rank2-4
        rank3-4
        rank 4-4
    },
    portIndex2
        rankl-2
        rank2-2
    },
    portIndexl NULL
}
PortIndex8::=
PortIndex4::=
PortIndex2::=
-- TAG-CSI-REPORTCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 536  ---


3GPP TS 38.331 version 17.0.0 Release 17
535
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CSI-ReportConfig field descriptions \\
\hline \begin{tabular}{l}
carrier \\
Indicates in which serving cell the CS/-ResourceConfig indicated below are to be found. If the field is absent, the resources are on the same serving cell as this report configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
codebookConfig \\
Codebook configuration for Type-1 or Type-2 including codebook subset restriction. Network can only configure one of codebookConfig, codebookConfig-r16 or codebookConfig-r17 to a UE.
\end{tabular} \\
\hline \begin{tabular}{l}
cqi-BitsPerSubband \\
This field can only be present if cqi-Formatindicator is set to subbandCQI. If the field is configured with bits4, the UE uses 4-bit sub-band CQI. If the field is not present and cqiFormatindicator is set to subbandCQI, the UE uses 2-bit sub-band differential CQI.
\end{tabular} \\
\hline \begin{tabular}{l}
cqi-Formatindicator \\
Indicates whether the UE shall report a single (wideband) or multiple (subband) CQI (see TS 38.214 [19], clause 5.2.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
cqi-Table \\
Which CQI table to use for CQI calculation (see TS 38.214 [19], clause 5.2.2.1). For a RedCap UE, CQI table 2 is only supported if the UE indicates support of 256QAM for PUSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-IM-ResourcesForinterference \\
CSI IM resources for interference measurement. csi-ResourceConfigid of a CSI-ResourceConfig included in the configuration of the serving cell indicated with the field "carrier" above. The CSI-ResourceConfig indicated here contains only CSI-IM resources. The bwp-Id in that CSI-ResourceConfig is the same value as the bwp-Id in the CSI- \\
ResourceConfig indicated by resourcesForChannelMeasurement.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-ReportingBand \\
Indicates a contiguous or non-contiguous subset of subbands in the bandwidth part which CSI shall be reported for. Each bit in the bit-string represents one subband. The right-most bit in the bit string represents the lowest subband in the BWP. The choice determines the number of subbands (subbands3 for 3 subbands, subbands4 for 4 subbands, and so on) (see TS 38.214 [19], clause 5.2.1.4). This field is absent if there are less than 24 PRBs (no sub band) and present otherwise (see TS 38.214 [19], clause 5.2.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
csi-ReportMode \\
Configures the CSI report modes Mode1 or Mode 2 (see TS 38.214 [19], clause 5.2.1.4.2)
\end{tabular} \\
\hline \begin{tabular}{l}
dummy \\
This field is not used in the specification. If received it shall be ignored by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
groupBasedBeamReporting \\
Turning on/off group beam based reporting (see TS 38.214 [19], clause 5.2.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
non-PMI-Portindication \\
Port indication for RI/CQI calculation. For each CSI-RS resource in the linked ResourceConfig for channel measurement, a port indication for each rank R, indicating which R ports to use. Applicable only for non-PMI feedback (see TS 38.214 [19], clause 5.2.1.4.2). \\
The first entry in non-PM/-Portindication corresponds to the NZP-CSI-RS-Resource indicated by the first entry in nzp-CSI-RS-Resources in the NZP-CSI-RS-ResourceSet indicated in the first entry of nzp-CSI-RS-ResourceSetList of the CSI-ResourceConfig whose CSI-ResourceConfigld is indicated in a CSI-MeasId together with the above CSIReportConfig/d; the second entry in non-PMI-PortIndication corresponds to the NZP-CSI-RS-Resource indicated by the second entry in nzp-CSI-RS-Resources in the NZP-CSI-RS-ResourceSet indicated in the first entry of nzp-CSI-RS-ResourceSetList of the same CSI-ResourceConfig, and so on until the NZP-CSI-RS-Resource indicated by the last entry in nzp-CSI-RS-Resources in the in the NZP-CSI-RS-ResourceSet indicated in the first entry of nzp-CSI-RS-ResourceSetList of the same CSI-ResourceConfig. Then the next entry corresponds to the NZP-CSI-RS-Resource indicated by the first entry in nzp-CSI-RS-Resources in the NZP-CSI-RS-ResourceSet indicated in the second entry of nzp-CSI-RS-ResourceSetList of the same CSI-ResourceConfig and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfPMI-SubbandsPerCQI-Subband \\
Field indicates how PMI subbands are defined per CQI subband, as defined in TS 38.214 [19], clause 5.2.2.2.7.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofReportedGroups \\
Presence if this field indicates that groupBasedBeamReportingR17 is enabled and the value configures the number of reported beam groups per CSI-report.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 537  ---


3GPP TS 38.331 version 17.0.0 Release 17
536
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
nrofReportedRS \\
The number (N) of measured RS resources to be reported per report setting in a non-group-based report. N <= N_max, where N_max is either 2 or 4 depending on UE capability. \\
(see TS 38.214 [19], clause 5.2.1.4) When the field is absent the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfSingleTRP-CSI-Mode1 \\
Configures the number of reported X CSIs when csi-ReportMode is set to 'Mode 1' as described in TS 38.214 [19], clause 5.2.1.4.2. The field is present only if csi-ReportMode configures Mode 1.
\end{tabular} \\
\hline \begin{tabular}{l}
nzp-CSI-RS-ResourcesForInterference \\
NZP CSI RS resources for interference measurement. csi-ResourceConfig/d of a CSI-ResourceConfig included in the configuration of the serving cell indicated with the field "carrier" above. The CS/-ResourceConfig indicated here contains only NZP-CSI-RS resources. The bwp-ld in that CSI-ResourceConfig is the same value as the bwp-ld in the CSI-ResourceConfig indicated by resourcesForChannelMeasurement.
\end{tabular} \\
\hline \begin{tabular}{l}
p0alpha \\
Index of the p0-alpha set determining the power control for this CSI report transmission (see TS 38.214 [19], clause 6.2.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-BundieSizeForCSI \\
PRB bundling size to assume for CQI calculation when reportQuantity is CRI/RI/i1/CQI. If the field is absent, the UE assumes that no PRB bundling is applied (see TS 38.214 [19], clause 5.2.1.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pmi-Formatindicator \\
Indicates whether the UE shall report a single (wideband) or multiple (subband) PMI. (see TS 38.214 [19], clause 5.2.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-CSI-ResourceList \\
Indicates which PUCCH resource to use for reporting on PUCCH.
\end{tabular} \\
\hline \begin{tabular}{l}
reportConfigType \\
Time domain behavior of reporting configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
reportFreqConfiguration \\
Reporting configuration in the frequency domain. (see TS 38.214 [19], clause 5.2.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantity \\
The CSI related quantities to report. see TS 38.214 [19], clause 5.2.1. If the field reportQuantity-r16 is present, UE shall ignore reportQuantity (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
reportSlotConfig \\
Periodicity and slot offset (see TS 38.214 [19], clause 5.2.1.4). If the field reportSlotConfig-v1530 is present, the UE shall ignore the value provided in reportSlotConfig (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
reportSlotOffsetList, reportSlotOffsetListDCI-0-1, reportSIotOffsetListDCI-0-2 \\
Timing offset Y for semi persistent reporting using PUSCH. This field lists the allowed offset values. This list must have the same number of entries as the puschTimeDomainAllocationList in PUSCH-Config. A particular value is indicated in DCI. The network indicates in the DCI field of the UL grant, which of the configured report slot offsets the UE shall apply. The DCI value 0 corresponds to the first report slot offset in this list, the DCI value 1 corresponds to the second report slot offset in this list, and so on. The first report is transmitted in slot \( \mathrm{n}+\mathrm{Y} \), second report in \( \mathrm{n}+\mathrm{Y}+\mathrm{P} \), where P is the configured periodicity. \\
Timing offset Y for aperiodic reporting using PUSCH. This field lists the allowed offset values. This list must have the same number of entries as the puschTimeDomainAllocationList in PUSCH-Config. A particular value is indicated in DCI. The network indicates in the DCI field of the UL grant, which of the configured report slot offsets the UE shall apply. The DCI value 0 corresponds to the first report slot offset in this list, the DCI value 1 corresponds to the second report slot offset in this list, and so on (see TS 38.214 [19], clause 6.1.2.1). \\
The field reportSiotOffsetListDCI-0-1 applies to DCI format 0 1 and the field reportSlotOffsetListDCI-0-2 applies to DCI format 0 2 (see TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
resourcesForChanneIMeasurement \\
Resources for channel measurement. csi-ResourceConfig/d of a CSS-ResourceConfig included in the configuration of the serving cell indicated with the field "carrier" above. The CSI-ResourceConfig indicated here contains only NZP-CSI-RS resources and/or SSB resources. This CSI-ReportConfig is associated with the DL BWP indicated by bwpId in that CSI-ResourceConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
sharedCMR \\
Enables sharing of channel measurement resources between different CSI measurement hypotheses when (1) csi-ReportMode is set to 'Mode1' and numberOfSingleTRP-CSIMode1 is set to 1 or 2; or (2) csi-ReportMode is set to 'Mode2' (see TS 38.214 [19], clause 5.2.1.4.2).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 538  ---


3GPP TS 38.331 version 17.0.0 Release 17
537
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
subbandSize \\
Indicates one out of two possible BWP-dependent values for the subband size as indicated in TS 38.214 [19], table 5.2.1.4-2. If csi-ReportingBand is absent, the UE shall ignore this field.
\end{tabular} \\
\hline \begin{tabular}{l}
timeRestrictionForChannelMeasurements \\
Time domain measurement restriction for the channel (signal) measurements (see TS 38.214 [19], clause 5.2.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
timeRestrictionForinterferenceMeasurements \\
Time domain measurement restriction for interference measurements (see TS 38.214 [19], clause 5.2.1.1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PortindexFor8Ranks field descriptions \\
\hline \begin{tabular}{l}
portindex 8 \\
Port-Index configuration for up to rank 8. If present, the network configures port indexes for at least one of the ranks.
\end{tabular} \\
\hline \begin{tabular}{l}
portindex4 \\
Port-Index configuration for up to rank 4. If present, the network configures port indexes for at least one of the ranks.
\end{tabular} \\
\hline \begin{tabular}{l}
portindex 2 \\
Port-Index configuration for up to rank 2. If present, the network configures port indexes for at least one of the ranks.
\end{tabular} \\
\hline \begin{tabular}{l}
portindex1 \\
Port-Index configuration for rank 1.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PUCCH-CSI-Resource field descriptions \\
\hline \begin{tabular}{l}
pucch-Resource \\
PUCCH resource for the associated uplink BWP. Only PUCCH-Resource of format 2, 3 and 4 is supported. The actual PUCCH-Resource is configured in PUCCH-Config and referred to by its ID. When two PUCCH-Config are configured within PUCCH-ConfigurationList, PUCCH-Resourceld in a PUCCH-CSI-Resource refers to a PUCCH-Resource in the PUCCH-Config used for HARQ-ACK with low priority.
\end{tabular} \\
\hline
\end{tabular}
- CSI-ReportConfigid

The IE CSI-ReportConfigId is used to identify one CSI-ReportConfig-
CSI-ReportConfigid information element
-- ASNISTART
-- TAG-CSI-REPORTCONEIGID-START
CSI-ReportConfigId : : INTEGER (O. maxNrofCSI-ReportConfigurations-1)
-- TAG-CSI-REPORTCONFIGID-STOP
-- ASNISTOP
- CSI-ResourceConfig

The IE CSI-ResourceConfig defines a group of one or more NZP-CSI-RS-ResourceSet, CSI-IM-ResourceSet and/or CSI-SSB-ResourceSet.

ETSI


--- Page 539  ---


3GPP TS 38.331 version 17.0.0 Release 17
538
ETSI TS 138331 V17.0.0 (2022-05)

CSI-ResourceConfig information element
```
-- ASNISTART
-- TAG-CSI-RESOURCECONFIG-START
CSI-ResourceConfig ::= SEQUENCE \
    csi-ResourceConfigId CSI-ResourceConfigId,
    csi-RS-ResourceSetList CHOICE {
        nzp-CSI-RS-SSB SEQUENCE {
```

```
                            OPTIONAL, -- Need R
```

```
        },
        csi-IM-ResourceSetList SEQUENCE (SIZE (l..maxNrofCSI-IM-ResourceSetsPerConfig)) OF CSI-IM-ResourceSetId
    },
    bwp-Id BWP-Id,
    resourceType ENUMERATED [ aperiodic, semiPersistent, periodic },
    ...;
    [ [
    csi-SSB-ResourceSetListExt-rl7 CSI-SSB-ResourceSetId
    ]]
}
```

-- TAG-CSI-RESOURCECONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline CSI-ResourceConfig field descriptions \\
\hline \begin{tabular}{l}
bwp-ld \\
The DL BWP which the CSI-RS associated with this CSI-ResourceConfig are located in (see TS 38.214 [19], clause 5.2.1.2.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-M-ResourceSetList \\
List of references to CSI-IM resources used for CSI measurement and reporting in a CSI-RS resource set. Contains up to maxNrofCSI-M-ResourceSetsPerConfig resource sets if resourceType is 'aperiodic' and 1 otherwise (see TS 38.214 [19], clause 5.2.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
csi-ResourceConfigid \\
Used in CS/-ReportConfig to refer to an instance of CSI-ResourceConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-SSB-ResourceSetList \\
List of references to SSB resources used for CSI measurement and reporting in a CSI-RS resource set (see TS 38.214 [19], clause 5.2.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
csi-SSB-ResourceSetListExt \\
Adds an element to csi-SSB-ResourceSetList when nrofReportedGroups-r17 is configured in IE CSI-ReportConfig (see TS 38.214 [19], clause 5.2.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
nzp-CSI-RS-ResourceSetList \\
List of references to NZP CSI-RS resources used for beam measurement and reporting in a CSI-RS resource set. Contains up to maxNrofNZP-CSI-RS- \\
ResourceSetsPerConfig resource sets if resourceType is 'aperiodic' and 1 otherwise when nrofReportedGroups-r17 is not configured in IE CS/-ReportConfig. If nrofReportedGroups-r17 is configured and resourceType is set to 'periodic' or 'semipersistent', then the network configures 2 resource sets (see TS 38.214 [19], clause 5.2.1.2 and 5.2.1.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceType \\
Time domain behavior of resource configuration (see TS 38.214 [19], clause 5.2.1.2). It does not apply to resources provided in the csi-SSB-ResourceSetList.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 540  ---


3GPP TS 38.331 version 17.0.0 Release 17
539
ETSI TS 138331 V17.0.0 (2022-05)

CSI-ResourceConfigid
The IE CSI-ResourceConfigld is used to identify a CSI-ResourceConfig.
CSI-ResourceConfigid information element
```
-- ASNISTART
-- TAG-CSI-RESOURCECONFIGID-START
CSI-ResourceConfigId := INTEGER (O..maxNrofCSI-ResourceConfigurations-1)
-- TAG-CSI-RESOURCECONFIGID-STOP
-- ASNISTOP
```

- CSI-ResourcePeriodicityAndOffset

The IE CSI-ResourcePeriodicityAndOffset is used to configure a periodicity and a corresponding offset for periodic and semi-persistent CSI resources, and for periodic and semi-persistent reporting on PUCCH. both, the periodicity and the offset are given in number of slots. The periodicity value slots 4 corresponds to 4 slots, value slots 5 corresponds to 5 slots, and so on.

CSI-ResourcePeriodicityAndOffset information element
```
-- ASNISTART
-- TAG-CSI-RESOURCEPERIODICITYANDOFFSET-START
CSI-ResourcePeriodicityAndOffset ::= CHOICE [
    slots4
    INTEGER (0..3),
    \textbf{tef{O. 4),
    INTEGER (0..7),
    sl, INTEGER (0..9),
    INTEGER (0..15),
    slot{NTEGER (0..19),
    slots40 TNTEGER (0..31),
    slots64 INTEGER (0..63),
    slots80 INTEGER (0..79),
    slotsl60 INTEGER (0..159),
    slots320 INTEGER (0..319),
    slots640 INTEGER (0..639)
}
-- TAG-CSI-RESOURCEPERIODICITYANDOFFSET-STOP
-- ASNISTOP
```


ETSI


--- Page 541  ---


3GPP TS 38.331 version 17.0.0 Release 17
540
ETSI TS 138331 V17.0.0 (2022-05)

CSI-RS-ResourceConfigMobility
The IE CSI-RS-ResourceConfigMobility is used to configure CSI-RS based RRM measurements.
CSI-RS-ResourceConfigMobility information element
```
-- ASNISTART
-- TAG-CSI-RS-RESOURCECONFIGMOBILITY-START
CSI-RS-ResourceConfigMobility := SEQUENCE {
    subcarrierSpacing
    csi-RS-CellList-Mobility
    ...;
    [ [
```

```
    ]]
}
CSI-RS-CellMobility ::= SEQUENCE \
    cellId.
    csi-rs-MeasurementBW
        nrofpRBs
        startPRB
    },
    density
    csi-rs-ResourceList-Mobility
}
CSI-RS-Resource-Mobility ::= SEQUENCE {
    csi-RS-Index
    slotConfig
        ms4
        ms5
        msl0
        ms20
        ms40
    },
    associatedSSB SEQUENCE {
        ssb-Index
        SSB-Index,
    BOOLEAN
    frequencyDomainAllocation
        rowl
        row2
    },
    firstOFDMSymbolInTimeDomain
    sequenceGenerationConfig
    ...
}
CSI-RS-Index ::= INTEGER (O.maxNrofCSI-RS-ResourcesRRM-1)
```


ETSI


--- Page 542  ---


3GPP TS 38.331 version 17.0.0 Release 17
541
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-CSI-RS-RESOURCECONFIGMOBILITY-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline CSI-RS-CellMobility field descriptions \\
\hline \begin{tabular}{l}
csi-rs-ResourceList-Mobility \\
List of CSI-RS resources for mobility. The maximum number of CSI-RS resources that can be configured per measObjectNR depends on the configuration of associatedSSB and the support of increasedNumberofCSIRSPerMO capability (see TS 38.214 [19], clause 5.1.6.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
density \\
Frequency domain density for the 1-port CSI-RS for L3 mobility. See TS 38.211 [16], clause 7.4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofPRBs \\
Allowed size of the measurement BW in PRBs. See TS 38.211 [16], clause 7.4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
startPRB \\
Starting PRB index of the measurement bandwidth. See TS 38.211 [16], clause 7.4.1.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline CSI-RS-ResourceConfigMobility field descriptions \\
\hline \begin{tabular}{l}
csi-RS-CellList-Mobility \\
List of cells for CSI-RS based RRM measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
refServCellindex \\
Indicates the serving cell providing the timing reference for CSI-RS resources without associatedSSB. The field may be present only if there is at least one CSI-RS resource configured without associatedSSB. If this field is absent, the UE shall use the timing of the PCell for measurements on the CSI-RS resources without associatedSSB. The CSIRS resources and the serving cell indicated by refServCellindex for timing reference should be located in the same band.
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierSpacing \\
Subcarrier spacing of CSI-RS. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15,30 , or 60 kHz \\
FR2-1: 120 or 240 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 543  ---


3GPP TS 38.331 version 17.0.0 Release 17
542
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CSI-RS-Resource-Mobility field descriptions \\
\hline \begin{tabular}{l}
associatedSSB \\
If this field is present, the UE may base the timing of the CSI-RS resource indicated in CSI-RS-Resource-Mobility on the timing of the cell indicated by the cellld in the CSI-RSCellMobility. In this case, the UE is not required to monitor that CSI-RS resource if the UE cannot detect the SS/PBCH block indicated by this associatedSSB and cellid. If this field is absent, the UE shall base the timing of the CSI-RS resource indicated in CSI-RS-Resource-Mobility on the timing of the serving cell indicated by refServCellindex. In this case, the UE is required to measure the CSI-RS resource even if SS/PBCH block(s) with cellld in the CS/-RS-CellMobility are not detected. \\
CSI-RS resources with and without associatedSSB may be configured in accordance with the rules in TS 38.214 [19], clause 5.1.6.1.3.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-RS-Index \\
CSI-RS resource index associated to the CSI-RS resource to be measured (and used for reporting).
\end{tabular} \\
\hline \begin{tabular}{l}
firstOFDMSymbolinTimeDomain \\
Time domain allocation within a physical resource block. The field indicates the first OFDM symbol in the PRB used for CSI-RS, see TS 38.211 [16], clause 7.4.1.5.3. Value 2 is supported only when dmrs-TypeA-Position equals pos3.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyDomainAllocation \\
Frequency domain allocation within a physical resource block in accordance with TS 38.211 [16], clause 7.4.1.5.3 including table 7.4.1.5.2-1. The number of bits that may be set to one depend on the chosen row in that table.
\end{tabular} \\
\hline \begin{tabular}{l}
isQuasiColocated \\
Indicates that the CSI-RS resource is quasi co-located with the associated SS/PBCH block, see TS 38.214 [19], clause 5.1.6.1.3.
\end{tabular} \\
\hline \begin{tabular}{l}
sequenceGenerationConfig \\
Scrambling ID for CSI-RS (see TS 38.211 [16], clause 7.4.1.5.2).
\end{tabular} \\
\hline \begin{tabular}{l}
slotConfig \\
Indicates the CSI-RS periodicity (in milliseconds) and for each periodicity the offset (in number of slots). When subcarrierSpacing is set to \( k H z 15 \), the maximum offset values for periodicities \( \mathrm{ms} 4 / \mathrm{ms} 5 / \mathrm{ms} 10 / \mathrm{ms} 20 / \mathrm{ms} 40 \) are \( 3 / 4 / 9 / 19 / 39 \) slots. When subcarrierSpacing is set to kHz 30 , the maximum offset values for periodicities \( \mathrm{ms} 4 / \mathrm{ms} 5 / \mathrm{ms} 10 / \mathrm{ms} 20 / \mathrm{ms} 40 \) are \( 7 / 9 / 19 / 39 / 79 \) slots. When subcarrierSpacing is set to kHz 60 , the maximum offset values for periodicities \( \mathrm{ms} 4 / \mathrm{ms} 5 / \mathrm{ms} 10 / \mathrm{ms} 20 / \mathrm{ms} 40 \) are 15/19/39/79/159 slots. When subcarrierSpacing is set kHz120, the maximum offset values for periodicities ms4/ms5/ms10/ms20/ms40 are 31/39/79/159/319 slots.
\end{tabular} \\
\hline
\end{tabular}
- CSI-RS-ResourceMapping

The IE CSI-RS-ResourceMapping is used to configure the resource element mapping of a CSI-RS resource in time- and frequency domain.
CSI-RS-ResourceMapping information element
```
-- ASNISTART
-- TAG-CSI-RS-RESOURCEMAPPING-START
CSI-RS-ResourceMapping ::=
    frequencyDomainAllocation
        rowl
        row2
        row4
        other
    },
    nrofPorts
    firstOFDMSymbolInTimeDomain
    firstOFDMSymbolInTimeDomain2
    cdm-Type
    density
        dot5
SEQUENCE \
    CHOICE \
        BIT STRING (SIZE (4)),
        BIT STRING (SIZE (12)),
        BIT STRING (SIZE (3)),
        BIT STRING (SIZE (6))
    ENUMERATED {pl,p2,p4,p8,p12,p16,p24,p32},
    INTEGER (0..13),
    INTEGER (2..12) OPTIONAL, -- Need. R
    ENUMERATED {noCDM, fd-CDM2, cdm4-FD2-TD2, cdm8-FD2-TD4},
    CHOICE {
        ENUMERATED {evenPRBs, oddPRBs},
```


ETSI


--- Page 544  ---


3GPP TS 38.331 version 17.0.0 Release 17
543
ETSI TS 138331 V17.0.0 (2022-05)
```
        one NULL,
        three NULL,
        spare NULL
    },
    freqBand CSI-FrequencyOccupation,
    ...
}
-- TAG-CSI-RS-RESOURCEMAPPING-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CSI-RS-ResourceMapping field descriptions \\
\hline \begin{tabular}{l}
cdm-Type \\
CDM type (see TS 38.214 [19], clause 5.2.2.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
density \\
Density of CSI-RS resource measured in RE/port/PRB (see TS 38.211 [16], clause 7.4.1.5.3). \\
Values 0.5 (dot5), 1 (one) and 3 (three) are allowed for \( \mathrm{X}=1 \), values 0.5 (dot5) and 1 (one) are allowed for \( \mathrm{X}=2,16,24 \) and 32 , value 1 (one) is allowed for \( \mathrm{X}=4,8,12 \). \\
For density = 1/2, includes 1-bit indication for RB level comb offset indicating whether odd or even RBs are occupied by CSI-RS.
\end{tabular} \\
\hline \begin{tabular}{l}
firstOFDMSymbolln TimeDomain2 \\
Time domain allocation within a physical resource block. See TS 38.211 [16], clause 7.4.1.5.3.
\end{tabular} \\
\hline \begin{tabular}{l}
firstOFDMSymbolinTimeDomain \\
Time domain allocation within a physical resource block. The field indicates the first OFDM symbol in the PRB used for CSI-RS. See TS 38.211 [16], clause 7.4.1.5.3. Value 2 is supported only when dmrs-TypeA-Position equals pos3.
\end{tabular} \\
\hline \begin{tabular}{l}
freqBand \\
Wideband or partial band CSI-RS, (see TS 38.214 [19], clause 5.2.2.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyDomainAllocation \\
Frequency domain allocation within a physical resource block in accordance with TS 38.211 [16], clause 7.4.1.5.3. The applicable row number in table 7.4.1.5.3-1 is determined by the frequencyDomainAllocation for rows 1, 2 and 4, and for other rows by matching the values in the column Ports, Density and CDMtype in table 7.4.1.5.3-1 with the values of nrofPorts, cdim-Type and density below and, when more than one row has the 3 values matching, by selecting the row where the column ( k bar, I bar) in table 7.4.1.5.3-1 has indexes for k ranging from 0 to \( 2^{*} \mathrm{n}-1 \) where n is the number of bits set to 1 in frequencyDomainAllocation.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofPorts \\
Number of ports (see TS 38.214 [19], clause 5.2.2.3.1).
\end{tabular} \\
\hline
\end{tabular}
- CSI-SemiPersistentOnPUSCH-TriggerStateList

The CSI-SemiPersistentOnPUSCH-TriggerStateList IE is used to configure the UE with list of trigger states for semi-persistent reporting of channel state information on L1. See also TS 38.214 [19], clause 5.2.

CSI-SemiPersistentOnPUSCH-TriggerStateList information element
```
-- ASNISTART
-- TAG-CSI-SEMIPERSISTENTONPUSCHTRIGGERSTATELIST-START
```

```
CSI-SemiPersistentOnPUSCH-TriggerState ::= SEQUENCE |
```


ETSI


--- Page 545  ---


3GPP TS 38.331 version 17.0.0 Release 17
544
ETSI TS 138331 V17.0.0 (2022-05)
```
    associatedReportConfigInfo CSI-ReportConfigId,
    ...;
    [ [
```

```
    ] ]
}
```

-- TAG-CSI-SEMIPERSISTENTONPUSCHTRIGGERSTATELIST-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline CSI-SemiPersistentOnPUSCH-TriggerStateList field descriptions \\
\hline \begin{tabular}{l}
sp-CSI-MultiplexingMode \\
Indicates if the behavior of transmitting SP-CSI on the first PUSCH repetitions coresponding to two SRS resource sets is enabled or not.
\end{tabular} \\
\hline
\end{tabular}
- CSI-SSB-ResourceSet

The IE CSI-SSB-ResourceSet is used to configure one SS/PBCH block resource set which refers to SS/PBCH as indicated in ServingCellConfigCommon.
CSI-SSB-ResourceSet information element
```
-- ASNISTART
-- TAG-CSI-SSB-RESOURCESET-START
CSI-SSB-ResourceSet ::=
    csi-SSB-ResourceSetId
    csi-SSB-ResourceList
    ...;
    [ [
    additionalPCIList-rl7
    ] ]
}
-- TAG-CSI-SSB-RESOURCESET-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CSI-SSB-ResourceSet field descriptions \\
\hline \begin{tabular}{l}
additionalPCIList \\
Indicates the physical cell IDs (PCI) of the SSBs in the csi-SSB-ResourceList. If present, the list has the same number of entries as csi-SSB-ResourceList.
\end{tabular} \\
\hline
\end{tabular}
- CSI-SSB-ResourceSettd

The IE CSI-SSB-ResourceSetld is used to identify one SS/PBCH block resource set.

ETSI


--- Page 546  ---


3GPP TS 38.331 version 17.0.0 Release 17
545
ETSI TS 138331 V17.0.0 (2022-05)

CSI-SSB-Resource/d information element
```
-- ASNISTART
-- TAG-CSI-SSB-RESOURCESETID-START
CSI-SSB-ResourceSetId := INTEGER (O.maxNrofCSI-SSB-ResourceSets-l)
-- TAG-CSI-SSB-RESOURCESETID-STOP
-- ASNISTOP
```

- DedicatedNAS-Message

The IE DedicatedNAS-Message is used to transfer UE specific NAS layer information between the 5GC CN and the UE. The RRC layer is transparent for this information.
DedicatedNAS-Message information element
```
-- ASNISTART
-- TAG-DEDICATED-NAS-MESSAGE-START
DedicatedNAS-Message ::= OCTET STRING
-- TAG-DEDICATED-NAS-MESSAGE-STOP
-- ASNISTOP
```

- DL-PRS-ProcessingWindowPreConfig

The IE DL-PRS-ProcessingWIndowPreConfig specifies measurement window where a UE may receive data (PDCCH/PDSCH) and CSI-RS while also perform DL-PRS measurements in the configured window.

DL-PRS-ProcessingWindowPreConfig information element
```
-- ASNISTART
-- TAG-DL-PRS-PROCESSINGWINDOWPRECONFIG-START
DL-PRS-ProcessingWindowPreConfig-rl7 ::= SEQUENCE {
    dl-PRS-ProcessingWindowID-rl7
    startingSystemFrameNumber-rl7
    startingSubframe-rl7
    startingSlotSCS-rl7
        scsl 5kHz-rl7
        scs 30KHz-rll
        scs 60KHz-rl7
        scsl20KHz-rll
    },
    length-rl7
    periodicity-rll
    priority-rl7 ENUMERATED {stl, st2, st3},
```


ETSI


--- Page 547  ---


3GPP TS 38.331 version 17.0.0 Release 17
546
ETSI TS 138331 V17.0.0 (2022-05)
```
    cellID-rl7 PhysCellId
}
-- Editor Notes: length and periodicty ranges should be discussed by RAN2.
```

```
-- multiple capability.
-- TAG-DL-PRS-PROCESSINGWINDOWPRECONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline DL-PRS-ProcessingWindowPreConfig field descriptions \\
\hline \begin{tabular}{l}
celliD \\
Indicates the physciall cell ID where the DL-PRS processing window configuration is valid.
\end{tabular} \\
\hline \begin{tabular}{l}
di-PRS-ProcessingWindowID \\
Indicates the pre-configured ID for DL-PRS processing window configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
length \\
Indicates the length of DL-PRS_processing window.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicity \\
Indicates the periodicty of the DL-PRS_processing window.
\end{tabular} \\
\hline \begin{tabular}{l}
priority \\
Indicates the priority between PDCCH/PDSCH/CSI-RS and PRS. Value op1-st1 means option 1 state 1, opt1-st2 means option 1, state 2 and so on. The mapping of the values are shown in FFS (TS38.214)
\end{tabular} \\
\hline \begin{tabular}{l}
startingSlotSCS \\
Indicates the slot number where the DL-PRS_processing window starts.
\end{tabular} \\
\hline \begin{tabular}{l}
startingSubframe \\
Indicates the system subframe number where the DL-PRS_processing window starts.
\end{tabular} \\
\hline \begin{tabular}{l}
startingSystemFrameNumber \\
Indicates the system frame number where the DL-PRS_processing window starts.
\end{tabular} \\
\hline
\end{tabular}
- DMRS-BundlingPUCCH-Config

The IE DMRS-BundlingPUCCH-Config-r17 is used to configure DMRS bundling for PUCCH.
DMRS-BundlingPUCCH-Config information element
```
-- ASNISTART
-- TAG-DMRS-BUNDLINGPUCCH-CONFIG-START
DMRS-BundlingPUCCH-Config-rl7 ::=
    pucch-DMRS-Bundling-rl7
    pucch-TimeDomainWindowLength-rl7
    pucch-WindowRestart-rl7
    pucch-FrequencyHoppingInterval-rl7
    ...
}
-- TAG-DMRS-BUNDLINGPUCCH-CONFIG-STOP
}
        SHAPSO-DMRS-BUNDLINGPUCCH-CONFIG-STOP
```

```
SEQUENCE \
    ENUMERATED {enabled}
    INTEGER (2..8)
    ENUMERATED {enabled}
    ENUMERATED {s2, s4, s5, slO}
```


\begin{tabular}{ll} 
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S
\end{tabular}

ETSI


--- Page 548  ---


3GPP TS 38.331 version 17.0.0 Release 17
547
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

\begin{tabular}{|l|}
\hline DMRS-BundlingPUCCH-Config field descriptions \\
\hline \begin{tabular}{l}
pucch-DMRS-Bundling \\
Indicates whether DMRS bundling and time domain window for PUCCH are jointly enabled. If the field is absent, DMRS bundling and time domain window for PUCCH are jointly disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-FrequencyHoppinginterval \\
Configures the number of consecutive slots for the UE to perform inter-slot frequency hopping with inter-slot bundling for PUCCH. When both inter-frequency hopping and DMRS bundling are enabled for PUCCH repetitions, the UE is expected to be configured with at least one pucch-FrequencyHopping/nterval-r17 and pucch- \\
TimeDomainWindowLength-r17. When DMRS bundling for PUCCH is enabled by pucch-DMRS-Bundling-r17, PUCCH frequency hopping interval is only determined by the configuration of PUCCH hopping interval if PUCCH hopping interval is configured. If the field is absent, the number of consecutive slots for the UE to perform inter-slot PUCCH frequency hopping is indicated by pucch-TimeDomainWindowLength-r17.
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-TimeDomainWindowLength \\
Configures the length of a nominal time domain window in slots for DMRS bundling for PUCCH. The value shall not exceed the maximum duration defined in TS 38.101-1 [15] and TS 38.101-2 [39]. If this field is absent, the UE shall apply the default value that is the minimum value in the unit of consecutive slots of the time duration for the transmission of all PUCCH repetitions and the maximum duration defined in TS 38.101-1 [15] and TS 38.101-2 [39].
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-WindowRestart \\
Indicates whether UE bundles PUCCH DMRS remaining in a nominal time domain window after event(s) triggered by DCI or MAC CE that violate power consistency and phase continuity requirements is enabled. If the field is absent, PUCCH DMRS bundling remaining in a bundling window after event(s) triggered by DCI or MAC CE that violate power consistency and phase continuity requirements is disabled. \\
Note: Events, which are triggered by DCI or MAC CE, but regarded as semi-static events, e.g. frequency hopping, UL beam switching for multi-TRP operation, or other if defined, are excluded.
\end{tabular} \\
\hline
\end{tabular}
- DMRS-BundlingPUSCH-Config

The IE DMRS-BundlingPUSCH-Config-r17 is used to configure DMRS bundling for PUSCH.
DMRS-BundlingPUSCH-Config information element
```
-- ASNISTART
-- TAG-DMRS-BUNDLINGPUSCH-CONFIG-START
DMRS-BundlingPUSCH-Config-rl7 ::=
    pusch-DMRS-Bundling-rl7
    pusch-TimeDomainWindowLength-rl7
    pusch-WindowRestart-rl7
    pusch-FrequencyHoppingInterval-rl7
    ...
}
-- TAG-DMRS-BUNDLINGPUSCH-CONEIG-STOP
-- ASNISTOP
```

```
SEQUENCE \
    ENUMERATED {enabled}
    INTEGER (2..32)
    ENUMERATED {enabled}
    ENUMERATED {s2, s4, s5, s6, s8, sl0, sl2, sl4, sl6, s20}
```


\begin{tabular}{ll} 
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S
\end{tabular}

ETSI


--- Page 549  ---


3GPP TS 38.331 version 17.0.0 Release 17
548
ETSI TS 138331 V17.0.0 (2022-05)

DMRS-BundlingPUSCH-Config field descriptions
pusch-DMRS-Bundling
Indicates whether DMRS bundling and time domain window for PUSCH are jointly enabled. If the field is absent, DMRS bundling and time domain window for PUSCH are jointly disabled.
pusch-FrequencyHoppinginterval
Configures the number of consecutive slots for the UE to perform inter-slot frequency hopping with inter-slot bundling for PUSCH. When both inter-frequency hopping and DMRS bundling are enabled for PUSCH repetitions, the UE is expected to be configured with at least one pusch-FrequencyHoppingInterval-r17 and pusch-
TimeDomainWindowLength-r17. This parameter is shared for both DG-PUSCH and CG-PUSCH. When DMRS bundling for PUSCH is enabled by pusch-DMRS-Bundling-r17, PUSCH frequency hopping interval is only determined by the configuration of PUSCH hopping interval if PUSCH hopping interval is configured. If the field is absent, the number of consecutive slots for the UE to perform inter-slot PUSCH frequency hopping is indicated by pusch-TimeDomainWindowLength-r17.
Note: For unpaired spectrum, the UE is not expected to be configured the value of s6, s8, s12 and s16.
pusch-TimeDomainWindowLength
Configures the length of a nominal time domain window in number of consecutive slots for DMRS bundling for PUSCH. The value shall not exceed the maximum duration defined in TS 38.101-1 [15] and TS 38.101-2 [39]. For PUSCH repetition type A/B, if this field is absent, the UE shall apply the default value that is the minimum value in the unit of consecutive slots of the time duration for the transmission of all PUSCH repetitions and the maximum duration defined in TS 38.101-1 [15] and TS 38.101-2 [39]. For TBoMS, if this field is absent, the UE shall apply the default value that is the minimum value in the unit of consecutive slots of the duration of TBoMS transmission (including repetition of TBoMS) and the maximum duration defined in in TS 38.101-1 [15] and TS 38.101-2 [39].
pusch-WindowRestart
Indicates whether UE bundles PUSCH DMRS remaining in a nominal time domain window after event(s) triggered by DCI or MAC CE that violate power consistency and phase continuity requirements is enabled. If the field is absent, PUSCH DMRS bundling remaining in a bundling window after event(s) triggered by DCI or MAC CE that violate power consistency and phase continuity requirements is disabled.
Note: Events, which are triggered by DCI or MAC CE, but regarded as semi-static events, e.g. frequency hopping, UL beam switching for multi-TRP operation, or other if defined, are excluded.
- DMRS-DownlinkConfig

The IE DMRS-DownlinkConfig is used to configure downlink demodulation reference signals for PDSCH.
DMRS-DownlinkConfig information element
-- ASNISTART
-- TAG-DMRS-DOWNLINKCONEIG-START

DMRS-DownlinkConfig : :=
dmrs-Type
dmrs-AdditionalPosition
maxLength
scramblingIDO
scramblingIDl
phaseTrackingRS
⋯
[ [
dmrs-Downlink-rl6
] ]
\}
```
SEQUENCE \
    ENUMERATED {type2}
    ENUMERATED {pos0, posl, pos3}
    ENUMERATED {len2}
    INTEGER (0..65535)
    INTEGER (0..65535)
    SetupRelease { PTRS-DownlinkConfig}}
```

ENUMERATED \{enabled\}

\begin{tabular}{ll} 
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. S \\
OPTIONAL, & -- Need. M
\end{tabular}

OPTIONAL -- Need R

ETSI


--- Page 550  ---


3GPP TS 38.331 version 17.0.0 Release 17
549
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-DMRS-DOWNLINKCONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline DMRS-DownlinkConfig field descriptions \\
\hline \begin{tabular}{l}
dmrs-AdditionalPosition \\
Position for additional DM-RS in DL, see Tables 7.4.1.1.2-3 and 7.4.1.1.2-4 in TS 38.211 [16]. If the field is absent, the UE applies the value pos2. See also clause 7.4.1.1.2 for additional constraints on how the network may set this field depending on the setting of other fields.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-Downlink \\
This field indicates whether low PAPR DMRS is used, as specified in TS38.211 [16], clause 7.4.1.1.1.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-Type \\
Selection of the DMRS type to be used for DL (see TS 38.211 [16], clause 7.4.1.1.1). If the field is absent, the UE uses DMRS type 1.
\end{tabular} \\
\hline \begin{tabular}{l}
maxLength \\
The maximum number of OFDM symbols for DL front loaded DMRS. len1 corresponds to value 1. len2 corresponds to value 2. If the field is absent, the UE applies value len1. If set to len2, the UE determines the actual number of DM-RS symbols by the associated DCI. (see TS 38.211 [16], clause 7.4.1.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
phaseTrackingRS \\
Configures downlink PTRS. If the field is not configured, the UE assumes that downlink PTRS are absent. See TS 38.214 [19] clause 5.1.6.3.
\end{tabular} \\
\hline \begin{tabular}{l}
scramblingIDO \\
DL DMRS scrambling initialization (see TS 38.211 [16], clause 7.4.1.1.1). When the field is absent the UE applies the value physCelll configured for this serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
scramblingID1 \\
DL DMRS scrambling initialization (see TS 38.211 [16], clause 7.4.1.1.1). When the field is absent the UE applies the value physCell/d configured for this serving cell.
\end{tabular} \\
\hline
\end{tabular}
- DMRS-UplinkConfig

The IE DMRS-UplinkConfig is used to configure uplink demodulation reference signals for PUSCH.
DMRS-UplinkConfig information element
```
-- ASNISTART
-- TAG-DMRS-UPLINKCONFIG-START
DMRS-UplinkConfig ::=
    dmrs-Type
    dmrs-AdditionalPosition
    phaseTrackingRS
    maxLength
    transformPrecodingDisabled
        scramblingIDO
        scramblingIDl
        ...,
        [ [
        dmrs-Uplink-rl6
        ]]
    }
    transformPrecodingEnabled.
        nPUSCH-Identity
        sequenceGroupHopping
        sequenceHopping
```

```
SEQUENCE \
    ENUMERATED {type2}
    ENUMERATED {pos0, posl, pos3}
    SetupRelease { PTRS-UplinkConfig }
    ENUMERATED {len2}
    SEQUENCE {
        INTEGER (0..65535)
        INTEGER (0..65535)
        ENUMERATED {enabled}
    SEQUENCE \
        INTEGER(0..1007)
        ENUMERATED {disabled}
        ENUMERATED {enabled}
```


\begin{tabular}{|l|l|}
\hline OPTIONAL, & -- Need S \\
\hline OPTIONAL, & -- Need S \\
\hline OPTIONAL, & -- Need M \\
\hline OPTIONAL, & -- Need S \\
\hline OPTIONAL, & -- Need. S \\
\hline OPTIONAL, & -- Need. S \\
\hline OPTIONAL & -- Need R \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Need S \\
\hline OPTIONAL, & -- Need S \\
\hline OPTIONAL, & -- Need S \\
\hline
\end{tabular}

ETSI


--- Page 551  ---


3GPP TS 38.331 version 17.0.0 Release 17
550
ETSI TS 138331 V17.0.0 (2022-05)
```
        ...;
```

```
        ] ]
```

```
...
}
DMRS-UplinkTransformPrecoding-rl6::= SEQUENCE {
    pi2BPSK-ScramblingIDO
    pi2BPSK-ScramblingIDl
}
-- TAG-DMRS-UPLINKCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 552  ---


3GPP TS 38.331 version 17.0.0 Release 17
551
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline DMRS-UplinkConfig field descriptions \\
\hline \begin{tabular}{l}
dmrs-AdditionalPosition \\
Position for additional DM-RS in UL (see TS 38.211 [16], clause 6.4.1.1.3). If the field is absent, the UE applies the value pos2. See also clause 6.4.1.1.3 for additional constraints on how the network may set this field depending on the setting of other fields.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-Type \\
Selection of the DMRS type to be used for UL (see TS 38.211 [16], clause 6.4.1.1.3) If the field is absent, the UE uses DMRS type 1.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-Uplink \\
This field indicates whether low PAPR DMRS is used, as specified in TS38.211 [16], clause 6.4.1.1.1.1.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-UplinkTransformPrecoding \\
This field indicates whether low PAPR DMRS is used for PUSCH with pi/2 BPSK modulation, as specified in TS38.211 [16], clause 6.4.1.1.1.2. The network configures this field only if tp-pi2BPSK is configured in PUSCH-Config.
\end{tabular} \\
\hline \begin{tabular}{l}
maxLength \\
The maximum number of OFDM symbols for UL front loaded DMRS. len1 corresponds to value 1. len2 corresponds to value 2. If the field is absent, the UE applies value len1. If set to len2, the UE determines the actual number of DM-RS symbols by the associated DCI. (see TS 38.211 [16], clause 6.4.1.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
nPUSCH-Identity \\
Parameter: N_ID^(PUSCH) for DFT-s-OFDM DMRS. If the value is absent or released, the UE uses the value Physical cell ID (physCellid). See TS 38.211 [16].
\end{tabular} \\
\hline \begin{tabular}{l}
phaseTrackingRS \\
Configures uplink PTRS (see TS 38.211 [16]).
\end{tabular} \\
\hline \begin{tabular}{l}
pi2BPSK-ScramblingID0, pi2BPSK-ScramblingID1 \\
UL DMRS scrambling initialization for pi/2 BPSK DMRS for PUSCH (see TS 38.211 [16], Clause 6.4.1.1.2). When the field is absent the UE applies the value Physical cell ID (physCellId) of the serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
scramblingIDO \\
UL DMRS scrambling initialization for CP-OFDM (see TS 38.211 [16], clause 6.4.1.1.1.1). When the field is absent the UE applies the value Physical cell ID (physCellld).
\end{tabular} \\
\hline \begin{tabular}{l}
scramblingID1 \\
UL DMRS scrambling initialization for CP-OFDM. (see TS 38.211 [16], clause 6.4.1.1.1.1). When the field is absent the UE applies the value Physical cell ID (physCellld).
\end{tabular} \\
\hline \begin{tabular}{l}
sequenceGroupHopping \\
For DMRS transmission with transform precoder the NW may configure group hopping by the cell-specific parameter groupHoppingEnabled TransformPrecoding in PUSCHConfigCommon. In this case, the NW may include this UE specific field to disable group hopping for PUSCH transmission except for Msg3, i.e., to override the configuration in PUSCH-ConfigCommon (see TS 38.211 [16]). If the field is absent, the UE uses the same hopping mode as for Msg3.
\end{tabular} \\
\hline \begin{tabular}{l}
sequenceHopping \\
Determines if sequence hopping is enabled for DMRS transmission with transform precoder for PUSCH transmission other than Msg3 (sequence hopping is always disabled for Msg3). If the field is absent, the UE uses the same hopping mode as for msg3. The network does not configure simultaneous group hopping and sequence hopping. See TS 38.211 [16], clause 6.4.1.1.1.2.
\end{tabular} \\
\hline \begin{tabular}{l}
transformPrecodingDisabled \\
DMRS related parameters for Cyclic Prefix OFDM.
\end{tabular} \\
\hline \begin{tabular}{l}
transformPrecodingEnabled \\
DMRS related parameters for DFT-s-OFDM (Transform Precoding).
\end{tabular} \\
\hline
\end{tabular}
- DownlinkConfigCommon

The IE DownlinkConfigCommon provides common downlink parameters of a cell.
DownlinkConfigCommon information element

-- ASNISTART
ETSI


--- Page 553  ---


3GPP TS 38.331 version 17.0.0 Release 17
552
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-DOWNLINKCONFIGCOMMON-START
DownlinkConfigCommon ::= SEQUENCE {
```

```
    initialDownlinkBWP BWP-DownlinkCommon OPTIONAL, -- Cond ServCellAdd.
    ...r
    [ [
    ntn-Config-rl7 NTN-Config-rl7 OPTIONAL, -- Need. R
    initialDownlinkBWP-RedCap-rl7 BWP-DownlinkCommon OPTIONAL -- Need R
```

```
-- (FFS on the signalling details, e.g. whether to broadcast feeder link delay difference or something different)
    ] ]
}
-- TAG-DOWNLINKCONFIGCOMMON-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline DownlinkConfigCommon field descriptions \\
\hline \begin{tabular}{l}
frequencyinfoDL \\
Basic parameters of a downlink carrier and transmission thereon.
\end{tabular} \\
\hline \begin{tabular}{l}
initialDownlinkBWP \\
The initial downlink BWP configuration for a serving cell. The network configures the locationAndBandwidth so that the initial downlink BWP contains the entire CORESET\#0 of this serving cell in the frequency domain.
\end{tabular} \\
\hline \begin{tabular}{l}
initialDownlinkBWP-RedCap \\
If present, RedCap UEs use this DL BWP instead of initialDownilikBWP. If the locationAndBandwidth of this BWP contains the entire CORESET\#0, the UE applies the locationAndBandwidth upon reception of this field (e.g. to determine the frequency position of signals described in relation to this locationAndBandwidth) but it keeps CORESET\#0 until after reception of RRCSetup/RRCResume/RRCReestablishment. Otherwise, i.e., if the locationAndBandwidth of this BWP does not contain the entire CORESET\#0, the UE uses this BWP also for receiving DL messages during initial access (Msg2, Msg4, ...) and after initial access. \\
If absent, RedCap UEs use initialDownilikBWP provided that it does not exceed the RedCap UE maximum bandwidth (see also clause 5.2.2.4.2).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline InterFreqHOAndServCellAdd & This field is mandatory present for inter-frequency handover, and upon serving cell (PSCell/SCell) addition. Otherwise, the field is optionally present, Need M. \\
\hline ServCellAdd & This field is mandatory present upon serving cell addition (for PSCell and SCell) and upon handover from E-UTRA to NR. It is optionally present, Need M otherwise. \\
\hline
\end{tabular}
- DownlinkConfigCommonSIB

The IE DownlinkConfigCommonSIB provides common downlink parameters of a cell.
DownlinkConfigCommonSIB information element

-- ASNISTART
-- TAG-DOWNLINKCONFIGCOMMONSIB-START
ETSI


--- Page 554  ---


3GPP TS 38.331 version 17.0.0 Release 17
553
ETSI TS 138331 V17.0.0 (2022-05)
```
DownlinkConfigCommonSIB ::= SEQUENCE {
    frequencyInfoDL
    initialDownlinkBWP
    bcch-Config
    pcch-Config pccH-Comfig
    ...;
    [ [
    pei-Config-rl7 PEI-Config-rl7 OPTIONAL, -- Need. R
    initialDownlinkBWP-RedCap-rl7 BWP-DownlinkCommon OPTIONAL Need R
    ]]
}
BCCH-Config ::=
    SEQUENCE \
    ...
}
PCCH-Config ::= SEQUENCE \
    defaultPagingCycle PagingCycle,
    nAndPagingFrameOffset CHOICE \
        oneT
        NULL,
        INTEGER (0..1),
        INTEGER (0..3),
        oneEighthT 
    },
    ns ENUMERATED {four, two, one},
    firstPDCCH-MonitoringOccasionOfPO CHOICE [
        sCSI5KHZoneT
        sCS30KHZoneT-SCS15KHZhalfT
        sCS60KHZoneT-SCS30KHZhalfT-SCS15KHZquarterT
        sCSl20KHZoneT-SCS60KHZhalfT-SCS30KHZquarterT-SCSl5KHZoneEighthT
        sCS120KHZhalfT-SCS60KHZquarterT-SCS30KHZoneEighthT-SCS15KHZoneSixteenthT
        sCS120KHZquarterT-SCS60KHZoneEighthT-SCS30KHZoneSixteenthT
        sCS120KHZoneEighthT-SCS60KHZoneSixteenthT
        sCSl20KHZoneSixteenthT
    } OPTIONAL, -- Need R
    ...;
    [ [
    nrofPDCCH-MonitoringOccasionPerSSB-InPO-rl6 INTEGER (2.4) OPTIONAL -- Cond SharedSpectrum2
    ]],
    [ [
    ranPagingInIdlePO-rl7 ENUMERATED {true} OPTIONAL -- Need R
    ] ]
}
PEI-Config-rl7 ::= SEQUENCE [
    pei-SearchSpace-rl7 SearchSpaceId,
    po-NumPerPEI-rl7 ENUMERATED {pol, po2, po4, po8},
    payloadSizeDCI-2-7-rl7 INTEGER (l..maxDCI-2-7-Size-rl7),
    pei-FrameOffset-rl7 INTEGER (0..16),
```


ETSI


--- Page 555  ---


3GPP TS 38.331 version 17.0.0 Release 17
554
ETSI TS 138331 V17.0.0 (2022-05)
```
    firstPDCCH-MonitoringOccasionOfPEI-O-rl7 CHOICE {
```

```
    },
    subgroupConfig-rl7 SubgroupConfig-rl7,
```

```
    ...
}
SubgroupConfig-rl7 ::= SEQUENCE {
    subgroupsNumPerPO-rl7 INTEGER (1.. maxNrofPagingSubgroups-rl7),
```

```
    ...
}
-- TAG-DOWNLINKCONFIGCOMMONSIB-STOP
-- ASNISTOP
```


ETSI


--- Page 556  ---


3GPP TS 38.331 version 17.0.0 Release 17
555
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline DownlinkConfigCommonSIB field descriptions \\
\hline \begin{tabular}{l}
bcch-Config \\
The modification period related configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyinfoDL-SIB \\
Basic parameters of a downlink carrier and transmission thereon.
\end{tabular} \\
\hline \begin{tabular}{l}
initialDownlinkBWP \\
The initial downlink BWP configuration for a PCell. The network configures the locationAndBandwidth so that the initial downlink BWP contains the entire CORESET\#0 of this serving cell in the frequency domain. The UE applies the locationAndBandwidth upon reception of this field (e.g. to determine the frequency position of signals described in relation to this locationAndBandwidth) but it keeps CORESET\#0 until after reception of RRCSetup/RRCResume/RRCReestablishment.
\end{tabular} \\
\hline \begin{tabular}{l}
initialDownlinkBWP-RedCap \\
If present, RedCap UEs use this DL BWP instead of initialDownilinkWP. If the locationAndBandwidth of this BWP contains the entire CORESET\#0, the UE applies the locationAndBandwidth upon reception of this field (e.g. to determine the frequency position of signals described in relation to this locationAndBandwidth) but it keeps CORESET\#0 until after reception of RRCSetup/RRCResume/RRCReestablishment. Otherwise, i.e., if the locationAndBandwidth of this BWP does not contain the entire CORESET\#0, the UE uses this BWP also for receiving DL messages during initial access (Msg2, Msg4, ...) and after initial access. \\
If absent, RedCap UEs use initialDownilinkBWP provided that it does not exceed the RedCap UE maximum bandwidth (see also clause 5.2.2.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
lastUsedCellOnly \\
When present, the field indicates that the UE monitors PEI only if its last connection was released by this cell. A PEI-capable UE stores its last used cell information.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofPDCCH-MonitoringOccasionPerSSB-InPO \\
The number of PDCCH monitoring occasions corresponding to an SSB within a Paging Occasion, see TS 38.304 [20], clause 7.1.
\end{tabular} \\
\hline \begin{tabular}{l}
pcch-Config \\
The paging related configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
pei-Config \\
The PEI related configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
subgroupConfig \\
The paging subgroup related configuration.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline \multicolumn{1}{|c|}{ BCCH-Config field descriptions } \\
\hline \begin{tabular}{l} 
modificationPeriodCoeff \\
Actual modification period, expressed in number of radio frames \( \mathrm{m}= \) modificationPeriodCoeff \( { }^{*} \) defaulPagingCycle, see clause 5.2.2.2.2.n2 corresponds to value 2,n4 \\
corresponds to value 4, and so on.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 557  ---


3GPP TS 38.331 version 17.0.0 Release 17
556
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PCCH-Config field descriptions \\
\hline \begin{tabular}{l}
defaultPagingCycle \\
Default paging cycle, used to derive 'T' in TS 38.304 [20]. Value r 32 corresponds to 32 radio frames, value ff64 corresponds to 64 radio frames and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
firstPDCCH-MonitoringOccasionOfPO \\
Points out the first PDCCH monitoring occasion for paging of each PO of the PF, see TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
nAndPagingFrameOffset \\
Used to derive the number of total paging frames in T (corresponding to parameter N in TS 38.304 [20]) and paging frame offset (corresponding to parameter PF_offset in TS 38.304 [20]). A value of one SixteenthT corresponds to T / 16, a value of oneEighthT corresponds to T/8, and so on. \\
If pagingSearchSpace is set to zero and if SS/PBCH block and CORESET multiplexing pattern is 2 or 3 (as specified in TS 38.213 [13]): \\
- for ssb-periodicityServingCell of 5 or 10 ms , N can be set to one of \{oneT, halfT, quarterT, oneEighthT, oneSixteenth T\} \\
- for ssb-periodicityServingCell of 20 ms , N can be set to one of \{halfT, quarterT, oneEighthT, oneSixteenth T\} \\
- for ssb-periodicityServingCell of \( 40 \mathrm{~ms}, \mathrm{~N} \) can be set to one of \{quarterT, oneEighthT, oneSixteenthT\} \\
- for ssb-periodicityServingCell of 80 ms , N can be set to one of \{oneEighthT, oneSixteenthT\} \\
- for ssb-periodicityServingCell of \( 160 \mathrm{~ms}, \mathrm{~N} \) can be set to oneSixteenthT \\
If pagingSearchSpace is set to zero and if SS/PBCH block and CORESET multiplexing pattern is 1 (as specified in TS 38.213 [13]), N can be set to one of (halfT, quarterT, oneEighthT, oneSixteenthT\} \\
If pagingSearchSpace is not set to zero, N can be configured to one of \{oneT, halfT, quarterT, oneEighthT, oneSixteenthT\}
\end{tabular} \\
\hline \begin{tabular}{l}
ns \\
Number of paging occasions per paging frame.
\end{tabular} \\
\hline \begin{tabular}{l}
ranPaginginldlePO \\
Indicates that the network supports to send RAN paging in PO that corresponds to the i_s as determined by UE in RRC_IDLE state, see TS38.304 [20].
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PEI-Config field descriptions \\
\hline \begin{tabular}{l}
firstPDCCH-MonitoringOccasionOfPEI-O \\
Offset, in number of symbols, from the start of the reference frame for PEI-O to the start of the first PDCCH monitoring occasion of PEI-O, see TS 38.213 [13], clause 10.4A. For the case po-NumPerPE/ is smaller than Ns, UE applies the (floor(i_s/poNumPerPEI)+1)-th value out of (N_s/po-NumPerPEI) configured values in firstPDCCH- \\
MonitoringOccasionOfPE/-O for the symbol-level offset. When po-NumPerPE/is one or mutliple of Ns, UE applies the first configured value in firstPDCCH- \\
Monitoring Occasion OfPE/-O for the symbol-level offset.
\end{tabular} \\
\hline \begin{tabular}{l}
payloadSizeDCI-2-7 \\
Payload size of PEI DCI, i.e., DCI format 2_7. The size is no larger than the payload size of paging DCI which has maximum of 41 bits and 43 bits for licensed and unlicensed spectrums, respectively.
\end{tabular} \\
\hline \begin{tabular}{l}
pei-FrameOffset \\
Offset, in number of frames from the start of a first paging frame of the paging frames associated with the PEI-O to the start of a reference frame for PEI-O, see TS 38.213[13], clause 10.4A.
\end{tabular} \\
\hline \begin{tabular}{l}
pei-SearchSpace \\
ID of dedicated search space for PEI. It can be configured to one of up to 4 common SS sets configured by commonSearchSpaceList with SearchSpaceld > 0. The CCE aggregation levels and maximum number of PDCCH candidates per CCE aggregation level follows Table 10.1-1 of TS38.213 [13]. SearchSpaceld \( =0 \) can be configured for the case of SS/PBCH block and CORESET multiplexing pattern 2 or 3.
\end{tabular} \\
\hline \begin{tabular}{l}
po-NumPerPEI \\
The number of \( \mathrm{PO}(\mathrm{s}) \) associated with one PEI monitoring occation. It is a factor of \( \mathrm{N} \times \mathrm{Ns} \) (total PO number in a paging cycle). The Maximum number of PF associated with one PEI monitoring occation is up to 2. The number of PO mapping to one PEI should be multiple of Ns when po-NumPerPEI is larger than Ns.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 558  ---


3GPP TS 38.331 version 17.0.0 Release 17
557
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SubgroupConfig field descriptions \\
\hline \begin{tabular}{l}
subgroupsNumPerPO \\
Total number of subgroups per Paging Occasion (PO) for UE to read subgroups indication from physical-layer signaling The field represents the sum of CN-assigned and UEID-based subgroups supported by the network.
\end{tabular} \\
\hline \begin{tabular}{l}
subgroupsNumForUEID \\
Number of subgroups per Paging Occasion (PO) for UE to read subgroups indication from physical-layer signaling, for UEID-based subgrouping method. When present, the field is set to an integer smaller than or equal to subgroupsNumPerPOs. subgroupsNumPerPO equals to subgroupsNumForUEID when the network does not support CNassigned subgrouping. The field is absent when the network does not support UEID-based subgrouping. Both this field and subgroupsNumPerPO are equal to 1 when the network does not support subgrouping.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline SharedSpectrum2 & The field is optional present, Need R, if this cell operates with shared spectrum channel access. Otherwise, it is absent, Need R. \\
\hline
\end{tabular}
- DownlinkPreemption

The IE DownlinkPreemption is used to configure the UE to monitor PDCCH for the INT-RNTI (interruption).
DownlinkPreemption information element
```
-- ASNISTART
-- TAG-DOWNLINKPREEMPTION-START
DownlinkPreemption ::= SEQUENCE {
    int-RNTI
    timeFrequencySet
    dci-PayloadSize INTEGER (O..maxINT-DCI-PayloadSize),
    int-ConfigurationPerServingCell SEQUENCE (SIZE (l..maxNrofServingCells)) OF INT-ConfigurationPerServingCell,
    ...
}
INT-ConfigurationPerServingCell ::= SEQUENCE {
    servingCellId ServCellIndex,
    positionInDCI INTEGER (O..maxINT-DCI-PayloadSize-1)
}
-- TAG-DOWNLINKPREEMPTION-STOP
-- ASNISTOP
```


ETSI


--- Page 559  ---


3GPP TS 38.331 version 17.0.0 Release 17
558
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline DownlinkPreemption field descriptions \\
\hline \begin{tabular}{l}
dci-PayloadSize \\
Total length of the DCI payload scrambled with INT-RNTI (see TS 38.213 [13], clause 11.2).
\end{tabular} \\
\hline \begin{tabular}{l}
int-ConfigurationPerServingCell \\
Indicates (per serving cell) the position of the 14 bit INT values inside the DCI payload (see TS 38.213 [13], clause 11.2).
\end{tabular} \\
\hline \begin{tabular}{l}
int-RNTI \\
RNTI used for indication pre-emption in DL (see TS 38.213 [13], clause 10).
\end{tabular} \\
\hline \begin{tabular}{l}
timeFrequencySet \\
Set selection for DL-preemption indication (see TS 38.213 [13], clause 11.2) The set determines how the UE interprets the DL preemption DCI payload.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline INT-ConfigurationPerServingCell field descriptions \\
\hline \begin{tabular}{l}
positioninDCI \\
Starting position (in number of bit) of the 14 bit INT value applicable for this serving cell (servingCellid) within the DCI payload (see TS 38.213 [13], clause 11.2). Must be multiples of 14 (bit).
\end{tabular} \\
\hline
\end{tabular}
- DRB-Identity

The IE DRB-Identity is used to identify a DRB used by a UE.
DRB-Identity information element
-- ASNISTART
-- TAG-DRB-IDENTITY-START

DRB-Identity ::= INTEGER (1..32)
-- TAG-DRB-IDENTITY-STOP
-- ASNISTOP
- \( \quad \) DRX-Config

The IE DRX-Config is used to configure DRX related parameters.
DRX-Config information element
-- ASNISTART
-- TAG-DRX-CONFIG-START

DRX-Config : :=
drx-onDurationTimer

SEQUENCE 1
CHOICE [
subMilliSeconds INTEGER (1..31),
milliSeconds ENUMERATED [
msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60, ms80, ms100, ms200, ms300, ms400, ms500, ms600, ms800, ms1000, ms1200,

ETSI


--- Page 560  ---


3GPP TS 38.331 version 17.0.0 Release 17
559
ETSI TS 138331 V17.0.0 (2022-05)
```
    drx-InactivityTimer
    drx-HARQ-RTT-TimerDL
    drx-HARQ-RTT-TimerUL
    drx-RetransmissionTimerDL
    drx-RetransmissionTimerUL
    drx-LongCycleStartOffset
        mslo
        ms20
        ms 32
        ms 40
        ms 60
        ms 64
        ms 70
        ms80
        msl28
        msl60
        ms256
        ms320
        ms 512
        ms 640
        msl024
        msl280
        ms2048
        ms2560
        ms5120
        msl0240
    \},
    shortDRX
        drx-ShortCycle
        drx-ShortCycleTimer
    \}
    drx-SlotOffset
\}
DRX-ConfigExt-vl700 ::=
    drx-HARQ-RTT-TimerDL-rl7
    drx-HARQ-RTT-TimerUL-rl7
\}
-- TAG-DRX-CONFIG-STOP
```

```
        msl600, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel }
    },
ENUMERATED {
    ms0, msl, ms2, ms3, ms4, ms5, ms6, ms8, msl0, ms20, ms30, ms40, ms50, ms60, ms80,
    msl00, ms200, ms300, ms500, ms750, msl280, msl920, ms2560, spare9, spare8,
    spare7, spare6, spare5, spare4, spare3, spare2, sparel},
INTEGER (0..56),
INTEGER (0..56),
ENOMERATED {
    sl0, sll, sl2, sl4, sl6, sl8, sll6, sl24, sl33, sl40, sl64, sl80, sl96, slll2, sll28,
    sll60, sl320, sparel5, sparel4, sparel3, sparel2, sparell, sparel0, spare9,
    spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel},
ENUMERATED {
    sl0, sll, sl2, sl4, sl6, sl8, sll6, sl24, sl33, sl40, sl64, sl80, sl96, slll2, sll28,
    sl160, sl320, sparel5, sparel4, sparel3, sparel2, sparell, sparel0, spare9,
    spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel },
CHOICE l
    INTEGER(0..9),
    INTEGER(0..19),
    INTEGER(0..31),
    INTEGER(0..39),
    INTEGER(0..59),
    INTEGER(0..63),
    INTEGER(0..69),
    INTEGER(0..79),
    INTEGER(0..127),
    INTEGER(0..159),
    INTEGER(0..255),
    INTEGER(0..319),
    INTEGER(0..5ll),
    INTEGER(0..639),
    INTEGER(0..1023),
    INTEGER(0..1279),
    INTEGER(0..2047),
    INTEGER(0..2559),
    INTEGER(0..5119),
    INTEGER(0..10239)
SEQUENCE \
    ENOMERATED {
        ms2, ms3, ms4, ms5, ms6, ms7, ms8, msl0, msl4, msl6, ms20, ms30, ms32,
        ms35, ms40, ms64, ms80, msl28, msl60, ms256, ms320, ms5l2, ms640, spare9,
        spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel },
    INTEGER (1..16)
INTEGER (0..31)
SEQUENCE {
    INTEGER (0..448),
    INTEGER (0..448)
    )
```


ETSI


--- Page 561  ---


3GPP TS 38.331 version 17.0.0 Release 17
560
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

\begin{tabular}{|l|}
\hline DRX-Config field descriptions \\
\hline \begin{tabular}{l}
drx-HARQ-RTT-TimerDL \\
Value in number of symbols of the BWP where the transport block was received. drx-HARQ-RTT-TimerDL-r17 is only applicable for SCS 480 kHz and 960 kHz . If configured, the UE shall ignore drx-HARQ-RTT-TimerDL (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
drx-HARQ-RTT-TimerUL \\
Value in number of symbols of the BWP where the transport block was transmitted. drx-HARQ-RTT-TimerUL-r17 is only applicable for SCS 480 kHz and 960 kHz . If configured, the UE shall ignore drx-HARQ-RTT-TimerUL (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
drx-InactivityTimer \\
Value in multiple integers of \( 1 \mathrm{~ms} . \mathrm{ms} 0 \) corresponds to \( 0, \mathrm{~ms} 1 \) corresponds to \( 1 \mathrm{~ms}, \mathrm{~ms} 2 \) corresponds to 2 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-LongCycleStartOffset \\
drx-LongCycle in ms and drx-StartOffset in multiples of 1 ms . If \( d r x \)-ShortCycle is configured, the value of \( d r x \)-LongCycle shall be a multiple of the \( d r x \)-ShortCycle value.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-onDurationTimer \\
Value in multiples of \( 1 / 32 \mathrm{~ms} \) (subMilliSeconds) or in ms (milliSecond). For the latter, value ms 1 corresponds to 1 ms , value ms 2 corresponds to 2 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-RetransmissionTimerDL \\
Value in number of slot lengths of the BWP where the transport block was received. value s \( / 0 \) corresponds to 0 slots, s \( / 1 \) corresponds to 1 slot, s \( / 2 \) corresponds to 2 slots, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-RetransmissionTimerUL \\
Value in number of slot lengths of the BWP where the transport block was transmitted. s \( / \mathcal{O} \) corresponds to 0 slots, s \( / 1 \) corresponds to 1 slot, s \( / 2 \) corresponds to 2 slots, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-ShortCycleTimer \\
Value in multiples of \( d r x \)-ShortCycle. A value of 1 corresponds to \( d r x \)-ShortCycle, a value of 2 corresponds to 2 * \( d r x \)-ShortCycle and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-ShortCycle \\
Value in ms. ms 1 corresponds to \( 1 \mathrm{~ms}, \mathrm{~ms} 2 \) corresponds to 2 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-SlotOffset \\
Value in \( 1 / 32 \mathrm{~ms} \). Value 0 corresponds to 0 ms , value 1 corresponds to \( 1 / 32 \mathrm{~ms} \), value 2 corresponds to \( 2 / 32 \mathrm{~ms} \), and so on.
\end{tabular} \\
\hline
\end{tabular}
- DRX-ConfigSecondaryGroup

The IE DRX-ConfigSecondaryGroup is used to configure DRX related parameters for the second DRX group as specified in TS 38.321 [3].
DRX-ConfigSecondaryGroup information element
```
-- ASNISTART
-- TAG-DRX-CONFIGSECONDARYGROUP-START
DRX-ConfigSecondaryGroup ::= SEQUENCE {
    drx-onDurationTimer
CHOICE \
            subMilliSeconds INTEGER (1..31),
                milliSeconds ENUMERATED {
                        msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60,
                        ms80, ms100, ms200, ms300, ms400, ms500, ms600, ms800, ms1000, ms1200,
                    msl600, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel}
                },
```


ETSI


--- Page 562  ---


3GPP TS 38.331 version 17.0.0 Release 17
561
ETSI TS 138331 V17.0.0 (2022-05)
```
    drx-InactivityTimer
        ENUMERATED {
    ms0, msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60, ms80,
        ms100, ms200, ms300, ms500, ms750, ms1280, ms1920, ms2560, spare9, spare8,
}
-- TAG-DRX-CONFIGSECONDARYGROUP-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline DRX-ConfigSecondaryGroup field descriptions \\
\hline \begin{tabular}{l}
drx-InactivityTimer \\
Value in multiple integers of \( 1 \mathrm{~ms} . \mathrm{ms} 0 \) corresponds to \( 0, \mathrm{~ms} 1 \) corresponds to \( 1 \mathrm{~ms}, \mathrm{~ms} 2 \) corresponds to 2 ms , and so on, as specified in TS 38.321 [3]. The network configures a drx-inactivityTimer value for the second DRX group that is smaller than the drx-InactivityTimer configured for the default DRX group in IE DRX-Config.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-onDurationTimer \\
Value in multiples of \( 1 / 32 \mathrm{~ms} \) (subMilliSeconds) or in ms (milliSecond). For the latter, value ms 1 corresponds to 1 ms , value ms 2 corresponds to 2 ms , and so on, as specified in TS 38.321 [3]. The network configures a drx-onDurationTimer value for the second DRX group that is smaller than the drx-onDurationTimer configured for the default DRX group in IE DRX-Config.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) DRX-ConfigSL

The IE DRX-ConfigSL is used to configure additional DRX parameters for the UE performing sidelink operation with resource allocation mode 1, as specified in TS 38.321 [3].
DRX-ConfigSL information element
```
-- ASNISTART
-- TAG-DRX-CONFIGSL-START
DRX-ConfigSL ::= SEQUENCE \
    drx-HARQ-RTT-TimerSL INTEGER (0..56),
```

```
            sl320, sparel5, sparel4, sparel3, sparel2, sparell, sparel0, spare9, spare8, spare7, spare6,
            spare5, spare4, spare3, spare2, sparel}
}
-- TAG-DRX-CONFIGSL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline DRX-ConfigSL field descriptions \\
\hline \begin{tabular}{l}
drx-HARQ-RTT-TimerSL \\
Value in number of symbols of the BWP where the PDCCH was transmitted.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-RetransmissionTimerSL \\
Value in number of slot lengths of the BWP where the PDCCH was transmitted. s \( / 0 \) corresponds to 0 slots, s \( / 1 \) corresponds to 1 slot, s \( / 2 \) corresponds to 2 slots, and so on.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 563  ---


3GPP TS 38.331 version 17.0.0 Release 17
562
ETSI TS 138331 V17.0.0 (2022-05)

Ephemeris/nfo
The IE EphemerisInfo provides satellite ephemeris. Ephemeris may be expressed either in format of position and velocity state vector or in format of orbital parameters. FFS more detailed description.

Ephemerisinfo information element
```
-- ASNISTART
-- TAG-EPHEMERISINFO-START
EphemerisInfo-rl7 ::= CHOICE {
    positionVelocity-rl7 PositionVelocity-rl7,
    orbital-rl7 Orbital-rl7
}
PositionVelocity-rl7 ::= SEQUENCE [
    positionX-rl7
    positionY-rl7
    positiolocityVX-rl7
    velocityVX-rl7
    velocityVZ-rl7
        velocityVZ-rl7 VelocityStateVector-rl7
}
Orbital-rl7 ::= SEQUENCE {
    semiMajorAxis-rl7
    eccentricityE-rl7
    periapsis-rl7
    longitude-rl7
    inclinationI-rl7
    meanAnomalyM-rl7
}
PositionStateVector-rl7 ::= INTEGER (-3355432..33554431)
VelocityStateVector-rl7 ::= INTEGER (-131072..131071)
-- TAG-EPHEMERISINFO-STOP
-- ASNISTOP
```


ETSI


--- Page 564  ---


3GPP TS 38.331 version 17.0.0 Release 17
563
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline Ephemerisinfo field descriptions \\
\hline \begin{tabular}{l}
anomaly \\
Satellite orbital parameter: Mean anomaly M at epoch time, see NIMA TR 8350.2 [X]. Unit in radian. \\
Value range \( 0 . . .2 \pi \) by step of \( 2 \pi{ }^{*} 2^{-24} \). Actual value \( =\mathrm{IE} \) value \( { }^{*}\left(2^{*} \pi^{*} 2^{-24}\right) \).
\end{tabular} \\
\hline \begin{tabular}{l}
eccentricity \\
Satellite orbital parameter: eccentricity e, see NIMA TR 8350.2 [X]. \\
Value range \( 0 . .0 .015 \) by step of \( 0.015{ }^{*} 2^{-19} \). Actual value \( = \) IE value \( { }^{*}\left(0.015{ }^{*} 2^{-19}\right) \).
\end{tabular} \\
\hline \begin{tabular}{l}
inclination \\
Satellite orbital parameter: inclination i, see NIMA TR 8350.2 [X]. Unit in radian. \\
Value range \( -\pi / 2 \ldots \pi / 2 \) by step of \( \pi / 2^{*} 2^{-19} \). Actual value \( =\mathrm{IE} \) value \( { }^{*}\left((\pi / 2)^{*} 2^{-19}\right) \).
\end{tabular} \\
\hline \begin{tabular}{l}
longitude \\
Satellite orbital parameter: longitude of ascending node \( \Omega \), see NIMA TR 8350.2 [X]. Unit in radian. \\
Value range \( 0 \ldots 2 \pi \) by step of \( 2 \pi{ }^{*} 2^{-21} \). Actual value \( =\mathrm{IE} \) value \( { }^{*}\left(2^{*} \pi^{*} 2^{-21}\right) \).
\end{tabular} \\
\hline \begin{tabular}{l}
periapsis \\
Satellite orbital parameter: argument of periapsis \( \omega \), see NIMA TR 8350.2 [X]. Unit in radian. \\
Value range \( 0 . .2 \pi \) by step of \( 2 \pi{ }^{*} 2^{-24} \). Actual value \( =\mathrm{IE} \) value \( { }^{*}\left(2^{*} \pi^{*} 2^{-24}\right) \).
\end{tabular} \\
\hline \begin{tabular}{l}
positionX, positionY, positionZ \\
\( \mathrm{X}, \mathrm{Y}, \mathrm{Z} \) coordinate of satellite position state vector in ECEF. Unit in meter. \\
Value range \( -42200000 \ldots 42200000 \) by step of 1.3. Actual value \( =\mathrm{IE} \) value \( { }^{*} 1.3 \).
\end{tabular} \\
\hline \begin{tabular}{l}
semiMajorAxis \\
Satellite orbital parameter: semi major axis \( \alpha \), see NIMA TR 8350.2 [X]. Unit in meter. \\
Value range \( 6500000 \ldots .43000000 \) by step of \( 2^{-33} \). Actual value \( =6500000+(43000000-6500000)^{*} \) IE value * \( 2^{-33} \).
\end{tabular} \\
\hline \begin{tabular}{l}
velocityVX, velocityVY, velocityVZ \\
\( \mathrm{X}, \mathrm{Y}, \mathrm{Z} \) coordinate of satellite velocity state vector in ECEF. Unit in meter/second. \\
Value range \( -8000 \ldots 8000 \) by step of 0.06 . Actual value \( = \) IE value \( { }^{*} 0.06 \).
\end{tabular} \\
\hline
\end{tabular}
- FeatureCombination

The IE FeatureCombination indicates a combination of features to be associated with a RA partition (i.e. an instance of FeatureCombinationPreambles).
FeatureCombination information element
```
-- ASNISTART
-- TAG-FEATURECOMBINATION-START
FeatureCombination-rl7 ::= SEQUENCE {
    redCap ENUMERATED {true} OPTIONAL, -- Need R
    smallData ENUMERATED {true} OPTIONAL, -- Need. R
    sliceGroup SliceGroupList-rl7 OPTIONAL, -- Need R
    covenh ENUMERATED {true} OPTIONAL, -- Need R
    laterThanRell7Features ENUMERATED {true} OPTIONAL, -- Need R
    ...
}
SliceGroupList-rl7 ::= SEQUENCE (SIZE (l..ffsUpperLimit)) OF SliceGroupID-rl7
-- TAG-FEATURECOMBINATION-STOP
```


ETSI


--- Page 565  ---


3GPP TS 38.331 version 17.0.0 Release 17
564
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

\begin{tabular}{|l|}
\hline FeatureCombinationindication field descriptions \\
\hline \begin{tabular}{l}
redCap \\
If present, this field indicates that RedCap is part of this feature combination.
\end{tabular} \\
\hline \begin{tabular}{l}
smallData \\
If present, this field indicates that Small Data is part of this feature combination.
\end{tabular} \\
\hline \begin{tabular}{l}
sliceGroup \\
If present, this field indicates slice group(s) that are part of this feature combination.
\end{tabular} \\
\hline \begin{tabular}{l}
covEnh \\
If present, this field indicates that coverage enhancement is part of this feature combination.
\end{tabular} \\
\hline \begin{tabular}{l}
laterThanRel17Features \\
If present, this field indicates that features introduced later than Rel-17 are part of this feature combination. A UE which does not support such features shall not use the associated featureCombinationPreambles.
\end{tabular} \\
\hline
\end{tabular}

Editor's note: The field descriptions may need to be revised, for example, the names may need to be more explicit.
- FeatureCombinationPreambles

The IE FeatureCombinationPreambles associates a set of preambles with a feature combination. For parameters which can be provided in this IE and also in RACHConfigCommon or MsgA-ConfigCommon: if a parameter provided in this IE is signalled, the UE applies this field value when performing Random Access using a preamble in this featureCombinationPreambles, otherwise the UE applies the corresponding value signalled in RACH-ConfigCommon or MsgA-ConfigCommon.

FeatureCombinationPreambles information element
```
-- ASNISTART
-- TAG-FEATURECOMBINATIONPREAMBLES-START
FeatureCombinationPreambles-rl7 ::= SEQUENCE {
    featureCombination-rl7 FeatureCombination-rl7,
    startPreambleForThisPartition-rl7 INTEGER (1..64),
    numberOfPreamblesForThisPartition-rl7 INTEGER (1..64),
    ssb-SharedRO-MaskIndex-rl7 INTEGER (l..15) OPTIONAL, -- Need R
    numberOfRA-PreamblesGroupA-rl7 INTEGER (l..64) OPTIONAL, -- Need. R
```

```
    featureSpecificParameters-rl7 SEQUENCE {
        rsrp-ThresholdSSB-rl7 RSRP-Range OPTIONAL, -- Need R
        rsrp-ThresholdMsg3-rl7 RSRP-Range OPTIONAL, -- Need R
            -- Editor's note: TBD if this parameter indeed can be partition-specific.
```

```
        ra-SizeGroupA-r17 ENUMERATED [b56, b144, b208, b256, b282, b480, b640, b800, b1000, b72, spare6,
                        spare5, spare4, spare3, spare2, sparel} OPTIONAL, -- Need R
        deltaPreamble-rl7 INTEGER (-1.6) OPTIONAL -- Need. R
    }
}
-- TAG-FEATURECOMBINATIONPREAMBLES-STOP
```


ETSI


--- Page 566  ---


3GPP TS 38.331 version 17.0.0 Release 17
565
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

\begin{tabular}{|l|}
\hline FeatureCombinationPreambles field descriptions \\
\hline \begin{tabular}{l}
deltaPreamble \\
Power offset between msg3 and RACH preamble transmission. If configured, this parameter overrides msg3-DeitaPreamble or msgA-DeltaPreamble, Actual value \( = \) field value \( { }^{*} 2 \) [dB] (see TS 38.213 [13], clause 7.1).
\end{tabular} \\
\hline \begin{tabular}{l}
featureCombination \\
Indicates which combination of features that the preambles indicated by this IE are associated with.
\end{tabular} \\
\hline \begin{tabular}{l}
messagePowerOffsetGroupB \\
Threshold for preamble selection. Value is in dB. Value minusinfinity corresponds to -infinity. Value \( d B 0 \) corresponds to \( 0 \mathrm{~dB}, d B 5 \) corresponds to 5 dB and so on (see TS 38.321 [3], clause 5.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfPreamblesForThisPartition \\
It determines how many consecutive preambles are associated to the Feature Combination starting from the starting preamble(s) per SSB.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfRA-PreamblesGroupA \\
It determines how many consecutive preambles are associated to Group A starting from the starting preamble(s). The remaining preambles associated to the Feature \\
Combination are associated to Group B
\end{tabular} \\
\hline \begin{tabular}{l}
ra-SizeGroupA \\
Transport Blocks size threshold in bits below which the UE shall use a contention-based RA preamble of group A. (see TS 38.321 [3], clause 5.1.2). If this feature combination preambles are associated to a RACH-ConfigCommon-twostepRA, this field correspond to msgA-RA-SizeGroupA, otherwise it corresponds to ra-SizeGroupA.
\end{tabular} \\
\hline \begin{tabular}{l}
rsrp-ThresholdSSB \\
L1-RSRP threshold used for determining whether a candidate beam may be used by the UE to attempt contention free random access to recover from beam failure (see TS 38.213 [13], clause 6). If this feature combination preambles are associated to a RACH-ConfigCommon-twostepRA, this field correspond to msgA-RSRP-ThresholdSSB, otherwise it corresponds to rsrp-ThresholdSSB.
\end{tabular} \\
\hline \begin{tabular}{l}
separateMsgA-PUSCH-Config \\
If present it specifies how the 2-step RACH preambles identified by this FeatureCombinationPreambles are mapped to a PUSCH slot separate from the one defined in MsgA-ConfigCommon-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-SharedRO-Maskindex \\
Mask index (see 38.321). \\
Indicates a subset of ROs where preambles are allocated for this feature combination. This field is configured when there is more than one RO per SSB. If the field is absent, and 4-step and 2-step has shared ROs, then all ROs are shared. \\
Editor's note: This field description can be clarified further later.
\end{tabular} \\
\hline \begin{tabular}{l}
startPreambleForThisPartition \\
It defines the first preamble associated with the Feature Combination. If \( \mathrm{N}<1 \) the first preamble in each PRACH occasion is the one having the same index indicated by this field. If \( \mathrm{N}>=1 \) in each PRACH occasion N blocks of preambles associated with the Feature Combination are define, each having start index \( n \cdot N_{\text {preamble }}^{\text {latal }} / N+ \) \\
startPreambleForThisPartition (see 38.213).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline MsgAConfigCommon & The field is optional present, Need R, if FeatureCombinationPreambles is included in RACH-ConfigCommonTwoStepRA. \\
Otherwise, it is absent, Need R.
\end{tabular}

ETSI


--- Page 567  ---


3GPP TS 38.331 version 17.0.0 Release 17
566
ETSI TS 138331 V17.0.0 (2022-05)
- FilterCoefficient

The IE FilterCoefficient specifies the measurement filtering coefficient. Value \( f c 0 \) corresponds to \( \mathrm{k}=0, f c l \) corresponds to \( \mathrm{k}=1 \), and so on.
FilterCoefficient information element
```
-- ASNISTART
-- TAG-FILTERCOEFFICIENT-START
```

```
-- TAG-FILTERCOEFFICIENT-STOP
-- ASNISTOP
```

- FreqBandIndicatorNR

The IE FreqBandIndicatorNR is used to convey an NR frequency band number as defined in TS 38.101-1 [15] and TS 38.101-2 [39].
FreqBandindicatorNR information element
```
-- ASNISTART
-- TAG-FREQBANDINDICATORNR-START
FreqBandIndicatorNR ::= INTEGER (1..1024)
-- TAG-FREQBANDINDICATORNR-STOP
-- ASNISTOP
```

- FreqPriorityListNRSlicing

The FreqPriorityListNRSlicing indicates cell reselection priorities for slicing.

FreqPriorityListNRSlicing information element
```
-- ASNISTART
-- TAG-FREQPRIORITYLISTNRSLICING-START
FreqPriorityListNRSlicing-rl7 ::= SEQUENCE (SIZE (O..maxFreq)) OF FreqPriorityNRSlicing-rl7
FreqPriorityNRSlicing-rl7 ::= SEQUENCE \
```

```
    ...
}
```


ETSI


--- Page 568  ---


3GPP TS 38.331 version 17.0.0 Release 17
567
ETSI TS 138331 V17.0.0 (2022-05)
```
SliceInfoList-rl7 := SEQUENCE (SIZE (l..maxSliceInfo-rl7)) OF SliceInfo-rl7
SliceInfo-rl7 ::=
    sliceGroupID-rl7
    cellReselectionP SliceGroupID-rl7,
    cellReselectionSubPriority-rl7 CellReselectionSubPriority
    sliceCellListNR-rl7
        sliceAllowCellListNR-rl7 SliceCellListNR-rl7,
        sliceExcludeCellListNR-rl7 SliceCellListNR-rl7
    }
    ...
}
SliceGroupID-rl7 := BIT STRING (SIZE(8)) -- The size is FFS, depends on slice group granulartiy
SliceCellListNR-rl7 := SEQUENCE (SIZE (l..maxCellSlice-rl7)) OF PCI-Range
-- TAG-FREQPRIORITYLISTNRSLICING-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline FreqPriorityListNRSlicing field descriptions \\
\hline \begin{tabular}{l}
FreqPriorityListNRSlicing \\
Indicates the list of frequency priority information for frequencies. The \( 1^{\text {st }} \) entry in the list corresponds to the current frequency (referring SIB2), the \( 2{ }^{\text {nd }} \) entry in the list corresponds to the first frequency indicated by the InterFreqCarrierFreqList in SIB4, and the \( 3{ }^{\text {rd }} \) entry in the list corresponds to the second frequency indicated by the InterFreqCarrierFreqList in SIB4, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sliceAllowCellListNR \\
Indicates the list of allow-listed neighbouring cells for slicing. If present, cells not listed in this list do not support the corresponding sliceGroup-frequency pair.
\end{tabular} \\
\hline \begin{tabular}{l}
sliceCellListNR \\
Indicates the list of allow-list or exclude-listed neighbour cells for slicing. If slicelnfo-r17 corresponds to the current frequency, this field should be absent. FFS if the field can be provided in RRCRelease.
\end{tabular} \\
\hline \begin{tabular}{l}
sliceExciudeCellListNR \\
Indicates the list of exclude-listed neighbouring cells for slicing. If present, cells not listed in this list support the corresponding slice sliceGroup-frequency pair.
\end{tabular} \\
\hline
\end{tabular}
- FrequencyInfoDL

The IE FrequencyInfoDL provides basic parameters of a downlink carrier and transmission thereon.
FrequencylnfoDL information element
```
-- ASNISTART
-- TAG-FREQUENCYINFODL-START
FrequencyInfoDL ::= SEQUENCE {
    absoluteFrequencySSB
    frequencyBandList
    absoluteFrequencyPointA
    scs-SpecificCarrierList
    ...
```

```
    ARFCN-ValueNR
    MultiFrequency OPTIONAL, -- Cond SpCellAdd.
    MultiFrequencyBandListNR,
    ARFCN-ValueNR,
    SEQUENCE (SIZE (1..maxSCSs)) OF SCS-SpecificCarrier,
```


ETSI


--- Page 569  ---


3GPP TS 38.331 version 17.0.0 Release 17
568
ETSI TS 138331 V17.0.0 (2022-05)

\}
-- TAG-FREQUENCYINFODL-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline FrequencyinfoDL field descriptions \\
\hline \begin{tabular}{l}
absoluteFrequencyPointA \\
Absolute frequency position of the reference resource block (Common RB 0). Its lowest subcarrier is also known as Point A (see TS 38.211 [16], clause 4.4.4.2). Note that the lower edge of the actual carrier is not defined by this field but rather in the scs-SpecificCarrierList.
\end{tabular} \\
\hline \begin{tabular}{l}
absoluteFrequencySSB \\
Frequency of the SSB to be used for this serving cell. SSB related parameters (e.g. SSB index) provided for a serving cell refer to this SSB frequency unless mentioned otherwise. The cell-defining SSB of the PCell is always on the sync raster. Frequencies are considered to be on the sync raster if they are also identifiable with a GSCN value (see TS 38.101-1 [15]). If the field is absent, the SSB related parameters should be absent, e.g. ssb-PositionsinBurst, ssb-periodicityServingCell and subcarrierSpacing in ServingCellConfigCommon IE. If the field is absent, the UE obtains timing reference from the SpCell or an SCell if applicable as described in TS 38.213[13], clause 4.1. This is only supported in case the SCell for which the UE obtains the timing reference is in the same frequency band as the cell (i.e. the SpCell or the SCell, respectively) from which the UE obtains the timing reference. \\
For cells supporting RedCap, on handover, corresponds to the cell-defining SSB.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyBandList \\
List containing only one frequency band to which this carrier(s) belongs. Multiple values are not supported.
\end{tabular} \\
\hline \begin{tabular}{l}
scs-SpecificCarrierList \\
A set of carriers for different subcarrier spacings (numerologies). Defined in relation to Point A. The network configures a scs-SpecificCarrier at least for each numerology (SCS) that is used e.g. in a BWP (see TS 38.211 [16], clause 5.3).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline SpCellAdd & The field is mandatory present if this FrequencylnfoDL is for SpCell. Otherwise the field is optionally present, Need S. \\
\hline
\end{tabular}
- FrequencyInfoDL-SIB

The IE FrequencyInfoDL-SIB provides basic parameters of a downlink carrier and transmission thereon.
FrequencyinfoDL-SIB information element
```
-- ASNISTART
-- TAG-FREQUENCYINFODL-SIB-START
FrequencyInfoDL-SIB ::= SEQUENCE {
    frequencyBandList
    offsetToPointA
    scs-SpecificCarrierList SEQUENCE (SIZE (l..maxSCSs)) OF SCS-SpecificCarrier
}
-- TAG-FREQUENCYINFODL-SIB-STOP
-- ASNISTOP
```


ETSI


--- Page 570  ---


3GPP TS 38.331 version 17.0.0 Release 17
569
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline FrequencyinfoDL-SIB field descriptions \\
\hline \begin{tabular}{l}
offsetToPointA \\
Represents the offset to Point A as defined in TS 38.211 [16], clause 4.4.4.2.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyBandList \\
List of one or multiple frequency bands to which this carrier(s) belongs.
\end{tabular} \\
\hline \begin{tabular}{l}
scs-SpecificCarrierList \\
A set of carriers for different subcarrier spacings (numerologies). Defined in relation to Point A (see TS 38.211 [16], clause 5.3). The network configures this for all SCSs that are used in DL BWPs in this serving cell.
\end{tabular} \\
\hline
\end{tabular}
-
FrequencyInfoUL
The IE FrequencyInfoUL provides basic parameters of an uplink carrier and transmission thereon.
FrequencyinfoUL information element
```
-- ASNISTART
-- TAG-FREQUENCYINFOUL-START
FrequencyInfoUL ::=
    frequencyBandList
    absoluteFrequencyPointA
    scs-SpecificCarrierList
    additionalSpectrumEmission
    p-Max
    frequencyShift7p5khz
    ...
}
-- TAG-FREQUENCYINFOUL-STOP
-- ASNISTOP
```

SEQUENCE 1
```
MultifrequencyBandListNR
ARFCN-ValueNR
SEQUENCE (SIZE (l..maxSCSs)) OF SCS-SpecificCarrier,
AdditionalSpectrumEmission
P-Max
ENUMERATED {true}
```

```
OPTIONAL, -- Cond FDD-OrSUL
OPTIONAL, -- Cond FDD-OrSUL
OPTIONAL, -- Need. S
OPTIONAL, -- Need. S
OPTIONAL, -- Cond FDD-TDD-OrSUL-Optional
```


ETSI


--- Page 571  ---


3GPP TS 38.331 version 17.0.0 Release 17
570
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline FrequencyinfoUL field descriptions \\
\hline \begin{tabular}{l}
absoluteFrequencyPointA \\
Absolute frequency of the reference resource block (Common RB 0). Its lowest subcarrier is also known as Point A. Note that the lower edge of the actual carrier is not defined by this field but rather in the scs-SpecificCarrierList (see TS 38.211 [16], clause 4.4.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
additionalSpectrumEmission \\
The additional spectrum emission requirements to be applied by the UE on this uplink. If the field is absent, the UE uses value 0 for the additionalSpectrumEmission (see TS 38.101-1 [15], table 6.2.3.1-1A, and TS 38.101-2 [39], table 6.2.3.1-2). Network configures the same value in additionalSpectrumEmission for all uplink carrier(s) of the same band with UL configured. The additionalSpectrumEmission is applicable for all uplink carriers of the same band with UL configured.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyBandList \\
List containing only one frequency band to which this carrier(s) belongs. Multiple values are not supported.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyShift7p5khz \\
Enable the NR UL transmission with a 7.5 kHz shift to the LTE raster. If the field is absent, the frequency shift is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
p-Max \\
Maximum transmit power allowed in this serving cell. The maximum transmit power that the UE may use on this serving cell may be additionally limited by \( p \)-NR-FR1 (configured for the cell group) and by p-UE-FR1 (configured total for all serving cells operating on FR1). If absent, the UE applies the maximum power according to TS 38.1011 [15] in case of an FR1 cell or TS 38.101-2 [39] in case of an FR2 cell. In this release of the specification, if p-Max is present on a carrier frequency in FR2, the UE shall ignore the field and applies the maximum power according to TS 38.101-2 [39]. Value in dBm. This field is ignored by IAB-MT, the IAB-MT applies output power and emissions requirements, as specified in TS 38.174 [63].
\end{tabular} \\
\hline \begin{tabular}{l}
scs-SpecificCarrierList \\
A set of carriers for different subcarrier spacings (numerologies). Defined in relation to Point A. The network configures a scs-SpecificCarrier at least for each numerology (SCS) that is used e.g. in a BWP (see TS 38.211 [16], clause 5.3).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline FDD-OrSUL & The field is mandatory present if this FrequencylnfoUL is for the paired UL for a DL (defined in a FrequencylinfoDL) or if this FrequencylnfoUL is for a supplementary uplink (SUL). It is absent, Need R, otherwise (if this FrequencylnfoUL is for an unpaired UL (TDD). \\
\hline FDD-TDD-OrSUL-Optional & The field is optionally present, Need R, if this FrequencylinfoUL is for the paired UL for a DL (defined in a FrequencylinfoDL), or if this FrequencylnfoUL is for an unpaired UL (TDD) in certain bands (as defined in clause 5.4.2.1 of TS 38.101-1 and in clause 5.4.2.1 of TS 38.104 [12]), or if this Frequency/nfoUL is for a supplementary uplink (SUL). It is absent, Need R, otherwise. \\
\hline
\end{tabular}
- FrequencyInfoUL-SIB

The IE FrequencyInfoUL-SIB provides basic parameters of an uplink carrier and transmission thereon.
FrequencyInfoUL-SIB information element
-- ASNISTART
-- TAG-EREQUENCYINEOUL-SIB-START

FrequencyInfoUL-SIB ::=
frequencyBandList absoluteFrequencyPointA
scs-SpecificCarrierList
p-Max

SEQUENCE 1
MultiFrequencyBandListNR-SIB OPTIONAL, -- Cond FDD-OrSUL
ARFCN-ValueNR OPTIONAL, -- COND FDD-OrSUL
SEQUENCE (SIZE (1..maxSCSs)) OF SCS-SpecificCarrier,
P-Max
OPTIONAL, -- Need S

ETSI


--- Page 572  ---


3GPP TS 38.331 version 17.0.0 Release 17
571
ETSI TS 138331 V17.0.0 (2022-05)
```
    ...
}
-- TAG-FREQUENCYINFOUL-SIB-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline FrequencyinfoUL-SIB field descriptions \\
\hline \begin{tabular}{l}
absoluteFrequencyPointA \\
Absolute frequency of the reference resource block (Common RB 0). Its lowest subcarrier is also known as Point A. Note that the lower edge of the actual carrier is not defined by this field but rather in the scs-SpecificCarrierList (see TS 38.211 [16], clause 4.4.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyBandList \\
Provides the frequency band indicator and a list of additionalPmax and additionalSpectrumEmission values as defined in TS 38.101-1 [15], table 6.2.3.1-1, and TS 38.101-2 [39], table 6.2.3.1-2. The UE shall apply the first listed band which it supports in the frequencyBandList field.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyShift7p5khz \\
Enable the NR UL transmission with a 7.5 kHz shift to the LTE raster. If the field is absent, the frequency shift is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
p-Max \\
Value in dBm applicable for the cell. If absent the UE applies the maximum power according to TS 38.101-1 [15] in case of an FR1 cell or TS 38.101-2 [39] in case of an FR2 cell. In this release of the specification, if p-Max is present on a carrier frequency in FR2, the UE shall ignore the field and applies the maximum power according to TS 38.1012 [39]. This field is ignored by IAB-MT, the IAB-MT applies output power and emissions requirements, as specified in TS 38.174 [63].
\end{tabular} \\
\hline \begin{tabular}{l}
scs-SpecificCarrierList \\
A set of carriers for different subcarrier spacings (numerologies). Defined in relation to Point A (see TS 38.211 [16], clause 5.3). The network configures this for all SCSs that are used in UL BWPs configured in this serving cell.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline FDD-OrSUL & The field is mandatory present if this Frequency/nfoUL-SIB is for the paired UL for a DL (defined in a Frequency/nfoDL-SIB) or if this FrequencylnfoUL-SIB is for a supplementary uplink (SUL). It is absent otherwise (if this FrequencylnfoUL-SIB is for an unpaired UL (TDD). \\
\hline FDD-TDD-OrSUL-Optional & The field is optionally present, Need R, if this Frequency/nfoUL-SIB is for the paired UL for a DL (defined in a Frequency/nfoDL-S/B), or if this Frequency/nfoUL-SIB is for an unpaired UL (TDD) in certain bands (as defined in clause 5.4.2.1 of TS 38.101-1 and in clause 5.4.2.1 of TS 38.104 [12]), or if this Frequency/nfoUL-SIB is for a supplementary uplink (SUL). It is absent otherwise. \\
\hline
\end{tabular}
- GapPriority

The IE GapPriority is used to identify the priority of a gap configuration.
GapPriority information element
```
-- ASNISTART
-- TAG-GAPPRIORITY-START
```

GapPriority-rl7 ::= INTEGER (l..MaxNrOfGapPri-rl7)

ETSI


--- Page 573  ---


3GPP TS 38.331 version 17.0.0 Release 17
572
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-GAPPRIORITY-STOP
-- ASNISTOP
- HighSpeedConfig

The IE HighSpeedConfig is used to configure parameters for high speed scenarios.

HighSpeedConfig information element
```
-- ASNISTART
-- TAG-HIGHSPEEDCONFIG-START
HighSpeedConfig-rl6 ::= SEQUENCE \
    highSpeedMeasFlag-rl6 ENUMERATED {true} OPTIONAL, -- Need. R
    highSpeedDemodFlag-rl6 ENUMERATED {true} OPTIONAL, -- Need. R
    ...
}
HighSpeedConfig-vl700 ::= SEQUENCE \
    highSpeedMeasCA-Scell-rl7 ENUMERATED {true} OPTIONAL, -- Need R
    highSpeedMeasInterFreq-rl7 ENUMERATED {true} OPTIONAL, -- Need R
    highSpeedDemodCA-Scell-rl7 ENUMERATED {true} OPTIONAL, -- Need R
    ...
}
HighSpeedConfigFR2-rl7 ::= SEQUENCE \
    highSpeedMeasFlagFR2-rl7 ENUMERATED {setl, set2}
    highSpeedDeploymentTypeFR2-rl7
    highSpeedLargeOneStepUL-TimingFR2-rl7 bidirectional} -- True} R
    ...
}
-- TAG-HIGHSPEEDCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 574  ---


3GPP TS 38.331 version 17.0.0 Release 17
573
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline HighSpeedConfig field descriptions \\
\hline \begin{tabular}{l}
HighSpeedDemodCA-Scell \\
If the field is present and UE supports demodulationEnhancementCA-r17, the UE shall apply the enhanced demodulation processing for HST-SFN joint transmission scheme with velocity up to \( 500 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.101-4 [59]. This parameter only applies to SCell.
\end{tabular} \\
\hline \begin{tabular}{l}
highSpeedDemodFlag \\
If the field is present and UE supports demodulationEnhancement-r16, the UE shall apply the enhanced demodulation processing for HST-SFN joint transmission scheme with velocity up to \( 500 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.101-4 [59]. This parameter only applies to SpCell.
\end{tabular} \\
\hline \begin{tabular}{l}
highSpeedDeploymentTypeFR2 \\
If the field is present, and field value is unidirectional, the UE shall assume uni-directional deployment or if field value is birectional the UE shall assume bidirectional deployment for FR2 up to \( 350 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
highSpeedLargeOneSteptUL-TimingFR2 \\
If the field is present, large one step UE autonomous uplink transmit timing adjustment for FR2 up to \( 350 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.133 [14] is enabled.
\end{tabular} \\
\hline \begin{tabular}{l}
highSpeedMeasCA-Scell \\
If the field is present and UE supports measurementEnhancementCA-r17, the UE shall apply the enhanced RRM requirements to SCell for carrier aggregation to support high speed up to \( 500 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.133 [14]. This parameter only applies to SCell.
\end{tabular} \\
\hline \begin{tabular}{l}
highSpeedMeasFlag \\
If the field is present and UE supports measurementEnhancement-r16, the UE shall apply the enhanced intra-NR and inter-RAT EUTRAN RRM requirements to support high speed up to \( 500 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.133 [14]. \\
If the field is present and UE supports intraNR-MeasurementEnhancement-r16, the UE shall apply enhanced intra-NR RRM requirement to support high speed up to \( 500 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.133 [14]. \\
If the field is present and UE supports interRAT-MeasurementEnhancement-r16, the UE shall apply enhanced inter-RAT EUTRAN RRM requirement to support high speed up to \( 500 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.133 [14]. \\
This parameter only applies to SpCell.
\end{tabular} \\
\hline \begin{tabular}{l}
highSpeedMeasFlagFR2 \\
If the field is present, the UE shall apply enhanced intra-NR RRM requirement set one to support high speed up to \( 350 \mathrm{~km} / \mathrm{h} \) for FR2 as specified in TS 38.133 [14], if the field value is set1 or RRM requirement set two if the field value is set2.
\end{tabular} \\
\hline \begin{tabular}{l}
highSpeedMeasInterFreq \\
If the field is present and UE supports measurementEnhancementinterFreq-r17, the UE shall apply the enhanced RRM requirements for inter-frequency measurement in RRC_CONNECTED to support high speed up to \( 500 \mathrm{~km} / \mathrm{h} \) as specified in TS 38.133 [14].
\end{tabular} \\
\hline
\end{tabular}
- Hysteresis, HysteresisLocation

The IE Hysteresis is a parameter used within the entry and leave condition of an event triggered reporting condition. The actual value is field value * 0.5 dB . The HysteresisLocation is a parameter used within entry and leave condition of a location based event triggered reporting condition. The actual value of field HysteresisLocation is field value * 10 meters.

Hysteresis information element
```
-- ASNISTART
-- TAG-HYSTERESIS-START
Hysteresis ::= INTEGER (0..30)
HysteresisLocation-rl7 ::= INTEGER (0..32768)
-- TAG-HYSTERESIS-STOP
```


ETSI


--- Page 575  ---


3GPP TS 38.331 version 17.0.0 Release 17
574
ETSI TS 138331 V17.0.0 (2022-05)

-- ASNISTOP
- InvalidSymbolPattern

The IE InvalidSymbolPattern is used to configure one invalid symbol pattern for PUSCH transmission repetition type B applicable for both DCI format \( 0 \_1 \) and \( 0 \_2 \), see TS 38.214 [19], clause 6.1.

InvalidSymboIPattern information element
```
-- ASNISTART
-- TAG-INVALIDSYMBOLPATTERN-START
InvalidSymbolPattern-rl6 ::= SEQUENCE \
    symbols-rl6
        CHOICE \
        BIT STRING (SIZE (14)),
    },
    periodicityAndPattern-rl6
        n2 
        BIT STRING (SIZE (2)),
        BIT STRING (SIZE (4)),
        BIT STRING (SIZE (5)),
        BIT STRING (SIZE (8)),
        BIT STRING (SIZE (10))
        n40 BIT STRING (SIZE (40))
    }
    \cdots
}
-- TAG-INVALIDSYMBOLPATTERN-STOP
-- ASN1STOP
```


\begin{tabular}{|l|}
\hline InvalidSymbolPattern field descriptions \\
\hline \begin{tabular}{l}
periodicityAndPattern \\
A time domain repetition pattern at which the pattern defined by symbols recurs. This slot pattern repeats itself continuously. When the field is not configured, the UE uses the value n1 (see TS 38.214 [19], clause 6.1).
\end{tabular} \\
\hline \begin{tabular}{l}
symbols \\
A symbol level bitmap in time domain (see TS 38.214[19], clause 6.1). \\
For oneSlot, if ECP is configured, the first 12 bits represent the symbols within the slot and the last two bits within the bitstring are ignored by the UE; Otherwise, the 14 bits represent the symbols within the slot. \\
For twoSlots, if ECP is configured, the first 12 bits represent the symbols within the first slot and the next 12 bits represent the symbols in the second slot and the last four bits within the bit string are ignored by the UE; Otherwise, the first 14 bits represent the symbols within the first slot and the next 14 bits represent the symbols in the second slot. \\
For the bits representing symbols in a slot, the most significant bit of the bit string represents the first symbol in the slot and the second most significant bit represents the second symbol in the slot and so on. \\
This pattern recurs (in time domain) with the configured periodicityAndPattern.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 576  ---


3GPP TS 38.331 version 17.0.0 Release 17
575
ETSI TS 138331 V17.0.0 (2022-05)
- \( \quad \) I-RNTI-Value

The IE I-RNTI-Value is used to identify the suspended UE context of a UE in RRC_INACTIVE.
I-RNTI-Value information element
```
-- ASNISTART
-- TAG-I-RNTI-VALUE-START
I-RNTI-Value ::= BIT STRING (SIZE(40))
-- TAG-I-RNTI-VALUE-STOP
-- ASNISTOP
```

- LBT-FailureRecoveryConfig

The IE LBT-FailureRecoveryConfig-r16 is used to configure the parameters used for detection of consistent uplink LBT failures for operation with shared spectrum channel access, as specified in TS 38.321 [3].

LBT-FailureRecoveryConfig information element
```
-- ASNISTART
-- TAG-LBT-FAILURERECOVERYCONFIG-START
LBT-FailureRecoveryConfig-rl6 ::= SEQUENCE {
    lot-FailureInstanceMaxCount-rl6 ENUMERATED {n4, n8, nl6, n32, n64, nl28},
    lot-FailureDetectionTimer-r16 ENUMERATED {msl0, ms20, ms40, ms80, msl60, ms320},
    ...
}
-- TAG-LBT-FAILURERECOVERYCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline LBT-FailureRecoveryConfig field descriptions \\
\hline \begin{tabular}{l}
Ibt-FailureDetectionTimer \\
Timer for consistent uplink LBT failure detection (see TS 38.321 [3]). Value \( m s 10 \) corresponds to 10 ms , value \( m s 20 \) corresponds to 20 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
Ibt-FailureinstanceMaxCount \\
This field determines after how many LBT failure indications received from the physical layer the UE triggers uplink LBT failure recovery (see TS 38.321 [3]). Value n4 corresponds to 4 , value \( n 8 \) corresponds to 8 , and so on.
\end{tabular} \\
\hline
\end{tabular}
- LocationInfo

The IE LocationInfo is used to transfer available detailed location information, Bluetooth, WLAN and sensor available measurement results at the UE.

ETSI


--- Page 577  ---


3GPP TS 38.331 version 17.0.0 Release 17
576
ETSI TS 138331 V17.0.0 (2022-05)

Locationinfo information element
```
-- ASNISTART
-- TAG-LOCATIONINFO-START
LocationInfo-r16 ::= SEQUENCE {
    commonLocationInfo-r16 CommonLocationInfo-r16 OPTIONAL,
    bt-LocationInfo-rl6 LogMeasResultListBT-rl6 OPTIONAL,
    wlan-LocationInfo-rl6 LogMeasResultListWLAN-rl6 OPTIONAL,
    sensor-LocationInfo-rl6 Sensor-LocationInfo-rl6 OPTIONAL,
...
}
-- TAG-LOCATIONINFO-STOP
-- ASNISTOP
```


LocationMeasurement/nfo
The IE LocationMeasurementInfo defines the information sent by the UE to the network to assist with the configuration of measurement gaps for location related measurements.

LocationMeasurementinfo information element
```
-- ASNISTART
-- TAG-LOCATIONMEASUREMENTINFO-START
LocationMeasurementInfo ::= CHOICE [
    eutra-RSTD EUTRA-RSTD-InfoList,
    ...,
    eutra-FineTimingDetection NULL,
    nr-PRS-Measurement-r16 NR-PRS-MeasurementInfoList-r16
}
EUTRA-RSTD-InfoList ::= SEQUENCE (SIZE (l..maxInterRAT-RSTD-Freq)) OF EUTRA-RSTD-Info
EUTRA-RSTD-Info ::= SEQUENCE \
    carrierFreq ARFCN-ValueEUTRA,
    measPRS-Offset INTEGER (0..39),
    ...
}
NR-PRS-MeasurementInfoList-rl6 ::= SEQUENCE (SIZE (l..maxFreqLayers)) OF NR-PRS-MeasurementInfo-rl6
NR-PRS-MeasurementInfo-rl6 ::= SEQUENCE \
    dl-PRS-PointA-rl6 ARFCN-ValueNR,
    nr-MeasPRS-RepetitionAndOffset-rl6 CHOICE {
        ms20-r16 INTEGER (0..19),
        ms40-r16 INTEGER (0..39),
        ms80-r16 INTEGER (0..79),
        msl60-rl6 INTEGER (0..159),
        ...
    },
```


ETSI


--- Page 578  ---


3GPP TS 38.331 version 17.0.0 Release 17
577
ETSI TS 138331 V17.0.0 (2022-05)
```
    nr-Meas PRS-length-rl6
    ...
}
```

-- TAG-LOCATIONMEASUREMENTINEO-STOP
-- ASNISTOP
ENUMERATED \{msldot5, ms3, ms3dot5, ms4, ms5dot5, ms6, ms10, ms20\},

\begin{tabular}{|l|}
\hline LocationMeasurementinfo field descriptions \\
\hline \begin{tabular}{l}
carrierFreq \\
The EARFCN value of the carrier received from upper layers for which the UE needs to perform the inter-RAT RSTD measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
measPRS-Offset \\
Indicates the requested gap offset for performing RSTD measurements towards E-UTRA. It is the smallest subframe offset from the beginning of subframe 0 of SFN=0 of the serving cell of the requested gap for measuring PRS positioning occasions in the carrier frequency carrierFreq for which the UE needs to perform the inter-RAT RSTD measurements. The PRS positioning occasion information is received from upper layers. The value of measPRS-Offset is obtained by mapping the starting subframe of the PRS positioning occasion in the measured cell onto the corresponding subframe in the serving cell and is calculated as the serving cell's number of subframes from SFN=0 mod 40. \\
The UE shall take into account any additional time required by the UE to start PRS measurements on the other carrier when it does this mapping for determining the measPRS-Offset. \\
NOTE: Figure 6.2.2-1 in TS 36.331[10] illustrates the measPRS-Offset field.
\end{tabular} \\
\hline \begin{tabular}{l}
dI-PRS-PointA \\
The ARFCN value of the carrier received from upper layers for which the UE needs to perform the NR DL-PRS measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
nr-MeasPRS-RepetitionAndOffset \\
Indicates the gap periodicity in ms and offset in number of subframes of the requested measurement gap for performing NR DL-PRS measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
nr-MeasPRS-length \\
Indicates measurement gap length in ms of the requested measurement gap for performing NR DL-PRS measurements. The measurement gap length is according to in Table 9.1.2-1 in TS 38.133 [14].
\end{tabular} \\
\hline
\end{tabular}
- LogicalChannelConfig

The IE LogicalChannelConfig is used to configure the logical channel parameters.
Logica/Channe/Config information element
```
-- ASNISTART
-- TAG-LOGICALCHANNELCONFIG-START
LogicalChannelConfig ::=
    ul-SpecificParameters
        priority
        prioritisedBitRate
        bucketSizeDuration
        allowedServingCells
        allowedSCS-List
        bucketsi 
        allowedSCS-List
```

```
                kBPPO; kBPS16, kBPS32, kBPS64, kBPS128, kBPS206, kBps512,
SEQUENCE \
    SEQUENCE \
        INTEGER (1..16),
        ENUMERATED {kBps0, kBps8, kBps16, kBps32, kBps64, kBps128, kBps256, kBps512,
        kBpsl024, kBps2048, kBps4096, kBps8192, kBps16384, kBps32768, kBps65536, infinity},
    ENUMERATED \ms5, mslo, ms20, ms50, msl00, msl50, ms300, ms500, msl000,
                sparel, spare6, spare5, spare4, spare3, spare2, sparel},
```


ETSI


--- Page 579  ---


3GPP TS 38.331 version 17.0.0 Release 17
578
ETSI TS 138331 V17.0.0 (2022-05)
```
            OPTIONAL, -- Need. R
        configuredGrantTypelAllowed.
        ENUMERATED {true} OPTIONAL, -- Need R
```

```
        l,
        \textbf{mannelsr-DelayTimer
```

```
        []
```

```
        ]],
        [ [
        logicalChannelGroup-IAB-Ext-rl7
        allowedHARQ-mode
        ]]
```

```
    ...;
    channelAccessPriority-rl6
    bitRateMultiplier-rl6
    ]]
}
-- TAG-LOGICALCHANNELCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 580  ---


3GPP TS 38.331 version 17.0.0 Release 17
579
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline LogicalChannelConfig field descriptions \\
\hline \begin{tabular}{l}
allowedCG-List \\
This restriction applies only when the UL grant is a configured grant. If present, UL MAC SDUs from this logical channel can only be mapped to the indicated configured grant configuration. If the size of the sequence is zero, then UL MAC SDUs from this logical channel cannot be mapped to any configured grant configurations. If the field is not present, UL MAC SDUs from this logical channel can be mapped to any configured grant configurations. If the field configuredGrantType1Allowed is present, only those configured grant type 1 configuration indicated in this sequence are allowed for use by this logical channel; otherwise, this sequence shall not include any configured grant type 1 configuration. Corresponds to "allowedCG-List" as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
allowedHARQ-mode \\
Indicates the allowed HARQ mode of a HARQ process mapped to this logical channel. If the parameter is not configured, there is no restriction for HARQ mode for the mapping. This field also applies to SRB1, SRB2 and SRB3.
\end{tabular} \\
\hline \begin{tabular}{l}
allowedPHY-Prioritylndex \\
This restriction applies only when the UL grant is a dynamic grant. If the field is present and the dynamic grant has a PHY-priority index, UL MAC SDUs from this logical channel can only be mapped to the dynamic grants indicating PHY-priority index equal to the values configured by this field. If the field is present and the dynamic grant does not have a PHY-priority index, UL MAC SDUs from this logical channel can only be mapped to this dynamic grant if the value of the field is \( p 0 \), see TS 38.213 [13], clause 9. If the field is not present, UL MAC SDUs from this logical channel can be mapped to any dynamic grants. Corresponds to "allowedPHY-Prioritylndex" as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
allowedSCS-List \\
If present, UL MAC SDUs from this logical channel can only be mapped to the indicated numerology. Otherwise, UL MAC SDUs from this logical channel can be mapped to any configured numerology. Corresponds to 'allowedSCS-List' as specified in TS 38.321 [3]. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15,30 , or 60 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline \begin{tabular}{l}
allowedServingCells \\
If present, UL MAC SDUs from this logical channel can only be mapped to the serving cells indicated in this list. Otherwise, UL MAC SDUs from this logical channel can be mapped to any configured serving cell of this cell group. Corresponds to 'allowedServingCells' in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
bitRateMultiplier \\
Bit rate multiplier for recommended bit rate MAC CE as specified in TS 38.321 [3]. Value \( x 40 \) indicates bit rate multiplier 40, value \( x 70 \) indicates bit rate multiplier 70 and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
bitRateQueryProhibitTimer \\
The timer is used for bit rate recommendation query in TS 38.321 [3], in seconds. Value s0 means 0 s , s0dot4 means 0.4 s and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
bucketSizeDuration \\
Value in ms. ms 5 corresponds to 5 ms , value ms 10 corresponds to 10 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
channelAccessPriority \\
Indicates the Channel Access Priority Class (CAPC), as specified in TS 38.300 [2], to be used on uplink transmissions for operation with shared spectrum channel access. The network configures this field only for SRB2 and DRBs.
\end{tabular} \\
\hline \begin{tabular}{l}
configuredGrantType1Allowed \\
If present, or if the capability lcp-Restriction as specified in TS 38.306 [26] is not supported, UL MAC SDUs from this logical channel can be transmitted on a configured grant type 1. Otherwise, UL MAC SDUs from this logical channel cannot be transmitted on a configured grant type 1. Corresponds to 'configuredGrantType1Allowed' in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
IogicalChannelGroup, IogicalChannelGroup-IAB-Ext \\
ID of the logical channel group, as specified in TS 38.321 [3], which the logical channel belongs to. The logicalChannelGroup-IAB-Ext is only applicable to the IAB-MT. When logicalChannelGroup-IAB-Ext is configured, logicalChannelGroup shall be ignored.
\end{tabular} \\
\hline \begin{tabular}{l}
IogicalChanneISR-Mask \\
Controls SR triggering when a configured uplink grant of type1 or type2 is configured. true indicates that SR masking is configured for this logical channel as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
logicalChannelSR-DelayTimerApplied \\
Indicates whether to apply the delay timer for SR transmission for this logical channel. Set to false if logicalChannelSR-Delay Timer is not included in BSR-Config.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 581  ---


3GPP TS 38.331 version 17.0.0 Release 17
580
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
maxPUSCH-Duration \\
If present, UL MAC SDUs from this logical channel can only be transmitted using uplink grants that result in a PUSCH duration shorter than or equal to the duration indicated by this field. Otherwise, UL MAC SDUs from this logical channel can be transmitted using an uplink grant resulting in any PUSCH duration. Corresponds to "maxPUSCHDuration" in TS 38.321 [3]. The PUSCH duration is calculated based on the same length of all symbols, and the shortest length applies if the symbol lengths are different.
\end{tabular} \\
\hline \begin{tabular}{l}
priority \\
Logical channel priority, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
prioritisedBitRate \\
Value in kiloBytes/s. Value \( k B p s 0 \) corresponds to 0 kiloBytes/s, value \( k B p s 8 \) corresponds to 8 kiloBytes/s, value \( k B p s 16 \) corresponds to 16 kiloBytes/s, and so on. For SRBs, the value can only be set to infinity.
\end{tabular} \\
\hline \begin{tabular}{l}
scheduling Requestid \\
If present, it indicates the scheduling request configuration applicable for this logical channel, as specified in TS 38.321 [3].
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline PDCP-CADuplication & The field is mandatory present if the DRB/SRB associated with this logical channel is configured with PDCP CA duplication in UL in the cell group in which this IE is included (i.e. the PDCP entity is associated with multiple RLC entities belonging to this cell group). Otherwise the field is optionally present, need R . \\
\hline UL & The field is mandatory present for a logical channel with uplink if it serves DRB. It is optionally present, Need R, for a logical channel with uplink if it serves an SRB. Otherwise it is absent. \\
\hline
\end{tabular}
- LogicalChannelldentity

The IE LogicalChannelldentity is used to identify one logical channel (LogicalChannelConfig) and the corresponding RLC bearer (RLC-BearerConfig) or BH RLC channel (BH-RLC-ChannelConfig) or Uu Relay RLC channel (Uu-Relay-RLC-ChannelConfig).

Logica/Channe//dentity information element
-- ASNISTART
-- TAG-LOGICALCHANNELIDENTITY-START

LogicalChannelIdentity ::= INTEGER (1..maxLC-ID)
-- TAG-LOGICALCHANNELIDENTITY-STOP
-- ASNISTOP
- MAC-CellGroupConfig

The IE MAC-CellGroupConfig is used to configure MAC parameters for a cell group, including DRX.
MAC-CellGroupConfig information element
-- ASNISTART
-- TAG-MAC-CELLGROUPCONFIG-START

ETSI


--- Page 582  ---


3GPP TS 38.331 version 17.0.0 Release 17
581
ETSI TS 138331 V17.0.0 (2022-05)
```
MAC-CellGroupConfig ::= SEQUENCE {
    drx-Config SetupRelease { DRX-Config} \
    schedulingRequestConfig SchedulingRequestConfig
    bsr-Config BSR-Config
    tag-Config TAG-Config
    phr-Config SetupRelease { PHR-Config }
    skipUplinkTxDynamic BOOLEAN,
    ...,
    [ [
    csi-Mask BOOLEAN
    dataInactivityTimer SetupRelease { DataInactivityTimer } OPTIONAL -- Cond MCG-Only
    ]],
    [ [
    usePreBSR-rl6 ENUMERATED {true}
    schedulingRequestID-LBT-SCell-rl6 SchedulingRequestId
    lch-BasedPrioritization-rl6 ENUMERATED {enabled}
    schedulingRequestID-BFR-SCell-rl6 SchedulingRequestId
    drx-ConfigSecondaryGroup-rl6 SetupRelease { DRX-ConfigSecondaryGroup } OPTIONAL -- Need M
    ]],
    [ [
    enhancedSkipUplinkTxDynamic-r16 ENUMERATED {true} OPTIONAL, -- Need. R
    enhancedSkipUplinkTxConfigured-rl6 ENUMERATED {true}
    ]],
    [ [
    intraCG-Prioritization-rl7 ENUMERATED {enabled} OPTIONAL, -- Cond LCH-PrioWithReTxTimer
    drx-ConfigSL-rl7 SetupRelease { DRX-ConfigSL } OPTIONAL, -- Cond ModelAndDRX-Only
    drx-ConfigExt-vl700 SetupRelease { DRX-ConfigExt-vl700 } OPTIONAL, -- Cond DRX
    schedulingRequestID-BER-rl7 SchedulingRequestId
    schedulingRequestID-BFR2-rl7 SchedulingRequestId
    schedulingRequestConfig-vl700
    --Editor's note: extension done according to A4.3.5
    offsetThresholdTA-rl7 ENUMERATED {ms0dot5, msl, ms2, ms3, ms4, ms5, ms6, ms7, ms8, ms9, msl0, msll, msl2,
            msl3, msl4, msl5} OPTIONAL, -- Need. R
    --Editor's note: may need to add here parameter TimingAdvanceSR
    g-RNTI-ConfigToAddModList-rl7 SEQUENCE (SIZE (l..maxG-RNTI-rl7)) OF Group-Config-rl7 OPTIONAL, -- Need N
    g-RNTI-ConfigToReleaseList-rl7 SEQUENCE (SIZE (l..maxG-RNTI-rl7)) OF G-RNTI-ConfigId-rl7 OPTIONAL, -- Need. N
    g-CS-RNTI-ConfigToAddModList-rl7 SEQUENCE (SIZE (l..maxG-CS-RNTI-rl7)) OF Group-Config-rl7 OPTIONAL, -- Need N
    g-CS-RNTI-ConfigToReleaseList-rl7 SEQUENCE (SIZE (l..maxG-CS-RNTI-rl7)) OF G-CS-RNTI-ConfigId-rl7 OPTIONAL, -- Need N
    allowCSI-SRS-Tx-MulticastDRX-Active-rl7 BOOLEAN
    ]]
}
DataInactivityTimer ::= ENUMERATED {sl, s2, s3, s5, s7, sl0, sl5, s20, s40, s50, s60, s80, sl00, sl20, sl50, sl80}
Group-Config-rl7 ::= SEQUENCE \
    groupCommon-RNTI CHOICE {
        g-RNTI SEQUENCE {
            g-RNTI-ConfigId-rl7 G-RNTI-ConfigId-rl7,
            g-RNTI-rl7 RNTI-Value
        },
        g-CS-RNTI SEQUENCE \
            g-CS-RNTI-ConfigId-rl7 G-CS-RNTI-ConfigId-rl7,
            g-CS-RNTI-rl7 RNTI-Value
```


ETSI


--- Page 583  ---


3GPP TS 38.331 version 17.0.0 Release 17
582
ETSI TS 138331 V17.0.0 (2022-05)
```
        }
    },
    drx-ConfigPTM-rl7 SetupRelease { DRX-ConfigPTM-rl7 }
    harq-FeedbackEnablerMulticast-rl7 ENUMERATED {dci-enabler, enabled}
    harq-FeedbackOptionMulticast-rl7 ENUMERATED {ack-nack, nack-only}
    pdsch-AggregationFactorMulticast-rl7 ENUMERATED {n2, n4, n8}
}
G-RNTI-ConfigId-rl7 ::= INTEGER (0..maxG-RNTI-l-rl7)
G-CS-RNTI-ConfigId-rl7 ::= INTEGER (0..maxG-CS-RNTI-l-rl7)
-- TAG-MAC-CELLGROUPCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 584  ---


3GPP TS 38.331 version 17.0.0 Release 17
583
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MAC-CellGroupConfig field descriptions \\
\hline \begin{tabular}{l}
allowCSI-SRS-Tx-MulticastDRX-Active \\
Used to control the CSI/SRS transmission during MBS multicast DRX active time, see TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
csi-Mask \\
If set to true, the UE limits CSI reports to the on-duration period of the DRX cycle, see TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
datalnactivityTimer \\
Releases the RRC connection upon data inactivity as specified in clause 5.3.8.5 and in TS 38.321 [3]. Value s1 corresponds to 1 second, value s2 corresponds to 2 seconds, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-Config, drx-ConfigExt \\
Used to configure DRX as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
drx-ConfigSecondaryGroup \\
Used to configure DRX related parameters for the second DRX group as specified in TS 38.321 [3]. The network does not configure secondary DRX group with DCP simultaneously nor secondary DRX group with a dormant BWP simultaneously.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-ConfigSL \\
Used to configure additional DRX parameters for the UE performing sidelink operation with resource allocation mode 1, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
g-RNTI-ToAddModList \\
List of G-RNTI configurations to add or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
g-RNTI-ToReleaseList \\
List of G-RNTI configurations to release.
\end{tabular} \\
\hline \begin{tabular}{l}
g-CS-RNTI-ToAddModList \\
List of G-CS-RNTI configurations to add or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
g-RNTI-ToReleaseList \\
List of G-CS-RNTI configurations to release.
\end{tabular} \\
\hline \begin{tabular}{l}
intraCG-Prioritization \\
Used to enable HARQ process ID selection based on LCH-priority for one CG as sepcfied in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
Ich-BasedPrioritization \\
If this field is present, the corresponding MAC entity of the UE is configured with prioritization between overlapping grants and between scheduling request and overlapping grants based on LCH priority, see TS 38.321 [3]. The network does not configure ich-BasedPrioritization with enhancedSkipUplinkTxDynamic simultaneously nor khBasedPrioritization with enhancedSkipUplinkTxConfigured simultaneously.
\end{tabular} \\
\hline \begin{tabular}{l}
offsetThresholdTA \\
Offset for TA reporting as specified in TS 38.321.
\end{tabular} \\
\hline \begin{tabular}{l}
scheduling RequestiD-BFR-SCell \\
Indicates the scheduling request configuration applicable for BFR on SCell, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
schedulingRequestID-BFR-r17 \\
Indicates the scheduling request configuration (SchedulingRequestConfig) that the UE shall use upon detecting a beam failure on the detection resources configured in BFDset of a serving cell but not on resources configured in BFDset2 of the same serving cell. \\
Editor's note: BFDset and BFDset2 configuration is pending on LS response from RAN1.
\end{tabular} \\
\hline \begin{tabular}{l}
schedulingRequestID-BFR2-r17 \\
Indicates the scheduling request configuration (SchedulingRequestConfig) that the UE shall use upon detecting a beam failure on the detection resources configured in BFDset2 of a serving cell but not on resources configured in BFDset of the same serving cell. \\
Editor's note: BFDset and BFDset2 configuration is pending on LS response from RAN1.
\end{tabular} \\
\hline \begin{tabular}{l}
scheduling RequestiD-LBT-SCell \\
Indicates the scheduling request configuration applicable for consistent uplink LBT recovery on SCell, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
skipUplinkTxDynamic, enhancedSkipUplinkTxDynamic, enhancedSkipUplinkTxConfigured \\
If set to true, the UE skips UL transmissions as described in TS 38.321 [3]. If the UE is configured with enhancedSkipUplinkTxDynamic or enhancedSkipUplinkTxConfigured with value true, REPETITION_NUMBER (as specified in TS 38.321 [3], clause 5.4.2.1) of the corresponding PUSCH transmission of the uplink grant shall be equal to 1.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 585  ---


3GPP TS 38.331 version 17.0.0 Release 17
584
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline tag-Config \\
The field is used to configure parameters for a time-alignment group. The field is not present if any DAPS bearer is configured. \\
\hline usePreBSR \\
If set to true, the MAC entity of the IAB-MT may use the Pre-emptive BSR, see TS 38.321 [3]. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline Group-Config field descriptions \\
\hline \begin{tabular}{l}
drx-ConfigPTM \\
Used to configure DRX for PTM transmission as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
groupCommon-RNTI \\
Used to scramble the scheduling and transmission of PTM.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-FeedbackEnablerMulticast \\
Indicates whether the UE shall provide HARQ feedback for MBS multicast. Value dci-enabler means that whether the UE shall provide HARQ feedback for MBS multicast is indicated by DCI. Value enabled means the UE shall always provide HARQ feedback for MBS multicast. When the field is absent, the UE shall not provide HARQ feedback for multicast.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-FeedbackOptionMulticast \\
Indicates the feedback mode for MBS multicast dynamically scheduled PDSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-AggregationFactorMulticast \\
Number of repetitions for dynamically scheduled MBS multicast data (see TS 38.214 [19], clause 5.1.2.1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline DRX & This field is optionally present, Need M, if drx-Config is included and set to 'setup'. It is absent otherwise. \\
\hline G-RNTI & This field is optionally present when groupCommon-RNTI is g-RNTI. When the field is absent for g-RNTI, the UE applies the value 1. The field is absent when groupCommon-RNTI is g-CS-RNTI. \\
\hline HARQFeedback & The field is mandatory present when harq-FeedbackEnablerMulticast is present. It is absent otherwise. \\
\hline MCG-Only & This field is optionally present, Need M, for the MAC-CellGroupConfig of the MCG. It is absent otherwise. \\
\hline LCH-PrioWithReTxTimer & This field is optionally present, Need R, if Ich-BasedPrioritization-r16 is configured in this MAC entity and cg-RetransmissionTimer-r16 is configured for any configured grant configuration associated with this MAC entity. It is absent otherwise. \\
\hline Mode 1AndDRX-Only & This field is optionally present, Need M, if sl-ScheduledConfig is configured and drx-Config is configured. It is absent otherwise. \\
\hline
\end{tabular}
- MeasConfig

The IE MeasConfig specifies measurements to be performed by the UE, and covers intra-frequency, inter-frequency and inter-RAT mobility as well as configuration of measurement gaps.

MeasConfig information element
-- ASNISTART
-- TAG-MEASCONEIG-START

MeasConfig : :=
measObjectToRemoveList

SEQUENCE 1
MeasObjectToRemoveList

OPTIONAL, -- Need N
ETSI


--- Page 586  ---


3GPP TS 38.331 version 17.0.0 Release 17
585
ETSI TS 138331 V17.0.0 (2022-05)
```
    measObjectToAddModList MeasObjectToAddModList
    reportConfigToRemoveList ReportConfigToRemoveList
    reportConfigToAddModList ReportConfigToAddModList
    measIdToRemoveList MeasIdToRemoveList
    measIdToAddModList MeasIdToAddModList
    s-MeasureConfig
        ssb-RSRP
        csi-RSRP
    }
    quantityConfig QuantityConfig
    measGapConfig MeasGapConfig
    measGapSharingConfig MeasGapSharingConfig
    ...,
    [ [
    interFrequencyConfig-NoGap-rl6 ENUMERATED {true}
    ]],
    [ [
```

```
    ] ]
}
MeasObjectToRemoveList ::= SEQUENCE (SIZE (l..maxNrofObjectId)) OF MeasObjectId
MeasIdToRemoveList ::= SEQUENCE (SIZE (1..maxNrofMeasId)) OF MeasId
ReportConfigToRemoveList ::= SEQUENCE (SIZE (l..maxReportConfigId)) OF ReportConfigId.
PosMeasGapPreConfigToAddModList-rl7 ::= SEQUENCE (SIZE (1..maxGapConfig-rl7)) OF PosMeasGapPreConfig-rl7
PosMeasGapPreConfigToRemoveList-rl7 ::= SEQUENCE (SIZE (l..maxGapConfig-rl7)) OF PosMeasGapPreConfig-rl7
--Editor's Note: maxGapConfig is FFS--
-- TAG-MEASCONFIG-STOP
-- ASNISTOP
```


--- Page 587  ---


3GPP TS 38.331 version 17.0.0 Release 17
586
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasConfig field descriptions \\
\hline \begin{tabular}{l}
interFrequencyConfig-NoGap-r16 \\
If the field is set to true, UE is configured to perform SSB based inter-frequency measurement without measurement gaps when the inter-frequency SSB is completely contained in the active DL BWP of the UE, as specified in TS 38.133 [14], clause 9.3. Otherwise, the SSB based inter-frequency measurement is performed within measurement gaps. In NR-DC, the field can only be configured in the measConfig associated with MCG, and when configured, it applies to all the inter-frequency measurements configured by MN and SN .
\end{tabular} \\
\hline \begin{tabular}{l}
measGapConfig \\
Used to setup and release measurement gaps in NR.
\end{tabular} \\
\hline \begin{tabular}{l}
measidToAddModList \\
List of measurement identities to add and/or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
measidToRemoveList \\
List of measurement identities to remove.
\end{tabular} \\
\hline \begin{tabular}{l}
measObjectToAddModList \\
List of measurement objects to add and/or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
measObjectToRemoveList \\
List of measurement objects to remove.
\end{tabular} \\
\hline \begin{tabular}{l}
reportConfigToAddModList \\
List of measurement reporting configurations to add and/or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
reportConfigToRemoveList \\
List of measurement reporting configurations to remove.
\end{tabular} \\
\hline \begin{tabular}{l}
s-MeasureConfig \\
Threshold for NR SpCell RSRP measurement controlling when the UE is required to perform measurements on non-serving cells. Choice of ssb-RSRP corresponds to cell RSRP based on SS/PBCH block and choice of csi-RSRP corresponds to cell RSRP of CSI-RS.
\end{tabular} \\
\hline \begin{tabular}{l}
measGapSharingConfig \\
Specifies the measurement gap sharing scheme and controls setup/ release of measurement gap sharing.
\end{tabular} \\
\hline
\end{tabular}
- MeasConfigAppLayerld

The MeasConfigAppLayerId identifies the application layer measurement.
MeasConfigAppLayerId information element
-- ASNISTART
-- TAG-MEASCONEIGAPPLAYERID-START

MeasConfigAppLayerId-rl7 : := INTEGER (O. . maxNrofAppLayerMeas-1-rl7)
-- TAG-MEASCONFIGAPPLAYERID-STOP
-- ASNISTOP
- MeasGapConfig

The IE MeasGapConfig specifies the measurement gap configuration and controls setup/release of measurement gaps.

ETSI


--- Page 588  ---


3GPP TS 38.331 version 17.0.0 Release 17
587
ETSI TS 138331 V17.0.0 (2022-05)

MeasGapConfig information element
```
-- ASNISTART
-- TAG-MEASGAPCONFIG-START
```


SEQUENCE 1
```
MeasGapConfig ::=
    gapFR2
    ...;
    [ [
    gapFRl
    gapUE
    ]],
    [ [
    gapUEToAddModList-rl7
    gapUEToReleaseList-rl7
    gapFRlToAddModList-rl7
    gapFRlToReleaseList-rl7
    gapFR2ToAddModList-rl7
    gapFR2ToReleaseList-rl7
    ]]
}
GapConfig ::= SEQUENCE \
    gapOffset
    mgl
    mgrp
    mgta
    ...,
    [ [
    refServCellIndicator ENUMERATED {pCell, pSCell, mcg-FR2}
    ]],
    [ [
    refFR2ServCellAsyncCA-rl6
    mgl-rl6
    ]],
    [ [
    measGapId-rl7
    preConfigInd-rl7
    nscgInd-rl7
    mgta-rl7
    mgl-rl7
    gapAssociationPRS-rl7
    gapSharing-rl7
    gapPriority-rl7
    ]]
}
-- TAG-MEASGAPCONFIG-STOP
-- ASNISTOP
```


SetupRelease \{ GapConfig \} OPTIONAL, -- Need M

\begin{table}
\captionsetup{labelformat=empty}
\caption{OPTIONAL -- Cond NEDCONNRDC}
OPTIONAL, -- Cond AsyncCA
\end{table}
```
SetupRelease { GapConfig } OPTIONAL, -- Need M
SetupRelease { GapConfig } OPTIONAL -- Need M
SEQUENCE (SIZE (l..maxNrofGapId-l-rl7)) OF GapConfig OPTIONAL, -- Need N
SEQUENCE (SIZE (l..maxNrofGapId-l-rl7)) OF MeasGapId-rl7 OPTIONAL, -- Need N
SEQUENCE (SIZE (l..maxNrofGapId-l-rl7)) OF GapConfig OPTIONAL, -- Need N
SEQUENCE (SIZE (l..maxNrofGapId-l-rl7)) OF MeasGapId-rl7 OPTIONAL, -- Need N
SEQUENCE (SIZE (l..maxNrofGapId-l-rl7)) OF GapConfig OPTIONAL, -- Need N
SEQUENCE (SIZE (l..maxNrofGapId-l-rl7)) OF MeasGapId-rl7 OPTIONAL -- Need N
INTEGER (0..159),
ENUMERATED {msldot5, ms3, ms3dot5, ms4, ms5dot5, ms6},
ENUMERATED {ms20, ms40, ms80, ms160},
ENUMERATED {ms0, ms0dot25, ms0dot5},
ENUMERATED {msl0, ms20}
MeasGapId-rl7
ENOMERATED {true}
ENOMERATED {true}
ENOMERATED {ms0dot75}
ENUMERATED {msl, ms2, ms5}
ENUMERATED {true}
MeasGapSharingScheme
GapPriority-rl7
GapPriority-rl7
OPTIONAL -- Cond PRS
OPTIONAL, -- Cond GapID
OPTIONAL, -- Need R
OPTIONAL, -- Need R
OPTIONAL, -- Need R
OPTIONAL, -- Need R
OPTIONAL, -- Need. R
OPTIONAL, -- Need. R
OPTIONAL -- Need. R
```


ETSI


--- Page 589  ---


3GPP TS 38.331 version 17.0.0 Release 17
588
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasGapConfig field descriptions \\
\hline \begin{tabular}{l}
gapAssociationPRS \\
Indicates that PRS measurement is associated with this measurement gap. The network only includes this field for one per UE gap.
\end{tabular} \\
\hline \begin{tabular}{l}
gapFR1 \\
Indicates measurement gap configuration that applies to FR1 only. In (NG)EN-DC, gapFR1 cannot be set up by NR RRC (i.e. only LTE RRC can configure FR1 measurement gap). In NE-DC, gapFR1 can only be set up by NR RRC (i.e. LTE RRC cannot configure FR1 gap). In NR-DC, gapFR1 can only be set up in the measConfig associated with MCG. gapFR1 can not be configured together with gapUE unless concurrent MGs are supported. The applicability of the FR1 measurement gap is according to Table 9.1.2-2 and Table 9.1.2-3 in TS 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
gapFR1ToAddModList \\
A list of of FR1 measurement gap configuartion to be added or modified. In this version of the specification, the network configures this field only in NR standalone.
\end{tabular} \\
\hline \begin{tabular}{l}
gapFR1ToReleaseList \\
A list of FR1 measurement gap configuartion to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
gapFR2 \\
Indicates measurement gap configuration applies to FR2 only. In (NG)EN-DC or NE-DC, gapFR2 can only be set up by NR RRC (i.e. LTE RRC cannot configure FR2 gap). In NR-DC, gapFR2 can only be set up in the measConfig associated with MCG. gapFR2 cannot be configured together with gapUE unless concurrent MGs are supported. The applicability of the FR2 measurement gap is according to Table 9.1.2-2 and Table 9.1.2-3 in TS 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
gapFR2ToAddModList \\
A list of FR2 measurement gap configuration to be added or modified. In this version of the specification, the network configures this field only in NR standalone.
\end{tabular} \\
\hline \begin{tabular}{l}
gapFR2ToReleaseList \\
A list of FR2 measurement gap configuration to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
gapPriority \\
Indicates the priority of this measurement gap (see TS 38.133 [14], clause FFS). Value 1 indicates highest priority, value 2 indicates second level priority, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
gapSharing \\
Indicates the measurement gap sharing scheme that applies to this GapConfig. For applicability of the different gap sharing schemes, see TS 38.133 [14]. Value scheme 00 corresponds to scheme " 00 ", value scheme01 corresponds to scheme " 01 ", and so on. The network does not include this field if this GapConfig is configured by gapFR1, gapFR2, or gapUE.
\end{tabular} \\
\hline \begin{tabular}{l}
gapUE \\
Indicates measurement gap configuration that applies to all frequencies (FR1 and FR2). In (NG)EN-DC, gapUE cannot be set up by NR RRC (i.e. only LTE RRC can configure per UE measurement gap). In NE-DC, gapUE can only be set up by NR RRC (i.e. LTE RRC cannot configure per UE gap). In NR-DC, gapUE can only be set up in the measConfig associated with MCG. The per UE measurement gap is configured with other FR1 gap and/or FR2 gap simultaneously only while this per UE gap is associated with PRS measurement. The applicability of the per UE measurement gap is according to Table 9.1.2-2 and Table 9.1.2-3 in TS 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
gapUEToAddModList \\
A list of per UE measurement gap configuartion to be added or modified. A per UE measurement gap can be configured with other FR1 gap and/or FR2 gap simultaneously only while this per UE gap is associated with PRS measurement. In this version of the specification, the network configures this field only in NR standalone.
\end{tabular} \\
\hline \begin{tabular}{l}
gapUEToReleaseList \\
A list of per UE measurement gap configuartion to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
gapOffset \\
Value gapOffset is the gap offset of the gap pattern with MGRP indicated in the field mgrp. The value range is from 0 to \( m g r p-1 \). If \( n s c g / n d-r 17 \) is present, this offset value refers to the starting point of VIL1 (the visible interruption length before the ML).
\end{tabular} \\
\hline \begin{tabular}{l}
measGapid \\
The ID of this measurement gap configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
mgl \\
Value \( m g / \) is the measurement gap length in \( m s \) of the measurement gap. If nscglnd-r 17 is not present, the measurement gap length is according to in Table 9.1.2-1 in TS 38.133 [14]. If nscg/nd-r 17 is present, this field indicates the measurement length (ML) in NCSG pattern and is configured according to Table 9.1.2C-1 in TS 38.133 [14]. Value \( m s 1 d o t 5 \) corresponds to \( 1.5 \mathrm{~ms}, m s 3 \) corresponds to 3 ms and so on. If \( m g l-r 16 \) or \( m g l-r 17 \) is present, UE shall ignore the \( m g l \) (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
mgrp \\
Value \( m g r p \) is measurement gap repetition period in (ms) of the measurement gap. The measurement gap repetition period is according to Table 9.1.2-1 in TS 38.133 [14].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 590  ---


3GPP TS 38.331 version 17.0.0 Release 17
589
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasGapConfig field descriptions \\
\hline \begin{tabular}{l}
gapAssociationPRS \\
Indicates that PRS measurement is associated with this measurement gap. The network only includes this field for one per UE gap.
\end{tabular} \\
\hline \begin{tabular}{l}
mgta \\
Value \( m g t a \) is the measurement gap timing advance in ms. The applicability of the measurement gap timing advance is according to clause 9.1 .2 of TS 38.133 [14]. Value \( m s 0 \) corresponds to \( 0 \mathrm{~ms}, \mathrm{msOdot} 25 \) corresponds to 0.25 ms and msOdot 5 corresponds to 0.5 ms . For FR2, the network only configures 0 ms and 0.25 ms . If mgta -r 17 is present, UE shall ignore the mgta (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
nscgind \\
Indicates that the measurement gap is a NCSG as specified in 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
preConfigind \\
Indicates whether the measurement gap is a pre-configured measurement gap.
\end{tabular} \\
\hline \begin{tabular}{l}
refFR2ServCellAsyncCA \\
Indicates the FR2 serving cell identifier whose SFN and subframe is used for FR2 gap calculation for this gap pattern with asynchronous CA involving FR2 carrier(s).
\end{tabular} \\
\hline \begin{tabular}{l}
refServCellindicator \\
Indicates the serving cell whose SFN and subframe are used for gap calculation for this gap pattern. Value pCell corresponds to the PCell, pSCell corresponds to the PSCell, and mcg-FR2 corresponds to a serving cell on FR2 frequency in MCG.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline AsyncCA & \begin{tabular}{l}
This field is mandatory present when configuring FR2 gap pattern to UE in: \\
- (NG)EN-DC or NR SA with asynchronous CA involving FR2 carrier(s); \\
- NE-DC or NR-DC with asynchronous CA involving FR2 carrier(s), if the field refServCellindicator is set to mcg-FR2. In case the gap pattern to UE in NE-DC and NR-DC is already configured and the serving cell used for the gap calculation corresponds to a serving cell on FR2 frequency in MCG, then the field is optionally present, need M. Otherwise, it is absent, Need R.
\end{tabular} \\
\hline Gap/D & \begin{tabular}{l}
This field is mandatory present when: \\
- more than one per UE gap is configured; or \\
- more than one FR1 gap is configured; or \\
- more than one FR2 gap is configured; or \\
- per UE gap is configured together with per FR gap. \\
It is optional present, Need R, when: \\
- one or more gap is configured as pre-configured measurement gap. \\
Otherwise, this field is not present, Need R. \\
Editor Note: It is FFS whether and how to specify the conditional presence for gap ID
\end{tabular} \\
\hline NEDCorNRDC & This field is mandatory present when configuring gap pattern to UE in NE-DC or NR-DC. In case the gap pattern to UE in NE-DC and NR-DC is already configured, then the field is absent, need M. Otherwise, it is absent. \\
\hline PRS & This field is optionally present, Need R, when configuring gap pattern to UE for measurements of DL-PRS configured via LPP (TS 37.355 [49]). Otherwise, it is absent. \\
\hline
\end{tabular}
- MeasGapld

The IE MeasGapld used to identify a per UE or per FR measurement gap configuration.

ETSI


--- Page 591  ---


3GPP TS 38.331 version 17.0.0 Release 17
590
ETSI TS 138331 V17.0.0 (2022-05)

MeasGapid information element
-- ASNISTART
-- TAG-MEASGAPID-START
MeasGapId-rl7 : : \( \quad \) INTEGER (1. maxNrofGapId-rl7)
-- TAG-MEASGAPID-STOP
-- ASNISTOP
- MeasGapSharingConfig

The IE MeasGapSharingConfig specifies the measurement gap sharing scheme and controls setup/ release of measurement gap sharing.
MeasGapSharingConfig information element
-- ASNISTART
-- TAG-MEASGAPSHARINGCONFIG-START

MeasGapSharingConfig : := SEQUENCE l
gapSharingFR2
SetupRelease \{ MeasGapSharingScheme \} OPTIONAL, -- Need M
⋯
[ [
gapSharingFRl
SetupRelease [ MeasGapSharingScheme \}
OPTIONAL, --Need. M
gapSharingUE
SetupRelease [ MeasGapSharingScheme \}
OPTIONAL --Need M
] ]
\}
MeasGapSharingScheme: := ENUMERATED [scheme00, scheme01, schemel0, schemell]
-- TAG-MEASGAPSHARINGCONFIG-STOP
-- ASNISTOP

ETSI


--- Page 592  ---


3GPP TS 38.331 version 17.0.0 Release 17
591
ETSI TS 138331 V17.0.0 (2022-05)

MeasGapSharingConfig field descriptions
gapSharingFR1
Indicates the measurement gap sharing scheme that applies to the gap set via gapFR1. In (NG)EN-DC, gapSharingFR1 cannot be set up by NR RRC (i.e. only LTE RRC can configure FR1 gap sharing). In NE-DC, gapSharingFR1 can only be set up by NR RRC (i.e. LTE RRC cannot configure FR1 gap sharing). In NR-DC, gapSharingFR1 can only be set up in the measConfig associated with MCG. gapSharingFR1 can not be configured together with gapSharingUE. For the applicability of the different gap sharing schemes, see TS 38.133 [14]. Value scheme 00 corresponds to scheme " 00 ", value scheme 01 corresponds to scheme " 01 ", and so on.
gapSharingFR2
Indicates the measurement gap sharing scheme that applies to the gap set via gapFR2. In (NG)EN-DC or NE-DC, gapSharingFR2 can only be set up by NR RRC (i.e. LTE RRC cannot configure FR2 gap sharing). In NR-DC, gapSharingFR2 can only be set up by MCG in the measConfig associated with MCG. gapSharingFR2 cannot be configured together with gapSharingUE. For applicability of the different gap sharing schemes, see TS 38.133 [14]. Value scheme 00 corresponds to scheme " 00 ", value scheme01 corresponds to scheme "01", and so on.
gapSharingUE
Indicates the measurement gap sharing scheme that applies to the gap set via gapUE. In (NG)EN-DC, gapSharingUE cannot be set up by NR RRC (i.e. only LTE RRC can configure per UE gap sharing). In NE-DC, gapSharingUE can only be set up by NR RRC (i.e. LTE RRC cannot configure per UE gap sharing). In NR-DC, gapSharingUE can only be set up in the measConfig associated with MCG. If gapSharingUE is configured, then neither gapSharingFR1 nor gapSharingFR2 can be configured. For the applicability of the different gap sharing schemes, see TS 38.133 [14]. Value scheme00 corresponds to scheme "00", value scheme01 corresponds to scheme "01", and so on.
- Measid

The IE MeasId is used to identify a measurement configuration, i.e., linking of a measurement object and a reporting configuration.
Meas/d information element
-- ASNISTART
-- TAG-MEASID-START

MeasId : : \( \quad \) INTEGER (1..maxNrofMeasId)
-- TAG-MEASID-STOP
-- ASNISTOP
- MeasIdleConfig

The IE MeasIdleConfig is used to convey information to UE about measurements requested to be done while in RRC_IDLE or RRC_INACTIVE.
Meas/d/eConfig information element
-- ASNISTART
-- TAG-MEASIDLECONFIG-START

MeasIdleConfigSIB-rl6 ::= SEQUENCE [
⋯
\}

ETSI


--- Page 593  ---


3GPP TS 38.331 version 17.0.0 Release 17
592
ETSI TS 138331 V17.0.0 (2022-05)
```
MeasIdleConfigDedicated-r16 ::= SEQUENCE {
```

```
    measIdleDuration-rl6 ENUMERATED{secl0, sec30, sec60, sec120, sec180, sec240, sec300, spare},
```

```
    ...
}
ValidityAreaList-rl6 ::= SEQUENCE (SIZE (l..maxFreqIdle-rl6)) OF ValidityArea-rl6
ValidityArea-rl6 ::= SEQUENCE \
    carrierFreq-rl6 ARFCN-ValueNR,
```

```
}
ValidityCellList ::= SEQUENCE (SIZE (l.. maxCellMeasIdle-rl6)) OF PCI-Range
MeasIdleCarrierNR-rl6 ::= SEQUENCE \
    carrierFreq-rl6 ARFCN-ValueNR,
    ssbSubcarrierSpacing-rl6 SubcarrierSpacing,
    frequencyBandList MultiFrequencyBandListNR
    OPTIONAL, -- Need. R
    reportQuantities-rl6 ENUMERATED {rsrp, rsrq, both},
    qualityThreshold-rl6 SEQUENCE {
```

```
    ssb-MeasConfig-r16 SEQUENCE {
```

```
        absThreshSS-BlocksConsolidation-rl6 ThresholdNR
        smtc-rl6 SSB-MTC
        ssb-ToMeasure-rl6 SSB-ToMeasure
        deriveSSB-IndexFromCell-rl6 BOOLEAN,
        ss-RSSI-Measurement-rl6 SS-RSSI-Measurement
    }
```

```
    ...
}
MeasIdleCarrierEUTRA-rl6 ::= SEQUENCE [
    carrierFreqEUTRA-r16 ARFCN-ValueEUTRA,
    allowedMeasBandwidth-r16 EUTRA-AllowedMeasBandwidth,
```

```
    reportQuantitiesEUTRA-r16 ENUMERATED {rsrp, rsrq, both},
    qualityThresholdEUTRA-r16 SEQUENCE {
```

```
    }
    ...
}
CellListNR-rl6 ::= SEQUENCE (SIZE (l..maxCellMeasIdle-rl6)) OF PCI-Range
```


ETSI


--- Page 594  ---


3GPP TS 38.331 version 17.0.0 Release 17
593
ETSI TS 138331 V17.0.0 (2022-05)
```
CellListEUTRA-rl6 ::= SEQUENCE (SIZE (l..maxCellMeasIdle-rl6)) OF EUTRA-PhysCellIdRange
BeamMeasConfigIdle-NR-rl6 ::= SEQUENCE \
    reportQuantityRS-Indexes-r16 ENUMERATED {rsrp, rsrq, both},
    maxNrofRS-IndexesToReport-r16 INTEGER (1.. maxNrofIndexesToReport),
    includeBeamMeasurements-rl6 BOOLEAN
}
RSRQ-RangeEUTRA-r16 ::= INTEGER (-30.46)
-- TAG-MEASIDLECONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 595  ---


3GPP TS 38.331 version 17.0.0 Release 17
594
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasidleConfig field descriptions \\
\hline \begin{tabular}{l}
absThreshSS-Blocks Consolidation \\
Threshold for consolidation of L1 measurements per RS index.
\end{tabular} \\
\hline \begin{tabular}{l}
beamMeasConfigIdle \\
Indicates the beam level measurement configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
carrierFreq \\
Indicates the NR carrier frequency to be used for measurements during RRC_IDLE or RRC_INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
carrierFreqEUTRA \\
Indicates the E-UTRA carrier frequency to be used for measurements during RRC_IDLE or RRC_INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
deriveSSB-IndexFromCell \\
This field indicates whether the UE may use the timing of any detected cell on that frequency to derive the SSB index of all neighbour cells on that frequency. If this field is set to true, the UE assumes SFN and frame boundary alignment across cells on the neighbor frequency as specified in TS 38.133 [14].
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyBandList \\
Indicates the list of frequency bands for which the NR idlefinactive measurement parameters apply. The UE shall select the first listed band which it supports in the frequencyBandList field to represent the NR neighbour carrier frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
includeBeamMeasurements \\
Indicates whether or not the UE shall include beam measurements in the NR idle/inactive measurement results.
\end{tabular} \\
\hline \begin{tabular}{l}
maxNrofRS-IndexesToReport \\
Max number of beam indices to include in the idle/inactive measurement result.
\end{tabular} \\
\hline \begin{tabular}{l}
measCellListEUTRA \\
Indicates the list of E-UTRA cells which the UE is requested to measure and report for idlefinactive measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
measCellListNR \\
Indicates the list of NR cells which the UE is requested to measure and report for idlefinactive measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
measidleCarrierListEUTRA \\
Indicates the E-UTRA carriers to be measured during RRC_IDLE or RRC_INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
measidleCarrierListNR \\
Indicates the NR carriers to be measured during RRC_IDLE or RRC_INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
measidleDuration \\
Indicates the duration for performing idle/inactive measurements while in RRC_IDLE or RRC_INACTIVE. Value sec10 correspond to 10 seconds, value sec30 to 30 seconds and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofSS-BlocksToAverage \\
Number of SS blocks to average for cell measurement derivation.
\end{tabular} \\
\hline \begin{tabular}{l}
qualityThreshold \\
Indicates the quality thresholds for reporting the measured cells for idle/inactive NR measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
quality ThresholdEUTRA \\
Indicates the quality thresholds for reporting the measured cells for idle/inactive E-UTRA measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantities \\
Indicates which measurement quantities UE is requested to report in the idlefinactive measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantitiesEUTRA \\
Indicates which E-UTRA measurement quantities the UE is requested to report in the idle/inactive measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantityRS-Indexes \\
Indicates which measurement information per beam index the UE shall include in the NR idle/inactive measurement results.
\end{tabular} \\
\hline \begin{tabular}{l}
smtc \\
Indicates the measurement timing configuration for inter-frequency measurement. If this field is absent in VarMeas/dleConfig, the UE assumes that SSB periodicity is 5 ms in this frequency.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 596  ---


3GPP TS 38.331 version 17.0.0 Release 17
595
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
ssbSubcarrierSpacing \\
Indicates subcarrier spacing of SSB. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 120 or 240 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-ToMeasure \\
The set of SS blocks to be measured within the SMTC measurement duration (see TS 38.215 [9]). When the field is absent in VarMeas/dieConfig, the UE measures on all SSblocks.
\end{tabular} \\
\hline \begin{tabular}{l}
ss-RSSI-Measurement \\
Indicates the SSB-based RSSI measurement configuration. If the field is absent in VarMeas/dleConfig, the UE behaviour is defined in TS 38.215 [89], clause 5.1.3.
\end{tabular} \\
\hline \begin{tabular}{l}
validityAreaList \\
Indicates the list of frequencies and optionally, for each frequency, a list of cells within which the UE is required to perform measurements while in RRC_IDLE and RRC INACTIVE.
\end{tabular} \\
\hline
\end{tabular}
- MeasIdToAddModList

The IE MeasIdToAddModList concerns a list of measurement identities to add or modify, with for each entry the measId, the associated measObjectld and the associated reportConfigld.

Meas/dToAddModList information element
```
-- ASNISTART
-- TAG-MEASIDTOADDMODLIST-START
MeasIdToAddModList ::= SEQUENCE (SIZE (l..maxNrofMeasId)) OF MeasIdToAddMod
MeasIdToAddMod ::= SEQUENCE \
    measid.
    measObjectId.
    MeasObjectId,
}
-- TAG-MEASIDTOADDMODLIST-STOP
-- ASNISTOP
- MeasObjectCLI
```


The IE MeasObjectCLI specifies information applicable for SRS-RSRP measurements and/or CLI-RSSI measurements.
MeasObjectCL/information element
-- ASNISTART
-- TAG-MEASOBJECTCLI-START

ETSI


--- Page 597  ---


3GPP TS 38.331 version 17.0.0 Release 17
596
ETSI TS 138331 V17.0.0 (2022-05)
```
MeasObjectCLI-rl6 ::=
    cli-ResourceConfig-rl6
    ...
}
CLI-ResourceConfig-rl6 ::= SEQUENCE \
    srs-ResourceConfig-rl6
    rssi-ResourceConfig-rl6
}
SRS-ResourceListConfigCLI-rl6 := SEQUENCE (SIZE (1.. maxNrofCLI-SRS-Resources-rl6)) OF SRS-ResourceConfigCLI-rl6
```

```
SRS-ResourceConfigCLI-rl6 ::= SEQUENCE \
    srs-Resource-rl6
    srs-SCS-rl6
    refServCellIndex-r16
    refBWP-rl6
    ...
}
RSSI-ResourceConfigCLI-rl6 ::= SEQUENCE \
    rssi-ResourceId-rl6
    rssi-SCS-rl6
    startPRB-rl6
    nrofpRBs-rl6
    startPosition-rl6
    nrofSymbols-rl6
    rssi-PeriodicityAndOffset-rl6
    refServCellIndex-rl6
    ...
}
RSSI-ResourceId-rl6 ::= INTEGER (O.. maxNrofCLI-RSSI-Resources-l-rl6)
RSSI-PeriodicityAndOffset-r16 ::= CHOICE [
    sllo
    INTEGER(0..9),
    INTEGER(0..19),
```

```
    \textbf{mTEGER(0..79),
    INTEGER(0..159),
    sl6 INTEGER(0..319),
    ...
}
-- TAG-MEASOBJECTCLI-STOP
-- ASNISTOP
```


ETSI


--- Page 598  ---


3GPP TS 38.331 version 17.0.0 Release 17
597
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline & CLI-ResourceConfig field descriptions \\
\hline \begin{tabular}{l}
srs-ResourceConfig \\
SRS resources to be used for CLI measurements.
\end{tabular} & \\
\hline \begin{tabular}{l}
rssi-ResourceConfig \\
CLI-RSSI resources to be used for CLI measurements.
\end{tabular} & \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline & MeasObjectCLI field descriptions \\
\hline \begin{tabular}{l}
cli-ResourceConfig \\
SRS and/or CLI-RSSI resource configuration for CLI measurement.
\end{tabular} & \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SRS-ResourceConfigCLI field descriptions \\
\hline \begin{tabular}{l}
refBWP \\
DL BWP id that is used to derive the reference point of the SRS resource (see TS 38.211[16], clause 6.4.1.4.3)
\end{tabular} \\
\hline \begin{tabular}{l}
refServCellindex \\
The index of the reference serving cell that the refBWP belongs to. If this field is absent, the reference serving cell is PCell.
\end{tabular} \\
\hline \begin{tabular}{l}
srs-SCS \\
Subcarrier spacing for SRS. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15,30 , or 60 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 599  ---


3GPP TS 38.331 version 17.0.0 Release 17
598
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RSSI-ResourceConfigCLI field descriptions \\
\hline \begin{tabular}{l}
nrofPRBs \\
Allowed size of the measurement BW. Only multiples of 4 are allowed. The smallest configurable number is the minimum of 4 and the width of the active DL BWP. If the configured value is larger than the width of the active DL BWP, the UE shall assume that the actual CLI-RSSI resource bandwidth is within the active DL BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofSymbols \\
Within a slot that is configured for CLI-RSSI measurement (see slotConfiguration), the UE measures the RSSI from startPosition to startPosition + nrofSymbols -1 . The configured CLI-RSSI resource does not exceed the slot boundary of the reference SCS. If the SCS of configured DL BWP(s) is larger than the reference SCS, network configures startPosition and nrofSymbols such that the configured CLI-RSSI resource not to exceed the slot boundary corresponding to the configured BWP SCS. If the reference SCS is larger than SCS of configured DL BWP(s), network ensures startPosition and nrofSymbols are integer multiple of reference SCS divided by configured BWP SCS.
\end{tabular} \\
\hline \begin{tabular}{l}
refServCellindex \\
The index of the reference serving cell. Frequency reference point of the RSSI resource is subcarrier 0 of CRB0 of the reference serving cell. If this field is absent, the reference serving cell is PCell.
\end{tabular} \\
\hline \begin{tabular}{l}
rssi-PeriodicityAndOffset \\
Periodicity and slot offset for this CLI-RSSI resource. All values are in "number of slots". Value sil corresponds to a periodicity of 1 slot, value s/2 corresponds to a periodicity of 2 slots, and so on. For each periodicity the corresponding offset is given in number of slots.
\end{tabular} \\
\hline \begin{tabular}{l}
rssi-SCS \\
Reference subcarrier spacing for CLI-RSSI measurement. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15,30 , or 60 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz \\
UE performs CLI-RSSI measurement with the SCS of the active bandwidth part within the configured CLI-RSSI resource in the active BWP regardless of the reference SCS of the measurement resource.
\end{tabular} \\
\hline \begin{tabular}{l}
startPosition \\
OFDM symbol location of the CLI-RSSI resource within a slot.
\end{tabular} \\
\hline \begin{tabular}{l}
startPRB \\
Starting PRB index of the measurement bandwidth. For the case where the reference subcarrier spacing is smaller than subcarrier spacing of active DL BWP(s), network configures startPRB and nrofPRBs are as a multiple of active BW SCS divided by reference SCS.
\end{tabular} \\
\hline
\end{tabular}
- MeasObjectEUTRA

The IE MeasObjectEUTRA specifies information applicable for E-UTRA cells.
MeasObjectEUTRA information element
-- ASNISTART
-- TAG-MEASOBJECTEUTRA-START

MeasObjectEUTRA: :=
carrierFreq
allowedMeasBandwidth
cellsToRemoveListEUTRAN
cellsToAddModListEUTRAN
excludedCellsToRemoveListEUTRAN
excludedCellsToAddModListEUTRAN

SEQUENCE 1
ARFCN-ValueEUTRA,
EUTRA-AllowedMeasBandwidth,
EUTRA-CellIndexList OPTIONAL, -- Need N
SEQUENCE (SIZE (1..maxCellMeasEUTRA) OF EUTRA-Cell OPTIONAL, -- Need N
EUTRA-CellIndexList OPTIONAL, -- Need N
SEQUENCE (SIZE (l..maxCellMeasEUTRA)) OF EUTRA-ExcludedCell OPTIONAL, -- Need N

ETSI


--- Page 600  ---


3GPP TS 38.331 version 17.0.0 Release 17
599
ETSI TS 138331 V17.0.0 (2022-05)
```
    eutra-PresenceAntennaPortl EUTRA-PresenceAntennaPortl,
```

```
    widebandRSRQ-Meas BOOLEAN,
    ...;
    [ [
```

```
}
EUTRA-CellIndexList ::= SEQUENCE (SIZE (l..maxCellMeasEUTRA)) OF EUTRA-CellIndex
EUTRA-CellIndex ::= INTEGER (1..maxCellMeasEUTRA)
EUTRA-Cell ::=
    cellIndexEUTRA
    physCellId.
    cellIndividualOffset EUTRA-Q-OffsetRange
}
EUTRA-ExcludedCell ::=
    cellIndexEUTRA
    physCellIdRange EUTRA-PhysCellIdRange
}
-- TAG-MEASOBJECTEUTRA-STOP
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline & EUTRAN-ExcludedCell field descriptions \\
\hline \begin{tabular}{l}
cellindexEUTRA \\
Entry index in the cell list.
\end{tabular} & \\
\hline & \\
\hline physica/CellldRange & \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline EUTRAN-Cell field descriptions \\
\hline \begin{tabular}{l}
physica/Cellid \\
Physical cell identity of a cell in the cell list.
\end{tabular} \\
\hline \\
\hline \begin{tabular}{l}
cellindividualOffset \\
Cell individual offset applicable to a specific cell. Value \( d B-24 \) corresponds to \( -24 \mathrm{~dB}, d B-22 \) corresponds to -22 dB and so on.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 601  ---


3GPP TS 38.331 version 17.0.0 Release 17
600
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasObjectEUTRA field descriptions \\
\hline \begin{tabular}{l}
allowedMeasBandwidth \\
The maximum allowed measurement bandwidth on a carrier frequency as defined by the parameter Transmission Bandwidth Configuration "NRB" TS 36.104 [33].
\end{tabular} \\
\hline \begin{tabular}{l}
associatedMeasGap \\
Indicates the associated measurement gap for measuring this EUTRA frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
carrierFreq \\
Identifies E-UTRA carrier frequency for which this configuration is valid. Network does not configure more than one MeasObjectEUTRA for the same physical frequency, regardless of the E-ARFCN used to indicate this.
\end{tabular} \\
\hline \begin{tabular}{l}
cellsToAddModListEUTRAN \\
List of cells to add/ modify in the cell list.
\end{tabular} \\
\hline \begin{tabular}{l}
cellsToRemoveListEUTRAN \\
List of cells to remove from the cell list.
\end{tabular} \\
\hline \begin{tabular}{l}
eutra-PresenceAntennaPort1 \\
When set to true, the UE may assume that at least two cell-specific antenna ports are used in all neighbouring cells.
\end{tabular} \\
\hline \begin{tabular}{l}
eutra-Q-OffsetRange \\
Used to indicate a cell, or frequency specific offset to be applied when evaluating triggering conditions for measurement reporting. The value is in dB. Value dB-24 corresponds to -24 dB , value \( d B-22 \) corresponds to -22 dB and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
excludedCells ToAddModListEUTRAN \\
List of cells to add/modify in the exclude-list of cells.
\end{tabular} \\
\hline \begin{tabular}{l}
excludedCellsToRemoveListEUTRAN \\
List of cells to remove from the exclude-list of cells.
\end{tabular} \\
\hline \begin{tabular}{l}
widebandRSRQ-Meas \\
If set to true, the UE shall, when performing RSRQ measurements, use a wider bandwidth in accordance with TS 36.133 [40]. The network may set the field to true if the measurement bandwidth indicated by allowedMeasBandwidth is 50 resource blocks or larger; otherwise the network sets this field to false.
\end{tabular} \\
\hline
\end{tabular}
- MeasObjectld

The IE MeasObjectld used to identify a measurement object configuration.
MeasObjectid information element
-- ASNISTART
-- TAG-MEASOBJECTID-START

MeasObjectId : : INTEGER (1..maxNrofobjectId)
-- TAG-MEASOBJECTID-STOP
-- ASNISTOP
- MeasObjectNR

The IE MeasObjectNR specifies information applicable for SS/PBCH block(s) intra/inter-frequency measurements and/or CSI-RS intra/inter-frequency measurements.

ETSI


--- Page 602  ---


3GPP TS 38.331 version 17.0.0 Release 17
601
ETSI TS 138331 V17.0.0 (2022-05)

MeasObjectNR information element

\begin{tabular}{|l|l|l|l|}
\hline \multicolumn{4}{|l|}{-- ASNISTART} \\
\hline \multicolumn{4}{|l|}{-- TAG-MEASOBJECTNR-START} \\
\hline MeasObjectNR ::= & SEQUENCE \{ & & \\
\hline offsetMO & ARFCN-ValueNR & OPTIONAL, & -- Cond SSBorAssociatedSSB \\
\hline measCycleSCell & ENUMERATED \{sfl60, sf256, sf320, sf512, sf640, sfl024, sfl280\} & OPTIONAL, & -- Need R \\
\hline \begin{tabular}{l}
]], \\
[ [
\end{tabular} & & & \\
\hline smec3list-rl6 & SSB-MTC3List-rl6 & OPTIONAL, & -- Need R \\
\hline rmtc-Config-rl6 & SetupRelease \{RMTC-Config-rl6\} & OPTIONAL, & -- Need M \\
\hline t312-r16 & SetupRelease \{ T312-rl6 \} & OPTIONAL & -- Need M \\
\hline ]], & & & \\
\hline [ [ & & & \\
\hline associatedMeasGapSSB-rl7 & MeasGapId-rl7 & OPTIONAL, & -- Need R \\
\hline associatedMeasGapCSIRS-r17 & MeasGapId-rl7 & OPTIONAL, & -- Need R \\
\hline measCyclePSCell-rl7 & ENUMERATED \{ffs\} & OPTIONAL & -- Need R FFS \\
\hline \multicolumn{4}{|l|}{\multirow[b]{2}{*}{\begin{tabular}{l}
] ] \\
\}
\end{tabular}}} \\
\hline & & & \\
\hline SSB-MTC3List-rl6::= & SEQUENCE (SIZE(1..4)) OF SSB-MTC3-rl6 & & \\
\hline SSB-MTC4List-rl7::= & SEQUENCE (SIZE(l..4)) OF SSB-MTC4-rl7 & & \\
\hline T312-rl6 ::= & ENUMERATED \{ms0, ms50, msl00, ms200, ms300, ms400, ms500, msl000\} & & \\
\hline ReferenceSignalConfig::= & SEQUENCE \{ & & \\
\hline ssb-ConfigMobility & SSB-ConfigMobility & OPTIONAL, & -- Need M \\
\hline csi-rs-ResourceConfigMobility & SetupRelease \{ CSI-RS-ResourceConfigMobility \} & OPTIONAL & -- Need M \\
\hline \} & & & \\
\hline SSB-ConfigMobility::= & SEQUENCE 1 & & \\
\hline
\end{tabular}

ETSI


--- Page 603  ---


3GPP TS 38.331 version 17.0.0 Release 17
602
ETSI TS 138331 V17.0.0 (2022-05)
```
    ssb-ToMeasure
SetupRelease { SSB-ToMeasure }
    deriveSSB-IndexFromCell BOOLEAN,
    ss-RSSI-Measurement SS-RSSI-Measurement
    ...;
    [ [
```

```
    ssb-PositionQCL-CellsToAddModList-rl6 SSB-PositionQCL-CellsToAddModList-rl6
    ssb-PositionQCL-CellsToRemoveList-rl6 PCI-List
    ]],
        [ [
    deriveSSB-IndexFromCellInter-rl7 ServCellIndex
    ] ]
}
Q-OffsetRangeList ::=
    rsrpOffsetSSB
    rsrqOffsetSSB
    sinrOffsetSSB
    rsrpOffsetCSI-
    rsrqOffsetCSI-RS
    sinrOffsetCSI-RS Q-OffsetRange DEFAULT dBO
}
ThresholdNR ::=
    thresholdRSRP
    thresholdRSRQ
    thresholdSINR
}
CellsToAddModList ::= SEQUENCE (SIZE (l..maxNrofCellMeas)) OF CellsToAddMod
CellsToAddMod ::=
    physCellId.
    cellIndividualOffset Q-OffsetRangeList
}
RMTC-Config-rl6 ::= SEQUENCE \
    rmtc-Periodicity-rl6
    ENUMERALYSAO},
    measDurationSymbols-rl6 ENUMERATED {syml, syml4or12, sym28or24, sym42or36, sym70or60},
    rmtc-Frequency-rl6 ARFCN-ValueNR,
    ref-SCS-CP-rl6 ENUMERATED {kHzl5, kHz30, kHz60-NCP, kHz60-ECP},
    ...;
    [ [
    rmtc-Bandwidth-rl7 ENUMERATED {mhzl00, mhz400, mhz800, mhzl600, mhz2000}
    measDurationSymbols-vl700 ENUMERATED {syml40, sym560, syml120}
    ref-SCS-CP-vl700 ENUMERATED {kHzl20, kHz480, kHz960}
    ] ]
}
SSB-PositionQCL-CellsToAddModList-rl6 ::= SEQUENCE (SIZE (l..maxNrofCellMeas)) OF SSB-PositionQCL-CellsToAddMod-rl6
SSB-PositionQCL-CellsToAddMod-r16 ::= SEQUENCE [
```


ETSI


--- Page 604  ---


3GPP TS 38.331 version 17.0.0 Release 17
603
ETSI TS 138331 V17.0.0 (2022-05)
```
    physCellId-rl6
    ssb-PositionQCL-rl6 SSB-PositionQCL-Relation-rl6
}
-- TAG-MEASOBJECTNR-STOP
-- ASNISTOP
```


Editor's note: The rmtc-Bandwidth-r17 needs RAN4 confirmation.

\begin{tabular}{|l|l|}
\hline & Cells ToAddMod field descriptions \\
\hline \begin{tabular}{l}
cellindividua/Offset \\
Cell individual offsets applicable to a specific cell.
\end{tabular} & \\
\hline \begin{tabular}{l}
physCellld \\
Physical cell identity of a cell in the cell list.
\end{tabular} & \\
\hline
\end{tabular}

ETSI


--- Page 605  ---


3GPP TS 38.331 version 17.0.0 Release 17
604
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasObjectNR field descriptions \\
\hline \begin{tabular}{l}
absThreshCSI-RS-Consolidation \\
Absolute threshold for the consolidation of measurement results per CSI-RS resource(s) from L1 filter(s). The field is used for the derivation of cell measurement results as described in 5.5.3.3 and the reporting of beam measurement information per CSI-RS resource as described in 5.5.5.2.
\end{tabular} \\
\hline \begin{tabular}{l}
absThreshSS-BlocksConsolidation \\
Absolute threshold for the consolidation of measurement results per SS/PBCH block(s) from L1 filter(s). The field is used for the derivation of cell measurement results as described in 5.5.3.3 and the reporting of beam measurement information per SS/PBCH block index as described in 5.5.5.2.
\end{tabular} \\
\hline \begin{tabular}{l}
allowedCells ToAddModList \\
List of cells to add/modify in the allow-list of cells. It applies only to SSB resources.
\end{tabular} \\
\hline \begin{tabular}{l}
allowedCells ToRemoveList \\
List of cells to remove from the allow-list of cells.
\end{tabular} \\
\hline \begin{tabular}{l}
associatedMeasGapSSB \\
Indicates the associated measurement gap for SSB measuring identified by ssb-ConfigMobility in this measurement object. When multiple MeasObjectNR with the same SSB frequency are configured, the network configures the same measurement gap ID in this field for each MeasObjectNR.
\end{tabular} \\
\hline \begin{tabular}{l}
associatedMeasGapCSIRS \\
Indicates the associated measurement gap for CSI-RS measuring identified by csi-rs-ResourceConfigMobility in this measurement object.
\end{tabular} \\
\hline \begin{tabular}{l}
cellsToAddModList \\
List of cells to add/modify in the cell list.
\end{tabular} \\
\hline \begin{tabular}{l}
cellsToRemoveList \\
List of cells to remove from the cell list.
\end{tabular} \\
\hline \begin{tabular}{l}
excludedCellsToAddModList \\
List of cells to add/modify in the exclude-list of cells. It applies only to SSB resources.
\end{tabular} \\
\hline \begin{tabular}{l}
excludedCellsToRemoveList \\
List of cells to remove from the exclude-list of cells.
\end{tabular} \\
\hline \begin{tabular}{l}
freqBandindicatorNR \\
The frequency band in which the SSB and/or CSI-RS indicated in this MeasObjectNR are located and according to which the UE shall perform the RRM measurements. This field is always provided when the network configures measurements with this MeasObjectNR.
\end{tabular} \\
\hline \begin{tabular}{l}
measCyclePSCell \\
The parameter is used only when the PSCell is configured on the frequency indicated by the measObjectNR and the SCG is deactivated, see TS 38.133 [14]. The field may also be configured when the PSCell is not configured on that frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
measCycleSCell \\
The parameter is used only when an SCell is configured on the frequency indicated by the measObjectNR and is in deactivated state, see TS 38.133 [14]. gNB configures the parameter whenever an SCell is configured on the frequency indicated by the measObject \( N R \), but the field may also be signalled when an SCell is not configured. Value sf160 corresponds to 160 sub-frames, value sf256 corresponds to 256 sub-frames and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofCSInrofCSI-RS-ResourcesToAverage \\
Indicates the maximum number of measurement results per beam based on CSI-RS resources to be averaged. The same value applies for each detected cell associated with this MeasObjectNR.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofSS-BlocksToAverage \\
Indicates the maximum number of measurement results per beam based on SS/PBCH blocks to be averaged. The same value applies for each detected cell associated with this MeasObject.
\end{tabular} \\
\hline \begin{tabular}{l}
offsetMO \\
Offset values applicable to all measured cells with reference signal(s) indicated in this MeasObjectNR.
\end{tabular} \\
\hline \begin{tabular}{l}
quantityConfigIndex \\
Indicates the n -th element of quantityConfigNR-List provided in MeasConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
referenceSignalConfig \\
RS configuration for SS/PBCH block and CSI-RS.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 606  ---


3GPP TS 38.331 version 17.0.0 Release 17
605
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
refFreqCSI-RS \\
Point A which is used for mapping of CSI-RS to physical resources according to TS 38.211 [16] clause 7.4.1.5.3.
\end{tabular} \\
\hline \begin{tabular}{l}
smtc1 \\
Primary measurement timing configuration. (see clause 5.5.2.10).
\end{tabular} \\
\hline \begin{tabular}{l}
smtc2 \\
Secondary measurement timing configuration for SS corresponding to this MeasObjectNR with PCI listed in pci-List. For these SS, the periodicity is indicated by periodicity in smtc2 and the timing offset is equal to the offset indicated in periodicityAndOffset modulo periodicity. periodicity in smtc2 can only be set to a value strictly shorter than the periodicity indicated by periodicityAndOffset in smtc1 (e.g. if periodicityAndOffset indicates sf10, periodicity can only be set of sf5, if periodicityAndOffset indicates sf5, smtc2 cannot be configured).
\end{tabular} \\
\hline \begin{tabular}{l}
smtc3list \\
Measurement timing configuration list for SS corresponding to IAB-MT. This is used for the IAB-node's discovery of other IAB-nodes and the IAB-Donor-DUs.
\end{tabular} \\
\hline \begin{tabular}{l}
smtc4List \\
Measurement timing configuration list for NTN deployments. Details FFS. FFS whether smtc1 or smtc2 can be configured with this.
\end{tabular} \\
\hline \begin{tabular}{l}
ssbFrequency \\
Indicates the frequency of the SS associated to this MeasObjectNR. For operation with shared spectrum channel access, this field is a k*30 kHz shift from the sync raster where \( \mathrm{k}=0,1,2 \), and so on if the reportType within the corresponding ReportConfigNR is set to reportCGI (see TS 38.211 [16], clause 7.4.3.1). Frequencies are considered to be on the sync raster if they are also identifiable with a GSCN value (see TS 38.101-1 [15]).
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionQCL-Common \\
Indicates the QCL relationship between SS/PBCH blocks for all measured cells as specified in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
ssbSubcarrierSpacing \\
Subcarrier spacing of SSB. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 120 or 240 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline \begin{tabular}{l}
t312 \\
The value of timer T312. Value ms0 represents 0 ms , ms50 represents 50 ms and so on.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 607  ---


3GPP TS 38.331 version 17.0.0 Release 17
606
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RMTC-Config field descriptions \\
\hline \begin{tabular}{l}
measDurationSymbols \\
Number of consecutive symbols for which the Physical Layer reports samples of RSSI (see TS 38.215 [9], clause 5.1.21). Value sym1 corresponds to one symbol, sym14or12 corresponds to 14 symbols of the reference numerology for NCP and 12 symbols for ECP, and so on. \\
If measDurationSymbols-v1700 is signalled, the UE ignores measDurationSymbols-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
ref-SCS-CP \\
Indicates a reference subcarrier spacing and cyclic prefix to be used for RSSI measurements (see TS 38.215 [9]). Value kHz15 corresponds to 15kHz, kHz30 corresponds to 30 kHz , value \( \mathrm{kHz} 60-\mathrm{NCP} \) corresponds to 60 kHz using normal cyclic prefix (NCP), and kHz60-ECP corresponds to 60 kHz using extended cyclic prefix (ECP). \\
If ref-SCS-CP-v1700 is signalled, the UE ignores ref-SCS-CP-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
mtc-Bandwidth \\
Indicates the bandwidth for the RSSI measurement (see TS 38.215 [9], clause 5.1.21).
\end{tabular} \\
\hline \begin{tabular}{l}
mitc-Frequency \\
Indicates the center frequency of the measured bandwidth (see TS 38.215 [9], clause 5.1.21).
\end{tabular} \\
\hline \begin{tabular}{l}
mtc-Periodicity \\
Indicates the RSSI measurement timing configuration (RMTC) periodicity (see TS 38.215 [9], clause 5.1.21).
\end{tabular} \\
\hline \begin{tabular}{l}
mtc-SubframeOffset \\
Indicates the RSSI measurement timing configuration (RMTC) subframe offset for this frequency (see TS 38.215 [9], clause 5.1.21). For inter-frequency measurements, this field is optional present and if it is not configured, the UE chooses a random value as \( m \) tc-SubframeOffset for measDurationSymbols which shall be selected to be between 0 and the configured \( m \) tc-Periodicity with equal probability.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline ReferenceSigna/Config field descriptions \\
\hline \begin{tabular}{l}
csi-rs-ResourceConfigMobility \\
CSI-RS resources to be used for CSI-RS based RRM measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-ConfigMobility \\
SSB configuration for mobility (nominal SSBs, timing configuration).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SSB-ConfigMobility field descriptions \\
\hline \begin{tabular}{l}
deriveSSB-IndexFromCell \\
If this field is set to true, UE assumes SFN and frame boundary alignment across cells on the same frequency carrier as specified in TS 38.133 [14]. Hence, if the UE is configured with a serving cell for which (absoluteFrequencySSB, subcarrierSpacing) in ServingCellConfigCommon is equal to (ssbFrequency, ssbSubcarrierSpacing) in this MeasObjectNR, this field indicates whether the UE can utilize the timing of this serving cell to derive the index of SS block transmitted by neighbour cell. Otherwise, this field indicates whether the UE may use the timing of any detected cell on that target frequency to derive the SSB index of all neighbour cells on that frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
deriveSSB-IndexFromCellinter \\
If this field is present, UE assumes SFN and frame boundary alignment between the reference serving cell indicated by ServCelllndex and all neighbour cells in this MeasObjectNR as specified in TS 38.133 [14]. This field also indicates that the UE can utilize the timing of the reference serving cell indicated by ServCelllndex to derive the index of SS block transmitted by all neighbour cells with same frequency as this MeasObjectNR.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-ToMeasure \\
The set of SS blocks to be measured within the SMTC measurement duration. The first/leftmost bit corresponds to SS/PBCH block index 0 , the second bit corresponds to SS/PBCH block index 1, and so on. Value 0 in the bitmap indicates that the corresponding SS/PBCH block is not to be measured while value 1 indicates that the corresponding SS/PBCH block is to be measured (see TS 38.215 [9]). When the field is not configured the UE measures on all SS blocks. Regardless of the value of this field, SS/PBCH blocks outside of the applicable smtc are not to be measured. See TS 38.215 [9] clause 5.1.1.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 608  ---


3GPP TS 38.331 version 17.0.0 Release 17
607
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SSB-PositionQCL-CellsToAddMod field descriptions \\
\hline \begin{tabular}{l}
physCellld \\
Physical cell identity of a cell in the cell list.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionQCL \\
Indicates the QCL relation between SS/PBCH blocks for a specific cell as specified in TS 38.213 [13], clause 4.1. If provided, the cell specific value overwrites the value signalled by ssb-PositionQCL-Common.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline CSI-RS & This field is mandatory present if csi-rs-ResourceConfigMobility is configured, otherwise, it is absent. \\
\hline SSBorAssociatedSSB & This field is mandatory present if ssb-ConfigMobility is configured or associatedSSB is configured in at least one cell. Otherwise, it is absent, Need R. \\
\hline IntraFreqConnected & This field is optionally present, Need R if the UE is configured with a serving cell for which (absoluteFrequencySSB, subcarrierSpacing) in ServingCellConfigCommon is equal to (ssbFrequency, ssbSubcarrierSpacing) in this MeasObjectNR, otherwise, it is absent. \\
\hline SharedSpectrum & This field is mandatory present if this MeasObject is for a frequency which operates with shared spectrum channel access. Otherwise, it is absent, Need R. \\
\hline
\end{tabular}
- MeasObjectNR-SL

The IE MeasObjectNR-SL concerns a measurement object including a list of transmission resource pool(s) for which CBR measurement is performed for NR sidelink communication.

MeasObjectNR-SL information element
```
-- ASNISTART
-- TAG-MEASOBJECTNR-SL-START
MeasObjectNR-SL-rl6 ::= SEQUENCE \
    tx-PoolMeasToRemoveList-rl6 Tx-PoolMeasList-rl6 OPTIONAL, Need. N
    tx-PoolMeasToAddModList-rl6 Tx-PoolMeasList-rl6 OPTIONAL -- Need N
}
Tx-PoolMeasList-rl6 ::= SEQUENCE (SIZE (1..maxNrofSL-PoolToMeasureNR-r16)) OF SL-ResourcePoolID-rl6
-- TAG-MEASOBJECTNR-SL-STOP
-- ASNISTOP
```

- MeasObjectRxTxDiff

The IE MeasObjectRxTxDiff is used to configure the measurement object for UE Rx-Tx time difference measurement.

ETSI


--- Page 609  ---


3GPP TS 38.331 version 17.0.0 Release 17
608
ETSI TS 138331 V17.0.0 (2022-05)

MeasObjectRxTxDiff information element
```
-- ASNISTART
-- TAG-MEASOBJECTRXTXDIFF-START
MeasObjectRxTxDiff-rl7 ::= SEQUENCE [
    dl-Ref-rl7 CHOICE {
        prs-Ref-rl7 NULL,
        csi-RS-Ref-rl7 NULL,
    \cdots...
    } ...
}
-- TAG-MEASOBJECTRXTXDIFF-STOP
-- ASNISTOP
```

```
MeasObjectRxTxDiff field descriptions
di-Ref
configures the DL references signals to measure Rx-Tx time difference. prs-Ref-r17 indicates PRS is chosen, and csi-RS-Ref-r17 indicates that CSI-RS for tracking is chosen. Only one PRS resource is configured by the network. Only one NZP-CSI-RS-ResourceSet can be configured with pdc-Info-r17 set to true and it is used for UE Rx-Tx time difference measurement. Only reference signals from the PCell of the MCG can be configured by the network.
```

- MeasObjectToAddModList

The IE MeasObjectToAddModList concerns a list of measurement objects to add or modify.
MeasObjectToAddModList information element
```
-- ASNISTART
-- TAG-MEASOBJECTTOADDMODLIST-START
MeasObjectToAddModList ::=
SEQUENCE (SIZE (1..maxNrofObjectId)) OF MeasObjectToAddMod.
MeasObjectToAddMod ::=
SEQUENCE {
    MeasObjectId,
    CHOICE [
        MeasObjectNR,
        MeasObjectEUTRA,
        MeasObjectUTRA-FDD-rl6,
        MeasObjectNR-SL-rl6,
        MeasObjectCLI-r16,
        MeasObjectRxTxDiff-rl7,
        SL-MeasObject-rl6
```


ETSI


--- Page 610  ---


3GPP TS 38.331 version 17.0.0 Release 17
609
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-MEASOBJECTTOADDMODLIST-STOP
-- ASNISTOP
- MeasObjectUTRA-FDD

The IE MeasObjectUTRA-FDD specifies information applicable for inter-RAT UTRA-FDD neighbouring cells.
MeasObjectUTRA-FDD information element
```
-- ASN1START
-- TAG-MEASOBJECTUTRA-FDD-START
MeasObjectUTRA-FDD-rl6 ::=
    carrierFreq-rl6
    utra-FDD-Q-OffsetRange-rl6
    cellsToRemoveList-rl6
    cellsToAddModList-rl6
    ...
}
CellsToAddModListUTRA-FDD-rl6 ::=
CellsToAddModUTRA-FDD-rl6 ::=
    cellIndexUTRA-FDD-r16
    physCellId-rl6
}
UTRA-FDD-CellIndexList-rl6 ::=
UTRA-FDD-CellIndex-rl6 ::=
-- TAG-MEASOBJECTUTRA-FDD-STOP
-- ASNISTOP
```

```
SEQUENCE {
    ARFCN-ValueUTRA-FDD-rl6,
    UTRA-FDD-Q-OffsetRange-rl6 OPTIONAL, -- Need R
    UTRA-FDD-CellIndexList-rl6 OPTIONAL, -- Need N
    CellsToAddModListUTRA-FDD-rl6 OPTIONAL, -- Need N
```


\begin{tabular}{|l|}
\hline MeasObjectUTRA-FDD field descriptions \\
\hline \begin{tabular}{l}
carrierFreq \\
Identifies UTRA-FDD carrier frequency for which this configuration is valid. NR does not configure more than one measurement object for the same physical frequency regardless of the ARFCN used to indicate this.
\end{tabular} \\
\hline \begin{tabular}{l}
cellindexUTRA-FDD \\
Entry index in the neighbouring cell list.
\end{tabular} \\
\hline \begin{tabular}{l}
cellsToAddModList \\
List of UTRA-FDD cells to add/modify in the neighbouring cell list.
\end{tabular} \\
\hline \begin{tabular}{l}
cellsToRemoveList \\
List of cells to remove from the neighbouring cell list.
\end{tabular} \\
\hline \begin{tabular}{l}
utra-FDD-Q-OffsetRange \\
Used to indicate a frequency specific offset to be applied when evaluating triggering conditions for measurement reporting. The value is in dB.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 611  ---


3GPP TS 38.331 version 17.0.0 Release 17
610
ETSI TS 138331 V17.0.0 (2022-05)
- MeasResultCellListSFTD-NR

The IE MeasResultCellListSFTD-NR consists of SFN and radio frame boundary difference between the PCell and an NR cell as specified in TS 38.215 [9] and TS 38.133 [14].
MeasResu/tCe/IListSFTD-NR information element
```
-- ASNISTART
-- TAG-MEASRESULTCELLLISTSFTD-NR-START
MeasResultCellListSFTD-NR ::= SEQUENCE (SIZE (l..maxCellSFTD)) OF MeasResultCellSFTD-NR
MeasResultCellSFTD-NR ::=
    physCellId.
    sfn-OffsetResult
    frameBoundaryOffsetResult
    rsrp-Result
}
-- TAG-MEASRESULTCELLLISTSFTD-NR-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MeasResultCellSFTD-NR field descriptions \\
\hline \begin{tabular}{l}
sfn-OffsetResult \\
Indicates the SFN difference between the PCell and the NR cell as an integer value according to TS 38.215 [9].
\end{tabular} \\
\hline \begin{tabular}{l}
frameBoundaryOffsetResult \\
Indicates the frame boundary difference between the PCell and the NR cell as an integer value according to TS 38.215 [9].
\end{tabular} \\
\hline
\end{tabular}
- MeasResulfCellListSFTD-EUTRA

The IE MeasResultCellListSFTD-EUTRA consists of SFN and radio frame boundary difference between the PCell and an E-UTRA PSCell.
MeasResu/tCel/ListSFTD-EUTRA information element
```
-- ASNISTART
-- TAG-MEASRESULTCELLLISTSETD-EUTRA-START
MeasResultCellListSFTD-EUTRA ::= SEQUENCE (SIZE (l..maxCellSFTD)) OF MeasResultSFTD-EUTRA
MeasResultSFTD-EUTRA ::=
    eutra-PhysCellId
    sfn-OffsetResult
    INTEGER (0..1023),
    rsrp-Result RSRP-Range OPTIONAL
}
-- TAG-MEASRESULTCELLLISTSFTD-EUTRA-STOP
-- ASNISTOP
```


ETSI


--- Page 612  ---


3GPP TS 38.331 version 17.0.0 Release 17
611
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasResuitSFTD-EUTRA field descriptions \\
\hline \begin{tabular}{l}
eutra-PhysCellid \\
Identifies the physical cell identity of the E-UTRA cell for which the reporting is being performed.
\end{tabular} \\
\hline \begin{tabular}{l}
sfn-OffsetResult \\
Indicates the SFN difference between the PCell and the E-UTRA cell as an integer value according to TS 38.215 [9].
\end{tabular} \\
\hline \begin{tabular}{l}
frameBoundaryOffsetResult \\
Indicates the frame boundary difference between the PCell and the E-UTRA cell as an integer value according to TS 38.215 [9].
\end{tabular} \\
\hline
\end{tabular}

MeasResults
The IE MeasResults covers measured results for intra-frequency, inter-frequency, inter-RAT mobility and measured results for NR sidelink communication.
MeasResu/ts information element
```
-- ASNISTART
-- TAG-MEASRESULTS-START
MeasResults ::= SEQUENCE \
    measId.
    measResultServingMOList
    measResultNeighCells
        measResultListNR
        ...;
        measResultListEUTRA
        measResultListUTRA-FDD-rl6
        sl-MeasResultsCandRelay-rl7
    }
    ...,
    [ [
    measResultServFreqListEUTRA-SCG
    measResultServFreqListNR-SCG
    measResultSFTD-EUTRA
    measResultSFTD-NR
        ]],
        [ [
    measResultCellListSFTD-NR
    ]],
    [ [
    measResultForRSSI-r16
    locationInfo-rl6
    ul-PDCP-DelayValueResultList-r16
    measResultsSL-rl6
    measResultCLI-rl6
    ]],
    [ [
    measResultRxTxTimeDiff-rl7
    sl-MeasResultServingRelay-rl7
```

```
EQUENCE \
    MeasResultServMOList,
    CHOICE [
        MeasResultListNR,
        MeasResultListEUTRA,
        MeasResultListUTRA-FDD-rl6,
```

```
        SL-MeasResultsRelay-rl7
            OPTIONAL,
    MeasResultServFreqListEUTRA-SCG OPTIONAL,
    MeasResultServFreqListNR-SCG
    MeasResultSFTD-EUTRA
    MeasResultCellSFTD-NR
    MeasResultCellListSFTD-NR OPTIONAL
    MeasResultForRSSI-rl6 OPTIONAL,
    LocationInfo-rl6 OPTIONAL,
    UL-PDCP-DelayValueResultList-rl6 OPTIONAL,
    MeasResultsSL-rl6 OPTIONAL,
    MeasResultCLI-r16
    MeasResultRxTxTimeDiff-rl7 OPTIONAL,
    SL-MeasResultRelay-rl7 OPTIONAL,
```


ETSI


--- Page 613  ---


3GPP TS 38.331 version 17.0.0 Release 17
612
```
    ul-PDCP-ExcessDelayResultList-rl7
    ] ]
}
MeasResultServMOList ::=
MeasResultServMO ::=
    servCellId.
    measResultServingCell
    measResultBestNeighCell
    ...
}
MeasResultListNR ::=
MeasResultNR::=
    physCellId.
    measResult
        cellResults
            resultsSSB-Cell
            resultsCSI-RS-Cell
        },
        rsIndexResults
            resultsSSB-Indexes
            resultsCSI-RS-Indexes
        }
    },
    ...,
    [ [
    cgi-Info
    ]] ,
    [ [
    choCandidate-rl7
    choConfig-rl7
    triggeredEvent-rl7
        condFirstEventFullfilled.
        condSecondEventFullfilled
        timeBetweenEvents-rl7
        firstTriggeredEvent
        }
    ] ]
}
MeasResultListEUTRA ::=
MeasResultEUTRA ::=
    eutra-PhysCellId
    measResult
    cgi-Info
    ...
}
```


UL-PDCP-ExcessDelayResultList-rl7

ETSI
```
SEQUENCE (SIZE (l..maxNrofServingCells)) OF MeasResultServMO
SEQUENCE \
    ServCellIndex,
    MeasResultNR,
    MeasResultNR
SEQUENCE (SIZE (l..maxCellReport)) OF MeasResultNR
SEQUENCE \
    PhysCellId.
    SEQUENCE {
        SEQUENCE\
            MeasQuantityResults OPTIONAL,
            MeasQuantityResults OPTIONAL
        SEQUENCE\
            ResultsPerSSB-IndexList OPTIONAL,
            ResultsPerCSI-RS-IndexList OPTIONAL
                OPTIONAL
    CGI-InfoNR OPTIONAL
    ENUMERATED {true} OPTIONAL,
    SEQUENCE (SIZE (1..2)) OF CondTriggerConfig-rl6 OPTIONAL,
    SEQUENCE \
        ENOMERATED {true} OPTIONAL,
        ENUMERATED {true}
        TimeBetweenEvent-rl7
        ENUMERATED [condFirstEvent, condSecondEvent]
SEQUENCE (SIZE (l..maxCellReport)) OF MeasResultEUTRA
SEQUENCE \
    PhysCellId,
    MeasQuantityResultsEUTRA,
    CGI-InfoEUTRA OPTIONAL,
```

ETSI TS 138331 V17.0.0 (2022-05)
OPTIONAL
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL
OPTIONAL,
OPTIONAL,
OPTIONAL
OPTIONAL
’


--- Page 614  ---


3GPP TS 38.331 version 17.0.0 Release 17
613
ETSI TS 138331 V17.0.0 (2022-05)
```
MultiBandInfoListEUTRA ::= SEQUENCE (SIZE (1..maxMultiBands)) OF FreqBandIndicatorEUTRA
MeasQuantityResults ::= SEQUENCE [
```

```
    rsrq RSRQ-Range
    sinr SINR-Range
}
MeasQuantityResultsEUTRA ::= SEQUENCE \
```

```
    sinr SINR-RangeEUTRA
}
ResultsPerSSB-IndexList::= SEQUENCE (SIZE (l..MaxNrofIndexesToReport2)) OF ResultsPerSSB-Index
ResultsPerSSB-Index ::= SEQUENCE [
    ssb-Index
    asb-Index,
}
ResultsPerCSI-RS-IndexList::= SEQUENCE (SIZE (1..maxNrofIndexesToReport2)) OF ResultsPerCSI-RS-Index
ResultsPerCSI-RS-Index ::= SEQUENCE {
    csi-RS-Index
    CSI-RS-Index,
}
MeasResultServFreqListEUTRA-SCG ::= SEQUENCE (SIZE (1..maxNrofServingCellsEUTRA)) OF MeasResult2EUTRA
MeasResultServFreqListNR-SCG ::= SEQUENCE (SIZE (l..maxNrofServingCells)) OF MeasResult2NR
MeasResultListUTRA-FDD-rl6 := SEQUENCE (SIZE (1..maxCellReport)) OF MeasResultUTRA-FDD-rl6
MeasResultUTRA-FDD-rl6 ::= SEQUENCE [
    physCellId-rl6
    measResult-rl6
        utra-FDD-RSCP-r16
        INTEGER (-9..91) OPTIONAL,
    }
}
MeasResultForRSSI-rl6 ::= SEQUENCE \
    rssi-Result-rl6
    channelOccupancy-rl6 INTEGER (0.100)
}
MeasResultCLI-rl6 ::= SEQUENCE [
    measResultListSRS-RSRP-r16 MeasResultListSRS-RSRP-rl6
    measResultListCLI-RSSI-rl6 MeasResultListCLI-RSSI-rl6
}
MeasResultListSRS-RSRP-rl6 ::= SEQUENCE (SIZE (l.. maxCLI-Report-rl6)) OF MeasResultSRS-RSRP-rl6
```


--- Page 615  ---


3GPP TS 38.331 version 17.0.0 Release 17
614
ETSI TS 138331 V17.0.0 (2022-05)
```
MeasResultSRS-RSRP-r16 ::= SEQUENCE [
    srs-ResourceId-rl6
    srs-RSRP-Result-rl6 SRS-RSRP-Range-r16
}
MeasResultListCLI-RSSI-rl6 ::= SEQUENCE (SIZE (l.. maxCLI-Report-rl6)) OF MeasResultCLI-RSSI-rl6
MeasResultCLI-RSSI-rl6 ::= SEQUENCE [
    rssi-ResourceId-rl6 RSSI-ResourceId-rl6,
    cli-RSSI-Result-rl6 CLI-RSSI-Range-rl6
}
UL-PDCP-DelayValueResultList-rl6 ::= SEQUENCE (SIZE (l..maxDRB)) OF UL-PDCP-DelayValueResult-rl6
UL-PDCP-DelayValueResult-rl6 ::= SEQUENCE [
    drb-Id-rl6 DRB-Identity,
    averageDelay-rl6 INTEGER (0.10000),
    ...
}
UL-PDCP-ExcessDelayResultList-rl7 ::= SEQUENCE (SIZE (l..maxDRB)) OF UL-PDCP-ExcessDelayResult-rl7
UL-PDCP-ExcessDelayResult-rl7 ::= SEQUENCE [
    drb-Id-rl7 DRB-Identity,
    excessDelay-rl7 INTEGER (0..31),
    ...
}
TimeBetweenEvent-rl7 ::= INTEGER (0.1023)
-- TAG-MEASRESULTS-STOP
-- ASNISTOP
```


MeasResultEUTRA field descriptions
```
eutra-PhysCellld
Identifies the physical cell identity of the E-UTRA cell for which the reporting is being performed. The UE reports a value in the range 0..503, other values are reserved.
```


ETSI


--- Page 616  ---


3GPP TS 38.331 version 17.0.0 Release 17
615
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasResultNR field descriptions \\
\hline \begin{tabular}{l}
averageDelay \\
Indicates average delay for the packets during the reporting period, as specified in TS 38.314 [53]. Value 0 corresponds to 0 millisecond, value 1 corresponds to 0.1 millisecond, value 2 corresponds to 0.2 millisecond, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
cellResults \\
Cell level measurement results.
\end{tabular} \\
\hline \begin{tabular}{l}
choCandidate \\
This field indicates whether the associated cell is a candidate target cell for conditional handover. This field may be included only in the reports associated to UE/nformationResponse message, e.g., SuccessHO-Report.
\end{tabular} \\
\hline \begin{tabular}{l}
choConfig \\
If the associated cell is a candidate target cell for conditional handover, this field indicates the conditional handover execution condition for each meas/ \( d \) within condTriggerConfig associated to the cell. This field may be included only in the reports associated to UEInformationResponse message, e.g., iff-Report.
\end{tabular} \\
\hline \begin{tabular}{l}
condFirstEventFullilled \\
This field indicates whether the first entry of choConfig corresponds to a fullfilled execution condition at the moment of conditional reconfiguration execution, or radio link failure. This field may be included only in the reports associated to UE/nformationResponse message, e.g., \( n f \)-Report.
\end{tabular} \\
\hline \begin{tabular}{l}
condSecondEventFullilled \\
This field indicates whether the second entry of choConfig corresponds to a fulfilled execution condition at the moment of conditional reconfiguration execution, or radio link failure. This field may be included only in the reports associated to UE/nformationResponse message, e.g., Nf-Report.
\end{tabular} \\
\hline \begin{tabular}{l}
drb-ld \\
Indicates DRB value for which uplink PDCP delay ratio or value is provided, according to TS 38.314 [53].
\end{tabular} \\
\hline \begin{tabular}{l}
firstTriggeredEvent \\
This field is set to condFirstEvent if the execution condition associated to the first entry of choConfig was fulfilled first in time. This field is set to condSecondEvent if the execution condition associated to the second entry of choConfig was fulfilled first in time. This field may be included only in the reports associated to UEInformationResponse message, e.g., nf-Report.
\end{tabular} \\
\hline \begin{tabular}{l}
locationinfo \\
Positioning related information and measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
physCellid \\
The physical cell identity of the NR cell for which the reporting is being performed.
\end{tabular} \\
\hline \begin{tabular}{l}
resultsSSB-Cell \\
Cell level measurement results based on SS/PBCH related measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
resultsSSB-indexes \\
Beam level measurement results based on SS/PBCH related measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
resultsCSI-RS-Cell \\
Cell level measurement results based on CSI-RS related measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
resultsCSI-RS-Indexes \\
Beam level measurement results based on CSI-RS related measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
rsindexResults \\
Beam level measurement results.
\end{tabular} \\
\hline \begin{tabular}{l}
timeBetweenEvents \\
Indicates the time elapsed between fulfilling the conditional execution conditions included in choConfig. Value in milliseconds. The maximum value 1023 means 1023 ms or longer. This field may be included only in the reports associated to UEInformationResponse message, e.g., if-Report.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 617  ---


3GPP TS 38.331 version 17.0.0 Release 17
616
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasResultUTRA-FDD field descriptions \\
\hline \begin{tabular}{l}
physCelll \\
The physical cell identity of the UTRA-FDD cell for which the reporting is being performed.
\end{tabular} \\
\hline \begin{tabular}{l}
utra-FDD-EcN0 \\
According to CPICH_Ec/No in TS 25.133 [46] for FDD.
\end{tabular} \\
\hline \begin{tabular}{l}
utra-FDD-RSCP \\
According to CPICH_RSCP in TS 25.133 [46] for FDD.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 618  ---


3GPP TS 38.331 version 17.0.0 Release 17
617
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasResuits field descriptions \\
\hline \begin{tabular}{l}
excessDelay \\
Indicates the ratio of packets in UL per DRB exceeding the configured delay threshold among the UL PDCP SDUs, according to the UL PDCP Excess Packet Delay per DRB mapping table, as defined in TS 38.314 [53], Table 4.3.1.e-1.
\end{tabular} \\
\hline \begin{tabular}{l}
measid \\
Identifies the measurement identity for which the reporting is being performed.
\end{tabular} \\
\hline \begin{tabular}{l}
measQuantityResuits \\
The value sinr is not included when it is used for LogMeasReport-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultCellListSFTD-NR \\
SFTD measurement results between the PCell and the NR neighbour cell(s) in NR standalone.
\end{tabular} \\
\hline \begin{tabular}{l}
measResuItCLI \\
CLI measurement results.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultEUTRA \\
Measured results of an E-UTRA cell.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultForRSSI \\
Includes measured RSSI result in dBm (see TS 38.215 [9]) and channelOccupancy which is the percentage of samples when the RSSI was above the configured channelOccupancyThreshold for the associated reportConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultListEUTRA \\
List of measured results for the maximum number of reported best cells for an E-UTRA measurement identity.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultListNR \\
List of measured results for the maximum number of reported best cells for an NR measurement identity.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultListUTRA-FDD \\
List of measured results for the maximum number of reported best cells for a UTRA-FDD measurement identity.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultNR \\
Measured results of an NR cell.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultServFreqListEUTRA-SCG \\
Measured results of the E-UTRA SCG serving frequencies: the measurement result of PSCell and each SCell, if any, and of the best neighbouring cell on each E-UTRA SCG serving frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultServFreqListNR-SCG \\
Measured results of the NR SCG serving frequencies: the measurement result of PSCell and each SCell, if any, and of the best neighbouring cell on each NR SCG serving frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultServingMOList \\
Measured results of measured cells with reference signals indicated in the serving cell measurement objects including measurement results of SpCell, configured SCell(s) and best neighbouring cell within measured cells with reference signals indicated in on each serving cell measurement object. If the sending of the MeasurementReport message is triggered by a measurement configured by the field si-ConfigDedicatedForNR received within an E-UTRA RRCConnectionReconfiguration message (i.e. CBR measurements), this field is not applicable and its contents is ignored by the network.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultSFTD-EUTRA \\
SFTD measurement results between the PCell and the E-UTRA PScell in NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultSFTD-NR \\
SFTD measurement results between the PCell and the NR PScell in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultsSL \\
CBR measurements results for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultUTRA-FDD \\
Measured result of a UTRA-FDD cell.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 619  ---


3GPP TS 38.331 version 17.0.0 Release 17
618
ETSI TS 138331 V17.0.0 (2022-05)

MeasResult2EUTRA
The IE MeasResult2EUTRA contains measurements on E-UTRA frequencies.
MeasResult2EUTRA information element
```
-- ASNISTART
-- TAG-MEASRESULT2EUTRA-START
MeasResult2EUTRA ::= SEQUENCE [
    carrierFreq ARFCN-ValueEUTRA,
    measResultServingCell MeasResultEUTRA
    measkesultBestNeighCell MeasResultEUTRACIONAL,
    ...
}
-- TAG-MEASRESULT2EUTRA-STOP
-- ASNISTOP
```


MeasResult2NR
The IE MeasResult2NR contains measurements on NR frequencies.
MeasResu/t2NR information element
```
-- ASNISTART
-- TAG-MEASRESULT2NR-START
MeasResult2NR::= SEQUENCE \
    ssbFrequency
    ARFCN-ValueNR OPTIONAL,
    measResultServingCell
    measResultNeighCellListNR
    ...
}
-- TAG-MEASRESULT2NR-STOP
-- ASNISTOP
```


MeasResultidleEUTRA
The IE MeasResultldleEUTRA covers the E-UTRA measurement results performed in RRC_IDLE and RRC_INACTIVE.
MeasResultidleEUTRA information element
```
-- ASNISTART
```


ETSI


--- Page 620  ---


3GPP TS 38.331 version 17.0.0 Release 17
619
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-MEASRESULTIDLEEUTRA-START
MeasResultIdleEUTRA-rl6 ::= SEQUENCE {
```

```
    ...
}
MeasResultsPerCarrierIdleEUTRA-rl6::= SEQUENCE [
    carrierFreqEUTRA-r16
    ARECN-ValueEUTRA,
    ...
}
MeasResultsPerCellIdleEUTRA-rl6 ::= SEQUENCE [
    eutra-PhysCellId-rl6
    measIdleResultEUTRA-rl6
        rsrp-ResultEUTRA-rl6
        rsrq-ResultEUTRA-r16
    },
    ...
}
-- TAG-MEASRESULTIDLEEUTRA-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MeasResultidieEUTRA field descriptions \\
\hline \begin{tabular}{l}
carrierFreqEUTRA \\
Indicates the E-UTRA carrier frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
eutra-PhysCellld \\
Indicates the physical cell identity of an E-UTRA cell.
\end{tabular} \\
\hline \begin{tabular}{l}
measidieResuitEUTRA \\
Idlefinactive measurement results for an E-UTRA cell.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultsPerCarrierListidleEUTRA \\
List of idle/inactive measured results for the maximum number of reported E-UTRA carriers.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultsPerCellListidieEUTRA \\
List of idle/inactive measured results for the maximum number of reported best cells for a given E-UTRA carrier.
\end{tabular} \\
\hline
\end{tabular}
- MeasResult/dleNR

The IE MeasResultldleNR covers the NR measurement results performed in RRC_IDLE and RRC_INACTIVE.
MeasResultidieNR information element
```
-- ASNISTART
-- TAG-MEASRESULTIDLENR-START
MeasResultIdleNR-rl6 ::= SEQUENCE {
    measResultServingCell-rl6 SEQUENCE {
```


ETSI


--- Page 621  ---


3GPP TS 38.331 version 17.0.0 Release 17
620
ETSI TS 138331 V17.0.0 (2022-05)
```
        resultsSSB-Indexes-rl6 ResultsPerSSB-IndexList-rl6 OPTIONAL
    },
```

```
    ...
}
MeasResultsPerCarrierIdleNR-r16 ::= SEQUENCE [
    carrierFreq-rl6 ARFCN-ValueNR,
    measResultsPerCellListIdleNR-rl6 SEQUENCE (SIZE (l..maxCellMeasIdle-rl6)) OF MeasResultsPerCellIdleNR-rl6,
    ...
}
MeasResultsPerCellIdleNR-rl6 ::= SEQUENCE {
    physCellId-rl6 PhysCellId,
    measIdleResultNR-rl6 SEQUENCE {
        rsrp-Result-rl6 RSRP-Range OPTIONAL,
        rsrq-Result-rl6 RSRQ-Range OPTIONAL,
        resultsSSB-Indexes-r16 ResultsPerSSB-IndexList-rl6 OPTIONAL
    },
    ...
}
ResultsPerSSB-IndexList-rl6 := SEQUENCE (SIZE (l.. maxNrofIndexesToReport)) OF ResultsPerSSB-IndexIdle-rl6
ResultsPerSSB-IndexIdle-rl6 ::= SEQUENCE [
    ssb-Index-rl6
    SSB-Index,
        ssb-RSRP-Result-rl6 RSRP-Range OPTIONAL,
        ssb-RSRQ-Result-rl6 RSRQ-Range OPTIONAL
    }
}
-- TAG-MEASRESULTIDLENR-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MeasResultidieNR field descriptions \\
\hline \begin{tabular}{l}
carrierFreq \\
Indicates the NR carrier frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
measidieResultNR \\
Idle/inactive measurement results for an NR cell (optionally including beam level measurements).
\end{tabular} \\
\hline \begin{tabular}{l}
measResultServingCell \\
Measured results of the serving cell (i.e., PCell) from idle/inactive measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultsPerCellListidieNR \\
List of idle/inactive measured results for the maximum number of reported best cells for a given NR carrier.
\end{tabular} \\
\hline \begin{tabular}{l}
resultsSSB-indexes \\
Beam level measurement results (indexes and optionally, beam measurements).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 622  ---


3GPP TS 38.331 version 17.0.0 Release 17
621
ETSI TS 138331 V17.0.0 (2022-05)
- MeasResultRxTxTimeDiff

The IE MeasResultRxTxTimeDiff is used to provide Rx-Tx time difference measurement result.
MeasResultRx Tx TimeDiff information element
```
-- ASNISTART
-- TAG-MEASRESULTRXTXTIMEDIFF-START
MeasResultRxTxTimeDiff-rl7 ::= SEQUENCE [
    rxTxTimeDiff-ue-rl7 RxTxTimeDiff-rl7 OPTIONAL, -- Need R
    ...
}
-- TAG-MEASRESULTRXTXTIMEDIFF-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MeasResultRx Tx TimeDiff field descriptions \\
\hline \begin{tabular}{l}
rxTxTimeDiff-ue \\
indicates the Rx-Tx Time difference measurement at the UE (see clause 5.1.30, TS 38.215 [9]).
\end{tabular} \\
\hline
\end{tabular}
- MeasResultSCG-Failure

The IE MeasResultSCG-Failure is used to provide information regarding failures detected by the UE in (NG)EN-DC and NR-DC.

MeasResu/tSCG-Failure information element
```
-- ASNISTART
-- TAG-MEASRESULTSCG-FAILURE-START
MeasResultSCG-Failure ::= SEQUENCE {
    measResultPerMOList
    ...;
    [ [
    locationInfo-rl6
    ] ]
}
MeasResultList2NR ::= SEQUENCE (SIZE (1..maxFreq)) OF MeasResult2NR
-- TAG-MEASRESULTSCG-FAILURE-STOP
-- ASNISTOP
```


ETSI


--- Page 623  ---


3GPP TS 38.331 version 17.0.0 Release 17
622
ETSI TS 138331 V17.0.0 (2022-05)
- MeasResultsSL

The IE MeasResultsSL covers measured results for NR sidelink communication.
MeasResu/tsSL information element
```
-- ASNISTART
-- TAG-MEASRESULTSSL-START
MeasResultsSL-rl6 ::= SEQUENCE [
    measResultsListSL-rl6 CHOICE {
        measResultNR-SL-rl6 MeasResultNR-SL-rl6,
        ...
    },
    ...
}
MeasResultNR-SL-rl6 ::= SEQUENCE [
    measResultListCBR-NR-rl6 SEQUENCE (SIZE (l.. maxNrofSL-PoolToMeasureNR-rl6)) OF MeasResultCBR-NR-rl6,
    ...
}
MeasResultCBR-NR-rl6 ::= SEQUENCE {
    sl-poolReportIdentity-rl6 SL-ResourcePoolID-rl6,
    sl-CBR-ResultsNR-rl6 SL-CBR-rl6,
    ...
}
-- TAG-MEASRESULTSSL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline \multicolumn{1}{|c|}{ MeasResultsSL field descriptions } \\
\hline measResultNR-SL \\
Include the measured results for NR sidelink communication. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline MeasResuitNR-SL field descriptions \\
\hline \begin{tabular}{l}
measResultListCBR-NR \\
CBR measurement results for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-poolReportldentity \\
The identity of the transmission resource pool which is corresponding to the si-ResourcePoollD configured in a resource pool for NR sidelink communication.
\end{tabular} \\
\hline
\end{tabular}
- MeasTriggerQuantityEUTRA

The IE MeasTriggerQuantityEUTRA is used to configure the trigger quantity and reporting range for E-UTRA measurements. The RSRP, RSRQ and SINR ranges correspond to RSRP-Range, RSRQ-Range and RS-SINR-Range in TS 36.331 [10], respectively.

ETSI


--- Page 624  ---


3GPP TS 38.331 version 17.0.0 Release 17
623
ETSI TS 138331 V17.0.0 (2022-05)

Meas TriggerQuantityEUTRA information element
```
-- ASNISTART
-- TAG-MEASTRIGGERQUANTITYEUTRA-START
```

```
MeasTriggerQuantityEUTRA::=
    rsrp
    rsrq RSRQ-RangeEUTRA,
    sinr
}
RSRP-RangeEUTRA ::= INTEGER (0..97)
RSRQ-RangeEUTRA ::= INTEGER (0..34)
SINR-RangeEUTRA ::= INTEGER (0.127)
-- TAG-MEASTRIGGERQUANTITYEUTRA-STOP
-- ASNISTOP
```


MobilityStateParameters
The IE MobilityStateParameters contains parameters to determine UE mobility state.

MobilityStateParameters information element
```
-- ASNISTART
-- TAG-MOBILITYSTATEPARAMETERS-START
MobilityStateParameters ::=
    t-Evaluation
    t-HystNormal
    n-CellChangeMedium
    n-CellChangeHigh
}
-- TAG-MOBILITYSTATEPARAMETERS-STOP
-- ASNISTOP
```


ETSI


--- Page 625  ---


3GPP TS 38.331 version 17.0.0 Release 17
624
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MobilityStateParameters field descriptions \\
\hline \begin{tabular}{l}
n-CellChangeHigh \\
The number of cell changes to enter high mobility state. Corresponds to \( N_{\mathrm{CR}} \) H in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
n-CellChangeMedium \\
The number of cell changes to enter medium mobility state. Corresponds to \( \mathrm{N}_{\mathrm{CR}} \mathrm{m} \) in TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
t-Evaluation \\
The duration for evaluating criteria to enter mobility states. Corresponds to \( \mathrm{T}_{\mathrm{cRmax}} \) in TS 38.304 [20]. Value in seconds, s 30 corresponds to 30 s and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
t-HystNormal \\
The additional duration for evaluating criteria to enter normal mobility state. Corresponds to \( \mathrm{T}_{\mathrm{CRmaxHyst}} \) in TS 38.304 [20]. Value in seconds, value s 30 corresponds to 30 seconds and so on.
\end{tabular} \\
\hline
\end{tabular}
- MRB-Identity

The IE MRB-Identity is used to identify a multicast MRB used by a UE.
MRB-Identity information element
-- ASNISTART
-- TAG-MRB-IDENTITY-START
MRB-Identity-rl7 ::= INTEGER (1..512)
-- TAG-MRB-IDENTITY-STOP
-- ASNISTOP
- MsgA-ConfigCommon

The IE MsgA-ConfigCommon is used to configure the PRACH and PUSCH resource for transmission of MsgA in 2-step random access type procedure.
-- ASN1START
-- TAG-MSGACONFIGCOMMON-START

MsgA-ConfigCommon-rl6 ::= SEQUENCE [
rach-ConfigCommonTwoStepRA-rl6 RACH-ConfigComonTwoStepRA-rl6,
msgA-PUSCH-Config-rl6
MsgA-PUSCH-Config-rl6 OPTIONAL --Cond InitialBWPConfig
\}
-- TAG-MSGACONFIGCOMMON-STOP
-- ASNISTOP

ETSI


--- Page 626  ---


3GPP TS 38.331 version 17.0.0 Release 17
625
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MsgA-ConfigCommon field descriptions \\
\hline \begin{tabular}{l}
msgA-PUSCH-Config \\
Configuration of cell-specific MsgA PUSCH parameters which the UE uses for contention-based MsgA PUSCH transmission of this BWP. If the field is not configured for the selected UL BWP, the UE shall use the MsgA PUSCH configuration of initial UL BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
rach-ConfigCommonTwoStepRA \\
Configuration of cell specific random access parameters which the UE uses for contention based and contention free 2-step random access type procedure as well as for 2step RA type contention based beam failure recovery in this BWP.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline InitialBWPConfig & \begin{tabular}{l} 
The field is mandatory present when MsgA-ConfigCommon is configured for the initial uplink BWP, or when MsgA- \\
ConfigCommon is configured for a non-initial uplink BWP and MisgA-ConfigCommon is not configured for the initial uplink \\
BWP, otherwise the field is optionally present, Need S.
\end{tabular} \\
\hline
\end{tabular}
- MsgA-PUSCH-Config

The IE MsgA-PUSCH-Config is used to specify the PUSCH allocation for MsgA in 2-step random access type procedure.
MsgA-PUSCH-Config information element
```
-- ASNISTART
-- TAG-MSGA-PUSCH-CONFIG-START
MsgA-PUSCH-Config-rl6 ::=
    msgA-PUSCH-ResourceGroupA-rl6
    msgA-PUSCH-ResourceGroupB-rl6
    msgA-TransformPrecoder-rl6
    msgA-DataScramblingIndex-rl6
    msgA-DeltaPreamble-rl6
}
MsgA-PUSCH-Resource-rl6 ::=
    msgA-MCS-rl6
    nrofSlotsMsgA-PUSCH-r16
    nrofMsgA-PO-PerSlot-rl6
    msgA-PUSCH-TimeDomainOffset-rl6
    msgA-PUSCH-TimeDomainAllocation-rl6
    startSymbolAndLengthMsgA-PO-rl6
    mappingTypeMsgA-PUSCH-rl6
    guardPeriodMsgA-PUSCH-r16
    guardBandMsgA-PUSCH-r16
    frequencyStartMsgA-PUSCH-r16
    nrofPRBs-PerMsgA-PO-rl6
    nrofMsgA-PO-FDM-r16
    msgA-IntraSlotFrequencyHopping-rl6
    msgA-HoppingBits-rl6
FreqHopConfigured.
    msgA-DMRS-Config-rl6
    nrofDMRS-Sequences-r16
```

```
SEQUENCE \
    MsgA-PUSCH-Resource-rl6
    MsgA-PUSCH-Resource-rl6
    ENUMERATED {enabled, disabled}
    INTEGER (0..1023)
    INTEGER (-l..6)
```

OPTIONAL, -- Cond InitialBWPConfig
OPTIONAL, -- Cond GroupBConfigured.
OPTIONAL, -- Need R
OPTIONAL, -- Need S
OPTIONAL -- Need R
SEQUENCE 1
    INTEGER (0..15),
    INTEGER (1..4),
    ENUMERATED \{one, two, three, six\},
    INTEGER (1..32),
    INTEGER (1..maxNrofUL-Allocations)
    INTEGER (0..127)
    ENUMERATED \{typeA, typeB\}
    INTEGER (0..3)
    INTEGER (0..l),
    INTEGER (0. . maxNrofPhysicalResourceBlocks-1),
    INTEGER (1..32) ,
    ENUMERATED [one, two, four, eight],
    ENUMERATED (enabled)
    BIT STRING (SIZE(2))
OPTIONAL, -- Need S
OPTIONAL, -- Need S
OPTIONAL, -- Need. S
OPTIONAL, -- Need. R
    MsgA-DMRS-Config-rl6,
    INTEGER (1..2),
```
OPTIONAL, -- Need R
OPTIONAL, -- Cond.
```


ETSI


--- Page 627  ---


3GPP TS 38.331 version 17.0.0 Release 17
626
ETSI TS 138331 V17.0.0 (2022-05)
```
    msgA-Alpha-rl6
    interlaceIndexFirstPO-MsgA-PUSCH-r16
    nrofInterlacesPerMsgA-PO-r16
    ...
}
MsgA-DMRS-Config-rl6 ::=
    msgA-DMRS-AdditionalPosition-rl6
    msgA-MaxLength-rl6
    msgA-PUSCH-DMRS-CDM-Group-r16
    msgA-PUSCH-NrofPorts-rl6
    msgA-ScramblingIDO-rl6
    msgA-ScramblingIDl-rl6
}
```

-- TAG-MSGA-PUSCH-CONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline MisgA-PUSCH-Config field descriptions \\
\hline \begin{tabular}{l}
msgA-DataScramblingindex \\
Identifier used to initiate data scrambling (c_init) for msgA PUSCH. If the field is absent the UE applies the value Physical cell ID (physCelllD).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-DeltaPreamble \\
Power offset of msgA PUSCH relative to the preamble received target power. Actual value \( = \) field value \( { }^{*} 2 \) [dB] (see TS 38.213 [13], clause 7.1).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PUSCH-ResourceGroupA \\
MsgA PUSCH resources that the UE shall use when performing MsgA transmission using preambles group A. If field is not configured for the selected UL BWP, the UE shall use the MsgA PUSCH configuration for group A of initial UL BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PUSCH-ResourceGroupB \\
MsgA PUSCH resources that the UE shall use when performing MsgA transmission using preambles group B.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-TransformPrecoder \\
Enables or disables the transform precoder for MsgA transmission (see clause 6.1.3 of TS 38.214 [19]).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 628  ---


3GPP TS 38.331 version 17.0.0 Release 17
627
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MsgA-PUSCH-Resource field descriptions \\
\hline \begin{tabular}{l}
guardBandMsgA-PUSCH \\
PRB-level guard band between FDMed PUSCH occasions (see TS 38.213 [13], clause 8.1A). If interlaced PUSCH is configured, value 0 is applied.
\end{tabular} \\
\hline \begin{tabular}{l}
guardPeriodMsgA-PUSCH \\
Guard period between PUSCH occasions in the unit of symbols (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyStartMsgA-PUSCH \\
Offset of lowest PUSCH occasion in frequency domain with respect to PRB 0 (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
interlaceIndexFirstPO-MsgA-PUSCH \\
Interlace index of the first PUSCH occasion in frequency domain if interlaced PUSCH is configured. For 30 kHz SCS only the integers 1, 2, 3, 4, 5 are applicable (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
mappingTypeMsgA-PUSCH \\
PUSCH mapping type A or B. If the field is absent, the UE shall use the parameter msgA-PUSCH-TimeDomainAllocation (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-Alpha \\
Dedicated alpha value for MsgA PUSCH. If the field is absent, the UE shall use the value of msg3-Alpha if configured, else UE applies value 1 (see TS 38.213 [13], clause 7.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-DMRS-Config \\
DMRS configuration for msgA PUSCH (see TS 38.213 [13], clause 8.1A and TS 38.214 [19] clause 6.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-HoppingBits \\
Value of hopping bits to indicate which frequency offset to be used for second hop. See Table 8.3-1 in TS 38.213 [13].
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-IntraSIotFrequencyHopping \\
Intra-slot frequency hopping per PUSCH occasion (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-MCS \\
Indicates the MCS index for msgA PUSCH from the Table 6.1.4.1-1 for DFT-s-OFDM and Table 5.1.3.1-1 for CP-OFDM in TS 38.214 [19].
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PUSCH-TimeDomainAllocation \\
Indicates a combination of start symbol and length and PUSCH mapping type from the TDRA table (PUSCH-TimeDomainResourceAllocationList if provided in PUSCHConfigCommon, or else the default Table 6.1.2.1.1-2 in 38.214 [19] is used if pusch-TimeDomainAllocationList is not provided in PUSCH-ConfigCommon). The parameter K2 in the table is not used for msgA PUSCH. The network configures one of msgA-PUSCH-TimeDomainAllocation and startSymbolAndLengthMisgA-PO, but not both. If the field is absent, the UE shall use the value of startSymbolAndLenghtMsgA-PO.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PUSCH-TimeDomainOffset \\
A single time offset with respect to the start of each PRACH slot (with at least one valid RO), counted as the number of slots (based on the numerology of active UL BWP). See TS 38.213 [13], clause 8.1A.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofDMRS-Sequences \\
Number of DMRS sequences for MsgA PUSCH for CP-OFDM. In case of single PUSCH configuration or if the DMRS symbols of multiple configurations are not overlapped, if the DMRS resources configured in one PUSCH occasion is no larger than 8 (for len2) or 4 (for len1), then only DMRS port is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofinterlacesPerMisgA-PO \\
Number of consecutive interlaces per PUSCH occasion if interlaced PUSCH is configured. For 30 kHz SCS only the integers \( 1,2,3,4,5 \) are applicable (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofMsgA-PO-FDM \\
The number of msgA PUSCH occasions FDMed in one time instance (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofMsgA-PO-PerSlot \\
Number of time domain PUSCH occasions in each slot. PUSCH occasions including guard period are contiguous in time domain within a slot (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofPRBs-PerMsgA-PO \\
Number of PRBs per PUSCH occasion (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 629  ---


3GPP TS 38.331 version 17.0.0 Release 17
628
ETSI TS 138331 V17.0.0 (2022-05)

nrofSlotsMsgA-PUSCH
Number of slots (in active UL BWP numerology) containing one or multiple PUSCH occasions, each slot has the same time domain resource allocation (see TS 38.213 [13], clause 8.1A).
startSymbolAndLengthMsgA-PO
An index giving valid combinations of start symbol, length and mapping type as start and length indicator (SLIV) for the first msgA PUSCH occasion, for RRC_CONNECTED UEs in non-initial BWP as described in TS 38.214 [19] clause 6.1.2. The network configures the field so that the allocation does not cross the slot boundary. The number of occupied symbols excludes the guard period. If the field is absent, the UE shall use the value in msgA-PUSCH-TimeDomainAllocation (see TS 38.213 [13], clause 8.1A). The network configures one of msgA-PUSCH-TimeDomainAllocation and startSymbolAndLengthMsgA-PO, but not both. If the field is absent, the UE shall use the value of msgA-PUSCH-TimeDomainAllocation.

\begin{tabular}{|l|}
\hline MsgA-DMRS-Config field descriptions \\
\hline \begin{tabular}{l}
msgA-DMRS-AdditionalPosition \\
Indicates the position for additional DM-RS. If the field is absent, the UE applies value pos2.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-MaxLength \\
indicates single-symbol or double-symbol DMRS. If the field is absent, the UE applies value len1.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PUSCH-DMRS-CDM-Group \\
1-bit indication of indices of CDM group(s). If the field is absent, then both CDM groups are used.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PUSCH-NrofPorts \\
0 indicates 1 port per CDM group, 1 indicates 2 ports per CDM group. If the field is absent then 4 ports per CDM group are used (see TS 38.213 [13], clause 8.1A).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-ScramblingIDO \\
UL DMRS scrambling initialization for CP-OFDM. If the field is absent the UE applies the value Physical cell ID (physCellID).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-ScramblingID1 \\
UL DMRS scrambling initialization for CP-OFDM. If the field is absent the UE applies the value Physical cell ID (physCellID).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline FreqHopConfigured & This field is mandatory present when the field msgA-IntraSlotFrequencyHopping is configured. Otherwise, the field is absent. \\
\hline GroupBConfigured & The field is mandatory present if groupB-ConfiguredTwoStepRA is configured in RACH-ConfigCommonTwoStepRA, otherwise the field is absent. \\
\hline InitialBWPConfig & The field is mandatory present when \( M \) sgA-ConfigCommon is configured for the initial uplink BWP, or when MsgAConfigCommon is configured for a non-initial uplink BWP and MsgA-ConfigCommon is not configured for the initial uplink BWP, otherwise the field is optionally present, Need S. \\
\hline
\end{tabular}
- MultiFrequencyBandListNR

The IE MultiFrequencyBandListNR is used to configure a list of one or multiple NR frequency bands.
MultiFrequencyBandListNR information element
-- ASNISTART
-- TAG-MULTIFREQUENCYBANDLISTNR-START
MultiFrequencyBandListNR ::= SEQUENCE (SIZE (1..maxNrofMultiBands)) OF FreqBandIndicatorNR

ETSI


--- Page 630  ---


3GPP TS 38.331 version 17.0.0 Release 17
629
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-MULTIFREQUENCYBANDLISTNR-STOP
-- ASNISTOP
- MultiFrequencyBandListNR-SIB

The IE MultiFrequencyBandListNR-SIB indicates the list of frequency bands, for which cell (re-)selection parameters are common, and a list of additionalPmax and additionalSpectrumEmission.

MultiFrequencyBandListNR-SIB information element
-- ASN1START
-- TAG-MULTIFREQUENCYBANDLISTNR-SIB-START
MultiFrequencyBandListNR-SIB : :=
SEQUENCE (SIZE (l.. maxNrofMultiBands)) OF NR-MultiBandInfo
NR-MultiBandInfo : :=
SEQUENCE 1
freqBandIndicatorNR
FreqBandIndicatorNR
OPTIONAL, -- Cond OptULNotSIB2
nr-NS-PmaxList
NR-NS-PmaxList
OPTIONAL -- Need S
\}
-- TAG-MULTIFREQUENCYBANDLISTNR-SIB-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline NR-MultiBandinfo field descriptions \\
\hline \begin{tabular}{l}
freqBandindicatorNR \\
Provides an NR frequency band number as defined in TS 38.101-1 [15] and TS 38.101-2 [39], table 5.2-1.
\end{tabular} \\
\hline \begin{tabular}{l}
nr-NS-PmaxList \\
Provides a list of additionalPmax and additionalSpectrumEmission values. If the field is absent the UE uses value 0 for the additionalSpectrumEmission (see TS 38.101-1 [15] table 6.2.3.1-1A , and TS 38.101-2 [39], table 6.2.3.1-2). This field is ignored by IAB-MT, the IAB-MT applies output power and emissions requirements, as specified in TS 38.174 [63].
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|c|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline OptULNotSIB2 & The field is absent for SIB2 and is mandatory present in SIB4 and frequencylnfoDL-SIB. Otherwise, if the field is absent in frequency/nfoUL- \\
& SIB in UplinkConfigCommonS/B, the UE will use the frequency band indicated in frequency/nfoDL-SIB in DownilikConfigCommonS/B. \\
\hline
\end{tabular}
- MUSIM-GapConfig

The IE MUSIM-GapConfig specifies the MUSIM gap configuration and controls setup/release of MUSIM gaps.
MUSIM-GapConfig information element
-- ASNISTART
-- TAG-MUSIM-GAPCONFIG-START

ETSI


--- Page 631  ---


3GPP TS 38.331 version 17.0.0 Release 17
630
ETSI TS 138331 V17.0.0 (2022-05)
```
MUSIM-GapConfig-rl7 ::=
    musim-GapToReleaseList-rl7
    musim-GapToAddModList-rl7
    musim-AperiodicGap-rl7
    ...
}
MUSIM-GapInfo-rl7 ::= SEQUENCE {
    musim-GapID-rl7 MUSIM-GapID-rl7 OPTIONAL, -- Cond periodic
    musim-Starting-SFN-AndSubframe-rl7
    musim-GapLength-rl7
musim-GapRepetitionAndOffset-rl7
        ms20-r17
        ms40-rl7 INTEGER (0..39),
        ms80-rl7 INTEGER (0..79),
        msl60-rl7 INTEGER (0..159),
        ms320-r17 INTEGER (0..319),
        ms640-rl7 INTEGER (0..639),
        msl280-rl7 INTEGER (0.1279),
        ms2560-rl7 INTEGER (0..2559),
        ms5120-rl7 INTEGER (0..5119),
        ...
} OPTIONAL -- Cond periodic
}
MUSIM-Starting-SFN-AndSubframe-rl7 ::= SEQUENCE \
    starting-SEN-rl7 INTEGER (0..1023),
    startingSubframe-rl7 INTEGER (0..9)
}
-- TAG-MUSIM-GAPCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MUSIM-GapConfig field descriptions \\
\hline \begin{tabular}{l}
musim-AperiodicGap \\
Indicate that the UE is allowed to use the MUSIM aperiodic gap if requested in the UEAssistancelnformation.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapRepetitionAndOffset \\
Indicates the gap repetition period in ms and gap offset in number of subframes for the periodic MUSIM gap without leaving RRC_CONNECTED state.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-Start-SFN-AndSubframe \\
Indicates gap starting position for the aperiodic MUSIM gap without leaving RRC_CONNECTED state. This field is only used for aperiodic gap.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapToAddModList \\
List of MUSIM periodic gap pattern identities to add or modify without leaving RRC_CONNECTED state.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapToReleaseList \\
List of MUSIM periodic gap pattern identities to release without leaving RRC_CONNECTED state.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline aperiodic & This field is mandatory present in case of MUSIM aperiodic gap configuration. Otherwise it is absent. \\
\hline periodic & This field is mandatory present in case of MUSIM periodic gap configuration. Otherwise it is absent. \\
\hline
\end{tabular}

ETSI


--- Page 632  ---


3GPP TS 38.331 version 17.0.0 Release 17
631
ETSI TS 138331 V17.0.0 (2022-05)
- MUSIM-GapID

The MUSIM-GapID is used to identify UE periodic MUSIM gap(s) to add, modify or release.
MUSIM-GapID information element
-- ASNISTART
-- TAG-MUSIM-GAPID-START

MUSIM-GapID-rl7 ::= INTEGER (0..1)
-- TAG-MUSIM-GAPID-STOP
-- ASNISTOP
- NeedForGapsConfigNR

The IE NeedForGapsConfigNR contains configuration related to the reporting of measurement gap requirement information.
NeedForGapsConfigNR information element
-- ASNISTART
-- TAG-NeedForGapsConfigNR-START
NeedForGapsConfigNR-rl6 : := SEQUENCE [
\}
-- TAG-NeedForGapsConfigNR-STOP
-- ASNISTOP

NeedForGapsConfigNR field descriptions
requestedTargetBandFilterNR
Indicates the target NR bands that the UE is requested to report the gap requirement information.
- NeedForGapsInfoNR

The IE NeedForGapsInfoNR indicates whether measurement gap is required for the UE to perform SSB based measurements on an NR target band while NR-DC or NE-DC is not configured.

NeedForGapsinfoNR information element
-- ASNISTART
-- TAG-NeedForGapsInfoNR-START

ETSI


--- Page 633  ---


3GPP TS 38.331 version 17.0.0 Release 17
632
ETSI TS 138331 V17.0.0 (2022-05)
```
NeedForGapsInfoNR-r16 ::= SEQUENCE \
    intraFreq-needForGap-r16 NeedForGapsIntraFreqList-rl6,
    interFreq-needForGap-r16 NeedForGapsBandListNR-r16
}
NeedForGapsIntraFreqList-rl6 ::= SEQUENCE (SIZE (1.. maxNrofServingCells)) OF NeedForGapsIntraFreq-rl6
NeedForGapsBandListNR-rl6::= SEQUENCE (SIZE (l..maxBands)) OF NeedForGapsNR-rl6
NeedForGapsIntraFreq-rl6 ::= SEQUENCE \
    servCellId-r16
    gapIndicationIntra-rl6
}
NeedForGapsNR-rl6 ::=
    bandNR-rl6
    gapIndication-rl6
}
-- TAG-NeedForGapsInfoNR-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline NeedForGapsinfoNR field descriptions \\
\hline \begin{tabular}{l}
intraFreq-needForGap \\
Indicates the measurement gap requirement information for NR intra-frequency measurement.
\end{tabular} \\
\hline \begin{tabular}{l}
interFreq-needForGap \\
Indicates the measurement gap requirement information for NR inter-frequency measurement.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline NeedForGapsintraFreq field descriptions \\
\hline \begin{tabular}{l}
servCellid \\
Indicates the serving cell which contains the target SSB (associated with the initial DL BWP) to be measured.
\end{tabular} \\
\hline \begin{tabular}{l}
gapindicationintra \\
Indicates whether measurement gap is required for the UE to perform intra-frequency SSB based measurements on the concerned serving cell. Value gap indicates that a measurement gap is needed if any of the UE configured BWPs do not contain the frequency domain resources of the SSB associated to the initial DL BWP. Value no-gap indicates a measurement gap is not needed to measure the SSB associated to the initial DL BWP for all configured BWPs, no matter the SSB is within the configured BWP or not.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline NeedForGapsNR field descriptions \\
\hline \begin{tabular}{l}
bandNR \\
Indicates the NR target band to be measured.
\end{tabular} \\
\hline \begin{tabular}{l}
gapindication \\
Indicates whether measurement gap is required for the UE to perform SSB based measurements on the concerned NR target band while NR-DC or NE-DC is not configured. The UE determines this information based on the resultant configuration of the RRCReconfiguration or RRCResume message that triggers this response. Value gap indicates that a measurement gap is needed, value no-gap indicates a measurement gap is not needed.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 634  ---


3GPP TS 38.331 version 17.0.0 Release 17
633
ETSI TS 138331 V17.0.0 (2022-05)
- NeedForNCSG-ConfigEUTRA

The IE NeedForNCSG-ConfigEUTRA contains configuration related to the reporting of measurement gap and NCSG requirement information.
NeedForNCSG-ConfigEUTRA information element
```
-- ASNISTART
-- TAG-NeedForNCSG-ConfigEUTRA-START
NeedForNCSG-ConfigEUTRA-rl7 ::= SEQUENCE {
```

```
}
-- TAG-NeedForNCSG-ConfigEUTRA-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline NeedForNCSG-ConfigEUTRA field descriptions \\
\hline requestedTargetBandFilterNCSG-EUTRA \\
Indicates the target E-UTRA bands that the UE is requested to report the measurement gap and NCSG requirement information. \\
\hline
\end{tabular}
- NeedForNCSG-ConfigNR

The IE NeedForNCSG-ConfigNR contains configuration related to the reporting of measurement gap and NCSG requirement information.
NeedForNCSG-ConfigNR information element
```
-- ASNISTART
-- TAG-NeedForNCSG-ConfigNR-START
NeedForNCSG-ConfigNR-rl7 ::= SEQUENCE {
```

```
}
-- TAG-NeedForNCSG-ConfigNR-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline NeedForNCSG-ConfigNR field descriptions \\
\hline \begin{tabular}{l}
reques ted TargetBandFilterNCSG-NR \\
Indicates the target NR bands that the UE is requested to report the measurement gap and NCSG requirement information.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 635  ---


3GPP TS 38.331 version 17.0.0 Release 17
634
ETSI TS 138331 V17.0.0 (2022-05)
- NeedForNCSG-InfoEUTRA

The IE NeedForNCSG-InfoEUTRA indicates whether measurement gap or NCSG is required for the UE to perform measurements on an E-UTRA target band while NR-DC or NE-DC is not configured.

NeedForNCSG-InfoEUTRA information element
```
-- ASNISTART
-- TAG-NeedForNCSG-InfoEUTRA-START
NeedForNCSG-InfoEUTRA-rl7 ::= SEQUENCE [
    needForNCSG-EUTRA-rl7 NeedForNSCG-BandListEUTRA-rl7
}
NeedForNSCG-BandListEUTRA-rl7 ::= SEQUENCE (SIZE (l..maxBandsEUTRA)) OF NeedForNCSG-EUTRA-rl7
NeedForNCSG-EUTRA-rl7 ::= SEQUENCE {
    bandEUTRA-rl7 FreqBandIndicatorEUTRA,
    gapIndication-rl7 ENUMERATED {gap, ncsg, nogap-noncsg}
}
-- TAG-NeedForNCSG-InfoEUTRA-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline NeedForNCSG-InfoEUTRA field descriptions \\
\hline \begin{tabular}{l}
needForNCSG-EUTRA \\
Indicates the measurement gap and NCSG requirement information for E-UTRA measurement.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline NeedForNCSG-EUTRA field descriptions \\
\hline \begin{tabular}{l}
bandEUTRA \\
Indicates the E-UTRA target band to be measured.
\end{tabular} \\
\hline \begin{tabular}{l}
gapindication \\
Indicates whether measurement gap or NCSG is required for the UE to perform measurements on the concerned E-UTRA target band while NR-DC or NE-DC is not configured. The UE determines this information based on the resultant configuration of the RRCReconfiguration message or RRCResume message that triggers this response. Value gap indicates that a measurement gap is needed, value nosg indicates that NCSG is needed, value nogap-noncsg indicates neither a measurement gap nor a NCSG is needed.
\end{tabular} \\
\hline
\end{tabular}
- NeedForNCSG-InfoNR

The IE NeedForNCSG-InfoNR indicates whether measurement gap or NCSG is required for the UE to perform SSB based measurements on an NR target band while NR-DC or NE-DC is not configured.

NeedForNCSG-InfoNR information element

-- ASNISTART
ETSI


--- Page 636  ---


3GPP TS 38.331 version 17.0.0 Release 17
635
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-NeedForNCSG-InfoNR-START
NeedForNCSG-InfoNR-rl7 ::= SEQUENCE \
    intraFreq-needForNCSG-rl7
    interFreq-needForNCSG-rl7 NeedForNCSG-IntraFreqList-rl7,
}
NeedForNCSG-IntraFreqList-rl7 := SEQUENCE (SIZE (l.. maxNrofServingCells)) OF NeedForNCSG-IntraFreq-rl7
NeedForNCSG-BandListNR-rl7 := SEQUENCE (SIZE (l..maxBands)) OF NeedForNCSG-NR-rl7
NeedForNCSG-IntraFreq-rl7 ::= SEQUENCE \
    servCellId-rl7
    gapIndicationIntra-rl7 ENUMERATED {gap, ncsg, nogap-noncsg}
}
NeedForNCSG-NR-rl7 ::= SEQUENCE \
    bandNR-rl7
    gapIndication-rl7 ENUMERATED {gap, ncsg, nogap-noncsg}
}
-- TAG-NeedForNCSGInfoNR-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline NeedForNCSG-InfoNR field descriptions \\
\hline \begin{tabular}{l}
intraFreq-needForNCSG \\
Indicates the measurement gap and NCSG requirement information for NR intra-frequency measurement.
\end{tabular} \\
\hline \begin{tabular}{l}
interFreq-needForNCSG \\
Indicates the measurement gap and NCSG requirement information for NR inter-frequency measurement.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline NeedForNCSG-IntraFreq field descriptions \\
\hline \begin{tabular}{l}
servCellid \\
Indicates the serving cell which contains the target SSB (associated with the initial DL BWP) to be measured.
\end{tabular} \\
\hline \begin{tabular}{l}
gapindicationintra \\
Indicates whether measurement gap or NCSG is required for the UE to perform intra-frequency SSB based measurements on the concerned serving cell. Value gap indicates that a measurement gap is needed if any of the UE configured BWPs do not contain the frequency domain resources of the SSB associated to the initial DL BWP. Value ncsg indicates that a NCSG is needed if any of the UE configured BWPs do not contain the frequency domain resources of the SSB associated to the initial DL BWP. Value nogapnoncsg indicates that neither a measurement gap nor a NCSG is needed to measure the SSB associated to the initial DL BWP for all configured BWPs, no matter the SSB is within the configured BWP or not.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 637  ---


3GPP TS 38.331 version 17.0.0 Release 17
636
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline NeedForNCSG-NR field descriptions \\
\hline \begin{tabular}{l}
bandNR \\
Indicates the NR target band to be measured.
\end{tabular} \\
\hline \begin{tabular}{l}
gapindication \\
Indicates whether measurement gap or NCSG is required for the UE to perform SSB based measurements on the concerned NR target band while NR-DC or NE-DC is not configured. The UE determines this information based on the resultant configuration of the RRCReconfiguration or RRCResume message that triggers this response. Value gap indicates that a measurement gap is needed, value nosg indicates that a NCSG is needed, and value nogap-noncsg indicates neither a measurement gap nor a NCSG is needed.
\end{tabular} \\
\hline
\end{tabular}
- NextHopChainingCount

The IE NextHopChainingCount is used to update the \( \mathrm{K}_{\mathrm{gNB}} \) key and corresponds to parameter NCC: See TS 33.501 [11].
NextHopChainingCount information element
-- ASNISTART
-- TAG-NEXTHOPCHAININGCOUNT-START
NextHopChainingCount ::= INTEGER (0. 7)
-- TAG-NEXTHOPCHAININGCOUNT-STOP
-- ASNISTOP
- NG-5G-S-TMSI

The IE NG-5G-S-TMSI contains a 5G S-Temporary Mobile Subscription Identifier (5G-S-TMSI), a temporary UE identity provided by the 5GC which uniquely identifies the UE within the tracking area, see TS 23.003 [21].

NG-5G-S-TMS/information element
-- ASNISTART
-- TAG-NG-5G-S-TMSI-START
NG-5G-S-TMSI : := BIT STRING (SIZE (48))
-- TAG-NG-5G-S-TMSI-STOP
-- ASNISTOP
- \( \quad \) NonCellDefiningSSB

The IE NonCellDefiningSSB is used to configure a non-cell-defining SSB to be used while the UE operates in a dedicated BWP.

ETSI


--- Page 638  ---


3GPP TS 38.331 version 17.0.0 Release 17
637
ETSI TS 138331 V17.0.0 (2022-05)

NonCellDefiningSSB information element
```
-- ASNISTART
-- TAG-NONCELLDEFININGSSB-START
NonCellDefiningSSB-rl7 ::= SEQUENCE {
    absoluteFrequencySSB-rl7 ARFCN-ValueNR,
```

```
    -- FFS whether additional properties may differ from the CD-SSB, e.g. time offset. If so, add them here.
    ...
}
-- TAG-NONCELLDEFININGSSB-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline NonCellDefiningSSB-r17 field descriptions \\
\hline \begin{tabular}{l}
absoluteFrequencySSB \\
Frequency of the non-cell-defining SSB. The network configures this field so that the SSB is within the bandwidth of the BWP configured in BWP-DownilinkCommon.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-Periodicity \\
The periodicity of this Non-Cell-Defining SSB. The network configures only periodicities that are larger than the periodicity of serving cell's CD-SSB. If the field is absent, the UE applies the SSB periodicity of the cell-defining SSB (ssb-periodicityServingCell configured in ServingCellConfigCommon).
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) NPN-Identity

The IE NPN-Identity includes either a list of CAG-IDs or a list of NIDs per PLMN [dentity. Further information regarding how to set the IE is specified in TS 23.003 [21].
NPN-Identity information element
```
-- ASNISTART
-- TAG-NPN-IDENTITY-START
NPN-Identity-r16 ::=
CHOICE {
    pni-npn-rl6
        plmn-Identity-rl6
        cag-IdentityList-rl6
    },
    snpn-r16
        plmn-Identity-rl6
        nid-List-rl6 SEQUENCE (SIZE (l..maxNPN-rl6)) OF NID-rl6
    }
}
CAG-IdentityInfo-rl6 ::= SEQUENCE \
    cag-Identity-rl6
    manualCAGselectionAllowed-rl6 ENUMERATED {true} OPTIONAL -- Need R
}
NID-rl6 ::= BIT STRING (SIZE (44))
```


ETSI


--- Page 639  ---


3GPP TS 38.331 version 17.0.0 Release 17
638
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-NPN-IDENTITY-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline NPN-Identity field descriptions \\
\hline \begin{tabular}{l}
cag-Identity \\
A CAG-ID as specified in TS 23.003 [21]. The PLMN ID and a CAG ID in the NPN-Identity identifies a PNI-NPN.
\end{tabular} \\
\hline \begin{tabular}{l}
cag-IdentityList \\
The cag-/dentityList contains one or more CAG IDs. All CAG IDs associated to the same PLMN ID are listed in the same cag-/dentityList entry.
\end{tabular} \\
\hline \begin{tabular}{l}
manualCAGselectionAllowed \\
The manualCAGselectionAllowed indicates that the CAG ID can be selected manually even if it is outside the UE's allowed CAG list.
\end{tabular} \\
\hline \begin{tabular}{l}
NID \\
A NID as specified in TS 23.003 [21]. The PLMN ID and a NID in the NPN-Identity identifies a SNPN.
\end{tabular} \\
\hline \begin{tabular}{l}
nid-List \\
The nid-List contains one or more NID.
\end{tabular} \\
\hline
\end{tabular}
- NPN-IdentityInfoList

The IE NPN-IdentityInfoList includes a list of NPN identity information.
NPN-IdentityInfoList information element
```
-- ASNISTART
-- TAG-NPN-IDENTITYINFOLIST-START
NPN-IdentityInfoList-rl6 ::= SEQUENCE (SIZE (l..maxNPN-rl6)) OF NPN-IdentityInfo-rl6
NPN-IdentityInfo-rl6 ::= SEQUENCE {
    npn-IdentityList-rl6 SEQUENCE (SIZE (l..maxNPN-rl6)) OF NPN-Identity-r-16,
    trackingAreaCode-rl6 TrackingAreaCode,
```

```
    cellIdentity-rl6 CellIdentity,
    cellReservedForOperatorUse-rl6 ENUMERATED {reserved, notReserved},
```

```
    ...
}
-- TAG-NPN-IDENTITYINFOLIST-STOP
-- ASNISTOP
```


ETSI


--- Page 640  ---


3GPP TS 38.331 version 17.0.0 Release 17
639
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline NPN-IdentityinfoList field descriptions \\
\hline \begin{tabular}{l}
iab-Support \\
This field combines both the support of IAB and the cell status for IAB. If the field is present, the cell supports IAB and the cell is also considered as a candidate for cell (re)selection for IAB-nodes; if the field is absent, the cell does not support IAB and/or the cell is barred for IAB-node.
\end{tabular} \\
\hline \begin{tabular}{l}
NPN-Identitylnfo \\
The NPN-Identitylnfo contains one or more NPN identities and additional information associated with those NPNs. Only the same type of NPNs (either SNPNs or PNI-NPNs) can be listed in a NPN-Identity/nfo element.
\end{tabular} \\
\hline \begin{tabular}{l}
npn-IdentityList \\
The npn-dentityList contains one or more NPN Identity elements.
\end{tabular} \\
\hline \begin{tabular}{l}
trackingAreaCode \\
Indicates the Tracking Area Code to which the cell indicated by cellidentity field belongs.
\end{tabular} \\
\hline \begin{tabular}{l}
ranac \\
Indicates the RAN Area Code to which the cell indicated by cellidentity field belongs.
\end{tabular} \\
\hline \begin{tabular}{l}
cellReservedForOperatorUse \\
Indicates whether the cell is reserved for operator use (for the NPN(s) identified in the npn-ldentityList) as defined in TS 38.304 [20]. This field is ignored by NPN capable IABMT.
\end{tabular} \\
\hline
\end{tabular}
- NR-DL-PRS-PDC-Info

The IE NR-DL-PRS-PDC-Info defines downlink PRS configuration for PDC.

NR-DL-PRS-PDC-Info information element
```
-- ASNISTART
-- TAG-NR-DL-PRS-PDC-INFO-START
NR-DL-PRS-PDC-Info-rl7 ::= SEQUENCE [
    nr-DL-PRS-PDC-ResourceSet-rl7 NR-DL-PRS-PDC-ResourceSet-rl7 OPTIONAL, -- Need. R
    ...
}
NR-DL-PRS-PDC-ResourceSet-rl7 ::= SEQUENCE \
    periodicityAndOffset-rl7 NR-DL-PRS-Periodicity-and-ResourceSetSlotOffset-rl7,
    numSymbols-rl7 ENUMERATED {n2, n4, n6, nl2, spare4, spare3, spare2, sparel},
    dl-PRS-ResourceBandwidth-rl7 INTEGER (1..63),
    dl-PRS-StartPRB-rl7 INTEGER (0..2176),
    resourceList-rl7 SEQUENCE (SIZE (l..maxNrofPRS-ResourcesPerSet-rl7)) OF NR-DL-PRS-Resource-rl7,
    repetitionFactor-rl7 ENUMERATED {n2, n4, n6, n8, n16, n32, spare2, sparel} OPTIONAL, -- Need. S
    timeGap-rl7 ENUMERATED {sl, s2, s4, s8, sl6, s32, spare2, sparel} OPTIONAL, -- Need.S
    ...
}
NR-DL-PRS-Periodicity-and-ResourceSetSlotOffset-rl7 ::= CHOICE {
    scsl5-rl7 CHOICE {
        n4-rl7 INTEGER (0..3),
        n5-rl7 INTEGER (0.4),
        n8-rl7 INTEGER (0..7),
        nl0-rl7 INTEGER (0..9),
```


ETSI


--- Page 641  ---


3GPP TS 38.331 version 17.0.0 Release 17
640
ETSI TS 138331 V17.0.0 (2022-05)
```
    nl6-rl7
    n20-r17
    n32-rl7
    n40-r17
    n64-rl7
    n80-r17
    nl60-rl7
    n320-rl7
    n640-rl7
    nl280-rl7
    n2560-r17
    n5120-r17
    nl0240-rl7
},
ses30-r17
    n8-rl7
    nl0-rl7
    nl6-rl7
    n20-r17
    n32-r17
    n40-r17
    n64-rl7
    n80-rl7
    nl28-rl7
    nl60-rl7
    n320-rl7
    n640-rl7
    nl280-rl7
    n2560-r17
    n5120-r17
    nl0240-rl7
    n20480-r17
},
scs60-rl7 CHOICE {
    nl6-rl7
    n20-r17
    n32-rl7
    n40-r17
    n64-rl7
    n80-rl7
    nl28-rl7
    nl60-rl7
    n256-rl7
    n320-rl7
    n640-rl7
    nl280-rl7
    n2560-r17
    n5120-r17
    nl0240-rl7
    n20480-r17
    n40960-rl7
    ...
```

```
INTEGER (0..15),
INTEGER (0..19),
INTEGER (0..31),
INTEGER (0..39),
INTEGER (0..63),
INTEGER (0..79),
INTEGER (0..159),
INTEGER (0..319),
INTEGER (0..639),
INTEGER (0..1279),
INTEGER (0..2559),
INTEGER (0..5119),
INTEGER (0..10239),
```

INTEGER (0.07),
INTEGER (0..9),
INTEGER (0..15),
INTEGER (0..19),
INTEGER (0..31),
INTEGER (0..39),
INTEGER (0. 63),
INTEGER (0..79),
INTEGER (0..127),
INTEGER (0..159),
INTEGER (0..319),
INTEGER (0..639),
INTEGER (0..1279),
INTEGER (0..2559),
INTEGER (0..5119),
INTEGER (0..10239),
INTEGER (0..20479),
INTEGER (0..15),
INTEGER (0..19),
INTEGER (0..31),
INTEGER (0..39),
INTEGER (0. 63),
INTEGER (0..79),
INTEGER (0..127),
INTEGER (0..159),
INTEGER (0..255),
INTEGER (0..319),
INTEGER (0..639),
INTEGER (0..1279),
INTEGER (0. .2559),
INTEGER (0..5119),
INTEGER (0..10239),
INTEGER (0..20479),
INTEGER (0..40959),


--- Page 642  ---


3GPP TS 38.331 version 17.0.0 Release 17
641
ETSI TS 138331 V17.0.0 (2022-05)
```
    },
    scsl20-rl7 CHOICE [
            n32-rl7 INTEGER (0..31),
            n40-r17 INTEGER (0..39),
            n64-rl7 INTEGER (0..63),
            n80-r17 INTEGER (0..79),
            nl28-rl7 INTEGER (0..127),
            nl60-rl7 INTEGER (0..159),
            n256-rl7 INTEGER (0..255),
            n320-rl7 INTEGER (0..319),
            n512-rl7 INTEGER (0..5ll),
            n640-rl7 INTEGER (0..639),
            nl280-rl7 INTEGER (0..1279),
            n2560-rl7 INTEGER (0..2559),
            n5120-rl7 INTEGER (0..5l19),
            nl0240-rl7 INTEGER (0..10239),
            n20480-r17 INTEGER (0..20479),
                n40960-rl7 INTEGER (0..40959),
                n81920-rl7 INTEGER (0..81919),
    },
    ...
}
NR-DL-PRS-Resource-rl7 ::= SEQUENCE {
    nr-DL-PRS-ResourceID-rl7 NR-DL-PRS-ResourceID-rl7,
    dl-PRS-SequenceID-rl7 INTEGER (0.4095),
    dl-PRS-CombSizeN-AndReOffset-rl7
            n2-rl7
            n4-rl7
            INTEGER (0..3),
            nl2-rl7 INTEGER (0..ll),
            ...
    },
    dl-PRS-ResourceSlotOffset-rl7 INTEGER (0..maxNrofPRS-ResourceOffsetValue-l-rl7),
    dl-PRS-ResourceSymbolOffset-rl7 INTEGER (0..12),
    dl-PRS-QCL-Info-rl7 DL-PRS-QCL-Info-rl7 OPTIONAL, -- Need N
    ...
}
DL-PRS-QCL-Info-rl7 ::= CHOICE {
    ssb-rl7 SEQUENCE {
        pci-rl7 PhysCellId,
        ssb-Index-rl7 INTEGER (0..63),
        rs-Type-rl7 ENUMERATED {typeC, typeD, typeC-plus-typeD}
    },
    dl-PRS-rl7 SEQUENCE {
        qcl-DL-PRS-ResourceID-rl7 NR-DL-PRS-ResourceID-rl7,
        ...
    },
    ...
}
NR-DL-PRS-ResourceID-rl7 ::= INTEGER (0..maxNrofPRS-ResourcesPerSet-l-rl7)
```


ETSI


--- Page 643  ---


3GPP TS 38.331 version 17.0.0 Release 17
642
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-NR-DL-PRS-PDC-INFO-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline NR-DL-PRS-PDC-ResourceSet field descriptions \\
\hline \begin{tabular}{l}
dl-PRS-ResourceBandwidth \\
This field specifies the number of PRBs allocated for all the DL-PRS Resource (allocated DL-PRS bandwidth) in multiples of 4 PRBs in this resource set. All DL-PRS Resources of the DL-PRS-PDC Resource Set have the same bandwidth. Integer value 1 corresponds to 24 PRBs, value 2 corresponds to 28 PRBs, value 3 corresponds to 32 PRBs and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
di-PRS-StartPRB \\
This field specifies the start PRB index defined as offset with respect to subcarrier 0 in common resource block 0 for the DL-PRS Resource. All DL-PRS Resources of the DL-PRS-PDC Resource Set have the same value of dl-PRS-StartPRB.
\end{tabular} \\
\hline \begin{tabular}{l}
numSymbols \\
This field specifies the number of symbols per DL-PRS Resource within a slot.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityAndOffset \\
This field specifies the periodicity of DL-PRS allocation in slots and the slot offset with respect to SFN \#0 slot \#0 in the PCell where the DL-PRS-PDC Resource Set is configured (i.e., slot where the first DL-PRS Resource of DL-PRS-PDC Resource Set occurs).
\end{tabular} \\
\hline \begin{tabular}{l}
repetitionFactor \\
This field specifies how many times each DL-PRS Resource is repeated for a single instance of the DL-PRS Resource Set. It is applied to all resources of the DL-PRS Resource Set. Enumerated values n2, n4, n6, n8, n16, n32 correspond to 2,4,6, 8, 16, 32 resource repetitions, respectively. If this field is absent, the value for dl-PRSResourceRepetitionFactor is 1 (i.e., no resource repetition).
\end{tabular} \\
\hline \begin{tabular}{l}
timeGap \\
This field specifies the offset in units of slots between two repeated instances of a DL-PRS Resource corresponding to the same DL-PRS Resource ID within a single instance of the DL-PRS Resource Set. The time duration spanned by one DL-PRS Resource Set containing repeated DL-PRS Resources should not exceed the periodicity configured by periodicityAndOffset. The field is mandatory present, if repetitionFactor is present. Otherwise, it is not present.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) NR-NS-PmaxList

The IE NR-NS-PmaxList is used to configure a list of additionalPmax and additionalSpectrumEmission, as defined in TS 38.101-1 [15], table 6.2.3.1-1A, and TS 38.101-2 [39], table 6.2.3.1-2, for a given frequency band.

NR-NS-PmaxList information element
```
-- ASNISTART
-- TAG-NR-NS-PMAXLIST-START
NR-NS-PmaxList ::= SEQUENCE (SIZE (1..maxNR-NS-Pmax)) OF NR-NS-PmaxValue
NR-NS-PmaxValue ::= SEQUENCE {
    additionalPmax
    additionalSpectrumEmission AdditionalSpectrumEmission
}
-- TAG-NR-NS-PMAXLIST-STOP
-- ASNISTOP
```


ETSI


--- Page 644  ---


3GPP TS 38.331 version 17.0.0 Release 17
643
ETSI TS 138331 V17.0.0 (2022-05)

NTN-Config
The IE NTN-Config provides parameters needed for the UE to access NR via satellite access. FFS more detailed description.
NTN-Config information element
```
-- ASNISTART
-- TAG-NTN-CONFIG-START
NTN-Config-rl7 ::= SEQUENCE \
```

```
    ntn-UlSyncValidityDuration-rl7 ENUMERATED\ s5, sl0, sl5, s20, s25, s30, s35,
            s40, s45, s50, s55, s60, s120, s180, s240}
    cellSpecificKoffset-rl7 INTEGER(0..1023)
    kmac-rl7
    ta-Info-rl7
    ntn-PolarizationDL-rl7 ENUMERATED {rhcp,lhcp,linear}
    ntn-PolarizationUL-rl7 ENUMERATED {rhcp,lhcp,linear}
    ephemerisInfo-rl7 EphemerisInfo-rl7
    ...
}
EpochTime-rl7 ::= SEQUENCE \
    sfn-rl7
    INTEGER(0..1023),
}
TAInfo-rl7 ::= SEQUENCE {
    ta-Common-rl7 INTEGER(0..66485757),
    ta-CommonDrift-rl7 INTEGER(-261935..261935)
    ta-CommonDriftVariant-rl7 INTEGER(0..29470)
}
-- TAG-NTN-CONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 645  ---


3GPP TS 38.331 version 17.0.0 Release 17
644
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline NTN-Config field descriptions \\
\hline \begin{tabular}{l}
Ephemerisinfo \\
This field provides satellite ephemeris either in format of position and velocity state vector or in format of orbital parameters. This field is excluded when determining changes in system information, i.e. changes of XXX should neither result in system information change notifications nor in a modification of valueTag in SIB1.
\end{tabular} \\
\hline \begin{tabular}{l}
epoch Time \\
Indicate the epoch time for assistance information (i.e. Serving satellite ephemeris in IE ephemerisInfo and Common TA parameters). When explicitly provided through SIB, or through dedicated signaling, EpochTime is the starting time of a DL sub-frame, indicated by a SFN and a sub-frame number signaled together with the assistance information. The reference point for epoch time of the serving satellite ephemeris and Common TA parameters is the uplink time synchronization reference point. If this field is absent, the epoch time is the end of SI window where this SIB19 is scheduled. This field is mandatory present when provided in dedicated configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
cellSpecificKoffset \\
The CellSpecific_K_offset is a scheduling offset used for the timing relationships that need to be modified for NTN [see TS 38.2xy]. The unit of K_offset is number of slots for a given subcarrier spacing of 15 kHz . FFS other SCS.
\end{tabular} \\
\hline \begin{tabular}{l}
kmac \\
\( \mathrm{K} \_\mathrm{mac} \) is a scheduling offset provided by network if downlink and uplink frame timing are not aligned at gNB. It is needed for UE action and assumption on downlink configuration indicated by a MAC-CE command in PDSCH [see TS 38.2xy]. When UE is not provided by network with a K_mac value, UE assumes K_mac \( =0 \). \\
For the reference subcarrier spacing value for the unit of K_mac in FR1, a value of 15 kHz is used. The unit of K_mac is number of slots for a given subcarrier spacing. FFS other SCS.
\end{tabular} \\
\hline \begin{tabular}{l}
ntn-PolarizationDL \\
If present, this parameter indicates polarization information for Downlink transmission on service link: including Right hand, Left hand circular polarizations (RHCP, LHCP) and Linear polarization.
\end{tabular} \\
\hline \begin{tabular}{l}
ntn-PolarizationUL \\
If present, this parameter indicates Polarization information for Uplink service link. \\
If not present and ntnPolarizationDL is present, UE assumes a same polarization for UL and DL.
\end{tabular} \\
\hline \begin{tabular}{l}
ntn-UISyncValidityDuration \\
A validity duration configured by the network for uplink synchronization assistance information (i.e. Serving satellite ephemeris and Common TA parameters) which indicates the maximum time during which the UE can apply assistance information without having acquired new assistance information. \\
The unit of ntn-UlSyncValidityDuration is second. This parameter applies to both connected and idle mode UEs.
\end{tabular} \\
\hline \begin{tabular}{l}
ta-Common \\
TACommon is a network-controlled common timing advanced value and it may include any timing offset considered necessary by the network. TACommon with value of 0 is supported. The granularity of TACommon is \( 4.07 \times 10^{\wedge}(-3) \mu \mathrm{s} \). Values are given in unit of corresponding granularity. This field is excluded when determining changes in system information, i.e. changes of XXX should neither result in system information change notifications nor in a modification of valueTag in SIB1."
\end{tabular} \\
\hline \begin{tabular}{l}
taCommonDrift \\
Indicate drift rate of the common TA. The granularity of TACommonDrift is \( 0.2 \times 10^{\wedge}(-3) \mu \mathrm{s} / \mathrm{s} \) Values are given in unit of corresponding granularity. This field is excluded when determining changes in system information, i.e. changes of XXX should neither result in system information change notifications nor in a modification of value Tag in SIB1.
\end{tabular} \\
\hline \begin{tabular}{l}
taCommonDriftVariant \\
Indicate drift rate variation of the common TA. The granularity of TACommonDriftVariation is \( 0.2 \times 10^{\wedge}(-4) \mu \mathrm{s} / \mathrm{s}^{\wedge} 2 \). Values are given in unit of corresponding granularity. This field is excluded when determining changes in system information, i.e. changes of XXX should neither result in system information change notifications nor in a modification of value Tag in SIB1.
\end{tabular} \\
\hline
\end{tabular}
- NZP-CSI-RS-Resource

The IE NZP-CSI-RS-Resource is used to configure Non-Zero-Power (NZP) CSI-RS transmitted in the cell where the IE is included, which the UE may be configured to measure on (see TS 38.214 [19], clause 5.2.2.3.1). A change of configuration between periodic, semi-persistent or aperiodic for an NZP-CSI-RS-Resource is not supported without a release and add.

ETSI


--- Page 646  ---


3GPP TS 38.331 version 17.0.0 Release 17
645
ETSI TS 138331 V17.0.0 (2022-05)

NZP-CSI-RS-Resource information element
```
-- ASNISTART
-- TAG-NZP-CSI-RS-RESOURCE-START
NZP-CSI-RS-Resource ::=
    nzp-CSI-RS-ResourceId
    resourceMapping
    powerControlOffset
    powerControlOffsetSS
    scramblingID
    periodicityAndOffset
    qcl-InfoPeriodicCSI-RS
    \cdots.
}
```

-- TAG-NZP-CSI-RS-RESOURCE-STOP
-- ASNISTOP
```
SEQUENCE \
    NZP-CSI-RS-ResourceId,
    CSI-RS-ResourceMapping,
    INTEGER (-8..15),
    ENUMERATED{db-3,db0, db3,db6} OPTIONAL, -- Need.R
    ScramblingId,
    CSI-ResourcePeriodicityAndOffset OPTIONAL, -- Cond PeriodicOrSemiPersistent
    TCI-StateId.
OPTIONAL, -- Cond Periodic
```


\begin{tabular}{|l|}
\hline NZP-CSI-RS-Resource field descriptions \\
\hline \begin{tabular}{l}
periodicityAndOffset \\
Periodicity and slot offset s/1 corresponds to a periodicity of 1 slot, s/2 to a periodicity of two slots, and so on. The corresponding offset is also given in number of slots (see TS 38.214 [19], clause 5.2.2.3.1). Network always configures the UE with a value for this field for periodic and semi-persistent NZP-CSI-RS-Resource (as indicated in CSI- \\
ResourceConfig).
\end{tabular} \\
\hline \begin{tabular}{l}
powerControlOffset \\
Power offset of PDSCH RE to NZP CSI-RS RE. Value in dB (see TS 38.214 [19], clauses 5.2.2.3.1 and 4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
powerControlOffsetSS \\
Power offset of NZP CSI-RS RE to SSS RE. Value in dB (see TS 38.214 [19], clause 5.2.2.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
qcI-InfoPeriodicCSI-RS \\
For a target periodic CSI-RS, contains a reference to one TCI-State in TCI-States for providing the QCL source and QCL type. For periodic CSI-RS, the source can be SSB or another periodic-CSI-RS. Refers to the TCI-State or DLorJoint-TCIState which has this value for tci-Stateld and is defined in tci-StatesToAddModList or in dl-orJoint-TCIStateToAddModList in the PDSCH-Config included in the BWP-Downlink corresponding to the serving cell and to the DL BWP to which the resource belongs to (see TS 38.214 [19], clause 5.2.2.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceMapping \\
OFDM symbol location(s) in a slot and subcarrier occupancy in a PRB of the CSI-RS resource.
\end{tabular} \\
\hline \begin{tabular}{l}
scramblingID \\
Scrambling ID (see TS 38.214 [19], clause 5.2.2.3.1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline Periodic & The field is optionally present, Need M, for periodic NZP-CSI-RS-Resources (as indicated in CSI-ResourceConfig). The field is absent otherwise. \\
\hline PeriodicOrSemiPersistent & The field is optionally present, Need M, for periodic and semi-persistent NZP-CS/-RS-Resources (as indicated in CS/ResourceConfig). The field is absent otherwise. \\
\hline
\end{tabular}

ETSI


--- Page 647  ---


3GPP TS 38.331 version 17.0.0 Release 17
646
ETSI TS 138331 V17.0.0 (2022-05)
- NZP-CSI-RS-Resourceld

The IE NZP-CSI-RS-Resourceld is used to identify one NZP-CSI-RS-Resource.
NZP-CSI-RS-Resourceld information element
```
-- ASNISTART
-- TAG-NZP-CSI-RS-RESOURCEID-START
NZP-CSI-RS-ResourceId ::= INTEGER (O..maxNrofNZP-CSI-RS-Resources-l)
-- TAG-NZP-CSI-RS-RESOURCEID-STOP
-- ASNISTOP
```

- NZP-CSI-RS-ResourceSet

The IE NZP-CSI-RS-ResourceSet is a set of Non-Zero-Power (NZP) CSI-RS resources (their [Ds) and set-specific parameters.

NZP-CSI-RS-ResourceSet information element
```
-- ASNISTART
-- TAG-NZP-CSI-RS-RESOURCESET-START
NZP-CSI-RS-ResourceSet ::= SEQUENCE {
    nzp-CSI-ResourceSetId NZP-CSI-RS-ResourceSetId,
    nzp-CSI-RS-Resources
    repetition
    aperiodicTriggeringOffset
    trs-Info
    ...;
    [ [
```

```
    ]],
    [ [
```

```
    ] ]
}
CMRGroupingAndPairing-rl7 ::= SEQUENCE \
    nrofResourcesGroupl-rl7 INTEGER (1..7),
    nrofResourcesGroup2-rl7 INTEGER (1..7),
    pairlOfNZP-CSI-RS-rl7 NZP-CSI-RS-Pairing-rl7
```

```
}
NZP-CSI-RS-Pairing-rl7 ::= SEQUENCE {
    nzp-CSI-RS-ResourceIdl-rl7 NZP-CSI-RS-ResourceSetId,
    nzp-CSI-RS-ResourceId2-rl7 NZP-CSI-RS-ResourceSetId
}
```


ETSI


--- Page 648  ---


3GPP TS 38.331 version 17.0.0 Release 17
647
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-NZP-CSI-RS-RESOURCESET-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline NZP-CSI-RS-ResourceSet field descriptions \\
\hline \begin{tabular}{l}
aperiodicTriggeringOffset, aperiodicTriggeringOffset-r16 \\
Offset X between the slot containing the DCI that triggers a set of aperiodic NZP CSI-RS resources and the slot in which the CSI-RS resource set is transmitted. For aperiodic TriggeringOffset, the value 0 corresponds to 0 slots, value 1 corresponds to 1 slot, value 2 corresponds to 2 slots, value 3 corresponds to 3 slots, value 4 corresponds to 4 slots, value 5 corresponds to 16 slots, value 6 corresponds to 24 slots. For aperiodicTriggeringOffset-r16, the value indicates the number of slots. The network configures only one of the fields. When neither field is included, the UE applies the value 0 .
\end{tabular} \\
\hline \begin{tabular}{l}
cmrGroupingAndPairing \\
Configures CMR groups and pairs. The first nrofResourcesGroup 1 resources in the NZP-CSI-RS resource set belong to Group 1 and the following nrofResourcesGroup 2 resources in the NZP-CSI-RS resource set belong to Group 2 corresponding to \( k 1 \) and \( k 2 \) as specified in TS 38.214 clause 5.2.1.4.1. Maximum total number in Group 1 and Group 2 is 8 (see TS 38.214 [19], clauses 5.2.1.4.1 and 5.2.1.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pair1OfNZP-CSI-RS, pair2OfNZP-CSI-RS \\
A pair of NZP CSI-RS resources. In one pair, one resource shall belong to group 1 and the other resource shall belong to group 2 as configured by nrofResourcesGroup 1 and nrofResourcesGroup2. (see TS 38.214 [19], clause xx).
\end{tabular} \\
\hline \begin{tabular}{l}
nzp-CSI-RS-Resources \\
NZP-CSI-RS-Resources associated with this NZP-CSI-RS resource set (see TS 38.214 [19], clause 5.2). For CSI, there are at most 8 NZP CSI RS resources per resource set.
\end{tabular} \\
\hline \begin{tabular}{l}
pdc-Info \\
Indicates that this NZP-CSI-RS-ResourceSet, if configured also with trs-Info, is used for propagation delay compensation. The field can be present only if trs-info is present. The field can be present in only one NZP-CSI-RS-ResourceSet. If network configures this field for an NZP-CSI-RS-ResourceSet, the UE measures the UE Rx-Tx time difference based on resources configured in this resource set.
\end{tabular} \\
\hline \begin{tabular}{l}
repetition \\
Indicates whether repetition is on/off. If the field is set to off or if the field is absent, the UE may not assume that the NZP-CSI-RS resources within the resource set are transmitted with the same downlink spatial domain transmission filter (see TS 38.214 [19], clauses 5.2.2.3.1 and 5.1.6.1.2). It can only be configured for CSI-RS resource sets which are associated with CS/-ReportConfig with report of L1 RSRP, L1 SINR or "no report".
\end{tabular} \\
\hline \begin{tabular}{l}
trs-Info \\
Indicates that the antenna port for all NZP-CSI-RS resources in the CSI-RS resource set is same. If the field is absent or released the UE applies the value false (see TS 38.214 [19], clause 5.2.2.3.1).
\end{tabular} \\
\hline
\end{tabular}
- NZP-CSI-RS-ResourceSetld

The IE NZP-CSI-RS-ResourceSetld is used to identify one NZP-CSI-RS-ResourceSet.
NZP-CSI-RS-ResourceSettd information element
-- ASNISTART
-- TAG-NZP-CSI-RS-RESOURCESETID-START
NZP-CSI-RS-ResourceSetId : := INTEGER (O. maxNrofNZP-CSI-RS-ResourceSets-1)
-- TAG-NZP-CSI-RS-RESOURCESETID-STOP
-- ASNISTOP

ETSI


--- Page 649  ---


3GPP TS 38.331 version 17.0.0 Release 17
648
ETSI TS 138331 V17.0.0 (2022-05)
- \( \quad \) P-Max

The IE \( P \)-Max is used to limit the UE's uplink transmission power on a carrier frequency, in TS 38.101-1 [15] and is used to calculate the parameter \( P \) compensation defined in TS 38.304 [20].

P-Max information element
-- ASNISTART
-- TAG-P-MAX-START
P-Max : := INTEGER (-30. 33)
-- TAG-P-MAX-STOP
-- ASNISTOP
- PCI-List

The IE PCI-List concerns a list of physical cell identities, which may be used for different purposes.
PCI-List information element
-- ASNISTART
-- TAG-PCI-LIST-START

PCI-List : :=
SEQUENCE (SIZE (l..MAXNrofCellMeas)) OF PhysCellId
-- TAG-PCI-LIST-STOP
-- ASNISTOP
- PCI-Range

The IE PCI-Range is used to encode either a single or a range of physical cell identities. The range is encoded by using a start value and by indicating the number of consecutive physical cell identities (including start) in the range. For fields comprising multiple occurrences of PCI-Range, the Network may configure overlapping ranges of physical cell identities.

PCI-Range information element
-- ASNISTART
-- TAG-PCI-RANGE-START

PCI-Range : :=
start
range
        ткоко
\}

SEQUENCE 1
Physcellid,
ENUMERATED \( \{n 4, n 8, n 12, n 16, n 24, n 32, n 48, n 64, n 84 \), n96, n128, n168, n252, n504, n1008, sparel\}

OPTIONAL -- Need. S

ETSI


--- Page 650  ---


3GPP TS 38.331 version 17.0.0 Release 17
649
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-PCI-RANGE-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline PCI-Range field descriptions \\
\hline \begin{tabular}{l}
range \\
Indicates the number of physical cell identities in the range (including start). Value \( n 4 \) corresponds with 4 , value \( n 8 \) corresponds with 8 and so on. The UE shall apply value 1 in case the field is absent, in which case only the physical cell identity value indicated by start applies.
\end{tabular} \\
\hline \begin{tabular}{l}
start \\
Indicates the lowest physical cell identity in the range.
\end{tabular} \\
\hline
\end{tabular}
- PCI-RangeElement

The IE PCI-RangeElement is used to define a PCI-Range as part of a list (e.g. AddMod list).
PCI-RangeElement information element
-- ASNISTART
-- TAG-PCI-RANGEELEMENT-START

PCI-RangeElement : :=
pci-RangeIndex
pci-Range
\}
-- TAG-PCI-RANGEELEMENT-STOP
-- ASNISTOP
    pci-Range
    3

SEQUENCE 1
PCI-RangeIndex,
PCI-Range
    PCI-RangeIndex,
    PCI-Range
        7

PCI-RangeElement
The IE PCI-RangeElement is used to define a PCI-Range as part of a list (e.g. AddMod list).
PCI-RangeElement information element
        M
                    "

\begin{tabular}{|l|l|}
\hline \multicolumn{2}{|r|}{PCI-RangeElement field descriptions} \\
\hline \begin{tabular}{l}
pci-Range \\
Physical cell identity or a range of physical cell identities.
\end{tabular} & \\
\hline
\end{tabular}
- PCI-RangeIndex

The IE PCI-RangeIndex identifies a physical cell id range, which may be used for different purposes.
PCI-RangeIndex information element
-- ASNISTART
-- TAG-PCI-RANGEINDEX-START
PCI-RangeIndex : :=

INTEGER (1. . maxNrofPCI-Ranges)
ETSI


--- Page 651  ---


3GPP TS 38.331 version 17.0.0 Release 17
650
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-PCI-RANGEINDEX-STOP
-- ASNISTOP
- PCI-RangeIndexList

The IE PCI-RangeIndexList concerns a list of indexes of physical cell id ranges, which may be used for different purposes.
PCI-RangeIndexList information element
-- ASNISTART
-- TAG-PCI-RANGEINDEXLIST-START
PCI-RangeIndexList : : SEQUENCE (SIZE (1..maxNrofPCI-Ranges)) OF PCI-RangeIndex
-- TAG-PCI-RANGEINDEXLIST-STOP
-- ASNISTOP

PDCCH-Config
The IE PDCCH-Config is used to configure UE specific or MBS multicast PDCCH parameters such as control resource sets (CORESET), search spaces and additional parameters for acquiring the PDCCH. If this IE is used for the scheduled SCell in case of cross carrier scheduling, the fields other than searchSpacesToAddModList and searchSpacesToReleaseList are absent. If the IE is used for a dormant BWP, the fields other than controlResourceSetToAddModList and controlResourceSetToReleaseList are absent. If this IE is used for MBS CFR, the field downlinkPreemptiom,tpc-PUSCH, tpc-SRS, uplinkCancellation, monitoringCapabilityConfig, and searchSpaceSwitchConfig are absent.

PDCCH-Config information element
-- ASNISTART
-- TAG-PDCCH-CONFIG-START
PDCCH-Config : := SEQUENCE [ searchSpacesToAddModList SEQUENCE(SIZE (1.10)) OF SearchSpace searchSpacesToReleaseList SEQUENCE(SIZE (1.10)) OF SearchSpaceId downlinkPreemption SetupRelease [DownlinkPreemption] tpc-PUSCH SetupRelease [PUSCH-TPC-CommandConfig] tpc-PUCCH SetupRelease [PUCCH-TPC-CommandConfig] tpc-SRS SetupRelease [ SRS-TPC-CommandConfig] OPTIONAL, -- Need N OPTIONAL, -- Need N OPTIONAL, -- Need M OPTIONAL, -- Need. M OPTIONAL, -- Need M
⋯', OPTIONAL, -- Need. M
[ [

ETSI


--- Page 652  ---


3GPP TS 38.331 version 17.0.0 Release 17
651
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]1,
    [ [
```

```
    searchSpaceSwitchTimer-rl7
    pdcch-SkippingDurationList-rl7
    ] ]
}
SearchSpaceSwitchConfig-rl6 ::=
    cellGroupsForSwitchList-rl6
    searchSpaceSwitchDelay-rl6
}
CellGroupForSwitch-rl6 ::= SEQUENCE(SIZE (l..16)) OF ServCellIndex
PDCCH-SkippingDuration-rl7 ::= INTEGER (1..800)
-- TAG-PDCCH-CONFIG-STOP
-- ASNISTOP
```


Editor's NOTE: It is FFS whether SSSG switching or PDCCH skipping is only applicable when C-DRX is configured. Wait for further RAN1 clarification.
Editor's note: searchSpacesToAddModListExt2 may need to be added to PDCCH-ConfigCommon as well.

ETSI


--- Page 653  ---


3GPP TS 38.331 version 17.0.0 Release 17
652
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PDCCH-Config field descriptions \\
\hline \begin{tabular}{l}
controIResourceSetToAddModList, controIResourceSetToAddModListSizeExt \\
List of UE specifically configured Control Resource Sets (CORESETs) to be used by the UE. The network restrictions on configuration of CORESETs per DL BWP are specified in TS 38.213 [13], clause 10.1 and TS 38.306 [26]. The UE shall consider entries in controlResourceSetToAddModList and in \\
controlResourceSetToAddModListSizeExt as a single list, i.e. an entry created using controlResourceSetToAddModList can be modified using \\
controlResourceSetToAddModListSizeExt (or deleted using controlResourceSetToReleaseListSizeExt) and vice-versa. In case network reconfigures control resource set with the same ControlResourceSet/d as used for commonControlResourceSet configured via PDCCH-ConfigCommon, the configuration from PDCCH-Config always takes precedence and should not be updated by the UE based on servingCellConfigCommon. The network shall not use same ControlResourceSet/d as used for commonControlResourceSetExt configured via SIB20 in this field.
\end{tabular} \\
\hline \begin{tabular}{l}
contro/ResourceSetToReleaseList, controIResourceSetToReleaseListSizeExt \\
List of UE specifically configured Control Resource Sets (CORESETs) to be released by the UE. This field only applies to CORESETs configured by controlResourceSetToAddModList or controlResourceSetToAddModListSizeExt and does not release the field commonControlResourceSet configured by PDCCHConfigCommon and commonControlResourceSetExt configured by SIB20.
\end{tabular} \\
\hline \begin{tabular}{l}
downlinkPreemption \\
Configuration of downlink preemption indications to be monitored in this cell (see TS 38.213 [13], clause 11.2).
\end{tabular} \\
\hline \begin{tabular}{l}
monitoringCapabilityConfig \\
Configures either Rel-15 PDCCH monitoring capability or Rel-16 PDCCH monitoring capability for PDCCH monitoring on a serving cell. Value r 15 monitoringcapablity enables the Rel-15 monitoring capability, and value \( r 16 \) monitoringcapablity enables the Rel-16 PDCCH monitoring capability (see TS 38.213 [13], clause 10.1). r17monitoringcapability enables the Rel-17 PDCCH multi-slot monitoring capability (see TS 38.213 [13], clause 10.1). For 480 and 960 kHz SCS, only value r 17 monitoringcapability is applicable.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcch-SkippingDurationList \\
The UE can be configured to be indicated by DCI a value of X (i.e., skipping duration), in units of slots, among at most 3 multiple RRC configured values by scheduling DCIs indicating PDCCH schedules data. For each skipping duration (i.e. the value range of IE PDCCH-SkippingDuration-r17), \( \{1,2,3, \ldots, 20,30,40,50,60,80,100\} \) are valid for the 15 kHz SCS, \( \{1,2,3, \ldots, 40,60,80,100,120,160,200\} \) are valid for 30 kHz SCS, \( \{1,2,3, \ldots, 80,120,160,200,240,320,400\} \) are valid for 60 kHz SCS, and \( \{1,2,3, \ldots, 160,240 \), \( 320,400,480,640,800\} \) are valid for 120 kHz SCS,\( \{4,8,12, \ldots, 640,960,1280,1600,1920,2560,3200\} \) are valid for 480 kHz SCS, and \( \{8,16,24, \ldots, 1280,1920,2560,3200,3840 \), 5120,6400 ) are valid for 960 kHz SCS.
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpacesToAddModList, searchSpacesToAddModListExt \\
List of UE specifically configured Search Spaces or MBS multicast Search Spaces. The network configures at most 10 Search Spaces per BWP per cell (including UE-specific and common Search Spaces). If the network includes searchSpaceToAddModListExt, it includes the same number of entries, and listed in the same order, as in searchSpacesToAddModList in each of them.
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceSwitchTimer \\
Timer (in unit of slots) to control the UE behavior to switch from search space group X back to search space group 0, as specified in clause 10 of TS 38.213. A UE does not expect to be configured with Rel-16 SSSG switching parameters and Rel-17 SSSG switching parameters per cell simultaneously. For 15 kHz SCS, \( \{1,2,3, \ldots, 20,30,40,50,60 \), \( 80,100\} \) are valid. For 30 kHz SCS, \( \{1,2,3, \ldots, 40,60,80,100,120,160,200\} \) are valid. For 60 kHz SCS, \( \{1,2,3, \ldots, 80,120,160,200,240,320,400\} \) are valid. For 120 kHz SCS, \( \{1,2,3, \ldots, 160,240,320,400,480,640,800\} \) are valid. For 480 kHz SCS, \( \{4,8,12, \ldots, 640,960,1280,1600,1920,2560,3200\} \) are valid. For 960 kHz SCS, \( \{8,16,24, \ldots, 1280,1920 \), 2560,3200, 3840, 5120,6400\} are valid.
\end{tabular} \\
\hline \begin{tabular}{l}
sfnScheme \\
This parameter is used to configure SFN scheme for PDCCH: scheme 1 (sfnSchemeA) or TRP-based pre-compensation (sfnSchemeB). The PDCCH-Config:s in all BWPs (except BWP\#0) of a ServingCell should have the same configuration of SFN scheme.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-PUCCH \\
Enable and configure reception of group TPC commands for PUCCH.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-PUSCH \\
Enable and configure reception of group TPC commands for PUSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-SRS \\
Enable and configure reception of group TPC commands for SRS.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkCancellation \\
Configuration of uplink cancellation indications to be monitored in this cell (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 654  ---


3GPP TS 38.331 version 17.0.0 Release 17
653
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SearchSpaceSwitchConfig field descriptions \\
\hline \begin{tabular}{l}
cellGroupsForSwitchList \\
The list of serving cells which are bundled for the search space group switching purpose (see TS 38.213 [13], clause 10.4). A serving cell can belong to only one CellGroupForSwitch. The network configures the same list for all BWPs of serving cells in the same CellGroupForSwitch.
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceSwitchDelay \\
Indicates the value to be applied by a UE for Search Space Set Group switching; corresponds to the P value in TS 38.213 [13], clause 10.4. The network configures the same value for all BWPs of serving cells in the same CellGroupForSwitch.
\end{tabular} \\
\hline
\end{tabular}
- PDCCH-ConfigCommon

The IE PDCCH-ConfigCommon is used to configure cell specific PDCCH parameters provided in SIB as well as in dedicated signalling.
PDCCH-ConfigCommon information element
```
-- ASNISTART
-- TAG-PDCCH-CONFIGCOMMON-START
PDCCH-ConfigCommon ::= SEQUENCE \
    controlResourceSetZero ControlResourceSetZero
    commonControlResourceSet ControlResourceSet
    searchSpaceZero SearchSpaceZero
    commonSearchSpaceList SEQUENCE (SIZE(1..4)) OF SearchSpace
    searchSpaceSIBl SearchSpaceId
    searchSpaceOtherSystemInformation SearchSpaceId
    pagingSearchSpace SearchSpaceId
    ra-SearchSpace SearchSpaceId
    ...;
    [ [
    firstPDCCH-MonitoringOccasionOfPO CHOICE \
```

```
        sCSl20KHZoneEighthT-SCS60KHZoneSixteenthT
        sCSl20KHZoneSixteenthT
    }
    ]],
    [ [
```

```
    ]],
    [ [
    sdt-SearchSpace-rl7 SearchSpace OPTIONAL, -- Need R
    searchSpaceMCCH-rl7 SearchSpaceId
    searchSpaceMTCH-rl7 SearchSpaceId
    OPTIONAL, -- Need. S
    ] ]
}
```


ETSI


--- Page 655  ---


3GPP TS 38.331 version 17.0.0 Release 17
654
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-PDCCH-CONFIGCOMMON-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline PDCCH-ConfigCommon field descriptions \\
\hline \begin{tabular}{l}
commonControlResourceSet \\
An additional common control resource set which may be configured and used for any common or UE-specific search space. If the network configures this field, it uses a ControlResourceSetld other than 0 for this ControlResourceSet. The network configures the commonControlResourceSet in SIB1 so that it is contained in the bandwidth of CORESET\#0.
\end{tabular} \\
\hline \begin{tabular}{l}
commonSearchSpaceList, commonSearchSpaceListExt \\
A list of additional common search spaces. If the network configures this field, it uses the SearchSpacelds other than 0. If the field is included, it replaces any previous list, i.e. all the entries of the list are replaced and each of the SearchSpace entries is considered to be newly created and the conditions and Need codes for setup of the entry apply. If the network includes commonSearchSpaceListExt, it includes the same number of entries, and listed in the same order, as in commonSearchSpaceList.
\end{tabular} \\
\hline \begin{tabular}{l}
controlResourceSetZero \\
Parameters of the common CORESET\#0 which can be used in any common or UE-specific search spaces. The values are interpreted like the corresponding bits in M/B pdcch-ConfigS/B1. Even though this field is only configured in the initial BWP (BWP\#0) controlResourceSetZero can be used in search spaces configured in other DL BWP(s) than the initial DL BWP if the conditions defined in TS 38.213 [13], clause 10 are satisfied.
\end{tabular} \\
\hline \begin{tabular}{l}
firstPDCCH-MonitoringOccasionOfPO \\
Indicates the first PDCCH monitoring occasion of each PO of the PF on this BWP, see TS 38.304 [20].
\end{tabular} \\
\hline \begin{tabular}{l}
pagingSearchSpace \\
ID of the Search space for paging (see TS 38.213 [13], clause 10.1). If the field is absent, the UE does not receive paging in this BWP (see TS 38.213 [13], clause 10).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-SearchSpace \\
ID of the Search space for random access procedure (see TS 38.213 [13], clause 10.1). If the field is absent, the UE does not receive RAR in this BWP. This field is mandatory present in the DL BWP(s) if the conditions described in TS 38.321 [3], clause 5.15 are met.
\end{tabular} \\
\hline \begin{tabular}{l}
sdt-SearchSpace \\
Common search space for CG-SDT and RA-SDT (see TS 38.213 [13]).
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceMCCH \\
ID of the search space for MCCH. If the field is absent, the UE does not receive MCCH in this BWP (see TS 38.213 [13], clause 10).
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceMTCH \\
ID of the search space for MTCH of MBS broadcast. If the field is absent, the UE applies searchSpaceMCCH also for MTCH, (see TS 38.213 [13], clause 10).
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceOtherSysteminformation \\
ID of the Search space for other system information, i.e., SIB2 and beyond (see TS 38.213 [13], clause 10.1) If the field is absent, the UE does not receive other system information in this BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceSIB1 \\
ID of the search space for SIB1 message. In the initial DL BWP of the UE's PC ell, the network sets this field to 0 . If the field is absent, the UE does not receive SIB1 in this BWP. (see TS 38.213 [13], clause 10)
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceZero \\
Parameters of the common SearchSpace\#0. The values are interpreted like the corresponding bits in MIB pdcch-ConfigS/B1. Even though this field is only configured in the initial BWP (BWP\#0), searchSpaceZero can be used in search spaces configured in other DL BWP(s) than the initial DL BWP if the conditions described in TS 38.213 [13], clause 10, are satisfied.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 656  ---


3GPP TS 38.331 version 17.0.0 Release 17
655
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline InitialBWP-Only & If SIB1 is broadcast the field is mandatory present in the PDCCH-ConfigCommon of the initial BWP (BWP\#0) in ServingCellConfigCommon; it is absent in other BWPs and when sent in system information. If SIB1 is not broadcast and there is an SSB associated to the cell, the field is optionally present, Need M, in the PDCCH-ConfigCommon of the initial BWP (BWP\#0) in ServingCellConfigCommon (still with the same setting for all UEs). In other cases, the field is absent. \\
\hline OtherBWP & This field is optionally present, Need R, if this BWP is not the initial DL BWP and pagingSearchSpace is configured in this BWP. Otherwise this field is absent. \\
\hline
\end{tabular}
- PDCCH-ConfigSIB1

The IE PDCCH-ConfigSIBI is used to configure CORESET\#0 and search space\#0.
PDCCH-ConfigSIB1 information element
```
-- ASNISTART
-- TAG-PDCCH-CONFIGSIBl-START
PDCCH-ConfigSIBl ::=
SEQUENCE \
    ControlResourceSetZero,
    SearchSpaceZero
    controlResourceSetZero
search SpaceZero
}
-- TAG-PDCCH-CONFIGSIBI-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PDCCH-ConfigSIB1 field descriptions \\
\hline \begin{tabular}{l}
controlResourceSetZero \\
Determines a common ControlResourceSet (CORESET) with ID \#0, see TS 38.213 [13], clause 13.
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceZero \\
Determines a common search space with ID \#0, see TS 38.213 [13], clause 13.
\end{tabular} \\
\hline
\end{tabular}
- PDCCH-ServingCellConfig

The IE PDCCH-ServingCellConfig is used to configure UE specific PDCCH parameters applicable across all bandwidth parts of a serving cell.
PDCCH-ServingCellConfig information element
```
-- ASNISTART
-- TAG-PDCCH-SERVINGCELLCONFIG-START
PDCCH-ServingCellConfig ::= SEQUENCE {
    slotFormatIndicator SetupRelease { SlotFormatIndicator}
    ...,
    [ [
```


ETSI


--- Page 657  ---


3GPP TS 38.331 version 17.0.0 Release 17
656
ETSI TS 138331 V17.0.0 (2022-05)
```
    availabilityIndicator-rl6
    searchSpaceSwitchTimer-rl6
    ]]
}
-- TAG-PDCCH-SERVINGCELLCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PDCCH-ServingCellConfig field descriptions \\
\hline \begin{tabular}{l}
availabilityindicator \\
Use to configure monitoring a PDCCH for Availability Indicators (AI).
\end{tabular} \\
\hline \begin{tabular}{l}
searchSpaceSwitchTimer \\
The value of the timer in slots for monitoring PDCCH in the active DL BWP of the serving cell before moving to the default search space group (see TS 38.213 [13], clause 10.4). For 15 kHz SCS, \( \{1 . .20\} \) are valid. For 30 kHz SCS, \( \{1 . .40\} \) are valid. For 60 kHz SCS, \( \{1 . .80\} \) are valid. The network configures the same value for all serving cells in the same CellGroupForSwitch.
\end{tabular} \\
\hline \begin{tabular}{l}
slotFormatindicator \\
Configuration of Slot-Format-Indicators to be monitored in the correspondingly configured PDCCHs of this serving cell.
\end{tabular} \\
\hline
\end{tabular}
- PDCP-Config

The IE PDCP-Config is used to set the configurable PDCP parameters for signalling, MBS multicast and data radio bearers.
PDCP-Config information element
```
-- ASNISTART
-- TAG-PDCP-CONFIG-START
PDCP-Config ::= SEQUENCE \
    drb SEQUENCE {
        discardTimer ENUMERATED {msl0, ms20, ms30, ms40, ms50, ms60, ms75, ms100, ms150, ms200,
                            ms250, ms300, ms500, ms750, msl500, infinity} OPTIONAL, -- Cond Setup
        pdcp-SN-SizeUL ENUMERATED {lenl2bits, lenl8bits} OPTIONAL, -- Cond Setupl
        pdcp-SN-SizeDL ENUMERATED {lenl2bits, lenl8bits} OPTIONAL, -- Cond Setup2
        headerCompression CHOICE [
            notUsed NULL,
            rohe SEQUENCE \
                MaxCID INTEGER (1.16383) DEFAULT 15,
                profiles SEQUENCE {
                    profile0x0001 BOOLEAN,
                    profile0x0002 BOOLEAN,
                    profile0x0003 BOOLEAN,
                    profile0x0004 BOOLEAN,
                    profile0x0006 BOOLEAN,
                    profile0x0101 BOOLEAN,
                    profile0x0102 BOOLEAN,
                    profile0x0103 BOOLEAN,
                    profile0x0104 BOOLEAN
                },
```


ETSI


--- Page 658  ---


3GPP TS 38.331 version 17.0.0 Release 17
657
ETSI TS 138331 V17.0.0 (2022-05)
```
                drb-ContinueROHC ENUMERATED { true } OPTIONAL -- Need N
            },
            uplinkOnlyROHC SEQUENCE {
                maxCID
                profiles
                    SEQUENCE {
                },
                drb-ContinueROHC ENUMERATED { true } OPTIONAL -- Need N
            },
            ...
        l,
        integrityProtection ENUMERATED { enabled }
        statusReportRequired ENUMERATED { true }
        outOfOrderDelivery ENUMERATED { true }
    }
    moreThanOneRLC SEQUENCE {
        primaryPath SEQUENCE \
            cellGroup CellGroupId
            logicalChannel LogicalChannelIdentity
        },
        ul-DataSplitThreshold UL-DataSplitThreshold
        pdep-Duplication BOOLEAN
    }
    t-Reordering ENUMERATED {
                                ms0, msl, ms2, ms4, ms5, ms8, msl0, msl5, ms20, ms30, ms40,
                                ms50, ms60, ms80, msl00, msl20, msl40, msl60, msl80, ms200, ms220,
                                ms240, ms260, ms280, ms300, ms500, ms750, msl000, msl250,
                                msl500, msl750, ms2000, ms2250, ms2500, ms2750,
                                ms3000, spare28, spare27, spare26, spare25, spare24,
                                spare23, spare22, spare21, spare20,
                                sparel9, sparel8, sparel7, sparel6, sparel5, sparel4,
                                sparel3, sparel2, sparell, sparel0, spare09,
                                spare08, spare07, spare06, spare05, spare04, spare03,
                                spare02, spare01 } OPTIONAL, -- Need. S
    ...,
    [ [
    cipheringDisabled ENUMERATED {true} OPTIONAL -- Cond ConnectedTo5GC
    ]],
    [ [
    discardTimerExt-rl6 SetupRelease { DiscardTimerExt-rl6 }
    moreThanTwoRLC-DRB-rl6 SEQUENCE {
        splitSecondaryPath-rl6 LogicalChannelIdentity
        duplicationState-rl6 SEQUENCE (SIZE (3)) OF BOOLEAN
    }
    ethernet OPTIONAL, -- Cond MoreThanTwoRLC-DRB
    ]],
    [ [
    survivalTimeStateSupport-rl7 ENUMERATED {true}
    uplinkDataCompression-rl7 SetupRelease { UplinkDataCompression-rl7 }
    discardTimerExt2-rl7 SetupRelease { DiscardTimerExt2-rl7 }
    multicastHFN-AndRefSN-rl7 BIT STRING (SIZE (32))
    ]]
}
```


ETSI


--- Page 659  ---


3GPP TS 38.331 version 17.0.0 Release 17
658
ETSI TS 138331 V17.0.0 (2022-05)
```
EthernetHeaderCompression-r16::= SEQUENCE {
    ehc-Common-rl6 SEQUENCE {
        ehc-CID-Length-rl6 ENUMERATED { bits7, bitsl5 },
        \cdots
    },
    ehc-Downlink-rl6 SEQUENCE {
        drb-ContinueEHC-DL-r16 ENUMERATED { true } OPTIONAL, -- Need N
        \cdots
    }
    ehc-Uplink-rl6 SEQUENCE {
        maxCID-EHC-UL-r16 INTEGER (1..32767),
        drb-ContinueEHC-UL-rl6 ENUMERATED { true } OPTIONAL, -- Need N
        ...
    } OPTIONAL -- Need. M
}
UL-DataSplitThreshold ::= ENUMERATED {
                b0, b100, b200, b400, b800, b1600, b3200, b6400, b12800, b25600, b51200, b102400, b204800,
                b409600, b819200, b1228800, b1638400, b2457600, b3276800, b4096000, b4915200, b5734400,
                b6553600, infinity, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel}
DiscardTimerExt-rl6 := ENUMERATED {ms0dot5, msl, ms2, ms4, ms6, ms8, spare2, sparel}
DiscardTimerExt2-rl7 ::= ENUMERATED {ms2000, spare3, spare2, sparel}
UplinkDataCompression-rl7 ::= CHOICE [
    newSetup SEQUENCE {
        bufferSize-rl7 ENUMERATED {kbyte2, kbyte4, kbyte8, sparel},
        dictionary-rl7 ENUMERATED {sip-SDP, operator} OPTIONAL -- Need N
    },
    drb-ContinueUDC-rl7 ENUMERATED { true }
}
-- TAG-PDCP-CONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 660  ---


3GPP TS 38.331 version 17.0.0 Release 17
659
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PDCP-Config field descriptions \\
\hline \begin{tabular}{l}
cipheringDisabled \\
If included, ciphering is disabled for this DRB regardless of which ciphering algorithm is configured for the SRB/DRBs. The field may only be included if the UE is connected to 5GC. Otherwise the field is absent. The network configures all DRBs with the same PDU-session ID with same value for this field. The value for this field cannot be changed after the DRB is set up.
\end{tabular} \\
\hline \begin{tabular}{l}
discardTimer \\
Value in ms of discardTimer specified in TS 38.323 [5]. Value ms 10 corresponds to 10 ms , value ms 20 corresponds to 20 ms and so on. The value for this field cannot be changed in case of reconfiguration with sync, if the bearer is configured as DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
discardTimerExt \\
Value in ms of discardTimer specified in TS 38.323 [5]. Value ms Odot 5 corresponds to 0.5 ms , value ms 1 corresponds to 1 ms and so on. If this field is present, the field discard Timer is ignored and discardTimerExt is used instead.
\end{tabular} \\
\hline \begin{tabular}{l}
discardTimerExt2 \\
Value in ms of discard TimerExt2 specified in TS 38.323 [5]. Value \( m s 2000 \) corresponds to 2000 ms . If this field is present, the field discardTimer and discard TimerExt are ignored and discardTimerExt2 is used instead.
\end{tabular} \\
\hline \begin{tabular}{l}
drb-ContinueROHC \\
Indicates whether the PDCP entity continues or resets the ROHC header compression protocol during PDCP re-establishment, as specified in TS 38.323 [5]. This field is configured only in case of resuming an RRC connection or reconfiguration with sync, where the PDCP termination point is not changed and the fullConfig is not indicated. The network does not include the field if the bearer is configured as DAPS bearer. This field can be configured for both DRB and multicast MRB.
\end{tabular} \\
\hline \begin{tabular}{l}
duplicationState \\
This field indicates the uplink PDCP duplication state for the associated RLC entities at the time of receiving this IE. If set to true, the PDCP duplication state is activated for the associated RLC entity. The index for the indication is determined by ascending order of logical channel ID of all RLC entities other than the primary RLC entity indicated by primaryPath in the order of MCG and SCG, as in clause 6.1.3.32 of TS 38.321 [3]. If the number of associated RLC entities other than the primary RLC entity is two, UE ignores the value in the largest index of this field. If the field is absent, the PDCP duplication states are deactivated for all associated RLC entities.
\end{tabular} \\
\hline \begin{tabular}{l}
ethernetHeaderCompression \\
This fields configures Ethernet Header Compression. This field can only be configured for a bi-directional DRB or a bi-directional multicast MRB. The network reconfigures ethernetHeaderCompression only upon reconfiguration involving PDCP re-establishment and with neither drb-ContinueEHC-DL nor drb-ContinueEHC-UL configured. \\
Network only configures this field when uplinkDataCompression is not configured.
\end{tabular} \\
\hline \begin{tabular}{l}
headerCompression \\
If rohc is configured, the UE shall apply the configured ROHC profile(s) in both uplink and downlink. If uplinkOnlyROHC is configured, the UE shall apply the configured ROHC profile(s) in uplink (there is no header compression in downlink). ROHC can be configured for any bearer type. ROHC and EHC can be both configured simultaneously for a DRB or a multicast MRB. The network reconfigures headerCompression only upon reconfiguration involving PDCP re-establishment, and without any drbContinueROHC. Network configures headerCompression to notUsed when outOfOrderDelivery is configured. Network only configures this field when uplinkDataCompression is not configured.
\end{tabular} \\
\hline \begin{tabular}{l}
integrityProtection \\
Indicates whether or not integrity protection is configured for this radio bearer. The network configures all DRBs with the same PDU-session ID with same value for this field. The value for this field cannot be changed after the DRB is set up.
\end{tabular} \\
\hline \begin{tabular}{l}
maxCID \\
Indicates the value of the MAX_CID parameter as specified in TS 38.323 [5]. \\
The total value of MAX_CIDs across all bearers for the UE should be less than or equal to the value of maxNumberROHC-ContextSessions parameter as indicated by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
moreThanOneRLC \\
This field configures UL data transmission when more than one RLC entity is associated with the PDCP entity. This field is not present if the bearer is configured as DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
more ThanTwoRLC-DRB \\
This field configures UL data transmission when more than two RLC entities are associated with the PDCP entity for DRBs.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 661  ---


3GPP TS 38.331 version 17.0.0 Release 17
660
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PDCP-Config field descriptions \\
\hline \begin{tabular}{l}
multicastHFN-AndRefSN \\
Indicates the initial value of HFN and referrence PDCP SN associated to this HFN for multicast MRB PDCP window initialization as specified in TS 38.323 [5]. The value is composed of a HFN(MSBs) and the PDCP SN(LSBs). The size of the HFN part in bits is equal to 32 minus the length of the PDCP SN configured in pdcp-SN-SizeDL.
\end{tabular} \\
\hline \begin{tabular}{l}
outOfOrderDelivery \\
Indicates whether or not outOfOrderDelivery specified in TS 38.323 [5] is configured. This field should be either always present or always absent, after the radio bearer is established.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcp-Duplication \\
Indicates whether or not uplink duplication status at the time of receiving this IE is configured and activated as specified in TS 38.323 [5]. The presence of this field indicates that duplication is configured. PDCP duplication is not configured for CA packet duplication of LTE RLC bearer. The value of this field, when the field is present, indicates the state of the duplication at the time of receiving this IE. If set to true, duplication is activated. The value of this field is always true, when configured for a SRB. For PDCP entity with more than two associated RLC entities for UL transmission, this field is always present. If the field moreThanTwoRLC-DRB is present, the value of this field is ignored and the state of the duplication is indicated by duplicationState. For PDCP entity with more than two associated RLC entities, only NR RLC bearer is supported.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcp-SN-SizeDL \\
PDCP sequence number size for downlink, 12 or 18 bits, as specified in TS 38.323 [5]. For SRBs only the value len 12bits is applicable. The value for this field cannot be changed in case of reconfiguration with sync, if the bearer is configured as DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcp-SN-SizeUL \\
PDCP sequence number size for uplink, 12 or 18 bits, as specified in TS 38.323 [5]. For SRBs only the value len 12bits is applicable. The value for this field cannot be changed in case of reconfiguration with sync, if the bearer is configured as DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
primaryPath \\
Indicates the cell group ID and LCID of the primary RLC entity as specified in TS 38.323 [5], clause 5.2.1 for UL data transmission when more than one RLC entity is associated with the PDCP entity. In this version of the specification, only cell group ID corresponding to MCG is supported for SRBs, except for the SRB2 of the IAB-MT, and, when the SCG is deactivated, for DRBs. The NW indicates cellGroup for split bearers using logical channels in different cell groups. The NW always indicates logicalChannel if CA based PDCP duplication is configured in the cell group indicated by cellGroup of this field.
\end{tabular} \\
\hline \begin{tabular}{l}
splitSecondaryPath \\
Indicates the LCID of the split secondary RLC entity as specified in TS 38.323 [5] for fallback to split bearer operation when UL data transmission with more than two RLC entities is associated with the PDCP entity. This RLC entity belongs to a cell group that is different from the cell group indicated by cellGroup in the field primaryPath.
\end{tabular} \\
\hline \begin{tabular}{l}
statusReportRequired \\
For AM DRBs, AM MRBs and DAPS UM DRBs, indicates whether the DRB or the multicast MRB is configured to send a PDCP status report in the uplink, as specified in TS 38.323 [5]. For DAPS AM DRBs, it also indicates whether the DRB is configured to send a second PDCP status report in the uplink, as specified in TS 38.323 [5].
\end{tabular} \\
\hline \begin{tabular}{l}
survivalTimeStateSupport \\
Indicates whether the DRB associated with this PDCP entity has survival time state support. If this field is configured to be true, all associated RLC entities are activated for PDCP duplication upon reception of a retransmission grant, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
t-Reordering \\
Value in ms of t-Reordering specified in TS 38.323 [5]. Value \( m s 0 \) corresponds to 0 ms , value \( m s 20 \) corresponds to 20 ms , value \( m s 40 \) corresponds to 40 ms , and so on. When the field is absent the UE applies the value infinity. The value for this field cannot be changed in case of reconfiguration with sync, if the bearer is configured as DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
ul-DataSplitThreshold \\
Parameter specified in TS 38.323 [5]. Value \( b 0 \) corresponds to 0 bytes, value \( b 100 \) corresponds to 100 bytes, value \( b 200 \) corresponds to 200 bytes, and so on. The network sets this field to infinity for UEs not supporting splitDRB-withUL-Both-MCG-SCG and when the SCG is deactivated. If the field is absent when the split bearer is configured for the radio bearer first time, then the default value infinity is applied.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkDataCompression \\
Indicates the UDC configuration that the UE shall apply. Network does not configure uplinkDataCompression for a DRB, if headerCompression or ethernetHeaderCompression is already configured or outOforderDelivery or DAPS is configured for the DRB. The maximum number of DRBs where uplinkDataCompression can be applied is two. The network reconfigures uplinkDataCompression only upon reconfiguration involving PDCP re-establishment, and without any drb-ContinueUDC.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 662  ---


3GPP TS 38.331 version 17.0.0 Release 17
661
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline EthernetHeaderCompression field descriptions \\
\hline \begin{tabular}{l}
drb-ContinueEHC-DL \\
Indicates whether the PDCP entity continues or resets the downlink EHC header compression protocol during PDCP re-establishment, as specified in TS 38.323 [5]. The field is configured only in case of resuming an RRC connection or reconfiguration with sync, where the PDCP termination point is not changed and the fullConfig is not indicated.
\end{tabular} \\
\hline \begin{tabular}{l}
drb-ContinueEHC-UL \\
Indicates whether the PDCP entity continues or resets the uplink EHC header compression protocol during PDCP re-establishment, as specified in TS 38.323 [5]. The field is configured only in case of resuming an RRC connection or reconfiguration with sync, where the PDCP termination point is not changed and the fullConfig is not indicated.
\end{tabular} \\
\hline \begin{tabular}{l}
ehc-CID-Length \\
Indicates the length of the CID field for EHC packet. The value bits 7 indicates the length is 7 bits, and the value bits 15 indicates the length is 15 bits. Once the field ethernetHeaderCompression-r16 is configured for a DRB or a multicast MRB, the value of the field ehc-CID-Length for this DRB or multicast MRB is not reconfigured to a different value.
\end{tabular} \\
\hline \begin{tabular}{l}
ehc-Common \\
Indicates the configurations that apply for both downlink and uplink.
\end{tabular} \\
\hline \begin{tabular}{l}
ehc-Downlink \\
Indicates the configurations that apply for only downlink. If the field is configured, then Ethernet header compression is configured for downlink. Otherwise, it is not configured for downlink.
\end{tabular} \\
\hline \begin{tabular}{l}
ehc-Uplink \\
Indicates the configurations that apply for only uplink. If the field is configured, then Ethernet header compression is configured for uplnik. Otherwise, it is not configured for uplink.
\end{tabular} \\
\hline \begin{tabular}{l}
maxCID-EHC-UL \\
Indicates the value of the MAX_CID_EHC_UL parameter as specified in TS 38.323 [5]. The total value of MAX_CID_EHC_UL across all bearers for the UE should be less than or equal to the value of maxNumberEHC-Contexts parameter as indicated by the UE.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline UplinkDataCompression field descriptions \\
\hline \begin{tabular}{l}
bufferSize \\
This field indicates the buffer size applied for UDC as specified in TS 38.323 [5]. Value kbyte2 means 2048 bytes, kbyte 4 means 4096 bytes and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
dictionary \\
This field indicates which pre-defined dictionary is used for UDC as specified in TS 38.323 [5]. The value sip-SDP means that UE shall prefill the buffer with standard dictionary for SIP and SDP defined in TS 38.323 [5], and the value operator means that UE shall prefill the buffer with operator-defined dictionary.
\end{tabular} \\
\hline \begin{tabular}{l}
drb-ContinueUDC \\
Indicates whether the PDCP entity continues or resets the uplink data compression protocol during PDCP re-establishment, as specified in TS 38.323 [5]. The field is configured only in case of resuming an RRC connection or reconfiguration with sync, where the PDCP termination point is not changed and the fullConfig is not indicated.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 663  ---


3GPP TS 38.331 version 17.0.0 Release 17
662
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional presence & Explanation \\
\hline DRB & This field is mandatory present when the corresponding DRB/multicast MRB is being set up, absent for SRBs. Otherwise this field is optionally present, need M. \\
\hline DRB2 & This field is optionally present in case of DRB, need M. Otherwise, it is absent for SRBs and MRBs. \\
\hline Drb-Duplication & For SRBs, this field is absent. For DRBs with only one associated logical channel, this field is absent. Otherwise, this field is optional, need R. \\
\hline MoreThanOneRLC & \begin{tabular}{l}
This field is mandatory present upon RRC reconfiguration with setup of a PDCP entity for a radio bearer with more than one associated logical channel and upon RRC reconfiguration with the association of additional logical channels to the PDCP entity. \\
The field is also mandatory present in case the field moreThanTwoRLC-DRB is included in PDCP-Config. \\
Upon RRC reconfiguration when a PDCP entity is associated with multiple logical channels, this field is optionally present need M . Otherwise, this field is absent. Need R.
\end{tabular} \\
\hline More Than TwoRLC-DRB & \begin{tabular}{l}
For SRBs, this field is absent. \\
For DRBs, this field is mandatory present upon RRC reconfiguration with setup of a PDCP entity for a radio bearer with more than two associated logical channels and upon RRC reconfiguration with the association of one or more additional logical channel(s) to the PDCP entity so that the PDCP entity has more than two associated logical channels. \\
Upon RRC reconfiguration when a PDCP entity is associated with more than two logical channels, this field is optionally present, Need M . Otherwise, the field is absent, Need R.
\end{tabular} \\
\hline Ric-AM & For RLC AM, the field is optionally present, need M. Otherwise, the field is absent. \\
\hline Ric-AM-UM & In case of DRB, for RLC UM (if the UE supports DAPS handover) or RLC AM, the field is optionally present, need R. In case of multicast MRB, if multicast MRB is associated with at least one RLC AM entity, the field is optionally present, need R. Otherwise, the field is absent. \\
\hline Setup & The field is mandatory present in case of SRB or DRB setup. Otherwise the field is optionally present, need M. \\
\hline SplitBearer & The field is absent for SRBs. Otherwise, the field is optional present, need M , in case of radio bearer with more than one associated RLC mapped to different cell groups. \\
\hline SplitBearer2 & The field is mandatory present, in case of a split bearer. Otherwise the field is absent. \\
\hline ConnectedTo5GC & The field is optionally present, need R, if the UE is connected to 5GC. Otherwise the field is absent. \\
\hline ConnectedTo5GC1 & The field is optionally present, need R, if the UE is connected to NR/5GC or if the UE supports user plane integrity protection when connected to E-UTRA/EPC (as specified in TS 33.401 [30]). Otherwise the field is absent. \\
\hline Setup1 & This field is mandatory present in case of SRB and DRB setup for RLC-AM and RLC-UM. Otherwise, this field is absent, Need M. \\
\hline Setup2 & This field is mandatory present in case for radio bearer setup for RLC-AM and RLC-UM. Otherwise, this field is absent, Need M. \\
\hline SetupOnlyMRB & This field is mandatory present in case of multicast MRB setup. Otherwise, this field is absent, Need N. \\
\hline
\end{tabular}
- PDSCH-Config

The PDSCH-Config IE is used to configure the UE specific PDSCH parameters. If this IE is used for MBS CFR, the following fields shall be absent: minimumSchedulingOffsetK0, antennaPortsFieldPresenceDCI-1-2, aperiodicZP-CSI-RS-ResourceSetsToAddModListDCI-1-2, aperiodicZP-CSI-RS-ResourceSetsToReleaseListDCI-1-2, dmrs-DownlinkForPDSCH-MappingTypeA-DCI-1-2, dmrs-DownlinkForPDSCH-MappingTypeB-DCI-1-2, dmrs-SequenceInitializationDCI-1-2, harq-ProcessNumberSizeDCI-1-2, mcs-TableDCI-1-2, numberOfBitsForRV-DCI-1-2, pdsch-AggregationFactor, pdsch-TimeDomainAllocationListDCI-1-2, prb-BundlingTypeDCI-1-2, priority[ndicatorDCI-1-2, rateMatchPatternGroup1DCI-1-2, rateMatchPatternGroup2DCI-1-2, resourceAllocationType1GranularityDCI-1-2, vrb-ToPRB-InterleaverDCI-1-2, referenceOfSLIVDCI-1-2, resourceAllocationDCI-1-2, dataScramblingIdentityPDSCH2-r16, repetitionSchemeConfig.

PDSCH-Config information element

-- ASNISTART
ETSI


--- Page 664  ---


3GPP TS 38.331 version 17.0.0 Release 17
663
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-PDSCH-CONFIG-START
PDSCH-Config ::= SEQUENCE \
    dataScramblingIdentityPDSCH
    dmrs-DownlinkForPDSCH-MappingTypeA
    dmrs-DownlinkForPDSCH-MappingTypeB SetupRelease { DMRS-DownlinkConfig}
    tci-StatesToAddModList
    tci-StatesToReleaseList
    vrb-ToPRB-Interleaver
    resourceAllocation
    pdsch-TimeDomainAllocationList
    pdsch-AggregationFactor
    rateMatchPatternToAddModList
    rateMatchPatternToReleaseList
    rateMatchPatternGroupl
    rateMatchPatternGroup2
    rbg-Size
    mcs-Table
    maxNrofCodeWordsScheduledByDCI
    prb-BundlingType
        staticBundling
            bundleSize
        },
        dynamicBundling
            bundleSizeSetl
            bundleSizeSet2
        }
    },
```

```
    zp-CSI-RS-ResourceToReleaseList
                    SEQUENCE (SIZE (1..maxNrofZP-CSI-RS-Resources)) OF ZP-CSI-RS-ResourceId
```

```
                    OPTIONAL, -- Need N
```

```
                    OPTIONAL, -- Need N
    sp-ZP-CSI-RS-ResourceSetsToAddModList SEQUENCE (SIZE (l..maxNrofZP-CSI-RS-ResourceSets)) OF ZP-CSI-RS-ResourceSet
                OPTIONAL, -- Need. N
```

```
                OPTIONAL, -- Need. N
    p-ZP-CSI-RS-ResourceSet SetupRelease { ZP-CSI-RS-ResourceSet}
                    OPTIONAL, -- Need. M
    ...,
    [ [
    maxMIMO-Layers-rl6
    minimumSchedulingOffsetKO-rl6
    -- Start of the parameters for DCI format l_2 introduced in Vl6.1.0
```

```
                        OPTIONAL, -- Need. N
```


ETSI


--- Page 665  ---


3GPP TS 38.331 version 17.0.0 Release 17
664
ETSI TS 138331 V17.0.0 (2022-05)
```
    OPTIONAL, -- Need. N
```

```
pdsch-TimeDomainAllocationListDCI-1-2-rl6 SetupRelease { PDSCH-TimeDomainResourceAllocationList-rl6}
prb-BundlingTypeDCI-1-2-r16 CHOICE {
    staticBundling-rl6 SEQUENCE {
```

```
    },
    dynamicBundling-rl6 SEQUENCE {
```

```
    }
```

```
-- End of the parameters for DCI format 1_2 introduced in V16.1.0
```

```
]],
[ [
```

```
]],
[ [
```

```
dl-OrJoint-TCIState CHOICE {
    lists
        dl-orJoint-TCIState-ToAddModList-rl7 SEQUENCE (SIZE (l..max-DLorJointTCI-rl7)) OF DLorJoint-TCIState-rl7
                    OPTIONAL, -- Need. N
        dl-orJoint-TCIState-ToReleaseList-rl7 SEQUENCE (SIZE (1..max-DLorJointTCI-rl7)) OF TCI-StateId.
                        OPTIONAL -- Need. N
    },
    refUnifiedTCIStateList-rl7 RefUnifiedTCIStateList-rl7
```

```
                            sparel} OPTIONAL, -- Need. R
```


ETSI


--- Page 666  ---


3GPP TS 38.331 version 17.0.0 Release 17
665
ETSI TS 138331 V17.0.0 (2022-05)
```
    pdsch-Ti
    pdsch-TimeDomainAllocationListDCI-1-2-rl7
    dmrs-FD-OCC-DisabledForRankl-PDSCH-rl7
    minimumSchedulingOffsetKO-rl7
    harq-ProcessNumberSizeDCI-l-2-vl700
    harq-ProcessNumberSizeDCI-l-l-rl7
    mcs-Table-rl7
    mcs-Tabl
    ENUMERATED {qaml024}
    priorityIndicatorDCI-4-2-rl7
    sizeDCI-4-2-rl7
    ]]
}
RateMatchPatternGroup ::= SEQUENCE (SIZE (l..maxNrofRateMatchPatternsPerGroup)) OF CHOICE (
    cellLevel RateMatchPatternId,
    bwpLevel RateMatchPatternId
}
```

```
MaxMIMO-LayersDL-r16 ::= INTEGER (1..8)
RefUnifiedTCIStateList-rl7 ::= SEQUENCE {
    servingcell-rl7 ServCellIndex,
    bwp-rl7 BWP-Id
}
-- TAG-PDSCH-CONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 667  ---


3GPP TS 38.331 version 17.0.0 Release 17
666
ETSI TS 138331 V17.0.0 (2022-05)

PDSCH-Config field descriptions
antennaPortsFieldPresenceDCI-1-2
Configure the presence of "Antenna ports" field in DCI format 1_2. When the field is configured, then the "Antenna ports" field is present in DCI format 1_2. Otherwise, the field size is set to 0 for DCI format \( 1 \_2 \) (See TS 38.212 [17], clause 7.3.1.1.3). If neither dmrs-DowninkForPDSCH-MappingTypeA-DCI-1-2 nor dmrs-DownlinkForPDSCH-MappingTypeB-DCI-1-2 is configured, this field is absent.
aperiodic-ZP-CSI-RS-ResourceSetsToAddModList, aperiodic-ZP-CSI-RS-ResourceSetsToAddModListDCI-1-2
AddMod/Release lists for configuring aperiodically triggered zero-power CSI-RS resource sets. Each set contains a ZP-CSI-RS-ResourceSet/d and the IDs of one or more ZP-CSI-RS-Resources (the actual resources are defined in the \( 2 p \)-CSI-RS-ResourceToAddModList). The network configures the UE with at most 3 aperiodic ZP-CSI-RSResourceSets and it uses only the ZP-CSI-RS-ResourceSettd 1 to 3 . The network triggers a set by indicating its ZP-CSI-RS-ResourceSettd in the DCI payload. The DCI codepoint '01' triggers the resource set with ZP-CSI-RS-ResourceSet/d 1, the DCI codepoint '10' triggers the resource set with ZP-CSI-RS-ResourceSet/d 2, and the DCI codepoint '11' triggers the resource set with ZP-CSI-RS-ResourceSet/d 3 (see TS 38.214 [19], clause 5.1.4.2). The field aperiodic-ZP-CSI-RS-ResourceSetsToAddModList applies to DCI format 1_1 and the field aperiodic-ZP-CSI-RS-ResourceSets ToAddModListDCI-1-2 applies to DCI format \( 1 \_2 \) (see TS 38.214 [19], clause 5.1.4.2 and TS 38.212 [17] clause 7.3.1).
beamAppTime
Indicates the first slot to apply the unified TCI indicated by DCI as specified in TS 38.214 Clause 5.1.5. The value n1 means 1 symbol, n2 two symbols and so on. The first slot is at least \( Y \) symbols indicated by beamAppTime parameter after the last symbol of the acknowledgment of the joint or separate DLUL beam indication. The same value shall be configured for all serving cells in any one of the simultaneousU-TCI-UpdateListN configured in IE CellGroupConfig based on the smallest SCS of the active BWP.
dataScramblingidentityPDSCH, dataScramblingidentityPDSCH2
Identifier(s) used to initialize data scrambling (c_init) for PDSCH as specified in TS 38.211 [16], clause 7.3.1.1. The dataScrambling/dentityPDSCH2 is configured if coresetPoollndex is configured with 1 for at least one CORESET in the same BWP.
di-OrJoint-TCIState-ToAddModList
A list of Transmission Configuration Indicator (TCI) states indicating a transmission configuration which includes QCL-relationships between the DL RSs in one RS set and the PDSCH DMRS ports (see TS 38.214 [19], clause 5.1.5).
dmrs-DownlinkForPDSCH-MappingTypeA, dmrs-DownlinkForPDSCH-MappingTypeA-DCI-1-2
DMRS configuration for PDSCH transmissions using PDSCH mapping type A (chosen dynamically via PDSCH-TimeDomainResourceAllocation). Only the fields dmrs-Type, dmrs-AdditionalPosition and maxLength may be set differently for mapping type A and B. The field dmrs-DownlinkForPDSCH-MappingTypeA applies to DCI format 1_1 and the field dmrs-DowninkForPDSCH-MappingTypeA-DCI-1-2 applies to DCI format \( 1 \_2 \) (see TS 38.212 [17], clause 7.3.1).
dmrs-DownlinkForPDSCH-MappingTypeB, dmrs-DownlinkForPDSCH-MappingTypeB-DCI-1-2
DMRS configuration for PDSCH transmissions using PDSCH mapping type B (chosen dynamically via PDSCH-TimeDomainResourceAllocation). Only the fields dmrs-Type, dmrs-AdditionalPosition and maxLength may be set differently for mapping type A and B. The field dmrs-DownilikForPDSCH-MappingTypeB applies to DCI format 1_1 and the field dmrs-DownilikForPDSCH-MappingTypeB-DCI-1-2 applies to DCI format 1 _ 2 (see TS 38.212 [17], clause 7.3.1).
dmrs-FD-OCC-DisabledForRank1-PDSCH
If configured, the UE may assume that the set of remaining orthogonal antenna ports, which are within the same code division multiplexing (CDM) group and have different frequency domain orthogonal cover codes (FD-OCC), are not associated with the PDSCH of another UE (see TS 38.214 [19], clause 5.1.6.2). It is applicable for PDSCH SCS of 480 and 960 kHz when rank 1 PDSCH with type-1 or type-2 DMRS is scheduled.
dmrs-SequencelnitializationDCI-1_2
Configure whether the field "DMRS Sequence Initialization" is present or not in DCI format 1_2 If the field is absent, then the UE applies the value of 0 bit for the field "DMRS Sequence Initialization" in DCI format 1_2. If the field is present, then the UE applies the value of 1 bit as in DCI format 1 _ 2 (see TS 38.212 [17], clause 7.3.1).
harq-ProcessNumberSizeDCI-1-2
Configure the number of bits for the field "HARQ process number" in DCI format 1_2 (see TS 38.212 [17], clause 7.3.1).
maxMMMO-Layers
Indicates the maximum number of MIMO layers to be used for PDSCH in this DL BWP. If not configured, the UE uses the maxMIMO-Layers configuration in IE PDSCHServingCellConfig of the serving cell to which this BWP belongs, when the UE operates in this BWP. The value of maxMIMO-Layers for a DL BWP shall be smaller than or equal to the value of maxMIMO-Layers configured in IE PDSCH-ServingCellConfig of the serving cell to which this BWP belongs.
For MBS multicast, indicates the maximum number of MIMO layers to be used for group-common PDSCH of MBS multicast in this CFR. If not configured for CFR, the UE applies value 1. The value of maxMIMO-Layers for a CFR shall be smaller than or equal to the value of maxMIMO-Layers configured in PDSCH-ServingCellConfig IE of the serving cell to which this CFR belongs.

ETSI


--- Page 668  ---


3GPP TS 38.331 version 17.0.0 Release 17
667
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
maxNrofCodeWordsScheduledByDCI \\
Maximum number of code words that a single DCI may schedule. This changes the number of MCS/RV/NDI bits in the DCI message from 1 to 2.
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-Table \\
Indicates which MCS table the UE shall use for PDSCH for DCI formats 1_0 and 1_1 (see TS 38.214 [19], clause 5.1.3.1). If all fields are absent the UE applies the value 64QAM. If the field mcs-Table-r17 is present for DCI format 1_1, the network does not configure the field mcs-Table (without suffix). For a RedCap UE, the 256QAM MCS table for PDSCH is only supported if the UE indicates support of 256QAM for PDSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-TableDCI-1-2 \\
Indicates which MCS table the UE shall use for PDSCH for DCI format 1_2 (see TS 38.214 [19], clause 5.1.3.1). If all fields are absent the UE applies the value 64QAM. If the field mcs-TableDCI-1-2-r17 is present, the network does not configure the field mcs-TableDCI-1-2-r16. For a RedCap UE, the 256QAM MCS table for PDSCH is only supported if the UE indicates support of 256QAM for PDSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
minimumScheduling OffsetKO \\
List of minimum K0 values. Minimum K0 parameter denotes minimum applicable value(s) for the TDRA table for PDSCH and for A-CSI RS triggering Offset(s) (see TS 38.214 [19], clause 5.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfBitsForRV-DCI-1-2 \\
Configures the number of bits for "Redundancy version" in the DCI format 1 _ 2 (see TS 38.212 [17], clause 7.3 .1 and TS 38.214 [19], clause 5.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-AggregationFactor \\
Number of repetitions for data (see TS 38.214 [19], clause 5.1.2.1). When the field is absent in PDSCH-Config which is not used for MBS CFR, the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-HARQ-ACK-EnhType3DCI-1-2 \\
When configured, enhanced Type 3 HARQ-ACK codebook triggering by DCI format 1_2 is enabled.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-HARQ-ACK-EnhType3DCI-Field-1-2 \\
Enables the enhanced Type 3 codebook through a new DCI field to indicate the enhanced Type 3 HARQ-ACK codebook in DCI format 1 _2 if the more than one enhanced Type 3 HARQ-ACK codebook is configured for the primary PUCCH cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-HARQ-ACK-OneShotFeedbackDCI-1-2 \\
When configured, DCI format 1_2 can request the UE to report A/N for all HARQ processes and all component carriers configured in the PUCCH group (see TS 38.212 [17], clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-HARQ-ACK-RetxDCI-1-2 \\
When configured, DCI format 1 _ 2 can request the UE to perform a HARQ-ACK re-transmission on a PUCCH resource (see TS 38.213 [13], clause 9.1.5).
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-TimeDomainAllocationList, pdsch-TimeDomainAllocationListDCI-1-2, pdsch-TimeDomainAllocationListForMultiPDSCH \\
List of time-domain configurations for timing of DL assignment to DL data. \\
The field pdsch-TimeDomainAllocationList (with or without suffix) applies to DCI format 1_0 and DCI format 1_1 (see table 5.1.2.1.1-1 in TS 38.214 [19]), and if the field pdsch-TimeDomainAllocationListDCI-1-2 is not configured, to DCI format 1_2. If the field pdsch-TimeDomainAllocationListDCI-1-2 is configured, it applies to DCI format 1_2 (see table 5.1.2.1.1-1A in TS 38.214 [19]). The field pdsch-TimeDomainAllocationListForMultiPDSCH applies to DCI format 1_1. The network does not configure the pdsch-TimeDomainAllocationList-r16 simultaneously with the pdsch-TimeDomainAllocationList (without suffix) in the same PDSCH-Config.
\end{tabular} \\
\hline \begin{tabular}{l}
prb-BundlingType, prb-BundlingTypeDCI-1-2 \\
Indicates the PRB bundle type and bundle size(s) (see TS 38.214 [19], clause 5.1.2.3). If dynamic is chosen, the actual bundleSizeSet1 or bundleSizeSet2 to use is indicated via DCI. Constraints on bundleSize(Set) setting depending on vrb-ToPRB-Interleaverand mg-Size settings are described in TS 38.214 [19], clause 5.1.2.3. If a bundleSize(Set) value is absent, the UE applies the value \( n 2 \). The field prb-BundlingType applies to DCI format 1_1, and the field prb-Bundling TypeDCI-1-2 applies to DCI format 1 _ 2 (see TS 38.212 [17], clause 7.3.1 and TS 38.214 [19], clause 5.1.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
priorityindicatorDCI-1-1, priorityindicatorDCI-1-2, priorityindicatorDCI-4-2 \\
Configure the presence of "priority indicator" in DCI format 1_1/1_2/4_2. When the field is absent in the IE, then 0 bit for "priority indicator" in DCI format 1_1/1_2/4_2. The field priority/ndicatorDCI-1-1 applies to DCI format 1_1, the field priority/ndicatorDCI-1-2 applies to DCI format 1_2 and the field priority/ndicatorDCI-4-2 applies to DCI format 4_2, respectively (see TS 38.212 [17], clause 7.3.1 and TS 38.213 [13] clause 9).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-sSCellDynDCI-1-2 \\
When configured, PUCCH cell switching based on dynamic indication in DCI format 1 _2 is enabled (see TS 38.213 [13], clause 9.A).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 669  ---


3GPP TS 38.331 version 17.0.0 Release 17
668
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
p-ZP-CSI-RS-ResourceSet \\
A set of periodically occurring ZP-CSI-RS-Resources (the actual resources are defined in the zp-CSI-RS-ResourceToAddModList). The network uses the ZP-CSI-RSResourceSetld=0 for this set. \\
If \( p \)-ZP-CSI-RS-ResourceSet is configured in both PDSCH-Config for MBS CFR and PDSCH-Config for the assoicated BWP, it is subject to UE capability whether the \( p \)-ZP-CSI-RS-ResourceSet configured in PDSCH-Config for MBS CFR can be different from the \( p \)-ZP-CSI-RS-ResourceSet configured in PDSCH-Config for the assoicated BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
rateMatchPatternGroup1, rateMatchPatternGroup1DCI-1-2 \\
The IDs of a first group of RateMatchPatterns defined in PDSCH-Config->rateMatchPattern ToAddModList (BWP Ievel) or in ServingCellConfig - \\
>rateMatchPatternToAddModList (cell level). These patterns can be activated dynamically by DCI (see TS 38.214 [19], clause 5.1.4.1). The field rateMatchPatternGroup1 applies to DCI format 1_1, and the field rateMatchPatternGroup1DCI-1-2 applies to DCI format 1_2 (see TS 38.214 [19], clause 5.1.4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
rateMatchPatternGroup2, rateMatchPatternGroup2DCI-1-2 \\
The IDs of a second group of RateMatchPatterns defined in PDSCH-Config->rateMatchPatternToAddModList (BWP Ievel) or in ServingCellConfig >rateMatchPatternToAddModList (cell level). These patterns can be activated dynamically by DCI (see TS 38.214 [19], clause 5.1.4.1). The field rateMatchPatternGroup2 applies to DCI format 1_1, and the field rateMatchPatternGroup2DCI-1-2 applies to DCI format 1 _ 2 (see TS 38.214 [19], clause 5.1.4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
rateMatchPatternToAddModList \\
Resources patterns which the UE should rate match PDSCH around. The UE rate matches around the union of all resources indicated in the rate match patterns (see TS 38.214 [19], clause 5.1.4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
ng-Size \\
Selection between config 1 and config 2 for RBG size for PDSCH. The UE ignores this field if resourceAllocation is set to resourceAllocation Type 1 (see TS 38.214 [19], clause 5.1.2.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
referenceOfSLIVDCI-1-2 \\
Enable using the starting symbol of the PDCCH monitoring occasion in which the DL assignment is detected as the reference of the SLIV for DCI format 1_2. When the RRC parameter enables the utilization of the new reference, the new reference is applied for TDRA entries with \( \mathrm{K} 0=0 \). For other entries (if any) in the same TDRA table, the reference is slot boundary as in Rel-15. PDSCH mapping type A is not supported with the new reference. The new reference of SLIV is not configured for a serving cell configured to be scheduled by cross-carrier scheduling on a scheduling cell with different numerology (see TS 38.212 [17] clause 7.3.1 and TS 38.214 [19] clause 5.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
refUnifiedTCIStateList \\
Provides the serving cell and BWP where the configuration for DLorJoint-TCIState-ToAddModList-r17 in this IE or ul-TCIState-ToAddModList in IE BWP-UplinkDedicated is for this serving cell and BWP. When this field is present, DLorJoint-TCIState-ToAddModList and DLorJoint-TCIState-ToReleaseList are not present.
\end{tabular} \\
\hline \begin{tabular}{l}
repetitionSchemeConfig \\
Configure the UE with repetition schemes. The network does not configure repetitionSchemeConfig-r16 and repetitionSchemeConfig-v1630 simultaneously to setup in the same PDSCH-Config.
\end{tabular} \\
\hline \begin{tabular}{l}
resourceAllocation, resourceAllocationDCI-1-2 \\
Configuration of resource allocation type 0 and resource allocation type 1 for non-fallback DCI (see TS 38.214 [19], clause 5.1.2.2). The field resourceAllocation applies to DCI format 1_1, and the field resourceAllocationDCI-1-2 applies to DCI format \( 1 \_2 \) (see TS 38.214 [19], clause 5.1.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceAllocationType1GranularityDCI-1-2 \\
Configure the scheduling granularity applicable for both the starting point and length indication for resource allocation type 1 in DCI format 1_2. If this field is absent, the granularity is 1 PRB (see TS 38.214 [19], clause 5.1.2.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
sfnSchemePdsch \\
This parameter is used to configure SFN scheme for PDSCH: sfnSchemeA or sfnSchemeB as specified in TS 38.xxx. The field can be configured only for BWPDownlinkDedicated.
\end{tabular} \\
\hline \begin{tabular}{l}
sizeDCI-4-2 \\
Indicates the Size of DCI format 4-2 (see TS 38.213 [13], clause 10.1).
\end{tabular} \\
\hline \begin{tabular}{l}
sp-ZP-CSI-RS-ResourceSets ToAddModList \\
AddMod/Release lists for configuring semi-persistent zero-power CSI-RS resource sets. Each set contains a ZP-CSI-RS-ResourceSet/d and the IDs of one or more ZP-CSI-RS-Resources (the actual resources are defined in the zp-CSI-RS-ResourceToAddModList) (see TS 38.214 [19], clause 5.1.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
tci-StatesToAddModList \\
A list of Transmission Configuration Indicator (TCI) states indicating a transmission configuration which includes QCL-relationships between the DL RSs in one RS set and the PDSCH DMRS ports (see TS 38.214 [19], clause 5.1.5).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 670  ---


3GPP TS 38.331 version 17.0.0 Release 17
669
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
vrb-ToPRB-interleaver, vrb-ToPRB-interleaverDCI-1-2 \\
Interleaving unit configurable between 2 and 4 PRBs (see TS 38.211 [16], clause 7.3.1.6). When the field is absent, the UE performs non-interleaved VRB-to-PRB mapping.
\end{tabular} \\
\hline \begin{tabular}{l}
xOverheadMulticast \\
Accounts for an overhead from CSI-RS, CORESET etc. If the field is absent, the UE applies value xOh0 (see TS 38.214 [19]).
\end{tabular} \\
\hline \begin{tabular}{l}
zp-CSI-RS-ResourceToAddModList \\
A list of Zero-Power (ZP) CSI-RS resources used for PDSCH rate-matching. Each resource in this list may be referred to from only one type of resource set, i.e., aperiodic, semi-persistent or periodic (see TS 38.214 [19]).
\end{tabular} \\
\hline
\end{tabular}
- PDSCH-ConfigCommon

The IE PDSCH-ConfigCommon is used to configure cell specific PDSCH parameters.
PDSCH-ConfigCommon information element
```
-- ASNISTART
-- TAG-PDSCH-CONFIGCOMMON-START
PDSCH-ConfigCommon ::= SEQUENCE \
    pdsch-TimeDomainAllocationList
    ...
}
-- TAG-PDSCH-CONFIGCOMMON-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PDSCH-ConfigCommon field descriptions \\
\hline pdsch-TimeDomainAllocationList \\
List of time-domain configurations for timing of DL assignment to DL data (see table 5.1.2.1.1-1 in TS 38.214 [19]). \\
\hline
\end{tabular}
- PDSCH-ServingCellConfig

The IE PDSCH-ServingCellConfig is used to configure UE specific PDSCH parameters that are common across the UE's BWPs of one serving cell.
PDSCH-ServingCellConfig information element
```
-- ASNISTART
-- TAG-PDSCH-SERVINGCELLCONFIG-START
PDSCH-ServingCellConfig ::=
    codeBlockGroupTransmission
    xOverhead.
    nrofHARQ-ProcessesForPDSCH
    pucch-Cell
    ...,
    [ [
```

```
SEQUENCE {
    SetupRelease { PDSCH-CodeBlockGroupTransmission}
    ENUMERATED { xOh6, xOhl2, xOhl8}
    ENUMERATED {n2, n4, n6, nl0, nl2, nl6}
    ServCellIndex
```

```
OPTIONAL, -- Need. M
OPTIONAL, -- Need. S
OPTIONAL, -- Need. S
OPTIONAL, -- Cond SCellAddOnly
```


ETSI


--- Page 671  ---


3GPP TS 38.331 version 17.0.0 Release 17
670
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]],
    [ [
```

```
    ]],
    [ [
```

```
    ]]
}
PDSCH-CodeBlockGroupTransmission ::= SEQUENCE [
    maxCodeBlockGroupsPerTransportBlock ENUMERATED {n2, n4, n6, n8},
    codeBlockGroupFlushIndicator BOOLEAN,
    ...
}
PDSCH-CodeBlockGroupTransmissionList-rl6 := SEQUENCE (SIZE (1..2)) OF PDSCH-CodeBlockGroupTransmission
-- TAG-PDSCH-SERVINGCELLCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PDSCH-CodeBlockGroupTransmission field descriptions \\
\hline \begin{tabular}{l}
codeBlockGroupFlushindicator \\
Indicates whether CBGFI for CBG based (re)transmission in DL is enabled (true). (see TS 38.212 [17], clause 7.3.1.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
maxCodeBlockGroupsPerTransportBlock \\
Maximum number of code-block-groups (CBGs) per TB. In case of multiple CW, the maximum CBG is 4 (see TS 38.213 [13], clause 9.1.1).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 672  ---


3GPP TS 38.331 version 17.0.0 Release 17
671
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PDSCH-ServingCellConfig field descriptions \\
\hline \begin{tabular}{l}
codeBlockGroupTransmission \\
Enables and configures code-block-group (CBG) based transmission (see TS 38.213 [13], clause 9.1.1). Network does not configure for a UE both spatial bundling of HARQ ACKs and codeBlockGroupTransmission within the same cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
downlinkHARQ-FeedbackDisabled \\
Used to disable the DL HARQ feedback, sent in the uplink, per HARQ process ID. The first/leftmost bit corresponds to HARQ process ID 0 , the next bit to HARQ process ID 1 and so on. Bits corresponding to HARQ process IDs that are not configured shall be ignored. The bit(s) set to one identify HARQ processes with disabled DL HARQ feedback and the bit(s) set to zero identify HARQ processes with enabled DL HARQ feedback.
\end{tabular} \\
\hline \begin{tabular}{l}
maxMIMO-Layers \\
Indicates the maximum number of MIMO layers to be used for PDSCH in all BWPs of this serving cell. (see TS 38.212 [17], clause 5.4.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofHARQ-ProcessesForPDSCH \\
The number of HARQ processes to be used on the PDSCH of a serving cell. Value \( n 2 \) corresponds to 2 HARQ processes, value \( n 4 \) to 4 HARQ processes, and so on. If the field is absent, the UE uses 8 HARQ processes (see TS 38.214 [19], clause 5.1).
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-CodeBlockGroupTransmissionList \\
A list of configurations for up to two simultaneously constructed HARQ-ACK codebooks (see TS 38.213 [13], clause 9.3).
\end{tabular} \\
\hline \begin{tabular}{l}
processingTypeZEnabled \\
Enables configuration of advanced processing time capability 2 for PDSCH (see 38.214 [19], clause 5.3).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-Cell \\
The ID of the serving cell (of the same cell group) to use for PUCCH. If the field is absent, the UE sends the HARQ feedback on the PUCCH of the SpCell of this cell group, or on this serving cell if it is a PUCCH SCell.
\end{tabular} \\
\hline \begin{tabular}{l}
xOverhead \\
Accounts for overhead from CSI-RS, CORESET, etc. If the field is absent, the UE applies value xOh0 (see TS 38.214 [19], clause 5.1.3.2).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline SCellAddOnly & \begin{tabular}{l} 
It is optionally present, Need S, for (non-PUCCH) SCells when adding a new SCell. The field is absent, Need M, when \\
reconfiguring SCells. The field is also absent for the SpCells as well as for a PUCCH SCell.
\end{tabular} \\
\hline
\end{tabular}
- PDSCH-TimeDomainResourceAllocationList

The IE PDSCH-TimeDomainResourceAllocation is used to configure a time domain relation between PDCCH and PDSCH. The PDSCH-TimeDomainResourceAllocationList contains one or more of such PDSCH-TimeDomainResourceAllocations. The network indicates in the DL assignment which of the configured time domain allocations the UE shall apply for that DL assignment. The UE determines the bit width of the DCI field based on the number of entries in the PDSCH-TimeDomainResourceAllocationList. Value 0 in the DCI field refers to the first element in this list, value 1 in the DCI field refers to the second element in this list, and so on.

PDSCH-TimeDomainResourceAllocationList information element
-- ASNISTART
-- TAG-PDSCH-TIMEDOMAINRESOURCEALLOCATIONLIST-START

PDSCH-TimeDomainResourceAllocation : := SEQUENCE [
kO INTEGER(0. 32)
OPTIONAL, -- Need. S
mappingType ENUMERATED \{typeA, typeB\},

ETSI


--- Page 673  ---


3GPP TS 38.331 version 17.0.0 Release 17
672
ETSI TS 138331 V17.0.0 (2022-05)
```
    startSymbolAndLength INTEGER (0..127)
}
```

```
PDSCH-TimeDomainResourceAllocation-rl6 ::= SEQUENCE [
```

```
    mappingType-rl6 ENUMERATED {typeA, typeB},
    startSymbolAndLength-rl6 INTEGER (0..127),
```

```
    ...
}
```

```
MultiPDSCH-TimeDomainResourceAllocation-rl7 ::= SEQUENCE {
```

```
    ...
}
PDSCH-TimeDomainResourceAllocation-rl7 ::= SEQUENCE {
    kO-rl7
    mappingType-rl7 ENUMERATED {typeA, typeB},
    startSymbolAndLength-rl7 INTEGER (0..127),
```

```
    \cdots
}
-- TAG-PDSCH-TIMEDOMAINRESOURCEALLOCATIONLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PDSCH-TimeDomainResourceAllocation field descriptions \\
\hline \begin{tabular}{l}
\( \boldsymbol{k} \mathbf{0} \) \\
Slot offset between DCI and its scheduled PDSCH (see TS 38.214 [19], clause 5.1.2.1). For k0-r17, only values \{0.32\} are applicable for PDSCH SCS of 120 kHz. When the field is absent the UE applies the value 0 .
\end{tabular} \\
\hline \begin{tabular}{l}
mappingType \\
PDSCH mapping type (see TS 38.214 [19], clause 5.3).
\end{tabular} \\
\hline \begin{tabular}{l}
repetitionNumber \\
Indicates the number of PDSCH transmission occasions for slot-based repetition scheme in IE RepetitionSchemeConfig. The parameter is used as specified in 38.214 [19]. \\
This field is not present when PDSCH-TimeDomainResourceAllocation-r16 is included in SIB20.
\end{tabular} \\
\hline \begin{tabular}{l}
startSymbolAndLength \\
An index giving valid combinations of start symbol and length (jointly encoded) as start and length indicator (SLIV). The network configures the field so that the allocation does not cross the slot boundary (see TS 38.214 [19], clause 5.1.2.1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline MultiPDSCH-TimeDomainResourceAllocation field descriptions \\
\hline pdsch-AllocationList \\
One or multiple PDSCHs which can be in consecutive or non-consecutive slots (see TS 38.214 [19], clause 5.1.2.1). \\
\hline
\end{tabular}

ETSI


--- Page 674  ---


3GPP TS 38.331 version 17.0.0 Release 17
673
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline Formats1-Oand1-1 & \begin{tabular}{l} 
In pdsch-TimeDomainResourceAllocationList-r16, this field is optionally present, Need R. \\
In pdsch-TimeDomainResourceAllocationList-r17, this field is optionally present, Need R. \\
In pdsch-TimeDomainAllocationListDCI-1-2 and pdsch-TimeDomainAllocationListForMutiPDSCH, this field is absent.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) PHR-Config

The IE PHR-Config is used to configure parameters for power headroom reporting.
PHR-Config information element
```
-- ASNISTART
-- TAG-PHR-CONFIG-START
```

```
PHR-Config ::=
    phr-PeriodicTimer
    phr-ProhibitTimer
    phr-Tx-PowerFactorChange
    multiplePHR
    dumany
    phr-Type20therCell
    phr-ModeOtherCG
    ...;
    [ [
    mpe-Reporting-FR2-r16
    ]],
    [ [
    mpe-Reporting-FR2-r17
    twoPHRMode-rl7
    ] ]
}
MPE-Config-FR2-r16 ::= SEQUENCE \
    mpe-ProhibitTimer-r16
    mpe-Threshold-rl6
}
MPE-Config-FR2-rl7 ::=
    mpe-ProhibitTimer-rl7
    mpe-Threshold-rl7
    numberOfN-rl7
    mpe-ResourcePool-rl7
    ...
}
MPE-Resource-rl7 ::=
    mpe-ResourceId-rl7
    cell
    mpe-ReferenceSignal-rl7
        csi-RS-Resource-rl7
        Csi-RS-Resource-rl7 NZP-CSI-RS-ResourceId,
```


ETSI


--- Page 675  ---


3GPP TS 38.331 version 17.0.0 Release 17
674
ETSI TS 138331 V17.0.0 (2022-05)

ssb-Resource-rl7
SSB-Index
    \}
\}
-- TAG-PHR-CONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline PHR-Config field descriptions \\
\hline \begin{tabular}{l}
dummy \\
This field is not used in this version of the specification and the UE ignores the received value.
\end{tabular} \\
\hline \begin{tabular}{l}
mpe-ProhibitTimer \\
Value in number of subframes for MPE reporting, as specified in TS 38.321 [3]. Value sf10 corresponds to 10 subframes, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
mpe-Reporting-FR2 \\
Indicates whether the UE shall report MPE P-MPR in the PHR MAC control element, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
mpe-ResourcePool \\
List of SSB/CSI-RS resources for P-MPR reporting. Each resource is configured with serving cell index where the resource is configured for the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
mpe-Threshold \\
Value of the P-MPR threshold in dB for reporting MPE P-MPR when FR2 is configured, as specified in TS 38.321 [3]. The same value applies for each serving cell (although the associated functionality is performed independently for each cell).
\end{tabular} \\
\hline \begin{tabular}{l}
multiplePHR \\
Indicates if power headroom shall be reported using the Single Entry PHR MAC control element or Multiple Entry PHR MAC control element defined in TS 38.321 [3]. True means to use Multiple Entry PHR MAC control element and False means to use the Single Entry PHR MAC control element defined in TS 38.321 [3]. The network configures this field to true for MR-DC and UL CA for NR, and to false in all other cases.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfN \\
Number of reported P-MPR values in a PHR MAC CE.
\end{tabular} \\
\hline \begin{tabular}{l}
phr-ModeOtherCG \\
Indicates the mode (i.e. real or virtual) used for the PHR of the activated cells that are part of the other Cell Group (i.e. MCG or SCG), when DC is configured. If the UE is configured with only one cell group (no DC), it ignores the field.
\end{tabular} \\
\hline \begin{tabular}{l}
phr-PeriodicTimer \\
Value in number of subframes for PHR reporting as specified in TS 38.321 [3]. Value sf10 corresponds to 10 subframes, value sf20 corresponds to 20 subframes, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
phr-ProhibitTimer \\
Value in number of subframes for PHR reporting as specified in TS 38.321 [3]. Value sfO corresponds to 0 subframe, value sf10 corresponds to 10 subframes, value sf20 corresponds to 20 subframes, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
phr-Tx-PowerFactorChange \\
Value in dB for PHR reporting as specified in TS 38.321 [3]. Value \( d B 1 \) corresponds to \( 1 \mathrm{~dB}, d B 3 \) corresponds to 3 dB and so on. The same value applies for each serving cell (although the associated functionality is performed independently for each cell).
\end{tabular} \\
\hline \begin{tabular}{l}
phr-Type2OtherCell \\
If set to true, the UE shall report a PHR type 2 for the SpCell of the other MAC entity. See TS 38.321 [3], clause 5.4.6. Network sets this field to false if the UE is not configured with an E-UTRA MAC entity.
\end{tabular} \\
\hline \begin{tabular}{l}
twoPHRMode \\
Indicates if the power headroom shall be reported as two PHRs (each PHR associated with a SRS resource set) is enabled or not.
\end{tabular} \\
\hline
\end{tabular}
- PhysCellld

The PhysCellld identifies the physical cell identity (PCI).

ETSI


--- Page 676  ---


3GPP TS 38.331 version 17.0.0 Release 17
675
ETSI TS 138331 V17.0.0 (2022-05)

PhysCellid information element
```
-- ASNISTART
-- TAG-PHYSCELLID-START
PhysCellId ::= INTEGER (0..1007)
-- TAG-PHYSCELLID-STOP
-- ASNISTOP
```


PhysicalCellGroupConfig
The IE PhysicalCellGroupConfig is used to configure cell-group specific L1 parameters.

Physica/Ce/IGroupConfig information element
```
-- ASNISTART
-- TAG-PHYSICALCELLGROUPCONFIG-START
PhysicalCellGroupConfig ::= SEQUENCE [
    harq-ACK-SpatialBundlingPUCCH
    harq-ACK-SpatialBundlingPUSCH
    p-NR-FRl
    pdsch-HARQ-ACK-Codebook ENUMERATED {semiStatic, dynamic},
    tpc-SRS-RNTI RNTI-Value
    tpc-PUCCH-RNTI RNTI-Value
    tpc-PUSCH-RNTI RNTI-Value
    sp-CSI-RNTI RNTI-Value
    cs-RNTI SetupRelease {RNTI-Value }
    ...,
    [ [
    mcs-C-RNTI RNTI-Value
    p-UE-FRl P-Max
    ]],
    [ [
    xScale ENUMERATED {dBO, dB6, spare2, sparel}
    ]],
    [ [
    pdcch-BlindDetection SetupRelease { PDCCH-BlindDetection }
    ]],
    [ [
    dcp-Config-rl6 SetupRelease {DCP-Config-rl6}
    harq-ACK-SpatialBundlingPUCCH-secondaryPUCCHgroup-rl6 ENUMERATED {enabled, disabled}
    harq-ACK-SpatialBundlingPUSCH-secondaryPUCCHgroup-rl6 ENUMERATED {enabled, disabled}
    pdsch-HARQ-ACK-Codebook-secondaryPUCCHgroup-rl6 ENUMERATED {semiStatic, dynamic}
    p-NR-FR2-r16 P-Max
    p-UE-FR2-r16 P-Max
    nrdc-PCmode-FRl-rl6 ENUMERATED {semi-static-model, semi-static-mode2, dynamic}
    nrdc-PCmode-FR2-rl6
    pdsch-HARQ-ACK-Codebook-r16
    nfi-TotalDAI-Included-rl6
    ENOMERAIED Semi-static-model, semi-static-mode2, dyna, }
    nfi-TotalDAI-Included-rl6
ENUMERATED {semi-static-model, semi-static-mode2, dynamic}
    ENUMERATED {enhancedDynamic}
    ENUMERATED {true}

\begin{tabular}{|l|l|}
\hline OPTIONAL, & -- Need S \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, OPTIONAL & \begin{tabular}{l}
-- Need R \\
-- Cond MCG-Only
\end{tabular} \\
\hline OPTIONAL & -- Cond SCG-Only \\
\hline OPTIONAL & -- Need M \\
\hline OPTIONAL, & -- Need M \\
\hline OPTIONAL, & -- Cond twoPUCCHgroup \\
\hline OPTIONAL, & -- Cond twoPUCCHgroup \\
\hline OPTIONAL, & -- Cond twoPUCCHgroup \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Cond MCG-Only \\
\hline OPTIONAL, & -- Cond MCG-Only \\
\hline OPTIONAL, & -- Cond MCG-Only \\
\hline OPTIONAL, & -- Need R \\
\hline OPTIONAL, & -- Need R \\
\hline
\end{tabular}
```


ETSI


--- Page 677  ---


3GPP TS 38.331 version 17.0.0 Release 17
676
ETSI TS 138331 V17.0.0 (2022-05)
```
    pdsch-HARQ-ACK-OneShotFeedback-rl6 ENUMERATED {true}
    pdsch-HARQ-ACK-OneShotFeedbackNDI-r16 ENUMERATED {true}
    pdsch-HARQ-ACK-OneShotFeedbackCBG-r16 ENUMERATED {true}
    downlinkAssignmentIndexDCI-0-2-rl6 ENUMERATED { enabled}
    downlinkAssignmentIndexDCI-1-2-r16 ENUMERATED {nl, n2, n4}
    pdsch-HARQ-ACK-CodebookList-rl6 SetupRelease {PDSCH-HARQ-ACK-CodebookList-rl6}
    ackNackFeedbackMode-rl6 ENUMERATED {joint, separate}
    pdcch-BlindDetectionCA-CombIndicator-rl6 SetupRelease { PDCCH-BlindDetectionCA-CombIndicator-rl6 }
    pdcch-BlindDetection2-rl6 SetupRelease { PDCCH-BlindDetection2-rl6}
    pdcch-BlindDetection3-rl6 SetupRelease { PDCCH-BlindDetection3-rl6}
    bdFactorR-rl6 ENUMERATED {nl}
    ]],
    [ [
    -- start of enhanced Type3 feedback
```

```
            OPTIONAL, -- Need N
```

```
        OPTIONAL, -- Need N
```

```
        OPTIONAL, -- Cond twoPUCCHgroup
```

```
        OPTIONAL, -- Cond twoPUCCHgroup
```

```
    -- end of enhanced Type3 feedback
    -- start of triggering of HARQ-ACK re-transmission on a PUCCH resource
```

```
    -- end of triggering of HARQ-ACK re-transmission on a PUCCH resource
    -- start of PUCCH Cell switching
```

```
    -- end of PUCCH Cell switching
    uci-MuxWithDiffPrio-rl7 ENUMERATED {enabled} OPTIONAL, -- Need R
    uci-MuxWithDiffPrioSecondaryPUCCHgroup-rl7 ENUMERATED {enabled}
    simultaneousPUCCH-PUSCH-rl7 ENUMERATED {enabled}
```

```
    prioLowDG-HighCG-rl7 ENUMERATED {enabled} OPTIONAL, -- Need. R
    prioHighDG-LowCG-rl7 ENUMERATED {enabled} OPTIONAL, -- Need R
    twoQCLTypeDforPDCCHRepetition-rl7 ENUMERATED [enabled] OPTIONAL, -- Need R
    multicastConfig-rl7 SetupRelease { MulticastConfig-rl7 } OPTIONAL -- Need M
    ]]
}
```


ETSI


--- Page 678  ---


3GPP TS 38.331 version 17.0.0 Release 17
677
ETSI TS 138331 V17.0.0 (2022-05)
```
PDSCH-HARQ-ACK-EnhType3-rl7 ::=
    pdsch-HARQ-ACK-EnhType3Index-rl7 PDSCH-HARQ-ACK-EnhType3Index-rl7,
    applicable-rl7 CHOICE {
        perCC SEQUENCE (SIZE (l..maxNrofServingCells)) OF INTEGER (0..1),
        PerHARQ SEQUENCE (SIZE (l..maxNrofServingCells)) OF BIT STRING (SIZE (16))
    },
```

```
    ...
}
PDSCH-HARQ-ACK-EnhType3Index-rl7 ::= INTEGER (0..maxNrofEnhType3HARQ-ACK-1-r17)
PDCCH-BlindDetection ::= INTEGER (1..15)
DCP-Config-rl6 ::= SEQUENCE \
    ps-RNTI-rl6
    ps-Offset-rl6 INTEGER (1..120),
    sizeDCI-2-6-rl6 INTEGER (1..MAXDCI-2-6-Size-r16),
    ps-PositionDCI-2-6-r16 INTEGER (0..maxDCI-2-6-Size-1-r16),
```

```
}
PDSCH-HARQ-ACK-CodebookList-rl6 ::= SEQUENCE (SIZE (l..2)) OF ENUMERATED {semiStatic, dynamic}
PDCCH-BlindDetectionCA-CombIndicator-rl6 ::= SEQUENCE {
    pdcch-BlindDetectionCAl-rl6 INTEGER (1..15),
    pdcch-BlindDetectionCA2-r16 INTEGER (1..15)
}
PDCCH-BlindDetection2-r16 ::= INTEGER (1..15)
PDCCH-BlindDetection3-rl6 ::= INTEGER (1..15)
MulticastConfig-rl7 ::= SEQUENCE \
```

```
}
-- TAG-PHYSICALCELLGROUPCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 679  ---


3GPP TS 38.331 version 17.0.0 Release 17
678
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PhysicalCellGroupConfig field descriptions \\
\hline \begin{tabular}{l}
ackNackFeedbackMode \\
Indicates which among the joint and separate ACK/NACK feedback modes to use within a slot as specified in TS 38.213 [13] (clause 9).
\end{tabular} \\
\hline \begin{tabular}{l}
bdFactorR \\
Parameter for determining and distributing the maximum numbers of BD/CCE for mPDCCH based mPDSCH transmission as specified in TS 38.213[13] Clause 10.1.
\end{tabular} \\
\hline \begin{tabular}{l}
cs-RNTI \\
RNTI value for downlink SPS (see SPS-Config) and uplink configured grant (see ConfiguredGrantConfig).
\end{tabular} \\
\hline \begin{tabular}{l}
downlinkAssignmentindexDCI-0-2 \\
Indicates if "Downlink assignment index" is present or absent in DCI format \( 0 \_2 \). If the field "downlinkAssignmentindexDCI-0-2" is absent, then 0 bit for "Downlink assignment index" in DCI format \( 0 \_2 \). If the field "downlinkAssignment/ndexDCI-0-2" is present, then the bitwidth of "Downlink assignment index" in DCI format \( 0 \_2 \) is defined in the same was as that in DCI format \( 0 \_1 \) (see TS 38.212 [17], clause 7.3.1 and TS 38.213 [13], clause 9.1).
\end{tabular} \\
\hline \begin{tabular}{l}
downlinkAssignmentindexDCI-1-2 \\
Configures the number of bits for "Downlink assignment index" in DCI format 1_2. If the field is absent, then 0 bit for "Downlink assignment index" in DCI format 1_2. Note that 1 bit and 2 bits are applied if only one serving cell is configured in the DL and the higher layer parameter pdsch-HARQ-ACK-Codebook=dynamic. 4 bits is applied if more than one serving cell are configured in the DL and the higher layer parameter pdsch-HARQ-ACK-Codebook is set to dynamic (see TS 38.212 [17], clause 7.3.1 and TS 38.213 [13], clause 9.1).
\end{tabular} \\
\hline \begin{tabular}{l}
harq-ACK-SpatialBundlingPUCCH \\
Enables spatial bundling of HARQ ACKs. It is configured per cell group (i.e. for all the cells within the cell group) for PUCCH reporting of HARQ-ACK. It is only applicable when more than 4 layers are possible to schedule. When the field is absent, the spatial bundling of PUCCH HARQ ACKs for the primary PUCCH group is disabled (see TS 38.213 [13], clause 9.1.2.1). If the field harq-ACK SpatialBundlingPUCCH-secondaryPUCCHgroup is present, harq-ACK-SpatialBundlingPUCCH is only applied to primary PUCCH group. Network does not configure for a UE both spatial bundling of HARQ ACKs and codeBlockGroupTransmission within the same cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-ACK-SpatialBundlingPUCCH-secondaryPUCCHgroup \\
Indicates whether spatial bundling of PUCCH HARQ ACKs for the secondary PUCCH group is enabled or disabled. The field is only applicable when more than 4 layers are possible to schedule (see TS 38.213 [13], clause 9.1.2.1). When the field is absent, the use of spatial bundling of PUCCH HARQ ACKs for the secondary PUCCH group is indicated by harq-ACK-SpatialBundlingPUCCH. See TS 38.213 [13], clause 9.1.2.1. Network does not configure for a UE both spatial bundling of HARQ ACKs and codeBlockGroupTransmission within the same cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-ACK-SpatialBundlingPUSCH \\
Enables spatial bundling of HARQ ACKs. It is configured per cell group (i.e. for all the cells within the cell group) for PUSCH reporting of HARQ-ACK. It is only applicable when more than 4 layers are possible to schedule. When the field is absent, the spatial bundling of PUSCH HARQ ACKs for the primary PUCCH group is disabled (see TS 38.213 [13], clauses 9.1.2.2 and 9.1.3.2). If the field harq-ACK SpatialBundlingPUSCH-secondaryPUCCHgroup is present, harq-ACK-SpatialBundlingPUSCH is only applied to primary PUCCH group. Network does not configure for a UE both spatial bundling of HARQ ACKs and codeBlockGroupTransmission within the same cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-ACK-SpatialBundlingPUSCH-secondaryPUCCHgroup \\
Indicates whether spatial bundling of PUSCH HARQ ACKs for the secondary PUCCH group is enabled or disabled. The field is only applicable when more than 4 layers are possible to schedule (see TS 38.213 [13], clauses 9.1.2.2 and 9.1.3.2). When the field is absent, the use of spatial bundling of PUSCH HARQ ACKs for the secondary PUCCH group is indicated by harq-ACK-SpatialBundlingPUSCH. See TS 38.213 [13], clauses 9.1.2.2 and 9.1.3.2. Network does not configure for a UE both spatial bundling of HARQ ACKs and codeBlockGroupTransmission within the same cell group.
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-C-RNTI \\
RNTI to indicate use of qam64LowSE for grant-based transmissions. When the mcs-C-RNTI is configured, RNTI scrambling of DCI CRC is used to choose the corresponding MCS table.
\end{tabular} \\
\hline \begin{tabular}{l}
nfi-TotalDAI-included \\
Indicates whether the NFI and total DAI fields of the non-scheduled PDSCH group is included in the non-fallback DL grant DCI (see TS 38.212 [17], clause 7.3.1). The network configures this only when enhanced dynamic codebook is configured (pdsch-HARQ-ACK-Codebook is set to enhancedDynamic).
\end{tabular} \\
\hline \begin{tabular}{l}
nrdc-PCmode-FR1 \\
Indicates the uplink power sharing mode that the UE uses in NR-DC in frequency range 1 (FR1) (see TS 38.213 [13], clause 7.6).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 680  ---


3GPP TS 38.331 version 17.0.0 Release 17
679
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
nrdc-PCmode-FR2 \\
Indicates the uplink power sharing mode that the UE uses in NR-DC in frequency range 2 (FR2) (see TS 38.213 [13], clause 7.6).
\end{tabular} \\
\hline \begin{tabular}{l}
pdcch-BlindDetection, pdcch-BlindDetection2, pdcch-BlindDetection3 \\
Indicates the reference number of cells for PDCCH blind detection for the CG. Network configures the field for each CG when the UE is in NR DC and sets the value in accordance with the constraints specified in TS 38.213 [13]. The network configures pdcch-BlindDetection only if the UE is in NR-DC. The network configures pdcch- \\
BlindDetection2 only if the UE is in NR-DC with at least one downlink cell using Rel-16 PDCCH monitoring capability. The network configures pdcch-BlindDetection3 only if the UE is in NR-DC with at least one downlink cell using Rel-15 PDCCH monitoring capability.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcch-BlindDetectionCA-Combindicator \\
Configure one combination of pdcch-BlindDetectionCA1 (for R15) and pdcch-BlindDetectionCA2 (for R16) for UE to use for scaling PDCCH monitoring capability if the number of serving cells configured to a UE is larger than the reported capability, and if UE reports more than one combination of pdcch-BlindDetectionCA1 and pdcch- \\
BlindDetectionCA2 as UE capability. The combination of pdcch-BlindDetectionCA1 and pdcch-BlindDetectionCA2) configured by pdcch-BlindDetectionCACombIndicator is from the more than one combination of pdcch-BlindDetectionCA1 and pdcch-BlindDetectionCA2 reported by UE (see TS 38.213 [13], clause 10).
\end{tabular} \\
\hline \begin{tabular}{l}
p-NR-FR1 \\
The maximum total transmit power to be used by the UE in this NR cell group across all serving cells in frequency range 1 (FR1). The maximum transmit power that the UE may use may be additionally limited by \( p \)-Max (configured in Frequency/nfoUL) and by \( p \)-UE-FR1 (configured total for all serving cells operating on FR1).
\end{tabular} \\
\hline \begin{tabular}{l}
p-NR-FR2 \\
The maximum total transmit power to be used by the UE in this NR cell group across all serving cells in frequency range 2 (FR2). The maximum transmit power that the UE may use may be additionally limited by \( p \)-Max (configured in Frequency/nfoUL) and by \( p \)-UE-FR2 (configured total for all serving cells operating on FR2). This field is only used in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
prioLowDG-HighCG \\
Enable PHY prioritization for the case where low-priority dynamic grant-PUSCH collides with high-priority configured grant-PUSCH on a BWP of a serving cell (see TS 38.213 [13], clause 9), when the UE has generated transport blocks for both DG-PUSCH and CG-PUSCH as described in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
prioHighDG-LowCG \\
Enable PHY prioritization for the case where high-priority dynamic grant PUSCH collides with low-priority configured grant PUSCH on a BWP of a serving cell (see TS 38.213 [13], clause 9), when the UE has generated transport blocks for both DG-PUSCH and CG-PUSCH as described in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
ps-RNTI \\
RNTI value for scrambling CRC of DCI format 2-6 used for power saving (see TS 38.213 [13], clause 10.1).
\end{tabular} \\
\hline \begin{tabular}{l}
ps-Offset \\
The start of the search-time of DCI format 2-6 with CRC scrambled by PS-RNTI relative to the start of the drx-onDurationTimer of Long DRX (see TS 38.213 [13], clause 10.3). Value in multiples of 0.125 ms (milliseconds). 1 corresponds to \( 0.125 \mathrm{~ms}, 2 \) corresponds to \( 0.25 \mathrm{~ms}, 3 \) corresponds to 0.375 ms and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
ps-WakeUp \\
Indicates the UE to wake-up if DCI format 2-6 is not detected outside active time (see TS 38.321 [3], clause 5.7). If the field is absent, the UE does not wake-up if DCI format 26 is not detected outside active time.
\end{tabular} \\
\hline \begin{tabular}{l}
ps-PositionDCI-2-6 \\
Starting position of UE wakeup and SCell dormancy indication in DCI format 2-6 (see TS 38.213 [13], clause 10.3).
\end{tabular} \\
\hline \begin{tabular}{l}
ps-TransmitPeriodicL1-RSRP \\
Indicates the UE to transmit periodic L1-RSRP report(s) when the drx-onDurationTimer does not start (see TS 38.321 [3], clause 5.7). If the field is absent, the UE does not transmit periodic L1-RSRP report(s) when the drx-onDurationTimer does not start.
\end{tabular} \\
\hline \begin{tabular}{l}
ps-TransmitOtherPeriodicCSI \\
Indicates the UE to transmit periodic CSI report(s) other than L1-RSRP reports when the drx-onDurationTimer does not start (see TS 38.321 [3], clause 5.7). If the field is absent, the UE does not transmit periodic CSI report(s) other than L1-RSRP reports when the drx-onDuration Timer does not start.
\end{tabular} \\
\hline \begin{tabular}{l}
p-UE-FR1 \\
The maximum total transmit power to be used by the UE across all serving cells in frequency range 1 (FR1) across all cell groups. The maximum transmit power that the UE may use may be additionally limited by p-Max (configured in Frequency/nfoUL) and by p-NR-FR1 (configured for the cell group).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 681  ---


3GPP TS 38.331 version 17.0.0 Release 17
680
ETSI TS 138331 V17.0.0 (2022-05)

p-UE-FR2
The maximum total transmit power to be used by the UE across all serving cells in frequency range 2 (FR2) across all cell groups. The maximum transmit power that the UE may use may be additionally limited by p-Max (configured in FrequencylnfoUL) and by p-NR-FR2 (configured for the cell group).
pdsch-HARQ-ACK-Codebook
The PDSCH HARQ-ACK codebook is either semi-static or dynamic. This is applicable to both CA and none CA operation (see TS 38.213 [13], clauses 9.1.2 and 9.1.3). If pdsch-HARQ-ACK-Codebook-r16 is signalled, UE shall ignore the pdsch-HARQ-ACK-Codebook (without suffix). For the HARQ-ACK for sidelink, if pdsch-HARQ-ACK-Codebook-r16 is signalled, the UE uses pdsch-HARQ-ACK-Codebook (without suffix) and ignores pdsch-HARQ-ACK-Codebook-r16. If the field pdsch-HARQ-ACK-CodebooksecondaryPUCCHgroup is present, pdsch-HARQ-ACK-Codebook is applied to primary PUCCH group. Otherwise, this field is applied to the cell group (i.e. for all the cells within the cell group). For the HARQ-ACK for sidelink, if the field pdsch-HARQ-ACK-Codebook-secondaryPUCCHgroup is present, pdsch-HARQ-ACK-Codebook is applied to primary and secondary PUCCH group and the UE ignores pdsch-HARQ-ACK-Codebook-secondaryPUCCHgroup.
pdsch-HARQ-ACK-CodebookList
A list of configurations for one or two HARQ-ACK codebooks. Each configuration in the list is defined in the same way as pdsch-HARQ-ACK-Codebook (see TS 38.212 [17], clause 7.3.1.2.2 and TS 38.213 [13], clauses 7.2.1, 9.1.2, 9.1.3 and 9.2.1). If this field is present, the field pdsch-HARQ-ACK-Codebook is ignored. If this field is present, the value of this field is applied for primary PUCCH group and for secondary PUCCH group (if configured). For the HARQ-ACK for sidelink, the UE uses pdsch-HARQ-ACKCodebook and ignores pdsch-HARQ-ACK-CodebookList if this field is present.
pdsch-HARQ-ACK-Codebook-secondaryPUCCHgroup
The PDSCH HARQ-ACK codebook is either semi-static or dynamic. This is applicable to CA operation (see TS 38.213 [13], clauses 9.1.2 and 9.1.3). It is configured for secondary PUCCH group.
pdsch-HARQ-ACK-EnhType3DCI-Field
Indicates the enhanced Type 3 codebook through a new DCI field to indicate the enhanced Type 3 HARQ-ACK codebook in the secondary PUCCH group if the more than one enhanced Type HARQ-ACK codebook is configured for the primary PUCCH group.
pdsch-HARQ-ACK-EnhType3ToAddModList, pdsch-HARQ-ACK-EnhType3SecondaryToAddModList
Configure the list of enhanced Type 3 HARQ-ACK codebooks for the primary PUCCH group and the secondary PUCCH group, respectively. When configured, DCI_format 1_1 can request the UE to report A/N for one of the configured enhanced Type 3 HARQ-ACK codebooks in the corresponding PUCCH group (see TS 38.213 [13], clause 9.1.4).
pdsch-HARQ-ACK-EnhType3SecondaryPUCCHgroup
Enables the enhanced Type 3 codebook through a DCI field to indicate the enhanced Type 3 HARQ-ACK codebook in the secondary PUCCH group if the more than one enhanced Type 3 HARQ-ACK codebook is configured for the secondary PUCCH group.
pdsch-HARQ-ACK-OneShotFeedback
When configured, the \( \mathrm{DCI} \_ \)format \( 1 \_1 \) can request the UE to report AN for all HARQ processes and all CCs configured in the PUCCH group (see TS 38.212 [17], clause 7.3.1).
pdsch-HARQ-ACK-OneShotFeedbackCBG
When configured, the DCI_format 1_1 can request the UE to include CBG level A/N for each CC with CBG level transmission configured. When not configured, the UE will report TB level A/N even if CBG level transmission is configured for a CC. The network configures this only when pdsch-HARQ-ACK-OneShotFeedback is configured.
pdsch-HARQ-ACK-OneShotFeedbackNDI
When configured, the DCI_format 1_1 can request the UE to include NDI for each A/N reported. The network configures this only when pdsch-HARQ-ACK-OneShotFeedback is configured.
pdsch-HARQ-ACK-Retx, pdsch-HARQ-ACK-RetxSecondaryPUCCHgroup
When configured, the DCI format 1_1 can request the UE to perform a HARQ-ACK re-transmission on a PUCCH resource in the primary PUCCH group and the secondary PUCCH group, respectively (see TS 38.213 [13], clause 9.1.5).
pucch-sSCell, pucch-sSCellSecondaryPUCCHgroup
indictates the alternative PUCCH cells for PUCCH cell switching in the primary and the secondary PUCCH group, respectively. For the primary PUCCH group, it is configured for cells on top of SpCell. For the secondary PUCCH group, it is configured for cell on top of the PUCCH SCell.
pucch-sSCellDyn, pucch-sSCellDynsecondaryPUCCHgroup
When configured, PUCCH cell switching based on dynamic indication in DCI format 1_1 is enabled (see TS 38.213 [13], clause 9.A, clause 9.1.5), respectively for the primary PUCCH group and the secondary PUCCH group.

ETSI


--- Page 682  ---


3GPP TS 38.331 version 17.0.0 Release 17
681
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
pucch-sSCellPattern, pucch-sSCellPatternSecondaryPUCCHgroup \\
When configured, the UE applies the semi-static PUCCH cell switching (see TS 38.213 [13], clause 9.A) using the time domain pattern of applicable PUCCH cells indicated by this field, respectively for the primary PUCCH group and the secondary PUCCH group.
\end{tabular} \\
\hline \begin{tabular}{l}
simultaneousPUCCH-PUSCH, simultaneousPUCCH-PUSCH-SecondaryPUCCHgroup \\
Enables simultaneous PUCCH and PUSCH transmissions with different priorities for the primary PUCCH group and the secondary PUCCH group, respectively.
\end{tabular} \\
\hline \begin{tabular}{l}
sizeDCI-2-6 \\
Size of DCI format 2-6 (see TS 38.213 [13], clause 10.3).
\end{tabular} \\
\hline \begin{tabular}{l}
sp-CSI-RNTI \\
RNTI for Semi-Persistent CSI reporting on PUSCH (see CSI-ReportConfig) (see TS 38.214 [19], clause 5.2.1.5.2). Network always configures the UE with a value for this field when at least one CSI-ReportConfig with reportConfigType set to semiPersistentOnPUSCH is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-PUCCH-RNTI \\
RNTI used for PUCCH TPC commands on DCI (see TS 38.213 [13], clause 10.1).
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-PUSCH-RNTI \\
RNTI used for PUSCH TPC commands on DCI (see TS 38.213 [13], clause 10.1).
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-SRS-RNTI \\
RNTI used for SRS TPC commands on DCI (see TS 38.213 [13], clause 10.1).
\end{tabular} \\
\hline \begin{tabular}{l}
twoQCLTypeDforPDCCHRepetition \\
Indicates whether a UE is expected UE to identify and monitor two QCL-TypeD properties for multiple overlapping CORESETs in the case of PDCCH repetition.
\end{tabular} \\
\hline \begin{tabular}{l}
uci-MuxWithDiffPrio, uci-MuxWithDiffPrio-secondaryPUCCHgroup \\
When configured, enables multiplexing a high-priority (HP) HARQ-ACK UCI and a low-priority (LP) HARQ-ACK UCI into a PUCCH or PUSCH for the primary PUCCH group and the secondary PUCCH group, respectively.
\end{tabular} \\
\hline \begin{tabular}{l}
ul-TotalDAI-included \\
Indicates whether the total DAI fields of the additional PDSCH group is included in the non-fallback UL grant DCI (see TS 38.212 [17], clause 7.3.1). The network configures this only when enhanced dynamic codebook is configured (pdsch-HARQ-ACK-Codebook is set to enhancedDynamic).
\end{tabular} \\
\hline \begin{tabular}{l}
xScale \\
The UE is allowed to drop NR only if the power scaling applied to NR results in a difference between scaled and unscaled NR UL of more than xScale dB (see TS 38.213 [13]). If the value is not configured for dynamic power sharing, the UE assumes default value of 6 dB .
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline MulticastConfig-r17 field descriptions \\
\hline \begin{tabular}{l}
g-CS-RNTI-ConfigToAddModList \\
List of G-CS-RNTI configurations to add or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
g-CS-RNTI-ConfigToReleaseList \\
List of G-CS-RNTI configurations to release.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-HARQ-ACK-CodebookListMulticast \\
A list of configurations for one or two HARQ-ACK codebooks for MBS multicast. Each configuration in the list is defined in the same way as pdsch-HARQ-ACK-Codebook (see TS 38.212 [17], clause 7.3.1.2.2 and TS 38.213 [13], clauses 7.2.1, 9.1.2, 9.1.3 and 9.2.1). If this field is present, the field pdsch-HARQ-ACK-Codebook is ignored. If this field is present, the value of this field is applied for primary PUCCH group and for secondary PUCCH group (if configured).
\end{tabular} \\
\hline \begin{tabular}{l}
type1-Codebook-Generation-Mode \\
Indicates the mode of Type-1 HARQ-ACK codebook generation. Mode 1 is based on the k 1 values that are in the intersection of K1 set for unicast and K1 set for mutlicast. \\
Mode 2 is based on the k 1 values that in the union of K 1 set for unicast and K 1 set for mutlicast.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 683  ---


3GPP TS 38.331 version 17.0.0 Release 17
682
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline G-CS-RNTI-Config field descriptions \\
\hline \begin{tabular}{l}
g-CS-RNTI \\
Used to scramble the SPS group-common PDSCH and activation/deactivation of SPS group-common PDSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-FeedbackEnablerMulticast \\
Indicates whether the UE shall provide HARQ-ACK feedback for MBS multicast. Value dci-enabler means that whether the UE shall feedback HARQ-ACK for MBS multicast is indicated by DCI. Value enabled means the UE shall always feedback the HARQ-ACK for MBS multicast. When the field is absent, the UE shall not feedback the HARQ-ACK for mutlicast.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-HARQ-FeedbackOptionMulticast \\
Indicates the feedback mode for MBS multicast SPS PDSCH without PDCCH scheduling.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PDSCH-HARQ-ACK-EnhType3 field descriptions \\
\hline \begin{tabular}{l}
pdsch-HARQ-ACK-EnhType3CBG \\
When configured, the \( \mathrm{DCI} \_ \)format \( 1 \_1 \) or DCI format \( 1 \_2 \) can request the UE to include CBG level A/N for each CC with CBG level transmission configured of the enhanced Type 3 HARQ-ACK codebook. When not configured, the UE will report TB level A/N even if CBG level transmission is configured for a CC.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-HARQ-ACK-EnhType3NDI \\
When configured, the \( \mathrm{DCI} \_ \)format \( 1 \_1 \) or DCI format \( 1 \_2 \) can request the UE to include NDI for each A/N reported of the enhanced Type 3 HARQ-ACK codebook.
\end{tabular} \\
\hline \begin{tabular}{l}
perCC \\
Configures enhanced Type 3 HARQ-ACK codebook using per CC configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
perHARQ \\
Configures enhanced Type 3 HARQ-ACK codebook using per HARQ process and CC configuration.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline MCG-Only & This field is optionally present, Need R, in the PhysicalCellGroupConfig of the MCG. It is absent otherwise. \\
\hline SCG-Only & This field is optionally present, Need S, in the PhysicalCellGroupConfig of the SCG in (NG)EN-DC as defined in TS 38.213 [13]. It is absent otherwise. \\
\hline twoPUCCHgroup & This field is optionally present, Need R, if secondary PUCCH group is configured. It is absent otherwise. \\
\hline
\end{tabular}
- \( \quad \) PLMN-Identity

The IE PLMN-Identity identifies a Public Land Mobile Network. Further information regarding how to set the IE is specified in TS 23.003 [21].
PLMN-Identity information element
```
-- ASNISTART
-- TAG-PLMN-IDENTITY-START
PLMN-Identity ::= SEQUENCE \
    mce
SEQUENCE
    mne
}
MCC ::=
ENCE (SIZE (3)) OF MCC-MNC-Digit
MNC ::=
    MCC OPTIONAL, -- Cond MCC
    MNC
SEQUENCE (SIZE (3)) OF MCC-MNC-Digit
SEQUENCE (SIZE (2..3)) OF MCC-MNC-Digit
```


ETSI


--- Page 684  ---


3GPP TS 38.331 version 17.0.0 Release 17
683
ETSI TS 138331 V17.0.0 (2022-05)
```
MCC-MNC-Digit ::= INTEGER (0..9)
-- TAG-PLMN-IDENTITY-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PLMN-Identity field descriptions \\
\hline \begin{tabular}{l}
mcc \\
The first element contains the first MCC digit, the second element the second MCC digit and so on. If the field is absent, it takes the same value as the mcc of the immediately preceding IE PLMN-Identity. See TS 23.003 [21].
\end{tabular} \\
\hline \begin{tabular}{l}
mnc \\
The first element contains the first MNC digit, the second element the second MNC digit and so on. See TS 23.003 [21].
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline\( M C C \) & \begin{tabular}{l} 
This field is mandatory present when PLMN-Identity is not used in a list or if it is the first entry of PLMN-Identity in a list. Otherwise it is \\
optionally present, Need S.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) PLMN-IdentitylnfoList

The IE PLMN-IdentityInfoList includes a list of PLMN identity information.
PLMN-IdentityinfoListinformation element
```
-- ASNISTART
-- TAG-PLMN-IDENTITYINFOLIST-START
PLMN-IdentityInfoList ::= SEQUENCE (SIZE (l..maxPLMN)) OF PLMN-IdentityInfo
PLMN-IdentityInfo ::=
    plmn-IdentityList
    trackingAreaCode
    ranac
    cellIdentity
    cellReservedForOperatorUse
    ...;
    [ [
    iab-Support-rl6 ENUMERATED {true}
    ]],
    [ [
```

```
    ] ]
}
-- TAG-PLMN-IDENTITYINFOLIST-STOP
-- ASNISTOP
```


ETSI


--- Page 685  ---


3GPP TS 38.331 version 17.0.0 Release 17
684
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PLMN-Identityinfo field descriptions \\
\hline \begin{tabular}{l}
cellReservedForOperatorUse \\
Indicates whether the cell is reserved for operator use (per PLMN), as defined in TS 38.304 [20]. This field is ignored by IAB-MT.
\end{tabular} \\
\hline \begin{tabular}{l}
iab-Support \\
This field combines both the support of IAB and the cell status for IAB. If the field is present, the cell supports IAB and the cell is also considered as a candidate for cell (re)selection for IAB-node; if the field is absent, the cell does not support IAB and/or the cell is barred for IAB-node.
\end{tabular} \\
\hline \begin{tabular}{l}
trackingAreaCode \\
Indicates Tracking Area Code to which the cell indicated by cellidentity field belongs. The absence of the field indicates that the cell only supports PSCell/SCell functionality (per PLMN).
\end{tabular} \\
\hline \begin{tabular}{l}
trackingAreaList \\
List of Tracking Areas to which the cell indicated by cell/dentity field belongs. If this field is present, the UE shall ignore trackingAreaCode, if present.. Total number of TACs across different PLMNs of the cell cannot exceed maxTAC.
\end{tabular} \\
\hline
\end{tabular}
- PLMN-IdentityList2

Includes a list of PLMN identities.
PLMN-dentityList2 information element
```
-- ASNISTART
-- TAG-PLMNIDENTITYLIST2-START
PLMN-IdentityList2-r16 ::= SEQUENCE (SIZE (1.16)) OF PLMN-Identity
-- TAG-PLMNIDENTITYLIST2-STOP
-- ASN1STOP
```

- PosMeasGapPreConfig

The IE PosMeasGapPreConfig specifies the preconfigured measurement gap configuration.
PosMeasGapPreConfig information element
```
-- ASNISTART
-- TAG-POSMEASGAPPRECONFIG-START
PosMeasGapPreConfig-rl7 ::= SEQUENCE [
    preConfigGapID-rl7 INTEGER (O..ffsUpperLimit), -- Upper range is FFS
    measGapConfig-rl7 MeasGapConfig,
    ...
}
--Editor's Note: To align with MGE WI (R2-2202868)--
-- TAG-POSMEASGAPPRECONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 686  ---


3GPP TS 38.331 version 17.0.0 Release 17
685
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline & PosMeasGapPreConfig field descriptions \\
\hline \begin{tabular}{l}
preConfigGapID \\
Indicates preconfigured measurement gap configuration ID.
\end{tabular} & \\
\hline \begin{tabular}{l}
measGapConfig \\
Indicates the preconfigured measurement gap configuration.
\end{tabular} & \\
\hline
\end{tabular}

-
PRB-Id

The IE PRB-Id identifies a Physical Resource Block (PRB) position within a carrier.
PRB-Id information element
-- ASNISTART
-- TAG-PRB-ID-START
PRB-Id : :=
INTEGER (O. . maxNrofPhysicalResourceBlocks-1)
-- TAG-PRB-ID-STOP
-- ASNISTOP
- PTRS-DownlinkConfig

The IE PTRS-DownlinkConfig is used to configure downlink phase tracking reference signals (PTRS) (see TS 38.214 [19] clause 5.1.6.3)
PTRS-DownlinkConfig information element
-- ASNISTART
-- TAG-PTRS-DOWNLINKCONFIG-START

PTRS-DownlinkConfig : :=
frequencyDensity
timeDensity
epre-Ratio
resourceElementOffset
⋯'
[ [
maxNrofPorts-r16
] ]
\}
-- TAG-PTRS-DOWNLINKCONFIG-STOP
-- ASNISTOP

SEQUENCE 1
SEQUENCE (SIZE (2)) OF INTEGER (1.276) OPTIONAL, -- Need S SEQUENCE (SIZE (3)) OF INTEGER (0.29)
INTEGER (0. 3)
ENUMERATED \{ offset01, offsetl0, offsetll \}

ENUMERATED \{nl, n2\}

OPTIONAL, -- Need S
OPTIONAL, -- Need. S
OPTIONAL, -- Need S

OPTIONAL -- Need R

ETSI


--- Page 687  ---


3GPP TS 38.331 version 17.0.0 Release 17
686
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PTRS-DownlinkConfig field descriptions \\
\hline \begin{tabular}{l}
epre-Ratio \\
EPRE ratio between PTRS and PDSCH. Value 0 corresponds to the codepoint " 00 " in table 4.1-2. Value 1 corresponds to codepoint " 01 ", and so on. If the field is not provided, the UE applies value 0 (see TS 38.214 [19], clause 4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyDensity \\
Presence and frequency density of DL PT-RS as a function of Scheduled BW. If the field is absent, the UE uses K_PT-RS = 2 (see TS 38.214 [19], clause 5.1.6.3, table 5.1.6.3-2).
\end{tabular} \\
\hline \begin{tabular}{l}
maxNrofPorts \\
The maximum number of DL PTRS ports specified in TS 38.214 [19] (clause 5.1.6.3). 2 PT-RS ports can only be configured for a DL BWP that is configured, as specified in TS 38.214 [19] clause 5.1, with a mode where a single PDSCH has association between the DM-RS ports and the TCI states as defined in TS 38.214 [19] clause 5.1.6.2.
\end{tabular} \\
\hline \begin{tabular}{l}
resourceElementOffset \\
Indicates the subcarrier offset for DL PTRS. If the field is absent, the UE applies the value offset00 (see TS 38.211 [16], clause 7.4.1.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
timeDensity \\
Presence and time density of DL PT-RS as a function of MCS. The value 29 is only applicable for MCS Table 5.1.3.1-1 (TS 38.214 [19]). If the field is absent, the UE uses L_PT-RS = 1 (see TS 38.214 [19], clause 5.1.6.3, table 5.1.6.3-1).
\end{tabular} \\
\hline
\end{tabular}
- PTRS-UplinkConfig

The IE PTRS-UplinkConfig is used to configure uplink Phase-Tracking-Reference-Signals (PTRS).

PTRS-UplinkConfig information element
```
-- ASNISTART
-- TAG-PTRS-UPLINKCONFIG-START
PTRS-UplinkConfig ::= SEQUENCE \
    transformPrecoderDisabled.
        frequencyDensity
        timeDensity
        maxNrofPorts
        resourceElementOffset
        ptrs-Power
    }
    transformPrecoderEnabled
        sampleDensity
        timeDensityTransformPrecoding
    }
    ...
}
-- TAG-PTRS-UPLINKCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 688  ---


3GPP TS 38.331 version 17.0.0 Release 17
687
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PTRS-UplinkConfig field descriptions \\
\hline \begin{tabular}{l}
frequencyDensity \\
Presence and frequency density of UL PT-RS for CP-OFDM waveform as a function of scheduled BW If the field is absent, the UE uses K_PT-RS = 2 (see TS 38.214 [19], clause 6.1).
\end{tabular} \\
\hline \begin{tabular}{l}
maxNrofPorts \\
The maximum number of UL PTRS ports for CP-OFDM (see TS 38.214 [19], clause 6.2.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
ptrs-Power \\
UL PTRS power boosting factor per PTRS port (see TS 38.214 [19], clause 6.1, table 6.2.3.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceElementOffset \\
Indicates the subcarrier offset for UL PTRS for CP-OFDM. If the field is absent, the UE applies the value offset00 (see TS 38.211 [16], clause 6.4.1.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
sampleDensity \\
Sample density of PT-RS for DFT-s-OFDM, pre-DFT, indicating a set of thresholds \( \mathrm{T}=\{\mathrm{NRBn}, \mathrm{n}=0,1,2,3,4\} \), that indicates dependency between presence of PT-RS and scheduled BW and the values of X and K the UE should use depending on the scheduled BW, see TS 38.214 [19], clause 6.1, table 6.2.3.2-1.
\end{tabular} \\
\hline \begin{tabular}{l}
timeDensity \\
Presence and time density of UL PT-RS for CP-OFDM waveform as a function of MCS If the field is absent, the UE uses L_PT-RS = 1 (see TS 38.214 [19], clause 6.1).
\end{tabular} \\
\hline \begin{tabular}{l}
timeDensityTransformPrecoding \\
Time density (OFDM symbol level) of PT-RS for DFT-s-OFDM. If the field is absent, the UE applies value d1 (see TS 38.214 [19], clause 6.1).
\end{tabular} \\
\hline \begin{tabular}{l}
transformPrecoderDisabled \\
Configuration of UL PTRS without transform precoder (with CP-OFDM).
\end{tabular} \\
\hline \begin{tabular}{l}
transformPrecoderEnabled \\
Configuration of UL PTRS with transform precoder (DFT-S-OFDM).
\end{tabular} \\
\hline
\end{tabular}
- PUCCH-Config

The IE PUCCH-Config is used to configure UE specific PUCCH parameters (per BWP).
PUCCH-Config information element
```
-- ASNISTART
-- TAG-PUCCH-CONFIG-START
PUCCH-Config ::= SEQUENCE \
    resourceSetToAddModList
    resourceSetToReleaseList
    resourceToAddModList
    resourceToReleaseList
    formatl
    format2
    format3
    format4
    multi-CSI-PUCCH-ResourceList
    dl-DataToUl-ACK
    spatialRelationInfoToAddModList
```

```
    schedulingRequestResourceToAddModList SEQUENCE (SIZE (1..maxNrofSR-Resources)) OF SchedulingRequestResourceConfig
            OPTIONAL, -- Need N
    schedulingRequestResourceToReleaseList SEQUENCE (SIZE (1..maxNrofSR-Resources)) OF SchedulingRequestResourceId
            OPTIONAL, -- Need. N
SEQUENCE {
    S (SIZE (l..maxNrofPUCCH-ResourceSets)) OF PUCCH-ResourceSet
    St{NaxNrofPUCCH-Resourcesets), OF PUCCH-ResourcesetId OPTIONAL, -- Need N
```

```
    S PUCN-ResourCeTA M
    SetupRelease { PUCCH-FormatConfig } OPTIONAL, -- Need M
    SetupRelease { PUCCH-FormatConfig } OPTIONAL, -- Need M
    SetupRelease { PUCCH-FormatConfig } OPTIONAL, -- Need M
    SEQUENCE (SIZE (1..8)) OF INTEGER (0..15) OPTIONAL, -- Need M
        SEQUENCE (SIZE (l..maxNrofSpatialRelationInfos)) OF PUCCH-SpatialRelationInfo
```

        "

ETSI


--- Page 689  ---


3GPP TS 38.331 version 17.0.0 Release 17
688
ETSI TS 138331 V17.0.0 (2022-05)
```
spatialRelationInfoToReleaseList SEQUENCE (SIZE (l..maxNrofSpatialRelationInfos)) OF PUCCH-SpatialRelationInfoId
OPTIONAL, -- Need N
PUCCH-PowerControl OPTIONAL, -- Need M
...,
[ [
resourceToAddModListExt-vl610
dl-DataToUL-ACK-rl6
ul-AccessConfigListDCI-l-l-rl6
subslotLengthForPUCCH-rl6
    normalCP-rl6
    extendedCP-rl6
} OPTIONAL, -- Need. R
dl-DataToUL-ACK-DCI-1-2-rl6 SetupRelease { DL-DataToUL-ACK-DCI-1-2-r16} OPTIONAL, -- Need M
numberOfBitsForPUCCH-ResourceIndicatorDCI-1-2-rl6 INTEGER (0..3) OPTIONAL, -- Need R
dmrs-UplinkTransformPrecodingPUCCH-rl6 ENUMERATED {enabled} OPTIONAL, -- Cond PI2-BPSK
spatialRelationInfoToAddModListSizeExt-vl6lO SEQUENCE (SIZE (l..maxNrofSpatialRelationInfosDiff-rl6)) OF PUCCH-SpatialRelationInfo
    OPTIONAL, -- Need N
spatialRelationInfoToReleaseListSizeExt-vl6l0 SEQUENCE (SIZE (l..maxNrofSpatialRelationInfosDiff-rl6)) OF PUCCH-SpatialRelationInfoId
    OPTIONAL, -- Need N
spatialRelationInfoToAddModListExt-vl6l0 SEQUENCE (SIZE (l..maxNrofSpatialRelationInfos-rl6)) OF PUCCH-SpatialRelationInfoExt-rl6
    OPTIONAL, -- Need. N
spatialRelationInfoToReleaseListExt-vl610 SEQUENCE (SIZE (l..MaxNrofSpatialRelationInfos-rl6)) OF
    OPTIONAL, -- Need N
resourceGroupToAddModList-rl6 SEQUENCE (SIZE (l..maxNrofPUCCH-ResourceGroups-rl6)) OF PUCCH-ResourceGroup-rl6
    OPTIONAL, -- Need N
resourceGroupToReleaseList-rl6 SEQUENCE (SIZE (l..maxNrofPUCCH-ResourceGroups-rl6)) OF PUCCH-ResourceGroupId-rl6
    OPTIONAL, -- Need N
sps-PUCCH-AN-List-rl6 SetupRelease { SPS-PUCCH-AN-List-rl6} OPTIONAL, -- Need. M
schedulingRequestResourceToAddModListExt-vl6l0 SEQUENCE (SIZE (l..maxNrofSR-Resources)) OF SchedulingRequestResourceConfigExt-vl6lO
        OPTIONAL -- Need. N
]],
[ [
format0-rl7 SetupRelease { PUCCH-FormatConfig } OPTIONAL, -- Need M
format2Ext-rl7 SetupRelease { PUCCH-FormatConfigExt-rl7} OPTIONAL, -- Need M
format3Ext-rl7 SetupRelease { PUCCH-FormatConfigExt-rl7} OPTIONAL, -- Need M
format4Ext-rl7 SetupRelease { PUCCH-FormatConfigExt-rl7 } OPTIONAL, -- Need M
ul-AccessConfigListDCI-l-2-rl7 SetupRelease { UL-AccessConfigListDCI-l-2-rl7} OPTIONAL, -- Need M
mappingPattern-rl7 ENUMERATED {cyclicMapping, sequentialMapping} OPTIONAL, -- Need R
powerControlSetInfoToAddModList-rl7 SEQUENCE (SIZE (l..maxNrofPowerControlSetInfos-rl7)) OF PUCCH-PowerControlSetInfo-rl7
    OPTIONAL, -- Need N
powerControlSetInfoToReleaseList-rl7 SEQUENCE (SIZE (l..maxNrofPowerControlSetInfos-rl7)) OF PUCCH-PowerControlSetInfoId-rl7
OPTIONAL, -- Need N
secondTPCFieldDCI-l-l-rl7 ENUMERATED {enabled} OPTIONAL, -- Need R
secondTPCFieldDCI-1-2-rl7 ENUMERATED {enabled} OPTIONAL, -- Need R
dl-DataToUL-ACK-rl7 SetupRelease { DL-DataToUL-ACK-rl7 } OPTIONAL, -- Need M
dl-DataToUL-ACK-DCI-1-2-r17 SetupRelease { DL-DataToUL-ACK-DCI-1-2-rl7} OPTIONAL, -- Need M
ul-AccessConfigListDCI-l-l-rl7 SetupRelease { UL-AccessConfigListDCI-l-l-rl7} OPTIONAL, -- Need M
schedulingRequestResourceToAddModListExt-vl700 SEQUENCE (SIZE (l..maxNrofSR-Resources)) OF SchedulingRequestResourceConfigExt-vl700
    OPTIONAL, -- Need N
dl SetupRelease [ DMRS-BundlingPUCCH-Config-rl7 } OPTIONAL, -- Need M
dl-DataToUL-ACK-vl700 SEQUENCE (SIZE (1..8)) OF INTEGER (16..31) OPTIONAL, -- Need M
dl-DataToUL-ACK-MulticastDCI-Format4-l-rl7 SetupRelease { DL-DataToUL-ACK-MulticastDCI-Format4-l-rl7 } OPTIONAL, -- Need M
sps-PUCCH-AN-ListMulticast-rl7 SetupRelease { SPS-PUCCH-AN-List-rl6} OPTIONAL -- Need M
```


ETSI


--- Page 690  ---


3GPP TS 38.331 version 17.0.0 Release 17
689
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]]
}
PUCCH-FormatConfig ::= SEQUENCE {
    interslotFrequencyHopping
    additionalDMR
    maxCodeRate
    nrofSlots
    pi2BPSK
    simultaneousHARQ-ACK-CSI
}
PUCCH-FormatConfigExt-rl7 ::= SEQUENCE [
    maxCodeRateLP-rl7
    ...
}
PUCCH-MaxCodeRate ::= ENUMERATED {zeroDot08, zeroDot15, zeroDot25, zeroDot35, zeroDot45, zeroDot60, zeroDot80}
-- A set with one or more PUCCH resources
PUCCH-ResourceSet ::= SEQUENCE {
    pucch-ResourceSetId PUCCH-ResourceSetId,
    resourceList SEQUENCE (SIZE (l..maxNrofPUCCH-ResourcesPerSet)) OF PUCCH-ResourceId,
    maxPayloadSize INTEGER(4..256) OPTIONAL -- Need R
}
PUCCH-ResourceSetId::= INTEGER (0..maxNrofPUCCH-ResourceSets-1)
PUCCH-Resource ::= SEQUENCE {
    pucch-ResourceId PUCCH-ResourceId,
    startingPRB PRB-Id,
    intraSlotFrequencyHopping ENUMERATED { enabled }
    secondHopPRB
    format
        format0
        formatl
        format2
        format3
        focormat3,
    }
}
PUCCH-ResourceExt-vl610 ::= SEQUENCE {
    interlaceAllocation-rl6 SEQUENCE {
        rb-SetIndex
        interlace0
            scsl5
            ses 30
        }
    } OPTIONAL, --Need. R
    format-vl610 CHOICE {
        interlacel-vl610 INTEGER (0..9),
        occ-vl610
            occ-Length-vl610
                SEQUENCE {
                            ENUMERATED {n2,n4} OPTIONAL, -- Need. M
```


ETSI


--- Page 691  ---


3GPP TS 38.331 version 17.0.0 Release 17
690
ETSI TS 138331 V17.0.0 (2022-05)
```
            occ-Index-vl610
        }
    }
    ...,
    [ [
    formatExt-vl700 SEQUENCE {
        nrofprBs-rl7
    }
```

```
    ] ]
}
PUCCH-ResourceId ::= INTEGER (0..maxNrofPUCCH-Resources-1)
PUCCH-format0 ::=
    initialCyclicShift
    nrofSymbols
    startingSymbolIndex
}
PUCCH-formatl ::=
    initialCyclicShift
    nrofSymbols
    startingSymbolIndex
    timeDomainOCC
}
PUCCH-format2 ::=
    nrofprBs
    nrofSymbols
    startingSymbolIndex
}
PUCCH-format3 ::=
    nrofpRBs
    nrofSymbols
    startingSymbolIndex
}
PUCCH-format4 ::=
    nrofSymbols
    occ-Length
    occ-Index
    startingSymbolIndex
}
PUCCH-ResourceGroup-rl6 ::=
    pucch-ResourceGroupId-rl6
    resourcePerGroupList-rl6
}
PUCCH-ResourceGroupId-rl6 ::=
```

```
l
```


ETSI


--- Page 692  ---


3GPP TS 38.331 version 17.0.0 Release 17
691
ETSI TS 138331 V17.0.0 (2022-05)
```
DL-DataToUL-ACK-r16 ::=
DL-DataToUL-ACK-rl7 ::=
DL-DataToUL-ACK-DCI-l-2-rl6 ::= SEQUENCE (SIZE (1..8)) OF INTEGER (0..15)
DL-DataToUL-ACK-DCI-l-2-rl7 ::= SEQUENCE (SIZE (1..8)) OF INTEGER (0..127)
UL-AccessConfigListDCI-l-l-rl6 := SEQUENCE (SIZE (l..16)) OF INTEGER (0..15)
UL-AccessConfigListDCI-1-2-r17 := SEQUENCE (SIZE (1..16)) OF INTEGER (0..15)
UL-AccessConfigListDCI-l-l-rl7 ::= SEQUENCE (SIZE (1..3)) OF INTEGER (0..2)
DL-DataToUL-ACK-MulticastDCI-Format4-l-rl7 ::= SEQUENCE (SIZE (1..8)) OF INTEGER (0..15)
-- TAG-PUCCH-CONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 693  ---


3GPP TS 38.331 version 17.0.0 Release 17
692
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUCCH-Config field descriptions \\
\hline \begin{tabular}{l}
di-DataToUL-ACK, di-DataToUL-ACK-DCI-1-2 \\
List of timing for given PDSCH to the DL ACK (see TS 38.213 [13], clause 9.1.2). The field di-DataToUL-ACK applies to DCI format 1_1 and the field dl-DataToUL-ACK-DCI-12 applies to DCI format 1_2 (see TS 38.212 [17], clause 7.3 .1 and TS 38.213 [13], clause 9.2.3). If dl-DataToUL-ACK-r16 or dl-DataToUL-ACK-r17 is signalled, UE shall ignore the \( d \)-DataToUL-ACK (without suffix). The value -1 corresponds to "inapplicable value" for the case where the A/N feedback timing is not explicitly included at the time of scheduling PDSCH. The fields dl-DataToUL-ACK-r17 and dl-DataToUL-ACK-DCI-1-2-r17 are only applicable for SCS of 480 kHz or 960 kHz .
\end{tabular} \\
\hline \begin{tabular}{l}
di-DataToUL-ACK-MulticastDCI-Format4-1 \\
List of timing for given group-common PDSCH to the DL ACK (see TS 38.213 [13], clause 9.1.2). The field dl-DataToUL-ACK-MulticastDciFormat4-1 applies to DCI format 1_0 for MBS multicast (see TS 38.212 [17], clause 7.3.1 and TS 38.213 [13], clause 9.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-BundlingPUCCH-Config \\
Configuration of the parameters for DMRS bundling for PUCCH (see TS 38.214 [19], clause 6.1.7). DMRS bundling for PUCCH is not supported for PUCCH format 0/2.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-UplinkTransformPrecodingPUCCH \\
This field is used for PUCCH formats 3 and 4 according to TS 38.211, Clause 6.4.1.3.3.1.
\end{tabular} \\
\hline \begin{tabular}{l}
format0 \\
Parameters that are common for all PUCCH resources of format 0 .
\end{tabular} \\
\hline \begin{tabular}{l}
format1 \\
Parameters that are common for all PUCCH resources of format 1.
\end{tabular} \\
\hline \begin{tabular}{l}
format2 \\
Parameters that are common for all PUCCH resources of format 2.
\end{tabular} \\
\hline \begin{tabular}{l}
format3 \\
Parameters that are common for all PUCCH resources of format 3.
\end{tabular} \\
\hline \begin{tabular}{l}
format4 \\
Parameters that are common for all PUCCH resources of format 4
\end{tabular} \\
\hline \begin{tabular}{l}
mappingPattern \\
Indicates whether the UE should follow Cyclical mapping pattern or Sequential mapping pattern for when a PUCCH resource used for repetitions of a PUCCH transmission includes first and second spatial settings for FR2, or first and second sets of power control parameters for FR1 (see TS 38.213 [13], clause 9.2.6)
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfBitsForPUCCH- ResourcelndicatorDCI-1-2 \\
Configuration of the number of bits for "PUCCH resource indicator" in DCI format 1 _ 2 (see TS 38.212 [17], clause 7.3 .1 and TS 38.213 [13], clause 9.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
powerControlSetinfoToAddModList \\
Configures power control sets for repetition of a PUCCH transmission in FR1. The two power control sets to be used are determined by the XX MAC CE (see TS 38.321 [3], clause \( x x x \) ).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceGroupToAddModList, resourceGroupToReleaseList \\
Lists for adding and releasing groups of PUCCH resources that can be updated simultaneously for spatial relations with a MAC CE
\end{tabular} \\
\hline \begin{tabular}{l}
resourceSetToAddModList, resourceSetToReleaseList \\
Lists for adding and releasing PUCCH resource sets (see TS 38.213 [13], clause 9.2).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceToAddModList, resourceToAddModListExt, resourceToReleaseList \\
Lists for adding and releasing PUCCH resources applicable for the UL BWP and serving cell in which the PUCCH-Config is defined. The resources defined herein are referred to from other parts of the configuration to determine which resource the UE shall use for which report. If the network includes of resource ToAddModListExt, it includes the same number of entries, and listed in the same order, as in resource ToAddModList.
\end{tabular} \\
\hline \begin{tabular}{l}
secondTPCFieldDCI-1-1, secondTPCFieldDCI-1-2 \\
A second TPC field can be configured via RRC for DCI-1-1 and DCI-1-2. Each TPC field is for each closed-loop index value respectively (i.e., 1st/2nd TPC fields correspond to "closedLoopIndex" value \( =0 \) and 1.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 694  ---


3GPP TS 38.331 version 17.0.0 Release 17
693
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
spatialRelationinfoToAddModList, spatialRelationInfoToAddModListSizeExt , spatialRelationinfoToAddModListExt \\
Configuration of the spatial relation between a reference RS and PUCCH. Reference RS can be SSB/CSI-RS/SRS. If the list has more than one element, MAC-CE selects a single element (see TS 38.321 [3], clause 5.18 .8 and TS 38.213 [13], clause 9.2.2). The UE shall consider entries in spatialRelation/nfoToAddModList and in spatialRelation/nfo ToAddModListSizeExt as a single list, i.e. an entry created using spatialRelation/nfoToAddModList can be modified using spatialRelation/nfo ToAddModListSizeExt (or deleted using spatialRelationinfoToReleaseListSizeExt) and vice-versa. If the network includes spatialRelation/nfo ToAddModListExt, it includes the same number of entries, and listed in the same order, as in the concatenation of spatialRelation/nfo ToAddModList and of spatialRelation/nfo ToAddModListSize Ext.
\end{tabular} \\
\hline \begin{tabular}{l}
spatialRelationinfoToReleaseList, spatialRelationinfoToReleaseListSizeExt, spatialRelationinfoToReleaseListExt \\
Lists of spatial relation configurations between a reference RS and PUCCH to be released by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-PUCCH-AN-List \\
Indicates a list of PUCCH resources for DL SPS HARQ ACK. The field maxPayloadSize is absent for the first and the last SPS-PUCCH-AN in the list. If configured, this overrides n1PUCCH-AN in SPS-config.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-PUCCH-AN-ListMulticast \\
The field is used to configure the list of PUCCH resources per HARQ ACK codebook for MBS multicast.
\end{tabular} \\
\hline \begin{tabular}{l}
subslotLengthForPUCCH \\
Indicate the sub-slot length for sub-slot based PUCCH feedback in number of symbols (see TS 38.213 [13], clause 9). Value \( n 2 \) corresponds to 2 symbols, value \( n 6 \) corresponding to 6 symbols, value \( n 7 \) corresponds to 7 symbols. For normal CP, the value is either \( n 2 \) or \( n 7 \). For extended CP, the value is either \( n 2 \) or \( n 6 \).
\end{tabular} \\
\hline \begin{tabular}{l}
ul-AccessConfigListDCI-1-1, ul-AccessConfigListDCI-1-2 \\
List of the combinations of cyclic prefix extension and UL channel access type (See TS 38.212 [17], Clause 7.3.1) applicable, respectively, to DCI format 1_1 and DCI format 1_2. The field \( u \)-AccessConfigListDCI-1-1-r17 indicates a list which only contains UL channel access types and is only applicable for FR2-2 (see TS 38.212 [17], Table \\
7.3.1.2.2-6A).
\end{tabular} \\
\hline
\end{tabular}

PUCCH-format3 field descriptions
nrofPRBs
The supported values are \( 1,2,3,4,5,6,8,9,10,12,15 \) and 16 . The UE shall ignore this field when formatExt is configured.

ETSI


--- Page 695  ---


3GPP TS 38.331 version 17.0.0 Release 17
694
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUCCH-FormatConfig, PUCCH-FormatConfigExt field descriptions \\
\hline \begin{tabular}{l}
additionalDMRS \\
If the field is present, the UE enables 2 DMRS symbols per hop of a PUCCH Format 3 or 4 if both hops are more than \( X \) symbols when FH is enabled ( \( X=4 \) ). And it enables 4 DMRS symbols for a PUCCH Format 3 or 4 with more than \( 2 \mathrm{X}+1 \) symbols when FH is disabled ( \( \mathrm{X}=4 \) ). The field is not applicable for format 0 , 1 and 2 . See TS 38.213 [13], clause 9.2.2.
\end{tabular} \\
\hline \begin{tabular}{l}
intersiotFrequencyHopping \\
If the field is present, the UE enables inter-slot frequency hopping when PUCCH Format \( 0,1,3 \) or 4 is repeated over multiple slots. For long PUCCH over multiple slots, the intra and inter slot frequency hopping cannot be enabled at the same time for a UE. The field is not applicable for format 2. See TS 38.213 [13], clause 9.2.6.
\end{tabular} \\
\hline \begin{tabular}{l}
maxCodeRate \\
Max coding rate to determine how to feedback UCI on PUCCH for format 2, 3 or 4. The field is not applicable for format 0 and 1. See TS 38.213 [13], clause 9.2.5.
\end{tabular} \\
\hline \begin{tabular}{l}
maxCodeRateLP \\
Max coding rate to determine how to feedback UCI on PUCCH for format 2, 3 or 4. The field is not applicable for format 0 and 1 . This field configures additional max code rate in the second entry of PUCCH-ConfigurationList-r16 for multiplexing low-priority (LP) HARQ-ACK and high-priority (HP) UCI in a PUCCH as described Clause 9.2.5.3 of TS 38.213 [13]. The field is absent for the first entry of PUCCH-ConfigurationList-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofSlots \\
Number of slots with the same PUCCH. When the field is absent the UE applies the value \( n 1 \). The field is not applicable for format 2. See TS 38.213 [13], clause 9.2.6.
\end{tabular} \\
\hline \begin{tabular}{l}
pi2BPSK \\
If the field is present, the UE uses pi/2 BPSK for UCI symbols instead of QPSK for PUCCH. The field is not applicable for format 0, 1 and 2. See TS 38.213 [13], clause 9.2.5.
\end{tabular} \\
\hline \begin{tabular}{l}
rb-Setindex \\
Indicates the RB set where PUCCH resource is allocated.
\end{tabular} \\
\hline \begin{tabular}{l}
simultaneousHARQ-ACK-CSI \\
If the field is present, the UE uses simultaneous transmission of CSI and HARQ-ACK feedback with or without SR with PUCCH Format 2, 3 or 4. See TS 38.213 [13], clause 9.2.5. When the field is absent the UE applies the value off. The field is not applicable for format 0 and 1.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 696  ---


3GPP TS 38.331 version 17.0.0 Release 17
695
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUCCH-Resource, PUCCH-ResourceExt field descriptions \\
\hline \begin{tabular}{l}
format, formatExt \\
Selection of the PUCCH format (format 0-4) and format-specific parameters, see TS 38.213 [13], clause 9.2. format0 and format1 are only allowed for a resource in a first PUCCH resource set. format2, format3 and format4 are only allowed for a resource in non-first PUCCH resource set. The network can only configure formatExt-v1610 when format is set to format 2 or format3. The network only configures format \( E x t \)-v17XX when format is set to format0, format1 or format4.
\end{tabular} \\
\hline \begin{tabular}{l}
interlace0 \\
This is the only interlace of interlaced PUCCH Format 0 and 1 and the first interlace for interlaced PUCCH Format 2 and 3.
\end{tabular} \\
\hline \begin{tabular}{l}
interlace1 \\
A second interlace, in addition to interlace 0 , as specified in TS 38.213 [13], clause 9.2.1. For 15 KHz SCS, values \( \{0.9\} \) are applicable; for 30 Khz SCS, values \( \{0.4\} \) are applicable. For 15 kHz SCS, the values of interlace 1 shall satisfy interlace \( 1=\bmod ( \) interlace \( 0+\mathrm{X}, 10) \) where \( \mathrm{X}=1,-1 \), or 5 .
\end{tabular} \\
\hline \begin{tabular}{l}
intraSlotFrequencyHopping \\
Enabling intra-slot frequency hopping, applicable for all types of PUCCH formats. For long PUCCH over multiple slots, the intra and inter slot frequency hopping cannot be enabled at the same time for a UE. See TS 38.213 [13], clause 9.2.1.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofPRBs \\
Indicates the number of PRBs used per PUCCH resource for the PUCCH format, see TS 38.213 [13], clause 9.2.1. This field is applicable for PUCCH format0, format1, and format4 in FR2-2. The supported values for format4 are 1,2,3,4,5,6,8,9,10,12,15 and 16.
\end{tabular} \\
\hline \begin{tabular}{l}
occ-Index \\
Indicates the orthogonal cover code index (see TS 38.213 [13], clause 9.2.1). This field is Applicable when uselnteriacePUCCH-Dedicated-r16 is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
occ-Length \\
Indicates the orthogonal cover code length (see TS 38.213 [13], clause 9.2.1). Applicable when use/nteriacePUCCH-Dedicated-r16 is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-RepetitionNrofSlots \\
Configuration of PUCCH repetition factor per PUCCH resource with associated scheduling DCI corresponding to Rel-17 dynamic PUCCH repetition. This field is applicable when Rel-17 dynamic PUCCH repetition is enabled. For a PUCCH resource, if both the field pucch-RepetitionNrofSlots and the field nrofSlots are present, the field nrofSiots is ignored and apply the value of pucch-RepetitionNrofSlots corresponding to Rel-17 dynamic PUCCH repetition. If this field is absent in a PUCCH resource with associated scheduling DCI , the UE applies the value of field nrofSlots.
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-Resourceld \\
Identifier of the PUCCH resource.
\end{tabular} \\
\hline \begin{tabular}{l}
secondHopPRB \\
Index of first PRB after frequency hopping of PUCCH. This value is applicable for intra-slot frequency hopping (see TS 38.213 [13], clause 9.2.1) or inter-slot frequency hopping (see TS 38.213 [13], clause 9.2.6).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PUCCH-ResourceSet field descriptions \\
\hline \begin{tabular}{l}
maxPayloadSize \\
Maximum number of UCI information bits that the UE may transmit using this PUCCH resource set (see TS 38.213 [13], clause 9.2.1). In a PUCCH occurrence, the UE chooses the first of its PUCCH-ResourceSet which supports the number of bits that the UE wants to transmit. The field is absent in the first set (Set0) and in the last configured set since the UE derives the maximum number of UCI information bits as specified in TS 38.213 [13], clause 9.2.1. This field can take integer values that are multiples of 4.
\end{tabular} \\
\hline \begin{tabular}{l}
resourceList \\
PUCCH resources of format0 and format1 are only allowed in the first PUCCH resource set, i.e., in a PUCCH-ResourceSet with pucch-ResourceSet/d \( =0 \). This set may contain between 1 and 32 resources. PUCCH resources of format2, format3 and format4 are only allowed in a PUCCH-ResourceSet with pucch-ResourceSetld > 0. If present, these sets contain between 1 and 8 resources each. The UE chooses a PUCCH-Resource from this list as specified in TS 38.213 [13], clause 9.2.3. Note that this list contains only a list of resource IDs. The actual resources are configured in PUCCH-Config.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 697  ---


3GPP TS 38.331 version 17.0.0 Release 17
696
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline P/2-BPSK & \begin{tabular}{l} 
The field is optionally present, Need R, if format3 and/or format4 are configured and pi2BPSK is configured in each of them. \\
It is absent, Need R otherwise.
\end{tabular} \\
\hline
\end{tabular}

-
PUCCH-ConfigCommon

The IE PUCCH-ConfigCommon is used to configure the cell specific PUCCH parameters.
PUCCH-ConfigCommon information element
```
-- ASNISTART
-- TAG-PUCCH-CONFIGCOMMON-START
```

```
PUCCH-ConfigCommon ::=
    pucch-ResourceCommon
    pucch-GroupHopping
    hoppingId.
    p0-nominal
        ...,
        [ [
    nrofpRBs
    intra-SlotFH-rl7
    pucch-ResourceCommon-RedCap-rl7
    pucch-ResourceConfig-RedCap-rl7
    ] ]
}
-- TAG-PUCCH-CONEIGCOMMON-STOP
-- ASNISTOP
```

```
SEQUENCE {
    INTEGER (0..15) OPTIONAL, -- Cond InitialBWP-Only
    ENUMERATED [ neither, enable, disable },
    INTEGER (0..1023)
    INTEGER (-202..24) OPTTONAL -- Need R
    INTEGER (1..16) OPTIONAL, -- Need. R
    ENUMERATED {fromLowerEdge, fromUpperEdge} OPTIONAL, -- Need R
    INTEGER (0..15) OPTIONAL, -- Need R
    ENUMERATED {n2, n3, n4, n6, n8, n9, nl0, nl2} OPTIONAL -- Need R
```

```
        ] ]
}
    ASNISTOP
```


ETSI


--- Page 698  ---


3GPP TS 38.331 version 17.0.0 Release 17
697
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUCCH-ConfigCommon field descriptions \\
\hline \begin{tabular}{l}
hoppingld \\
Cell-specific scrambling ID for group hopping and sequence hopping if enabled, see TS 38.211 [16], clause 6.3.2.2.
\end{tabular} \\
\hline \begin{tabular}{l}
intra-SlotFH-r17 \\
In case a separate initial UL BWP is configured for RedCap UEs, the presence of this parameter indicates whether intra-slot PUCCH frequency hopping within the separate initial UL BWP in the common PUCCH resource is enabled for RedCap UEs. If this field is absent, intra-slot PUCCH frequency hopping within RedCap-specific initial UL BWP is enabled. If this field is present, intra-slot PUCCH frequency hopping within RedCap-specific initial UL BWP is disabled and each PUCCH resource is mapped to a single PRB on one side of the UL BWP and this parameter determines whether the PRB index in the PRB mapping is counted in increasing order from the lower edge or in decreasing order from the upper edge of the UL BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofPRBs \\
Indicates the number of PRBs used per PUCCH resource for PUCCH format 0 and format 1 in FR2-2, see TS 38.213 [13], clause 9.2.1.
\end{tabular} \\
\hline \begin{tabular}{l}
po-nominal \\
Power control parameter P0 for PUCCH transmissions. Value in dBm. Only even values (step size 2) allowed (see TS 38.213 [13], clause 7.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-GroupHopping \\
Configuration of group- and sequence hopping for all the PUCCH formats \( 0,1,3 \) and 4 . Value neither implies neither group or sequence hopping is enabled. Value enable enables group hopping and disables sequence hopping. Value disable disables group hopping and enables sequence hopping (see TS 38.211 [16], clause 6.3.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-ResourceCommon \\
An entry into a 16-row table where each row configures a set of cell-specific PUCCH resources/parameters. The UE uses those PUCCH resources until it is provided with a dedicated PUCCH-Config (e.g. during initial access) on the initial uplink BWP. Once the network provides a dedicated PUCCH-Config for that bandwidth part the UE applies that one instead of the one provided in this field (see TS 38.213 [13], clause 9.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-ResourceCommon-RedCap \\
An entry into a 16-row table where each row configures a set of cell-specific PUCCH resources/parameters for RedCap UEs. The UE uses those PUCCH resources until it is provided with a dedicated PUCCH -Config (e.g. during initial access) on the initial uplink BWP. Once the network provides a dedicated PUCCH -Config for that bandwidth part the UE applies that one instead of the one provided in this field (see TS 38.213 [13], clause 9.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-ResourceConfig-RedCap \\
When intra-slot PUCCH frequency hopping within RedCap-specific initial UL BWP is disabled, each common PUCCH resource is mapped to a single PRB on one side of the UL BWP. This parameter determines an additional PRB offset in the PRB mapping for the PUCCH resource. If the field is not configured, the UE shall assume an additional PRB offset of zero.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline InitialBWP-Only & The field is mandatory present in the PUCCH -ConfigCommon of the initial BWP (BWP\#0) in SIB1. It is absent in other BWPs. \\
\hline
\end{tabular}
- PUCCH-ConfigurationList

The IE PUCCH-ConfigurationList is used to configure UE specific PUCCH parameters (per BWP) for two simultaneously constructed HARQ-ACK codebooks. See TS 38.213 [13], clause 9.1.

PUCCH-ConfigurationList information element
-- ASNISTART
-- TAG-PUCCH-CONFIGURATIONLIST-START
PUCCH-ConfigurationList-rl6 : := SEQUENCE (SIZE (1.2)) OF PUCCH-Config

ETSI


--- Page 699  ---


3GPP TS 38.331 version 17.0.0 Release 17
698
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-PUCCH-CONFIGURATIONLIST-STOP
-- ASNISTOP
- PUCCH-PathlossReferenceRS-Id

The IE PUCCH-PathlossReferenceRS-Id is an ID for a reference signal (RS) configured as PUCCH pathloss reference (see TS 38.213 [13], clause 7.2).
PUCCH-PathlossReferenceRS-Id information element
```
-- ASNISTART
-- TAG-PUCCH-PATHLOSSREFERENCERS-ID-START
PUCCH-PathlossReferenceRS-Id := INTEGER (O.maxNrofPUCCH-PathlossReferenceRSs-l)
```

```
-- TAG-PUCCH-PATHLOSSREFERENCERS-ID-STOP
-- ASNISTOP
```

- PUCCH-PowerControl

The IE PUCCH-PowerControl is used to configure UE-specific parameters for the power control of PUCCH.
PUCCH-PowerContro/information element
```
-- ASNISTART
-- TAG-PUCCH-POWERCONTROL-START
PUCCH-PowerControl ::=
    deltaF-PUCCH-f0
    deltaF-PUCCH-fl
    deltaF-PUCCH-f2
    deltaF-PUCCH-f3
    deltaF-PUCCH-f4
    p0-Set
    pathlossReferenceRSs
    twoPUCCH-PC-AdjustmentStates
    ...;
    [ [
    pathlossReferenceRSs-vl610
    ] ]
}
PO-PUCCH ::=
    PO-PUCCH-Id.
    p0-PUCCH-Value
}
```

```
SEQUENCE {
    INTEGER (-16..15)
    INTEGER (-16..15)
    INTEGER (-16..15)
    INTEGER (-16..15)
```

    INTEGER (-16.15) OPTIONAL, -- Need R
    SEQUENCE (SIZE (1..MAXNrofPUCCH-PO-PerSet)) OF PO-PUCCH OPTIONAL, -- Need M
    SEQUENCE (SIZE (1..MAXNrofPUCCH-PathlossReferenceRSs)) OF PUCCH-PathlossReferenceRS
        OPTIONAL, -- Need. M
    ENUMERATED \{twoStates\} OPTIONAL, -- Need S
    SetupRelease [ PathlossReferenceRSs-vl610] OPTIONAL -- Need M

ETSI


--- Page 700  ---


3GPP TS 38.331 version 17.0.0 Release 17
699
ETSI TS 138331 V17.0.0 (2022-05)
```
PO-PUCCH-Id ::= INTEGER (1..8)
```

```
PUCCH-PathlossReferenceRS ::= SEQUENCE {
    pucch-PathlossReferenceRS-Id
        referenceSignal
            ssb-Index
            csi-RS-Index NZP-CSI-RS-ResourceId
        }
}
PUCCH-PathlossReferenceRS-rl6 ::= SEQUENCE [
        pucch-PathlossReferenceRS-Id-r16
        referenceSignal-rl6
            ssb-Index-rl6
            csi-RS-Index-rl6
        }
}
PUCCH-PowerControlSetInfo-rl7 ::= SEQUENCE \
        pucch-PowerControlSetInfoId-rl7 PUCCH-PowerControlSetInfoId-rl7,
        p0-PUCCH-Id-rl7
        pucch-ClosedLoopIndex-rl7 ENUMERATED [ i0, il },
        pucch-PathlossReferenceRS-Id-rl7 PUCCH-PathlossReferenceRS-Id
    -- Editor's Note: Check if new id -rll is needed to cover full
        --Editor's note: to be aligned with the corresponding MAC CE design
}
PUCCH-PowerControlSetInfoId-rl7 := INTEGER (1.. maxNrofPowerControlSetInfos-rl7)
-- TAG-PUCCH-POWERCONTROL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline & PO-PUCCH field descriptions \\
\hline \begin{tabular}{l}
p0-PUCCH-Value \\
P0 value for PUCCH with 1 dB step size.
\end{tabular} & \\
\hline
\end{tabular}

ETSI


--- Page 701  ---


3GPP TS 38.331 version 17.0.0 Release 17
700
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUCCH-PowerControl field descriptions \\
\hline \begin{tabular}{l}
deltaF-PUCCH-fO \\
deltaF for PUCCH format 0 with 1dB step size (see TS 38.213 [13], clause 7.2).
\end{tabular} \\
\hline \begin{tabular}{l}
deltaF-PUCCH-f1 \\
deltaF for PUCCH format 1 with 1dB step size (see TS 38.213 [13], clause 7.2).
\end{tabular} \\
\hline \begin{tabular}{l}
deltaF-PUCCH-f2 \\
deltaF for PUCCH format 2 with 1dB step size (see TS 38.213 [13], clause 7.2).
\end{tabular} \\
\hline \begin{tabular}{l}
deltaF-PUCCH-f3 \\
deltaF for PUCCH format 3 with 1dB step size (see TS 38.213 [13], clause 7.2).
\end{tabular} \\
\hline \begin{tabular}{l}
deltaF-PUCCH-f4 \\
deltaF for PUCCH format 4 with 1dB step size (see TS 38.213 [13], clause 7.2).
\end{tabular} \\
\hline \begin{tabular}{l}
p0-Set \\
A set with dedicated P0 values for PUCCH, i.e., \{P01, P02,...\} (see TS 38.213 [13], clause 7.2).
\end{tabular} \\
\hline \begin{tabular}{l}
pathlossReferenceRSs, pathlossReferenceRSs-v1610 \\
A set of Reference Signals (e.g. a CSI-RS config or a SS block) to be used for PUCCH pathloss estimation. Up to maxNrofPUCCH-PathlossReference-RSs may be configured. If the field is not configured, the UE uses the SSB as reference signal (see TS 38.213 [13], clause 7.2). The set includes Reference Signals indicated in pathlossReferenceRSs (without suffix) and in pathlossReferenceRSs-v1610. The UE maintains pathlossReferenceRSs and pathlossReferenceRSs-v1610 separately: Receiving pathlossReferenceRSs-v1610 set to release releases only the entries that were configured by pathlossReferenceRSs-v1610, and receiving pathlossReferenceRSs-v1610 set to setup replaces only the entries that were configured by pathlossReferenceRSs-v1610 with the newly signalled entries.
\end{tabular} \\
\hline \begin{tabular}{l}
twoPUCCH-PC-AdjustmentStates \\
Number of PUCCH power control adjustment states maintained by the UE (i.e., \( g(i) \) ). If the field is present (n2) the UE maintains two power control states (i.e., \( g(i, 0) \) and \( g(i, 1) \) ). If the field is absent, it maintains one power control state (i.e., \( g(i, 0) \) ) (see TS 38.213 [13], clause 7.2).
\end{tabular} \\
\hline
\end{tabular}
- PUCCH-SpatialRelationInfo

The IE PUCCH-SpatialRelationInfo is used to configure the spatial setting for PUCCH transmission and the parameters for PUCCH power control, see TS 38.213, [13], clause 9.2.2.

PUCCH-Spatia/Re/ation/nfo information element
```
-- ASNISTART
-- TAG-PUCCH-SPATIALRELATIONINFO-START
```

```
PUCCH-SpatialRelationInfo ::=
    pucch-SpatialRelationInfoId
    servingCellId
    referenceSignal
        ssb-Index
        csi-RS-Index
        srs
    },
    pucch-PathlossReferenceRS-Id
    pO-PUCCH-Id.
    closedLoopIndex
}
PUCCH-SpatialRelationInfoExt-rl6 ::= SEQUENCE [
```


ETSI


--- Page 702  ---


3GPP TS 38.331 version 17.0.0 Release 17
701
ETSI TS 138331 V17.0.0 (2022-05)
```
}
PUCCH-SRS ::= SEQUENCE \
    resource
    uplinkBWP BWP-Id
}
-- TAG-PUCCH-SPATIALRELATIONINFO-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PUCCH-SpatialRelationinfo field descriptions \\
\hline \begin{tabular}{l}
pucch-PathLossReferenceRS-Id \\
When pucch-PathLossReferenceRS-Id-v1610 is configured, the UE shall ignore pucch-PathLossReferenceRS-Id (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
pucch-SpatialRelationinfold \\
When pucch-SpatialRelationinfold-v1610 is configured, the UE shall ignore pucch-SpatialRelationInfold (without suffix). If pucch-SpatialRelation/nfold-v1610 is absent, the UE shall use the pucch-SpatialRelationinfold (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellid \\
If the field is absent, the UE applies the ServCellld of the serving cell in which this PUCCH-SpatialRelation/nfo is configured
\end{tabular} \\
\hline
\end{tabular}
- PUCCH-SpatialRelation/nfo-Id

The IE PUCCH-SpatialRelationInfo-Id is used to identify a PUCCH-SpatialRelationInfo
PUCCH-Spatia/Re/ationInfo-Id information element
```
-- ASNISTART
-- TAG-PUCCH-SPATIALRELATIONINFO-START
PUCCH-SpatialRelationInfoId ::= INTEGER (l..maxNrofSpatialRelationInfos)
PUCCH-SpatialRelationInfoId-rl6 := INTEGER (l..maxNrofSpatialRelationInfos-rl6)
```

```
-- TAG-PUCCH-SPATIALRELATIONINFO-STOP
-- ASNISTOP
```

- PUCCH-TPC-CommandConfig

The IE PUCCH-TPC-CommandConfig is used to configure the UE for extracting TPC commands for PUCCH from a group-TPC messages on DCI.

ETSI


--- Page 703  ---


3GPP TS 38.331 version 17.0.0 Release 17
702
ETSI TS 138331 V17.0.0 (2022-05)

PUCCH-TPC-CommandConfig information element
```
-- ASNISTART
-- TAG-PUCCH-TPC-COMMANDCONFIG-START
PUCCH-TPC-CommandConfig ::= SEQUENCE \
    tpc-IndexPCell INTEGER (1..15) OPTIONAL, -- Cond PDCCH-OfSpCell
```

```
    ...;
    [ [
    tpc-IndexPUCCH-sSCell-rl7 INTEGER (1..15)
    tpc-Index PUCCH-sScellSecondaryPUCCHgroup-rl7
    ] ]
}
-- TAG-PUCCH-TPC-COMMANDCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PUCCH-TPC-CommandConfig field descriptions \\
\hline \begin{tabular}{l}
tpc-IndexPCell \\
An index determining the position of the first bit of TPC command (applicable to the SpCell) inside the DCI format 2-2 payload.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-IndexPUCCH-SCell \\
An index determining the position of the first bit of TPC command (applicable to the PUCCH SCell) inside the DCI format 2-2 payload.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-IndexPUCCH-sSCell, tpc-indexPUCCH-sSCellSecondaryPUCCHgroup \\
An index determining the position of the first bit of TPC command (applicable to the alternative PUCCH cell for PUCCH cell switching) inside the DCI format 2-2 payload, for the primary PUCCH group and the secondary PUCCH group respectively.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline PDCCH-OfSpcell & The field is mandatory present if the PUCCH-TPC-CommandConfig is provided in the PDCCH-Config for the SpCell. Otherwise, the field is absent, Need R. \\
\hline PDCCH-ofSpCellOrPUCCH-SCell & \begin{tabular}{l}
The field is mandatory present if the PUCCH-TPC-CommandConfig is provided in the PDCCH-Config for the PUCCH-SCell. The field is optionally present, need R , if the UE is configured with a PUCCH SCell in this cell group and if the PUCCH-TPCCommand Config is provided in the PDCCH-Config for the SpCell. \\
Otherwise, the field is absent, Need R.
\end{tabular} \\
\hline twoPUCCHgroup & This field is optionally present, Need R, if secondary PUCCH group is configured. It is absent otherwise. \\
\hline
\end{tabular}
- PUSCH-Config

The IE PUSCH-Config is used to configure the UE specific PUSCH parameters applicable to a particular BWP.
PUSCH-Config information element
-- ASNISTART
-- TAG-PUSCH-CONFIG-START

ETSI


--- Page 704  ---


3GPP TS 38.331 version 17.0.0 Release 17
703
ETSI TS 138331 V17.0.0 (2022-05)
```
PUSCH-Config ::=
    dataScramblingIdentityPUSCH
    txConfig
    dmrs-UplinkForPUSCH-MappingTypeA
    dmrs-UplinkForPUSCH-MappingTypeB
    pusch-PowerControl
    frequencyHopping
    frequencyHoppingOffsetLists
        SEQUENCE (SIZE (1.4)) OF INTEGER (1.. maxNrofPhysicalResourceBlocks-1)
    resourceAllocation
    pusch-TimeDomainAllocationList
    pusch-AggregationFactor
    mcs-Table
    mcs-TableTransformPrecoder
    transformPrecoder
    codebookSubset
        {qanz 10, qan64 Lows
    maxRank
    rbg-Size
    uci-OnPUSCH
    tp-pi2BPSK
    ...;
    [ [
```

```
    -- Start of the parameters for DCI format 0_2 introduced in V16.1.0
```

```
    frequencyHoppingDCI-0-2-rl6 CHOICE {
        pusch-RepTypeA ENUMERATED {intraSlot, interSlot},
        pusch-RepTypeB ENUMERATED {interRepetition, interSlot}
```

```
                OPTIONAL, -- Cond codebookBased.
    invalidSymbolPatternIndicatorDCI-0-2-r16
    maxRankDCI-0-2-r16
    mcs-TableDCI-0-2-r16
    mcs-TableTransformPrecoderDCI-0-2-r16
    priorityIndicatorDCI-0-2-r16
    pusch-RepTypeIndicatorDCI-0-2-r16
```

```
                OPTIONAL, -- Need. M
    resourceAllocationTypelGranularityDCI-0-2-r16
    uci-OnPUSCH-ListDCI-0-2-r16
    pusch-TimeDomainAllocationListDCI-0-2-r16 SetupRelease { PUSCH-TimeDomainResourceAllocationList-rl6 }
                    OPTIONAL, -- Need. M
    -- End of the parameters for DCI format 0_2 introduced in V16.1.0
    -- Start of the parameters for DCI format 0_l introduced in V16.1.0
    pusch-TimeDomainAllocationListDCI-0-1-r16 SetupRelease { PUSCH-TimeDomainResourceAllocationList-rl6}
```


ETSI


--- Page 705  ---


3GPP TS 38.331 version 17.0.0 Release 17
704
ETSI TS 138331 V17.0.0 (2022-05)
```
    invalidSymbolPatternIndicatorDCI-0-1-rl6 ENUMERATED {enabled}
    priorityIndicatorDCI-0-1-r16 ENUMERATED {enabled}
    pusch-RepTypeIndicatorDCI-0-1-r16 ENUMERATED { pusch-RepTypeA, pusch-RepTypeB}
```

```
    -- End of the parameters for DCI format 0_l introduced in Vl6.1.0
```

```
    pusch-TimeDomainAllocationListForMultiPUSCH-rl6 SetupRelease { PUSCH-TimeDomainResourceAllocationList-rl6}
        OPTIONAL, -- Need. M
```

```
    ]],
    [ [
```

```
    pusch-TimeDomainAllocationListForMultiPUSCH-rl7 SetupRelease { PUSCH-TimeDomainResourceAllocationList-rl7}
                    OPTIONAL, -- Need. M
    pusch-TimeDomainAllocationListDCI-0-2-r17 SetupRelease { PUSCH-TimeDomainResourceAllocationList-rl7}
                    OPTIONAL, -- Need. M
    pusch-TimeDomainAllocationListDCI-0-1-rl7 SetupRelease [ PUSCH-TimeDomainResourceAllocationList-rl7 }
    ul-AccessConfigListDCI-0-1-r17
    minimumSchedulingOffsetK2-rl7
    availableSlotCounting-rl7
    dmrs-BundlingPUSCH-Config-rl7
    harq-ProcessNumberSizeDCI-0-2-vl700
    harq-ProcessNumberSizeDCI-0-1-r17
    ]]
}
UCI-ONPUSCH ::= SEQUENCE \
    betaOffsets
        dynamic SEQUENCE (SIZE (4)) OF BetaOffsets,
        semiStatic BetaOffsets
```

```
    scaling ENUMERATED { f0p5, f0p65, f0p8, fl}
}
```

```
UCI-OnPUSCH-DCI-0-2-rl6 ::= SEQUENCE \
    betaOffsetsDCI-0-2-r16
        dynamicDCI-0-2-r16
        dynamicDCI-0-2-r16 CHOICE \
```


ETSI


--- Page 706  ---


3GPP TS 38.331 version 17.0.0 Release 17
705
ETSI TS 138331 V17.0.0 (2022-05)
```
            oneBit-rl6 SEQUENCE (SIZE (2)) OF BetaOffsets,
            twoBits-rl6 SEQUENCE (SIZE (4)) OF BetaOffsets
        },
        semiStaticDCI-0-2-rl6 BetaOffsets
    }
    scalingDCI-0-2-r16 ENUMERATED { f0p5, f0p65, f0p8, fl }
}
FrequencyHoppingOffsetListsDCI-0-2-r16 ::= SEQUENCE (SIZE (1.4)) OF INTEGER (l.. maxNrofPhysicalResourceBlocks-l)
UCI-OnPUSCH-ListDCI-0-2-rl6 ::= SEQUENCE (SIZE (1..2)) OF UCI-OnPUSCH-DCI-0-2-r16
UCI-OnPUSCH-ListDCI-0-1-r16::= SEQUENCE (SIZE (1..2)) OF UCI-OnPUSCH
UL-AccessConfigListDCI-0-1-r16 ::= SEQUENCE (SIZE (1..64)) OF INTEGER (0..63)
UL-AccessConfigListDCI-0-1-rl7 ::= SEQUENCE (SIZE (1..3)) OF INTEGER (0..2)
UL-AccessConfigListDCI-0-2-r17 ::= SEQUENCE (SIZE (1..64)) OF INTEGER (0..63)
BetaOffsetsCrossPriSel-rl7 ::= CHOICE {
    dynamic-rl7 SEQUENCE (SIZE (4)) OF BetaOffsetsCrossPri-rl7,
    semiStatic-rl7 BetaOffsetsCrossPri-rl7
}
BetaOffsetsCrossPriSelDCI-0-2-rl7 ::= CHOICE [
    dynamicDCI-0-2-rl7 CHOICE [
        oneBit-rl7 SEQUENCE (SIZE (2)) OF BetaOffsetsCrossPri-rl7,
        twoBits-rl7 SEQUENCE (SIZE (4)) OF BetaOffsetsCrossPri-rl7
    },
    semiStaticDCI-0-2-rl7 BetaOffsetsCrossPri-rl7
}
-- TAG-PUSCH-CONFIG-STOP
-- ASN1STOP
```


ETSI


--- Page 707  ---


3GPP TS 38.331 version 17.0.0 Release 17
706
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUSCH-Config field descriptions \\
\hline \begin{tabular}{l}
antennaPortsFieldPresenceDCI-0-2 \\
Configure the presence of "Antenna ports" field in DCI format 0_2. When the field is configured, then the "Antenna ports" field is present in DCI format 0_2. Otherwise, the field size is set to 0 for DCI format \( 0 \_2 \) (See TS 38.212 [17], clause 7.3.1.1.3). If neither dmrs-UplinkForPUSCH-MappingTypeA-DCI-0-2 nor dmrs-UplinkForPUSCH- \\
MappingTypeB-DCI-O-2 is configured, this field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
availableSlotCounting \\
Indicate whether PUSCH repetitions counted on the basis of available slots is enabled. If the field is absent, PUSCH repetitions counted on the basis of available slots is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
betaOffsetsCrossPri0, betaOffsetsCrossPri1, betaOffsetsCrossPriODCI-0-2, betaOffsetsCrossPri1DCI-0-2 \\
Selection between and configuration of dynamic and semi-static beta-offset for multiplexing HARQ-ACK on dynamically scheduled PUSCH with different priorities, see TS 38.213 [13], clause 9.3. \\
The field betaOffsetsCrossPrioO indicates multiplexing low priority (LP) HARQ-ACK on dynamically scheduled high priority (HP) PUSCH. \\
The field betaOffsetsCrossPrio 1 indicates multiplexing HP HARQ-ACK on dynamically scheduled LP PUSCH. \\
The field betaOffsetsCrossPrioODCI-0-2 indicates multiplexing LP HARQ-ACK on dynamically scheduled HP PUSCH by DCI format \( 0 \_2 \). \\
The field betaOffsetsCrossPrio1DCI-0-2 indicates multiplexing HP HARQ-ACK on dynamically scheduled LP PUSCH by DCI format 0_2.
\end{tabular} \\
\hline \begin{tabular}{l}
codebookSubset, codebookSubsetDCI-0-2 \\
Subset of PMIs addressed by TPMI, where PMIs are those supported by UEs with maximum coherence capabilities (see TS 38.214 [19], clause 6.1.1.1). The field codebookSubset applies to DCI format 0_1 and the field codebookSubsetDCI-0-2 applies to DCI format 0_2 (see TS 38.214 [19], clause 6.1.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
dataScramblingidentityPUSCH \\
Identifier used to initialise data scrambling (c_init) for PUSCH. If the field is absent, the UE applies the physical cell ID. (see TS 38.211 [16], clause 6.3.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-BundlingPUSCH-Config \\
Configure the parameters for DMRS bundling for PUSCH (see TS 38.214 [19], clause 6.1.7).
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-SequencelnitializationDCI-0-2 \\
Configure whether the field "DMRS Sequence Initialization" is present or not in DCI format \( 0 \_2 \). If the field is absent, then 0 bit for the field "DMRS Sequence Initialization" in DCI format 0_2. If the field is present, then the number of bits is determined in the same way as DCI format 0 _ 1 (see TS 38.212 [17], clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-UplinkForPUSCH-MappingTypeA, dmrs-UplinkForPUSCH-MappingTypeA-DCI-0-2 \\
DMRS configuration for PUSCH transmissions using PUSCH mapping type A (chosen dynamically via PUSCH-TimeDomainResourceAllocation). Only the fields dmrs-Type, dmrs-AdditionalPosition and maxLength may be set differently for mapping type A and B. The field dmrs-UplinkForPUSCH-MappingTypeA applies to DCI format 0_1 and the field dmrs-UplinkForPUSCH-MappingTypeA-DCI-0-2 applies to DCI format 0 2 (see TS 38.212 [17], clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-UplinkForPUSCH-MappingTypeB, dmrs-UplinkForPUSCH-MappingTypeB-DCI-0-2 \\
DMRS configuration for PUSCH transmissions using PUSCH mapping type B (chosen dynamically via PUSCH-TimeDomainResourceAllocation). Only the fields dmrs-Type, dmrs-AdditionalPosition and maxLength may be set differently for mapping type A and B. The field dmrs-UplinkForPUSCH-MappingTypeB applies to DCI format 0_1 and the field dmrs-UplinkForPUSCH-MappingTypeB-DCI-0-2 applies to DCI format \( 0 \_2 \) (see TS 38.212 [17], clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyHopping \\
The value intraSlot enables 'Intra-slot frequency hopping' and the value interSlot enables 'Inter-slot frequency hopping'. If the field is absent, frequency hopping is not configured for 'pusch-RepTypeA' (see TS 38.214 [19], clause 6.3). The field frequencyHopping applies to DCI format 0_0 and \( 0 \quad 1 \) for 'pusch-RepTypeA'.
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyHoppingDCI-0-1 \\
Indicates the frequency hopping scheme for DCI format \( 0 \_1 \) when pusch-RepTypeIndicatorDCI-0-1 is set to 'pusch-RepTypeB', The value interRepetition enables 'Interrepetition frequency hopping', and the value interSlot enables 'Inter-slot frequency hopping'. If the field is absent, frequency hopping is not configured for DCI format 0_1 (see TS 38.214 [19], clause 6.1).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyHoppingDCI-0-2 \\
Indicate the frequency hopping scheme for DCl format 0_2. The value intraSlot enables 'intra-slot frequency hopping', and the value interRepetition enables 'Inter-repetition frequency hopping', and the value interSlot enables 'Inter-slot frequency hopping'. When pusch-RepTypelndicatorDCI-0-2 is set to 'pusch-RepTypeA', the frequency hopping scheme can be chosen between 'intra-slot frequency hopping and 'inter-slot frequency hopping' if enabled. When pusch-RepTypelndicatorDCI-0-2 is set to 'pusch-RepTypeB', the frequency hopping scheme can be chosen between 'inter-repetition frequency hopping' and 'inter-slot frequency hopping' if enabled. If the field is absent, frequency hopping is not configured for DCI format 0 _ 2 for 'pusch-RepTypeB' (see TS 38.214 [19], clause 6.3).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 708  ---


3GPP TS 38.331 version 17.0.0 Release 17
707
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
frequencyHoppingOffsetLists, frequencyHoppingOffsetListsDCI-0-2 \\
Set of frequency hopping offsets used when frequency hopping is enabled for granted transmission (not msg3) and type 2 configured grant activation (see TS 38.214 [19], clause 6.3). The field frequencyHoppingOffsetLists applies to DCI format \( 0 \_0 \) and DCI format \( 0 \_1 \) and the field frequencyHoppingOffsetListsDCI-0-2 applies to DCI format \( 0 \_2 \) (see TS 38.214 [19], clause 6.3).
\end{tabular} \\
\hline \begin{tabular}{l}
harq-ProcessNumberSizeDCI-0-2 \\
Configure the number of bits for the field "HARQ process number" in DCI format \( 0 \_2 \) (see TS 38.212 [17], clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
invalidSymboIPattern \\
Indicates one pattern for invalid symbols for PUSCH transmission repetition type B applicable to both DCI format 0_1 and 0_2. If InvalidSymbolPattern is not configured, semistatic flexible symbols are used for PUSCH. Segmentation occurs only around semi-static DL symbols (see TS 38.214 [19] clause 6.1).
\end{tabular} \\
\hline \begin{tabular}{l}
invalidSymboIPatternindicatorDCI-0-1, invalidSymboIPatternindicatorDCI-0-2 \\
Indicates the presence of an additional bit in the DCI format \( 0 \_1 / 0 \_2 \). If invalidSymbolPattern is absent, then both invalidSymbolPatternIndicatorDCI-0-1 and invalidSymbolPatternindicatorDCI-0-2 are absent. The field invalidSymbolPatternindicatorDCI-0-1 applies to the DCI format 0_1 and the field \\
invalidSymbolPattern/ndicatorDCI-0-2 applies to DCI format 0_2 (see TS 38.214 [19] clause 6.1). If the field is absent, the UE behaviour is specified in TS 38.214 [19], clause 6.1.2.1.
\end{tabular} \\
\hline \begin{tabular}{l}
mappingPattern \\
Indicates whether the UE should follow Cyclical mapping pattern or Sequential mapping pattern for when two SRS resource sets are configured for PUSCH transmission and the PUSCH transmission occasions are associated with both SRS resource sets.
\end{tabular} \\
\hline \begin{tabular}{l}
maxRank, maxRankDCI-0-2 \\
Subset of PMIs addressed by TRIs from 1 to ULmaxRank (see TS 38.214 [19], clause 6.1.1.1). The field maxRank applies to DCI format 0_1 and the field maxRankDCI-0-2 applies to DCI format 022 (see TS 38.214 [19], clause 6.1.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-Table, mcs-TableFormat0-2 \\
Indicates which MCS table the UE shall use for PUSCH without transform precoder (see TS 38.214 [19], clause 6.1.4.1). If the field is absent the UE applies the value 64QAM. The field mcs-Table applies to DCI format \( 0 \_0 \) and DCI format \( 0 \_1 \) and the field mcs-TableDCI-0-2 applies to DCI format \( 0 \_2 \) (see TS 38.214 [19], clause 6.1.4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-TableTransformPrecoder, mcs-TableTransformPrecoderDCI-0-2 \\
Indicates which MCS table the UE shall use for PUSCH with transform precoding (see TS 38.214 [19], clause 6.1.4.1) If the field is absent the UE applies the value 64QAM. The field \( m c s \)-TableTransformPrecoder applies to DCI format \( 0 \_0 \) and DCI format \( 0 \_1 \) and the field \( m c s \)-TableTransformPrecoderDCI-0-2 applies to DCI format \( 0 \_2 \) (see TS 38.214 [19], clause 6.1.4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
minimum Scheduling OffsetK2 \\
List of minimum K2 values. Minimum K2 parameter denotes minimum applicable value(s) for the Time domain resource assignment table for PUSCH (see TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfBitsRV-DCI-0-2 \\
Configures the number of bits for "Redundancy version" in the DCI format 0 _ 2 (see TS 38.212 [17], clause 7.3 .1 and TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfinvalidSymbolsForDL-UL-Switching \\
Indicates the number of symbols after the last semi-static DL symbol that are invalid symbols for PUSCH repetition Type B. If it is absent, no symbol is explicitly defined for DL-to-UL switching (see TS 38.214 [19], clause 6.1).
\end{tabular} \\
\hline \begin{tabular}{l}
priorityindicatorDCI-0-1, priorityindicatorDCI-0-2 \\
Configures the presence of "priority indicator" in DCI format \( 0 \_1 / 0 \_2 \). When the field is absent in the IE, then the UE shall apply 0 bit for "Priority indicator" in DCI format \( 0 \_1 / 0 \_2 \). The field prioritylndicatorDCI-0-1 applies to DCI format 0_1 and the field priority/ndicatorDCI-0-2 applies to DCI format 0_2 (see TS 38.212 [17] clause 7.3.1 and TS 38.213 [13] clause 9).
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-AggregationFactor \\
Number of repetitions for data (see TS 38.214 [19], clause 6.1.2.1). If the field is absent the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-RepTypeindicatorDCI-0-1, pusch-RepTypelndicatorDCI-0-2 \\
Indicates whether UE follows the behavior for "PUSCH repetition type A" or the behavior for "PUSCH repetition type B" for the PUSCH scheduled by DCI format 0_1/0_2 and for Type 2 CG associated with the activating DCI format 0_1/0_2.The value pusch-RepTypeA enables the 'PUSCH repetition type A' and the value pusch-RepTypeB enables the 'PUSCH repetition type B'. The field pusch-RepTypelndicatorDCI-0-1 applies to DCI format 0_1 and the field pusch-RepType/ndicatorDCI-0-2 applies to DCI format 0_2 (see TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 709  ---


3GPP TS 38.331 version 17.0.0 Release 17
708
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
pusch-TimeDomainAllocationList \\
List of time domain allocations for timing of UL assignment to UL data (see TS 38.214 [19], table 6.1.2.1.1-1). The field pusch-TimeDomainAllocationList applies to DCI formats \( 0 \_0 \) or DCI format \( 0 \_1 \) when the field pusch-TimeDomainAllocationListDCI-0-1 is not configured (see TS 38.214 [19], table 6.1.2.1.1-1 and table 6.1.2.1.1-1A). The network does not configure the pusch-TimeDomainAllocationList (without suffix) simultaneously with the pusch-TimeDomainAllocationListDCI-0-2-r16 or pusch- \\
TimeDomainAllocationListDCI-0-1-r16 or pusch-TimeDomainAllocationListForMultiPUSCH-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-TimeDomainAllocationListDCI-0-1 \\
Configuration of the time domain resource allocation (TDRA) table for DCI format 0 _ 1 (see TS 38.214 [19], clause 6.1, table 6.1.2.1.1-1A).
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-TimeDomainAllocationListDCI-0-2 \\
Configuration of the time domain resource allocation (TDRA) table for DCI format \( 0 \_2 \) (see TS 38.214 [19], clause 6.1.2, table 6.1.2.1.1-1B).
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-TimeDomainAllocationListForMultiPUSCH \\
Configuration of the time domain resource allocation (TDRA) table for multiple PUSCH (see TS 38.214 [19], clause 6.1.2). The field pusch- \\
TimeDomainAllocationListForMultiPUSCH-r17 is applicable for PUSCH SCS of \( 120 \mathrm{kHz}, 480 \) and 960 kHz . The network configures at most 16 rows in this TDRA table in PUSCH-TimeDomainResourceAllocationList-r16 configured by this field and at most 16 rows in PUSCH-TimeDomainResourceAllocationList-r17. This field is not configured simultaneously with pusch-Aggregation Factor.
\end{tabular} \\
\hline \begin{tabular}{l}
rbg-Size \\
Selection between configuration 1 and configuration 2 for RBG size for PUSCH. The UE does not apply this field if resourceAllocation is set to resourceAllocationType1. Otherwise, the UE applies the value config 1 when the field is absent (see TS 38.214 [19], clause 6.1.2.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceAllocation, resourceAllocation DCI-0-2 \\
Configuration of resource allocation type 0 and resource allocation type 1 for non-fallback DCI (see TS 38.214 [19], clause 6.1.2). The field resourceAllocation applies to DCI format 0_1 and the field resourceAllocation DCI-0-2 applies to DCI format 0_2 (see TS 38.214 [19], clause 6.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceAllocationType1GranularityDCI-0-2 \\
Configures the scheduling granularity applicable for both the starting point and length indication for resource allocation type 1 in DCI format 0_2. If this field is absent, the granularity is 1 PRB (see TS 38.214 [19], clause 6.1.2.2.2).
\end{tabular} \\
\hline \begin{tabular}{l}
secondTPCFieldDCI-0-1, secondTPCFieldDCI-0-2 \\
A second TPC field can be configured via RRC for DCI-0-1 and DCI-0-2. Each TPC field is for each closed-loop index value respectively (i.e., 1st/2nd TPC fields correspond to "closedLoopIndex" value = 0 and 1,
\end{tabular} \\
\hline \begin{tabular}{l}
sequenceOffsetForRV \\
Configures the RV offset for the starting RV for the first repetition (first actual repetition in PUSCH repetition Type B) towards the second 'SRS resource set' for PUSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
tp-pi2BPSK \\
Enables pi/2-BPSK modulation with transform precoding if the field is present and disables it otherwise.
\end{tabular} \\
\hline \begin{tabular}{l}
transformPrecoder \\
The UE specific selection of transformer precoder for PUSCH (see TS 38.214 [19], clause 6.1.3). When the field is absent the UE applies the value of the field msg3transformPrecoder.
\end{tabular} \\
\hline \begin{tabular}{l}
txConfig \\
Whether UE uses codebook based or non-codebook based transmission (see TS 38.214 [19], clause 6.1.1). If the field is absent, the UE transmits PUSCH on one antenna port, see TS 38.214 [19], clause 6.1.1.
\end{tabular} \\
\hline \begin{tabular}{l}
uci-OnPUSCH-ListDCI-0-1, uci-OnPUSCH-ListDCI-0-2 \\
Configuration for up to 2 HARQ-ACK codebooks specific to DCI format 0_1/0_2. The field uci-OnPUSCH-ListDCI-0-1 applies to DCI format \( 0 \_1 \) and the field uci-OnPUSCH-ListDCI-0-2 applies to DCI format 0_2 (see TS 38.212 [17], clause 7.3 .1 and TS 38.213 [13] clause 9.3).
\end{tabular} \\
\hline \begin{tabular}{l}
ul-AccessConfigListDCI-0-1, ul-AccessConfigListDCI-0-2 \\
List of the combinations of cyclic prefix extension, channel access priority class (CAPC), and UL channel access type (see TS 38.212 [17], Table 7.3.1.1.2-35) applicable for DCI format \( 0 \_1 \) and DCI format \( 0 \_2 \), respectively. The field \( u \)-AccessConfigListDCI-0-1-r17 only contains a list of UL channel access types and is only applicable for FR2-2 (see TS 38.212 [17], Table 7.3.1.1.2-35A).
\end{tabular} \\
\hline \begin{tabular}{l}
ul-FullPowerTransmission \\
Configures the UE with UL full power transmission mode as specified in TS 38.213.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 710  ---


3GPP TS 38.331 version 17.0.0 Release 17
709
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UCI-OnPUSCH field descriptions \\
\hline \begin{tabular}{l}
betaOffsets \\
Selection between and configuration of dynamic and semi-static beta-offset for DCl formats other than DCl format \( 0 \_2 \). If the field is not configured, the UE applies the value 'semiStatic' (see TS 38.213 [13], clause 9.3).
\end{tabular} \\
\hline \begin{tabular}{l}
scaling \\
Indicates a scaling factor to limit the number of resource elements assigned to UCI on PUSCH for DCI formats other than DCI format 0_2. Value fop5 corresponds to 0.5, value f0p65 corresponds to 0.65 , and so on. The value configured herein is applicable for PUSCH with configured grant (see TS 38.212 [17], clause 6.3).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline UCI-OnPUSCH-DCI-0-2 field descriptions \\
\hline \begin{tabular}{l}
betaOffsetsDCI-0-2 \\
Configuration of beta-offset for DCI format \( 0 \_2 \). If semiStaticDCI-0-2 is chosen, the UE shall apply the value of 0 bit for the field of beta offset indicator in DCI format \( 0 \_2 \). If dynamicDCI-0-2 is chosen, the UE shall apply the value of 1 bit or 2 bits for the field of beta offset indicator in DCI format 0_2 (see TS 38.212 [17], clause 7.3.1 and TS 38.213 [13] clause 9.3).
\end{tabular} \\
\hline \begin{tabular}{l}
dynamicDCI-0-2 \\
Indicates the UE applies the value 'dynamic' for DCI format \( 0 \_2 \) (see TS 38.212 [17], clause 7.3 .1 and TS 38.213 [13], clause 9.3).
\end{tabular} \\
\hline \begin{tabular}{l}
semiStaticDCI-0-2 \\
Indicates the UE applies the value 'semiStatic' for DCI format 0_2. (see TS 38.212 [17], clause 7.3.1 and see TS 38.213 [13], clause 9.3).
\end{tabular} \\
\hline \begin{tabular}{l}
scalingDCI-0-2 \\
Indicates a scaling factor to limit the number of resource elements assigned to UCI on PUSCH for DCI format \( 0 \_2 \). Value f0p5 corresponds to 0.5 , value f0p65 corresponds to 0.65 , and so on (see TS 38.212 [17], clause 6.3).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline codebookBased & The field is mandatory present if txConfig is set to codebook and absent otherwise. \\
\hline RepTypeB & The field is optionally present, Need S, if pusch-RepTypelndicatorDC/-0-1 is set to pusch-RepTypeB. It is absent otherwise. \\
\hline RepTypeB2 & The field is optionally present, Need S, if pusch-RepTypelndicatorDCI-0-1 or pusch-RepTypelndicatorDCI-0-2 is set to pusch-RepTypeB. It is absent otherwise. \\
\hline
\end{tabular}
- PUSCH-ConfigCommon

The IE PUSCH-ConfigCommon is used to configure the cell specific PUSCH parameters.
PUSCH-ConfigCommon information element
```
-- ASNISTART
-- TAG-PUSCH-CONFIGCOMMON-START
PUSCH-ConfigCommon ::= SEQUENCE \
```

```
    msg3-DeltaPreamble INTEGER (-l..6)
    p0-NominalWithGrant INTEGER (-202..24)
    ...
}
```


ETSI


--- Page 711  ---


3GPP TS 38.331 version 17.0.0 Release 17
710
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-PUSCH-CONFIGCOMMON-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline PUSCH-ConfigCommon field descriptions \\
\hline \begin{tabular}{l}
groupHoppingEnabledTransformPrecoding \\
For DMRS transmission with transform precoder, the NW may configure group hopping by this cell-specific parameter, see TS 38.211 [16], clause 6.4.1.1.1.2.
\end{tabular} \\
\hline \begin{tabular}{l}
msg3-DeltaPreamble \\
Power offset between msg3 and RACH preamble transmission. Actual value = field value * 2 [dB] (see TS 38.213 [13], clause 7.1)
\end{tabular} \\
\hline \begin{tabular}{l}
po-NominalWithGrant \\
P0 value for PUSCH with grant (except msg3). Value in dBm. Only even values (step size 2) allowed (see TS 38.213 [13], clause 7.1) This field is cell specific
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-TimeDomainAllocationList \\
List of time domain allocations for timing of UL assignment to UL data (see TS 38.214 [19], table 6.1.2.1.1-1).
\end{tabular} \\
\hline
\end{tabular}
- PUSCH-PowerControl

The IE PUSCH-PowerControl is used to configure UE specific power control parameter for PUSCH.
PUSCH-PowerContro/information element
```
-- ASNISTART
-- TAG-PUSCH-PONERCONTROL-START
```

```
PUSCH-PowerControl ::=
    tpc-Accumulation
    msg3-Alpha
    p0-NominalWithoutGrant
    p0-AlphaSets
    pathlossReferenceRSToAddModList
    pathlossReferenceRSToReleaseList
```

```
    twoPUSCH-PC-AdjustmentStates
    deltaMCS
    sri-PUSCH-MappingToAddModList
    sri-PUSCH-MappingToReleaseList
}
PO-PUSCH-AlphaSet ::=
    pO-PUSCH-AlphaSetId.
    p0
    alpha
}
PO-PUSCH-AlphaSetId:: INTEGER (O.maxNrofPO-PUSCH-AlphaSets-1)
PUSCH-PathlossReferenceRS ::= SEQUENCE [
```


ETSI


--- Page 712  ---


3GPP TS 38.331 version 17.0.0 Release 17
711
ETSI TS 138331 V17.0.0 (2022-05)
```
    pusch-PathlossReferenceRS-Id
    referenceSignal
        ssb-Index
        csi-RS-Index
    }
}
PUSCH-PathlossReferenceRS-rl6 ::= SEQUENCE [
    pusch-PathlossReferenceRS-Id-rl6 PUSCH-PathlossReferenceRS-Id-vl6l0,
    referenceSignal-rl6 CHOICE {
        ssb-Index-rl6 SSB-Index,
        csi-RS-Index-rl6 NZP-CSI-RS-ResourceId
    }
}
PUSCH-PathlossReferenceRS-Id ::= INTEGER (0..maxNrofPUSCH-PathlossReferenceRSs-1)
PUSCH-PathlossReferenceRS-Id-vl6l0 ::= INTEGER (maxNrofPUSCH-PathlossReferenceRSs..maxNrofPUSCH-PathlossReferenceRSs-l-rl6)
SRI-PUSCH-PowerControl ::= SEQUENCE \
    sri-PUSCH-PowerControlId SRI-PUSCH-PowerControlId,
    sri-PUSCH-PathlossReferenceRS-Id PUSCH-PathlossReferenceRS-Id,
    sri-PO-PUSCH-AlphaSetId PO-PUSCH-AlphaSetId,
    sri-PUSCH-ClosedLoopIndex ENUMERATED [ i0, il }
}
SRI-PUSCH-PowerControlId ::= INTEGER (O..maxNrofSRI-PUSCH-Mappings-1)
PUSCH-PowerControl-vl610 ::= SEQUENCE \
    pathlossReferenceRSTOAddModListSizeExt-vl6l0 SEQUENCE (SIZE (l..maxNrofPUSCH-PathlossReferenceRSsDiff-rl6)) OF PUSCH-PathlossReferenceRS-rl6
                    OPTIONAL, -- Need. N
    pathlossReferenceRSToReleaseListSizeExt-vl6lO SEQUENCE (SIZE (l..maxNrofPUSCH-PathlossReferenceRSsDiff-rl6)) OF PUSCH-PathlossReferenceRS-Id-
vl610
            OPTIONAL, -- Need N
    p0-PUSCH-SetList-rl6 SEQUENCE (SIZE (l..maxNrofSRI-PUSCH-Mappings)) OF PO-PUSCH-Set-rl6 OPTIONAL, -- Need R
    olpc-ParameterSet SEQUENCE {
        olpc-ParameterSetDCI-0-1-rl6 INTEGER (1..2) OPTIONAL, -- Need. R
        olpc-ParameterSetDCI-0-2-r16 INTEGER (1..2)
    } OPTIONAL -- Need R
    ...,
    [ [
    sri-PUSCH-MappingToAddModList2-rl7 SEQUENCE (SIZE (l..maxNrofSRI-PUSCH-Mappings)) OF SRI-PUSCH-PowerControl
                    OPTIONAL, -- Need N
    p0-PUSCH-SetList2-rl7 SEQUENCE (SIZE (l..maxNrofSRI-PUSCH-Mappings)) OF PO-PUSCH-Set-rl6 OPTIONAL -- Need R
    ] ]
}
PO-PUSCH-Set-rl6 ::= SEQUENCE \
    p0-PUSCH-SetId-rl6
    PO-PUSCH-SetId-rl6,
    ...
}
PO-PUSCH-SetId-rl6 ::= INTEGER (0..maxNrofSRI-PUSCH-Mappings-1)
```


ETSI


--- Page 713  ---


3GPP TS 38.331 version 17.0.0 Release 17
712
ETSI TS 138331 V17.0.0 (2022-05)
```
PO-PUSCH-r16::= INTEGER (-16..15)
-- TAG-PUSCH-POWERCONTROL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline P0-PUSCH-AlphaSet field descriptions \\
\hline \begin{tabular}{l}
alpha \\
alpha value for PUSCH with grant (except msg3) (see TS 38.213 [13], clause 7.1). When the field is absent the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
p0 \\
P0 value for PUSCH with grant (except msg3) in steps of 1dB (see TS 38.213 [13], clause 7.1). When the field is absent the UE applies the value 0.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline P0-PUSCH-Set field descriptions \\
\hline \begin{tabular}{l}
p0-List \\
Configuration of \( \{\mathrm{p} 0-\mathrm{PUSCH} \), p0-PUSCH \( \} \) sets for PUSCH. If SRI is present in the DCI, then one p0-PUSCH can be configured in P0-PUSCH-Set. If SRI is not present in the DCI, and both olpc-ParameterSetDCI-0-1 and olpc-ParameterSetDC/-0-2 are configured to be 1 bit, then one p0-PUSCH can be configured in P0-PUSCH-Set. If SRI is not present in the DCI, and if any of olpc-ParameterSetDCI-0-1 and olpc-ParameterSetDCI-0-2 is configured to be 2 bits, then two p0-PUSCH values can be configured in P0-PUSCH-Set (see TS 38.213 [13] clause 7 and TS 38.212 [17] clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
p0-PUSCH-Setid \\
Configure the index of a p0-PUSCH-Set (see TS 38.213 [13] clause 7 and TS 38.212 [17] clause 7.3.1).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 714  ---


3GPP TS 38.331 version 17.0.0 Release 17
713
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUSCH-PowerControl field descriptions \\
\hline \begin{tabular}{l}
deltaMCS \\
Indicates whether to apply delta MCS. When the field is absent, the UE applies Ks = 0 in delta_TFC formula for PUSCH (see TS 38.213 [13], clause 7.1).
\end{tabular} \\
\hline \begin{tabular}{l}
msg3-Alpha \\
Dedicated alpha value for msg3 PUSCH (see TS 38.213 [13], clause 7.1). When the field is absent the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
olpc-ParameterSetDCI-0-1, olpc-ParameterSetDCI-0-2 \\
Configures the number of bits for Open-loop power control parameter set indication for DCI format 0_1/0_2 in case SRI is not configured in the DCI. 2 bits is applicable only if SRI is not present in the DCI format \( 0 \_1 \). The field olpc-ParameterSetDCI-0-1 applies to DCI format \( 0 \_1 \) and the field olpc-ParameterSetDCI-0-2 applies to DCI format \( 0 \_2 \) (see TS 38.212 [17], clause 7.3.1 and TS 38.213 [13], clause 11).
\end{tabular} \\
\hline \begin{tabular}{l}
p0-AlphaSets \\
configuration \{p0-pusch, alpha\} sets for PUSCH (except msg3 and msgA PUSCH), i.e., \{ \{p0,alpha,index1\}, \{p0,alpha,index2\},...\} (see TS 38.213 [13], clause 7.1). When no set is configured, the UE uses the P0-nominal for msg3 PUSCH, PO-UE is set to 0 and alpha is set according to msg3-Alpha configured for msg3 PUSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
p0-NominalWithoutGrant \\
P0 value for UL grant-free/SPS based PUSCH. Value in dBm. Only even values (step size 2) allowed (see TS 38.213 [13], clause 7.1).
\end{tabular} \\
\hline \begin{tabular}{l}
po-PUSCH-SetList \\
Configure one additional PO-PUSCH-Set per SRI. If present, the one bit or 2 bits in the DCI is used to dynamically indicate among the PO value from the existing PO-PUSCHAlphaSet and the P0 value(s) from the P0-PUSCH-Set (See TS 38.212 [17], clause 7.3 .1 and TS 38.213 [13], clause 17).
\end{tabular} \\
\hline \begin{tabular}{l}
p0-PUSCH-SetList2 \\
For indicating per-TRP OLPC set in DCI format 0_1/0_2 with the legacy field, a second p0-PUSCH-SetList-r16 is used. When this field is present the p0-PUSCH-SetList2 corresponds to the first SRS resource set (see TS 38.213).
\end{tabular} \\
\hline \begin{tabular}{l}
pathlossReferenceRSToAddModList, pathlossReferenceRSToAddModListSizeExt \\
A set of Reference Signals (e.g. a CSI-RS config or a SS block) to be used for PUSCH path loss estimation. The set consists of Reference Signals configured using pathLossReferenceRSToAddModList and Reference Signals configured using pathlossReferenceRSToAddModListSizeExt.Up to maxNrofPUSCH-PathlossReferenceRSs may be configured (see TS 38.213 [13], clause 7.1).
\end{tabular} \\
\hline \begin{tabular}{l}
pathlossReferenceRSToReleaseList, pathlossReferenceRSToReleaseListSizeExt \\
Lists of reference symbols for PUSCH path loss estimation to be released by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sri-PUSCH-MappingToAddModList \\
A list of SRI-PUSCH-PowerControl elements among which one is selected by the SRI field in DCI (see TS 38.213 [13], clause 7.1).
\end{tabular} \\
\hline \begin{tabular}{l}
sri-PUSCH-MappingToAddModList2 \\
A list of SRI-PUSCH-PowerControl elements for second SRS-resource set, among which one is selected by the SRI field in DCI (see TS 38.213 [13], clause 7.1). When this field is present the sri-PUSCH-MappingToAddModList corresponds to the first SRS resource set for PUSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-Accumulation \\
If enabled, UE applies TPC commands via accumulation. If not enabled, UE applies the TPC command without accumulation. If the field is absent, TPC accumulation is enabled (see TS 38.213 [13], clause 7.1).
\end{tabular} \\
\hline \begin{tabular}{l}
twoPUSCH-PC-AdjustmentStates \\
Number of PUSCH power control adjustment states maintained by the UE (i.e., fc(i)). If the field is present ( \( n 2 \) ) the UE maintains two power control states (i.e., fc(i, 0 ) and \( \mathrm{fc}(\mathrm{i}, 1) \) ). If the field is absent, it maintains one power control state (i.e., \( \mathrm{fc}(\mathrm{i}, 0) \) ) (see TS 38.213 [13], clause 7.1).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 715  ---


3GPP TS 38.331 version 17.0.0 Release 17
714
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SRI-PUSCH-PowerControl field descriptions \\
\hline \begin{tabular}{l}
sri-P0-PUSCH-AlphaSetld \\
The ID of a PO-PUSCH-AlphaSet as configured in p0-AlphaSets in PUSCH-PowerControl.
\end{tabular} \\
\hline \begin{tabular}{l}
sri-PUSCH-ClosedLoopindex \\
The index of the closed power control loop associated with this SRI-PUSCH-PowerControl.
\end{tabular} \\
\hline \begin{tabular}{l}
sri-PUSCH-PathlossReferenceRS-Id \\
The ID of PUSCH-PathlossReferenceRS as configured in the pathlossReferenceRSToAddModList in PUSCH-PowerControl.
\end{tabular} \\
\hline \begin{tabular}{l}
sri-PUSCH-PowerControlld \\
The ID of this SRI-PUSCH-PowerControl configuration. It is used as the codepoint (payload) in the SRI DCI field.
\end{tabular} \\
\hline
\end{tabular}
- PUSCH-ServingCellConfig

The IE PUSCH-ServingCellConfig is used to configure UE specific PUSCH parameters that are common across the UE's BWPs of one serving cell.
PUSCH-ServingCellConfig information element
```
-- ASNISTART
-- TAG-PUSCH-SERVINGCELLCONFIG-START
PUSCH-ServingCellConfig ::= SEQUENCE \
    codeBlockGroupTransmission
    rateMatching
    xOverhead.
    ...r
    [ [
    maxMIMO-Layers INTEGER (1..4)
    processingType2Enabled.
    ]],
    [ [
```

```
    ]],
    [ [
```

```
    ] ]
}
PUSCH-CodeBlockGroupTransmission ::= SEQUENCE {
    maxCodeBlockGroupsPerTransportBlock ENUMERATED {n2, n4, n6, n8},
    ...
}
MaxMIMO-LayersDCI-0-2-r16 ::= INTEGER (1..4)
-- TAG-PUSCH-SERVINGCELLCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 716  ---


3GPP TS 38.331 version 17.0.0 Release 17
715
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUSCH-CodeBlockGroupTransmission field descriptions \\
\hline \begin{tabular}{l}
maxCodeBlockGroupsPerTransportBlock \\
Maximum number of code-block-groups (CBGs) per TB (see TS 38.213 [13], clause 9.1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PUSCH-ServingCellConfig field descriptions \\
\hline \begin{tabular}{l}
codeBlockGroupTransmission \\
Enables and configures code-block-group (CBG) based transmission (see TS 38.214 [19], clause 5.1.5).
\end{tabular} \\
\hline \begin{tabular}{l}
maxMMMO-Layers \\
Indicates the maximum MIMO layer to be used for PUSCH in all BWPs of the corresponding UL of this serving cell (see TS 38.212 [17], clause 5.4.2.1). If present, the network sets maxRank to the same value. The field maxMIMO-Layers refers to DCI format 0_1.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofHARQ-ProcessesForPUSCH \\
The number of HARQ processes to be used on the PUSCH of a serving cell. Value \( n 16 \) corresponds to 16 HARQ processes, value \( n 32 \) to 32 HARQ processes. If the field is absent, the UE uses 16HARQ processes (see TS 38.214 [19], clause 5.1).
\end{tabular} \\
\hline \begin{tabular}{l}
processingType2Enabled \\
Enables configuration of advanced processing time capability 2 for PUSCH (see 38.214 [19], clause 6.4).
\end{tabular} \\
\hline \begin{tabular}{l}
rateMatching \\
Enables LBRM (Limited buffer rate-matching). When the field is absent the UE applies FBRM (Full buffer rate-matchingLBRM) (see TS 38.212 [17], clause 5.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
xOverhead \\
If the field is absent, the UE applies the value 'xoh0' (see TS 38.214 [19], clause 5.1.3.2).
\end{tabular} \\
\hline \begin{tabular}{l}
maxMIMO-LayersDCI-0-2 \\
Indicates the maximum MIMO layer to be used for PUSCH for DCI format \( 0 \_2 \) in all BWPs of the corresponding UL of this serving cell (see TS 38.212 [17], clause 5.4.2.1). If present, the network sets maxRankDCI-0-2 to the same value.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkHARQ-mode \\
Used to set the HARQ mode per HARQ process ID, see TS 38.321 [3]. The first/leftmost bit corresponds to HARQ process ID 0, the next bit to HARQ process ID 1 and so on. \\
Bits corresponding to HARQ process IDs that are not configured shall be ignored. A bit set to one identifies a HARQ process with HARQmodeA and a bit set to zero identifies a HARQ process with HARQ modeB. This field also applies for SRB1 to SRB3.
\end{tabular} \\
\hline
\end{tabular}
- PUSCH-TimeDomainResourceAllocationList

The IE PUSCH-TimeDomainResourceAllocation is used to configure a time domain relation between PDCCH and PUSCH. PUSCH-TimeDomainResourceAllocationList contains one or more of such PUSCH-TimeDomainResourceAllocations. The network indicates in the UL grant which of the configured time domain allocations the UE shall apply for that UL grant. The UE determines the bit width of the DCI field based on the number of entries in the PUSCH-TimeDomainResourceAllocationList. Value 0 in the DCI field refers to the first element in this list, value 1 in the DCI field refers to the second element in this list, and so on.

PUSCH-TimeDomainResourceAllocation information element
-- ASNISTART
-- TAG-PUSCH-TIMEDOMAINRESOURCEALLOCATIONLIST-START

PUSCH-TimeDomainResourceAllocation : := SEQUENCE [
k2 INTEGER(0.32) OPTIONAL, -- Need. S
mappingType ENUMERATED \{typeA, typeB\},
startSymbolAndLength INTEGER (0.127)

ETSI


--- Page 717  ---


3GPP TS 38.331 version 17.0.0 Release 17
716
ETSI TS 138331 V17.0.0 (2022-05)
```
}
```

```
PUSCH-TimeDomainResourceAllocation-rl6 ::= SEQUENCE {
    k2-rl6 INTEGER(0..32) OPTIONAL, -- Need.S
    puschAllocationList-rl6 SEQUENCE (SIZE(l..maxNrofMultiplePUSCHs-rl6)) OF PUSCH-Allocation-rl6,
...
}
PUSCH-Allocation-rl6 ::= SEQUENCE [
```

```
    ...r
    [ [
```

```
            OPTIONAL, -- Cond Format01-02-For-TypeA
```

```
    ] ]
}
```

```
PUSCH-TimeDomainResourceAllocation-rl7 ::= SEQUENCE {
    pusch-AllocationList-rl7 SEQUENCE (SIZE(l..MaxNrofMultiplePUSCHs-rl6)) OF PUSCH-Allocation-rl7,
    \cdots.
}
PUSCH-Allocation-rl7 ::= SEQUENCE [
    k2-rl7
    pusch-Allocation-rl7
}
-- TAG-PUSCH-TIMEDOMAINRESOURCEALLOCATIONLIST-STOP
-- ASNISTOP
```


ETSI


--- Page 718  ---


3GPP TS 38.331 version 17.0.0 Release 17
717
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUSCH-TimeDomainResourceAllocationList field descriptions \\
\hline \begin{tabular}{l}
k2 \\
Corresponds to L1 parameter 'K2' (see TS 38.214 [19], clause 6.1.2.1). For k2-r17, only values \{0..32\} are applicable for PUSCH SCS of 120 kHz . \\
When the field is absent for the first PUSCH if multiple PUSCH are configured per PDCCH, or when the field is absent and only one PUSCH is configured per PDCCH, the UE applies the value 1 when PUSCH SCS is \( 15 / 30 \mathrm{kHz} \); the value 2 when PUSCH SCS is 60 kHz , the value 3 when PUSCH SCS is 120 kHz , the value 11 when PUSCH SCS is 480 kHz , and the value 21 when PUSCH SCS is 960 kHz .
\end{tabular} \\
\hline \begin{tabular}{l}
length \\
Indicates the length allocated for PUSCH for DCI format 0_1/0_2 (see TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
mappingType \\
Mapping type (see TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfRepetitions \\
Number of repetitions for DCI format 0_1/0_2 (see TS 38.214 [19], clause 6.1.2.1). When numberOfSlotsTBoMS-r17 is set to 2, 4 or 8 (i.e. TB processing over multi-slot (TBoMS) PUSCH is enabled), it indicates the number of repetitions of a single TBoMS.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfRepetitionsExt \\
Number of repetitions for DCI format 0_1/0_2 if pusch-RepTypeIndicatorDCI-0-1/pusch-RepTypelndicatorDCI-0-2 is set to pusch-RepTypeA (see TS 38.214 [19], clause 6.1.2.1). If this field is present, the field numberOfRepeitions-r16 is ignored for PUSCH repetition Type A.
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfSiots-TBoMS \\
Number of slots allocated for TB processing over multi-slot PUSCH for DCI format 0_1/0_2 (see TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
puschAllocationList \\
The field puschAllocationList-r16 indicates one or multiple PUSCH continuous in time domain which share a common k2 (see TS 38.214 [19], clause 6.1.2.1). The field pusch-AllocationList-r17 configures one or multiple PUSCH that may be in consecutive or non-consecutive slots (see TS 38.214 [19], clause 6.1.2.1). The puschAllocationList-r16 only has one element in pusch-TimeDomainAllocationListDCI-0-1-r16 and in pusch-TimeDomainAllocationListDCI-0-2-r16. The puschAllocationList-r17 only has one element in pusch-TimeDomainAllocationListDCI-0-1-r17 and in pusch-TimeDomainAllocationListDCI-0-2-r17.
\end{tabular} \\
\hline \begin{tabular}{l}
startSymbol \\
Indicates the index of start symbol for PUSCH for DCI format 0_1/0_2 (see TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
startSymbolAndLength \\
An index giving valid combinations of start symbol and length (jointly encoded) as start and length indicator (SLIV). The network configures the field so that the allocation does not cross the slot boundary. (see TS 38.214 [19], clause 6.1.2.1).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 719  ---


3GPP TS 38.331 version 17.0.0 Release 17
718
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline Format01-02 & \begin{tabular}{l}
In pusch-TimeDomainAllocationListForMultiPUSCH-r16 and pusch-TimeDomainAllocationListForMultiPUSCH-r17, the field is absent. \\
In pusch-TimeDomainAllocationListDCI-0-1 and in pusch-TimeDomainAllocationListDCI-0-2, the field is mandatory present.
\end{tabular} \\
\hline Format01-02-For-TypeA & \begin{tabular}{l}
In pusch-TimeDomainAllocationListForMultiPUSCH-r16, the field is absent. \\
In pusch-TimeDomainAllocationListDCI-0-1, the field is optionally present if pusch-RepTypeIndicatorDCI-0-1 is set to puschRepTypeA, Need R. It is absent otherwise, Need R. \\
In pusch-TimeDomainAllocationListDCI-0-2, the field is optionally present if pusch-RepTypelndicatorDCI-0-2 is set to puschRepTypeA, Need R. It is absent otherwise, Need R.
\end{tabular} \\
\hline NotFormatO1-02-Or-TypeA & \begin{tabular}{l}
In pusch-TimeDomainAllocationListForMultiPUSCH-r16 and pusch-TimeDomainAllocationListForMultiPUSCH-r17, the field is mandatory present. \\
In pusch-TimeDomainAllocationListDCI-0-1, the field is optionally present if pusch-RepTypeIndicatorDCI-0-1 is set to puschRepTypeA, Need R. It is absent otherwise, Need R. \\
In pusch-TimeDomainAllocationListDCI-0-2, the field is optionally present if pusch-RepTypelndicatorDCI-0-2 is set to puschRepTypeA, Need R. It is absent otherwise, Need R.
\end{tabular} \\
\hline RepTypeB & \begin{tabular}{l}
In pusch-TimeDomainAllocationListForMultiPUSCH-r16 and pusch-TimeDomainAllocationListForMultiPUSCH-r17, the field is absent. \\
In pusch-TimeDomainAllocationListDCI-0-1, the field is optionally present if pusch-RepType/ndicatorDCI-0-1 is set to puschRepTypeB, Need R. It is absent otherwise, Need R. \\
In pusch-TimeDomainAllocationListDCI-0-2, the field is optionally present if pusch-RepTypelndicatorDCI-0-2 is set to puschRepTypeB, Need R. It is absent otherwise, Need R.
\end{tabular} \\
\hline MultiPUSCH & In pusch-TimeDomainAllocationListForMultiPUSCH-r17, the field \( \mathrm{k} 2(\mathrm{n}) \) corresponding to k 2 of the n -th PUSCH, \( \mathrm{n}>1 \), is mandatory present. Otherwise, it is optionally present, Need S. \\
\hline
\end{tabular}
- PUSCH-TPC-CommandConfig

The IE PUSCH-TPC-CommandConfig is used to configure the UE for extracting TPC commands for PUSCH from a group-TPC messages on DCI.
PUSCH-TPC-CommandConfig information element
-- ASNISTART
-- TAG-PUSCH-TPC-COMMANDCONEIG-START

PUSCH-TPC-CommandConfig : :=
tpc-Index
tpc-IndexSUL
targetCell
⋯
\}
-- TAG-PUSCH-TPC-COMMANDCONFIG-STOP
-- ASNISTOP

SEQUENCE 1
INTEGER (1..15)
INTEGER (1..15)
ServCellIndex

OPTIONAL, -- Cond SUL
OPTIONAL, -- Cond SUL-Only
OPTIONAL, -- Need. S


--- Page 720  ---


3GPP TS 38.331 version 17.0.0 Release 17
719
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PUSCH-TPC-CommandConfig field descriptions \\
\hline \begin{tabular}{l}
targetCell \\
The serving cell to which the acquired power control commands are applicable. If the value is absent, the UE applies the TPC commands to the serving cell on which the command has been received.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-Index \\
An index determining the position of the first bit of TPC command inside the DCI format 2-2 payload.
\end{tabular} \\
\hline \begin{tabular}{l}
tpc-IndexSUL \\
An index determining the position of the first bit of TPC command inside the DCI format 2-2 payload.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline SUL-Only & The field is optionally present, Need R, if supplementaryUplink is configured within ServingCellConfig. It is absent otherwise. \\
\hline SUL & The field is optionally present, Need R, if supplementaryUplink is configured within ServingCellConfig. It is mandatory present otherwise. \\
\hline
\end{tabular}
- \( \quad \) Q-OffsetRange

The IE Q-OffsetRange is used to indicate a cell, beam or measurement object specific offset to be applied when evaluating candidates for cell re-selection or when evaluating triggering conditions for measurement reporting. The value is in dB . Value \( d B-24 \) corresponds to \( -24 \mathrm{~dB}, d B-22 \) corresponds to -22 dB and so on.

Q-OffsetRange information element
-- ASNISTART
-- TAG-OP-OFFSETRANGE-START
Q-OffsetRange : :=
ENUMERATED [
\( d B-24, d B-22, d B-20, d B-18, d B-16, d B-14 \),
dB-12, dB-10, dB-8, dB-6, dB-5, dB-4, dB-3,
\( d B-2, d B-1, d B 0, d B 1, d B 2, d B 3, d B 4, d B 5 \),
dB6, dB8, dBl0, dBl2, dBl4, dBl6, dBl8,
dB20, dB22, dB24\}
-- TAG-Q-OFFSETRANGE-STOP
-- ASNISTOP
- Q-Qua/Min

The IE Q-QualMin is used to indicate for cell selection/ re-selection the required minimum received RSRQ level in the (NR) cell. Corresponds to parameter Qqualmn in TS 38.304 [20]. Actual value \( \mathrm{Q}_{\text {qualmn }}= \) field value \( [\mathrm{dB}] \).

Q-Qua/Min information element
-- ASNISTART
-- TAG-Q-QUALMIN-START

ETSI


--- Page 721  ---


3GPP TS 38.331 version 17.0.0 Release 17
720
ETSI TS 138331 V17.0.0 (2022-05)
```
Q-QualMin ::=
INTEGER (-43..-12)
```

-- TAG-Q-QUALMIN-STOP
-- ASNISTOP
- \( \quad \) Q-RxLevMin

The IE \( Q \)-RxLevMin is used to indicate for cell selection/ re-selection the required minimum received RSRP level in the (NR) cell. Corresponds to parameter \( Q_{\text {rxlevmn }} \) in TS 38.304 [20]. Actual value \( \mathrm{Q}_{\text {rxlevmn }}= \) field value * \( 2[\mathrm{dBm}] \).

Q-RxLevMin information element
-- ASNISTART
-- TAG-Q-RXLEVMIN-START
Q-RxLevMin : : \( \quad \) INTEGER ( \( -70 \ldots-22 \) )
-- TAG-Q-RXLEVMIN-STOP
-- ASNISTOP
- \( \quad \) QuantityConfig

The IE QuantityConfig specifies the measurement quantities and layer 3 filtering coefficients for NR and inter-RAT measurements.
QuantityConfig information element
```
-- ASNISTART
-- TAG-QUANTITYCONFIG-START
```


SEQUENCE 1
```
QuantityConfig ::=
    queflext{
    ...;
    [ [
    quantityConfigEUTRA FilterConfig
    ]],
    [ [
```

```
    quantityConfigCLI-r16
    ] ]
}
QuantityConfigNR::= SEQUENCE {
    quantityConfigCell
    xuantityConfigRS,
}
    SEQUENCE (SIZE (1..maxNrofQuantityConfig)) OF QuantityConfigNR OPTIONAL, -- Need M
    FilterConfig OPTIONAL -- Need M
    FilterConfigCLI-r16
    QuantityConfigRS,
    QuantityConfigRS
```


ETSI


--- Page 722  ---


3GPP TS 38.331 version 17.0.0 Release 17
721
ETSI TS 138331 V17.0.0 (2022-05)
```
QuantityConfigRS ::=
    ssb-FilterConfig
    csi-RS-FilterConfig
}
FilterConfig ::=
    filterCoefficientRSRP
    filterCoefficientRSRQ
    filterCoefficientRS-SINR
}
FilterConfigCLI-rl6 ::=
    filterCoefficientSRS-RSRP-r16
    filterCoefficientCLI-RSSI-rl6
}
QuantityConfigUTRA-FDD-rl6 ::= SEQUENCE {
    filterCoefficientRSCP-rl6
    filterCoefficientEcNO-rl6
}
-- TAG-QUANTITYCONEIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline QuantityConfigNR field descriptions \\
\hline \begin{tabular}{l}
quantityConfigCell \\
Specifies L3 filter configurations for cell measurement results for the configurable RS Types (e.g. SS/PBCH block and CSI-RS) and the configurable measurement quantities (e.g. RSRP, RSRQ and SINR).
\end{tabular} \\
\hline \begin{tabular}{l}
quantityConfigRS-Index \\
Specifies L3 filter configurations for measurement results per RS index for the configurable RS Types (e.g. SS/PBCH block and CSI-RS) and the configurable measurement quantities (e.g. RSRP, RSRQ and SINR).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline QuantityConfigRS field descriptions \\
\hline \begin{tabular}{l}
csi-RS-FilterConfig \\
CSI-RS based L3 filter configurations: \\
Specifies L3 filter configurations for CSI-RSRP, CSI-RSRQ and CSI-SINR measurement results from the L1 filter(s), as defined in TS 38.215 [9].
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-FilterConfig \\
SS Block based L3 filter configurations: \\
Specifies L3 filter configurations for SS-RSRP, SS-RSRQ and SS-SINR measurement results from the L1 filter(s), as defined in TS 38.215 [9].
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline QuantityConfigUTRA-FDD field descriptions \\
\hline \begin{tabular}{l}
filterCoefficientRSCP \\
Specifies L3 filter coefficient for FDD UTRAN CPICH_RSCP measuement results from L1 filter.
\end{tabular} \\
\hline \begin{tabular}{l}
filterCoefficientEcNO \\
Specifies L3 filter coefficient for FDD UTRAN CPICH_EcN0 measuement results from L1 filter.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 723  ---


3GPP TS 38.331 version 17.0.0 Release 17
722
ETSI TS 138331 V17.0.0 (2022-05)
- RACH-ConfigCommon

The IE RACH-ConfigCommon is used to specify the cell specific random-access parameters.
RACH-ConfigCommon information element
```
-- ASNISTART
-- TAG-RACH-CONFIGCOMMON-START
RACH-ConfigCommon ::= SEQUENCE \
    rach-ConfigGeneric RACH-ConfigGeneric,
```

```
    ssb-perRACH-OccasionAndCB-PreamblesPerSSB CHOICE {
```

```
        two ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32},
        four INTEGER (1..16),
        eight INTEGER (1..8),
        sixteen INTEGER (1..4)
```

```
    groupBconfigured SEQUENCE {
        ra-Msg3SizeGroupA ENUMERATED lo56, b144, b208, b256, b282, b480, b640,
                            b800, bl000, b72, spare6, spare5, spare4, spare3, spare2, sparel},
        message PowerOffsetGroupB
        numberOfRA-PreamblesGroupA
    }
    ra-ContentionResolutionTimer ENUMERATED { sf8, sfl6, sf24, sf32, sf40, sf48, sf56, sf64},
```

```
    prach-RootSequenceIndex CHOICE \
        I839 INTEGER (0..837),
        I139 INTEGER (0..137)
    },
```

```
    restrictedSetConfig ENUMERATED {unrestrictedSet, restrictedSetTypeA, restrictedSetTypeB},
```

```
    ...,
    [ [
    ra-PrioritizationForAccessIdentity-rl6 SEQUENCE \
        ra-Prioritization-rl6 RA-Prioritization,
        ra-PrioritizationForAI-rl6 BIT STRING (SIZE (2))
```

```
    prach-RootSequenceIndex-rl6 CHOICE {
        1571 INTEGER (0..569),
        11151 INTEGER (0..1149)
    } OPTIONAL -- Need. R
    ]],
    [ [
```


ETSI


--- Page 724  ---


3GPP TS 38.331 version 17.0.0 Release 17
723
ETSI TS 138331 V17.0.0 (2022-05)
```
    ] ]
```

```
partitioning conclusion on the structure
}
AdditionalRACH-ConfigCommon-rl7 ::= SEQUENCE [
    rach-ConfigCommon-rl7 RACH-ConfigCommon
```

```
    ...
}
-- TAG-RACH-CONFIGCOMMON-STOP
-- ASNISTOP
```


ETSI


--- Page 725  ---


3GPP TS 38.331 version 17.0.0 Release 17
724
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RACH-ConfigCommon field descriptions \\
\hline \begin{tabular}{l}
featureCombinationPreambles \\
Specifies a series of preamble partitions each associated to a combination of features and 4-step RA.
\end{tabular} \\
\hline \begin{tabular}{l}
messagePowerOffsetGroupB \\
Threshold for preamble selection. Value is in dB. Value minusinfinity corresponds to -infinity. Value \( d B 0 \) corresponds to \( 0 \mathrm{~dB}, d B 5 \) corresponds to 5 dB and so on. (see TS 38.321 [3], clause 5.1.2)
\end{tabular} \\
\hline \begin{tabular}{l}
msg1-SubcarrierSpacing \\
Subcarrier spacing of PRACH (see TS 38.211 [16], clause 5.3.2). \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz \\
If absent, the UE applies the SCS as derived from the prach-Configurationindex in RACH-ConfigGeneric (see tables Table 6.3.3.1-1, Table 6.3.3.1-2, Table 6.3.3.2-2 and Table 6.3.3.2-3, TS 38.211 [16]). The value also applies to contention free random access (RACH-ConfigDedicated), to SI-request and to contention-based beam failure recovery (CB-BFR). But it does not apply for contention free beam failure recovery (CF-BFR) (see BeamFailureRecoveryConfig).
\end{tabular} \\
\hline \begin{tabular}{l}
msg3-transformPrecoder \\
Enables the transform precoder for Msg3 transmission according to clause 6.1.3 of TS 38.214 [19]. If the field is absent, the UE disables the transformer precoder (see TS 38.213 [13], clause 8.3).
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfRA-PreamblesGroupA \\
The number of CB preambles per SSB in group A. This determines implicitly the number of CB preambles per SSB available in group B. (see TS 38.321 [3], clause 5.1.1). The setting should be consistent with the setting of ssb-perRACH-OccasionAndCB-PreamblesPerSSB.
\end{tabular} \\
\hline \begin{tabular}{l}
prach-RootSequenceIndex \\
PRACH root sequence index (see TS 38.211 [16], clause 6.3.3.1). The value range depends on whether \( \mathrm{L}=839 \) or \( \mathrm{L}=139 \) or \( \mathrm{L}=571 \) or \( \mathrm{L}=1151 \). The length of the root sequence corresponding with the index indicated in this IE should be consistent with the one indicated in prach-Configurationindex in the RACH-ConfigDedicated (if configured). If prach-RootSequence/ndex-r16 is signalled, UE shall ignore the prach-RootSequence/ndex (without suffix). \\
For FR2-2, only the following values are applicable depending on the used subcarrier spacing:
\( 120 \mathrm{kHz}: \mathrm{L}=139, \mathrm{~L}=571 \), and \( \mathrm{L}=1151 \)
\( 480 \mathrm{kHz}: \mathrm{L}=139 \), and \( \mathrm{L}=571 \)
\( 960 \mathrm{kHz}: \mathrm{L}=139 \)
\end{tabular} \\
\hline \begin{tabular}{l}
ra-ContentionResolutionTimer \\
The initial value for the contention resolution timer (see TS 38.321 [3], clause 5.1.5). Value sf8 corresponds to 8 subframes, value sf16 corresponds to 16 subframes, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-Misg3SizeGroupA \\
Transport Blocks size threshold in bits below which the UE shall use a contention-based RA preamble of group A. (see TS 38.321 [3], clause 5.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-Prioritization \\
Parameters which apply for prioritized random access procedure on any UL BWP of SpCell for specific Access Identities (see TS 38.321 [3], clause 5.1.1a).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-PrioritizationForAl \\
Indicates whether the field ra-Prioritization-r16 applies for Access Identities. The first/leftmost bit corresponds to Access Identity 1, the next bit corresponds to Access Identity 2. Value 1 indicates that the field ra-Prioritization-r 16 applies otherwise the field does not apply (see TS 23.501 [32]).
\end{tabular} \\
\hline \begin{tabular}{l}
rach-ConfigGeneric \\
RACH parameters for both regular random access and beam failure recovery.
\end{tabular} \\
\hline \begin{tabular}{l}
restrictedSetConfig \\
Configuration of an unrestricted set or one of two types of restricted sets, see TS 38.211 [16], clause 6.3.3.1.
\end{tabular} \\
\hline \begin{tabular}{l}
rsrp-ThresholdSSB \\
UE may select the SS block and corresponding PRACH resource for path-loss estimation and (re)transmission based on SS blocks that satisfy the threshold (see TS 38.213 [13]).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 726  ---


3GPP TS 38.331 version 17.0.0 Release 17
725
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
rsrp-ThresholdSSB-SUL \\
The UE selects SUL carrier to perform random access based on this threshold (see TS 38.321 [3], clause 5.1.1). The value applies to all the BWPs.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-perRACH-OccasionAndCB-PreamblesPerSSB \\
The meaning of this field is twofold: the CHOICE conveys the information about the number of SSBs per RACH occasion. Value oneEighth corresponds to one SSB associated with 8 RACH occasions, value oneFourth corresponds to one SSB associated with 4 RACH occasions, and so on. The ENUMERATED part indicates the number of Contention Based preambles per SSB. Value \( n 4 \) corresponds to 4 Contention Based preambles per SSB, value \( n 8 \) corresponds to 8 Contention Based preambles per SSB, and so on. \\
The total number of CB preambles in a RACH occasion is given by CB-preambles-per-SSB* max(1, SSB-per-rach-occasion). See TS 38.213 [13].
\end{tabular} \\
\hline \begin{tabular}{l}
totalNumberOfRA-Preambles \\
Total number of preambles used for contention based and contention free 4-step or 2-step random access in the RACH resources defined in RACH-ConfigCommon, excluding preambles used for other purposes (e.g. for SI request). If the field is absent, all 64 preambles are available for RA. The setting should be consistent with the setting of ssb-perRACH-OccasionAndCB-PreamblesPerSSB, i.e. it should be a multiple of the number of SSBs per RACH occasion.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline L139 & The field is mandatory present if prach-RootSequencelndex \( \mathrm{L}=139 \), otherwise the field is absent, Need S . \\
\hline SUL & The field is mandatory present in initialUplinkBWP if supplementaryUplink is configured in ServingCellConfigCommonSIB or if supplementaryUplinkConfig is configured in ServingCellConfigCommon; otherwise, the field is absent. \\
\hline InitialBWP-Only & This field is optionally present, Need R, if this BWP is the initial BWP of SpCell. Otherwise the field is absent. \\
\hline
\end{tabular}
- \( \quad \) RACH-ConfigCommonTwoStepRA

The IE RACH-ConfigCommonTwoStepRA is used to specify cell specific 2 -step random-access type parameters.

RACH-ConfigCommonTwoStepRA information element
```
-- ASNISTART
-- TAG-RACH-CONFIGCOMMONTWOSTEPRA-START
RACH-ConfigCommonTwoStepRA-rl6 ::= SEQUENCE \
    rach-ConfigGenericTwoStepRA-rl6
    msgA-TotalNumberOfRA-Preambles-rl6
    msgA-SSB-PerRACH-OccasionAndCB-PreamblesPerSSB-r16
        oneEighth
        oneFourth
        oneHalf
        one
        two
        four
        eight
        sixteen
    }
    msgA-CB-PreamblesPerSSB-PerSharedRO-rl6 INTEGER (1..60)
    msgA-SSB-SharedRO-MaskIndex-r16
    groupB-ConfiguredTwoStepRA-r16
    msgA-PRACH-RootSequenceIndex-r16
        1839
        1139
        1571
    RACH-ConfigGenericTwoStepRA-rl6,
    INTEGER (1..63) OPTIONAL, -- Need.S
    CHOICE {
        ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32,n36,n40,n44,n48,n52,n56,n60,n64},
        ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32,n36,n40,n44,n48,n52,n56,n60,n64},
        ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32,n36,n40,n44,n48,n52,n56,n60,n64},
        ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32,n36,n40,n44,n48,n52,n56,n60,n64},
        ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32},
        INTEGER (1..16),
        INTEGER (1..8),
        INTEGER (1..4)
        OPTIONAL, -- Cond 2StepOnly
    INTEGER (1..15)
    GroupB-ConfiguredTwoStepRA-rl6
    CHOICE {
        INTEGER (0..837),
        INTEGER (0..137),
        INTEGER (0..569),
```


ETSI


--- Page 727  ---


3GPP TS 38.331 version 17.0.0 Release 17
726
ETSI TS 138331 V17.0.0 (2022-05)
```
        ll151 INTEGER (0..1149)
```

```
2Step4Step msgA-RSRP-ThresholdSSB-r16 RSRP-Range
    msgA-SubcarrierSpacing-rl6 SubcarrierSpacing
2StepOnlyL139
    msgA-RestrictedSetConfig-rl6
    ra-PrioritizationForAccessIdentityTwoStep-r16
        ra-Prioritization-rl6
        ra-PrioritizationForAI-rl6
    }
InitialBWP-Only
```

```
    ...;
```

```
    ] ]
}
GroupB-ConfiguredTwoStepRA-rl6 ::= SEQUENCE \
    ra-MsgA-SizeGroupA
    messagePowerOffsetGroupB
    numberOfRA-PreamblesGroupA
}
-- TAG-RACH-CONFIGCOMMONTWOSTEPRA-STOP
-- ASNISTOP
```


ETSI


--- Page 728  ---


3GPP TS 38.331 version 17.0.0 Release 17
727
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RACH-ConfigCommonTwoStepRA field descriptions \\
\hline \begin{tabular}{l}
featureCombinationPreambles \\
Specifies a series of preamble partitions each associated to a combination of features and 2-step RA.
\end{tabular} \\
\hline \begin{tabular}{l}
groupB-ConfiguredTwoStepRA \\
Preamble grouping for 2-step random access type. If the field is absent then there is only one preamble group configured and only one msgA PUSCH configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-CB-PreamblesPerSSB-PerSharedRO \\
Number of contention-based preambles used for 2-step RA type from the non-CBRA 4-step type preambles associated with each SSB for RO shared with 4-step type RA. The number of preambles for 2-step RA type shall not exceed the number of preambles per SSB minus the number of contention-based preambles per SSB for 4-step type RA. The possible value range for this parameter needs to be aligned with value range for the configured SSBs per RACH occasion in ssb-perRACH-OccasionAndCB- \\
PreamblesPerSSB in RACH-ConfigCommon. The field is only applicable for the case of shared ROs with 4-step type random access.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PRACH-RootSequenceIndex \\
PRACH root sequence index. If the field is not configured, the UE applies the value in field prach-RootSequenceIndex in RACH-ConfigCommon in the configured BWP. When both 2-step and 4-step type random access is configured, this field is only configured for the case of separate ROs between 2-step and 4-step type random access. \\
For FR2-2, only the following values are applicable depending on the used subcarrier spacing:
\( 120 \mathrm{kHz}: \mathrm{L}=139, \mathrm{~L}=571 \), and \( \mathrm{L}=1151 \)
\( 480 \mathrm{kHz}: \mathrm{L}=139 \), and \( \mathrm{L}=571 \)
\( 960 \mathrm{kHz}: \mathrm{L}=139 \)
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RestrictedSetConfig \\
Configuration of an unrestricted set or one of two types of restricted sets for 2-step random access type preamble. If the field is not configured, the UE applies the value in field restrictedSetConfig in RACH-ConfigCommon in the configured BWP. When both 2-step and 4-step type random access is configured, this field is only configured for the case of separate ROs between 2-step and 4-step type random access.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RSRP-Threshold \\
The UE selects 2-step random access type to perform random access based on this threshold (see TS 38.321 [3], clause 5.1.1). This field is only present if both 2-step and 4step RA type are configured for the BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RSRP-ThresholdSSB \\
UE may select the SS block and corresponding PRACH resource for path-loss estimation and (re)transmission based on SS blocks that satisfy the threshold (see TS 38.213 [13]).
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-SSB-PerRACH-OccasionAndCB-PreamblesPerSSB \\
The meaning of this field is twofold: the CHOICE conveys the information about the number of SSBs per RACH occasion. Value oneEight corresponds to one SSB associated with 8 RACH occasions, value oneFourth corresponds to one SSB associated with 4 RACH occasions, and so on. The ENUMERATED part indicates the number of Contention Based preambles per SSB. Value \( n 4 \) corresponds to 4 Contention Based preambles per SSB, value \( n 8 \) corresponds to 8 Contention Based preambles per SSB, and so on. The total number of CB preambles in a RACH occasion is given by CB-preambles-per-SSB* max(1, SSB-per-rach-occasion). If the field is not configured and both 2-step and 4 -step are configured for the BWP, the UE applies the value in the field ssb-perRACH-OccasionAndCB-PreamblesPerSSB in RACH-ConfigCommon. The field is not present when RACH occasions are shared between 2-step and 4-step type random access in the BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-SSB-SharedRO-Maskindex \\
Indicates the subset of 4 -step type ROs shared with 2 -step random access type for each SSB. This field is configured when there is more than one RO per SSB. If the field is absent, and 4 -step and 2 -step has shared ROs, then all ROs are shared.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-SubcarrierSpacing \\
Subcarrier spacing of PRACH (see TS 38.211 [16], clause 5.3.2). \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz . \\
If the field is absent, the UE applies the SCS as derived from the msgA-PRACH-Configurationindex in RACH-ConfigGenericTwoStepRA (see tables Table 6.3.3.1-1, Table 6.3.3.1-2, Table 6.3.3.2-2 and Table 6.3.3.2-3, TS 38.211 [16]) in case of 2-step only BWP, otherwise the UE applies the same SCS as Msg1 derived from RACH- \\
ConfigCommon. The value also applies to contention free 2 -step random access type (RACH-ConfigDedicated).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 729  ---


3GPP TS 38.331 version 17.0.0 Release 17
728
ETSI TS 138331 V17.0.0 (2022-05)

msgA-TotalNumberOfRA-Preambles
Indicates the total number of preambles used for contention-based and contention-free 2 -step random access type when ROs for 2 -step are not shared with 4 -step. If the field is absent, and 2 -step and 4 -step does not have shared ROs, all 64 preambles are available for 2 -step random access type.
msgA-TransMax
Max number of MsgA preamble transmissions performed before switching to 4-step random access (see TS 38.321 [3], clauses 5.1.1). This field is only applicable when 2-step and 4 -step RA type are configured and switching to 4 -step type RA is supported. If the field is absent, switching from 2 -step RA type to 4 -step RA type is not allowed.
ra-ContentionResolutionTimer
The initial value for the contention resolution timer for fallback RAR in case no 4-step random access type is configured (see TS 38.321 [3], clause 5.1.5). Value sf8 corresponds to 8 subframes, value sf16 corresponds to 16 subframes, and so on. If both 2 -step and 4-step random access type resources are configured on the BWP, then this field is absent.
ra-Prioritization
Parameters which apply for prioritized random access procedure on any UL BWP of SpCell for specific Access Identities (see TS 38.321 [3], clause 5.1.1a).
ra-PrioritizationForAI
Indicates whether the field ra-Prioritization-r16 applies for Access Identities. The firstfleftmost bit corresponds to Access Identity 1, the next bit corresponds to Access Identity 2. Value 1 for an Access Identity indicates that the field ra-Prioritization-r16 applies, otherwise the field does not apply.
rach-ConfigGenericTwoStepRA
2-step random access type parameters for both regular random access and beam failure recovery.

\begin{tabular}{|l|}
\hline GroupB-ConfiguredTwoStepRA field descriptions \\
\hline \begin{tabular}{l}
messagePowerOffsetGroupB \\
Threshold for preamble selection. Value is in dB. Value minusinfinity corresponds to -infinity. Value \( d B 0 \) corresponds to \( 0 \mathrm{~dB}, d B 5 \) corresponds to 5 dB and so on. (see TS 38.321 [3], clause 5.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfRA-PreamblesGroupA \\
The number of CB preambles per SSB in group A for idle/inactive or connected mode. The setting of the number of preambles for each group should be consistent with msgA-SSB-PerRACH-OccasionAndCB-PreamblesPerSSB or msgA-CB-PreamblesPerSSB-PerSharedRO if configured.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-MsgA-SizeGroupA \\
Transport block size threshold in bits below which the UE shall use a contention-based RA preamble of group A. (see TS 38.321 [3], clause 5.1.1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline 2StepOnlyL139 & The field is mandatory present if msgA-PRACH-RootSequencelndex \( \mathrm{L}=139 \) and no 4-step random access type is configured, otherwise the field is absent, Need S. \\
\hline 2StepOnly & The field is mandatory present if there are no 4-step random access configurations configured in the BWP, i.e only 2-step random access type configured in the BWP, otherwise the field is optionally present, Need S. \\
\hline SharedRO & The field is mandatory present if the 2 -step random access type occasions are shared with 4 -step random access type, otherwise the field is not present. \\
\hline 2Step4Step & The field is mandatory present if both 2-step random access type and 4-step random access type are configured in the BWP, otherwise the field is not present. \\
\hline InitialBWP-Only & This field is optionally present, Need R, if this BWP is the initial BWP of SpCell. Otherwise the field is absent. \\
\hline
\end{tabular}
- \( \quad \) RACH-ConfigDedicated

The IE RACH-ConfigDedicated is used to specify the dedicated random access parameters.

ETSI


--- Page 730  ---


3GPP TS 38.331 version 17.0.0 Release 17
729
ETSI TS 138331 V17.0.0 (2022-05)

RACH-ConfigDedicated information element
```
-- ASNISTART
-- TAG-RACH-CONFIGDEDICATED-START
RACH-ConfigDedicated ::= SEQUENCE [
    cfra CFRA
```

```
    ...;
    [ [
```

```
    cfra-TwoStep-rl6 CFRA-TwoStep-rl6
    ]]
}
CFRA ::= SEQUENCE \
    occasions SEQUENCE \
        rach-ConfigGeneric RACH-ConfigGeneric,
        ssb-perRACH-Occasion ENUMERATED [oneEighth, oneFourth, oneHalf, one, two, four, eight, sixteen]
                            OPTIONAL -- Cond Mandatory
    }
    resources CHOICE [
        ssb SEQUENCE {
            ssb-ResourceList SEQUENCE (SIZE(l..maxRA-SSB-Resources)) OF CFRA-SSB-Resource,
            ra-ssb-OccasionMaskIndex INTEGER (0..15)
        },
        csirs SEQUENCE \
            csirs-ResourceList SEQUENCE (SIZE(l..maxRA-CSIRS-Resources)) OF CFRA-CSIRS-Resource,
            rsrp-ThresholdCSI-RS RSRP-Range
        }
    },
    ...;
    [ [
```

```
    ] ]
}
CFRA-TwoStep-rl6 ::= SEQUENCE \
    occasionsTwoStepRA-rl6 SEQUENCE \
        rach-ConfigGenericTwoStepRA-r16 RACH-ConfigGenericTwoStepRA-r16,
        ssb-PerRACH-OccasionTwoStepRA-rl6 ENUMERATED loneEighth, oneFourth, oneHalf, one,
                            two, four, eight, sixteen}
    }
    msgA-CFRA-PUSCH-r16
    msgA-TransMax-r16
    resourcesTwoStep-rl6
        ssb-ResourceList
        ra-ssb-OccasionMaskIndex
    },
    ...
}
CFRA-SSB-Resource ::= SEQUENCE \
```


ETSI


--- Page 731  ---


3GPP TS 38.331 version 17.0.0 Release 17
730
ETSI TS 138331 V17.0.0 (2022-05)
```
    ssb SSB-Index,
    ra-PreambleIndex INTEGER (0..63),
    [ [
    msgA-PUSCH-Resource-Index-rl6 INTEGER (0..3071) OPTIONAL -- Cond 2StepCFRA
    ] ]
}
CFRA-CSIRS-Resource ::=
    csi-RS
    ra-OccasionList
    SEQUENCE (SIZE(l..maxRA-OccasionsPerCSIRS)) OF INTEGER (O..maxRA-Occasions-1),
    ...
}
-- TAG-RACH-CONFIGDEDICATED-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CFRA-CSIRS-Resource field descriptions \\
\hline \begin{tabular}{l}
csi-RS \\
The ID of a CSI-RS resource defined in the measurement object associated with this serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-OccasionList \\
RA occasions that the UE shall use when performing CF-RA upon selecting the candidate beam identified by this CSI-RS. The network ensures that the RA occasion indexes provided herein are also configured by prach-ConfigurationIndex and msg1-FDM. Each RACH occasion is sequentially numbered, first, in increasing order of frequency resource indexes for frequency multiplexed PRACH occasions; second, in increasing order of time resource indexes for time multiplexed PRACH occasions within a PRACH slot and Third, in increasing order of indexes for PRACH slots.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-Preambleindex \\
The RA preamble index to use in the RA occasions associated with this CSI-RS.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline CFRA field descriptions \\
\hline \begin{tabular}{l}
occasions \\
RA occasions for contention free random access. If the field is absent, the UE uses the RA occasions configured in RACH-ConfigCommon in the first active UL BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-ssb-OccasionMaskindex \\
Explicitly signalled PRACH Mask Index for RA Resource selection in TS 38.321 [3]. The mask is valid for all SSB resources signalled in ssb-ResourceList.
\end{tabular} \\
\hline \begin{tabular}{l}
rach-ConfigGeneric \\
Configuration of contention free random access occasions for CFRA. The UE shall ignore preambleReceivedTargetPower, preambleTransMax, powerRampingStep, raResponseWindow signaled within this field and use the corresponding values provided in RACH-ConfigCommon.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-perRACH-Occasion \\
Number of SSBs per RACH occasion.
\end{tabular} \\
\hline \begin{tabular}{l}
totalNumberOfRA-Preambles \\
Total number of preambles used for contention free random access in the RACH resources defined in CFRA, excluding preambles used for other purposes (e.g. for SI request). If the field is absent but the field occasions is present, the UE may assume all the 64 preambles are for RA. The setting should be consistent with the setting of ssb-perRACH-Occasion, if present, i.e. it should be a multiple of the number of SSBs per RACH occasion.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 732  ---


3GPP TS 38.331 version 17.0.0 Release 17
731
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CFRA-SSB-Resource field descriptions \\
\hline \begin{tabular}{l}
msgA-PUSCH-Resource-index \\
Identifies the index of the PUSCH resource used for MSGA CFRA. The PUSCH resource index indicates a valid PUSCH occasion (as specified in TS 38.213 [13], clause 8.1A) and the associated DMRS resources corresponding to a PRACH slot. The PUSCH resource indexes are sequentially numbered and are mapped to valid PUSCH occasions corresponding to a PRACH slot which are ordered, first, in increasing order of frequency resource indexes for frequency multiplexed PUSCH occasions; second, in increasing order of DMRS resource indexes within a PUSCH occasion, where a DMRS resource index \( \boldsymbol{D M R S}_{\text {id }} \) is determined first in an ascending order of a DMRS port index and then in an ascending order of a DMRS sequence index, third in increasing order of time resource indexes for time multiplexed PUSCH occasions within a PUSCH slot and fourth, in increasing order of indexes for PUSCH slots. For the case of contention free 2-step random access type, if this field is absent, the UE shall use the value 0.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-Preambleindex \\
The preamble index that the UE shall use when performing CF-RA upon selecting the candidate beams identified by this SSB.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb \\
The ID of an SSB transmitted by this serving cell.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline CFRA-TwoStep field descriptions \\
\hline \begin{tabular}{l}
msgA-CFRA-PUSCH \\
PUSCH resource configuration(s) for msgA CFRA.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-TransMax \\
Max number of MsgA preamble transmissions performed before switching to 4-step type random access (see TS 38.321 [3], clauses 5.1.1). This field is only applicable when 2-step and 4-step RA type are configured and switching to 4-step type RA is supported. If the field is absent in cfra-TwoStep, switching from 2-step RA type to 4-step RA type is not allowed.
\end{tabular} \\
\hline \begin{tabular}{l}
occasionsTwoStepRA \\
RA occasions for contention free random access. If the field is absent, the UE uses the RA occasions configured in RACH-ConfigCommonTwoStepRA in the first active UL BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-SSB-OccasionMaskindex \\
Explicitly signalled PRACH Mask Index for RA Resource selection in TS 38.321 [3]. The mask is valid for all SSB resources signalled in ssb-ResourceList.
\end{tabular} \\
\hline \begin{tabular}{l}
rach-ConfigGenericTwoStepRA \\
Configuration of contention free random access occasions for CFRA 2-step random access type.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PerRACH-OccasionTwoStep \\
Number of SSBs per RACH occasion for 2-step random access type.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline RACH-ConfigDedicated field descriptions \\
\hline \begin{tabular}{l}
cfra \\
Parameters for contention free random access to a given target cell. If this field and cfra-TwoStep are absent, the UE performs contention based random access.
\end{tabular} \\
\hline \begin{tabular}{l}
cfra-TwoStep \\
Parameters for contention free 2-step random access type to a given target cell. Network ensures that cfra and cfra-TwoStep are not configured at the same time. If this field and cfra are absent, the UE performs contention based random access. This field may only be present if msgA-ConfigCommon is configured on the BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-prioritization \\
Parameters which apply for prioritized random access procedure to a given target cell (see TS 38.321 [3], clause 5.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-PrioritizationTwoStep \\
Parameters which apply for prioritized 2-step random access type procedure to a given target cell (see TS 38.321 [3], clause 5.1.1).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 733  ---


3GPP TS 38.331 version 17.0.0 Release 17
732
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline Mandatory & The field is mandatory present. \\
\hline Occasions & The field is optionally present, Need S, if the field occasions is present, otherwise it is absent. \\
\hline 2StepCFRA & The field is optionally present for the case of 2-step RA type contention free random access, Need S, otherwise it is absent. \\
\hline
\end{tabular}
- \( \quad \) RACH-ConfigGeneric

The IE RACH-ConfigGeneric is used to specify the random-access parameters both for regular random access as well as for beam failure recovery.
RACH-ConfigGeneric information element
```
-- ASNISTART
-- TAG-RACH-CONFIGGENERIC-START
RACH-ConfigGeneric ::= SEQUENCE \
    prach-ConfigurationIndex INTEGER (0..255),
    msgl-FDM
    ENUMERATED [one, two, four, eight,
    zeroCorrelationZoneConfig
    preambleReceivedTarget Power
    preambleTransMax
    powerRampingStep
    ra-ResponseWindow
    ...;
    [ [
    prach-ConfigurationPeriodScaling-IAB-r16
    prach-ConfigurationFrameOffset-IAB-rl6
    prach-ConfigurationSOffset-IAB-rl6
    ra-ResponseWindow-vl610
    ENUMERATED [ sl60, sll60}
    ]],
    [ [
```

```
    ]]
}
-- TAG-RACH-CONFIGGENERIC-STOP
-- ASNISTOP
```


ETSI


--- Page 734  ---


3GPP TS 38.331 version 17.0.0 Release 17
733
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RACH-ConfigGeneric field descriptions \\
\hline \begin{tabular}{l}
msg1-FDM \\
The number of PRACH transmission occasions FDMed in one time instance. (see TS 38.211 [16], clause 6.3.3.2).
\end{tabular} \\
\hline \begin{tabular}{l}
msg1-FrequencyStart \\
Offset of lowest PRACH transmission occasion in frequency domain with respective to PRB 0 . The value is configured so that the corresponding RACH resource is entirely within the bandwidth of the UL BWP. (see TS 38.211 [16], clause 6.3.3.2).
\end{tabular} \\
\hline \begin{tabular}{l}
powerRampingStep \\
Power ramping steps for PRACH (see TS 38.321 [3],5.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
prach-ConfigurationFrameOffset-IAB \\
Frame offset for ROs defined in the baseline configuration indicated by prach-Configuration/ndex and is used only by the IAB-MT. (see TS 38.211 [16], clause 6.3.3.2).
\end{tabular} \\
\hline \begin{tabular}{l}
prach-Configurationindex \\
PRACH configuration index. For prach-Configuration/ndex configured under beamFailureRecovery-Config, the prach-Configurationindex can only correspond to the short preamble format, (see TS 38.211 [16], clause 6.3.3.2). If the field prach-Configuration/ndex-v1610 is present, the UE shall ignore the value provided in prach- \\
Configuration/ndex (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
prach-ConfigurationPeriodScaling-IAB \\
Scaling factor to extend the periodicity of the baseline configuration indicated by prach-Configurationindex and is used only by the IAB-MT. Value scf1 corresponds to scaling factor of 1 and so on. (see TS 38.211 [16], clause 6.3.3.2).
\end{tabular} \\
\hline \begin{tabular}{l}
prach-ConfigurationSOffset-IAB \\
Subframe/Slot offset for ROs defined in the baseline configuration indicated by prach-Configurationindex and is used only by the IAB-MT. (see TS 38.211 [16], clause 6.3.3.2).
\end{tabular} \\
\hline \begin{tabular}{l}
preambleReceivedTargetPower \\
The target power level at the network receiver side (see TS 38.213 [13], clause 7.4, TS 38.321 [3], clauses 5.1.2, 5.1.3). Only multiples of 2 dBm may be chosen (e.g. -202, 200, -198, ...).
\end{tabular} \\
\hline \begin{tabular}{l}
preambleTransMax \\
Max number of RA preamble transmission performed before declaring a failure (see TS 38.321 [3], clauses 5.1.4, 5.1.5).
\end{tabular} \\
\hline \begin{tabular}{l}
ra-ResponseWindow \\
Msg2 (RAR) window length in number of slots. The network configures a value lower than or equal to 10 ms when Msg2 is transmitted in licensed spectrum and a value lower than or equal to 40 ms when Msg2 is transmitted with shared spectrum channel access (see TS 38.321 [3], clause 5.1.4). UE ignores the field if included in SCellConfig. If ra-ResponseWindow-v1610 or ra-ResponseWindow-v1700 is signalled, UE shall ignore the ra-ResponseWindow (without suffix). The field ra-ResponseWindow-v1700 is applicable to SCS 480 kHz and SCS 960 kHz .
\end{tabular} \\
\hline \begin{tabular}{l}
zeroCorrelationZoneConfig \\
N-CS configuration, see Table 6.3.3.1-5 in TS 38.211 [16].
\end{tabular} \\
\hline
\end{tabular}
- RACH-ConfigGenericTwoStepRA

The IE RACH-ConfigGenericTwoStepRA is used to specify the 2 -step random access type parameters.
RACH-ConfigGenericTwoStepRA information element
```
-- ASNISTART
-- TAG-RACH-CONFIGGENERICTWOSTEPRA-START
RACH-ConfigGenericTwoStepRA-rl6 ::= SEQUENCE [
    msgA-PRACH-ConfigurationIndex-rl6
    msgA-RO-FDM-rl6
    msgA-RO-FrequencyStart-rl6
    msgA-ZeroCorrelationZoneConfig-r16
    INTEGER (0..262)
    ENUMERATED {one, two, four, eight}
    INTEGER (O..MaxNrofPhysicalResourceBlocks-l)
    INTEGER (0..15)
```


OPTIONAL, -- Cond 2StepOnly OPTIONAL, -- Cond 2StepOnly OPTIONAL, -- Cond 2StepOnly OPTIONAL, -- Cond 2StepOnly

ETSI


--- Page 735  ---


3GPP TS 38.331 version 17.0.0 Release 17
734
ETSI TS 138331 V17.0.0 (2022-05)
```
    msgA-PreamblePowerRampingStep-rl6
    msgA-PreambleReceivedTarget Power-rl6
    msgB-ResponseWindow-rl6
    preambleTransMax-r16
    ...''
    [ [
    msgB-ResponseWindow-vl700
    ]]
}
-- TAG-RACH-CONFIGGENERICTWOSTEPRA-STOP
-- ASNISTOP
```

```
ENUMERATED {dBO, dB2, dB4, dB6}
OPTIONAL, -- Cond 2StepOnlyNoCFRA
OPTIONAL, -- Cond 2StepOnlyNoCFRA
ENUMERATED {sll, sl2, sl4, sl8, sllo, sl20, sl40, sl80, sll60, sl320}
OPTIONAL, -- Cond NOCFRA
ENUMERATED {n3, n4, n5, n6, n7, n8, n10, n20, n50, n100, n200} OPTIONAL, -- Cond 2StepOnlyNoCFRA
ENUMERATED {sl240, sl640, sl960, sl1280, sl1920, sl2560} OPTIONAL -- COND NOCFRA2
```


ETSI


--- Page 736  ---


3GPP TS 38.331 version 17.0.0 Release 17
735
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RACH-ConfigGenericTwoStepRA field descriptions \\
\hline \begin{tabular}{l}
msgA-PreamblePowerRampingStep \\
Power ramping steps for msgA PRACH. If the field is absent, UE shall use the value of powerRampingStep in RACH-ConfigGeneric in the configured BWP (see TS 38.321 [3], 5.1.3). This field may only be present if no 4-step type RA is configured in the BWP or in the case of separate ROs with 4-step type RA. The field is absent if RACHConfigGenericTwoStepRA is included in CFRA-TwoStep in RACH-ConfigDedicated and then the UE uses the value of msgA-PreamblePowerRampingStep in RACHConfigGenericTwoStepRA configured for CBRA.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PreambleReceivedTargetPower \\
The target power level at the network receiver side (see TS 38.213 [13], clause 7.1.1 and TS 38.321 [3], clause 5.1.1). Only multiples of 2 dBm may be chosen (e.g -202, -200, \( -198, \ldots \) ). If the field is absent, UE shall use the value of preambleReceived TargetPower in RACH-ConfigGeneric in the configured BWP. This field may only be present if no 4step type RA is configured in the BWP. The field is absent if RACH-ConfigGenericTwoStepRA is included in CFRA-TwoStep in RACH-ConfigDedicated and then the UE uses the value of msgA-PreambleReceivedTargetPower in RACH-ConfigGenericTwoStepRA configured for CBRA.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-PRACH-Configurationindex \\
Cell-specific PRACH configuration index for 2-step RA type. If the field is absent the UE shall use the value of corresponding 4-step random access parameter in the configured BWP. If the value is in the range of 256 to 262, the field prach-Configuration/ndex-v1610 should be considered configured (see TS 38.211 [16], clause 6.3.3.2). This field may only be present if no 4 -step type RA is configured in the BWP or in the case of separate ROs with 4 -step type RA.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RO-FDM \\
The number of msgA PRACH transmission occasions Frequency-Division Multiplexed in one time instance. If the field is absent, UE shall use value of msg1-FDM in RACHConfigGeneric in the configured BWP (see TS 38.211 [16], clause 6.3.3.2). This field may only be present if no 4-step type RA is configured in the BWP or in the case of separate ROs with 4-step type RA.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-RO-FrequencyStart \\
Offset of lowest PRACH transmissions occasion in frequency domain with respect to PRB 0 . If the field is absent, UE shall use value of msg 1-FrequencyStart in RACHConfigGeneric in the configured BWP (see TS 38.211 [16], clauses 5.3.2 and 6.3.3.2). This field may only be present if no 4-step type RA is configured in the BWP or in the case of separate ROs with 4-step type RA.
\end{tabular} \\
\hline \begin{tabular}{l}
msgA-ZeroCorrelationZoneConfig \\
N-CS configuration for msgA preamble, see Table 6.3.3.1-5 in TS 38.211 [16]. If the field is absent, UE shall use value zeroCorrelationZoneConfig in RACH-ConfigGeneric in the configured BWP. This field may only be present if no 4-step type RA is configured in the BWP or in the case of separate ROs with 4-step type RA.
\end{tabular} \\
\hline \begin{tabular}{l}
msgB-ResponseWindow \\
MsgB monitoring window length in number of slots. The network configures a value lower than or equal to 40 ms (see TS 38.321 [3], clause 5.1.1). The network does not configure msgB-ResponseWindow-r16 simultaneously with msgB-ResponseWindow-v1700, and if both fields are absent, the UE uses the value of msgB-ResponseWindow in RACH-ConfigGenericTwoStepRA configured for CBRA.
\end{tabular} \\
\hline \begin{tabular}{l}
preambleTransMax \\
Max number of RA preamble transmission performed before declaring a failure (see TS 38.321 [3], clauses 5.1.4, 5.1.5). If the field is absent, UE shall use the value of preamble TransMax in RACH-ConfigGeneric in the configured BWP. The field is absent if RACH-ConfigGenericTwoStepRA is included in CFRA-TwoStep in RACHConfigDedicated and then the UE uses the value of preamble TransMax in RACH-ConfigGeneric TwoStepRA configured for CBRA.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 737  ---


3GPP TS 38.331 version 17.0.0 Release 17
736
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline 2StepOnly & The field is mandatory present if there are no 4 -step random access configurations configured in the BWP, i.e only 2 -step random access type configured in the BWP, otherwise the field is optionally present, Need S. \\
\hline 2StepOnlyNoCFRA & The field is mandatory present if RACH-ConfigGenericTwoStepRA is included in the RACH-ConfigCommonTwoStepRA and there are no 4-step random access configurations configured in the BWP (i.e only 2-step random access type configured in the BWP), otherwise (i.e. 4-step random access configuration also exists in the BWP) the field is optionally present, Need S. When RACH-ConfigGenericTwoStepRA is included in the RACH-ConfigDedicated, this field is absent. \\
\hline NoCFRA & The field is mandatory present if msgB-ResponseWindow-r17 is absent and RACH-ConfigGenericTwoStepRA is not included in CFRA-TwoStep in RACH-ConfigDedicated, otherwise the field is absent, Need S. \\
\hline NoCFRA2 & The field is mandatory present if msgB-ResponseWindow-r16 is absent and RACH-ConfigGenericTwoStepRA is not included in CFRA-TwoStep in RACH-ConfigDedicated, otherwise the field is absent, Need S. \\
\hline
\end{tabular}
- \( \quad \) RA-Prioritization

The IE RA-Prioritization is used to configure prioritized random access.
RA-Prioritization information element
-- ASNISTART
-- TAG-RA-PRIORITIZATION-START
RA-Prioritization : := SEQUENCE [
powerRampingStepHighPriority ENUMERATED \{dB0, dB2, dB4, dB6\},
⋯
\}
-- TAG-RA-PRIORITIZATION-STOP
-- ASNISTOP

RA-Prioritization field descriptions
powerRampingStepHighPrioritiy
Power ramping step applied for prioritized random access procedure.
scalingFactorBI
Scaling factor for the backoff indicator (BI) for the prioritized random access procedure. (see TS 38.321 [3], clause 5.1.4). Value zero corresponds to 0 , value dot25 corresponds to 0.25 and so on.

ETSI


--- Page 738  ---


3GPP TS 38.331 version 17.0.0 Release 17
737
ETSI TS 138331 V17.0.0 (2022-05)
- \( \quad \) RA-Prioritization ForSlicing

The IE RA-PrioritizationForSlicing is used to configure prioritized random access for slicing.
RA-PrioritizationForSlicing information element
```
-- ASNISTART
-- TAG-RA-PRIORITIZATIONFORSLICING-START
RA-PrioritizationForSlicing-rl7 ::= SEQUENCE [
    ra-PrioritizationSliceInfoList-rl7 RA-PrioritizationSliceInfoList-rl7,
    ...
}
RA-PrioritizationSliceInfoList-rl7 ::= SEQUENCE (SIZE (l..MaxSliceInfo-rl7)) OF RA-PrioritizationSliceInfo-rl7
RA-PrioritizationSliceInfo-rl7 ::= SEQUENCE [
    sliceGroupIDList-rl7 SEQUENCE (SIZE (l..maxSliceInfo-rl7)) OF SliceGroupID-rl7,
    ra-Prioritization-rl7 RA-Prioritization,
    ...
}
-- TAG-RA-PRIORITIZATIONFORSLICING-STOP
-- ASNISTOP
```

- RadioBearerConfig

The IE RadioBearerConfig is used to add, modify and release signalling, multicast MRBs and/or data radio bearers. Specifically, this IE carries the parameters for PDCP and, if applicable, SDAP entities for the radio bearers.

RadioBearerConfig information element
```
-- ASNISTART
-- TAG-RADIOBEARERCONEIG-START
RadioBearerConfig ::= SEQUENCE \
    srb-ToAddModList SRB-ToAddModList
    srb3-ToRelease ENUMERATED{true}
    drb-ToAddModList DRB-ToAddModList
    drb-ToReleaseList DRB-ToReleaseList
    securityConfig SecurityConfig
    ...;
    [ [
    mrb-ToAddModList-rl7 MRB-ToAddModList-rl7
    mrb-ToReleaseList-rl7 MRB-ToReleaseList-rl7
    srb-ToAddModListExt-rl7 SRB-ToAddModListExt-rl7
    srb4-ToRelease-rl7 ENUMERATED{true}
    ] ]
```


ETSI


--- Page 739  ---


3GPP TS 38.331 version 17.0.0 Release 17
738
ETSI TS 138331 V17.0.0 (2022-05)
```
}
SRB-ToAddModList ::=
SEQUENCE (SIZE (1..2)) OF SRB-TOAddMOd.
SRB-ToAddModListExt-rl7 ::=
SEQUENCE (SIZE (1)) OF SRB-ToAddMod
SEQUENCE {
SRB-ToAddMod ::=
    srb-Identity
    reestablishPDCP
    discardOnPDCP
    pdep-Config
    ...,
    [ [
    srb-Identity-vl700
    ]]
}
DRB-ToAddModList ::=
DRB-ToAddMod ::=
    cnAssociation
        eps-BearerIdentity
        sdap-Config
    }
    drb-Identity
    reestablishPDCP
    recoverPDCP
    pdep-Config
    ...,
    [ [
    daps-Config-rl6
    ]]
}
DRB-ToReleaseList ::= SEQUENCE (SIZE (l..maxDRB)) OF DRB-Identity
SecurityConfig ::=
    securityAlgorithmConfig
    keyToUse
    ...
}
MRB-ToAddModList-rl7 ::=
MRB-ToAddMod-rl7 ::=
    tmgi-rl7
    mrb-Identity-rl7
    mrb-IdentityNew-rl7
    reestablishPDCP-rl7
    recoverPDCP-rl7
    pdcp-Config-rl7
    ...
}
MRB-ToReleaseList-rl7 ::= SEQUENCE (SIZE (l..maxMRB-rl7)) OF MRB-Identity-rl7
```


ETSI


--- Page 740  ---


3GPP TS 38.331 version 17.0.0 Release 17
739
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-RADIOBEARERCONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline DRB-ToAddMod and MRB-ToAddMod field descriptions \\
\hline \begin{tabular}{l}
cnAssociation \\
Indicates if the bearer is associated with the eps-bearerldentity (when connected to EPC) or sdap-Config (when connected to 5GC).
\end{tabular} \\
\hline \begin{tabular}{l}
daps-Config \\
Indicates that the bearer is configured as DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
drb-Identity \\
In case of DC, the DRB identity is unique within the scope of the UE, i.e. an MCG DRB cannot use the same value as a split DRB. For a split DRB the same identity is used for the MCG and SCG parts of the configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
eps-Beareridentity \\
The EPS bearer ID determines the EPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
mrb-Identity \\
Identification of the multicast MRB.
\end{tabular} \\
\hline \begin{tabular}{l}
mrb-IdentityNew \\
New identity of the multicast MRB when mrb-/dentity needs to be changed, e.g. as a result of a handover.
\end{tabular} \\
\hline \begin{tabular}{l}
reestablishPDCP \\
Indicates that PDCP should be re-established. Network sets this to true whenever the security key used for this radio bearer changes. Key change could for example be due to termination point change for the bearer, reconfiguration with sync, resuming an RRC connection, or the first reconfiguration after reestablishment. It is also applicable for LTE procedures when NR PDCP is configured. Network doesn't include this field for DRB if the bearer is configured as DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
recoverPDCP \\
Indicates that PDCP should perform recovery according to TS 38.323 [5]. Network doesn't include this field if the bearer is configured as DAPS bearer.
\end{tabular} \\
\hline \begin{tabular}{l}
sdap-Config \\
The SDAP configuration determines how to map QoS flows to DRBs when NR or E-UTRA connects to the 5GC and presence/absence of UL/DL SDAP headers.
\end{tabular} \\
\hline \begin{tabular}{l}
\( t m g i \) \\
Indicates which MBS session the bearer is associated with.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline RadioBearerConfig field descriptions \\
\hline \begin{tabular}{l}
securityConfig \\
Indicates the security algorithm and key to use for the signalling and data radio bearers configured with the list in this IE RadioBearerConfig. When the field is not included after AS security has been activated, the UE shall continue to use the currently configured keyToUse and security algorithm for the radio bearers reconfigured with the lists in this IE RadioBearerConfig. The field is not included when configuring SRB1 before AS security is activated.
\end{tabular} \\
\hline \begin{tabular}{l}
srb3-ToRelease \\
Release SRB3. SRB3 release can only be done over SRB1 and only at SCG release and reconfiguration with sync.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 741  ---


3GPP TS 38.331 version 17.0.0 Release 17
740
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SecurityConfig field descriptions \\
\hline \begin{tabular}{l}
keyToUse \\
Indicates if the bearers configured with the list in this IE RadioBearerConfig are using the master key or the secondary key for deriving ciphering and/or integrity protection keys. For MR-DC, network should not configure SRB1 and SRB2 with secondary key and SRB3 with the master key. When the field is not included, the UE shall continue to use the currently configured keyToUse for the radio bearers reconfigured with the lists in this IE RadioBearerConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
securityAlgorithmConfig \\
Indicates the security algorithm for the signalling and data radio bearers configured with the list in this IE RadioBearerConfig. When the field is not included, the UE shall continue to use the currently configured security algorithm for the radio bearers reconfigured with the lists in this IE RadioBearerConfig.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SRB-ToAddMod field descriptions \\
\hline \begin{tabular}{l}
discardOnPDCP \\
Indicates that PDCP should discard stored SDU and PDU according to TS 38.323 [5].
\end{tabular} \\
\hline \begin{tabular}{l}
reestablishPDCP \\
Indicates that PDCP should be re-established. Network sets this to true whenever the security key used for this radio bearer changes. Key change could for example be due to reconfiguration with sync, for SRB2 when resuming an RRC connection, or at the first reconfiguration after RRC connection reestablishment in NR. For SRB1, when resuming an RRC connection, or at the first reconfiguration after RRC connection reestablishment in NR, the network does not set this field to true. For LTE SRBs using NR PDCP, it could be for handover, RRC connection reestablishment or resume. Network doesn't include this field if any DAPS bearer is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
srb-Identity, srb-Identity-v1700 \\
Value 1 is applicable for SRB1 only. Value 2 is applicable for SRB2 only. Value 3 is applicable for SRB3 only. Value 4 is applicable for SRB4 only. If srb-Identity-v1700 is received for an SRB, the UE shall ignore srb-Identity (i.e. without suffix) for this SRB.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 742  ---


3GPP TS 38.331 version 17.0.0 Release 17
741
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline RBTermChange & \begin{tabular}{l}
The field is mandatory present in case of: \\
- set up of signalling and data radio bearer, \\
- change of termination point for the radio bearer between MN and SN . \\
It is optionally present otherwise, Need S.
\end{tabular} \\
\hline RBTermChange 1 & \begin{tabular}{l}
The field is mandatory present in case of: \\
- set up of signalling and data radio bearer, \\
- change of termination point for the radio bearer between MN and SN , \\
- handover from E-UTRA/EPC or E-UTRA/5GC to NR, \\
- handover from NR or E-UTRA/EPC to E-UTRA/5GC if the UE supports NGEN-DC. \\
It is optionally present otherwise, Need S.
\end{tabular} \\
\hline PDCP & The field is mandatory present if the corresponding DRB/multicast MRB is being setup or corresponding DRB/multicast MRB is reconfigured with NR PDCP or corresponding SRB associated with two RLC entities is being setup or if the number of RLC bearers associated with the DRB/multicast MRB or SRB is changed. The field is optionally present, Need S, if the corresponding SRB associated with one RLC entity is being setup or corresponding SRB is reconfigured with NR PDCP; otherwise the field is optionally present, need M. \\
\hline DRBSetup & The field is mandatory present if the corresponding DRB is being setup; otherwise the field is optionally present, need M. \\
\hline HO-Conn & \begin{tabular}{l}
The field is mandatory present \\
- in case of inter-system handover from E-UTRA/EPC to E-UTRA/5GC or NR, \\
- or when the fullConfig is included in the RRCReconfiguration message and NE-DC/NR-DC is not configured, \\
- or in case of RRCSetup. \\
Otherwise the field is optionally present, need N . \\
Upon RRCSetup, only SRB1 can be present.
\end{tabular} \\
\hline HO-toNR & \begin{tabular}{l}
If mrb-ToAddModList is not included, the field is mandatory present \\
- in case of inter-system handover from E-UTRA/EPC to E-UTRA/5GC or NR, \\
- or when the fullConfig is included in the RRCReconfiguration message and NE-DC/NR-DC is not configured. In case of RRCSetup, the field is absent; otherwise the field is optionally present, need N .
\end{tabular} \\
\hline DAPS & The field is optionally present, need N, in case masterCellGroup includes ReconfigurationWithSync, SCell(s) and SCG are not configured, multi-DCl/single-DCI based multi-TRP are not configured in any DL BWP, supplementaryUplink is not configured, ethernetHeaderCompression is not configured for the DRB, conditionalReconfiguration for CHO is not configured, and NR sidelink and V2X sidelink are not configured. Otherwise the field is absent. \\
\hline MRBSetup & The field is mandatory present if the corresponding multicast MRB is being setup; otherwise the field is optionally present, need M. \\
\hline
\end{tabular}
- RadioLinkMonitoringConfig

The IE RadioLinkMonitoringConfig is used to configure radio link monitoring for detection of beam- and/or cell radio link failure. See also TS 38.321 [3], clause 5.1.1.
RadioLinkMonitoringConfig information element
-- ASNISTART
-- TAG-RADIOLINKMONITORINGCONEIG-START

RadioLinkMonitoringConfig : : SEQUENCE |
OPTIONAL, -- Need N

ETSI


--- Page 743  ---


3GPP TS 38.331 version 17.0.0 Release 17
742
ETSI TS 138331 V17.0.0 (2022-05)
```
                OPTIONAL, -- Need N
    beamFailureInstanceMaxCount
    beamFailureDetectionTimer
    ...r
    [ [
    failureDetectionSetl-rl7
    failureDetectionSet2-rl7
    ]]
}
RadioLinkMonitoringRS ::=
    radioLinkMonitoringRS-Id
    purpose
    detectionResource
        ssb-Index
        csi-RS-Index
    },
    ...
}
BeamFailureDetectionSet-rl7 ::= SEQUENCE {
    bfdRSSetId-rl7
    bfdResourcesToAddModList-rl7
                SEQUENCE (SIZE(l..maxNrofBFDResourcePerSet-rl7)) OF RadioLinkMonitoringRS
    bfdResourcesToReleaseList-rl7
            OPTIONAL, -- Need. N
                Need N
    beamFailureDetectionTimer-rl7
    ...
```

```
}
-- TAG-RADIOLINKMONITORINGCONFIG-STOP
-- ASNISTOP
```

ETSI


--- Page 744  ---


3GPP TS 38.331 version 17.0.0 Release 17
743
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RadioLinkMonitoringConfig field descriptions \\
\hline \begin{tabular}{l}
beamFailureDetectionTimer \\
Timer for beam failure detection (see TS 38.321 [3], clause 5.17). See also the BeamFailureRecoveryConfig IE. Value in number of "Qout, LR reporting periods of Beam Failure Detection" Reference Signal (see TS 38.213 [13], clause 6). Value pbfd1 corresponds to \( 1 Q_{o u t, L R} \) reporting period of Beam Failure Detection Reference Signal, value pbfd2 corresponds to 2 Qout,LR reporting periods of Beam Failure Detection Reference Signal and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
beamFailureinstanceMaxCount \\
This field determines after how many beam failure events the UE triggers beam failure recovery (see TS 38.321 [3], clause 5.17). Value n1 corresponds to 1 beam failure instance, value n 2 corresponds to 2 beam failure instances and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
failureDetectionResourcesToAddModList \\
A list of reference signals for detecting beam failure and/or cell level radio link failure (RLF). The limits of the reference signals that the network can configure are specified in TS 38.213 [13], table 5-1. The network configures at most two detectionResources per BWP for the purpose beamFailure or both. If no RSs are provided for the purpose of beam failure detection, the UE performs beam monitoring based on the activated TC/-State for PDCCH as described in TS 38.213 [13], clause 6. If no RSs are provided in this list for the purpose of RLF detection, the UE performs Cell-RLM based on the activated TC/-State of PDCCH as described in TS 38.213 [13], clause 5. The network ensures that the UE has a suitable set of reference signals for performing cell-RLM.
\end{tabular} \\
\hline \begin{tabular}{l}
failureDetectionSet1, failureDetectionSet2 \\
Configures parameters for beamfailure detection towards beam failure detection resources configured in the set. If additionalPCIList is configured for the serving cell, each RS in one set can be associted only to one PCI.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline RadioLinkMonitoringRS field descriptions \\
\hline \begin{tabular}{l}
detectionResource \\
A reference signal that the UE shall use for radio link monitoring or beam failure detection (depending on the indicated purpose). Only periodic 1-port CSI-RS can be configured on SCell for beam failure detection purpose.
\end{tabular} \\
\hline \begin{tabular}{l}
purpose \\
Determines whether the UE shall monitor the associated reference signal for the purpose of cell- and/or beam failure detection. For SCell, network only configures the value to beamFailure.
\end{tabular} \\
\hline
\end{tabular}
- RadioLinkMonitoringRS-Id

The IE RadioLinkMonitoringRS-Id is used to identify one RadioLinkMonitoringRS.
RadioLinkMonitoringRS-Id information element
-- ASNISTART
-- TAG-RADIOLINKMONITORINGRS-ID-START

RadioLinkMonitoringRS-Id := INTEGER (0. maxNrofFailureDetectionResources-1)
-- TAG-RADIOLINKMONITORINGRS-ID-STOP
-- ASNISTOP
- RAN-AreaCode

The IE RAN-AreaCode is used to identify a RAN area within the scope of a tracking area.

ETSI


--- Page 745  ---


3GPP TS 38.331 version 17.0.0 Release 17
744
ETSI TS 138331 V17.0.0 (2022-05)

RAN-AreaCode information element
```
-- ASNISTART
-- TAG-RAN-AREACODE-START
RAN-AreaCode ::= INTEGER (0..255)
-- TAG-RAN-AREACODE-STOP
-- ASNISTOP
```

- RateMatchPattern

The IE RateMatchPattern is used to configure one rate matching pattern for PDSCH, see TS 38.214 [19], clause 5.1.4.1.

RateMatchPattern information element
```
-- ASNISTART
-- TAG-RATEMATCHPATTERN-START
```

```
RateMatchPattern ::=
    rateMatchPatternId
    patternType
        bitmaps
            resourceBlocks
            symbolsInResourceBlock
                oneSlot
                twoSlots
            },
            periodicityAndPattern
                n2
                - BIT STRING (SIZE (2)),
                n5 BIT STRING (SIZE (5)),
                n8
                BIT STRING (SIZE (8)),
                BIT STRING (SIZE (10)),
                n40
            }
            ...
        },
        controlResourceSet ControlResourceSetId
    },
```

```
    dummy ENUMERATED { dynamic, semiStatic },
    []['''
    controlResourceSet-rl6 ControlResourceSetId-rl6
    ] ]
}
```


ETSI


--- Page 746  ---


3GPP TS 38.331 version 17.0.0 Release 17
745
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-RATEMATCHPATTERN-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline RateMatchPattern field descriptions \\
\hline \begin{tabular}{l}
bitmaps \\
Indicates rate matching pattern by a pair of bitmaps resourceBlocks and symbolsinResourceBlock to define the rate match pattern within one or two slots, and a third bitmap periodicityAndPattern to define the repetition pattern with which the pattern defined by the above bitmap pair occurs.
\end{tabular} \\
\hline \begin{tabular}{l}
controlResourceSet \\
This ControlResourceSet is used as a PDSCH rate matching pattern, i.e., PDSCH reception rate matches around it. In frequency domain, the resource is determined by the frequency domain resource of the CORESET with the corresponding CORESET ID. Time domain resource is determined by the parameters of the associated search space of the CORESET. \\
If the field controlResourceSet/d-r16 is present, UE shall ignore the controlResourceSet/d (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityAndPattern \\
A time domain repetition pattern at which the pattern defined by symbolsinResourceBlock and resourceBlocks recurs. This slot pattern repeats itself continuously. Absence of this field indicates the value \( n 1 \) (see TS 38.214 [19], clause 5.1.4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceBlocks \\
A resource block level bitmap in the frequency domain. A bit in the bitmap set to 1 indicates that the UE shall apply rate matching in the corresponding resource block in accordance with the symbolsinResourceBlock bitmap. If used as cell-level rate matching pattern, the bitmap identifies "common resource blocks (CRB)". If used as BWP-level rate matching pattern, the bitmap identifies "physical resource blocks" inside the BWP. The first/ leftmost bit corresponds to resource block 0 , and so on (see TS 38.214[19], clause 5.1.4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierSpacing \\
The SubcarrierSpacing for this resource pattern. If the field is absent, the UE applies the SCS of the associated BWP. The value kHz 15 corresponds to \( \mu=0 \), the value kHz 30 corresponds to \( \mu=1 \), and so on. \\
Only the following values are applicable depending on the used frequency (see TS 38.214 [19], clause 5.1.4.1): \\
FR1: 15,30 or 60 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline \begin{tabular}{l}
symbolsinResourceBlock \\
A symbol level bitmap in time domain. It indicates with a bit set to true that the UE shall rate match around the corresponding symbol. This pattern recurs (in time domain) with the configured periodicityAndPattern (see TS 38.214 [19], clause 5.1.4.1). \\
For oneSlot, if ECP is configured, the first 12 bits represent the symbols within the slot and the last two bits within the bitstring are ignored by the UE; Otherwise, the 14 bits represent the symbols within the slot. \\
For twoSlots, if ECP is configured, the first 12 bits represent the symbols within the first slot and the next 12 bits represent the symbols in the second slot and the last four bits within the bit string are ignored by the UE; Otherwise, the first 14 bits represent the symbols within the first slot and the next 14 bits represent the symbols in the second slot. For the bits representing symbols in a slot, the most significant bit of the bit string represents the first symbol in the slot and the second most significant bit represents the second symbol in the slot and so on.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline CellLevel & The field is mandatory present if the RateMatchPattern is defined on cell level. The field is absent when the RateMatchPattern is defined on BWP level. If the RateMatchPattern is defined on BWP level, the UE applies the SCS of the BWP. \\
\hline
\end{tabular}

ETSI


--- Page 747  ---


3GPP TS 38.331 version 17.0.0 Release 17
746
ETSI TS 138331 V17.0.0 (2022-05)
- RateMatchPatternld

The IE RateMatchPatternId identifies one RateMatchMattern (see TS 38.214 [19], clause 5.1.4.2).
RateMatchPatternid information element
-- ASNISTART
-- TAG-RATEMATCHPATTERNID-START

RateMatchPatternId : := INTEGER (0. maxNrofRateMatchPatterns-1)
-- TAG-RATEMATCHPATTERNID-STOP
-- ASNISTOP

RateMatchPatternLTE-CRS
The IE RateMatchPatternLTE-CRS is used to configure a pattern to rate match around LTE CRS. See TS 38.214 [19], clause 5.1.4.2.
RateMatchPatternLTE-CRS information element
```
-- ASNISTART
-- TAG-RATEMATCHPATTERNLTE-CRS-START
```

```
RateMatchPatternLTE-CRS ::=
    carrierFreqDL
    carrierBandwidthDL
    mosfn-SubframeConfigList
    nrofCRS-Ports
    v-Shift
}
LTE-CRS-PatternList-r16::= SEQUENCE (SIZE (1..maxLTE-CRS-Patterns-r16)) OF RateMatchPatternLTE-CRS
-- TAG-RATEMATCHPATTERNLTE-CRS-STOP
-- ASNISTOP
```


ETSI


--- Page 748  ---


3GPP TS 38.331 version 17.0.0 Release 17
747
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RateMatchPatternLTE-CRS field descriptions \\
\hline \begin{tabular}{l}
carrierBandwidthDL \\
BW of the LTE carrier in number of PRBs (see TS 38.214 [19], clause 5.1.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
carrierFreqDL \\
Center of the LTE carrier (see TS 38.214 [19], clause 5.1.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
mbsfn-SubframeConfigList \\
LTE MBSFN subframe configuration (see TS 38.214 [19], clause 5.1.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofCRS-Ports \\
Number of LTE CRS antenna port to rate-match around (see TS 38.214 [19], clause 5.1.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
v-Shift \\
Shifting value v-shift in LTE to rate match around LTE CRS (see TS 38.214 [19], clause 5.1.4.2).
\end{tabular} \\
\hline
\end{tabular}
- ReferenceTimeInfo

The IE ReferenceTimeInfo contains timing information for 5G internal system clock used for, e.g., time stamping, see TS 23.501 [32], clause 5.27.1.2.
Reference TimeInfo information element
```
-- ASNISTART
-- TAG-REFERENCETIMEINFO-START
ReferenceTimeInfo-rl6 ::= SEQUENCE {
    time-rl6 ReferenceTime-rl6,
    uncertainty-rl6
    timeInfoType-rl6
    referenceSFN-rl6
}
ReferenceTime-r16 ::=
    refDays-rl6
    refSeconds-r16
    refMilliSeconds-rl6
    refTenNanoSeconds-r16
}
-- TAG-REFERENCETIMEINFO-STOP
-- ASN1STOP
```


ETSI


--- Page 749  ---


3GPP TS 38.331 version 17.0.0 Release 17
748
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline Reference Timelnfo field descriptions \\
\hline \begin{tabular}{l}
referenceSFN \\
This field indicates the reference SFN corresponding to the reference time information. If referenceTime/nfo field is received in DLinformationTransfer message, this field indicates the SFN of PCell.
\end{tabular} \\
\hline \begin{tabular}{l}
time \\
This field indicates time reference with 10 ns granularity. If included in DLinformationTransfer and if UE-side TA PDC is de-activated, the indicated time may not be referenced at the network, i.e., gNB may pre-compensate. If included in DLinformationTransfer and if UE is requested to transmit UE Rx-Tx time difference measurement, the indicated time may not be referenced at the network, i.e., gNB may pre-compensate. Otherwise, the indicated time is referenced at the network, i.e., without compensating for RF propagation delay. \\
The indicated time in 10 ns unit from the origin is refDays*86400*1000*100000+refSeconds*1000*100000+refMilliSeconds*100000+refTenNanoSeconds. The refDays field specifies the sequential number of days (with day count starting at 0 ) from the origin of the time field. \\
If the referenceTimeInfo field is received in DLInformationTransfer message, the time field indicates the time at the ending boundary of the system frame indicated by referenceSFN. The UE considers this frame (indicated by referenceSFN) to be the frame which is nearest to the frame where the message is received (which can be either in the past or in the future). \\
If the referenceTimelnfo field is received in SIB9, the time field indicates the time at the SFN boundary at or immediately after the ending boundary of the SI-window in which SIB9 is transmitted. \\
If referenceTime/nfo field is received in SIB9, this field is excluded when determining changes in system information, i.e. changes of time should neither result in system information change notifications nor in a modification of valueTag in S/B1.
\end{tabular} \\
\hline \begin{tabular}{l}
timeinfoType \\
If time/nfoType is not included, the time indicates the GPS time and the origin of the time field is 00:00:00 on Gregorian calendar date 6 January, 1980 (start of GPS time). If timelnfoType is set to localClock, the origin of the time is unspecified.
\end{tabular} \\
\hline \begin{tabular}{l}
uncertainty \\
This field indicates the uncertainty of the reference time information provided by the time field. The uncertainty is 25ns multiplied by this field. If this field is absent, the uncertainty is unspecified.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline RefTime & \begin{tabular}{l} 
The field is mandatory present if referenceTimelnfo is included in DLinformationTransfer message; otherwise the field is \\
absent.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RejectWaitTime

The IE RejectWaitTime is used to provide the value in seconds for timer T302.
RejectWaitTime information element
-- ASNISTART
-- TAG-REJECTWAITTIME-START

RejectWaitTime : := INTEGER (1..16)
-- TAG-REJECTWAITTIME-STOP
-- ASNISTOP

ETSI


--- Page 750  ---


3GPP TS 38.331 version 17.0.0 Release 17
749
ETSI TS 138331 V17.0.0 (2022-05)
- RepetitionSchemeConfig

The IE RepetitionSchemeConfig is used to configure the UE with repetition schemes as specified in TS 38.214 [19] clause 5.1.
RepetitionSchemeConfig information element
```
-- ASNISTART
-- TAG-REPETITIONSCHEMECONFIG-START
RepetitionSchemeConfig-rl6 ::= CHOICE {
    fdm-TDM-rl6 SetupRelease [ FDM-TDM-rl6 },
    slotBased-r16 SetupRelease { SlotBased-rl6}
}
RepetitionSchemeConfig-vl630 ::= SEQUENCE [
    slotBased-vl630 SetupRelease { SlotBased-vl630}
}
FDM-TDM-rl6 ::= SEQUENCE \
    repetitionScheme-r16 ENUMERATED {fdmSchemeA, fdmSchemeB,tdmSchemeA},
    startingSymbolOffsetK-rl6 INTEGER (0..7) OPTIONAL -- Need. R
}
SlotBased-rl6 ::= SEQUENCE \
    tciMapping-rl6
    sequenceOffsetForRV-r16
}
SlotBased-vl630 ::= SEQUENCE {
    tciMapping-rl6 ENUMERATED {cyclicMapping, sequentialMapping},
    sequenceOffsetForRV-rl6 INTEGER (0)
}
-- TAG-REPETITIONSCHEMECONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 751  ---


3GPP TS 38.331 version 17.0.0 Release 17
750
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RepetitionSchemeConfig field descriptions \\
\hline \begin{tabular}{l}
fdm-TDM \\
Configures UE with a repetition scheme among fdmSchemeA, fdmSchemeB and tdmSchemeA as specified in clause 5.1 of TS 38.214 [19]. The network does not set this field to release. Upon reception of this field in RepetitionSchemeConfig-r16, the UE shall release slotBased if previously configured in the same instance of RepetitionSchemeConfig-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
sequenceOffsetForRV \\
For slot-based repetition scheme, selected RV sequence is applied to transmission occasions associated to the first TCI state. The RV sequence associated to the second TCI state is determined by a RV offset from that selected RV sequence.
\end{tabular} \\
\hline \begin{tabular}{l}
slotBased \\
Configures UE with slot-based repetition scheme. Network always configures this field when the parameter repetitionNumber is present in IE PDSCHTimeDomainResourceAllocationList. The network does not set this field to release. Upon reception of this field in RepetitionSchemeConfig-r16, the UE shall release fdm-TDM if previously configured in the same instance of RepetitionSchemeConfig-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
startingSymbolOffsetK \\
The starting symbol of the second transmission occasion has K symbol offset relative to the last symbol of the first transmission occasion. When UE is configured with tdmSchemeA, the parameter starting SymbolOffsetK is present, otherwise absent.
\end{tabular} \\
\hline \begin{tabular}{l}
tciMapping \\
Enables TCI state mapping method to PDSCH transmission occasions.
\end{tabular} \\
\hline
\end{tabular}
- ReportConfigid

The IE ReportConfigld is used to identify a measurement reporting configuration.
ReportConfigid information element
-- ASNISTART
-- TAG-REPORTCONFIGID-START

ReportConfigId : := INTEGER (1. maxReportConfigId)
-- TAG-REPORTCONFIGID-STOP
-- ASNISTOP
- ReportConfigInterRAT

The IE ReportConfigInterRAT specifies criteria for triggering of an inter-RAT measurement reporting event, or an L2 U2N relay measurement reporting event. The inter-RAT measurement reporting events for E-UTRA and UTRA-FDD and L2 U2N Relay UE are labelled B \( N \) with \( N \) equal to 1, 2 and so on.

Event B1: Neighbour becomes better than absolute threshold;
Event B2: PCell becomes worse than absolute threshold1 AND Neighbour becomes better than another absolute threshold2;
Event Y1: PCell becomes worse than absolute threshold1 AND candidate L2 U2N Relay UE becomes better than another absolute threshold2;
Event Y2: Candidate L2 U2N Relay UE becomes better than absolute threshold;

ETSI


--- Page 752  ---


3GPP TS 38.331 version 17.0.0 Release 17
751
ETSI TS 138331 V17.0.0 (2022-05)

ReportConfiginterRATinformation element
```
-- ASNISTART
-- TAG-REPORTCONFIGINTERRAT-START
ReportConfigInterRAT ::=
    reportType
        periodical
        eventTriggered.
        reportCGI
        ...,
        reportSETD ReportSETD-EUTRA
    }
}
ReportCGI-EUTRA ::=
    cellFor SEQUENCE [
    ...;
    [ [
    useAutonomousGaps-r16 ENUMERATED {setup} OPTIONAL -- Need R
    ] ]
}
ReportSFTD-EUTRA ::= SEQUENCE \
    reportSFTD-Meas
    reportRSRP
    ...
}
EventTriggerConfigInterRAT ::= SEQUENCE \
    eventId
        eventBl
            bl-ThresholdEUTRA
            reportOnLeave
            hysteresis
            timeToTrigger
            ...
        },
        eventB2
            b2-Thresholdl
            b2-Threshold2EUTRA
            reportOnLeave
            hysteresis
            timeToTrigger
            ...
        },
        ...;
        [ [
        eventBl-UTRA-FDD-r16
            bl-ThresholdUTRA-FDD-rl6 MeasTriggerQuantityUTRA-FDD-rl6,
            reportOnLeave-rl6
            hysteresis-rl6
            timeToTrigger-rl6
            ...
```


ETSI


--- Page 753  ---


3GPP TS 38.331 version 17.0.0 Release 17
752
ETSI TS 138331 V17.0.0 (2022-05)
```
            eventB2-UTRA-FDD-r16 SEQUENCE {
            eventYl-Relay-rl7 SEQUENCE {
    reportQuantityUTRA-FDD-rl6 MeasReportQuantityUTRA-FDD-rl6 OPTIONAL -- Need R
```

```
            }
                b2-Thresholdl-rl6
                b2-Threshold2UTRA-FDD-rl6
                reportOnLeave-rl6
                hysteresis-rl6
                timeToTrigger-rl6
                ...
            }
            ]],
            [ [
                yl-Thresholdl-rl7
                yl-Threshold2-Relay-rl7
                reportOnLeave-rl7
                hysteresis-rl7
                timeToTrigger-rl7
                ...
            },
            eventY2-Relay-rl7
                y2-Threshold-Relay-rl7
                reportOnLeave-rl7
                hysteresis-rl7
                timeToTrigger-rl7
                ...
            }
        ] ]
    },
    rsType NR-RS-Type,
    reportInterval
    reportAmount
    reportQuantity
    maxReportCells
    ...;
    [ [
    ]],
    [ [
    includeCommonLocationInfo-rl6
    includeBT-Meas-rl6
    includeWLAN-Meas-r16
    includeSensor-Meas-r16
    ]],
    [ [
    ]]}
PeriodicalReportConfigInterRAT ::=
    reportInterval
    reportAmount
    reportQuantity
    maxReportCells
    ...,
        ,
                b2-Thresholdl-rl6
                reportOnt{0} 16}
                hysteresis-rl6
                ...
            ,
            [ [
                        reportOnLeave-rl7
                hysteresingtrigger-rl7
            ] ]
        l,
        maxReportCells
        \begin{array} { l } { \text { reportQuantityRelay-rl7} } \\ { \text { ]]\}} } \end{array}
        v
```

```
                            MeasTriggerQuantity,
            MeasTriggerQuantity,
            MeasTriggerQuantityUTRA-FDD-rl6,
            BOOLEAN,
            Hysteresis,
        TimeToTrigger,
            SL-MeasTriggerQuantity-rl6,
    BOOLEAN,
    Hysteresis,
    TimeToTrigger,
SEQUENCE \
        SL-MeasTriggerQuantity-rl6,
        BOOLEAN,
        Hysteresis,
        TimeToTrigger,
            }
        SEQU
                TimeToTrigger,
                BOOLEAN,
                    Hysteresis, 
                            }
```

```
\mu
```

```
                                                        NR-RS-Type,
ReportInterval,
ENUMERATED {rl, r2, r4, r8, rl6, r32, r64, infinity},
MeasReportQuantity,
INTEGER (1..maxCellReport),
                                    )
MeasReportQuantityUTRA-FDD-rl6 OPTIONAL -- Need R
ENUMERATED {true} OPTIONAL, -- Need R
SetupRelease {BT-NameList-rl6} OPTIONAL, -- Need. M
SetupRelease {WLAN-NameList-rl6} OPTIONAL, -- Need. M
SetupRelease {Sensor-NameList-rl6} OPTIONAL -- Need M
lllll
```

```
SEQUENCE {
    ReportInterval,
    ENUMERATED {rl, r2, r4, r8, rl6, r32, r64, infinity},
    MeasReportQuantity,
    INTEGER (l..maxCellReport),
```


ETSI


--- Page 754  ---


3GPP TS 38.331 version 17.0.0 Release 17
753
ETSI TS 138331 V17.0.0 (2022-05)
```
    [ [
    reportQuantityUTRA-FDD-r16 MeasReportQuantityUTRA-FDD-r16 OPTIONAL
    ]],
    [ [
    includeCommonLocationInfo-rl6
    includeBT-Meas-rl6
    includeWLAN-Meas-rl6
    includeSensor-Meas-r16
    ]],
    [ [
```

```
    ] ]
}
MeasTriggerQuantityUTRA-FDD-rl6 ::=
    utra-FDD-RSCP-rl6
    utra-FDD-EcNO-r16
}
MeasReportQuantityUTRA-FDD-rl6 ::= SEQUENCE {
    cpich-RSCP
    cpich-EcNO
}
-- TAG-REPORTCONFIGINTERRAT-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline ReportType \\
\hline Type of the configured measurement report. In (NG)EN-DC, and NR-DC, network does not configure report of type ReportCG/-EUTRA for SCG. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline ReportCGI-EUTRA field descriptions \\
\hline \begin{tabular}{l}
useAutonomousGaps \\
Indicates whether or not the UE is allowed to use autonomous gaps in acquiring system information from the E-UTRAN neighbour cell. When the field is included, the UE applies the corresponding value for T321.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 755  ---


3GPP TS 38.331 version 17.0.0 Release 17
754
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline EventTriggerConfiginterRAT field descriptions \\
\hline \begin{tabular}{l}
b2-Threshold1 \\
NR threshold to be used in inter RAT measurement report triggering condition for event B2.
\end{tabular} \\
\hline \begin{tabular}{l}
bN-ThresholdEUTRA \\
E-UTRA threshold value associated with the selected trigger quantity (RSRP, RSRQ, SINR) to be used in inter RAT measurement report triggering condition for event number bN. In the same eventB2, the network configures the same CHOICE name (rsrp, \( \mathbf{r s r q} \) or sinr) for the MeasTriggerQuantity of the b2-Threshold1 and for the \\
MeasTriggerQuantityEUTRA of the \( b 2 \)-Threshold2EUTRA.
\end{tabular} \\
\hline \begin{tabular}{l}
eventld \\
Choice of inter RAT event triggered reporting criteria.
\end{tabular} \\
\hline \begin{tabular}{l}
maxReportCells \\
Max number of non-serving cells to include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAmount \\
Number of measurement reports applicable for eventTriggered as well as for periodical report types
\end{tabular} \\
\hline \begin{tabular}{l}
reportOnLeave \\
Indicates whether or not the UE shall initiate the measurement reporting procedure when the leaving condition is met for a cell in cellsTriggeredList, as specified in 5.5.4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantity, reportQuantityUTRA-FDD \\
The cell measurement quantities to be included in the measurement report. If the field eventB1-UTRA-FDD or eventB2-UTRA-FDD is present, the UE shall ignore the value(s) provided in reportQuantity.
\end{tabular} \\
\hline \begin{tabular}{l}
timeToTrigger \\
Time during which specific criteria for the event needs to be met in order to trigger a measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
bN-ThresholdUTRA-FDD \\
UTRA-FDD threshold value associated with the selected trigger quantity (RSCP, EcNO) to be used in inter RAT measurement report triggering condition for event number bN. utra-FDD-RSCP corresponds to CPICH_RSCP in TS 25.133 [46] for FDD. utra-FDD-EcNO corresponds to CPICH_Ec/No in TS 25.133 [46] for FDD. \\
For utra-FDD-RSCP: The actual value is field value -115 dBm . \\
For utra-FDD-EcNO: The actual value is (field value -49 )/ 2 dB .
\end{tabular} \\
\hline \begin{tabular}{l}
\( y \)-Threshold1 \\
NR threshold to be used in measurement report triggering condition for event Y .
\end{tabular} \\
\hline \begin{tabular}{l}
\( y \)-Threshold 2-Relay \\
L2 U2N Relay threshold value associated with the selected trigger quantity (i.e. RSRP) to be used in measurement report triggering condition for event number Y.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PeriodicalReportConfiginterRAT field descriptions \\
\hline \begin{tabular}{l}
maxReportCells \\
Max number of non-serving cells to include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAmount \\
Number of measurement reports applicable for eventTriggered as well as for periodical report types
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantity, reportQuantityUTRA-FDD \\
The cell measurement quantities to be included in the measurement report. If the field reportQuantityUTRA-FDD is present, the UE shall ignore the value(s) provided in reportQuantity.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 756  ---


3GPP TS 38.331 version 17.0.0 Release 17
755
ETSI TS 138331 V17.0.0 (2022-05)
- \( \quad \) ReportConfigNR

The IE ReportConfigNR specifies criteria for triggering of an NR measurement reporting event or of a CHO, CPA or CPC event. For events labelled AN with N equal to 1, 2 and so on, measurement reporting events and CHO, CPA or CPC events are based on cell measurement results, which can either be derived based on SS/PBCH block or CSIRS.

Event A1: Serving becomes better than absolute threshold;
Event A2: Serving becomes worse than absolute threshold;
Event A3: Neighbour becomes amount of offset better than PCell/PSCell;
Event A4: Neighbour becomes better than absolute threshold;
Event A5: PCell/PSCell becomes worse than absolute threshold1 AND Neighbour/SCell becomes better than another absolute threshold2;
Event A6: Neighbour becomes amount of offset better than SCell;
Event D1:Distance between UE and a reference location referenceLocation l becomes larger than configured threshold1 Thresh l and distance between UE and a reference location referenceLocation 2 becomes shorter than configured threshold Thresh 2;

CondEvent A3: Conditional reconfiguration candidate becomes amount of offset better than PCell/PSCell;
CondEvent A4: Conditional reconfiguration candidate becomes better than absolute threshold;
CondEvent A5: PCell/PSCell becomes worse than absolute threshold1 AND Conditional reconfiguration candidate becomes better than another absolute threshold2;
CondEvent D1: Distance between UE and a reference location referenceLocation l becomes larger than configured threshold Thresh l and distance between UE and a reference location referenceLocation 2 of conditional reconfiguration candidate becomes shorter than configured threshold Thresh 2 ;

CondEvent T1: Time measured at UE becomes more than configured threshold Thresh l but is less than Thresh2;
Event X1: Seving L2 U2N Relay UE becomes worse than absolute threshold1 AND NR Cell becomes better than another absolute threshold2;
Event X2: Serving L2 U2N Relay UE becomes worse than absolute threshold;
For event [1, measurement reporting event is based on CLI measurement results, which can either be derived based on SRS-RSRP or CLI-RSSI.
Event [1: Interference becomes higher than absolute threshold.
ReportConfigNR information element
-- ASNISTART
-- TAG-REPORTCONEIGNR-START

ReportConfigNR : :=
reportType

SEQUENCE 1
CHOICE |

ETSI


--- Page 757  ---


3GPP TS 38.331 version 17.0.0 Release 17
756
ETSI TS 138331 V17.0.0 (2022-05)
```
        periodical PeriodicalReportConfig,
        eventTriggered EventTriggerConfig,
        ...;
        reportCGI ReportCGI,
        reportSFTD ReportSFTD-NR,
        condTriggerConfig-rl6 CondTriggerConfig-rl6,
        cli-Periodical-rl6 CLI-PeriodicalReportConfig-rl6,
        cli-EventTriggered-rl6 CLI-EventTriggerConfig-rl6,
        rxTxPeriodical-rl7 RxTxPeriodical-rl7
    }
}
ReportCGI ::= SEQUENCE \
    cellForWhichToReportCGI PhysCellId,
        ...;
    [ [
    useAutonomousGaps-rl6 ENUMERATED {setup} OPTIONAL -- Need. R
    ] ]
}
ReportSFTD-NR ::= SEQUENCE \
    reportSFTD-Meas BOOLEAN,
    reportRSRP BOOLEAN,
    ...;
    [ [
    reportSETD-NeighMeas ENUMERATED {true}
    drx-SFTD-NeighMeas
    cellsFor WhichToReportSFTD
    ] ]
}
CondTriggerConfig-rl6 ::= SEQUENCE \
    condEventId.
        condEventA3
            a3-Offset
            hysteresis
            timeToTrigger TimeToTrigge
        ir
        condEventA5 SEQUENCE {
            a5-Thresholdl MeasTriggerQuantity,
            a5-Threshold2 MeasTriggerQuantity,
            hysteresis
            timeToTri Hysteresis,
        },
        ...;
        condEventA4-rl7 SEQUENCE [
            a4-Threshold-rl7 MeasTriggerQuantity,
            hysteresis-rl7 Hysteresis,
            timeToTrigger-rl7 useAllowedCellList-rl7 仼 BOOLEAN
            useAllowedCellList-rl7 BOOLEAN
        },
        condEventDl-rl7 SEQUENCE {
            distanceThresFromReferencel-rl7 INTEGER(0.. 65525),
```


ETSI


--- Page 758  ---


3GPP TS 38.331 version 17.0.0 Release 17
757
ETSI TS 138331 V17.0.0 (2022-05)
```
            distanceThresFromReference2-rl7 INTEGER(0..65525) OPTIONAL, --Need. R
            referencelocationl-rl7 ReferenceLocation-rl7,
            referenceLocation2-rl7 ReferenceLocation-rl7
            hysteresis-rl7 HysteresisLocation-rl7,
            timeToTrigger-rl7 TimeToTrigger
        },
        condEventTl-rl7 SEQUENCE {
            tl-Threshold-rl7
            duration-rl7
        }
    l,
    rsType-rl6 NR-RS-Type,
    ...
}
EventTriggerConfig::= SEQUENCE \
    eventId
        eventAl
            SEQUENCE \
            report
            hyreave
            timeToTrigger
        },
        eventA2 SEQUENCE \
            a2-Threshold MeasTriggerQumerr
            reportOnleave BOOLEAN,
            hysteresis
            timeToTrigger TimeToTrigger
        },
        eventA3 SEQUENCE \
            a3-Offset MeasTriggerQuantityOffset,
            reportOnLeave BOOLEAN,
            hysteresis
            timeToTrigger
            useAllowedCellList
        },
        eventA4 SEQUENCE \
            a4-Threshold MeasTriggerQuantity,
            reportOnLeave
            hysteresis
            timeToTrigger
            useAllowedCellList
        },
        eventA5 SEQUENCE \
            a5-Thresholdl MeasTriggerQuantity,
            a5-Threshold2 MeasTriggerQuantity,
            reportOnLeave
            hysteresis
            timeToTrigger
            useAllowedCellList
        },
        eventA6 SEQUENCE \
            a6-Offset MeasTriggerQuantityOffset,
            reportOnLeave
```


ETSI


--- Page 759  ---


3GPP TS 38.331 version 17.0.0 Release 17
758
ETSI TS 138331 V17.0.0 (2022-05)
```
            hysteresis
            timeToTrigger
            useAllowedCellList
        },
        ...,
        [ [
        eventXl-rl7
            xl-Thresholdl-Relay-rl7
            xl-Threshold2-rl7
            reportOnLeave-rl7
            hysteresis-rl7
            timeToTrigger-rl7
        },
        eventX2-rl7
            x2-Threshold-Relay-rl7
            reportOnLeave-rl7
            hysteresis-rl7
            timeToTrigger-rl7
        },
        eventDl-rl7
            distanceThresFromReferencel-rl7
            distanceThresFromReference2-rl7
            referencelocationl-rl7
            referencelocation2-r17
            hysteresis-rl7
            timeToTrigger-rl7
        }
        ] ]
    },
    rsType
    reportInterval
    reportAmount
    reportQuantityCell
    maxReportCells
    reportQuantityRS-Indexes
    maxNrofRS-IndexesToReport
    includeBeamMeasurements
    reportAddNeighMeas
    ...,
    [ [
    measRSSI-ReportConfig-r16
    useT312-r16
    includeCommonLocationInfo-rl6
    includeBT-Meas-rl6
    includeWLAN-Meas-rl6
    includeSensor-Meas-rl6
    ]]
}
PeriodicalReportConfig ::=
    rsType
    reportInterval
    reportAmount
    reportQuantityCell
SEQUENCE {
    NR-RS-Type,
    ReportInterval,
    ENUMERATED {rl, r2, r4, r8, rl6, r32, r64, infinity},
    MeasReportQuantity,
```


ETSI


--- Page 760  ---


3GPP TS 38.331 version 17.0.0 Release 17
759
ETSI TS 138331 V17.0.0 (2022-05)
```
    maxReportCells
    reportQuantityRS-Indexes
    maxNrofRS-IndexesToReport
    includeBeamMeasurements
    useAllowedCellList
    ...r
    [ [
    measRSSI-ReportConfig-rl6
    includeCommonLocationInfo-rl6
    includeBT-Meas-rl6
    includeWLAN-Meas-rl6
    includeSensor-Meas-rl6
    ul-DelayValueConfig-rl6
    reportAddNeighMeas-rl6
    ]],
    [ [
    ul-ExcessDelayConfig-rl7
    ]]
}
NR-RS-Type ::= ENUMERATED {ssb, csi-rs}
MeasTriggerQuantity ::=
    rsrp
    rsrq
    sinr
}
MeasTriggerQuantityOffset ::=
    rsrp
    rsrq
    sinr
}
MeasReportQuantity ::=
    rsrp
    rsrq
    sinr
}
MeasRSSI-ReportConfig-r16 ::=
    channelOccupancyThreshold-rl6
}
CLI-EventTriggerConfig-rl6 ::=
    eventId-rl6
        eventIl-rl6
            il-Threshold-rl6
            reportOnLeave-rl6
            hysteresis-rl6
            timeToTrigger-rl6
        },
    ...
```

```
SEQUENCE \
    BOOLEAN,
    BOOLEAN,
    BOOLEAN
```

```
SEQUENCE \
    RSSI-Range-r16 OPTIONAL -- Need. R
SEQUENCE \
    CHOICE {
        SEQUENCE \
            MeasTriggerQuantityCLI-rl6,
            BOOLEAN,
            Hysteresis,
            TimeToTrigger
```

□

ETSI


--- Page 761  ---


3GPP TS 38.331 version 17.0.0 Release 17
760
ETSI TS 138331 V17.0.0 (2022-05)
```
    },
    reportInterval-rl6 ReportInterval,
    reportAmount-rl6
    maxReportCLI-r16
    ...
}
CLI-PeriodicalReportConfig-r16 ::=
    reportInterval-rl6
    reportAmount-rl6
    reportQuantityCLI-r16
    maxReportCLI-rl6
    ...
}
RxTxPeriodical-rl7 ::=
    rxTxReportInterval-rl7
    reportAmount-rl7
    ...
}
```

```
MeasTriggerQuantityCLI-rl6 ::=
    srs-RSRP-rl6
    cli-RSSI-rl6
}
MeasReportQuantityCLI-rl6 ::= ENUMERATED {srs-rsrp, cli-rssi}
-- TAG-REPORTCONFIGNR-STOP
-- ASNISTOP
```


ETSI


--- Page 762  ---


3GPP TS 38.331 version 17.0.0 Release 17
761
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CondTriggerConfig field descriptions \\
\hline \begin{tabular}{l}
a3-Offset \\
Offset value(s) to be used in NR conditional reconfiguration triggering condition for cond event a3. The actual value is field value * 0.5 dB .
\end{tabular} \\
\hline \begin{tabular}{l}
a4-Threshold \\
Threshold value associated to the selected trigger quantity (e.g. RSRP, RSRQ, SINR) per RS Type (e.g. SS/PBCH block, CSI-RS) to be used in NR conditional reconfiguration triggering condition for cond event a4.
\end{tabular} \\
\hline \begin{tabular}{l}
a5-Threshold1/a5-Threshold2 \\
Threshold value associated to the selected trigger quantity (e.g. RSRP, RSRQ, SINR) per RS Type (e.g. SS/PBCH block, CSI-RS) to be used in NR conditional reconfiguration triggering condition for cond event a5. In the same condeventA5, the network configures the same quantity for the MeasTriggerQuantity of the a5-Threshold1 and for the MeasTriggerQuantity of the a5-Threshold2.
\end{tabular} \\
\hline \begin{tabular}{l}
condEventid \\
Choice of NR conditional reconfiguration event triggered criteria.
\end{tabular} \\
\hline \begin{tabular}{l}
duration \\
This field is used for defining the leaving condition T1-2 for conditional HO event condEventT1. Each step represents 100 ms .
\end{tabular} \\
\hline \begin{tabular}{l}
t1-Threshold \\
The field counts the number of UTC seconds in 10 ms units since 00:00:00 on Gregorian calendar date 1 January, 1900 (midnight between Sunday, December 31, 1899 and Monday, January 1, 1900).
\end{tabular} \\
\hline \begin{tabular}{l}
timeToTrigger \\
Time during which specific criteria for the event needs to be met in order to execute the conditional reconfiguration evaluation.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline ReportConfigNR field descriptions \\
\hline \begin{tabular}{l}
reportType \\
Type of the configured measurement report. In MR-DC, network does not configure report of type reportCG/using SRB3. The condTriggerConfig is used for CHO, CPA or CPC configuration.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline \multicolumn{1}{|c|}{ ReportCGI field descriptions } \\
\hline \begin{tabular}{l} 
useAutonomousGaps \\
Indicates whether or not the UE is allowed to use autonomous gaps in acquiring system information from the NR neighbour cell. When the field is included, the UE applies the \\
corresponding value for T321.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 763  ---


3GPP TS 38.331 version 17.0.0 Release 17
762
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline EventTriggerConfig field descriptions \\
\hline \begin{tabular}{l}
a3-Offset/a6-Offset \\
Offset value(s) to be used in NR measurement report triggering condition for event a3/a6. The actual value is field value * 0.5 dB .
\end{tabular} \\
\hline \begin{tabular}{l}
aN-ThresholdM \\
Threshold value associated to the selected trigger quantity (e.g. RSRP, RSRQ, SINR) per RS Type (e.g. SS/PBCH block, CSI-RS) to be used in NR measurement report triggering condition for event number aN. If multiple thresholds are defined for event number aN, the thresholds are differentiated by M . The network configures aN-Threshold1 only for events A1, A2, A4, A5 and a5-Threshold2 only for event A5. In the same eventA5, the network configures the same quantity for the MeasTriggerQuantity of the a5Threshold 1 and for the MeasTriggerQuantity of the a5-Threshold2.
\end{tabular} \\
\hline \begin{tabular}{l}
channelOccupancyThreshold \\
RSSI threshold which is used for channel occupancy evaluation.
\end{tabular} \\
\hline \begin{tabular}{l}
distanceThresFromReference1, distanceThresFromReference2 \\
Distance from a reference location configured with referenceLocation1 or referenceLocation2. Each step represents 50m.
\end{tabular} \\
\hline \begin{tabular}{l}
eventld \\
Choice of NR event triggered reporting criteria. If network configured eventD1 network shall configure includeCommonLocationInfo for the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
maxNrofRS-IndexesToReport \\
Max number of RS indexes to include in the measurement report for A1-A6 events.
\end{tabular} \\
\hline \begin{tabular}{l}
maxReportCells \\
Max number of non-serving cells to include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
referenceLocation1, referenceLocation2 \\
Reference locations used for location based event. The referenceLocation1 is associated to serving cell and referenceLocation2 is associated to candidate target cell. The value of the field is same as Ellipsoid-Point defined in TS37.355. The first/leftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAddNeighMeas \\
Indicates that the UE shall include the best neighbour cells per serving frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAmount \\
Number of measurement reports applicable for eventTriggered as well as for periodical report types.
\end{tabular} \\
\hline \begin{tabular}{l}
reportOnLeave \\
Indicates whether or not the UE shall initiate the measurement reporting procedure when the leaving condition is met for a cell in cellsTriggeredList, as specified in 5.5.4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantityCell \\
The cell measurement quantities to be included in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantityRS-Indexes \\
Indicates which measurement information per RS index the UE shall include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
timeToTrigger \\
Time during which specific criteria for the event needs to be met in order to trigger a measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
useAllowedCellList \\
Indicates whether only the cells included in the allow-list of the associated measObject are applicable as specified in 5.5.4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
useT312 \\
If value TRUE is configured, the UE shall use the timer T312 with the value 1312 as specified in the corresponding measObjectNR. If value FALSE is configured, the timer T312 is considered as disabled. Network configures value TRUE only if reportType is set to eventTriggered.
\end{tabular} \\
\hline \begin{tabular}{l}
xN-ThresholdM \\
Threshold value associated to the selected trigger quantity (e.g. RSRP, RSRQ, SINR) per RS Type (e.g. SS/PBCH block, CSI-RS) to be used in NR measurement report triggering condition for event xN . If multiple thresholds are defined for event number xN , the thresholds are differentiated by \( \mathrm{M} . \times 1 \)-Threshold1 and \( \times 2 \)-Threshold indicates the threshold value for the serving L2 U2N Relay UE, \( \times 1 \)-Threshold2 indicates the threshold value for the NR Cells.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 764  ---


3GPP TS 38.331 version 17.0.0 Release 17
763
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CLI-EventTriggerConfig field descriptions \\
\hline \begin{tabular}{l}
11-Threshold \\
Threshold value associated to the selected trigger quantity (e.g. SRS-RSRP, CLI-RSSI) to be used in CLI measurement report triggering condition for event i1.
\end{tabular} \\
\hline \begin{tabular}{l}
eventld \\
Choice of CLI event triggered reporting criteria.
\end{tabular} \\
\hline \begin{tabular}{l}
maxReportCLI \\
Max number of CLI measurement resource to include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAmount \\
Number of measurement reports.
\end{tabular} \\
\hline \begin{tabular}{l}
reportOnLeave \\
Indicates whether or not the UE shall initiate the measurement reporting procedure when the leaving condition is met for a CLI measurement resource in srsTriggeredList or rssiTriggeredList, as specified in 5.5.4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
timeToTrigger \\
Time during which specific criteria for the event needs to be met in order to trigger a measurement report.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline CLI-PeriodicalReportConfig field descriptions \\
\hline \begin{tabular}{l}
maxReportCLI \\
Max number of CLI measurement resource to include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAmount \\
Number of measurement reports.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantityCLI \\
The CLI measurement quantities to be included in the measurement report.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 765  ---


3GPP TS 38.331 version 17.0.0 Release 17
764
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline PeriodicalReportConfig field descriptions \\
\hline \begin{tabular}{l}
maxNrofRS-IndexesToReport \\
Max number of RS indexes to include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
maxReportCells \\
Max number of non-serving cells to include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAddNeighMeas \\
Indicates that the UE shall include the best neighbour cells per serving frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAmount \\
Number of measurement reports applicable for eventTriggered as well as for periodical report types
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantityCell \\
The cell measurement quantities to be included in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantityRS-Indexes \\
Indicates which measurement information per RS index the UE shall include in the measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
u-DelayValueConfig \\
If the field is present, the UE shall perform the actual UL PDCP Packet Average Delay measurement per DRB as specified in TS 38.314 [53] and the UE shall ignore the fields reportQuantityCell and maxReportCells. The applicable values for the corresponding reportinterval are (one of the) (ms120, ms240, ms480, ms640, ms1024, ms2048, ms5120, ms10240, ms20480, ms40960, min1,min6, min12, min30\}. The report/nterval indicates the periodicity for performing and reporting of UL PDCP Packet Average Delay per DRB measurement as specified in TS 38.314 [53].
\end{tabular} \\
\hline \begin{tabular}{l}
ul-ExcessDelayConfig \\
If the field is present, the UE shall perform the actual UL PDCP Excess Packet Delay per DRB measurement as specified in TS 38.314 [53] and the UE shall ignore the fields reportQuantityCell and maxReportCells. The applicable values for the corresponding reportinterval are (one of the) (ms120, ms240, ms480, ms640, ms1024, ms2048, ms5120, ms10240, ms20480, ms40960, min1,min6, min12, min30\}. The report/nterval indicates the periodicity for performing and reporting of UL PDCP Excess Packet Delay per DRB measurement as specified in TS 38.314 [53].
\end{tabular} \\
\hline \begin{tabular}{l}
useAllowedCellList \\
Indicates whether only the cells included in the allow-list of the associated measObject are applicable as specified in 5.5.4.1.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline ReportSFTD-NR field descriptions \\
\hline \begin{tabular}{l}
cellForWhichToReportSFTD \\
Indicates the target NR neighbour cells for SFTD measurement between PCell and NR neighbour cells.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-SFTD-NeighMeas \\
Indicates that the UE shall use available idle periods (i.e. DRX off periods) for the SFTD measurement in NR standalone. The network only includes drx-SFTD-NeighMeas field when reprtSFTD-NeighMeas is set to true.
\end{tabular} \\
\hline \begin{tabular}{l}
reportSFTD-Meas \\
Indicates whether UE is required to perform SFTD measurement between PCell and NR PSCell in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
reportSFTD-NeighMeas \\
Indicates whether UE is required to perform SFTD measurement between PCell and NR neighbour cells in NR standalone. The network does not include this field if reportSFTD-Meas is set to true.
\end{tabular} \\
\hline \begin{tabular}{l}
reportRSRP \\
Indicates whether UE is required to include RSRP result of NR PSCell or NR neighbour cells in SFTD measurement result, derived based on SSB. If it is set to true, the network should ensure that ssb-ConfigMobility is included in the measurement object for NR PSCell or NR neighbour cells.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 766  ---


3GPP TS 38.331 version 17.0.0 Release 17
765
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|ll|}
\hline Meas TriggerQuantity & other field descriptions \\
\hline SINR is applicable only for CONNECTED mode events. & \\
\hline
\end{tabular}
- ReportConfigNR-SL

The IE ReportConfigNR-SL specifies criteria for triggering of a CBR measurement reporting event for NR sidelink communication. Measurement reporting events are based on CBR measurement results on the corresponding transmission resource pools. These events are labelled CN with N equal to 1 and 2 .

Event C1: CBR of NR sidelink communication becomes better than absolute threshold;
Event C2: CBR of NR sidelink communication becomes worse than absolute threshold;
ReportConfigNR-SL information element
```
-- ASNISTART
-- TAG-REPORTCONFIGNR-SL-START
ReportConfigNR-SL-r16 ::=
    reportType-rl6
        periodical-rl6
        eventTriggered-r16
    }
}
EventTriggerConfigNR-SL-r16::=
    eventId-rl6
        eventCl
            cl-Threshold-rl6
            hysteresis-rl6
            timeToTrigger-rl6
        },
        eventC2-r16
            c2-Threshold-rl6
            hysteresis-rl6
            timeToTrigger-rl6
        },
        ...
    },
    reportInterval-rl6
    reportAmount-rl6
    reportQuantity-rl6
    ...
}
PeriodicalReportConfigNR-SL-r16 ::= SEQUENCE {
    reportInterval-rl6 ReportInterval,
    reportAmount-rl6 ENUMERATED {rl, r2, r4, r8, rl6, r32, r64, infinity},
    reportQuantity-rl6 MeasReportQuantity-rl6,
    ...
```


ETSI


--- Page 767  ---


3GPP TS 38.331 version 17.0.0 Release 17
766
ETSI TS 138331 V17.0.0 (2022-05)
```
}
MeasReportQuantity-r16 ::=
SEQUENCE \
BOOLEAN,
    cbr-rl6
    ...
}
-- TAG-REPORTCONFIGNR-SL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline ReportConfigNR-SL field descriptions \\
\hline \begin{tabular}{l}
reportType \\
Type of the configured CBR measurement report for NR sidelink communication.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline EventTriggerConfigNR-SL field descriptions \\
\hline \begin{tabular}{l}
cN-Threshold \\
Threshold used for events C1 and C2 specified in clauses 5.5.4.11 and 5.5.4.12, respectively.
\end{tabular} \\
\hline \begin{tabular}{l}
eventld \\
Choice of NR event triggered reporting criteria.
\end{tabular} \\
\hline \begin{tabular}{l}
reportAmoun \\
Number of measurement reports applicable for eventTriggered as well as for periodical report types.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantity \\
The sidelink measurement quantities to be included in the measurement report. In this release, this is set as the CBR measurement result.
\end{tabular} \\
\hline \begin{tabular}{l}
timeToTrigger \\
Time during which specific criteria for the event needs to be met in order to trigger a measurement report.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PeriodicalReportConfigNR-SL field descriptions \\
\hline \begin{tabular}{l}
reportAmount \\
Number of measurement reports applicable for eventTriggered as well as for periodical report types.
\end{tabular} \\
\hline \begin{tabular}{l}
reportQuantity \\
The sidelink measurement quantities to be included in the measurement report. In this release, this is set as the CBR measurement result.
\end{tabular} \\
\hline
\end{tabular}
- ReportConfigToAddModList

The IE ReportConfigToAddModList concerns a list of reporting configurations to add or modify.
ReportConfigToAddModList information element
```
-- ASNISTART
-- TAG-REPORTCONEIGTOADDMODLIST-START
ReportConfigToAddModList ::= SEQUENCE (SIZE (1..maxReportConfigId)) OF ReportConfigToAddMod
ReportConfigToAddMod ::= SEQUENCE \
```


ETSI


--- Page 768  ---


3GPP TS 38.331 version 17.0.0 Release 17
767
ETSI TS 138331 V17.0.0 (2022-05)
```
    reportConfigId
    reportConfig
        reportConfigNR
        ...;
        reportConfigInterRAT
        reportConfigNR-SL-rl6
    }
}
-- TAG-REPORTCONFIGTOADDMODLIST-STOP
-- ASNISTOP
```

- ReportInterval
```
ReportConfigId,
CHOICE [
    ReportConfigNR,
    ReportConfigInterRAT,
    ReportConfigNR-SL-r16
```


The IE ReportInterval indicates the interval between periodical reports. The ReportInterval is applicable if the UE performs periodical reporting (i.e. when reportAmount exceeds 1), for triggerTypeevent as well as for triggerTypeperiodical. Value \( m s 120 \) corresponds to 120 ms , value \( m s 240 \) corresponds to 240 ms and so on, while value minl corresponds to 1 min , min 6 corresponds to 6 min and so on.

Reportinterval information element
```
-- ASNISTART
-- TAG-REPORTINTERVAL-START
```

```
    minl,min6, minl2, min30}
-- TAG-REPORTINTERVAL-STOP
-- ASNISTOP
```

- ReselectionThreshold

The IE ReselectionThreshold is used to indicate an Rx level threshold for cell reselection. Actual value of threshold \( = \) field value * \( 2[\mathrm{~dB}] \).
ReselectionThreshold information element
-- ASNISTART
-- TAG-RESELECTIONTHRESHOLD-START

ReselectionThreshold : : INTEGER (0..31)
-- TAG-RESELECTIONTHRESHOLD-STOP
-- ASNISTOP

ETSI


--- Page 769  ---


3GPP TS 38.331 version 17.0.0 Release 17
768
ETSI TS 138331 V17.0.0 (2022-05)
- ReselectionThresholdQ

The IE ReselectionThresholdQ is used to indicate a quality level threshold for cell reselection. Actual value of threshold \( = \) field value \( [\mathrm{dB}] \).
ReselectionThresholdQ information element
-- ASNISTART
-- TAG-RESELECTIONTHRESHOLDQ-START
ReselectionThresholdQ: := INTEGER (0.31)
-- TAG-RESELECTIONTHRESHOLDQ-STOP
-- ASNISTOP
- ResumeCause

The IE ResumeCause is used to indicate the resume cause in RRCResumeRequest and RRCResumeRequest I.
ResumeCause information element
-- ASNISTART
-- TAG-RESUMECAUSE-START

ResumeCause : :
ENUMERATED lemergency, highPriorityAccess, mt-Access, mo-Signalling, mo-Data, mo-VoiceCall, mo-VideoCall, mo-SMS, rna-Update, mps-PriorityAccess, mcs-PriorityAccess, sparel, spare2, spare3, spare4, spare5\}
-- TAG-RESUMECAUSE-STOP
-- ASNISTOP
- \( \quad \) RLC-BearerConfig

The IE RLC-BearerConfig is used to configure an RLC entity, a corresponding logical channel in MAC and the linking to a PDCP entity (served radio bearer).
RLC-BearerConfig information element
-- ASNISTART
-- TAG-RLC-BEARERCONFIG-START

RLC-BearerConfig : :
logicalChannelIdentity
servedRadioBearer
srb-Identity
drb-Identity
\}
reestablishRLC

SEQUENCE 1
LogicalChannelIdentity,
CHOICE [
SRB-Identity,
DRB-Identity
ENUMERATED \{true\}

OPTIONAL, -- Cond LCH-SetupOnly
OPTIONAL, -- Need N

ETSI


--- Page 770  ---


3GPP TS 38.331 version 17.0.0 Release 17
769
ETSI TS 138331 V17.0.0 (2022-05)
```
    rlc-Config
    mac-LogicalChannelConfi
    ...;
    [ [
    rlc-Config-vl6l0 RLC-Config-vl6l0
    ]],
    [ [
    rlc-Config-vl700
    logicalChannelIdentityExt-rl7
    multicastRLC-BearerConfig-rl7
    servedRadioBearerSRB4-rl7
    ] ]
}
MulticastRLC-BearerConfig-rl7 ::=
    servedMBS-RadioBearer-rl7
    isPTM-Entity-rl7
}
LogicalChannelIdentityExt-rl7 ::= INTEGER (320..65855)
-- TAG-RLC-BEARERCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline RLC-BearerConfig field descriptions \\
\hline \begin{tabular}{l}
isPTM-Entity \\
If configured, indicates that the RLC entity is used for PTM reception. When the field is absent the RLC entity is used for PTP transmission/reception.
\end{tabular} \\
\hline \begin{tabular}{l}
IogicalChannelldentity \\
ID used commonly for the MAC logical channel and for the RLC bearer. Value 4 is not configured for DRBs if SRB4 is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
logicalChannelldentityExt \\
Extended logical channel ID used commonly for the MAC logical channel and for the RLC bearer for MBS multicast. If this field is configured, the UE shall ignore logicalChannelldentity.
\end{tabular} \\
\hline \begin{tabular}{l}
reestablishRLC \\
Indicates that RLC should be re-established. Network sets this to true at least whenever the security key used for the radio bearer associated with this RLC entity changes. For SRB2, multicast MRBs and DRBs, unless full configuration is used, it is also set to true during the resumption of the RRC connection or the first reconfiguration after reestablishment. For SRB1, when resuming an RRC connection, or at the first reconfiguration after RRC connection reestablishment, the network does not set this field to true.
\end{tabular} \\
\hline \begin{tabular}{l}
ric-Config \\
Determines the RLC mode (UM, AM) and provides corresponding parameters. RLC mode reconfiguration can only be performed by DRB/multicast MRB release/addition or full configuration. The network may configure rc -Config-v1610 only when rc -Config (without suffix) is set to am.
\end{tabular} \\
\hline \begin{tabular}{l}
servedMBS-RadioBearer \\
Associates the RLC Bearer with a multicast MRB. The UE shall deliver DL RLC SDUs received via the RLC entity of this RLC bearer to the PDCP entity of the servedMBSRadioBearer.
\end{tabular} \\
\hline \begin{tabular}{l}
servedRadioBearer, servedRadioBearerSRB4 \\
Associates the RLC Bearer with an SRB or a DRB. The UE shall deliver DL RLC SDUs received via the RLC entity of this RLC bearer to the PDCP entity of the servedRadioBearer. Furthermore, the UE shall advertise and deliver uplink PDCP PDUs of the uplink PDCP entity of the servedRadioBearer to the uplink RLC entity of this RLC bearer unless the uplink scheduling restrictions (moreThanOneRLC in PDCP-Config and the restrictions in LogicalChannelConfig) forbid it to do so.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 771  ---


3GPP TS 38.331 version 17.0.0 Release 17
770
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline LCH-Setup & This field is mandatory present upon creation of a new logical channel for a DRB or a multicast MRB. This field is optionally present, Need S, upon creation of a new logical channel for an SRB. It is optionally present, Need M, otherwise. \\
\hline LCH-SetupModMRB & This field is optionally present upon creation of a new logical channel for a multicast MRB. If this field is included upon creation of a new logical channel for a multicast MRB, it shall be present when modifying this logical channel. The field is absent for logical channels configured for an SRB and a DRB. \\
\hline LCH-SetupOnly & This field is mandatory present upon creation of a new logical channel for a DRB or an SRB (servedRadioBearer). It is absent, Need M otherwise. \\
\hline LCH-SetupOnlyMRB & This field is mandatory present upon creation of a new logical channel for a multicast MRB. It is absent, Need M otherwise. \\
\hline
\end{tabular}
- \( \quad \) RLC-Config

The IE RLC-Config is used to specify the RLC configuration of SRBs, multicast MRBs and DRBs.
RLC-Config information element
```
-- ASNISTART
-- TAG-RLC-CONFIG-START
```

```
RLC-Config ::=
    am
        ul-AM-RLC
        dl-AM-RLC
    },
    um-Bi-Directional
        ul-UM-RLC
        dl-UM-RLC
    },
    um-Uni-Directional-UL
        ul-UM-RLC
    },
    um-Uni-Directional-DL
        dl-UM-RLC
    },
    ...
}
UL-AM-RLC ::=
    sn-FieldLength
    t-PollRetransmit
    pollPDU
    pollByte
    maxRetxThreshold.
}
DL-AM-RLC ::=
    sn-FieldLength
    t-Reassembly
    t-StatusProhibit
    t-StatusProhibit
CHOICE {
    SEQUENCE {
        UL-AM-RLC,
        DL-AM-RLC
    SEQUENCE {
        UL-UM-RLC,
        DL-UM-RLC
    SEQUENCE {
        UL-UM-RLC
    SEQUENCE {
        DL-UM-RLC
SEQUENCE {
    SN-FieldLengthAM OPTIONAL, -- Cond Reestab
    T-PollRetransmit,
    PollPDU,
    PollByte,
    ENUMERATED { tl, t2, t3, t4, t6, t8, t16, t32 }
SEQUENCE {
    SN-FieldLengthAM OPTIONAL, -- Cond Reestab
    T-Reassembly,
    T-StatusProhibit
```


ETSI


--- Page 772  ---


3GPP TS 38.331 version 17.0.0 Release 17
771
ETSI TS 138331 V17.0.0 (2022-05)
```
}
```

```
UL-UM-RLC ::=
    sn-FieldLength
}
DL-UM-RLC ::=
    sn-FieldLength
    t-Reassembly
}
T-PollRetransmit ::=
```


SEQUENCE 1
```
SN-FieldLengthUM

OPTIONAL -- Cond Reestab
```


SEQUENCE 1
```
SN-FieldLengthUM

OPTIONAL, -- Cond Reestab
```


ENUMERATED s
ms5, ms10, ms15, ms20, ms25, ms30, ms35, ms40, ms45, ms50, ms55, ms60, ms65, ms70, ms 75 , ms 80 , ms 85 , ms 90 , ms 95 , ms 100 , ms 105 , msllo, msll5, msl20, msl25, msl30, msl35, msl40, msl45, msl50, msl55, msl60, msl65, msl70, msl75, msl80, msl85, msl90, ms 195 , ms200, ms205, ms210, ms215, ms220, ms225, ms 230 , ms 235 , ms 240 , ms 245 , ms 250 , ms 300 , ms350, ms400, ms450, ms500, ms800, ms1000, ms2000, ms4000, msl-vl610, ms2-vl610, ms3-vl610, ms4-vl610, sparel\}
```
T-Reassembly
                ED 1
                ms40, ms45, ms50, ms55, ms60, ms65, ms70,
                msllo, msll5, msl20, msl25, msl30, msl35,
                msl40, msl45, msl50, msl55, msl60, msl65,
                msl70, ms175, sl80, ms185, ms190, ms225,
                            ms200, ms230, ms235, ms240, ms245, ms250, ms300,
                    ms230.
                ms350, ms400, ms450, ms500, ms800, ms1000,
                ms20-vl6l0, sparel}
                                    PollPDU ::=
PollByte ::=
```


T-Reassembly : :=
```
T-StatusProhibit ::=
```


ENUMERATED \{
```
    p4, p8, p16, p32, p64, p128, p256, p512, p1024, p2048, p4096, p6144, p8192, p12288, p16384,p20480,
    p24576, p28672, p32768, p40960, p49152, p57344, p65536, infinity, spare8, spare7, spare6, spare5, spare4,
    spare3, spare2, sparel}
ENOMERATED {
    kBl, kB2, kB5, kB8, kB10, kB15, kB25, kB50, kB75,
    kBl00, kBl25, kB250, kB375, kB500, kB750, kB1000,
    kB1250, kB1500, kB2000, kB3000, kB4000, kB4500,
    kB5000, kB5500, kB6000, kB6500, kB7000, kB7500,
    mB8, mB9, mBl0, mBll, mBl2, mBl3, mBl4, mBl5,
    mBl6, mBl7, mB18, mB20, mB25, mB30, mB40, infinity,
    spare20, sparel9, sparel8, sparel7, sparel6,
    sparel5, sparel4, sparel3, sparel2, sparell,
    sparel0, spare9, spare8, spare7, spare6, spare5,
    spare4, spare3, spare2, sparel}
ENOMERATED {
    ms0, ms5, ms10, ms15, ms20, ms25, ms30, ms35,
    ms40, ms45, ms50, ms55, ms60, ms65, ms70,
    ms75, ms80, ms85, ms90, ms95, msl00, msl10,
    msl20, msl30, msl40, msl50, msl60, msl70,
    msl80, msl90, ms200, sparel}
ENOMERATED \
    ms0, ms5, ms10, ms15, ms20, ms25, ms30, ms35,
    ms40, ms45, ms50, ms55, ms60, ms65, ms70,
    ms75, ms80, ms85, ms90, ms95, msl00, msl05,
    msl10, msl15, msl20, msl25, msl30, msl35,
```


--- Page 773  ---


3GPP TS 38.331 version 17.0.0 Release 17
772
ETSI TS 138331 V17.0.0 (2022-05)
```
msl40, msl45, msl50, msl55, msl60, msl65,
msl70, msl75, msl80, msl85, msl90, msl95,
ms200, ms205, ms210, ms215, ms220, ms225,
ms230, ms235, ms240, ms245, ms250, ms300,
ms350, ms400, ms450, ms500, ms800, ms1000,
msl200, msl600, ms2000, ms2400, spare2, sparel}
```

```
SN-FieldLengthUM ::=
SN-FieldLengthAM ::=
RLC-Config-vl610 ::=
    dl-AM-RLC-vl610
}
RLC-Config-vl700 ::=
    dl-UM-RLC-vl700
}
DL-AM-RLC-vl610 ::=
    t-StatusProhibit-vl6l0
    ...;
    [ [
    t-ReassemblyExt-rl7
    ] ]
}
DL-UM-RLC-Vl700 ::=
    t-ReassemblyExt-rl7
    ...
}
T-StatusProhibit-vl6l0 ::=
T-ReassemblyExt-rl7 ::=
-- TAG-RLC-CONFIG-STOP
-- ASN1STOP
```

```
ENUMERATED {size6, sizel2}
ENUMERATED {sizel2, sizel8}
SEQUENCE {
DL-AM-RLC-v1610
```

SEQUENCE 1
DL-UM-RLC-vl700
SEQUENCE 1
T-StatusProhibit-vl610 OPTIONAL, -- Need N
T-ReassemblyExt-rl7 OPTIONAL -- Need N
SEQUENCE 1
T-ReassemblyExt-rl7 OPTIONAL, -- Need N
ENUMERATED \{msl, ms2, ms3, ms4, spare4, spare3, spare2, sparel\}
ENUMERATED (ms210, ms220, ms340, ms350, ms550, ms1100, ms1650, ms2200\}

ETSI


--- Page 774  ---


3GPP TS 38.331 version 17.0.0 Release 17
773
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RLC-Config field descriptions \\
\hline \begin{tabular}{l}
maxRetxThreshold \\
Parameter for RLC AM in TS 38.322 [4]. Value \( t 1 \) corresponds to 1 retransmission, value \( t 2 \) corresponds to 2 retransmissions and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
pollByte \\
Parameter for RLC AM in TS 38.322 [4]. Value \( k B 25 \) corresponds to 25 kB ytes, value \( k B 50 \) corresponds to 50 kBytes and so on. infinity corresponds to an infinite amount of kBytes.
\end{tabular} \\
\hline \begin{tabular}{l}
pollPDU \\
Parameter for RLC AM in TS 38.322 [4]. Value p4 corresponds to 4 PDUs, value p8 corresponds to 8 PDUs and so on. infinity corresponds to an infinite number of PDUs.
\end{tabular} \\
\hline \begin{tabular}{l}
sn-FieldLength \\
Indicates the RLC SN field size, see TS 38.322 [4], in bits. Value size 6 means 6 bits, value size 12 means 12 bits, value size 18 means 18 bits. The value of sn-FieldLength for a DRB/multicast MRB shall be changed only using reconfiguration with sync. The network configures only value size 12 in SN-FieldLengthAM for SRB.
\end{tabular} \\
\hline \begin{tabular}{l}
t-PollRetransmit \\
Timer for RLC AM in TS 38.322 [4], in milliseconds. Value \( m s 5 \) means 5 ms , value \( m s 10 \) means 10 ms and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
t-Reassembly \\
Timer for reassembly in TS 38.322 [4], in milliseconds. Value \( m s 0 \) means 0 ms , value \( m s 5 \) means 5 ms and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
\( \boldsymbol{t} \)-StatusProhibit \\
Timer for status reporting in TS 38.322 [4], in milliseconds. Value \( m s 0 \) means 0 ms , value \( m s 5 \) means 5 ms and so on. If \( t \)-StatusProhibit-v 1610 is present, the UE shall ignore \( t \)-StatusProhibit (without suffix).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline Reestab & \begin{tabular}{l} 
The field is mandatory present at bearer setup. It is optionally present, need M, at RLC re-establishment. Otherwise it is \\
absent. Need M.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RLF-TimersAndConstants

The IE RLF-TimersAndConstants is used to configure UE specific timers and constants.
RLF-TimersAndConstants information element
```
-- ASNISTART
-- TAG-RLF-TIMERSANDCONSTANTS-START
```

-- TAG-RLF-TIMERSANDCONSTANTS-STOP
-- ASNISTOP
```
RLF-TimersAndConstants ::=
    t310
    n310
    n311
    ...,
    [ [
    t311 ENUMERATED {ms1000, ms3000, ms5000, ms10000, ms15000, ms20000, ms30000}
    ]]
}
```


ETSI


--- Page 775  ---


3GPP TS 38.331 version 17.0.0 Release 17
774
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RLF-TimersAndConstants field descriptions \\
\hline \begin{tabular}{l}
\( n 3 x y \) \\
Constants are described in clause 7.3. Value \( n 1 \) corresponds to 1, value \( n 2 \) corresponds to 2 and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
t3xy \\
Timers are described in clause 7.1. Value \( m s 0 \) corresponds to 0 ms , value \( m s 50 \) corresponds to 50 ms and so on.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RNTI-Value

The IE RNTI-Value represents a Radio Network Temporary Identity.
RNTI-Value information element
-- ASNISTART
-- TAG-RNTI-VALUE-START

RNTI-Value : : \( \quad \) INTEGER (0. 65535)
-- TAG-RNTI-VALUE-STOP
-- ASNISTOP
- \( \quad \) RSRP-Range

The IE RSRP-Range specifies the value range used in RSRP measurements and thresholds. For measurements, integer value for RSRP measurements is according to Table 10.1.6.1-1 in TS 38.133 [14]. For thresholds, the actual value is (IE value -156 ) dBm, except for the IE value 127, in which case the actual value is infinity.

RSRP-Range information element
-- ASN1START
-- TAG-RSRP-RANGE-START
RSRP-Range : : \( = \) INTEGER(0..127)
-- TAG-RSRP-RANGE-STOP
-- ASNISTOP
- RSRQ-Range

The IE RSRQ-Range specifies the value range used in RSRQ measurements and thresholds. For measurements, integer value for RSRQ measurements is according to Table 10.1.11.1-1 in TS 38.133 [14]. For thresholds, the actual value is (IE value -87) /2 dB.

RSRQ-Range information element

-- ASNISTART
ETSI


--- Page 776  ---


3GPP TS 38.331 version 17.0.0 Release 17
775
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-RSRQ-RANGE-START
RSRQ-Range ::= INTEGER(0..127)
-- TAG-RSRQ-RANGE-STOP
-- ASNISTOP
```

- RSSI-Range

The IE RSSI-Range specifies the value range used in RSSI measurements and thresholds for NR operation with shared spectrum channel access. The integer value for RSSI measurements is according to Table 10.1.34.3-1 in TS 38.133 [14].

RSSI-Range information element
```
-- ASNISTART
-- TAG-RSSI-RANGE-START
RSSI-Range-r16 ::= INTEGER(0..76)
-- TAG-RSSI-RANGE-STOP
-- ASNISTOP
- RxTxTimeDiff
```


The IE RxTxTimeDiff contains the Rx-Tx time difference measurement at either the UE or the gNB.
RxTxTimeDiff information element
```
-- ASNISTART
-- TAG-RXTXTIMEDIEF-START
RxTxTimeDiff-rl7 ::= SEQUENCE [
    result-k5-rl7 INTEGER (0..61565),
    ...
}
-- TAG-RXTXTIMEDIFF-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline RxTxTimeDiff field descriptions \\
\hline result- \( \boldsymbol{k} \mathbf{5} \) This field indicates the Rx-Tx time difference measurement, see TS 38.215 [9]. \\
\hline
\end{tabular}

ETSI


--- Page 777  ---


3GPP TS 38.331 version 17.0.0 Release 17
776
ETSI TS 138331 V17.0.0 (2022-05)
- SCellActivationRS-Config

The IE SCellActivationRS-Config is used to configure a Reference Signal for efficient activation of the SCell where the IE is included (see TS 38.214 [19], clause x.y.z). Usage of an SCellActivationRS-Config is indicated by including its scellActivationRS-Id in the Enhanced SCell activation MAC CE (see TS 38.321 [3] clause 6.1.3.55).

SCellActivationRS-Config information element
```
-- ASNISTART
-- TAG-SCELLACTIVATIONRS-CONFIG-START
SCellActivationRS-Config-rl7 ::= SEQUENCE [
    scellActivationRS-Id-rl7 SCellActivationRS-ConfigId-rl7,
    resourceSet-rl7 NZP-CSI-RS-ResourceSetId,
```

```
    qcl-Info-rl7 SEQUENCE (SIZE(l..maxNrofAP-CSI-RS-ResourcesPerSet)) OF TCI-StateId,
    \text { ⋯}
}
-- TAG-SCELLACTIVATIONRS-CONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SCellActivationRS-Config field descriptions \\
\hline \begin{tabular}{l}
gapBetweenBursts \\
When this field is present, there are two bursts and it indicates the gap between the two bursts in number of slots. When this field is absent, there is a single burst.
\end{tabular} \\
\hline \begin{tabular}{l}
qci-info \\
List of references to TCI-States for providing the QCL source and QCL type for each NZP-CSI-RS-Resource listed in nzp-CSI-RS-Resources of the NZP-CSI-RS-ResourceSet indicated by resourceSet. Each TCI-Stateld refers to the TCI-State which has this value for tci-Stateld and is defined in tci-StatesToAddModList in the PDSCH-Config included in the BWP-Downlink of this serving cell indicated by firstActiveDownlinkBWP-ld in the ServingCellConfig in which this IE is included. First entry in qc/info corresponds to first entry in nzp-CS/-RS-Resources of that NZP-CS/-RS-ResourceSet, second entry in qc/info corresponds to second entry in nzp-CS/-RS-Resources, and so on (see TS 38.214 [19], clause x.y.z).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceSet \\
nzp-CSI-ResourceSet/d of the NZP-CSI-RS-ResourceSet of this serving cell used as resource configuration for one or two bursts for SCell activation. This NZP-CSI-RSResourceSet consists of either four NZP CSI-RS resources in two consecutive slots with two NZP CSI-RS resources in each slot, or consists of two NZP CSI-RS resources in one slot (see TS 38.214 [19], clause x.y.z). The CSI-RS associated with this NZP-CSI-RS-ResourceSet are located in the BWP addressed by firstActiveDownlinkBWP-Id.
\end{tabular} \\
\hline
\end{tabular}
- SCellActivationRS-Configid

The IE SCellActivationRS-Configld is used to identify one SCellActivationRS-Config-
SCellActivationRS-Configid information element
-- ASNISTART
-- TAG-SCELLACTIVATIONRS-CONFIGID-START
SCellActivationRS-ConfigId-rl7 : := INTEGER (1.. maxNrofSCellActRS-rl7)

ETSI


--- Page 778  ---


3GPP TS 38.331 version 17.0.0 Release 17
777
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-SCELLACTIVATIONRS-CONFIGID-STOP
-- ASNISTOP

SCellIndex
The IE SCellIndex concerns a short identity, used to identify an SCell. The value range is shared across the Cell Groups.
SCellindex information element
```
-- ASNISTART
-- TAG-SCELLINDEX-START
SCellIndex ::= INTEGER (1..31)
-- TAG-SCELLINDEX-STOP
-- ASNISTOP
```


SchedulingRequestConfig
The IE SchedulingRequestConfig is used to configure the parameters, for the dedicated scheduling request (SR) resources.

SchedulingRequestConfig information element
```
-- ASNISTART
-- TAG-SCHEDULINGREQUESTCONFIG-START
SchedulingRequestConfig ::= SEQUENCE {
    schedulingRequestToAddModList SEQUENCE (SIZE (1..maxNrofSR-ConfigPerCellGroup)) OF SchedulingRequestToAddMod
            OPTIONAL, -- Need N
    schedulingRequestToReleaseList SEQUENCE (SIZE (1..maxNrofSR-ConfigPerCellGroup)) OF SchedulingRequestId
            OPTIONAL -- Need N
}
SchedulingRequestToAddMod ::= SEQUENCE {
    schedulingRequestId.
    SchedulingRequestId,
```

```
}
SchedulingRequestConfig-vl700 ::= SEQUENCE {
```

```
            OPTIONAL -- Need N
}
SchedulingRequestToAddModExt-vl700 ::= SEQUENCE {
```

```
                OPTIONAL -- Need S
}
```


ETSI


--- Page 779  ---


3GPP TS 38.331 version 17.0.0 Release 17
778
ETSI TS 138331 V17.0.0 (2022-05)

-- Editor's note: "Introduce a new sr-ProhibitTimerExt-rl7 IE. Values FFS".
-- Comments welcome to the above implementation that is according to A4.3.6 and A4.3.5.
-- TAG-SCHEDULINGREQUESTCONEIG-STOP
-- ASNISTOP

\begin{tabular}{|l|l|}
\hline & SchedulingRequestConfig field descriptions \\
\hline \begin{tabular}{l}
scheduling RequestToAddModList \\
List of Scheduling Request configurations to add or modify.
\end{tabular} & \\
\hline \begin{tabular}{l}
scheduling RequestToReleaseList \\
List of Scheduling Request configurations to release.
\end{tabular} & \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SchedulingRequestToAddMod field descriptions \\
\hline \begin{tabular}{l}
schedulingRequestid \\
Used to modify a SR configuration and to indicate, in LogicalChannelConfig, the SR configuration to which a logical channel is mapped and to indicate, in \\
SchedulingRequestresourceConfig, the SR configuration for which a scheduling request resource is used.
\end{tabular} \\
\hline \begin{tabular}{l}
sr-ProhibitTimer \\
Timer for SR transmission on PUCCH in TS 38.321 [3]. Value is in ms. Value \( m s 1 \) corresponds to 1 ms , value \( m s 2 \) corresponds to 2 ms , and so on. When the field is absent, the UE applies the value 0.
\end{tabular} \\
\hline \begin{tabular}{l}
sr-TransMax \\
Maximum number of SR transmissions as described in TS 38.321 [3]. Value \( n 4 \) corresponds to 4, value \( n 8 \) corresponds to 8, and so on.
\end{tabular} \\
\hline
\end{tabular}
- SchedulingRequestld

The IE SchedulingRequestld is used to identify a Scheduling Request instance in the MAC layer.
SchedulingRequestid information element
-- ASNISTART
-- TAG-SCHEDULINGREQUESTID-START
SchedulingRequestId : := INTEGER (0..7)
-- TAG-SCHEDULINGREQUESTID-STOP
-- ASNISTOP
- SchedulingRequestResourceConfig

The IE SchedulingRequestResourceConfig determines physical layer resources on PUCCH where the UE may send the dedicated scheduling request (D-SR) (see TS 38.213 [13], clause 9.2.4).

ETSI


--- Page 780  ---


3GPP TS 38.331 version 17.0.0 Release 17
779
ETSI TS 138331 V17.0.0 (2022-05)

SchedulingRequestResourceConfig information element
```
-- ASNISTART
-- TAG-SCHEDULINGREQUESTRESOURCECONFIG-START
SchedulingRequestResourceConfig ::= SEQUENCE \
    schedulingRequestResourceId
    schedulingRequestID
    periodicityAndOffset
        sym2
        NULL,
        NULL,
        NULL, -- Recurs in every slot
        S14 INTEGER (0.)
        S15 INTEGER (0..4),
        sl8 INTEGER (0..7),
        sll0 INTEGER (0..9),
        sl16 INTEGER (0..15),
        sl20 INTEGER (0..19),
        sl40 INTEGER (0..39),
        sl80 INTEGER (0..79),
        S1160 INTEGER (0..159),
        S1320 INTEGER (0..319),
        sl640 INTEGER (0..639)
    }
    resource PUCCH-ResourceId
}
SchedulingRequestResourceConfigExt-vl610 ::= SEQUENCE [
```

```
    \cdots
}
SchedulingRequestResourceConfigExt-vl700 ::= SEQUENCE [
    periodicityAndOffset-rl7 CHOICE \
        sl1280 INTEGER (0..1279),
        sl2560 INTEGER (0..2559),
        sl5120 INTEGER (0..5119)
    }
}
-- TAG-SCHEDULINGREQUESTRESOURCECONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 781  ---


3GPP TS 38.331 version 17.0.0 Release 17
780
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SchedulingRequestResourceConfig field descriptions \\
\hline \begin{tabular}{l}
periodicityAndOffset \\
SR periodicity and offset in number of symbols or slots (see TS 38.213 [13], clause 9.2.4) The following periodicities may be configured depending on the chosen subcarrier spacing:
\( \mathrm{SCS}=15 \mathrm{kHz}: 2 \mathrm{sym}, 7 \mathrm{sym}, 1 \mathrm{sl}, 2 \mathrm{sl}, 4 \mathrm{sl}, 5 \mathrm{sl}, 8 \mathrm{sl}, 10 \mathrm{sl}, 16 \mathrm{sl}, 20 \mathrm{sl}, 40 \mathrm{sl}, 80 \mathrm{sl} \)
\( \mathrm{SCS}=30 \mathrm{kHz}: 2 \mathrm{sym}, 7 \mathrm{sym}, 1 \mathrm{sl}, 2 \mathrm{sl}, 4 \mathrm{sl}, 8 \mathrm{sl}, 10 \mathrm{sl}, 16 \mathrm{sl}, 20 \mathrm{sl}, 40 \mathrm{sl}, 80 \mathrm{sl}, 160 \mathrm{sl} \)
\( \mathrm{SCS}=60 \mathrm{kHz}: 2 \mathrm{sym}, 7 \mathrm{sym} / 6 \mathrm{sym}, 1 \mathrm{sl}, 2 \mathrm{sl}, 4 \mathrm{sl}, 8 \mathrm{sl}, 16 \mathrm{sl}, 20 \mathrm{sl}, 40 \mathrm{sl}, 80 \mathrm{sl}, 160 \mathrm{sl}, 320 \mathrm{sl} \)
\( \mathrm{SCS}=120 \mathrm{kHz}: 2 \mathrm{sym}, 7 \mathrm{sym}, 1 \mathrm{sl}, 2 \mathrm{sl}, 4 \mathrm{sl}, 8 \mathrm{sl}, 16 \mathrm{sl}, 40 \mathrm{sl}, 80 \mathrm{sl}, 160 \mathrm{sl}, 320 \mathrm{sl}, 640 \mathrm{sl} \)
\( \mathrm{SCS}=480 \mathrm{kHz}: 1 \mathrm{sl}, 2 \mathrm{sl}, 4 \mathrm{sl}, 8 \mathrm{sl}, 16 \mathrm{sl}, 40 \mathrm{sl}, 80 \mathrm{sl}, 160 \mathrm{sl}, 320 \mathrm{sl}, 640 \mathrm{sl}, 1280 \mathrm{sl}, 2560 \mathrm{sl} \)
\( \mathrm{SCS}=960 \mathrm{kHz}: 1 \mathrm{sl}, 2 \mathrm{sl}, 4 \mathrm{sl}, 8 \mathrm{sl}, 16 \mathrm{sl}, 40 \mathrm{sl}, 80 \mathrm{sl}, 160 \mathrm{sl}, 320 \mathrm{sl}, 640 \mathrm{sl}, 1280 \mathrm{sl}, 2560 \mathrm{sl}, 5120 \mathrm{sl} \) \\
sym6or7 corresponds to 6 symbols if extended cyclic prefix and a SCS of 60 kHz are configured, otherwise it corresponds to 7 symbols. \\
For periodicities 2sym, 7sym and sl1 the UE assumes an offset of 0 slots. \\
If SchedulingRequestResourceConfigExt-v1700 is present, any previously configured SchedulingRequestResourceConfigExt (without suffix) is released, and vice versa.
\end{tabular} \\
\hline \begin{tabular}{l}
phy-Prioritylndex \\
Indicates whether this scheduling request resource is high or low priority in PHY prioritization/multiplexing handling (see TS 38.213 [13], clause 9.2.4). Value pO indicates low priority and value \( p 1 \) indicates high priority.
\end{tabular} \\
\hline \begin{tabular}{l}
resource \\
ID of the PUCCH resource in which the UE shall send the scheduling request. The actual PUCCH-Resource is configured in PUCCH-Config of the same UL BWP and serving cell as this SchedulingRequestResourceConfig. The network configures a PUCCH-Resource of PUCCH-formatO or PUCCH-format 1 (other formats not supported) (see TS 38.213 [13], clause 9.2.4)
\end{tabular} \\
\hline \begin{tabular}{l}
scheduling RequestID \\
The ID of the SchedulingRequestConfig that uses this scheduling request resource.
\end{tabular} \\
\hline
\end{tabular}
- SchedulingRequestResourceld

The IE SchedulingRequestResourceld is used to identify scheduling request resources on PUCCH.
SchedulingRequestResourceld information element
-- ASNISTART
-- TAG-SCHEDULINGREQUESTRESOURCEID-START

SchedulingRequestResourceId : := INTEGER (1. maxNrofSR-Resources)
-- TAG-SCHEDULINGREQUESTRESOURCEID-STOP
-- ASNISTOP
- Scramblingld

The IE ScramblingID is used for scrambling channels and reference signals.

ETSI


--- Page 782  ---


3GPP TS 38.331 version 17.0.0 Release 17
781
ETSI TS 138331 V17.0.0 (2022-05)

Scrambling/d information element
```
-- ASNISTART
-- TAG-SCRAMBLINGID-START
ScramblingId ::= INTEGER(0..1023)
-- TAG-SCRAMBLINGID-STOP
-- ASNISTOP
```

- SCS-SpecificCarrier

The IE SCS-SpecificCarrier provides parameters determining the location and width of the actual carrier or the carrier bandwidth. It is defined specifically for a numerology (subcarrier spacing (SCS)) and in relation (frequency offset) to Point A.

SCS-SpecificCarrier information element
```
-- ASNISTART
-- TAG-SCS-SPECIFICCARRIER-START
SCS-SpecificCarrier ::=
SEQUENCE \
    offsetToCarrier
    subcarrierSpacing
    carrierBandwidth
    ...;
    [ [
    txDirectCurrentLocation INTEGER (0.4095)
    ] ]
}
-- TAG-SCS-SPECIFICCARRIER-STOP
-- ASNISTOP
```


ETSI


--- Page 783  ---


3GPP TS 38.331 version 17.0.0 Release 17
782
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SCS-SpecificCarrier field descriptions \\
\hline \begin{tabular}{l}
carrierBandwidth \\
Width of this carrier in number of PRBs (using the subcarrierSpacing defined for this carrier) (see TS 38.211 [16], clause 4.4.2).
\end{tabular} \\
\hline \begin{tabular}{l}
offsetToCarrier \\
Offset in frequency domain between Point A (lowest subcarrier of common RB 0 ) and the lowest usable subcarrier on this carrier in number of PRBs (using the subcarrierSpacing defined for this carrier). The maximum value corresponds to \( 275^{\star} 8-1 \). See TS 38.211 [16], clause 4.4.2.
\end{tabular} \\
\hline \begin{tabular}{l}
txDirectCurrentLocation \\
Indicates the downlink Tx Direct Current location for the carrier. A value in the range \( 0 . .3299 \) indicates the subcarrier index within the carrier. The values in the value range \( 3301 . .4095 \) are reserved and ignored by the UE. If this field is absent for downlink within ServingCellConfigCommon and ServingCellConfigCommonSIB, the UE assumes the default value of 3300 (i.e. "Outside the carrier"). (see TS 38.211 [16], clause 4.4.2). Network does not configure this field via ServingCellConfig or for uplink carriers.
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierSpacing \\
Subcarrier spacing of this carrier. It is used to convert the offsetToCarrier into an actual frequency. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline
\end{tabular}
- SDAP-Config

The IE SDAP-Config is used to set the configurable SDAP parameters for a data radio bearer. All configured instances of SDAP-Config with the same value of pdu-Session correspond to the same SDAP entity as specified in TS 37.324 [24].

SDAP-Config information element
```
-- ASNISTART
-- TAG-SDAP-CONFIG-START
SDAP-Config ::=
    pdu-Session
    sdap-HeaderDL
    sdap-HeaderUL
    defaultDRB
    mappedQoS-FlowsToAdd.
    mappedQoS-FlowsToRelease
    ...
}
QFI ::=
PDU-SessionID ::=
-- TAG-SDAP-CONFIG-STOP
-- ASNISTOP
```

```
SEQUENCE \
    PDU-SessionID,
    ENUMERATED {present, absent},
    ENUMERATED {present, absent},
    BOOLEAN,
    SEQUENCE (SIZE (1..maxNrofQFIs)) OF QFI OPTIONAL, -- Need N
    SEQUENCE (SIZE (1..MAXNrofQFIs)) OF QFI OPTIONAL, -- Need N
INTEGER (O..MAXQFI)
INTEGER (0..255)
```


--- Page 784  ---


3GPP TS 38.331 version 17.0.0 Release 17
783
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SDAP-Config field descriptions \\
\hline \begin{tabular}{l}
defaultDRB \\
Indicates whether or not this is the default DRB for this PDU session. Among all configured instances of SDAP-Config with the same value of pdu-Session, this field shall be set to true in at most one instance of SDAP-Config and to false in all other instances.
\end{tabular} \\
\hline \begin{tabular}{l}
mappedQoS-Flows ToAdd \\
Indicates the list of QFIs of UL QoS flows of the PDU session to be additionally mapped to this DRB. A QFI value can be included at most once in all configured instances of SDAP-Config with the same value of pdu-Session. For QoS flow remapping, the QFI value of the remapped QoS flow is only included in mappedQoS-FlowsToAdd in sdapConfig corresponding to the new DRB and not included in mappedQoS-FlowsToRelease in sdap-Config corresponding to the old DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
mappedQoS-FlowsToRelease \\
Indicates the list of QFIs of QoS flows of the PDU session to be released from existing QoS flow to DRB mapping of this DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
pdu-Session \\
Identity of the PDU session whose QoS flows are mapped to the DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
sdap-HeaderUL \\
Indicates whether or not a SDAP header is present for UL data on this DRB. The field cannot be changed after a DRB is established. The network sets this field to present if the field defaultDRB is set to true.
\end{tabular} \\
\hline \begin{tabular}{l}
sdap-HeaderDL \\
Indicates whether or not a SDAP header is present for DL data on this DRB. The field cannot be changed after a DRB is established.
\end{tabular} \\
\hline
\end{tabular}
- SearchSpace

The IE SearchSpace defines how/where to search for PDCCH candidates. Each search space is associated with one ControlResourceSet. For a scheduled SCell in the case of cross carrier scheduling, except for nrofCandidates, all the optional fields are absent (regardless of their presence conditions). For a scheduled SpCell in the case of the cross carrier scheduling, if the search space is linked to another search space in the scheduling SCell, all the optional fields of this search space in the scheduled SpCell are absent (regardless of their presence conditions) except for nrofCandidates.

SearchSpace information element
-- ASNISTART
-- TAG-SEARCHSPACE-START

SearchSpace ::=
search SpaceId
controlResourceSetId.
monitoringSlotPeriodicityAndOffset
sll
sl2
sl4
sl5
sl8
s110
sll6
sl20
sl40
s180
51160
s1320
sl640

SEQUENCE 1
SearchSpaceId,
ControlResourceSetId. OPTIONAL, -- Cond SetupOnly
CHOICE I
NULL,
INTEGER (0.1),
INTEGER (0..3),
INTEGER ( 0.4 ) ,
INTEGER ( 0.7 ) ,
INTEGER (0. 9) ,
INTEGER (0.15),
INTEGER (0.19),
INTEGER (0..39),
INTEGER (0..79),
INTEGER (0.159),
INTEGER (0..319),
INTEGER (0. 639) ,

ETSI


--- Page 785  ---


3GPP TS 38.331 version 17.0.0 Release 17
784
ETSI TS 138331 V17.0.0 (2022-05)
```
        sl1280
        sl2560
    }
    duration
    monitoringSymbolsWithinSlot
    nrofCandidates
        aggregationLevell
        aggregationLevel2
        aggregationLevel4
        aggregationLevel8
        aggregationLevell6
    }
    search SpaceType
        common
            dci-Format0-0-AndFormatl-0
                ...
            }
            dci-Format2-0
                nrofCandidates-SFI
                    aggregationLevell
                    aggregationLevel2
                    aggregationLevel4
                    aggregationLevel8
                    aggregationLevell6
                },
                ...
            }
            dci-Format2-l
                ...
            }
            dci-Format2-2
                ...
            }
            dci-Format2-3
                dumnyl
                dummy2
                ...
            }
        l,
        ue-Specific
            dei-Formats
            ...,
            [ [
            dci-Formats-MT-rl6
            dci-FormatsSL-rl6
            dci-FormatsExt-r16
            ] ]
        }
    }
}
SearchSpaceExt-rl6 ::=
```

    INTEGER (0.1279),
    INTEGER (0. 2559)
```
INTEGER (2..2559)
BIT STRING (SIZE (14))
SEQUENCE {
    ENUMERATED {n0, nl, n2, n3, n4, n5, n6, n8},
    ENUMERATED {n0, n1, n2, n3, n4, n5, n6, n8},
    ENUMERATED {n0, nl, n2, n3, n4, n5, n6, n8},
    ENUMERATED {n0, nl, n2, n3, n4, n5, n6, n8},
    ENUMERATED {n0, nl, n2, n3, n4, n5, n6, n8}
```

CHOICE [
    SEQUENCE 1
        SEQUENCE 1
        OPTIONAL, -- Need. R
                OPTIONAL, -- Need R
        SEQUENCE 1
            SEQUENCE 1
                ENUMERATED \{nl, n2\} OPTIONAL, -- Need R
                ENUMERATED (nl, n2\}
                ENUMERATED \{nl, n2\}
                ENUMERATED (nl, n2\}
                ENUMERATED (nl, n2\}
OPTIONAL, -- Cond Setup
OPTIONAL, -- Cond Setup4
OPTIONAL, -- Need R
OPTIONAL, -- Cond Setup
OPTIONAL, -- Cond Setup
OPTIONAL, -- Cond Setup
    -

.05)
    OPTIONAL, -- Need R
        SEQUENCE 1
            OPTIONAL, -- Need R
        SEQUENCE 1
            OPTIONAL, -- Need. R
        SEQUENCE 1
                ENUMERATED \{sll, sl2, sl4, sl5, sl8, sll0, sll6, sl20\} OPTIONAL, -- Cond Setup
                ENUMERATED \{nl, n2\},
                            OPTIONAL -- Need R
        SEQUENCE 1
            ENUMERATED \{formats0-0-And-1-0, formats0-1-And-1-1\},
    ENUMERATED \{formats2-5\} OPTIONAL, -- Need R
    ENUMERATED (formats0-0-And-1-0, formats0-1-And-1-1, formats3-0, formats3-1,
                        formats3-0-And-3-1\} OPTIONAL, -- Need R
    ENUMERATED \{formats0-2-And-1-2, formats0-1-And-1-1And-0-2-And-1-2\}
```
                        OPTIONAL -- Need. R
                        OPTIONAL -- Cond Setup2
    OPTIONAL -- Need. R
```

    SEQUENCE 1

ETSI


--- Page 786  ---


3GPP TS 38.331 version 17.0.0 Release 17
785
ETSI TS 138331 V17.0.0 (2022-05)
```
    controlResourceSetId-rl6
    searchSpaceType-rl6
        common-rl6
            dci-Format2-4-rl6
                SEQUENCE \
                    ates-CI-rl6 SEQUENCE {
                    aggregationLevel2-rl6
                    aggregationLevel4-rl6
                    aggregationLeve18-rl6
                    aggregationLevell6-rl6
                i,
                ...
            }
            dei-Format2-5-rl6 SEQUENCE [
                nrofCandidates-IAB-r16 SEQUENCE {
                    aggregationLevell-rl6
                    aggregationLevel2-rl6
                    aggregationLevel4-rl6
                    aggregationLevel8-rl6
                    aggregationLevell6-rl6
                },
                ...
            }
            dci-Format2-6-rl6 SEQUENCE {
                ...
            }
            ...,
            []
            dci-Format2-7-rl7 SEQUENCE {
                nrofCandidates-PEI-rl7
                    aggregationLevel4-rl7
                    aggregationLevel8-rl7
                    aggregationLevell6-rl7
                i,
                ...
                * 
            ]]
        }
    }
    searchSpaceGroupIdList-rl6
    freqMonitorLocations-rl6
}
SearchSpaceExt-vl700 ::= SEQUENCE {
    monitoringSlotPeriodicityAndOffset-rl7 CHOICE {
        sl32 INTEGER (0..31),
        sl64 INTEGER (0..63),
        sl128 INTEGER (0..127),
        sl5120 INTEGER (0..5119),
        sll0240 INTEGER (0..10239),
        sl20480 INTEGER (0..20479)
    }
    monitoringSlotsWithinSlotGroup-rl7 BIT STRING (SIZE (8))
    searchSpaceType-rl7 SEQUENCE[
            OPTIONAL, -- Cond SetupOnly2
SEQUENCE {
    SEQUENCE \
            SEQUENCE \
                ENUMERATED {nl, n2} OPTIONAL, -- Need. R
                ENUMERATED {nl, n2}
                ENUMERATED {nl, n2}
                ENOMERATED {n1, n2}
ENUMERATED {nl, n2}
OPTIONAL, -- Need. R
OPTIONAL, -- Need. R
OPTIONAL, -- Need. R
OPTIONAL -- Need R
OPTIONAL, -- Need R
                ENUMERATED {nl, n2}
                AmeRATED {nl, n2}
                ENUMERATED {nl, n2}
                ENUMERATED {nl, n2}
ENUMERATED {nl, n2}
OPTIONAL, -- Need R
OPTIONAL, -- Need R
OPTIONAL, -- Need. R
OPTIONAL, -- Need. R
OPTIONAL -- Need. R
OPTIONAL, -- Need R
OPTIONAL, -- Need.
OPTIONAL, -- Need R
OPTIONAL, -- Need. R
OPTIONAL, -- Need R
OPTIONAL -- Need R
OPTIONAL -- Need R
OPTIONAL, -- Cond Setup3
OPTIONAL, -- Need. R
OPTIONAL -- Need R
OPTIONAL, -- Cond Setup5
OPTIONAL, -- Need R
```


ETSI


--- Page 787  ---


3GPP TS 38.331 version 17.0.0 Release 17
786
ETSI TS 138331 V17.0.0 (2022-05)
```
        common-rl7
            dci-Format4-0-r17 SEQUENCE {
                ...
            } OPTIONAL, -- Need R
            dci-Format4-1-rl7 SEQUENCE {
                ...
            } OPTIONAL, -- NEed. R
            dci-Format4-2-rl7 SEQUENCE {
                ...
            } OPTIONAL, -- Need R
            dci-Format4-1-AndFormat4-2-rl7 SEQUENCE {
                \cdots.
            } OPTIONAL -- Need R
        }
    }
    searchSpaceGroupIdList-rl7
    searchSpaceLinkingId-rl7
}
SearchSpaceExt2-rl7 ::=
    searchSpaceType-rl7
        common-rll
            SEQUENCE \
                ...
            SEQUENCE \
            dci-Format4-1-rl7 SEQUENCE {
                ...
            }
            dci-Format4-2-rl7 SEQUENCE \
                ...
            }
            dci-Format4-1-AndFormat4-2-rl7 SEQUENCE {
                ...
            } OPTIONAL -- Need. R
        }
```

```
}
-- TAG-SEARCHSPACE-STOP
-- ASNISTOP
```


ETSI


--- Page 788  ---


3GPP TS 38.331 version 17.0.0 Release 17
787
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SearchSpace field descriptions \\
\hline \begin{tabular}{l}
common \\
Configures this search space as common search space (CSS) and DCI formats to monitor.
\end{tabular} \\
\hline \begin{tabular}{l}
controlResourceSetid \\
The CORESET applicable for this SearchSpace. Value 0 identifies the common CORESET\#0 configured in MIB and in ServingCellConfigCommon. Values 1...maxNrofControlResourceSets-1 identify CORESETs configured in System Information or by dedicated signalling. The CORESETs with non-zero controlResourceSet/d are configured in the same BWP as this SearchSpace except commonControlResourceSetExt which is configured by SIB20. If the field controlResourceSet/d-r16 is present, UE shall ignore the controlResourceSetid (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
dummy1, dummy2 \\
This field is not used in the specification. If received it shall be ignored by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format0-0-AndFormat1-0 \\
If configured, the UE monitors the DCI formats 0_0 and 1_0 according to TS 38.213 [13], clause 10.1.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format2-0 \\
If configured, UE monitors the DCI format 2 _ 0 according to TS 38.213 [13], clause 10.1, 11.1.1.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format2-1 \\
If configured, UE monitors the DCI format 2_1 according to TS 38.213 [13], clause 10.1, 11.2.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format2-2 \\
If configured, UE monitors the DCI format 2 _ 2 according to TS 38.213 [13], clause 10.1, 11.3.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format2-3 \\
If configured, UE monitors the DCI format 2 3 according to TS 38.213 [13], clause 10.1, 11.4
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format2-4 \\
If configured, UE monitors the DCI format 2_4 according to TS 38.213 [13], clause 11.2A.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format2-5 \\
If configured, IAB-MT monitors the DCI format 2_5 according to TS 38.213 [13], clause 14.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format2-6 \\
If configured, UE monitors the DCI format 2 _ 6 according to TS 38.213 [13], clause 10.1, 10.3. DCI format 2 _ 6 can only be configured on the SpCell.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format4-0 \\
If configured, the UE monitors the DCI format \( 4 \_0 \) with CRC srambled by MCCH-RNTI/G-RNTI according to TS 38.213 [13], clause [10.1].
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format4-1-AndFormat4-2 \\
If configured, the UE monitors the DCI format 4 _ 1 and 4_2 with CRC srambled by G-RNTI/G-CS-RNTI according to TS 38.213 [13], clause [11.1].
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format4-1 \\
If configured, the UE monitors the DCI format 4 _ 1 with CRC srambled by G-RNTI/G-CS-RNTI according to TS 38.213 [13], clause [10.1].
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Format4-2 \\
If configured, the UE monitors the DCI format 4 _ 2 with CRC srambled by G-RNTI/G-CS-RNTI according to TS 38.213 [13], clause [10.1].
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Formats \\
Indicates whether the UE monitors in this USS for DCI formats 0-0 and 1-0 or for formats 0-1 and 1-1.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-FormatsExt \\
If this field is present, the field dci-Formats is ignored and dci-FormatsExt is used instead to indicate whether the UE monitors in this USS for DCI format 0_2 and 1_2 or formats \( 0 \_1 \) and \( 1 \_1 \) and \( 0 \_2 \) and \( 1 \_2 \) (see TS 38.212 [17], clause 7.3 .1 and TS 38.213 [13], clause 10.1). This field is not configured for operation with shared spectrum channel access in this release.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-Formats-MT \\
Indicates whether the IAB-MT monitors the DCI formats 2-5 according to TS 38.213 [13], clause 14.
\end{tabular} \\
\hline \begin{tabular}{l}
dci-FormatsSL \\
Indicates whether the UE monitors in this USS for DCI formats 0-0 and 1-0 or for formats 0-1 and 1-1 or for format 3-0 or for format 3-1 or for formats 3-0 and 3-1. If this field is present, the field dci-Formats is ignored and dci-FormatsSL is used.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 789  ---


3GPP TS 38.331 version 17.0.0 Release 17
788
ETSI TS 138331 V17.0.0 (2022-05)

duration
Number of consecutive slots that a SearchSpace lasts in every occasion, i.e., upon every period as given in the periodicityAndOffset. If the field is absent, the UE applies the value 1 slot, except for DCI format \( 2 \_0 \). The UE ignores this field for DCI format \( 2 \_0 \). The maximum valid duration is periodicity- 1 (periodicity as given in the monitoringSlotPeriodicityAndOffset).
For IAB-MT, duration indicates number of consecutive slots that a SearchSpace lasts in every occasion, i.e., upon every period as given in the periodicityAndOffset. If the field is absent, the IAB-MT applies the value 1 slot, except for DCI format \( 2 \_0 \) and DCI format \( 2 \_5 \). The IAB-MT ignores this field for DCI format \( 2 \_0 \) and DCI format \( 2 \_5 \). The maximum valid duration is periodicity-1 (periodicity as given in the monitoringSlotPeriodicityAndOffset).
freqMonitorLocations
Defines an association of the search space to multiple monitoring locations in the frequency domain and indicates whether the pattern configured in the associated CORESET is replicated to a specific RB set, see TS 38.213, clause 10.1. Each bit in the bitmap corresponds to one RB set, and the leftmost (most significant) bit corresponds to RB set 0 in the BWP. A bit set to 1 indicates that a frequency domain resource allocation replicated from the pattern configured in the associated CORESET is mapped to the RB set.
monitoringSlotPeriodicityAndOffset
Slots for PDCCH Monitoring configured as periodicity and offset. If the UE is configured to monitor DCI format 2_1, only the values 'sl1', 'sl2' or 'sl4' are applicable. If the UE is configured to monitor DCI format \( 2 \_0 \), only the values 'sl1', 'sl2', 'sl4', 'sl5', 'sl8', 'sl10', 'sl16', and 'sl20' are applicable (see TS 38.213 [13], clause 10). If the UE is configured to monitor DCI format 2_4, only the values 'sl1', 'sl2', 'sl4', 'sl5', 'sl8' and 'sl10' are applicable.
For IAB-MT, If the IAB-MT is configured to monitor DCI format 2_1, only the values 'sI1', 'sI2' or 'sI4' are applicable. If the IAB-MT is configured to monitor DCI format \( 2 \_0 \) or DCI format 2_5, only the values 'sl1', 'sl2', 'sl4', 'sl5', 'sl8', 'sl10', 'sl16', and 'sl20' are applicable (see TS 38.213, clause 10).
If monitoringSlotPeriodicityAndOffset-r17 is present, any previously configured monitoringSlotPeriodicityAndOffset is released, and if monitoringSlotPeriodicityAndOffset is present, any previously configured monitoringSlotPeriodicityAndOffset-r17 is released.
monitoringSlotsWithinSlotGroup
Indicates which slot(s) within a slot group are configured for multi-slot PDCCH monitoring. The first (leftmost, most significant) bit represents the first slot in the slot group, the second bit represents the second slot in the slot group, and so on. A bit set to '1' indicates that the corresponding slot is configured for multi-slot PDCCH monitoring (see TS 38.213, clause 10).
monitoringSymbolsWithinSlot
The first symbol(s) for PDCCH monitoring in the slots configured for (multi-slot) PDCCH monitoring (see monitoringSlotPeriodicityAndOffset and duration). The most significant (left) bit represents the first OFDM in a slot, and the second most significant (left) bit represents the second OFDM symbol in a slot and so on. The bit(s) set to one identify the first OFDM symbol(s) of the control resource set within a slot. If the cyclic prefix of the BWP is set to extended CP, the last two bits within the bit string shall be ignored by the UE or IAB-MT.
For DCI format 2_0, the first one symbol applies if the duration of CORESET (in the IE ControlResourceSet) identified by controlResourceSet/d indicates 3 symbols, the first two symbols apply if the duration of CORESET identified by controlResourceSet/d indicates 2 symbols, and the first three symbols apply if the duration of CORESET identified by controlResourceSet/d indicates 1 symbol.
See TS 38.213 [13], clause 10.
For IAB-MT: For DCI format \( 2 \_0 \) or DCI format \( 2 \_5 \), the first one symbol applies if the duration of CORESET (in the IE ControlResourceSet) identified by controlResourceSet/d indicates 3 symbols, the first two symbols apply if the duration of CORESET identified by controlResourceSet/dindicates 2 symbols, and the first three symbols apply if the duration of CORESET identified by controlResourceSet/d indicates 1 symbol.
See TS 38.213 [13], clause 10.
nrofCandidates-CI
The number of PDCCH candidates specifically for format 2-4 for the configured aggregation level. If an aggregation level is absent, the UE does not search for any candidates with that aggregation level. The network configures only one aggregationLevel and the corresponding number of candidates (see TS 38.213 [13], clause 10.1).
nrofCandidates-PEI
The number of PDCCH candidates specifically for format 2-7 for the configured aggregation level.
nrofCandidates-SFI
The number of PDCCH candidates specifically for format 2-0 for the configured aggregation level. If an aggregation level is absent, the UE does not search for any candidates with that aggregation level. The network configures only one aggregationLevel and the corresponding number of candidates (see TS 38.213 [13], clause 11.1.1). For a search space configured with freqMonitorLocations-r16, only value ' n 1 ' is valid.

ETSI


--- Page 790  ---


3GPP TS 38.331 version 17.0.0 Release 17
789
ETSI TS 138331 V17.0.0 (2022-05)

nrofCandidates
Number of PDCCH candidates per aggregation level. The number of candidates and aggregation levels configured here applies to all formats unless a particular value is specified or a format-specific value is provided (see inside searchSpaceType). If configured in the SearchSpace of a cross carrier scheduled cell, this field determines the number of candidates and aggregation levels to be used on the linked scheduling cell (see TS 38.213 [13], clause 10).
searchSpaceGroupldList
List of search space group IDs which the search space is associated with. The network configures at most 2 search space groups per BWP where the group ID is either 0 or 1. If searchSpaceGroup/dList (i.e. without suffix) is included. The network configures at most 3 search space groups per BWP where the group ID is either 0,1 or 2 if searchSpaceGroup/dList-r17 is included. And if searchSpaceGroupldList-r17 is included, searchSpaceGroupldList (i.e. without suffix) is ignored.
searchSpaceld
Identity of the search space. SearchSpaceld \( =0 \) identifies the searchSpaceZero configured via PBCH (MIB) or ServingCellConfigCommon and may hence not be used in the SearchSpace IE. The searchSpaceld is unique among the BWPs of a Serving Cell. In case of cross carrier scheduling, search spaces with the same searchSpaceld in scheduled cell and scheduling cell are linked to each other. The UE applies the search space for the scheduled cell only if the DL BWPs in which the linked search spaces are configured in scheduling cell and scheduled cell are both active.
For an IAB-MT, the search space defines how/where to search for PDCCH candidates for an IAB-MT:each search space is associated with one ControlResearchSet; for a scheduled cell in the case of cross carrier scheduling, except for nrofCandidates, all the optional fields are absent.
SearchSpaceLinkingld
This parameter is used to link two search spaces of same type. If two search spaces have the same SearchSpaceLinkingld UE assumes these search spaces are linked to PDCCH repetition REF. When PDCCH repetition is monitored in two linked search space (SS) sets, the UE does not expect a third monitored SS set to be linked with any of the two linked SS sets. The two linked SS sets have the same SS set type (USS/CSS). The two linked SS sets have the same DCI formats to monitor. For intra-slot PDCCH repetition: The two SS sets should have the same periodicity and offset (monitoringSlotPeriodicityAndOffset), and the same duration. For linking monitoring occasions across the two SS sets that exist in the same slot: The two SS sets have the same number of monitoring occasions within a slot and n-th monitoring occasion of one SS set is linked to \( n \)-th monitoring occasion of the other SS set. The following SS sets cannot be linked with another SS set for PDCCH repetition: SS set 0, searchSpaceSIB1, searchSpaceOtherSystem Information, pagingSearchSpace, ra-SearchSpace, searchSpaceBroadcast, peiSearchSpace, and sdt-SearchSpace. SS set configured by recoverySearchSpaceld cannot be linked to another SS set for PDCCH repetition. When a scheduled serving cell is configured to be cross-carrier scheduled by a scheduling serving cell, two PDCCH candidates (with the same AL and candidate index associated with the scheduled serving cell) are linked only if the corresponding two SS sets in the scheduling serving cell are linked and two SS sets in the scheduled serving cell with the same SS set IDs are also linked.
searchSpaceType
Indicates whether this is a common search space (present) or a UE specific search space as well as DCI formats to monitor for.
ue-Specific
Configures this search space as UE specific search space (USS). The UE monitors the DCI format with CRC scrambled by C-RNTI, CS-RNTI (if configured), and SP-CSI-RNTI (if configured)

ETSI


--- Page 791  ---


3GPP TS 38.331 version 17.0.0 Release 17
790
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline Setup & This field is mandatory present upon creation of a new SearchSpace. It is optionally present, Need M, otherwise. \\
\hline Setup2 & This field is mandatory present when a new SearchSpace is set up, if the same SearchSpace ID is not included in searchSpaces ToAddModListExt-r16 of the parent IE with the field searchSpaceType-r16 or searchSpaceType-r17 included. Otherwise it is optionally present, Need M. \\
\hline Setup3 & This field is mandatory present when a new SearchSpace is set up, if the same SearchSpace ID is not included in searchSpaces ToAddModListExt (without suffix) of the parent IE with the field searchSpaceType (without suffix) included. Otherwise it is optionally present, Need M. \\
\hline Setup4 & This field is mandatory present upon creation of a new SearchSpace if monitoringSlotPeriodicityAndOffset-r17 is not included. It is optionally present, Need M, otherwise. \\
\hline Setup5 & This field is mandatory present upon creation of a new SearchSpace if monitoringSlotPeriodicityAndOffset (without suffix) is not included. It is optionally present, Need M, otherwise. \\
\hline SetupOnly & This field is mandatory present upon creation of a new SearchSpace. It is absent, Need M, otherwise. \\
\hline SetupOnly2 & \begin{tabular}{l}
In PDCCH-Config, the field is optionally present upon creation of a new SearchSpace and absent, Need M upon reconfiguration of an existing SearchSpace. \\
In PDCCH-ConfigCommon, the field is absent.
\end{tabular} \\
\hline
\end{tabular}
- SearchSpaceld

The IE SearchSpaceld is used to identify Search Spaces. The ID space is used across the BWPs of a Serving Cell. The search space with the SearchSpaceld \( =0 \) identifies the search space configured via PBCH (MIB) and in ServingCellConfigCommon (searchSpaceZero). The number of Search Spaces per BWP is limited to 10 including the common and UE specific Search Spaces.

SearchSpaceld information element
-- ASNISTART
-- TAG-SEARCHSPACEID-START

SearchSpaceId : : INTEGER (O. maxNrofSearchSpaces-1)
-- TAG-SEARCHSPACEID-STOP
-- ASNISTOP
- SearchSpaceZero

The IE SearchSpaceZero is used to configure SearchSpace\#0 of the initial BWP (see TS 38.213 [13], clause 13).
SearchSpaceZero information element
-- ASNISTART
-- TAG-SEARCHSPACEZERO-START

SearchSpaceZero ::= INTEGER (0.15)

ETSI


--- Page 792  ---


3GPP TS 38.331 version 17.0.0 Release 17
791
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-SEARCHSPACEZERO-STOP
-- ASNISTOP
- SecurityAlgorithmConfig

The IE SecurityAlgorithmConfig is used to configure AS integrity protection algorithm and AS ciphering algorithm for SRBs and DRBs.
SecurityAIgorithmConfig information element
```
-- ASNISTART
-- TAG-SECURITYALGORITHMCONFIG-START
SecurityAlgorithmConfig ::= SEQUENCE {
    cipheringAlgorithm
    CipheringAlgorithm,
    ...
}
IntegrityProtAlgorithm ::= ENUMERATED {
            nia0, nial, nia2, nia3, spare4, spare3,
            spare2, sparel, ...}
CipheringAlgorithm ::=
        ENUMERATED \
            s spare4, spare3,
-- TAG-SECURITYALGORITHMCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SecurityAlgorithmConfig field descriptions \\
\hline \begin{tabular}{l}
cipheringAlgorithm \\
Indicates the ciphering algorithm to be used for SRBs and DRBs, as specified in TS 33.501 [11]. The algorithms nea0-nea3 are identical to the LTE algorithms eea0-3. The algorithms configured for all bearers using master key shall be the same, and the algorithms configured for all bearers using secondary key, if any, shall be the same. If UE is connected to E-UTRA/EPC, this field indicates the ciphering algorithm to be used for RBs configured with NR PDCP, as specified in TS 33.501 [11].
\end{tabular} \\
\hline \begin{tabular}{l}
integrityProtAlgorithm \\
Indicates the integrity protection algorithm to be used for SRBs and DRBs, as specified in TS 33.501 [11]. The algorithms niaO-nia3 are identical to the E-UTRA algorithms eia \( 0-3 \). The algorithms configured for all bearers using master key shall be the same and the algorithms configured for all bearers using secondary key, if any, shall be the same. The network does not configure nia \( O \) except for unauthenticated emergency sessions for unauthenticated UEs in LSM (limited service mode). \\
If UE is connected to E-UTRA/EPC, this field indicates the integrity protection algorithm to be used for SRBs configured with NR PDCP as specified in TS 33.501 [11], and DRBs configured with integrity protection as specified in TS 33.401 [30]. The network does not configure nia 0 for SRB3.
\end{tabular} \\
\hline
\end{tabular}
- SemiStaticChannelAccessConfig

The IE SemiStaticChannelAccessConfig is used to configure channel access parameters when the network is operating in semi-static channel access mode (see clause 4.3 TS 37.213 [48].

ETSI


--- Page 793  ---


3GPP TS 38.331 version 17.0.0 Release 17
792
ETSI TS 138331 V17.0.0 (2022-05)

SemiStaticChannelAccessConfig information element
```
-- ASNISTART
-- TAG-SEMISTATICCHANNELACCESSCONFIG-START
SemiStaticChannelAccessConfig-rl6 := SEQUENCE {
    period.
}
-- TAG-SEMISTATICCHANNELACCESSCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SemiStaticChannelAccessConfig field descriptions \\
\hline \begin{tabular}{l}
period \\
Indicates the periodicity of the semi-static channel access mode (see TS 37.213 [48], clause 4.3). Value ms1 corresponds to 1 ms , value ms2 corresponds to 2 ms , value ms2dot5 corresponds to 2.5 ms , and so on.
\end{tabular} \\
\hline
\end{tabular}
- SemiStaticChannelAccessConfigUE

The IE SemiStaticChannelAccessConfigUE is used to configure channel access parameters for UE initiated semi-static channel access.
SemiStaticChanne/AccessConfigUE information element
```
-- ASNISTART
-- TAG-SEMISTATICCHANNELACCESSCONFIGUE-START
SemiStaticChannelAccessConfigUE-rl7 ::= SEQUENCE {
    periodUE-rl7
    offset ENUMERATED {msl, ms2, ms2dot5, ms4, ms5, msl0, spare2, sparel},
}
-- TAG-SEMISTATICCHANNELACCESSCONEIGUE-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SemiStaticChannelAccessConfigUE field descriptions \\
\hline \begin{tabular}{l}
periodUE \\
Indicates the period of a channel occupancy that the UE can initiate as described in TS 37.213 [48], clause 4.3. Value ms1 corresponds to 1 ms , value ms2 corresponds to 2 ms , value ms 2 dot5 corresponds to 2.5 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
offsetUE \\
Indicates the number of symbols from the beginning of the even indexed radio frame to the start of the first period within that radio frame that the UE can initiate a channel occupancy (see TS 37.213 [48], clause 4.3), based on the smallest SCS among the configured SCSs in the serving cell. The offset duration indicated by this field is less than the period duration indicated by periodUE. The maximum value is 279,559 and 1119 for 15,30 and 60 kHz subcarrier spacing, respectively.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 794  ---


3GPP TS 38.331 version 17.0.0 Release 17
793
ETSI TS 138331 V17.0.0 (2022-05)
- Sensor-LocationInfo

The IE Sensor-LocationInfo is used by the UE to provide sensor information.
Sensor-Locationinfo information element
```
-- ASNISTART
-- TAG-SENSORLOCATIONINFO-START
Sensor-LocationInfo-rl6 ::= SEQUENCE [
    sensor-MeasurementInformation-rl6 OCTET STRING OPTIONAL,
    sensor-MotionInformation-rl6 OCTET STRING OPTIONAL,
    ...
}
-- TAG-SENSORLOCATIONINFO-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline Sensor-Locationinfo field descriptions \\
\hline \begin{tabular}{l}
sensor-Measurementinformation \\
This field provides barometric pressure measurements as Sensor-Measurement/nformation defined in TS 37.355 [49]. The first/leftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline \begin{tabular}{l}
sensor-Motioninformation \\
This field provides motion sensor measurements as Sensor-Motion/nformation defined in TS 37.355 [49]. The firstfleftmost bit of the first octet contains the most significant bit.
\end{tabular} \\
\hline
\end{tabular}
- ServCellIndex

The IE ServCellIndex concerns a short identity, used to uniquely identify a serving cell (i.e. the PCell, the PSCell or an SCell) across the cell groups. Value 0 applies for the PCell, while the SCellIndex that has previously been assigned applies for SCells.

ServCellindex information element
```
-- ASNISTART
-- TAG-SERVCELLINDEX-START
ServCellIndex ::= INTEGER (O..maxNrofServingCells-1)
-- TAG-SERVCELLINDEX-STOP
-- ASNISTOP
```


ETSI


--- Page 795  ---


3GPP TS 38.331 version 17.0.0 Release 17
794
ETSI TS 138331 V17.0.0 (2022-05)

ServingCellConfig
The IE ServingCellConfig is used to configure (add or modify) the UE with a serving cell, which may be the SpCell or an SCell of an MCG or SCG. The parameters herein are mostly UE specific but partly also cell specific (e.g. in additionally configured bandwidth parts). Reconfiguration between a PUCCH and PUCCHless SCell is only supported using an SCell release and add.

ServingCel/Config information element
```
-- ASNISTART
-- TAG-SERVINGCELLCONFIG-START
ServingCellConfig ::= SEQUENCE \
    tdd-UL-DL-ConfigurationDedicated TDD-UL-DL-ConfigDedicated.
    initialDownlinkBWP BWP-DownlinkDedicated.
    downlinkBWP-ToReleaseList SEQUENCE (SIZE (l..maxNrofBWPs)) OF BWP-Id
    downlinkBWP-ToAddModList
    firstActiveDownlinkBWP-Id
    bwp-InactivityTimer ENUMERATED {ms2, ms3, ms4, ms5, ms6, ms8, msl0, ms20, ms30,
                ms 40, ms50, ms60, ms80, ms100, ms200, ms300, ms500,
                ms750, msl280, ms1920, ms2560, sparel0, spare9, spare8,
                spare7, spare6, spare5, spare4, spare3, spare2, sparel } OPTIONAL, --Need R
    defaultDownlinkBWP-Id BWP-Id.
    uplinkConfig UplinkConfig
    supplementaryUplink UplinkConfig
    pdcch-ServingCellConfig SetupRelease { PDCCH-ServingCellConfig}
    pdsch-ServingCellConfig SetupRelease { PDSCH-ServingCellConfig}
    csi-MeasConfig SetupRelease { CSI-MeasConfig }
    sCellDeactivationTimer ENUMERATED (ms20, ms40, ms80, ms160, ms200, ms240,
                    ms320, ms400, ms480, ms520, ms640, ms720,
                    ms840, ms1280, spare2, sparel} OPTIONAL, -- Cond ServingCellWithoutPUCCH
```

```
    tag-Id TAG-Id,
    dumnyl ENUMERATED {enabled}
    pathlossReferenceLinking ENUMERATED {spCell, sCell}
```

```
    ...;
    [ [
```

```
    ]],
    [ [
```

```
    ca-SlotOffset-rl6 CHOICE \
        refSCS15kHz INTEGER (-2..2),
        refSCS 30KHz INTEGER (-5..5),
        refSCS60KHz INTEGER (-10..10),
        refSCS120KHz INTEGER (-20..20)
    }
```


ETSI


--- Page 796  ---


3GPP TS 38.331 version 17.0.0 Release 17
795
ETSI TS 138331 V17.0.0 (2022-05)
```
    dummy2
    intraCellGuardBandsDL-List-rl6 SEQUENCE (SIZE (l..maxSCSs)) OF IntraCellGuardBandsPerSCS-rl6
    intraCellGuardBandsUL-List-rl6 SEQUENCE (SIZE (l..maxSCSs)) OF IntraCellGuardBandsPerSCS-rl6
    csi-RS-ValidationWithDCI-r16 ENUMERATED {enabled}
    lte-CRS-PatternListl-rl6 SetupRelease { LTE-CRS-PatternList-rl6}
    lte-CRS-PatternList2-rl6 SetupRelease { LTE-CRS-PatternList-rl6}
    crs-RateMatch-PerCORESETPoolIndex-rl6 ENUMERATED {enabled}
    enableTwoDefaultTCI-States-rl6 ENUMERATED {enabled}
    enableDefaultTCI-StatePerCoresetPoolIndex-r16 ENUMERATED {enabled}
    enableBeamSwitchTiming-rl6 ENUMERATED {true}
    cbg-TxDiffTBsProcessingTypel-rl6 ENUMERATED {enabled}
    cbg-TxDiffTBsProcessingType2-r16 ENUMERATED {enabled}
    ]],
    []
```

```
    ]],
    [ [
```

```
    nrofHARQ-BundlingGroups-rl7 ENUMERATED {nl, n2, n4}
    fdmed-ReceptionMulticast-rl7
    moreThanOneNackOnlyMode-rl7 ENUMERATED {model, mode2}
    tci-Info-rl7 TCI-Info
    ]]
}
UplinkConfig ::= SEQUENCE \
    initialUplinkBWP BWP-UplinkDedicated
    uplinkBWP-ToReleaseList SEQUENCE (SIZE (l..maxNrofBWPs)) OF BWP-Id
    uplinkBWP-ToAddModList SEQUENCE (SIZE (l..maxNrofBWPs)) OF BWP-Uplink
    firstActiveUplinkBWP-Id BWP-Id.
    pusch-ServingCellConfig SetupRelease { PUSCH-ServingCellConfig}
```

```
    ...;
    powerBoostPi2BPSK BOOLEAN
    OPTIONAL, -- Need. M
```

```
    ]],
```

```
    enableDefaultBeamPL-ForPUCCH-r16 ENUMERATED {enabled}
    enableDefaultBeamPL-ForSRS-r16 ENUMERATED {enabled}
    uplinkTxSwitching-rl6 SetupRelease { UplinkTxSwitching-rl6}
```

```
    ] ]
}
```


ETSI


--- Page 797  ---


3GPP TS 38.331 version 17.0.0 Release 17
796
ETSI TS 138331 V17.0.0 (2022-05)
```
DummyJ ::= SEQUENCE \
    maxEnergyDetectionThreshold-r16 INTEGER(-85..-52),
    energyDetectionThresholdOffset-r16 INTEGER (-20..-13),
    ul-toDL-COT-SharingED-Threshold-rl6 INTEGER (-85..-52)
    absenceOfAnyOtherTechnology-rl6 ENUMERATED {true}
}
ChannelAccessConfig-rl6 ::= SEQUENCE {
    energyDetectionConfig-rl6 CHOICE {
        maxEnergyDetectionThreshold-r16 INTEGER (-85..-52),
        energyDetectionThresholdOffset-rl6 INTEGER (-13.20)
    }
    ul-toDL-COT-SharingED-Threshold-rl6 INTEGER (-85..-52)
    absenceOfAnyOtherTechnology-rl6 ENUMERATED {true}
}
IntraCellGuardBandsPerSCS-rl6 ::= SEQUENCE [
    guardBandSCS-r16
    intraCellGuardBands-rl6 SEQUENCE (SIZE (1.4)) OF GuardBand-rl6
}
GuardBand-rl6 ::= SEQUENCE \
        startCRB-rl6 INTEGER (0..274),
        nrofCRBs-r16 INTEGER (0..15)
}
DormancyGroupID-r16 ::= INTEGER (0..4)
DormantBWP-Config-rl6::= SEQUENCE [
    dormantBWP-Id-rl6 BWP-Id
    withinActiveTimeConfig-rl6 SetupRelease { WithinActiveTimeConfig-rl6}
    outsideActiveTimeConfig-rl6 SetupRelease { OutsideActiveTimeConfig-rl6 }
}
WithinActiveTimeConfig-rl6 ::= SEQUENCE {
    firstWithinActiveTimeBWP-Id-r16 BWP-Id
    dormancyGroupWithinActiveTime-rl6 DormancyGroupID-rl6
}
OutsideActiveTimeConfig-rl6 ::= SEQUENCE [
    firstOutsideActiveTimeBWP-Id-rl6 BWP-Id
    dormancyGroupOutsideActiveTime-rl6 DormancyGroupID-rl6
}
UplinkTxSwitching-rl6 ::= SEQUENCE \
    uplinkTxSwitchingPeriodLocation-rl6 BOOLEAN,
    uplinkTxSwitchingCarrier-rl6 ENUMERATED {carrierl, carrier2}
}
-- TAG-SERVINGCELLCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 798  ---


3GPP TS 38.331 version 17.0.0 Release 17
797
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ChannelAccessConfig field descriptions \\
\hline \begin{tabular}{l}
absenceOfAnyOtherTechnology \\
Presence of this field indicates absence on a long term basis (e.g. by level of regulation) of any other technology sharing the carrier; absence of this field indicates the potential presence of any other technology sharing the carrier, as specified in TS 37.213[48] clauses 4.2.1 and 4.2.3.
\end{tabular} \\
\hline \begin{tabular}{l}
energyDetectionConfig \\
Indicates whether to use the maxEnergyDetectionThreshold or the energyDetectionThresholdOffset (see TS 37.213 [48], clause 4.2.3).
\end{tabular} \\
\hline \begin{tabular}{l}
energyDetectionThresholdOffset \\
Indicates the offset to the default maximum energy detection threshold value. Unit in dB. Value -13 corresponds to -13 dB , value -12 corresponds to -12 dB , and so on (i.e. in steps of 1dB) as specified in TS 37.213 [48], clause 4.2.3.
\end{tabular} \\
\hline \begin{tabular}{l}
maxEnergyDetectionThreshold \\
Indicates the absolute maximum energy detection threshold value. Unit in dBm. Value - 85 corresponds to -85 dBm , value - 84 corresponds to - 84 dBm , and so on (i.e. in steps of 1 dBm ) as specified in TS 37.213 [48], clause 4.2.3.
\end{tabular} \\
\hline \begin{tabular}{l}
ul-toDL-COT-SharingED-Threshold \\
Maximum energy detection threshold that the UE should use to share channel occupancy with gNB for DL transmission as specified in TS 37.213 [48], clause 4.1.3 for downlink channel access and clause 4.2.3 for uplink channel access. This field is not applicable in semi-static channel access mode.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 799  ---


3GPP TS 38.331 version 17.0.0 Release 17
798
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ServingCellConfig field descriptions \\
\hline \begin{tabular}{l}
additionalPCIList \\
List of timing information for the additional SSB with different PCI than serving cell PCI .
\end{tabular} \\
\hline \begin{tabular}{l}
bwp-InactivityTimer \\
The duration in ms after which the UE falls back to the default Bandwidth Part (see TS 38.321 [3], clause 5.15). When the network releases the timer configuration, the UE stops the timer without switching to the default BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
ca-SlotOffset \\
Slot offset between the primary cell (PCell/PSCell) and the SCell in unaligned frame boundary with slot alignment and partial SFN alignment inter-band CA. Based on this field, the UE determines the time offset of the SCell as specified in clause 4.5 of TS 38.211 [16]. The granularity of this field is determined by the reference SCS for the slot offset (i.e. the maximum of PCell/PSCell lowest SCS among all the configured SCSs in DLUL SCS-SpecificCarrierList in ServingCellConfigCommon or \\
ServingCellConfigCommonSIB and this serving cell's lowest SCS among all the configured SCSs in DLUL SCS-SpecificCarrierList in ServingCellConfigCommon or ServingCellConfigCommonSIB). \\
The Network configures at most single non-zero offset duration in ms (independent on SCS) among CCs in the unaligned CA configuration. If the field is absent, the UE applies the value of 0 . The slot offset value can only be changed with SCell release and add.
\end{tabular} \\
\hline \begin{tabular}{l}
cbg-TxDiffTBsProcessingType1, cbg-TxDiffTBsProcessingType2 \\
Indicates whether processing types 1 and 2 based CBG based operation is enabled according to Rel-16 UE capabilities.
\end{tabular} \\
\hline \begin{tabular}{l}
channelAccessConfig \\
List of parameters used for access procedures of operation with shared spectrum channel access (see TS 37.213 [48).
\end{tabular} \\
\hline \begin{tabular}{l}
channelAccessMode2 \\
If present, this field indicates that the UE shall apply channel access mode procedures for operation with shared spectrum channel access in accordance with TS 37.213 [48], clause 4.4 for FR2-2. If absent, the UE does not apply these channel access procedures. \\
Overwrites the corresponding field in ServingCellConfigCommon or ServingCellConfigCommonSIB for this serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
crossCarrierSchedulingConfig \\
Indicates whether this serving cell is cross-carrier scheduled by another serving cell or whether it cross-carrier schedules another serving cell. If the field other is configured for an SpCell (i.e., the SpCell is cross-carrier scheduled by another serving cell), the SpCell can be additionally scheduled by the PDCCH on the SpCell.
\end{tabular} \\
\hline \begin{tabular}{l}
crs-RateMatch-PerCORESETPoolindex \\
Indicates how UE performs rate matching when both lte-CRS-PatternList1-r16 and Ite-CRS-PatternList2-r16 are configured as specified in TS 38.214 [19], clause 5.1.4.2.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-RS-ValidationWithDCI \\
Indicates how the UE performs periodic and semi-persistent CSI-RS reception in a slot. The presence of this field indicates that the UE uses DCI detection to validate whether to receive CSI-RS (see TS 38.213 [13], clause 11.1).
\end{tabular} \\
\hline \begin{tabular}{l}
defauitDownlinkBWP-id \\
The initial bandwidth part is referred to by BWP-Id \( =0 \). ID of the downlink bandwidth part to be used upon expiry of the BWP inactivity timer. This field is UE specific. When the field is absent the UE uses the initial BWP as default BWP. (see TS 38.213 [13], clause 12 and TS 38.321 [3], clause 5.15).
\end{tabular} \\
\hline \begin{tabular}{l}
directiona/CollisionHandling \\
Indicates that this serving cell is using directional collision handling between a reference and other cell(s) for half-duplex operation in TDD CA with same SCS as specified in TS 38.213 [13], clause 11.1. The half-duplex operation only applies within the same frequency range and cell group. \\
For the IAB-MT, it also indicates that this serving cell is using directional collision handling between a reference and other cell(s) for half-duplex operation in TDD NR-DC with same SCS within same cell group or cross different cell groups. \\
The network only configures this field for TDD serving cells that are using the same SCS.
\end{tabular} \\
\hline \begin{tabular}{l}
dormantBWP-Config \\
The dormant BWP configuration for an SCell. This field can be configured only for a (non-PUCCH) SCell.
\end{tabular} \\
\hline \begin{tabular}{l}
downlinkBWP-ToAddModList \\
List of additional downlink bandwidth parts to be added or modified. (see TS 38.213 [13], clause 12).
\end{tabular} \\
\hline \begin{tabular}{l}
downlinkBWP-ToReleaseList \\
List of additional downlink bandwidth parts to be released. (see TS 38.213 [13], clause 12).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 800  ---


3GPP TS 38.331 version 17.0.0 Release 17
799
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
downlinkChannelBW-PerSCS-List \\
A set of UE specific channel bandwidth and location configurations for different subcarrier spacings (numerologies). Defined in relation to Point A. The UE uses the configuration provided in this field only for the purpose of channel bandwidth and location determination. If absent, UE uses the configuration indicated in scsSpecificCarrierList in DownlinkConfigCommon / DownlinkConfigCommonS/B. Network only configures channel bandwidth that corresponds to the channel bandwidth values defined in TS 38.101-1 [15] and TS 38.101-2 [39].
\end{tabular} \\
\hline \begin{tabular}{l}
dummy1, dummy 2 \\
This field is not used in the specification. If received it shall be ignored by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
enableBeamSwitchTiming \\
Indicates the aperiodic CSI-RS triggering with beam switching triggering behaviour as defined in clause 5.2.1.5.1 of TS 38.214 [19].
\end{tabular} \\
\hline \begin{tabular}{l}
enableDefauItTCI-StatePerCoresetPoollndex \\
Presence of this field indicates the UE shall follow the release 16 behavior of default TCI state per CORESETPoolindex when the UE is configured by higher layer parameter PDCCH-Config that contains two different values of CORESETPoolIndex in ControlResourceSet is enabled.
\end{tabular} \\
\hline \begin{tabular}{l}
enableTwo Defau/tTCI-States \\
Presence of this field indicates the UE shall follow the release 16 behavior of two default TCI states for PDSCH when at least one TCI codepoint is mapped to two TCI states is enabled
\end{tabular} \\
\hline \begin{tabular}{l}
fomed-ReceptionMulticast \\
Indicates the Type-1 HARQ codebook generation as specified in TS 38.213 [13], clause 9.1.2.1.
\end{tabular} \\
\hline \begin{tabular}{l}
firstActiveDowniinkBWP-Id \\
If configured for an SpCell, this field contains the ID of the DL BWP to be activated or to be used for RLM, BFD and measurements if included in an RRCReconfiguration message contained in an NR or E-UTRA RRC message indicating that the SCG is deactivated, upon performing the RRC (re-)configuration. If the field is absent, the RRC (re)configuration does not impose a BWP switch. If the field is absent for the PSCell at SCG deactivation, the UE considers the previously activated DL BWP as the BWP to be used for RLM, BFD and measurements. If the field is absent for the PSCell at SCG activation, the DL BWP to be activated is the DL BWP previously to be used for RLM, BFD and measurements. \\
If configured for an SCell, this field contains the ID of the downlink bandwidth part to be used upon activation of an SCell. The initial bandwidth part is referred to by BWP-Id = 0. \\
Upon reconfiguration with reconfigurationWithSync, the network sets the firstActiveDownlinkBWP-Id and firstActiveUplinkBWP-Id to the same value.
\end{tabular} \\
\hline \begin{tabular}{l}
initialDownlinkBWP \\
The dedicated (UE-specific) configuration for the initial downlink bandwidth-part (i.e. DL BWP\#0). If any of the optional IEs are configured within this IE, the UE considers the BWP\#0 to be an RRC configured BWP (from UE capability viewpoint). Otherwise, the UE does not consider the BWP\#0 as an RRC configured BWP (from UE capability viewpoint). Network always configures the UE with a value for this field if no other BWPs are configured. NOTE1
\end{tabular} \\
\hline \begin{tabular}{l}
intraCellGuardBandsDL-List, intraCellGuardBandsUL-List \\
List of intra-cell guard bands in a serving cell for operation with shared spectrum channel access. If not configured, the guard bands are defined according to 38.101-1 [15], see TS 38.214 [19], clause 7. For operation in licensed spectrum, this field is absent, and no UE action is required.
\end{tabular} \\
\hline \begin{tabular}{l}
Ite-CRS-PatternList1 \\
A list of LTE CRS patterns around which the UE shall do rate matching for PDSCH. The LTE CRS patterns in this list shall be non-overlapping in frequency. The network does not configure this field and Ite-CRS-ToMatchAround simultaneously.
\end{tabular} \\
\hline \begin{tabular}{l}
Ite-CRS-PatternList2 \\
A list of LTE CRS patterns around which the UE shall do rate matching for PDSCH scheduled with a DCI detected on a CORESET with CORESETPoolIndex configured with 1. This list is configured only if CORESETPoollndex configured with 1. The first LTE CRS pattern in this list shall be fully overlapping in frequency with the first LTE CRS pattern in lte-CRS-PatternList1, The second LTE CRS pattern in this list shall be fully overlapping in frequency with the second LTE CRS pattern in Ite-CRS-PatternList1, and so on. Network configures this field only if the field /te-CRS-ToMatchAround is not configured and there is at least one ControlResourceSet in one DL BWP of this serving cell with coresetPoollndex set to 1.
\end{tabular} \\
\hline \begin{tabular}{l}
Ite-CRS-ToMatchAround \\
Parameters to determine an LTE CRS pattern that the UE shall rate match around.
\end{tabular} \\
\hline \begin{tabular}{l}
nr-di-PRS-PDC-info \\
Configures the DL PRS for propagation delay compensation. When configured, the UE measures the UE Rx-Tx time difference based on the reference signals configured in this field.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 801  ---


3GPP TS 38.331 version 17.0.0 Release 17
800
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
nrofHARQ-BundlingGroups \\
Indicates the number of HARQ bundling groups for type2 HARQ-ACK codebook.
\end{tabular} \\
\hline \begin{tabular}{l}
pathlossReferenceLinking \\
Indicates whether UE shall apply as pathloss reference either the downlink of SpCell (PCell for MCG or PSCell for SCG) or of SCell that corresponds with this uplink (see TS 38.213 [13], clause 7).
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-ServingCellConfig \\
PDSCH related parameters that are not BWP-specific.
\end{tabular} \\
\hline \begin{tabular}{l}
rateMatchPatternToAddModList \\
Resources patterns which the UE should rate match PDSCH around. The UE rate matches around the union of all resources indicated in the rate match patterns. Rate match patterns defined here on cell level apply only to PDSCH of the same numerology. See TS 38.214 [19], clause 5.1.4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
sCellDeactivationTimer \\
SCell deactivation timer in TS 38.321 [3]. If the field is absent, the UE applies the value infinity.
\end{tabular} \\
\hline \begin{tabular}{l}
semiStaticChannelAccessConfigUE \\
When this field is configured and when channelAccessMode-r16 (see IE ServingCellConfigCommon and IE ServingCellConfigCommonSIB) is configured to semiStatic, the UE operates in semi-static channel access mode and can initiate a channel occupancy periodically (see TS 37.213 [48], Clause 4.3). \\
The period can be configured independently from period configured in SemiStaticChannelAccessConfig-r16 if the UE indicates the corresponding capability. Otherwise, the periodicity configured by periodUE-r17 is an integer multiple of or an integter factor of the periodicity indicated by period in SemiStaticChannelAccessConfig-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellMO \\
measObjectld of the MeasObjectNR in MeasConfig which is associated to the serving cell. For this MeasObjectNR, the following relationship applies between this MeasObjectNR and frequency/nfoDL in ServingCellConfigCommon of the serving cell: if ssbFrequency is configured, its value is the same as the absoluteFrequencySSB and if csi-rs-ResourceConfigMobility is configured, the value of its subcarrierSpacing is present in one entry of the scs-SpecificCarrierList, csi-RS-CellListMobility includes an entry corresponding to the serving cell (with celld equal to physCelld in ServingCellConfigCommon) and the frequency range indicated by the csi-rs-MeasurementBW of the entry in csi-RS-CellListMobility is included in the frequency range indicated by in the entry of the scs-SpecificCarrierList.
\end{tabular} \\
\hline \begin{tabular}{l}
supplementaryUplink \\
Network may configure this field only when supplementaryUplinkConfig is configured in ServingCellConfigCommon or supplementaryUplink is configured in ServingCellConfigCommonSIB.
\end{tabular} \\
\hline \begin{tabular}{l}
supplementaryUplinkRelease \\
If this field is included, the UE shall release the uplink configuration configured by supplementaryUplink. The network only includes either supplementaryUplinkRelease or supplementaryUplink at a time.
\end{tabular} \\
\hline \begin{tabular}{l}
tag-ld \\
Timing Advance Group ID, as specified in TS 38.321 [3], which this cell belongs to.
\end{tabular} \\
\hline \begin{tabular}{l}
tci-Info \\
If configured for an SCell, or if configured for the PSCell when the SCG is being activated upon the reception of the containing message, the UE shall consider the indicated TCI states as the activated TCI states for PDCCH/PDSCH reception on this serving cell. \\
If configured for the PSCell when the SCG is indicated as deactivated in the containing message: \\
- the UE shall consider the indicated TCI states as the TCI states to be activated for PDCCH/PDSCH reception upon a later SCG activation in which tci-Info is absent \\
- if bfd-and-RLM is configured and no RS is configured in RadioLinkMonitoringConfig for RLM, respectively for BFD, the UE shall use the indicated TCI states for PDCCH as RS for RLM, respectively for BFD. \\
When this field is absent for the PSCell and the SCG is being deactivated: \\
- the UE shall consider the previously activated TCI states as the TCI states to be activated for PDCCH/PDSCH reception upon a later SCG activation in which tci-Info is absent \\
- if bfd-and-RLM is configured and no RS is configured in RadioLinkMonitoringConfig for RLM, respectively for BFD, the UE shall use the previously activated TCI states for PDCCH as RS for RLM, respectively for BFD.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 802  ---


3GPP TS 38.331 version 17.0.0 Release 17
801
ETSI TS 138331 V17.0.0 (2022-05)

tdd-UL-DL-ConfigurationDedicated-IAB-MT
Resource configuration per IAB-MT D/U/F overrides all symbols (with a limitation that effectively only flexible symbols can be overwritten in Rel-16) per slot over the number of slots as provided by TDD-UL-DL ConfigurationCommon.
unifiedtci-StateType
Indicates the unified TCI state type the UE is configured for this serving cell. The value "SeparateULDL" means this serving cell is configured with DLorJoint-TCIState for DL TCI state and UL-TCIState for UL TCI state. The value "JointULDL" means this serving cell is configured with DLorJoint-TCIState for joint TCI state for UL and DL operation.
uplinkConfig
Network may configure this field only when uplinkConfigCommon is configured in ServingCellConfigCommon or ServingCellConfigCommonSIB. Addition or release of this field can only be done upon SCell addition or release (respectively).
uplink-PowerContro/ToAddModList
Configures UL power control parameters for PUSCH, PUCCH and SRS when field unifiedtci-StateType is configured. Network does not configure other uplink power control parameters configured in IEs PUCCH-PowerControl, PUSCH-PowerControl or SRS-Config for the UE when this is configured.

ETSI


--- Page 803  ---


3GPP TS 38.331 version 17.0.0 Release 17
802
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UplinkConfig field descriptions \\
\hline \begin{tabular}{l}
carrierSwitching \\
Includes parameters for configuration of carrier based SRS switching (see TS 38.214 [19], clause 6.2.1.3.
\end{tabular} \\
\hline \begin{tabular}{l}
enableDefauitBeamPL-ForPUSCH0-0, enableDefaultBeamPL-ForPUCCH, enableDefaultBeamPL-ForSRS \\
When the parameter is present, UE derives the spatial relation and the corresponding pathloss reference Rs as specified in 38.213, clauses 7.1.1, 7.2.1, 7.3.1 and 9.2.2. The network only configures these parameters for FR2.
\end{tabular} \\
\hline \begin{tabular}{l}
enablePL-RS-UpdateForPUSCH-SRS \\
When this parameter is present, the Rel-16 feature of MAC CE based pathloss RS updates for PUSCH/SRS is enabled. Network only configures this parameter when the UE is configured with sri-PUSCH-PowerControl. If this field is not configured, network configures at most 4 pathloss RS resources for PUSCH/PUCCH/SRS transmissions per BWP, not including pathloss RS resources for SRS transmissions for positioning. (See TS 38.213 [13], clause 7).
\end{tabular} \\
\hline \begin{tabular}{l}
firstActiveUplinkBWP-Id \\
If configured for an SpCell, this field contains the ID of the UL BWP to be activated upon performing the RRC (re-)configuration. If the field is absent, the RRC (re-)configuration does not impose a BWP switch. \\
If configured for an SCell, this field contains the ID of the uplink bandwidth part to be used upon activation of an SCell. The initial bandwidth part is referred to by BandiwdthPartld = 0.
\end{tabular} \\
\hline \begin{tabular}{l}
initialUplinkBWP \\
The dedicated (UE-specific) configuration for the initial uplink bandwidth-part (i.e. UL BWP\#0). If any of the optional IEs are configured within this IE as part of the IE uplinkConfig, the UE considers the BWP\#0 to be an RRC configured BWP (from UE capability viewpoint). Otherwise, the UE does not consider the BWP\#0 as an RRC configured BWP (from UE capability viewpoint). Network always configures the UE with a value for this field if no other BWPs are configured. NOTE1
\end{tabular} \\
\hline \begin{tabular}{l}
moreThanOneNackOnlyMode-r17 \\
Indicates the mode of supporting more than one NACK-only feedback in the same PUCCH transmission. Mode 1 is UE multiplexing the HARQ-ACK bits by transforming NACK-only into ACK/NACK HARQ bits. Mode 2 is UE transmitting a specific sequence or a PUCCH transmission corresponding the combination more than one NACK-only HARQ feedback. If absent, UE uses the mode2 for mulicast CFR if configured.
\end{tabular} \\
\hline \begin{tabular}{l}
mpr-PowerBoost-FR2 \\
Indicates whether UE is allowed to boost uplink transmission power by suspending in-band emission (IBE) requirements as specified in TS 38.101-2 [39]. Network only configures this field for FR2 serving cells.
\end{tabular} \\
\hline \begin{tabular}{l}
powerBoostPi2BPSK \\
If this field is set to true, the UE determines the maximum output power for PUCCH/PUSCH transmissions that use pi/2 BPSK modulation according to TS 38.101-1 [15], clause 6.2.4.
\end{tabular} \\
\hline \begin{tabular}{l}
pusch-ServingCellConfig \\
PUSCH related parameters that are not BWP-specific.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkBWP-ToAddModList \\
The additional bandwidth parts for uplink to be added or modified. In case of TDD uplink- and downlink BWP with the same bandwidthPart/d are considered as a BWP pair and must have the same center frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkBWP-ToReleaseList \\
The additional bandwidth parts for uplink to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkChannelBW-PerSCS-List \\
A set of UE specific channel bandwidth and location configurations for different subcarrier spacings (numerologies). Defined in relation to Point A. The UE uses the configuration provided in this field only for the purpose of channel bandwidth and location determination. If absent, UE uses the configuration indicated in scsSpecificCarrierList in UplinkConfigCommon / UplinkConfigCommonS/B. Network only configures channel bandwidth that corresponds to the channel bandwidth values defined in TS 38.101-1 [15] and TS 38.101-2 [39].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 804  ---


3GPP TS 38.331 version 17.0.0 Release 17
803
ETSI TS 138331 V17.0.0 (2022-05)

uplinkTxSwitchingPeriodLocation
Indicates whether the location of UL Tx switching period is configured in this uplink carrier in case of inter-band UL CA, SUL, or (NG)EN-DC, as specified in TS 38.101-1 [15] and TS 38.101-3 [34].
In case of (NG)EN-DC, network always configures this field to TRUE for NR carrier (i.e. with (NG)EN-DC, the UL switching period always occurs on the NR carrier).
In case of inter-band UL CA or SUL, for dynamic uplink Tx switching between 2 bands with 2 uplink carriers or 3 uplink carriers as defined in TS 38.101-1 [15], network configures this field to TRUE for the uplink carrier(s) on one band and configures this field to FALSE for the uplink carrier(s) on the other band. This field is set to the same value for the carriers on the same band.
uplinkTxSwitchingCarrier
Indicates that the configured carrier is carrier1 or carrier2 for dynamic uplink Tx switching, as defined in TS 38.101-1 [15] and TS 38.101-3 [34]. In case of (NG)EN-DC, network always configures the NR carrier as carrier 2.
In case of inter-band UL CA or SUL, for dynamic uplink Tx switching between 2 bands with 2 uplink carriers or 3 uplink carriers as defined in TS 38.101-1 [15], network configures the uplink carrier(s) on one band as carrier 1 and the uplink carrier(s) on the other band as carrier 2 . This field is set to the same value for the carriers on the same band.

\begin{tabular}{|l|}
\hline DormantBWP-Config field descriptions \\
\hline \begin{tabular}{l}
dormancyGroupWithinActiveTime \\
This field contains the ID of an SCell group for Dormancy within active time, to which this SCell belongs. The use of the Dormancy within active time SCell groups is specified in TS 38.213 [13].
\end{tabular} \\
\hline \begin{tabular}{l}
dormancyGroupOutsideActiveTime \\
This field contains the ID of an SCell group for Dormancy outside active time, to which this SCell belongs. The use of the Dormancy outside active time SCell groups is specified in TS 38.213 [13].
\end{tabular} \\
\hline \begin{tabular}{l}
dormantBWP-Id \\
This field contains the ID of the downlink bandwidth part to be used as dormant BWP. If this field is configured, its value is different from defaultDownilikBWP-ld, and at least one of the withinActive TimeConfig and outsideActive TimeConfig should be configured.
\end{tabular} \\
\hline \begin{tabular}{l}
firstOutsideActiveTimeBWP-Id \\
This field contains the ID of the downlink bandwidth part to be activated when receiving a DCI indication for SCell dormancy outside active time.
\end{tabular} \\
\hline \begin{tabular}{l}
firs tWithinActive TimeBWP-Id \\
This field contains the ID of the downlink bandwidth part to be activated when receiving a DCI indication for SCell dormancy within active time.
\end{tabular} \\
\hline \begin{tabular}{l}
outsideActiveTimeConfig \\
This field contains the configuration to be used for SCell dormancy outside active time, as specified in TS 38.213 [13]. The field can only be configured when the cell group the SCell belongs to is configured with dcp-Config.
\end{tabular} \\
\hline \begin{tabular}{l}
withinActiveTimeConfig \\
This field contains the configuration to be used for SCell dormancy within active time, as specified in TS 38.213 [13].
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline GuardBand field descriptions \\
\hline \begin{tabular}{l}
startCRB \\
Indicates the starting RB of the guard band.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofCRB \\
Indicates the length of the guard band in RBs. When set to 0 , zero-size guard band is used.
\end{tabular} \\
\hline
\end{tabular}

NOTE 1: If the dedicated part of initial UL/DL BWP configuration is absent, the initial BWP can be used but with some limitations. For example, changing to another BWP requires RRCReconfiguration since DCI format 1_0 doesn't support DCI-based switching.

ETSI


--- Page 805  ---


3GPP TS 38.331 version 17.0.0 Release 17
804
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline AsyncCA & This field is mandatory present for SCells whose slot offset between the SpCell is not 0 . Otherwise it is absent, Need S. \\
\hline MeasObject & This field is mandatory present for the SpCell if the UE has a measConfig, and it is optionally present, Need M, for SCells. \\
\hline SCellOnly & This field is optionally present, Need R, for SCells. It is absent otherwise. \\
\hline ServingCellWithoutPUCCH & This field is optionally present, Need S, for SCells except PUCCH SCells. It is absent otherwise. \\
\hline SyncAndCellAdd & \begin{tabular}{l}
This field is mandatory present for a SpCell upon reconfiguration with reconfigurationWithSync and upon RRCSetup/RRCResume. \\
The field is optionally present for an SpCell, Need N, upon reconfiguration without reconfigurationWithSync. The field is mandatory present for an SCell upon addition, and absent for SCell in other cases, Need M.
\end{tabular} \\
\hline TCI_Info & \begin{tabular}{l}
This field is optional Need N for SCells if sCellState is configured, otherwise it is absent. This field is optional Need S for the PSCell when the SCG is indicated as deactivated or is being activated, otherwise it is absent. \\
This field is absent for the PCell.
\end{tabular} \\
\hline TDD & This field is optionally present, Need R, for TDD cells. It is absent otherwise. \\
\hline TDD_/AB & For IAB-MT, this field is optionally present, Need R, for TDD cells. It is absent otherwise. \\
\hline
\end{tabular}
- ServingCellConfigCommon

The IE ServingCellConfigCommon is used to configure cell specific parameters of a UE's serving cell. The IE contains parameters which a UE would typically acquire from SSB, MIB or SIBs when accessing the cell from IDLE. With this IE, the network provides this information in dedicated signalling when configuring a UE with a SCells or with an additional cell group (SCG). It also provides it for SpCells (MCG and SCG) upon reconfiguration with sync.

ServingCel/ConfigCommon information element
-- ASNISTART
-- TAG-SERVINGCELLCONEIGCOMMON-START

ServingCellConfigCommon : :=
physCellId.
downlinkConfigCommon
uplinkConfigCommon
supplementaryUplinkConfig
n-TimingAdvanceOffset
ssb-PositionsInBurst
shortBitmap
mediumBitmap
longBitmap
\}
ssb-periodicityServingCell
dmrs-TypeA-Position
lte-CRS-ToMatchAround.
rateMatchPatternToAddModList
rateMatchPatternToReleaseList
ssbSubcarrierSpacing
tdd-UL-DL-ConfigurationCommon
ss-PBCH-BlockPower
⋯'
[ [

SEQUENCE 1
PhysCellId OPTIONAL, -- Cond HOAndServCellAdd,

INTEGER (-60..50),

DownlinkConfigCommon
UplinkConfigCommon
UplinkConfigCommon
ENUMERATED \{ nO, n25600, n39936\}
CHOICE [
BIT STRING (SIZE (4)),
BIT STRING (SIZE (8)),
BIT STRING (SIZE (64))
OPTIONAL, -- Cond AbsFreqSSB
ENUMERATED \{ms5, msl0, ms20, ms40, ms80, msl60, spare2, sparel\} OPTIONAL, -- Need S
ENUMERATED \{pos2, pos3\},
SetupRelease \{ RateMatchPatternLTE-CRS \} OPTIONAL, -- Need M
SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPattern OPTIONAL, -- Need N
SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPatternId OPTIONAL, -- Need N
SubcarrierSpacing OPTIONAL, -- Cond HOAndServCellWithSSB
TDD-UL-DL-ConfigCommon OPTIONAL, -- Cond. TDD
OPTIONAL, -- Cond HOAndServCellAdd.
OPTIONAL, -- Need. M
OPTIONAL, -- Need. S
OPTIONAL, -- Need. S
    BIT STRING (SIZE (4)),
        BIT STRING (SIZE (8)),
BIT STRING (SIZE (64))
            OPTIONAL, -- Cond AbsFreqSSB
OPTIONAL, -- Need S
PTIONAL, -- Need M
PTIONAL, -- Need. N
OPTIONAL, -- Need N
OPTIONAL, -- Cond HOAndServCellwithSSB
OPTIONAL, -- Cond TDD

ETSI


--- Page 806  ---


3GPP TS 38.331 version 17.0.0 Release 17
805
ETSI TS 138331 V17.0.0 (2022-05)
```
    channelAccessMode-rl6
        dynamic
        semiStatic
    }
    discoveryBurstWindowLength-rl6
    ssb-PositionQCL-rl6
    highSpeedConfig-rl6
    ]],
    [ [
    highSpeedConfig-vl700
    channelAccessMode2-rl7
    discoveryBurstWindowLength-rl7
    highSpeedConfigFR2-rl7
    uplinkConfigCommon-vl700
    ]]
}
-- TAG-SERVINGCELLCONFIGCOMMON-STOP
-- ASNISTOP
```

```
CHOICE l
    NULL,
    SemiStaticChannelAccessConfig-rl6
    ENOMERATED {ms0dot5, msl, ms2, ms3, ms4, ms5}
    SSB-PositionQCL-Relation-rl6
    HighSpeedConfig-rl6
    CE \
    SemiStaticChannelAccessConfig-rl6
    HighSpeedConfig-rl6
```

HighSpeedConfig-vl700
ENUMERATED \{enabled\}
ENUMERATED \{ms0dotl25, ms0dot25, ms0dot5, ms0dot75, msl, msldot25\}
HighSpeedConfigFR2-rl7
UplinkConfigCommon-vl700
            OPTIONAL, -- Cond SharedSpectrum
    OPTIONAL, -- Need R
    OPTIONAL, -- Cond SharedSpectrum
    OPTIONAL -- Need R
    OPTIONAL, -- Need R
OPTIONAL, -- Cond SharedSpectrum2
OPTIONAL, -- Need R
OPTIONAL, -- Need R
OPTIONAL -- Need R

ETSI


--- Page 807  ---


3GPP TS 38.331 version 17.0.0 Release 17
806
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ServingCellConfigCommon field descriptions \\
\hline \begin{tabular}{l}
channelAccessMode \\
If present, this field indicates which channel access procedures to apply for operation with shared spectrum channel access as defined in TS 37.213[48]. If the field is configured as "semiStatic", the UE shall apply the channel access procedures for semi-static channel occupancy as described in clause 4.3 in TS 37.213. If the field is configured as "dynamic", the UE shall apply the channel access procedures in TS 37.213, with the exception of clause 4.3 of TS 37.213.
\end{tabular} \\
\hline \begin{tabular}{l}
channelAccessMode2 \\
If present ('enabled'), the UE shall apply channel access mode procedures for operation with shared spectrum channel access in accordance with TS 37.213 [48], clause 4.4 for FR2-2. If absent, the UE shall not apply any channel access procedure.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-TypeA-Position \\
Position of (first) DM-RS for downlink (see TS 38.211 [16], clause 7.4.1.1.1) and uplink (TS 38.211 [16], clause 6.4.1.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
downlinkConfigCommon \\
The common downlink configuration of the serving cell, including the frequency information configuration and the initial downlink BWP common configuration. The parameters provided herein should match the parameters configured by MIB and SIB1 (if provided) of the serving cell, with the exception of controlResourceSetZero and searchSpaceZero which can be configured in ServingCellConfigCommon even if MIB indicates that they are absent.
\end{tabular} \\
\hline \begin{tabular}{l}
discoveryBurstWindowLength \\
Indicates the window length of the discovery burst in ms (see TS 37.213 [48]). The field discoveryBurstWindowLength-r17 is applicable to SCS 480 kHz and SCS 960 kHz .
\end{tabular} \\
\hline \begin{tabular}{l}
longBitmap \\
Bitmap when maximum number of SS/PBCH blocks per half frame equals to 64 as defined in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
Ite-CRS-ToMatchAround \\
Parameters to determine an LTE CRS pattern that the UE shall rate match around.
\end{tabular} \\
\hline \begin{tabular}{l}
mediumBitmap \\
Bitmap when maximum number of SS/PBCH blocks per half frame equals to 8 as defined in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
\( n \)-TimingAdvanceOffset \\
The N_TA-Offset to be applied for all uplink transmissions on this serving cell. If the field is absent, the UE applies the value defined for the duplex mode and frequency range of this serving cell. See TS 38.133 [14], table 7.1.2-2.
\end{tabular} \\
\hline \begin{tabular}{l}
rateMatchPatternToAddModList \\
Resources patterns which the UE should rate match PDSCH around. The UE rate matches around the union of all resources indicated in the rate match patterns. Rate match patterns defined here on cell level apply only to PDSCH of the same numerology (see TS 38.214 [19], clause 5.1.4,1).
\end{tabular} \\
\hline \begin{tabular}{l}
shortBitmap \\
Bitmap when maximum number of SS/PBCH blocks per half frame equals to 4 as defined in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
ss-PBCH-BlockPower \\
Average EPRE of the resources elements that carry secondary synchronization signals in dBm that the NW used for SSB transmission, see TS 38.213 [13], clause 7.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-periodicityServingCell \\
The SSB periodicity in ms for the rate matching purpose. If the field is absent, the UE applies the value ms5. (see TS 38.213 [13], clause 4.1)
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionQCL \\
Indicates the QCL relation between SSB positions for this serving cell as specified in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 808  ---


3GPP TS 38.331 version 17.0.0 Release 17
807
ETSI TS 138331 V17.0.0 (2022-05)

ssb-PositionsinBurst
For operation in licensed spectrum, indicates the time domain positions of the transmitted SS-blocks in a half frame with SS/PBCH blocks as defined in TS 38.213 [13], clause 4.1. The first/leftmost bit corresponds to SS/PBCH block index 0 , the second bit corresponds to SS/PBCH block index 1, and so on. Value 0 in the bitmap indicates that the corresponding SS/PBCH block is not transmitted while value 1 indicates that the corresponding SS/PBCH block is transmitted. The network configures the same pattern in this field as in the corresponding field in ServingCellConfigCommonSIB.
For operation with shared spectrum channel access, the UE assumes that one or more SS/PBCH blocks indicated by ssb-PositionsinBurst may be transmitted within the discovery burst transmission window and have candidate SS/PBCH blocks indexes corresponding to SS/PBCH block indexes provided by ssb-Positions/nBurst (see TS 38.213 [13], clause 4.1). If the k -th bit of ssb-PositionsinBurst is set to 1 , the UE assumes that one or more SS/PBCH blocks within the discovery burst transmission window with candidate SS/PBCH block indexes corresponding to SS/PBCH block index equal to \( \mathrm{k}-1 \) may be transmitted; if the kt -th bit is set to 0 , the UE assumes that the corresponding SS/PBCH block(s) are not transmitted. The k -th bit is set to 0 , where \( \mathrm{k}> \) ssb-PositionQCL and the number of actually transmitted SS/PBCH blocks is not larger than the number of 1's in the bitmap. The network configures the same pattern in this field as in the corresponding field in ServingCellConfigCommonS/B. For operation with shared spectrum channel access in FR1, only mediumBitmap is used, and for FR2-2, longBitmap is used.
ssbSubcarrierSpacing
Subcarrier spacing of SSB.
Only the following values are applicable depending on the used frequency:
FR1: 15 or 30 kHz
FR2-1: 120 or 240 kHz
FR2-2: 120,480 , or 960 kHz
supplementaryUplinkConfig
The network configures this field only if uplinkConfigCommon is configured. If this field is absent, the UE shall release the supplementaryUplinkConfig and the supplementaryUplink configured in ServingCellConfig of this serving cell, if configured.
tdd-UL-DL-ConfigurationCommon
A cell-specific TDD UL/DL configuration, see TS 38.213 [13], clause 11.1.

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline AbsFreqSSB & The field is absent when absoluteFrequencySSB in frequencyInfoDL is absent, otherwise the field is mandatory present. \\
\hline HOAndServCellAdd & This field is mandatory present upon SpCell change and upon serving cell (PSCell/SCell) addition. Otherwise, the field is absent. \\
\hline HOAndServCellWithSSB & This field is mandatory present upon SpCell change and upon serving cell (SCell with SSB or PSCell) addition. Otherwise, the field is absent. \\
\hline SharedSpectrum & This field is mandatory present if this cell operates with shared spectrum channel access in FR1. Otherwise, it is absent, Need R. \\
\hline SharedSpectrum2 & This field is optionally present if this cell operates with shared spectrum channel access in FR2-2. Otherwise, it is absent, Need R. \\
\hline TDD & The field is optionally present, Need R, for TDD cells; otherwise it is absent. \\
\hline
\end{tabular}
- ServingCellConfigCommonSIB

The IE ServingCellConfigCommonSIB is used to configure cell specific parameters of a UE's serving cell in SIB1.
ServingCel/ConfigCommonSIB information element

-- ASNISTART
-- TAG-SERVINGCELLCONFIGCOMMONSIB-START
ETSI


--- Page 809  ---


3GPP TS 38.331 version 17.0.0 Release 17
808
ETSI TS 138331 V17.0.0 (2022-05)
```
ServingCellConfigCommonSIB ::= SEQUENCE {
    downlinkConfigCommon
    uplinkConfigCommon UplinkConfigCommonSiB
    supplementaryUplink
    n-TimingAdvanceOffset
    ssb-PositionsInBurst
        inOneGroup
        groupPresence
    },
    ssb-PeriodicityServingCell ENUMERATED {ms5, msl0, ms20, ms40, ms80, msl60},
    tdd-UL-DL-ConfigurationCommon
    ss-PBCH-BlockPower
    ...,
    [ [
    channelAccessMode-rl6 CHOICE {
        dynamic
        semiStati
    }
    discoveryBurstWindowLength-rl6
    highSpeedConfig-rl6
    ]],
    [ [
    channelAccessMode2-rl7 ENUMERATED {enabled} OPTIONAL, -- Cond SharedSpectrum2
    discoveryBurstWindowLength-vl700
    highSpeedConfigfR2-r17
    uplinkConfigCommon-vl700
    ]]
}
-- TAG-SERVINGCELLCONFIGCOMMONSIB-STOP
-- ASNISTOP
```


ETSI


--- Page 810  ---


3GPP TS 38.331 version 17.0.0 Release 17
809
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline ServingCellConfigCommonSIB field descriptions \\
\hline \begin{tabular}{l}
channelAccessMode \\
If present, this field indicates which channel access procedures to apply for operation with shared spectrum channel access as defined in TS 37.213[48]. If the field is configured as "semiStatic", the UE shall apply the channel access procedures for semi-static channel occupancy as described in clause 4.3 in TS 37.213 . If the field is configured as "dynamic"t, the UE shall apply the channel access procedures in TS 37.213, with the exception of clause 4.3 of TS 37.213.
\end{tabular} \\
\hline \begin{tabular}{l}
channelAccessMode2 \\
If present ('enabled'), this field indicates that the UE shall apply channel access mode procedures for operation with shared spectrum channel access in accordance with TS 37.213 [48], clause 4.4 for FR2-2. If absent, the UE shall not apply any channel access procedure.
\end{tabular} \\
\hline \begin{tabular}{l}
discoveryBurstWindowLength \\
Indicates the window length of the discovery burst in ms (see TS 37.213 [48]). The field discoveryBurstWindowLength-v1700 is applicable to SCS 480 kHz and SCS 960 kHz .
\end{tabular} \\
\hline \begin{tabular}{l}
groupPresence \\
This field is present when maximum number of SS/PBCH blocks per half frame equals to 64 as defined in TS 38.213 [13], clause 4.1. The first/leftmost bit corresponds to the SS/PBCH index 0-7, the second bit corresponds to SS/PBCH block 8-15, and so on. Value 0 in the bitmap indicates that the SSBs according to inOneGroup are absent. Value 1 indicates that the SS/PBCH blocks are transmitted in accordance with inOneGroup.
\end{tabular} \\
\hline \begin{tabular}{l}
inOneGroup \\
When maximum number of SS/PBCH blocks per half frame equals to 4 as defined in TS 38.213 [13], clause 4.1, only the 4 leftmost bits are valid; the UE ignores the 4 rightmost bits. When maximum number of SS/PBCH blocks per half frame equals to 8 as defined in TS 38.213 [13], clause 4.1, all 8 bits are valid. The first/leftmost bit corresponds to SS/PBCH block index 0 , the second bit corresponds to SS/PBCH block index 1, and so on. When maximum number of SS/PBCH blocks per half frame equals to 64 as defined in TS 38.213 [13], clause 4.1, all 8 bit are valid; The first/ leftmost bit corresponds to the first SS/PBCH block index in the group (i.e., to SSB index 0, 8, and so on); the second bit corresponds to the second SS/PBCH block index in the group (i.e., to SSB index 1,9, and so on), and so on. Value 0 in the bitmap indicates that the corresponding SS/PBCH block is not transmitted while value 1 indicates that the corresponding SS/PBCH block is transmitted.
\end{tabular} \\
\hline \begin{tabular}{l}
\( n \)-TimingAdvanceOffset \\
The N_TA-Offset to be applied for random access on this serving cell. If the field is absent, the UE applies the value defined for the duplex mode and frequency range of this serving cell. See TS 38.133 [14], table 7.1.2-2.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionsinBurst \\
Time domain positions of the transmitted SS-blocks in an SS-burst as defined in TS 38.213 [13], clause 4.1. \\
For operation with shared spectrum channel access in FR1, only inOneGroup is used and the UE interprets this field same as mediumBitmap in ServingCellConfigCommon. The UE assumes that a bit in inOneGroup at position \( \mathrm{k}>N_{S S B}^{Q C L} \) is 0 , where \( N_{S S B}^{Q C L} \) is obtained from MIB as specified in TS 38.213 [13], clause 4.1. For operation with shared spectrum channel access in FR2-2, the m -th bit in groupPresence is set to 0 for \( \mathrm{m}>N_{S S B}^{Q C L} / 8 \), where \( N_{S S B}^{Q C L} \) is obtained from MIB as specified in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
ss-PBCH-BlockPower \\
Average EPRE of the resources elements that carry secondary synchronization signals in dBm that the NW used for SSB transmission, see TS 38.213 [13], clause 7.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline FR2-Only & This field is mandatory present for an FR2 carrier frequency. It is absent otherwise and UE releases any configured value. \\
\hline SharedSpectrum & This field is mandatory present if this cell operates with shared spectrum channel access in FR1. Otherwise, it is absent, Need R. \\
\hline SharedSpectrum2 & This field is optionally present if this cell operates with shared spectrum channel access in FR2-2. Otherwise, it is absent, Need R. \\
\hline TDD & The field is optionally present, Need R, for TDD cells; otherwise it is absent. \\
\hline
\end{tabular}
- Shortl-RNTI-Value

The IE ShortI-RNTI-Value is used to identify the suspended UE context of a UE in RRC_INACTIVE using fewer bits compared to I-RNTI-Value.

ETSI


--- Page 811  ---


3GPP TS 38.331 version 17.0.0 Release 17
810
ETSI TS 138331 V17.0.0 (2022-05)

Shortl-RNTI-Value information element
```
-- ASNISTART
-- TAG-SHORTI-RNTI-VALUE-START
ShortI-RNTI-Value ::= BIT STRING (SIZE(24))
-- TAG-SHORTI-RNTI-VALUE-STOP
-- ASNISTOP
```

- ShortMAC-I

The IE ShortMAC-I is used to identify and verify the UE at RRC connection re-establishment. The 16 least significant bits of the MAC-I calculated using the AS security configuration of the source PCell, as specified in 5.3.7.4.

ShortMAC-I information element
```
-- ASNISTART
-- TAG-SHORTMAC-I-START
ShortMAC-I ::= BIT STRING (SIZE (16))
-- TAG-SHORTMAC-I-STOP
-- ASNISTOP
```

- SINR-Range

The IE SINR-Range specifies the value range used in SINR measurements and thresholds. For measurements, integer value for SINR measurements is according to Table 10.1.16.1-1 in TS 38.133 [14]. For thresholds, the actual value is (IE value -46 ) / 2 dB .

SINR-Range information element
```
-- ASNISTART
-- TAG-SINR-RANGE-START
SINR-Range ::= INTEGER(0..127)
-- TAG-SINR-RANGE-STOP
-- ASNISTOP
- SI-RequestConfig
```


The IE SI-RequestConfig contains configuration for Msgl based SI request.

ETSI


--- Page 812  ---


3GPP TS 38.331 version 17.0.0 Release 17
811
ETSI TS 138331 V17.0.0 (2022-05)

S/-RequestConfig information element
```
-- ASNISTART
-- TAG-SI-REQUESTCONFIG-START
SI-RequestConfig ::=
    rach-OccasionsSI
        rach-ConfigSI
        ssb-perRACH-Occasion
    }
    si-RequestPeriod
    si-RequestResources
}
SI-RequestResources ::=
    ra-PreambleStartIndex
    ra-AssociationPeriodIndex
    ra-ssb-OccasionMaskIndex
}
-- ASNISTOP
-- TAG-SI-REQUESTCONFIG-STOP
```

```
SEQUENCE {
    SEQUENCE \
        RACH-ConfigGeneric,
        ENUMERATED {oneEighth, oneFourth, oneHalf, one, two, four, eight, sixteen}
            OPTIONAL, -- Need. R
    ENUMERATED [one, two, four, six, eight, ten, twelve, sixteen} OPTIONAL, -- Need R
    SEQUENCE (SIZE (1..maxSI-Message)) OF SI-RequestResources
SEQUENCE \
    INTEGER (0..63),
    INTEGER (0..15) OPTIONAL, -- Need. R
    INTEGER (0..15) OPTIONAL -- Need. R
```


\begin{tabular}{|l|}
\hline SI-RequestConfig field descriptions \\
\hline \begin{tabular}{l}
rach-OccasionsSI \\
Configuration of dedicated RACH Occasions for SI. If the field is absent, the UE uses the corresponding parameters configured in rach-ConfigCommon of the initial uplink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RequestPeriod \\
Periodicity of the Sl-Request configuration in number of association periods.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RequestResources \\
If there is only one entry in the list, the configuration is used for all SI messages for which si-BroadcastStatus is set to notBroadcasting. Otherwise the \( 1^{\text {st }} \) entry in the list corresponds to the first SI message in scheduling/nfoList for which si-BroadcastStatus is set to notBroadcasting, \( 2{ }^{\text {nd }} \) entry in the list corresponds to the second SI message in schedulinginfoList for which si-BroadcastStatus is set to notBroadcasting and so on. Change of si-RequestResources should not result in system information change notification.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SI-RequestResources field descriptions \\
\hline \begin{tabular}{l}
ra-AssociationPeriodindex \\
Index of the association period in the si-RequestPeriod in which the UE can send the SI request for SI message(s) corresponding to this Sl-RequestResources, using the preambles indicated by ra-PreambleStart/ndex and rach occasions indicated by ra-ssb-OccasionMaskindex.
\end{tabular} \\
\hline \begin{tabular}{l}
ra-PreambleStartindex \\
If N SSBs are associated with a RACH occasion, where \( \mathrm{N}>=1 \), for the i -th \( \mathrm{SSB}(\mathrm{i}=0, \ldots, \mathrm{~N}-1) \) the preamble with preamble index \( = \) ra-PreambleStartindex +i is used for SI request; For \( \mathrm{N}<1 \), the preamble with preamble index \( = \) ra-PreambleStartindex is used for SI request.
\end{tabular} \\
\hline
\end{tabular}
- SI-SchedulingInfo

The IE SI-SchedulingInfo contains information needed for acquisition of SI messages.

ETSI


--- Page 813  ---


3GPP TS 38.331 version 17.0.0 Release 17
812
ETSI TS 138331 V17.0.0 (2022-05)

Sl-Schedulinginfo information element
```
-- ASNISTART
-- TAG-SI-SCHEDULINGINFO-START
```


SEQUENCE 1

SEQUENCE 1

ENUMERATED [broadcasting, notBroadcasting], ENUMERATED \{rf8, rfl6, rf32, rf64, rfl28, rf256, rf5l2\}, SIB-Mapping

SEQUENCE 1

SEQUENCE 1
    f

SEQUENCE 1

CHOICE | ENUMERATED [sibTypel5, sibTypel6, sibTypel7, sibTypel8, sibTypel9, sibType20, sibType21,...\}, SEQUENCE [
ENUMERATED [posSibTypel-9, posSibTypel-10, posSibType2-24, posSibType2-25, posSibType6-4,
GNSS-ID-rl6 OPTIONAL, -- Need R
SBAS-ID-r16 OPTIONAL -- Need R
```
SI-SchedulingInfo ::=
    schedulingInfoList
    si-WindowLength
    si-RequestConfig
    si-RequestConfigSUL
    systemInformationAreaID
...
}
SchedulingInfo ::=
    si-BroadcastStatus
    si-Periodicity
    sib-MappingInfo
}
SI-SchedulingInfo-vl700 ::=
    schedulingInfoList2-rl7
}
SchedulingInfo2-rl7 ::=
    si-BroadcastStatus-rl7
    si-WindowPosition-rl7
    si-Periodicity-rl7
    sib-MappingInfo-rl7
}
SIB-Mapping ::= SEQUENCE (SIZE (1..maxSIB)) OF SIB-TypeInfo
SIB-Mapping-vl700 ::= SEQUENCE (SIZE (1..maxSIB)) OF SIB-TyPeInfo-vl700
SIB-TypeInfo ::= SEQUENCE \
    type
                            sibTypel0-v1610, sibTypell-v1610, sibTypel2-v1610, sibTypel3-vl610,
    valueTag
    areascope
}
SIB-TypeInfo-vl700 ::=
    sibType-rl7
        typel-rl7
        type2-rl7
            posSibType-rl7
posSibType6-5, posSibType6-6,...},
            encrypted-rl7 ENUMERATED [ true } OPTIONAL, -- Need R
            gnss-id-rl7
            sbas-id-rl7
        }
    },
    },
SEQUENCE (SIZE (1..maxSI-Message)) OF SchedulingInfo,
ENUMERATED {s5, s10, s20, s40, s80, s160, s320, s640, s1280},
SI-RequestConfig OPTIONAL, -- Cond MSG-1
SI-RequestConfig OPTIONAL, -- COND SUL-MSG-1
BIT STRING (SIZE (24)) OPTIONAL, -- Need R
SEQUENCE (SIZE (l..maxSI-Message)) OF SchedulingInfo2-rl7
ENUMERATED {broadcasting, notBroadcasting},
INTEGER (1..256),
ENUMERATED {rf8, rfl6, rf32, rf64, rfl28, rf256, rf5l2},
SIB-Mapping-vl700
sibTypel4-vl6l0, spare3, spare2, sparel,...},
    OPTIONAL, -- Cond SIB-TYPE
ENUMERATED {true} OPTIONAL -- Need. S
```


ETSI


--- Page 814  ---


3GPP TS 38.331 version 17.0.0 Release 17
813
ETSI TS 138331 V17.0.0 (2022-05)
```
    valueTag-rl7
    areaScope-rl7
```

\}
-- TAG-SI-SCHEDULINGINFO-STOP
-- ASNISTOP
```
INTEGER (0..31)
ENUMERATED {true}
```


OPTIONAL, -- Cond SIB-TYPE-POS
OPTIONAL -- Need S

\begin{tabular}{|l|}
\hline Schedulinginfo field descriptions \\
\hline \begin{tabular}{l}
areaScope \\
Indicates that a SIB is area specific. If the field is absent, the SIB is cell specific.
\end{tabular} \\
\hline \begin{tabular}{l}
si-BroadcastStatus \\
Indicates if the SI message is being broadcasted or not. Change of si-BroadcastStatus should not result in system information change notifications in Short Message transmitted with P-RNTI over DCI (see clause 6.5). The value of the indication is valid until the end of the BCCH modification period when set to broadcasting.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Periodicity \\
Periodicity of the SI-message in radio frames. Value rf8 corresponds to 8 radio frames, value ff16 corresponds to 16 radio frames, and so on.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SI-Schedulinginfo field descriptions \\
\hline \begin{tabular}{l}
si-RequestConfig \\
Configuration of Msg1 resources that the UE uses for requesting SI-messages for which si-BroadcastStatus is set to notBroadcasting.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RequestConfigSUL \\
Configuration of Msg1 resources that the UE uses for requesting SI-messages for which si-BroadcastStatus is set to notBroadcasting.
\end{tabular} \\
\hline \begin{tabular}{l}
si-WindowLength \\
The length of the SI scheduling window. Value \( s 5 \) corresponds to 5 slots, value \( s 10 \) corresponds to 10 slots and so on. The network always configures si-WindowLength to be shorter than or equal to the si-Periodicity.
\end{tabular} \\
\hline \begin{tabular}{l}
systeminformationArealD \\
Indicates the system information area that the cell belongs to, if any. Any SIB with areaScope within the SI is considered to belong to this system/nformationArea/D. The system InformationAreaID is unique within a PLMN/SNPN.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 815  ---


3GPP TS 38.331 version 17.0.0 Release 17
814
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline Schedulinginfo2 field descriptions \\
\hline \begin{tabular}{l}
encrypted \\
The presence of this field indicates that the pos-sib-type is encrypted as specified in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
gnss-id \\
The presence of this field indicates that the positioning SIB type is for a specific GNSS. Indicates a specific GNSS (see also TS 37.355 [49])
\end{tabular} \\
\hline \begin{tabular}{l}
posSibType \\
The posSIBs as defined in TS 37.355 [49] mapped to SI for scheduling using schedulinginfoList2.
\end{tabular} \\
\hline \begin{tabular}{l}
sbas-id \\
The presence of this field indicates that the positioning SIB type is for a specific SBAS. Indicates a specific SBAS (see also TS 37.355 [49]).
\end{tabular} \\
\hline \begin{tabular}{l}
si-WindowPosition \\
This field indicates the SI window position of the associated SI-message. The network provides si-WindowPosition in an ascending order, i.e. si-WindowPosition in the subsequent entry in scheduling/nfoList2 has always value higher than in the previous entry of schedulinginfoList2.
\end{tabular} \\
\hline \begin{tabular}{l}
sib-Mappinginfo \\
Indicates which SIBs or posSIBs are contained in the SI message.
\end{tabular} \\
\hline \begin{tabular}{l}
type1, type2 \\
The SIBs/posSIBs mapped to SI for scheduling using scheduling/nfoList2.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional presence & Explanation \\
\hline MSG-1 & The field is optionally present, Need R, if si-BroadcastStatus is set to notBroadcasting for any SI-message included in SchedulingInfo. It is absent otherwise. \\
\hline SIB-TYPE & The field is mandatory present if the SIB type is different from SIB6, SIB7 or SIB8. For SIB6, SIB7 and SIB8 it is absent. \\
\hline SIB-TYPE-POS & The field is mandatory present if the SIB type is type1. For type2 it is absent. \\
\hline SUL-MSG-1 & The field is optionally present, Need R, if supplementaryUplink is configured in ServingCellConfigCommonS/B and if si-BroadcastStatus is set to notBroadcasting for any SI-message included in SchedulingInfo. It is absent otherwise. \\
\hline
\end{tabular}
- SK-Counter

The IE \( S K \)-Counter is a counter used upon initial configuration of SN security for NR-DC and NE-DC, as well as upon refresh of S-KgNB or S-KenB based on the current or newly derived \( \mathrm{K}_{\mathrm{gNB}} \) during RRC Resume or RRC Reconfiguration, as defined in TS 33.501 [11].
-- ASNISTART
-- TAG-SKCOUNTER-START

SK-Counter : := INTEGER (0.65535)
-- TAG-SKCOUNTER-STOP
-- ASNISTOP
- SlotFormatCombinationsPerCell

The IE SlotFormatCombinationsPerCell is used to configure the SlotFormatCombinations applicable for one serving cell (see TS 38.213 [13], clause 11.1.1).

ETSI


--- Page 816  ---


3GPP TS 38.331 version 17.0.0 Release 17
815
ETSI TS 138331 V17.0.0 (2022-05)

SlotFormatCombinationsPerCel/information element
```
-- ASNISTART
-- TAG-SLOTFORMATCOMBINATIONSPERCELL-START
SlotFormatCombinationsPerCell := SEQUENCE {
    servingCellId.
    ServCellIndex,
    SubcarrierSpacing,
```

```
            OPTIONAL, -- Need. M
```

```
    ...;
    [ [
```

```
    ] ]
}
SlotFormatCombination ::= SEQUENCE {
    slotFormatCombinationId SlotFormatCombinationId,
    slotFormats SEQUENCE (SIZE (l..maxNrofSlotFormatsPerCombination)) OF INTEGER (0..255)
}
SlotFormatCombinationId := INTEGER (O..maxNrofSlotFormatCombinationsPerSet-l)
-- TAG-SLOTFORMATCOMBINATIONSPERCELL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SlotFormatCombination field descriptions \\
\hline \begin{tabular}{l}
slotFormatCombinationid \\
This ID is used in the DCI payload to dynamically select this SlotFormatCombination (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
slotFormats \\
Slot formats that occur in consecutive slots in time domain order as listed here (see TS 38.213 [13], clause 11.1.1 and TS 38.213 [13], clause 14 for IAB-MT).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 817  ---


3GPP TS 38.331 version 17.0.0 Release 17
816
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SlotFormatCombinationsPerCell field descriptions \\
\hline \begin{tabular}{l}
enableConfiguredUL \\
If configured, the UE is allowed to transmit uplink signals/channels (SRS, PUCCH, CG-PUSCH) in the set of symbols of the slot when the UE does not detect a DCI format 2 _ 0 providing a slot format for the set of symbols (see TS 38.213 [13], 11.1.1). This field is applicable only if cg-Retransmission Timer-r16 is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
positioninDCI \\
The (starting) position (bit) of the slotFormatCombinationId (SFI-Index) for this serving cell (servingCellId) within the DCI payload (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellid \\
The ID of the serving cell for which the slotFormatCombinations are applicable.
\end{tabular} \\
\hline \begin{tabular}{l}
slotFormatCombinations \\
A list with SlotFormatCombinations. Each SlotFormatCombination comprises of one or more SlotFormats (see TS 38.211 [16], clause 4.3.2). The total number of slotFormats in the slotFormatCombinations list does not exceed 512.
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierSpacing2 \\
Reference subcarrier spacing for a Slot Format Combination on an FDD or SUL cell (see TS 38.213 [13], clause 11.1.1). For FDD, subcarrierSpacing (SFI-scs) is the reference SCS for DL BWP and subcarrierSpacing2 (SFI-scs2) is the reference SCS for UL BWP. For SUL, subcarrierSpacing (SFI-scs) is the reference SCS for non-SUL carrier and subcarrierSpacing2 (SFI-scs2) is the reference SCS for SUL carrier. The network configures a value that is smaller than or equal to any SCS of configured BWPs of the serving cell that the command applies to. And the network configures a value that is smaller than or equal to the SCS of the serving cell which the UE monitors for SFI indications.
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierSpacing \\
Reference subcarrier spacing for this Slot Format Combination. The network configures a value that is smaller than or equal to any SCS of configured BWPs of the serving cell that the command applies to. And the network configures a value that is smaller than or equal to the SCS of the serving cell which the UE monitors for SFI indications (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline
\end{tabular}
- SlotFormatIndicator

The IE SlotFormatIndicator is used to configure monitoring a Group-Common-PDCCH for Slot-Format-Indicators (SFI).
SlotFormatindicator information element
```
-- ASNISTART
-- TAG-SLOTFORMATINDICATOR-START
SlotFormatIndicator ::= SEQUENCE {
    sfi-RNTI RNTI-Value,
    dci-PayloadSize INTEGER (1..maxSFI-DCI-PayloadSize),
    slotFormatCombToAddModList SEQUENCE (SIZE(l..maxNrofAggregatedCellsPerCellGroup)) OF SlotFormatCombinationsPerCell
```

```
    ...;
    [ [
```

```
    availableRB-SetsToReleaseList-rl6 SEQUENCE (SIZE(l..maxNrofAggregatedCellsPerCellGroup)) OF ServCellIndex
    switchTriggerToAddModList-rl6 SEQUENCE (SIZE(1..4)) OF SearchSpaceSwitchTrigger-rl6
    switchTriggerToReleaseList-rl6 SEQUENCE (SIZE(l..4)) OF ServCellIndex
```

```
    co-DurationsPerCellToReleaseList-rl6 SEQUENCE (SIZE(l..maxNrofAggregatedCellsPerCellGroup)) OF ServCellIndex
    ]],
    [ [
    switchTriggerToAddModListSizeExt-rl6 SEQUENCE (SIZE(l..maxNrofAggregatedCellsPerCellGroupMinus4-rl6)) OF
        SearchSpaceSwitchTrigger-rl6 OPTIONAL, -- Need N
```


ETSI


--- Page 818  ---


3GPP TS 38.331 version 17.0.0 Release 17
817
ETSI TS 138331 V17.0.0 (2022-05)
```
    switchTriggerToReleaseListSizeExt-rl6 SEQUENCE (SIZE(l.. maxNrofAggregatedCellsPerCellGroupMinus4-rl6)) OF
        ServCellIndex OPTIONAL -- Need N
    ] ]
}
CO-DurationsPerCell-rl6 ::= SEQUENCE {
    servingCellId-rl6 ServCellIndex,
    positionInDCI-r16 INTEGER(O..maxSEI-DCI-PayloadSize-1),
    subcarrierSpacing-rl6 SubcarrierSpacing,
    co-DurationList-rl6 SEQUENCE (SIZE(1..64)) OF CO-Duration-rl6
}
CO-Duration-r16 ::= INTEGER (0..1120)
AvailableRB-SetsPerCell-rl6 ::= SEQUENCE {
    servingCellId-rl6 ServCellIndex,
    positionInDCI-r16 INTEGER(O..maxSFI-DCI-PayloadSize-1)
}
SearchSpaceSwitchTrigger-rl6 ::= SEQUENCE {
    servingCellId-rl6 ServCellIndex,
    positionInDCI-r16 INTEGER(O..maxSFI-DCI-PayloadSize-1)
}
-- TAG-SLOTFORMATINDICATOR-STOP
-- ASN1STOP
```


ETSI


--- Page 819  ---


3GPP TS 38.331 version 17.0.0 Release 17
818
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SlotFormatindicator field descriptions \\
\hline \begin{tabular}{l}
availableRB-Sets ToAddModList \\
A list of AvailableRB-SetsPerCell objects (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
co-DurationsPerCellToAddModList \\
A list of CO-DurationPerCell objects. If not configured, the UE uses the slot format indicator (SFI), if available, to determine the channel occupancy duration (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
dci-PayloadSize \\
Total length of the DCI payload scrambled with SFI-RNTI (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
sfi-RNTI \\
RNTI used for SFI on the given cell (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
slotFormatCombToAddModList \\
A list of SlotFormatCombinations for the UE's serving cells (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
switch TriggerToAddModList, switch TriggerToAddModListSizeExt \\
A list of SearchSpaceSwitchTrigger objects. Each SearchSpaceSwitchTrigger object provides position in DCI of the bit field indicating search space switching flag for a serving cell or, if cellGroupsForSwitchList is configured, group of serving cells (see TS 38.213 [13], clause 10.4). If cellGroupsForSwitchList is configured, only one of the cells belonging to the same cell group is added/modified, and the configuration applies to all cells belonging to the cellGroupsForSwitchList (see TS 38.213 [13], clause 10.4). The network configures more than 4 SearchSpaceSwitchTrigger objects only if cellGroupsForSwitchList is not configured. The UE shall consider entries in switch TriggerToAddModList and in switchTriggerToAddModListSizeExt as a single list, i.e. an entry created using switchTriggerToAddModList can be modifed using switch TriggerToAddModListSizeExt and vice-versa.
\end{tabular} \\
\hline \begin{tabular}{l}
switch TriggerToReleaseModList, switch TriggerToReleaseListSizeExt \\
A list of SearchSpaceSwitchTriggers to be released. If cellGroupsForSwitchList is configured, the SearchSpaceSwitchTrigger is released for all serving cells belonging to the same CellGroupForSwitch. The UE shall consider entries in switch TriggerToReleaseList and in switch TriggerToReleaseListSizeExt as a single list, i.e. an entry created using switch TriggerToAddModList or switch TriggerToAddModListSizeExt can be deleted using switch TriggerToReleaseList or switchTriggerToReleaseListSizeExt.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline AvailableRB-SetsPerCell field descriptions \\
\hline \begin{tabular}{l}
positionInDCI \\
The (starting) position of the bits within DCI payload indicating the availability of the RB sets of a serving cell (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellid \\
The ID of the serving cell for which the configuration is applicable.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline CO-DurationsPerCell field descriptions \\
\hline \begin{tabular}{l}
co-DurationList \\
A list of Channel Occupancy duration in symbols.
\end{tabular} \\
\hline \begin{tabular}{l}
positionInDCI \\
Position in DCI of the bit field indicating Channel Occupancy duration for UE's serving cells (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellld \\
The ID of the serving cell for which the configuration is applicable.
\end{tabular} \\
\hline \begin{tabular}{l}
subcarrierSpacing \\
Reference subcarrier spacing for the list of Channel Occupancy durations (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 820  ---


3GPP TS 38.331 version 17.0.0 Release 17
819
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SearchSpaceSwitchTrigger field descriptions \\
\hline \begin{tabular}{l}
positioninDCI \\
The position of the bit within DCI payload containing a search space switching flag (see TS 38.213 [13], clause 11.1.1).
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellid \\
The ID of the serving cell for which the configuration is applicable or the group of serving cells as indicated by CellGroupsForSwitch-r16 containing this servingCelll.
\end{tabular} \\
\hline
\end{tabular}
- S-NSSAI

The IE S-NSSAI (Single Network Slice Selection Assistance Information) identifies a Network Slice end to end and comprises a slice/service type and a slice differentiator, see TS 23.003 [21].

S-NSSA/ information element
```
-- ASNISTART
-- TAG-S-NSSAI-START
S-NSSAI ::=
    sst
    sst-SD
}
-- TAG-S-NSSAI-STOP
-- ASNISTOP
```

CHOICE [

\begin{tabular}{|l|}
\hline S-NSSAl field descriptions \\
\hline \begin{tabular}{l}
sst \\
Indicates the S-NSSAI consisting of Slice/Service Type, see TS 23.003 [21].
\end{tabular} \\
\hline \begin{tabular}{l}
sst-SD \\
Indicates the S-NSSAI consisting of Slice/Service Type and Slice Differentiator, see TS 23.003 [21].
\end{tabular} \\
\hline
\end{tabular}
- SpeedStateScaleFactors

The IE SpeedStateScaleFactors concerns factors, to be applied when the UE is in medium or high speed state, used for scaling a mobility control related parameter.
SpeedStateScaleFactors information element
```
-- ASNISTART
-- TAG-SPEEDSTATESCALEFACTORS-START
SpeedStateScaleFactors ::=
    sf-Medium
    sf-High
}
-- TAG-SPEEDSTATESCALEFACTORS-STOP
```


ETSI


--- Page 821  ---


3GPP TS 38.331 version 17.0.0 Release 17
820
ETSI TS 138331 V17.0.0 (2022-05)
```
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SpeedStateScaleFactors field descriptions \\
\hline \begin{tabular}{l}
sf-High \\
The concerned mobility control related parameter is multiplied with this factor if the UE is in High Mobility state as defined in TS 38.304 [20]. Value oDot25 corresponds to 0.25, value oDot5 corresponds to 0.5 , oDot75 corresponds to 0.75 and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sf-Medium \\
The concerned mobility control related parameter is multiplied with this factor if the UE is in Medium Mobility state as defined in TS 38.304 [20]. Value oDot25 corresponds to 0.25 , value oDot5 corresponds to 0.5 , value oDot75 corresponds to 0.75 , and so on.
\end{tabular} \\
\hline
\end{tabular}
- SPS-Config

The IE SPS-Config is used to configure downlink semi-persistent transmission. Multiple Downlink SPS configurations may be configured in one BWP of a serving cell.
SPS-Config information element
```
-- ASNISTART
-- TAG-SPS-CONFIG-START
SPS-Config ::= SEQUENCE \
    periodicity
    nrofHARQ-Processes
    nlPUCCH-AN
    mcs-Table
    ...;
    [ [
    sps-ConfigIndex-rl6
    harq-ProcID-Offset-rl6
    periodicityExt-rl6
    harq-CodebookID-rl6
    pdsch-AggregationFactor-rl6
    ]],
    [ [
    sps-HARQ-Deferral-rl7 INTEGER (1..32)
    nlPUCCH-AN-PUCCHsSCell-rl7 PUCCH-ResourceId.
    periodicityExt-rl7 INTEGER (1.40960)
    nrofHARQ-ProcessesExt-rl7 INTEGER(9..32)
    harq-ProcID-Offset-vl700 INTEGER (16..31)
    ]]
}
-- TAG-SPS-CONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 822  ---


3GPP TS 38.331 version 17.0.0 Release 17
821
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SPS-Config field descriptions \\
\hline \begin{tabular}{l}
harq-CodebookID \\
Indicates the HARQ-ACK codebook index for the corresponding HARQ-ACK codebook for SPS PDSCH and ACK for SPS PDSCH release.
\end{tabular} \\
\hline \begin{tabular}{l}
harq-ProcID-Offset \\
Indicates the offset used in deriving the HARQ process IDs, see TS 38.321 [3], clause 5.3.1.
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-Table \\
Indicates the MCS table the UE shall use for DL SPS (see TS 38.214 [19],clause 5.1.3.1. If present, the UE shall use the MCS table of low-SE 64QAM table indicated in Table 5.1.3.1-3 of TS 38.214 [19]. If this field is absent and field mcs-table in PDSCH-Config is set to 'qam256' and the activating DCI is of format 1_1, the UE applies the 256QAM table indicated in Table 5.1.3.1-2 of TS 38.214 [19]. If this field is absent and the field mcs-Table-r17 in PDSCH-Config is set to 'qam 1024' and the activating DCI is format 1_1, the UE applies the 1024QAM table indicated in Table 5.1.3.1-4 of TS 38.214 [19]. Otherwise, the UE applies the non-low-SE 64QAM table indicated in Table 5.1.3.1-1 of TS 38.214 [19].
\end{tabular} \\
\hline \begin{tabular}{l}
n1PUCCH-AN \\
HARQ resource for PUCCH for DL SPS. The network configures the resource either as format0 or format1. The actual PUCCH-Resource is configured in PUCCH-Config and referred to by its ID. See TS 38.213 [13], clause 9.2.3.
\end{tabular} \\
\hline \begin{tabular}{l}
n1PUCCH-AN-PUCCHsSCell \\
HARQ resource for PUCCH on PUCCH switching SCell (sSCell) for DL SPS. The network configures the resource either as format 0 or format 1. The actual PUCCH-Resource is configured in PUCCH-Config of the PUCCH sSCell and referred to by its ID. See TS 38.213 [13], clause 9.2.3.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofHARQ-Processes, nrofHARQ-ProcessesExt \\
Number of configured HARQ processes for SPS DL (see TS 38.321 [3], clause 5.8.1). If UE is configured with nrofHARQ-ProcessesExt UE shall ignore nrofHARQ-Processes.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-AggregationFactor \\
Number of repetitions for SPS PDSCH (see TS 38.214 [19], clause 5.1.2.1). When the field is absent, the UE applies PDSCH aggregation factor of PDSCH-Config.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicity \\
Periodicity for DL SPS (see TS 38.214 [19] and TS 38.321 [3], clause 5.8.1).
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityExt \\
This field is used to calculate the periodicity for DL SPS (see TS 38.214 [19] and see TS 38.321 [3], clause 5,8.1). If this field is present, the field periodicity is ignored. \\
The following periodicities are supported depending on the configured subcarrier spacing [ms]:
\begin{tabular}{ll}
\( 15 \mathrm{kHz}: \) & periodicityExt, where periodicityExt has a value between 1 and 640 \\
\( 30 \mathrm{kHz}: \) & \( 0.5 \times \) periodicity Ext, where periodicity Ext has a value between 1 and 1280. \\
60 kHz with normal CP. & \( 0.25 \times \) periodicityExt, where periodicity Ext has a value between 1 and 2560. \\
60 kHz with ECP: & \( 0.25 \times \) periodicityExt, where periodicity Ext has a value between 1 and 2560. \\
\( 120 \mathrm{kHz}: \) & \( 0.125 \times \) periodicity Ext, where periodicity Ext has a value between 1 and 5120. \\
\( 480 \mathrm{kHz}: \) & \( 0.0625 \times \) periodicity Ext, where periodicity Ext has a value between 1 and 20480. \\
\( 960 \mathrm{kHz}: \) & \( 0.03125 \times \) periodicity Ext, where periodicity Ext has a value between 1 and 40960.
\end{tabular}
\end{tabular} \\
\hline \begin{tabular}{l}
sps-Configindex \\
Indicates the index of one of multiple SPS configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-HARQ-Deferral \\
Indicates the maximum number of slots or subslots the transmission of DL SPS HARQ-ACK in a slot or subslot can be deferred (see TS 38.213 [13], clause 9.2.5.4).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|c|l|}
\hline Conditional Presence & Explanation \\
\hline SPS-List & The field is mandatory present when included in sps-Config ToAddModList-r16, otherwise the field is absent. \\
\hline
\end{tabular}
- SPS-ConfigIndex

The IE SPS-ConfigIndex is used to indicate the index of one of multiple DL SPS configurations in one BWP.

ETSI


--- Page 823  ---


3GPP TS 38.331 version 17.0.0 Release 17
822
ETSI TS 138331 V17.0.0 (2022-05)

SPS-Configindex information element
```
-- ASNISTART
-- TAG-SPS-CONFIGINDEX-START
SPS-ConfigIndex-rl6 ::= INTEGER (O..maxNrofSPS-Config-l-rl6)
-- TAG-SPS-CONFIGINDEX-STOP
-- ASNISTOP
```

- SPS-PUCCH-AN

The IE SPS-PUCCH-AN is used to indicate a PUCCH resource for HARQ ACK and configure the corresponding maximum payload size for the PUCCH resource.
SPS-PUCCH-AN information element
```
-- ASNISTART
-- TAG-SPS-PUCCH-AN-START
SPS-PUCCH-AN-rl6 ::= SEQUENCE [
    sps-PUCCH-AN-ResourceID-r16 PUCCH-ResourceId,
    maxPayloadSize-rl6 INTEGER (4..256)
}
-- TAG-SPS-PUCCH-AN-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SPS-PUCCH-AN field descriptions \\
\hline \begin{tabular}{l}
maxPayloadSize \\
Indicates the maximum payload size for the corresponding PUCCH resource ID.
\end{tabular} \\
\hline \begin{tabular}{l}
sps-PUCCH-AN-ResourceID \\
Indicates the PUCCH resource ID
\end{tabular} \\
\hline
\end{tabular}
- SPS-PUCCH-AN-List

The IE SPS-PUCCH-AN-List is used to configure the list of PUCCH resources per HARQ ACK codebook
SPS-PUCCH-AN-List information element
```
-- ASNISTART
-- TAG-SPS-PUCCH-AN-LIST-START
SPS-PUCCH-AN-List-rl6 ::= SEQUENCE (SIZE(l.4)) OF SPS-PUCCH-AN-rl6
-- TAG-SPS-PUCCH-AN-LIST-STOP
```


ETSI


--- Page 824  ---


3GPP TS 38.331 version 17.0.0 Release 17
823
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP
- \( \quad \) SRB-Identity

The IE SRB-Identity is used to identify a Signalling Radio Bearer (SRB) used by a UE.
SRB-Identity information element
```
-- ASNISTART
-- TAG-SRB-IDENTITY-START
SRB-Identity ::= INTEGER (1..3)
SRB-Identity-vl700 ::= INTEGER (4)
-- TAG-SRB-IDENTITY-STOP
-- ASNISTOP
```

- SRS-CarrierSwitching

The IE SRS-CarrierSwitching is used to configure for SRS carrier switching when PUSCH is not configured and independent SRS power control from that of PUSCH.

SRS-CarrierSwitching information element
```
-- ASNISTART
-- TAG-SRS-CARRIERSWITCHING-START
```


SEQUENCE 1
```
SRS-CarrierSwitching ::=
    srs-SwitchFromServCellIndex
    srs-SwitchFromCarrier
    srs-TPC-PDCCH-Group
        typeA
        typeB
    }
    monitoringCells
    ...
}
SRS-TPC-PDCCH-Config ::=
    srs-CC-SetIndexlist
}
SRS-CC-SetIndex ::= SEQUENCE \
    cc-SetIndex
    cc-IndexInOnecc-Set
}
```

```
    INTEGER (0..31)
    ENOMERATED {sUL, nUL},
    CHOICE [
        SEQUENCE (SIZE (1..32)) OF SRS-TPC-PDCCH-CONFig,
        SRS-TPC-PDCCH-Config
    SEQUENCE (SIZE (1..maxNrofServingCells)) OF ServCellIndex
SEQUENCE \
    SEQUENCE (SIZE(1.4)) OF SRS-CC-SetIndex OPTIONAL -- Need M
    INTEGER (0..3)
    INTEGER (0.07)
    INTEGER (0..7) -- Need M
```


ETSI


--- Page 825  ---


3GPP TS 38.331 version 17.0.0 Release 17
824
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-SRS-CARRIERSWITCHING-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SRS-CC-Setindex field descriptions \\
\hline \begin{tabular}{l}
cc-IndexinOneCC-Set \\
Indicates the CC index in one CC set for Type A (see TS 38.212 [17], TS 38.213 [13], clause 7.3.1, 11.4). The network always includes this field when the srs-TPC-PDCCHGroup is set to typeA.
\end{tabular} \\
\hline \begin{tabular}{l}
cc-Setindex \\
Indicates the CC set index for Type A associated (see TS 38.212 [17], TS 38.213 [13], clause 7.3.1, 11.4). The network always includes this field when the srs-TPC-PDCCHGroup is set to typeA. The network does not configure this field to 3 in this release of specification.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SRS-CarrierSwitching field descriptions \\
\hline \begin{tabular}{l}
monitoringCells \\
A set of serving cells for monitoring PDCCH conveying SRS DCI format with CRC scrambled by TPC-SRS-RNTI (see TS 38.212 [17], TS 38.213 [13], clause 7.3.1, 11.3).
\end{tabular} \\
\hline \begin{tabular}{l}
srs-SwitchFromServCellindex \\
Indicates the serving cell whose UL transmission may be interrupted during SRS transmission on a PUSCH-less SCell. During SRS transmission on a PUSCH-less SCell, the UE may temporarily suspend the UL transmission on a serving cell with PUSCH in the same CG to allow the PUSCH-less SCell to transmit SRS. (see TS 38.214 [19], clause 6.2.1.3).
\end{tabular} \\
\hline \begin{tabular}{l}
srs-TPC-PDCCH-Group \\
Network configures the UE with either typeA-SRS-TPC-PDCCH-Group or typeB-SRS-TPC-PDCCH-Group, if any.
\end{tabular} \\
\hline \begin{tabular}{l}
typeA \\
Type A trigger configuration for SRS transmission on a PUSCH-less SCell (see TS 38.213 [13], clause 11.4). In this release, the network configures at most one entry (the first entry) of typeA, and the first entry corresponds to the serving cell in which the SRS-CarrierSwitching field is configured. SRS carrier switching to SUL carrier is not supported in this version of the specification.
\end{tabular} \\
\hline \begin{tabular}{l}
typeB \\
Type B trigger configuration for SRS transmission on a PUSCH-less SCell (see TS 38.213 [13], clause 11.4).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SRS-TPC-PDCCH-Config field descriptions \\
\hline \begin{tabular}{l}
srs-CC-Setindexlist \\
A list of pairs of [cc-SetIndex; cc-IndexInOneCC-Set] (see TS 38.212 [17], TS 38.213 [13], clause 7.3.1, 11.4). The network does not configure this field for typeB.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) SRS-Config

The IE SRS-Config is used to configure sounding reference signal transmissions. The configuration defines a list of SRS-Resources, a list of SRS-PosResources, a list of SRSPosResourceSets and a list of SRS-ResourceSets. Each resource set defines a set of SRS-Resources or SRS-PosResources. The network triggers the transmission of the set of SRS-Resources or SRS-PosResources using a configured aperiodicSRS-ResourceTrigger (L1 DCI).

SRS-Config information element
-- ASNISTART
-- TAG-SRS-CONEIG-START

ETSI


--- Page 826  ---


3GPP TS 38.331 version 17.0.0 Release 17
825
ETSI TS 138331 V17.0.0 (2022-05)
```
SRS-Config ::=
    srs-ResourceSetToReleaseList
    srs-ResourceSetToAddModList
    srs-ResourceToReleaseList
    srs-ResourceToAddModList
    tpc-Accumulation
    ...;
    [ [
    srs-RequestDCI-1-2-r16 INTEGER (1..2)
    srs-RequestDCI-0-2-r16 INTEGER (1..2)
    srs-ResourceSetToAddModListDCI-0-2-r16 SEQUENCE (SIZE(1..maxNrofSRS-ResourceSets)) OF SRS-ResourceSet
    OPTIONAL, -- Need N
```

```
                                OPTIONAL, -- Need. N
    srs-PosResourceSetToAddModList-r16
    srs-PosResourceToReleaseList-rl6
    SEQUENCE (SIAE(1..MAXNrofsRs-PosResources-r16)) sRs-PosResourceId-rl6
    ]],
    [ [
```

```
    ] ]
}
SRS-ResourceSet ::= SEQUENCE \
    srs-ResourceSetId
```

```
    resourceType CHOICE {
        aperiodic
```

```
            INTEGER (1..maxNrofSRS-TriggerStates-1),
            slotOffset INTEGER (1.32) OPTIONAL, -- Need. S
            ...;
            [ [
            aperiodicSRS-ResourceTriggerList SEQUENCE (SIZE(1..maxNrofSRS-TriggerStates-2))
                            OF INTEGER (1..maxNrofSRS-TriggerStates-1) OPTIONAL -- Need M
            ] ]
        },
        semi-persistent SEQUENCE \
            associatedCSI-RS
            ...
        },
        periodic
            assO SEQUENCE {
            ...
        }
    },
    usage ENUMERATED {beamManagement, codebook, nonCodebook, antennaSwitching},
```

```
    p0 INTEGER (-202..24)
    pathlossReferenceRS PathlossReferenceRS-Config
    srs-PowerControlAdjustmentStates
    ...;
    [ [
```


ETSI


--- Page 827  ---


3GPP TS 38.331 version 17.0.0 Release 17
826
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]],
    [ [
    usagePDC-rl7 ENUMERATED {true} OPTIONAL, -- Need. R
    availableSlotOffsetList-rl7 SEQUENCE (SIZE(l..4)) OF AvailableSlotOffset-rl7 OPTIONAL, -- Need R
    followUnifiedTCIstateSRS-rl7 ENUMERATED {enabled} OPTIONAL -- Need R
    ]]
}
AvailableSlotOffset-rl7 ::= INTEGER (0..7)
PathlossReferenceRS-Config ::= CHOICE [
    ssb-Index
    csi-RS-Index NZP-CSI-RS-ResourceId
}
PathlossReferenceRSList-rl6 ::= SEQUENCE (SIZE (l..maxNrofSRS-PathlossReferenceRS-rl6)) OF PathlossReferenceRS-rl6
PathlossReferenceRS-rl6 ::= SEQUENCE [
    srs-PathlossReferenceRS-Id-rl6
    pathlossReferenceRS-r16 PathlossReferenceRS-Config
}
SRS-PathlossReferenceRS-Id-rl6 ::= INTEGER (0..maxNrofSRS-PathlossReferenceRS-l-rl6)
SRS-PosResourceSet-rl6 ::= SEQUENCE {
    srs-PosResourceSetId-rl6
    SRS-PosResourceSetId-rl6,
            SEQUENCE (SIZE(l..MAXNrofSRS-ResourcesPerSet)) OF SRS-PosResourceId-rl6
    resourceType-rl6 CHOICE {
        aperiodic-rl6 SEQUENCE \
            aperiodicSRS-ResourceTriggerList-rl6 SEQUENCE (SIZE(l..maxNrofSRS-TriggerStates-l))
                            OF INTEGER (l..MAXNrofSRS-TriggerStates-l) OPTIONAL, -- Need M
            ...
        },
        semi-persistent-rl6 SEQUENCE \
            ...
        },
        periodic-rl6 SEQUENCE \
            ...
        }
    },
    alpha-rl6 Alpha OPTIONAL, -- Need. S
    p0-r16
    pathlossReferenceRS-Pos-rl6
        ssb-IndexServing-rl6
        ssb-Ncell-rl6
        dl-PRS-rl6
    }
    ...
}
SRS-ResourcesetId:: INTEGER (0..maxNrofSRS-ResourceSets-1)
SRS-PosResourceSetId-rl6 ::= INTEGER (0..maxNrofSRS-PosResourceSets-1-r16)
```


ETSI


--- Page 828  ---


3GPP TS 38.331 version 17.0.0 Release 17
827
ETSI TS 138331 V17.0.0 (2022-05)
```
SRS-Resource ::=
    srs-ResourceId
    nrofSRS-Ports
    ptrs-PortIndex
    transmissionComb
        n2
            combOffset-n2
            cyclicShift-n2
        },
        n4
            combOffset-n4
            cyclicShift-n4
        }
    },
    resourceMapping
        startPosition
        nrofSymbols
        repetitionFactor
    },
    freqDomainPosition
    freqDomainShift
    freqHopping
        c-SRS
        b-SRS
        b-hop
    },
    groupOrSequenceHopping
    resourceType
        aperiodic
            ...
        },
        semi-persistent
            periodicityAndOffset-sp
            ...
        l,
        periodic
            periodicityAndOffset-p
            ...
        }
    },
    sequenceId.
    spatialRelationInfo
    ...;
    [ [
    resourceMapping-r16
        startPosition-rl6
        nrofSymbols-rl6
        repetitionFactor-rl6
    }
    ]],
    [ [
    spatialRelationInfo-PDC-rl7
    resourceMapping-rl7
```

```
SEQUENCE \
    SRS-ResourceId,
    ENUMERATED {portl, ports2, ports4},
    ENUMERATED {nO, nl}
    CHOICE {
        SEQUENCE \
            INTEGER (0..1),
            INTEGER (0..7)
        SEQUENCE \
            INTEGER (0..3),
            INTEGER (0..11)
    SEQUENCE {
        INTEGER (0..5),
        ENUMERATED {nl, n2, n4},
        ENUMERATED {nl, n2, n4}
    INTEGER (0..67),
    INTEGER (0..268),
    SEQUENCE {
        INTEGER (0..63),
        INTEGER (0..3),
        INTEGER (0..3)
    ENUMERATED { neither, groupHopping, sequenceHopping },
    CHOICE {
        SEQUENCE {
        SEQUENCE {
                SRS-PeriodicityAndOffset,
        SEQUENCE \
                SRS-PeriodicityAndOffset,
    INTEGER (0..1023),
    SRS-SpatialRelationInfo
    SEQUENCE \
        INTEGER (0..13),
        ENUMERATED {nl, n2, n4},
        ENUMERATED {nl, n2, n4}
                        }
    SetupRelease { SpatialRelationInfo-PDC-rl7 }
    SEQUENCE {
```


--- Page 829  ---


3GPP TS 38.331 version 17.0.0 Release 17
828
ETSI TS 138331 V17.0.0 (2022-05)
```
        nrofSymbols-rl7 ENUMERATED {n8, nl0, nl2, nl4},
        repetitionFactor-rl7 ENUMERATED {nl, n2, n4, n5, n6, n7, n8, nl0, nl2, nl4}
    },
    partialFreqSounding-rl7 SEQUENCE {
        startRBIndexFScaling-rl7 CHOICE[
            startRBIndexAndFreqScalingFactor2-rl7 INTEGER (0..1),
            startRBIndexAndFreqScalingFactor4-rl7 INTEGER (0..3)
        },
```

```
    }
    transmissionComb-n8-rl7 SEQUENCE {
        startPosition-rl7
        comboffset-n8-rl7
        cyclicshift INTEGER (0..7),
    }
    ] ]
}
SRS-PosResource-rl6::= SEQUENCE \
    srs-PosResourceId-rl6
    transmissionComb-r16
        n2-r16
            combOffset-n2-r16
            cyclicShift-n2-rl6
        },
        n4-rl6
            combOffset-n4-r16
            cyclicShift-n4-rl6
        },
        n8-rl6
            combOffset-n8-rl6
            cyclicShift-n8-rl6
        },
    ...
    },
    resourceMapping-rl6 SEQUENCE {
        startPosition-rl6
        nrofSymbols-rl6
    },
    freqDomainShift-rl6
    freqHopping-rl6
        c-SRS-rl6
        ...
    },
    groupOrSequenceHopping-r16 ENUMERATED { neither, groupHopping, sequenceHopping },
    resourceType-rl6
        aperiodic-r16
            SEQUENCE \
            slotOffset-rl6
        },
        semi-persistent-rl6 SEQUENCE \
            periodicityAndOffset-sp-rl6 SRS-PeriodicityAndOffset-rl6,
            ...
        },
```


ETSI


--- Page 830  ---


3GPP TS 38.331 version 17.0.0 Release 17
829
ETSI TS 138331 V17.0.0 (2022-05)
```
        periodic-rl6
            periodicityAndOffset-p-rl6 SRS-PeriodicityAndOffset-rl6,
            ...
        }
    },
    sequenceId-rl6 INTEGER (0..65535),
    spatialRelationInfoPos-rl6
    ...
}
SRS-SpatialRelationInfo ::= SEQUENCE {
```

```
    referenceSignal CHOICE {
        ssb-Index SSB-Index,
        csi-RS-Index NZP-CSI-RS-ResourceId,
        srs
            resourceId SRS-ResourceId,
            uplinkBWP BWP-Id.
        }
    }
}
SRS-SpatialRelationInfoPos-rl6 ::= CHOICE {
    servingRS-rl6 SEQUENCE {
```

```
        referenceSignal-rl6 CHOICE {
            ssb-IndexServing-rl6 SSB-Index,
            csi-RS-IndexServing-r16
            srs-SpatialRelation-r16 NZP-CSI-RS-ResourceId,
                resourceSelection-rl6
                    srs-ResourceId-rl6 SRS-ResourceId,
                    srs-PosResourceId-rl6
                },
                uplinkBWP-rl6 BWP-Id.
            }
        }
    },
    ssb-Ncell-rl6 SSB-InfoNcell-rl6,
    dl-PRS-rl6 DL-PRS-Info-rl6
}
SSB-Configuration-rl6 ::= SEQUENCE {
    ssb-Freq-rl6
    halfFrameIndex-rl6
    ssbSubcarrierSpacing-rl6
    ssb-Periodicity-rl6
    sfnO-Offset-rl6
        sfn-Offset-rl6
        integerSubframeOffset-rl6
    }
    sfn-SSB-Offset-rl6 INTEGER (0..15),
    ss-PBCH-BlockPower-rl6 INTEGER (-60..50)
}
```


ETSI


--- Page 831  ---


3GPP TS 38.331 version 17.0.0 Release 17
830
ETSI TS 138331 V17.0.0 (2022-05)
```
SSB-InfoNcell-rl6 ::=
    physicalCellId-rl6
    ssb-IndexNcell-rl6
    ssb-Configuration-rl6
}
DL-PRS-Info-rl6 ::=
    dl-PRS-ID-rl6
    dl-PRS-ResourceSetId-rl6
    dl-PRS-ResourceId-rl6
}
SRS-ResourceId ::=
SRS-PosResourceId-rl6 ::=
SRS-PeriodicityAndOffset ::=
    sll
    sl2
    sl4
    sl5
    sl8
    sll0
    sll6
    sl20
    sl32
    sl40
    sl64
    sl80
    sll60
    sl320
    sl640
    sl1280
    sl2560
}
SRS-PeriodicityAndOffset-rl6 ::=
    sll
    sl2
    sl4
    sl5
    sl8
    sllo
    sll6
    sl20
    sl32
    sl40
    sl64
    sl80
    sll60
    sl320
    sl640
    sl1280
    sl2560
    sl5l20
    QUENCE \
    PhysCellId,
    SSB-Index
    ssb-Configuration-rl6
}
\mu
SRS-ResourceId ::= INTEGER (0..maxNrofSRS-Resources-1)
SRS-PosResourceId-rl6 ::= INTEGER (0..maxNrofSRS-PosResources-1-r16)
SRS-PeriodicityAndOffset-rl6 ::= CHOICE \
                NULL,
                INTEGER(0..1),
                INTEGER(0..3),
                INTEGER(0..4),
                INTEGER(0..7),
                INTEGER(0..9),
                INTEGER(0..15),
        sl2
                INTEGER(0..19),
    SEQUENCE \
    INTEGER (0..255),
    INTEGER (0..7),
    INTEGER (0..63)
OPTIONAL, -- Need. S
OPTIONAL -- Need. S
OPTIONAL -- Need S
    CHOICE l
        NULL,
        INTEGER(0..1),
        INTEGER(0..3),
        INTEGER(0..4),
        INTEGER(0..7),
        INTEGER(0..9),
        INTEGER(0..15),
        INTEGER(0..19),
        INTEGER(0..31),
        INTEGER(0..39),
        INTEGER(0..63),
        INTEGER(0..79),
        INTEGER(0..159),
        INTEGER(0..319),
        INTEGER(0..639),
        INTEGER(0..1279),
        INTEGER(0..2559)
        INTEGER(0..2559)
                INTEGER(0..31),
                INTEGER(0..39),
                INTEGER(0..39),
                INTEGER(0..63),
                INTEGER(0..159),
INTEGER(0..319),
INTEGER(0..639),
INTEGER(0..1279),
INTEGER(0..2559),
INTEGER(0..5119),
```


ETSI


--- Page 832  ---


3GPP TS 38.331 version 17.0.0 Release 17
831
ETSI TS 138331 V17.0.0 (2022-05)
```
    sl10240 INTEGER(0..10239),
    sl40960 INTEGER(0..40959),
    sl81920 INTEGER(0..81919),
    ...
}
SpatialRelationInfo-PDC-rl7 ::= SEQUENCE [
    referenceSignal CHOICE {
        ssb-Index SSB-Index,
        csi-RS-Index NZP-CSI-RS-ResourceId,
        dl-PRS-PDC NR-DL-PRS-ResourceID-rl7,
        srs SEQUENCE \
            resourceId SRS-ResourceId,
            uplinkBWP BWP-Id
        },
        ...
    },
    ...
}
UE-TxTEG-RequestUL-TDOA-Config-rl7 ::= CHOICE [
    oneShot-rl7 NULL,
    periodicReporting-rl7 ENUMERATED {ms120, ms240, ms480, ms640, ms1024, ms2048, ms5120, ms10240}
}
-- TAG-SRS-CONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SRS-Config field descriptions \\
\hline \begin{tabular}{l}
tpc-Accumulation \\
If the field is absent, UE applies TPC commands via accumulation. If disabled, UE applies the TPC command without accumulation (this applies to SRS when a separate closed loop is configured for SRS) (see TS 38.213 [13], clause 7.3).
\end{tabular} \\
\hline \begin{tabular}{l}
ue-TxTEG_Request-UL-TDOA-Config \\
Configures the periodicty of UE reporting for the association between Tx TEG and SRS Positioning resources. When configured with oneShot UE reports the association only one time. When configured with periodicReporting value ms 120 means the UE reports every 120 ms , ms240 means UE reports every 240 ms and so on.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 833  ---


3GPP TS 38.331 version 17.0.0 Release 17
832
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SRS-Resource, SRS-PosResource field descriptions \\
\hline \begin{tabular}{l}
cyclicShift-n2 \\
Cyclic shift configuration (see TS 38.214 [19], clause 6.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
cyclicShift-n4 \\
Cyclic shift configuration (see TS 38.214 [19], clause 6.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
enableStartRBHopping \\
When this RRC parameter is configured, start RB location hopping is enabled for partial frequency sounding in different SRS frequency hopping periods for periodic/semipersistent/aperiodic SRS as described in Clause 6.4.1.4 in TS 38.211.
\end{tabular} \\
\hline \begin{tabular}{l}
freqHopping \\
Includes parameters capturing SRS frequency hopping (see TS 38.214 [19], clause 6.2.1). For CLI SRS-RSRP measurement, the network always configures this field such that \( b \)-hop > b-SRS.
\end{tabular} \\
\hline \begin{tabular}{l}
groupOrSequenceHopping \\
Parameter(s) for configuring group or sequence hopping (see TS 38.211 [16], clause 6.4.1.4.2). For CLI SRS-RSRP measurement, the network always configures this parameter to 'neither'.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofSRS-Ports \\
Number of ports. For CLI SRS-RSRP measurement, the network always configures this parameter to 'port1'.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityAndOffset-p \\
Periodicity and slot offset for this SRS resource. All values are in "number of slots". Value sil corresponds to a periodicity of 1 slot, value sil2 corresponds to a periodicity of 2 slots, and so on. For each periodicity the corresponding offset is given in number of slots. For periodicity sli the offset is 0 slots (see TS 38.214 [19], clause 6.2.1). For CLI SRS-RSRP measurement, si 1280 and s/ 2560 cannot be configured.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityAndOffset-sp \\
Periodicity and slot offset for this SRS resource. All values are in "number of slots". Value sil corresponds to a periodicity of 1 slot, value s/ 2 corresponds to a periodicity of 2 slots, and so on. For each periodicity the corresponding offset is given in number of slots. For periodicity sli the offset is 0 slots (see TS 38.214 [19], clause 6.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
ptrs-Portindex \\
The PTRS port index for this SRS resource for non-codebook based UL MIMO. This is only applicable when the corresponding PTRS-UplinkConfig is set to CP-OFDM. The ptrs-Portindex configured here must be smaller than the maxNrofPorts configured in the PTRS-UplinkConfig (see TS 38.214 [19], clause 6.2.3.1). This parameter is not applicable to CLI SRS-RSRP measurement.
\end{tabular} \\
\hline \begin{tabular}{l}
resourceMapping \\
OFDM symbol location of the SRS resource within a slot including nrofSymbols (number of OFDM symbols), startPosition (value 0 refers to the last symbol, value 1 refers to the second last symbol, and so on) and repetitionFactor (see TS 38.214 [19], clause 6.2.1 and TS 38.211 [16], clause 6.4.1.4). The configured SRS resource does not exceed the slot boundary. If resourceMapping-r16 is signalled, UE shall ignore the resourceMapping (without suffix). If resourceMapping-r17 is signalled, UE shall ignore the resourceMapping (without suffix) and only the values of nrofSymbols which are integer multiples of the configured repetitionFactor can be configured. For CLI SRS-RSRP measurement, the network always configures nrofSymbois and repetitionFactor to ' n 1 '.
\end{tabular} \\
\hline \begin{tabular}{l}
resourceType \\
Periodicity and offset for semi-persistent and periodic SRS resource (see TS 38.214 [19], clause 6.2.1). For CLI SRS-RSRP measurement, only 'periodic' is applicable for resource Type.
\end{tabular} \\
\hline \begin{tabular}{l}
sequenceld \\
Sequence ID used to initialize pseudo random group and sequence hopping (see TS 38.214 [19], clause 6.2.1).
\end{tabular} \\
\hline \begin{tabular}{l}
servingCellld \\
The serving Cell ID of the source SSB, CSI-RS, or SRS for the spatial relation of the target SRS resource. If this field is absent the SSB, the CSI-RS, or the SRS is from the same serving cell where the SRS is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
spatialRelationinfo \\
Configuration of the spatial relation between a reference RS and the target SRS. Reference RS can be SSB/CSI-RS/SRS (see TS 38.214 [19], clause 6.2.1). This parameter is not applicable to CLI SRS-RSRP measurement.
\end{tabular} \\
\hline \begin{tabular}{l}
spatialRelationInfo-PDC \\
Configuration of the spatial relation between a reference RS and the target SRS. Reference RS can be SSB/CSI-RS/SRS/DL-PRS-PDC (see TS 38.214 [19], clause 6.2.1). The field is present in case of resource Type=periodic and usagePDC-r17=true in the SRS-ResourceSet, otherwise the field is absent.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 834  ---


3GPP TS 38.331 version 17.0.0 Release 17
833
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
spatialRelationinfoPos \\
Configuration of the spatial relation between a reference RS and the target SRS. Reference RS can be SSB/CSI-RS/SRS/DL-PRS (see TS 38.214 [19], clause 6.2.1). If the IE srs-Resourceld-Ext is present, the IE srs-Resourceld in spatialRelationinfoPos represents the index from 0 to 63. Otherwise the IE srs-Resourceld in spatialRelationinfoPos represents the index from 0 to 31.
\end{tabular} \\
\hline \begin{tabular}{l}
srs-RequestDCI-0-2 \\
Indicate the number of bits for "SRS request"in DCI format \( 0 \_2 \). When the field is absent, then the value of 0 bit for "SRS request" in DCI format \( 0 \_2 \) is applied. If the parameter srs-RequestDCI-0-2 is configured to value 1, 1 bit is used to indicate one of the first two rows of Table 7.3.1.1.2-24 in TS 38.212 [17] for triggered aperiodic SRS resource set. If the value 2 is configured, 2 bits are used to indicate one of the rows of Table 7.3.1.1.2-24 in TS 38.212 [17]. When UE is configured with supplementaryUplink, an extra bit (the first bit of the SRS request field) is used for the non-SULSUL indication.
\end{tabular} \\
\hline \begin{tabular}{l}
srs-RequestDCI-1-2 \\
Indicate the number of bits for "SRS request" in DCI format 1_2. When the field is absent, then the value of 0 bit for "SRS request" in DCI format 1_2 is applied. When the UE is configured with supplementaryUplink, an extra bit (the first bit of the SRS request field) is used for the non-SULSUL indication (see TS 38.214 [19], clause 6.1.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
srs-ResourceSetToAddModListDCI-0-2 \\
List of SRS resource set to be added or modified for DCI format \( 0 \_2 \) (see TS 38.212 [17], clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
srs-ResourceSetToReleaseListDCI-0-2 \\
List of SRS resource set to be released for DCI format \( 0 \_2 \) (see TS 38.212 [17], clause 7.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
startRBindexAndFreqScalingFactor \\
Configures the UE with the startRB Index and freqScalingFactor for partial frequency sounding as described in Clause 6.4.1.4 in TS 38.211. The startRBIndexForFScaling2 gives the startRBIndex when freqScalingFactor is 2 and the startRBIndexForFScaling4 gives the startRBIndex when FreqScalingFactor is 4
\end{tabular} \\
\hline \begin{tabular}{l}
transmissionComb, transmissionComb-n8 \\
Comb value (2 or 4 or 8) and comb offset (0.combValue-1) (see TS 38.214 [19], clause 6.2.1).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 835  ---


3GPP TS 38.331 version 17.0.0 Release 17
834
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SRS-ResourceSet, SRS-PosResourceSet field descriptions \\
\hline \begin{tabular}{l}
alpha \\
alpha value for SRS power control (see TS 38.213 [13], clause 7.3). When the field is absent the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
aperiodicSRS-ResourceTriggerList \\
An additional list of DCI "code points" upon which the UE shall transmit SRS according to this SRS resource set configuration (see TS 38.214 [19], clause 6). When the field is not included during a reconfiguration of SRS-ResourceSet of resourceType set to aperiodic, UE maintains this value based on the Need M; that is, this list is not considered as an extension of aperiodicSRS-Resource Trigger for purpose of applying the general rule for extended list in clause 6.1.3.
\end{tabular} \\
\hline \begin{tabular}{l}
aperiodicSRS-ResourceTrigger \\
The DCI "code point" upon which the UE shall transmit SRS according to this SRS resource set configuration (see TS 38.214 [19], clause 6).
\end{tabular} \\
\hline \begin{tabular}{l}
associatedCSI-RS \\
ID of CSI-RS resource associated with this SRS resource set in non-codebook based operation (see TS 38.214 [19], clause 6.1.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
availableSlotOffset \\
Indicates the number of available slots from slot \( \mathrm{n}+\mathrm{k} \) to the slot where the aperiodic SRS resource set is transmitted, where slot n is the slot with the triggering DCI, and k is the legacy triggering offset (slotOffset, not based on availabel slot) as described in clause 6.2.1 of TS 38.214.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-RS \\
ID of CSI-RS resource associated with this SRS resource set. (see TS 38.214 [19], clause 6.1.1.2).
\end{tabular} \\
\hline \begin{tabular}{l}
csi-RS-IndexServingcell \\
Indicates CSI-RS index belonging to a serving cell
\end{tabular} \\
\hline \begin{tabular}{l}
followUnifiedTCIstateSRS \\
When set to enabled, for SRS resource Set, the UE applies the "indicated" Rel-17 DL only or joint TCI as specified in TS 38.214 clause 5.1.5. This parameter may be configured for aperiodic SRS for BM or SRS of any time-domain behavior for codebook, non-codebook, and antenna switching.
\end{tabular} \\
\hline \begin{tabular}{l}
p0 \\
P0 value for SRS power control. The value is in dBm. Only even values (step size 2) are allowed (see TS 38.213 [13], clause 7.3).
\end{tabular} \\
\hline \begin{tabular}{l}
pathlossReferenceRS \\
A reference signal (e.g. a CSI-RS config or a SS block) to be used for SRS path loss estimation (see TS 38.213 [13], clause 7.3).
\end{tabular} \\
\hline \begin{tabular}{l}
pathlossReferenceRS-Pos \\
A reference signal (e.g. a SS block or a DL-PRS config) to be used for SRS path loss estimation (see TS 38.213 [13], clause 7.3).
\end{tabular} \\
\hline \begin{tabular}{l}
pathlossReferenceRSList \\
Multiple candidate pathloss reference RS(s) for SRS power control, where one candidate RS can be mapped to SRS Resource Set via MAC CE (clause 6.1.3.27 in TS 38.321 [3]). The network can only configure this field if pathlossReferenceRS is not configured in the same SRS-ResourceSet.
\end{tabular} \\
\hline \begin{tabular}{l}
resourceSelection \\
Indicates whether the configured SRS spatial relation resource is a SRS-Resource or SRS-PosResource.
\end{tabular} \\
\hline \begin{tabular}{l}
resourceType \\
Time domain behavior of SRS resource configuration, see TS 38.214 [19], clause 6.2.1. The network configures SRS resources in the same resource set with the same time domain behavior on periodic, aperiodic and semi-persistent SRS. The aperiodic SRS is not applicable for the UE in RRC_INACTIVE
\end{tabular} \\
\hline \begin{tabular}{l}
slotOffset \\
An offset in number of slots between the triggering DCI and the actual transmission of this SRS-ResourceSet. If the field is absent the UE applies no offset (value 0).
\end{tabular} \\
\hline \begin{tabular}{l}
srs-PowerControlAdjustmentStates \\
Indicates whether hsrs, \( \mathrm{c}(\mathrm{i})=\mathrm{fc}(\mathrm{i}, 1) \) or hsrs, \( \mathrm{c}(\mathrm{i})=\mathrm{fc}(\mathrm{i}, 2) \) (if twoPUSCH-PC-AdjustmentStates are configured) or separate close loop is configured for SRS. This parameter is applicable only for UIs on which UE also transmits PUSCH. If absent or release, the UE applies the value sameAs-Fci1 (see TS 38.213 [13], clause 7.3).
\end{tabular} \\
\hline \begin{tabular}{l}
srs-ResourceldList, srs-PosResourceldList \\
The IDs of the SRS-Resources/SRS-PosResource used in this SRS-ResourceSet/SRS-PosResourceSet. If this SRS-ResourceSet is configured with usage set to codebook, the srs-ResourceldList contains at most 2 entries. If this SRS-ResourceSet is configured with usage set to nonCodebook, the srs-ResourceldList contains at most 4 entries.
\end{tabular} \\
\hline \begin{tabular}{l}
srs-ResourceSetid, srs-PosResourceSetid \\
The ID of this resource set. It is unique in the context of the BWP in which the parent SRS-Config is defined.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 836  ---


3GPP TS 38.331 version 17.0.0 Release 17
835
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
ssb-IndexSevingcell \\
Indicates SSB index belonging to a serving cell
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-NCell \\
This field indicates a SSB configuration from neighboring cell
\end{tabular} \\
\hline \begin{tabular}{l}
usage \\
Indicates if the SRS resource set is used for beam management, codebook based or non-codebook based transmission or antenna switching. See TS 38.214 [19], clause 6.2.1. Reconfiguration between codebook based and non-codebook based transmission is not supported.
\end{tabular} \\
\hline \begin{tabular}{l}
usagePDC \\
If configured, it indicates that this SRS resource set is used for propagation delay compensation. The field can be present in only one SRS-ResourceSet. If this field is present, the UE ignore the field usage.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SSB-InfoNCell field descriptions \\
\hline \begin{tabular}{l}
physicalCellld \\
This field specifies the physical cell ID of the neighbour cell for which SSB configuration is provided.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-IndexNcell \\
This field specifies the index of the SSB for a neighbour cell. See TS 38.213 [13]. If this field is absent, the UE determines the ssb-IndexNcell of the physicalCellid based on its SSB measurement from the cell.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-Configuration \\
This field specifies the full configuration of the SSB. If this field is absent, the UE obtains the configuration for the SSB from \( n \)-SSB-Config received as part of DL-PRS assistance data in LPP, see TS 37.355 [49], by looking up the corresponding SSB configuration using the field physicalCelll.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline DL-PRS-Info field descriptions \\
\hline \begin{tabular}{l}
di-PRS-ID \\
This field specifies the UE specific TRP ID (see TS 37.355 [49]) for which PRS configuration is provided.
\end{tabular} \\
\hline \begin{tabular}{l}
dI-PRS-ResourceSetid \\
This field specifies the PRS-ResourceSet ID of a PRS resourceSet.
\end{tabular} \\
\hline \begin{tabular}{l}
dl-PRS-Resourceld \\
This field specifies the PRS-Resource ID of a PRS resource. If this field is absent, the UE determines the dl-PRS-Resource/D based on its PRS measurement from the TRP (see TS 37.355 [49]) and DL-PRS Resource Set.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SSB-Configuration field descriptions \\
\hline \begin{tabular}{l}
halfFrameindex \\
Indicates whether SSB is in the first half or the second half of the frame. Value zero indicates the first half and value 1 indicates the second half.
\end{tabular} \\
\hline \begin{tabular}{l}
integerSubframeOffset \\
Indicates the subframe boundary offset of the cell in which SSB is transmited.
\end{tabular} \\
\hline \begin{tabular}{l}
sfn0-Offset \\
Indiactes the time offset of the SFN0 slot 0 for the cell with respect to SFN0 slot 0 of serving cell.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 837  ---


3GPP TS 38.331 version 17.0.0 Release 17
836
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
sfn-Offset \\
Specifies the SFN offset between the cell in which SSB is transmited and serving cell. The offset corresponds to the number of full radio frames counted from the beginning of a radio frame \#0 of serving cell to the beginning of the closest subsequent radio frame \#0 of the cell in which SSB is transmitted.
\end{tabular} \\
\hline \begin{tabular}{l}
sfn-SSB-Offset \\
Indicates the SFN offset of the transmitted SSB relative to the start of the SSB period. Value 0 indicates that the SSB is transmitted in the first system frame, value 1 indicates that SSB is transmitted in the second system frame and so on. The network configures this field according to the field ssb-Periodicity such that the indicated system frame does not exceed the configured SSB periodicity.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-Freq \\
Indicates the frequency of the SSB.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PBCH-BlockPower \\
Average EPRE of the resources elements that carry secondary synchronization signals in dBm that the NW used for SSB transmission, see TS 38.213 [13], clause 7.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-Periodicity \\
Indicates the periodicity of the SSB. If the field is absent, the UE applies the value ms5. (see TS 38.213 [13], clause 4.1)
\end{tabular} \\
\hline \begin{tabular}{l}
ssbSubcarrierSpacing \\
Subcarrier spacing of SSB. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15 or 30 kHz \\
FR2-1: 120 or 240 kHz \\
FR2-2: 120,480 , or 960 kHz
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline Setup & This field is mandatory present upon configuration of SRS-ResourceSet or SRS-Resource and optionally present, Need M, otherwise. \\
\hline NonCodebook & This field is optionally present, Need M, in case of non-codebook based transmission, otherwise the field is absent. \\
\hline Pathloss & The field is mandatory present if the IE SSB-InfoNcell is included in pathlossReferenceRS-Pos; otherwise it is optionally present, Need R \\
\hline
\end{tabular}
- SRS-RSRP-Range

The IE SRS-RSRP-Range specifies the value range used in SRS-RSRP measurements and thresholds. The integer value for SRS-RSRP measurements is according to Table 10.1.22.1.2-1 in TS 38.133 [14]. For thresholds, the actual value is (IE value -140 ) dBm , except for the IE value 98, in which case the actual value is infinity.

SRS-RSRP-Range information element
-- ASNISTART
-- TAG-SRS-RSRP-RANGE-START

SRS-RSRP-Range-rl6 : := INTEGER(0..98)
-- TAG-SRS-RSRP-RANGE-STOP
-- ASNISTOP

ETSI


--- Page 838  ---


3GPP TS 38.331 version 17.0.0 Release 17
837
ETSI TS 138331 V17.0.0 (2022-05)
- SRS-TPC-CommandConfig

The IE SRS-TPC-CommandConfig is used to configure the UE for extracting TPC commands for SRS from a group-TPC messages on DCI
SRS-TPC-CommandConfig information element
-- ASNISTART
-- TAG-SRS-TPC-COMMANDCONFIG-START

SRS-TPC-CommandConfig : :=
startingBitOfFormat2-3
fieldTypeFormat2-3
⋯ ,
[ [
startingBitOfFormat2-3SUL
] ]
\}
-- TAG-SRS-TPC-COMMANDCONFIG-STOP
-- ASNISTOP

SEQUENCE 1
INTEGER (1..31)
INTEGER (0..1)

INTEGER (1..31)

OPTIONAL, -- Need R
OPTIONAL, -- Need R

OPTIONAL -- Need R

\begin{tabular}{|l|}
\hline SRS-TPC-CommandConfig field descriptions \\
\hline \begin{tabular}{l}
fieldTypeFormat2-3 \\
The type of a field within the group DCI with SRS request fields (optional), which indicates how many bits in the field are for SRS request (0 or 2). \\
Note that for Type A, there is a common SRS request field for all SCells in the set, but each SCell has its own TPC command bits. See TS 38.212 [17] clause 7.3.1 and , TS 38.213 [13], clause 11.3.
\end{tabular} \\
\hline \begin{tabular}{l}
startingBitOfFormat2-3 \\
The starting bit position of a block within the group DCI with SRS request fields (optional) and TPC commands. The value 1 of the field corresponds to the first/left most bit of format2-3. The value 2 of the field corresponds to the second bit format2-3, and so on (see TS 38.212 [17], clause 7.3.1 and TS 38.213 [13], clause 11.3).
\end{tabular} \\
\hline \begin{tabular}{l}
startingBitOfFormat2-3SUL \\
The starting bit position of a block within the group DCI with SRS request fields (optional) and TPC commands for SUL carrier (see TS 38.212 [17], clause 7.3.1 and TS 38.213 [13], clause 11.3).
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) SSB-Index

The IE SSB-Index identifies an SS-Block within an SS-Burst. See TS 38.213 [13], clause 4.1.
SSB-Index information element
-- ASNISTART
-- TAG-SSB-INDEX-START
SSB-Index : : INTEGER (0. maxNrofSSBs-1)
-- TAG-SSB-INDEX-STOP
-- ASNISTOP

ETSI


--- Page 839  ---


3GPP TS 38.331 version 17.0.0 Release 17
838
ETSI TS 138331 V17.0.0 (2022-05)

SSB-MTC
The IE SSB-MTC is used to configure measurement timing configurations, i.e., timing occasions at which the UE measures SSBs.
SSB-MTC information element
```
-- ASNISTART
-- TAG-SSB-MTC-START
SSB-MTC ::=
    periodicityAndOffset
        sf5
        sflo
        sf20
        5f40
        sf80
        sfl60
    },
    duration ENUMERATED { sfl, sf2, sf3, sf4, sf5}
}
SSB-MTC2 ::= SEQUENCE \
    pci-List
    periodicity
}
SSB-MTC2-LP-r16 ::=
    pci-List
    periodicity
}
SSB-MTC3-rl6::= SEQUENCE \
    periodicityAndOffset-r16
        sf5-rl6
        sfl0-rl6
        sf20-r16
        sf40-r16
        sf80-r16
        sfl60-rl6
        sf320-r16
        sf640-r16
        sfl280-r16
    },
    duration-rl6 ENUMERATED {sfl, sf2, sf3, sf4, sf5},
    pci-List-rl6
    ssb-ToMeasure-rl6
}
SSB-MTC4-rl7 ::= SEQUENCE [
    pci-List-rl7
    SEQUENCE \
        CHOICE {
        INTEGER (0..4),
            INTEGER (0..9),
            INTEGER (0..19),
            INTEGER (0..39),
            INTEGER (0..79),
            INTEGER (0..159)
}
}
    periodicity
}
SSB
        CHOICE \
                INTEGER (0..4),
                INTEGER (0..9),
                INTEGER (0..19),
                INTEGER (0..39),
                INTEGER (0..79),
                INTEGER (0..159),
                INTEGER (0..319),
                INTEGER (0..639),
                INTEGER (0..1279)
                INTEGER (0..1279)
    ENOMERATED {sfl, sf2, sf3, sf4, sf5},
    SEQUENCE (SIZE (l..maxNrofPCIsPerSMTC)) OF PhysCellId
    SetupRelease { SSB-ToMeasure }
OPTIONAL, -- Need. M
SEQUENCE (SIZE (1..maxNrofPCIsPerSMTC)) OF PhysCellId
ENUMERATED {sf5, sfl0, sf20, sf40, sf80, spare3, spare2, sparel}
SEQUENCE {
SEQUENCE (SIZE (l..maxNrofPCIsPerSMTC)) OF PhysCellId OPTIONAL, -- Need R
ENUMERATED {sfl0, sf20, sf40, sf80, sfl60, spare3, spare2, sparel}
\textbf{(0.4), \NTEGER (0.19), \NTEGER (0.19), 
}
    pci-List-rl7
SEQUENCE {
SEQUENCE (SIZE (1..maxNrofPCIsPerSMTC)) OF PhysCellId OPTIONAL, -- Need R
```


ETSI


--- Page 840  ---


3GPP TS 38.331 version 17.0.0 Release 17
839
ETSI TS 138331 V17.0.0 (2022-05)
```
    offset-rl7 INTEGER (0..159)
}
-- Editor's note: UE assistance information for SMTC/MG could be captured, and the content is FFS
SSB-MTC-AdditionalPCI-rl7 ::= SEQUENCE {
    additionalPCIIndex-rl7 AdditionalPCIIndex-rl7,
    additionalPCI-rl7 PhysCellId,
```

```
    ssb-PositionsInBurst-rl7 CHOICE {
        shortBitmap BIT STRING (SIZE (4)),
        mediumBitmap BIT STRING (SIZE (8)),
        longBitmap BIT STRING (SIZE (64))
    },
    ss-PBCH-BlockPower-rl7 INTEGER (-60. .50)
}
--Editor's note: more RANl input may be coming for this IE
AdditionalPCIIndex-rl7 ::= INTEGER(O..maxNrofAdditionalPCI-l-rl7)
-- TAG-SSB-MTC-STOP
-- ASN1STOP
```


\begin{tabular}{|l|}
\hline SSB-MTC field descriptions \\
\hline \begin{tabular}{l}
duration \\
Duration of the measurement window in which to receive SS/PBCH blocks. It is given in number of subframes (see TS 38.213 [13], dause 4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityAndOffset \\
Periodicity and offset of the measurement window in which to receive SS/PBCH blocks, see 5.5.2.10. Periodicity and offset are given in number of subframes.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline & SSB-MTC2 field descriptions \\
\hline \multicolumn{2}{|l|}{pci-List} \\
\hline PCIs that are known to follow this SMTC. & \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SSB-MTC3 field descriptions \\
\hline \begin{tabular}{l}
duration \\
Duration of the measurement window in which to receive SS/PBCH blocks. It is given in number of subframes (see TS 38.213 [13], dause 4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
pci-List \\
PCIs that are known to follow this SMTC, used for IAB-node discovery.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicityAndOffset \\
Periodicity and offset of the measurement window in which to receive SS/PBCH blocks, see 5.5.2.10. Periodicity and offset are given in number of subframes.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-ToMeasure \\
The set of SS blocks to be measured within the SMTC measurement duration. The firstfleftmost bit corresponds to SS block index 0 , the second bit corresponds to SS block index 1 , and so on. Value 0 in the bitmap indicates that the corresponding SS block is not to be measured while value 1 indicates that the corresponding SS block is to be measured (see TS 38.215 [9]). When the field is not configured the IAB-MT measures on all SS blocks. Regardless of the value of this field, SS blocks outside of the applicable smtc are not to be measured. See TS 38.215 [9] clause 5.1.1.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 841  ---


3GPP TS 38.331 version 17.0.0 Release 17
840
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SSB-MTC-AdditionalPCI field descriptions \\
\hline \begin{tabular}{l}
additionalPCI \\
PCI of the additional SSB different from serving cell PCI.
\end{tabular} \\
\hline \begin{tabular}{l}
periodicity \\
Periodicity of the SS/PBCH blocks, see 5.5.2.10. Periodicity is given in number of subframes.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-PositionsinBurst \\
Indicates the time domain positions of the transmitted SS-blocks in a half frame with SS/PBCH blocks as defined in TS 38.213[13], clause 4.1. The first/leftmost bit corresponds to SS/PBCH block index 0 , the second bit corresponds to SS/PBCH block index 1, and so on. Value 0 in the bitmap indicates that the corresponding SS/PBCH block is not transmitted while value 1 indicates that the corresponding SS/PBCH block is transmitted.
\end{tabular} \\
\hline \begin{tabular}{l}
ss-PBCH-BlockPower \\
Average EPRE of the resources elements that carry secondary synchronization signals in dBm that the NW used for SSB transmission, see TS 38.213 [13], clause 7.
\end{tabular} \\
\hline
\end{tabular}
- SSB-PositionQCL-Relation

The IE SSB-PositionQCL-Relation is used to indicate the QCL relationship between SSB positions on the frequency indicated by ssbFrequency (see TS 38.213 [13], clause 4.1) for operation with shared spectrum channel access. Value n 1 corresponds to 1 , value n 2 corresponds to 2 and so on.

SSB-PositionQCL-Relation information element
```
-- ASNISTART
-- TAG-SSB-POSITIONQCL-RELATION-START
SSB-PositionQCL-Relation-rl6 ::= ENUMERATED {nl,n2,n4,n8}
-- TAG-SSB-POSITIONQCL-RELATION-STOP
-- ASNISTOP
```

- SSB-ToMeasure

The IE SSB-ToMeasure is used to configure a pattern of SSBs. For operation with shared spectrum channel access, only mediumBitmap is used.
SSB-ToMeasure information element
```
-- ASNISTART
-- TAG-SSB-TOMEASURE-START
SSB-ToMeasure ::=
CHOICE \
    shortBitmap
    mediumBitmap
    longBitmap
}
-- TAG-SSB-TOMEASURE-STOP
-- ASNISTOP
```


ETSI


--- Page 842  ---


3GPP TS 38.331 version 17.0.0 Release 17
841
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SSB-ToMeasure field descriptions \\
\hline \begin{tabular}{l}
IongBitmap \\
Bitmap when maximum number of SS/PBCH blocks per half frame equals to 64 as defined in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
mediumBitmap \\
Bitmap when maximum number of SS/PBCH blocks per half frame equals to 8 as defined in TS 38.213 [13], clause 4.1. For operation with shared spectrum channel access, if the k -th bit is set to 1 , the UE assumes that one or more SS/PBCH blocks within the SMTC measurement duration with candidate SS/PBCH block indexes corresponding to SS/PBCH block index equal to \( \mathrm{k}-1 \) may be transmitted; if the kt -th bit is set to 0 , the UE assumes that the corresponding SS/PBCH block(s) are not transmitted. The k -th bit is set to 0 , where \( \mathrm{k}> \) ssb-PositionQCL-Common and the number of actually transmitted SS/PBCH blocks is not larger than the number of 1's in the bitmap. If ssb-PositionQCL is configured with a value smaller than ssb-PositionQCL-Common, only the leftmost K bits ( \( \mathrm{K}=s s b \)-PositionQCL) are applicable for the corresponding cell.
\end{tabular} \\
\hline \begin{tabular}{l}
shortBitmap \\
Bitmap when maximum number of SS/PBCH blocks per half frame equals to 4 as defined in TS 38.213 [13], clause 4.1.
\end{tabular} \\
\hline
\end{tabular}
- SS-RSSI-Measurement

The IE SS-RSSI-Measurement is used to configure RSSI measurements based on synchronization reference signals.
SS-RSSI-Measurement information element
```
-- ASNISTART
-- TAG-SS-RSSI-MEASUREMENT-START
SS-RSSI-Measurement ::=
    measurementSlots
    endSymbol
}
-- TAG-SS-RSSI-MEASUREMENT-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SS-RSSI-Measurement field descriptions \\
\hline \begin{tabular}{l}
endSymbol \\
Within a slot that is configured for RSSI measurements (see measurementSlots) the UE measures the RSSI from symbol 0 to symbol endSymbol. This field identifies the entry in Table 5.1.3-1 in TS 38.215 [9], which determines the actual end symbol.
\end{tabular} \\
\hline \begin{tabular}{l}
measurementSlots \\
Indicates the slots in which the UE can perform RSSI measurements. The length of the BIT STRING is equal to the number of slots in the configured SMTC window (determined by the duration and by the subcarrierSpacing). The first (left-most / most significant) bit in the bitmap corresponds to the first slot in the SMTC window, the second bit in the bitmap corresponds to the second slot in the SMTC window, and so on. The UE measures in slots for which the corresponding bit in the bitmap is set to 1. In case this field is configured for a SCell with ca-SlotOffset-r16, the bits in the bitmap corresponds to the slots that are fully contained in the SMTC window.
\end{tabular} \\
\hline
\end{tabular}
- SubcarrierSpacing

The IE SubcarrierSpacing determines the subcarrier spacing. Restrictions applicable for certain frequencies, channels or signals are clarified in the fields that use this IE.

ETSI


--- Page 843  ---


3GPP TS 38.331 version 17.0.0 Release 17
842
ETSI TS 138331 V17.0.0 (2022-05)

SubcarrierSpacing information element
```
-- ASNISTART
-- TAG-SUBCARRIERSPACING-START
```

```
-- TAG-SUBCARRIERSPACING-STOP
-- ASNISTOP
- TAG-Config
```


The IE TAG-Config is used to configure parameters for a time-alignment group.
TAG-Config information element
```
-- ASNISTART
-- TAG-TAG-CONFIG-START
TAG-Config ::=
SEQUENCE {
    tag-ToReleaseList
    tag-ToAddModList
}
TAG ::=
    tag-Id
    timeAlignmentTimer
    ...
}
TAG-Id ::= INTEGER (O..maxNrofTAGs-1)
TimeAlignmentTimer ::= ENUMERATED {ms500, ms750, msl280, msl920, ms2560, ms5120, msl0240, infinity}
-- TAG-TAG-CONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline TAG field descriptions \\
\hline \begin{tabular}{l}
tag-ld \\
Indicates the TAG of the SpCell or an SCell, see TS 38.321 [3]. Uniquely identifies the TAG within the scope of a Cell Group (i.e. MCG or SCG).
\end{tabular} \\
\hline \begin{tabular}{l}
timeAlignmentTimer \\
Value in ms of the timeAlignmentTimer for TAG with ID tag-/d, as specified in TS 38.321 [3].
\end{tabular} \\
\hline
\end{tabular}
- TCI-Info

The IE TCI-Info is used to refer to configured TCI states for PDSCH and/or PDCCH of the PSCell.

ETSI


--- Page 844  ---


3GPP TS 38.331 version 17.0.0 Release 17
843
ETSI TS 138331 V17.0.0 (2022-05)

TCI-Info information element
```
-- ASNISTART
-- TAG-TCI-INFO-START
TCI-Info ::= SEQUENCE \
    pdcch-TCI-rl7 SEQUENCE (SIZE (1..5)) OF TCI-StateId,
    pdsch-TCI-rl7 BIT STRING (SIZE (l..MaxNrofTCI-States))
}
-- Editor's note: This IE is currently a starting point for discussion, details are FFS.
-- TAG-TCI-INFO-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline TC/-info field descriptions \\
\hline \begin{tabular}{l}
pdcch-TCI \\
Indicates the TCI state for PDCCH for each configured CORESET of the DL BWP to be activated at SCell activation, to be activated for the PSCell at SCG activation and/or to be used for BFD, RLM and measurements while the SCG is deactivated. The list includes exactly as many entries as CORESETs configured in this BWP, ordered by increasing values of ControlResourceSet-ld, i.e. the first entry indicates the TCI state for the configured CORESET with the lowest ControlResourceset-/d value, the second value indicates the TCI states for the configured CORESET with the second lowest ControlResourceset-Id value, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-TCI \\
Indicates TCI states for PDSCH reception at SCell addition/activation or of the PSCell at SCG activation. This field includes exactly one bit for each configured TCI state in this BWP ordered by increasing values of TC/-State/d, i.e. the first bit indicates the activation state of the TCI state with the lowest TC/-State/d value, the second value indicates the activation status of the TCI state with the second lowest TCI-State-Id value, and so on. A bit set to 0 indicates that the corresponding TCI state is deactivated, a bit set to 1 indicates that the TCl state is activated.
\end{tabular} \\
\hline
\end{tabular}
- TCI-State

The IE TCI-State associates one or two DL reference signals with a corresponding quasi-colocation (QCL) type. If additionalPCI is configured for the reference signal, same value is configured for both DL reference signals.

TCI-State information element
```
-- ASNISTART
-- TAG-TCI-STATE-START
```

```
SEQUENCE \
    TCI-StateId,
    QCL-Info,
```

```
TCI-State ::=
    tci-StateId
    qcl-Typel
    qcl-Type2
    ...
}
QCL-Info ::=
    cell
    bwp-Id.
    QCL-Info OPTIONAL, -- Need. R
SEQUENCE {
    ServCellIndex
    BWP-Id.
```


ETSI


--- Page 845  ---


3GPP TS 38.331 version 17.0.0 Release 17
844
ETSI TS 138331 V17.0.0 (2022-05)
```
    referenceSignal CHOICE {
        csi-rs NZP-CSI-RS-ResourceId,
        ssb SSB-Index
    },
    qcl-Type ENUMERATED {typeA, typeB, typeC, typeD},
    ...;
    [ [
```

```
    --Editor's note: Needed in Rel-15/16 TCI state for mTRP intercell and in Rel-17 TCI state for BM intercell.
    ] ]
}
DLorJoint-TCIState-rl7 ::= SEQUENCE {
    tci-StateUnifiedId-rl7 TCI-StateId,
    qcl-Typel-rl7 QCL-Info,
```

```
    ul-powerControl-rl7 Uplink-powerControlId-rl7
```

```
            -- Editor's Note: Check if new id -rll is needed to cover full ID range
}
UL-TCIState-rl7 ::= SEQUENCE {
    ul-TCIState-Id-rl7 UL-TCIState-Id-rl7,
```

```
    referenceSignal-rl7 CHOICE {
        ssb-Index-rl7 SSB-Index,
        csi-RS-Index-rl7 NZP-CSI-RS-ResourceId,
        srs-rl7 PUCCH-SRS
    },
```

```
            -- Editor's Note: Check if new id -rll is needed to cover full ID range
}
-- TAG-TCI-STATE-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline QCL-info field descriptions \\
\hline \begin{tabular}{l}
bwp-id \\
The DL BWP which the RS is located in.
\end{tabular} \\
\hline \begin{tabular}{l}
cell \\
The UE's serving cell in which the referenceSignal is configured. If the field is absent, it applies to the serving cell in which the TC/-State is configured. The RS can be located on a serving cell other than the serving cell in which the TC/-State is configured only if the qc/-Type is configured as typeC or typeD. See TS 38.214 [19] clause 5.1.5.
\end{tabular} \\
\hline \begin{tabular}{l}
referenceSignal \\
Reference signal with which quasi-collocation information is provided as specified in TS 38.214 [19] clause 5.1.5.
\end{tabular} \\
\hline \begin{tabular}{l}
qci-Type \\
QCL type as specified in TS 38.214 [19] clause 5.1.5.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 846  ---


3GPP TS 38.331 version 17.0.0 Release 17
845
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|c|c|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline CSI-RS-Indicated & This field is mandatory present if csi-rs is included, absent otherwise \\
\hline
\end{tabular}
- TCI-Stateld

The IE TCI-Stateld is used to identify one TCI-State configuration.
TCI-Stateld information element
```
-- ASNISTART
-- TAG-TCI-STATEID-START
TCI-StateId ::= INTEGER (O.maxNrofTCI-States-1)
UL-TCIState-Id-rl7 ::= INTEGER (O..maxULTCI-l-rl7)
-- TAG-TCI-STATEID-STOP
-- ASNISTOP
```

- TDD-UL-DL-ConfigCommon

The IE TDD-UL-DL-ConfigCommon determines the cell specific Uplink/Downlink TDD configuration.
TDD-UL-DL-ConfigCommon information element
```
-- ASNISTART
-- TAG-TDD-UL-DL-CONFIGCOMMON-START
TDD-UL-DL-ConfigCommon ::= SEQUENCE \
    referenceSubcarrierSpacing SubcarrierSpacing,
    patternl TDD-UL-DL-Pattern,
```

```
    ...
}
TDD-UL-DL-Pattern ::= SEQUENCE {
    dl-UL-TransmissionPeriodicity ENUMERATED {ms0p5, ms0p625, msl, mslp25, ms2, ms2p5, ms5, msl0},
    nrofDownlinkSlots
    nrofDownlinkSymbols INTEGER (O..maxNrofSymbols-1),
    nrofUplinkSlots INTEGER (O..maxNrofSlots),
    nrofUplinkSymbols INTEGER (O..maxNrofSymbols-1),
    ...;
    []
```

```
    ] ]
}
```


ETSI


--- Page 847  ---


3GPP TS 38.331 version 17.0.0 Release 17
846
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-TDD-UL-DL-CONFIGCOMMON-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline TDD-UL-DL-ConfigCommon field descriptions \\
\hline \begin{tabular}{l}
referenceSubcarrierSpacing \\
Reference SCS used to determine the time domain boundaries in the UL-DL pattern which must be common across all subcarrier specific carriers, i.e., independent of the actual subcarrier spacing using for data transmission. \\
Only the following values are applicable depending on the used frequency: \\
FR1: 15,30 , or 60 kHz \\
FR2-1: 60 or 120 kHz \\
FR2-2: 120,480 , or 960 kHz \\
The network configures a not larger than any SCS of configured BWPs for the serving cell. The network or SL-PreconfigGeneral configures a not larger than the SCS of (pre-)configured SL BWP.See TS 38.213 [13], clause 11.1.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline TDD-UL-DL-Pattern field descriptions \\
\hline \begin{tabular}{l}
di-UL-TransmissionPeriodicity \\
Periodicity of the DL-UL pattern, see TS 38.213 [13], clause 11.1. If the dl-UL-TransmissionPeriodicity-v1530 is signalled, UE shall ignore the dl-UL-TransmissionPeriodicity (without suffix).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofDownlinkSlots \\
Number of consecutive full DL slots at the beginning of each DL-UL pattern, see TS 38.213 [13], clause 11.1. In this release, the maximum value for this field is 80.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofDownlinkSymbols \\
Number of consecutive DL symbols in the beginning of the slot following the last full DL slot (as derived from nrofDownilinkSlots). The value 0 indicates that there is no partialdownlink slot. (see TS 38.213 [13], clause 11.1).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofUplinkSlots \\
Number of consecutive full UL slots at the end of each DL-UL pattern, see TS 38.213 [13], clause 11.1. In this release, the maximum value for this field is 80.
\end{tabular} \\
\hline \begin{tabular}{l}
nrofUplinkSymbols \\
Number of consecutive UL symbols in the end of the slot preceding the first full UL slot (as derived from nrofUplinkSlots). The value 0 indicates that there is no partial-uplink slot. (see TS 38.213 [13], clause 11.1).
\end{tabular} \\
\hline
\end{tabular}
- TDD-UL-DL-ConfigDedicated

The IE TDD-UL-DL-ConfigDedicated determines the UE-specific Uplink/Downlink TDD configuration.
TDD-UL-DL-ConfigDedicated information element
```
-- ASNISTART
-- TAG-TDD-UL-DL-CONFIGDEDICATED-START
TDD-UL-DL-ConfigDedicated ::= SEQUENCE \
```

```
    ...
}
```


ETSI


--- Page 848  ---


3GPP TS 38.331 version 17.0.0 Release 17
847
ETSI TS 138331 V17.0.0 (2022-05)
```
TDD-UL-DL-ConfigDedicated-IAB-MT-r16::= SEQUENCE {
```

```
N
```

```
N
...
}
TDD-UL-DL-SlotConfig ::= SEQUENCE \
    slotIndex TDD-UL-DL-SlotIndex,
    symbols CHOICE {
        allDownlink NULL,
        allUplink NULL,
        explicit SEQUENCE {
```

```
        }
    }
}
TDD-UL-DL-SlotConfig-IAB-MT-r16::= SEQUENCE {
    slotIndex-rl6
    TDD-UL-DL-SlotIndex,
        -MT-rl6 CHOICE |
        NULL,
        explicit-rl6 SEQUENCE {
            nrofDownlinkSymbols-rl6
            nrofUplinkSymbols-r16
        },
        explicit-IAB-MT-rl6 SEQUENCE {
            nrofDownlinkSymbols-r16
            nrofUplinkSymbols-rl6
        }
    }
}
TDD-UL-DL-SlotIndex ::= INTEGER (O..maxNrofSlots-1)
-- TAG-TDD-UL-DL-CONFIGDEDICATED-STOP
-- ASNISTOP
```


TDD-UL-DL-ConfigDedicated field descriptions
slotSpecificConfigurations ToAddModList
The slotSpecific Configuration ToAddModList allows overriding UL/DL allocations provided in tdd-UL-DL-configurationCommon, see TS 38.213 [13], clause 11.1.

ETSI


--- Page 849  ---


3GPP TS 38.331 version 17.0.0 Release 17
848
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline TDD-UL-DL-ConfigDedicated-IAB-MT field descriptions \\
\hline \begin{tabular}{l}
slotSpecificConfigurations ToAddModList-IAB-MT \\
The slotSpecific Configuration ToAddModList-IAB-MT allows overriding UL/DL allocations provided in tdd-UL-DL-configurationCommon with a limitation that effectively only flexible symbols can be overwritten in Rel-16.
\end{tabular} \\
\hline \begin{tabular}{l}
slotSpecificConfigurationsToReleaseList-IAB-MT \\
The siotSpecificConfigurationsToReleaseList-IAB-MT allows release of a set of slot configuration previously add with slotSpecificConfiguration ToAddModList-IAB-MT.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline TDD-UL-DL-SlotConfig field descriptions \\
\hline \begin{tabular}{l}
nrofDownlinkSymbols \\
Number of consecutive DL symbols in the beginning of the slot identified by slotindex. If the field is absent the UE assumes that there are no leading DL symbols. (see TS 38.213 [13], clause 11.1).
\end{tabular} \\
\hline \begin{tabular}{l}
nrofUplinkSymbols \\
Number of consecutive UL symbols in the end of the slot identified by slotindex. If the field is absent the UE assumes that there are no trailing UL symbols. (see TS 38.213 [13], clause 11.1).
\end{tabular} \\
\hline \begin{tabular}{l}
slotindex \\
Identifies a slot within a slot configuration period given in tdd-UL-DL-configurationCommon, see TS 38.213 [13], clause 11.1.
\end{tabular} \\
\hline \begin{tabular}{l}
symbols \\
The direction (downlink or uplink) for the symbols in this slot. Value allDownlink indicates that all symbols in this slot are used for downlink; value alluplink indicates that all symbols in this slot are used for uplink; value explicit indicates explicitly how many symbols in the beginning and end of this slot are allocated to downlink and uplink, respectively.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline TDD-UL-DL-SiotConfig-IAB-MT field descriptions \\
\hline \begin{tabular}{l}
symbols-IAB-MT \\
The symbols-/AB-MT is used to configure an IAB-MT with the SlotConfig applicable for one serving cell. Value allDownlink indicates that all symbols in this slot are used for downlink; value allUplink indicates that all symbols in this slot are used for uplink; value explicit indicates explicitly how many symbols in the beginning and end of this slot are allocated to downlink and uplink, respectively; value explicit-/AB-MT indicates explicitly how many symbols in the beginning and end of this slot are allocated to uplink and downlink, respectively.
\end{tabular} \\
\hline
\end{tabular}
- TrackingAreaCode

The IE TrackingAreaCode is used to identify a tracking area within the scope of a PLMN/SNPN, see TS 24.501 [23].
TrackingAreaCode information element
-- ASNISTART
-- TAG-TRACKINGAREACODE-START

TrackingAreaCode : : BIT STRING (SIZE (24))
-- TAG-TRACKINGAREACODE-STOP
-- ASNISTOP

ETSI


--- Page 850  ---


3GPP TS 38.331 version 17.0.0 Release 17
849
ETSI TS 138331 V17.0.0 (2022-05)

T-Reselection
The IE \( T \)-Reselection concerns the cell reselection timer Treselection \( { }_{\text {RAT }} \) for NR and E-UTRA Value in seconds. For value 0, behaviour as specified in 7.1.2 applies.
T-Reselectioninformation element
-- ASNISTART
-- TAG-TRESELECTION-START

T-Reselection ::= INTEGER (0..7)
-- TAG-TRESELECTION-STOP
-- ASNISTOP
- TimeToTrigger

The IE TimeToTrigger specifies the value range used for time to trigger parameter, which concerns the time during which specific criteria for the event needs to be met in order to trigger a measurement report. Value \( m s 0 \) corresponds to 0 ms and behaviour as specified in 7.1 .2 applies, value \( m s 40 \) corresponds to 40 ms , and so on.

Time ToTrigger information element
-- ASNISTART
-- TAG-TIMETOTRIGGER-START

TimeToTrigger : :=
ENUMERATED s
ms0, ms40, ms64, ms80, ms100, ms128, ms160, ms256,
ms320, ms480, ms512, ms640, ms1024, ms1280, ms2560, ms5120\}
-- TAG-TIMETOTRIGGER-STOP
-- ASNISTOP
- UAC-BarringInfoSetindex

The IE UAC-BarringInfoSetIndex provides the index of the entry in uac-BarringInfoSetList. Value 1 corresponds to the first entry in uac-BarringInfoSetList, value 2 corresponds to the second entry in this list and so on. An index value referring to an entry not included in uac-BarringInfoSetList indicates no barring.

UAC-BarringinfoSetindex information element
-- ASNISTART
-- TAG-UAC-BARRINGINEOSETINDEX-START
UAC-BarringInfoSetIndex : := INTEGER (1..maxBarringInfoSet)
-- TAG-UAC-BARRINGINFOSETINDEX-STOP
-- ASNISTOP

ETSI


--- Page 851  ---


3GPP TS 38.331 version 17.0.0 Release 17
850
ETSI TS 138331 V17.0.0 (2022-05)
- UAC-BarringInfoSetList

The IE UAC-BarringInfoSetList provides a list of access control parameter sets. An access category can be configured with access parameters according to one of the sets.
UAC-BarringinfoSetList information element
```
-- ASNISTART
-- TAG-UAC-BARRINGINFOSETLIST-START
UAC-BarringInfoSetList ::= SEQUENCE (SIZE(l..maxBarringInfoSet)) OF UAC-BarringInfoSet
UAC-BarringInfoSetList-vl700 ::= SEQUENCE (SIZE(l..maxBarringInfoSet)) OF UAC-BarringInfoSet-vl700
UAC-BarringInfoSet ::= SEQUENCE \
    uac-BarringFactor ENUMERATED {p00, p05, p10, p15, p20, p25, p30, p40,
                p50, p60, p70, p75, p80, p85, p90, p95},
    uac-BarringTime ENUMERATED {s4, s8, s16, s32, s64, s128, s256, s512},
    uac-BarringForAccessIdentity BIT STRING (SIZE(7))
}
UAC-BarringInfoSet-vl700 ::= SEQUENCE {
```

```
            OPTIONAL -- Need. S
}
-- TAG-UAC-BARRINGINFOSETLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UAC-BarringinfoSetList field descriptions \\
\hline \begin{tabular}{l}
uac-BarringinfoSetList \\
List of access control parameter sets. Each access category can be configured with access parameters corresponding to a particular set by uac-barringinfoSetindex. \\
Association of an access category with an index that has no corresponding entry in the uac-Barring/nfoSetList is valid configuration and indicates no barring.
\end{tabular} \\
\hline \begin{tabular}{l}
uac-BarringForAccessidentity \\
Indicates whether access attempt is allowed for each Access Identity. The leftmost bit, bit 0 in the bit string corresponds to Access Identity 1, bit 1 in the bit string corresponds to Access Identity 2, bit 2 in the bit string corresponds to Access Identity 11, bit 3 in the bit string corresponds to Access Identity 12, bit 4 in the bit string corresponds to Access Identity 13, bit 5 in the bit string corresponds to Access Identity 14, and bit 6 in the bit string corresponds to Access Identity 15. Value 0 means that access attempt is allowed for the corresponding access identity.
\end{tabular} \\
\hline \begin{tabular}{l}
uac-BarringFactor \\
Represents the probability that access attempt would be allowed during access barring check.
\end{tabular} \\
\hline \begin{tabular}{l}
uac-BarringFactorForAI3 \\
Barring factor applicable for Access Identity 3. Represents the probability that access attempt would be allowed during access barring check. If absent, the UE considers the access attempt as allowed.
\end{tabular} \\
\hline \begin{tabular}{l}
uac-BarringTime \\
The average time in seconds before a new access attempt is to be performed after an access attempt was barred at access barring check for the same access category, see 5.3.14.5.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 852  ---


3GPP TS 38.331 version 17.0.0 Release 17
851
ETSI TS 138331 V17.0.0 (2022-05)
- UAC-BarringPerCatList

The IE UAC-BarringPerCatList provides access control parameters for a list of access categories.
UAC-BarringPerCatList information element
```
-- ASNISTART
-- TAG-UAC-BARRINGPERCATLIST-START
UAC-BarringPerCatList ::=
SEQUENCE (SIZE (l..maxAccessCat-l)) OF UAC-BarringPerCat
UAC-BarringPerCat ::=
    accessCategory
    uac-barringInfoSetIndex
}
-- TAG-UAC-BARRINGPERCATLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UAC-BarringPerCatList field descriptions \\
\hline accessCategory \\
The Access Category according to TS 22.261 [25]. \\
\hline
\end{tabular}
- UAC-BarringPerPLMN-List

The IE UAC-BarringPerPLMN-List provides access category specific access control parameters, which are configured per PLMN/SNPN.
UAC-BarringPerPLMN-List information element
```
-- ASNISTART
-- TAG-UAC-BARRINGPERPLMN-LIST-START
UAC-BarringPerPLMN-List ::= SEQUENCE (SIZE (1.. maxPLMN)) OF UAC-BarringPerPLMN
UAC-BarringPerPLMN ::= SEQUENCE \
    plmn-IdentityIndex
    uac-ACBarringListType
        uac-ImplicitACBarringList SEQUENCE (SIZE(maxAccessCat-1)) OF UAC-BarringInfoSetIndex,
        uac-ExplicitACBarringList UAC-BarringPerCatList
    }
```

\}

OPTIONAL -- Need S

-- TAG-UAC-BARRINGPERPLMN-LIST-STOP
-- ASNISTOP

ETSI


--- Page 853  ---


3GPP TS 38.331 version 17.0.0 Release 17
852
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UAC-BarringPerPLMN-List field descriptions \\
\hline \begin{tabular}{l}
uac-ACBarringListType \\
Access control parameters for each access category valid only for a specific PLMN or SNPN. UE behaviour upon absence of this field is specified in clause 5.3.14.2.
\end{tabular} \\
\hline \begin{tabular}{l}
pimn-identityindex \\
Index of the PLMN or SNPN across the pimn-IdentitylnfoList and non-IdentitylnfoList fields included in SIB1.
\end{tabular} \\
\hline
\end{tabular}
- UE-TimersAndConstants

The IE UE-TimersAndConstants contains timers and constants used by the UE in RRC_CONNECTED, RRC_INACTIVE and RRC_IDLE.
UE-TimersAndConstants information element
```
-- ASNISTART
-- TAG-UE-TIMERSANDCONSTANTS-START
UE-TimersAndConstants ::=
    t300
    t301
    t310
    n310
    t 311 ENUMERATED {mslooo, ms3000, ms5000, ms10000, ms15000, ms20000, ms30000},
    n311 ENUMERATED {n1, n2, n3, n4, n5, n6, n8, nl0},
    t 319 ENUMERATED {ms100, ms200, ms300, ms400, ms600, ms1000, ms1500, ms2000},
    ...
}
-- TAG-UE-TIMERSANDCONSTANTS-STOP
-- ASN1STOP
```

- UE-TimersAndConstants-RemoteUE

The IE UE-TimersAndConstants-RemoteUE contains timers and constants used by the L2 U2N Remote UE in RRC_CONNECTED, RRC_INACTIVE and RRC_IDLE.

UE-TimersAndConstants-RemoteUE information element
```
-- ASNISTART
-- TAG-UE-TIMERSANDCONSTANTS-REMOTEUE-START
UE-TimersAndConstants-RemoteUE-rl7 ::= SEQUENCE [
```

```
    ...
}
-- TAG-UE-TIMERSANDCONSTANTS-REMOTEUE-STOP
-- ASNISTOP
```


ETSI


--- Page 854  ---


3GPP TS 38.331 version 17.0.0 Release 17
853
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UE-TimersAndConstants field descriptions \\
\hline \begin{tabular}{l}
t300-RemoteUE \\
Indicates the timer value of T300 used by L2 U2N Remote UE. If the field is absent, the timer value indicated in t300 applies to L2 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
t301-RemoteUE \\
Indicates the timer value of T301 used by L2 U2N Remote UE. If the field is absent, the timer value indicated in t301 applies to L2 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
t319-RemoteUE \\
Indicates the timer value of T319 used by L2 U2N Remote UE. If the field is absent, the timer value indicated in t319 applies to L2 U2N Remote UE.
\end{tabular} \\
\hline
\end{tabular}
- UL-DelayValueConfig

The IE UL-DelayValueConfig IE specifies the configuration of the UL PDCP Packet Delay value per DRB measurement specified in TS 38.314 [53].
UL-DelayValueConfig information element
```
-- ASNISTART
-- TAG-ULDELAYVALUECONFIG-START
UL-DelayValueConfig-rl6 ::= SEQUENCE {
    delay-DRBlist SEQUENCE (SIZE(l..maxDRB)) OF DRB-Identity
}
-- TAG-ULDELAYVALUECONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UL-DelayValueConfig field descriptions \\
\hline Delay-DRBlist \\
Indicates the DRB IDs used by UE to provide results of UL PDCP Packet Delay value per DRB measurement as specified in TS 38.314 [53]. \\
\hline
\end{tabular}
- UL-ExcessDelayConfig

The IE UL-ExcessDelayConfig IE specifies the configuration of the UL PDCP Excess Packet Delay per DRB measurement specified in TS 38.314 [53].
UL-ExcessDelayConfig information element
```
-- ASNISTART
-- TAG-ULEXCESSDELAYCONFIG-START
UL-ExcessDelayConfig-rl7 ::= SEQUENCE [
    excessDelay-DRBlist-rl7 SEQUENCE (SIZE(l..maxDRB)) OF ExcessDelay-DRB-IdentityInfo-rl7
}
ExcessDelay-DRB-IdentityInfo-rl7 ::= SEQUENCE [
```


ETSI


--- Page 855  ---


3GPP TS 38.331 version 17.0.0 Release 17
854
ETSI TS 138331 V17.0.0 (2022-05)
```
drb-IdentityList
delayThreshold.
```

```
SEQUENCE (SIZE (l..maxDRB)) OF DRB-Identity,
ENUMERATED {ms0dot25, ms0dot5, msl, ms2, ms4, ms5, msl0, ms20, ms30, ms40, ms50, ms60, ms70,
    ms80, ms90, ms100, ms150, ms300, ms500}
```

\}
-- TAG-ULEXCESSDELAYCONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline UL-ExcessDelayConfig field descriptions \\
\hline \begin{tabular}{l}
drb-IdentityList \\
Indicates the DRB IDs used by UE to provide results of UL PDCP Excess Packet Delay per DRB measurement as specified in TS 38.314 [53].
\end{tabular} \\
\hline \begin{tabular}{l}
delayThreshold \\
Indicates the delay threshold for the DRB IDs indicated in DRB-IdentityList. Value ms0dot25 corresponds to 0.25 ms , ms0dot5 corresponds to 0.5 ms , ms1 corresponds to 1 ms and so on.
\end{tabular} \\
\hline
\end{tabular}
- UL-GapFR2-Config

The IE UL-GapFR2-Config specifies the FR2 uplink gap configuration.
UL-GapFR2-Config information element
```
-- ASNISTART
-- TAG-UL-GAPFR2-CONFIG-START
UL-GapFR2-Config-rl7 ::=
SEQUENCE {
    gapOffset-rl7
    ugl-rl7
    ugrp-rl7
    ENUMERATED {ms5, ms20, ms40, ms160},
}
-- TAG-UL-GAPFR2-CONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UL-GapFR2-Config field descriptions \\
\hline \begin{tabular}{l}
gapOffset \\
Value gapOffset is the gap offset of the FR2 UL gap pattern with UGRP indicated in the field ugrp. The value range is from 0 to ugrp-1.
\end{tabular} \\
\hline \begin{tabular}{l}
refFR2ServCellAsyncCA \\
Indicates the FR2 serving cell identifier whose SFN and subframe is used for FR2 UL gap calculation for this gap pattern with asynchronous CA involving FR2 carrier(s).
\end{tabular} \\
\hline \begin{tabular}{l}
\( u g / \) \\
Value ugl is the gap length in ms of the FR2 UL gap. The FR2 UL gap length is according to in Table 9.1.7 in TS 38.133 [14]. Value msOdot 125 corresponds to 0.125 ms , msOdot25 corresponds to 0.25 ms and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
ugrp \\
Value ugrp is the gap repetition period in (ms) of the FR2 UL gap. The FR2 UL gap repetition period is according to Table 9.1.7 in TS 38.133 [14].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 856  ---


3GPP TS 38.331 version 17.0.0 Release 17
855
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline AsyncCA & This field is mandatory present when configuring FR2 UL gap pattern to UE in: \\
& - (NG)EN-DC, NR SA, NE-DC or NR-DC without FR2-FR2 band combination, with asynchronous CA involving FR2 carriers. \\
\hline
\end{tabular}
- UplinkCancellation

The IE UplinkCancellation is used to configure the UE to monitor PDCCH for the CI-RNTI.
UplinkCancellation information element
```
-- ASNISTART
-- TAG-UPLINKCANCELLATION-START
UplinkCancellation-rl6 ::= SEQUENCE {
    ci-RNTI-rl6
    dci-PayloadSizeForCI-rl6 INTEGER (O..maxCI-DCI-PayloadSize-r16),
    ci-ConfigurationPerServingCell-rl6 SEQUENCE (SIZE (l..MaxNrofServingCells)) OF CI-ConfigurationPerServingCell-rl6,
    ...
}
CI-ConfigurationPerServingCell-rl6 ::= SEQUENCE {
    servingCellId
    ServCellIndex,
    INTEGER (O..maxCI-DCI-PayloadSize-l-r16),
```

```
    timeErequencyRegion-rl6
        timeDurationForCI-rl6
SymbolPeriodicity
        timeGranularityForCI-rl6 ENUMERATED {nl, n2, n4, n7, nl4, n28},
        frequencyRegionForCI-rl6 INTEGER (0..37949),
        deltaOffset-rl6 INTEGER (0..2),
        ...
    },
    uplinkCancellationPriority-vl610 ENUMERATED {enabled}
```

\}
-- TAG-UPLINKCANCELLATION-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline UplinkCancellation field descriptions \\
\hline \begin{tabular}{l}
ci-ConfigurationPerServingCell \\
Indicates (per serving cell) the position of the ci-PaylaodSize bit CI values inside the DCI payload (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline \begin{tabular}{l}
ci-RNTI \\
RNTI used for indication cancellation in UL (see TS 38.212 [17] clause 7.3 .1 and TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline \begin{tabular}{l}
dci-PayloadSizeForCl \\
Total length of the DCI payload scrambled with CI-RNTI (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 857  ---


3GPP TS 38.331 version 17.0.0 Release 17
856
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CI-ConfigurationPerServingCell field descriptions \\
\hline \begin{tabular}{l}
ci-PayloadSize \\
Configures the field size for each UL cancelation indicator of this serving cell (servingCellId) (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline \begin{tabular}{l}
deltaOffset \\
Configures the additional offset from the end of a PDCCH reception where the UE detects the DCI format 2 _ 4 and the first symbol of the T _"CI" symbols, in the unit of OFDM symbols (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline \begin{tabular}{l}
frequencyRegionForCI \\
Configures the reference frequency region where a detected UL CI is applicable (see TS 38.213 [13], clause 11.2A). It is defined in the same way as locationAndBandwidth.
\end{tabular} \\
\hline \begin{tabular}{l}
positioninDCI \\
Starting position (in number of bit) of the ci-PayloadSize bit CI value applicable for this serving cell (servingCellId) within the DCI payload (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline \begin{tabular}{l}
positioninDCI-ForSUL \\
Starting position (in number of bit) of the ci-PayloadSize bit CI value applicable for SUL of this serving cell (servingCellId) within the DCI payload (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline \begin{tabular}{l}
timeDurationForCl \\
Configures the duration of the reference time region in symbols where a detected UL CI is applicable of this serving cell (servingCellId) (see TS 38.213 [13], clause 11.2A). If the field is absent, i.e., the configured UL CI monitoring periodicity indicated by monitoringSlotPeriodicityAndOffset for DCI format 2_4 is larger than 1 slot or 1 slot with only one monitoring occasion, the UE applies the value of the configured UL CI monitoring periodicity,
\end{tabular} \\
\hline \begin{tabular}{l}
timeFrequencyRegion \\
Configures the reference time and frequency region where a detected UL CI is applicable of this serving cell (servingCellId) (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline \begin{tabular}{l}
timeGranularityForCl \\
Configures the number of partitions within the time region of this serving cell (servingCelld) (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkCancellationPriority \\
Configures uplink cancellation behavior if both UL Cl and intra-UE priority indicator are configured for a given UE. If the field is present, then UL Cl is only applicable to the UL transmissions indicated/configured as low priority level. If the field is absent, UL CI is applicable to UL transmission irrespective of its priority level (see TS 38.213 [13], clause 11.2A).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline SUL-Only & The field is optionally present, Need R, if supplementaryUplink is configured in ServingCellConfig. It is absent otherwise. \\
\hline SymbolPeriodicity & This field is mandatory present if the configured UL CI monitoring periodicity indicated by monitoringSlotPeriodicityAndOffset for DCI format 2 _4 is 1 slot with more than one monitoring occasion, otherwise absent. \\
\hline
\end{tabular}
- UplinkConfigCommon

The IE UplinkConfigCommon provides common uplink parameters of a cell.
UplinkConfigCommon information element
```
-- ASNISTART
-- TAG-UPLINKCONFIGCOMMON-START
UplinkConfigCommon ::= SEQUENCE {
    frequencylnfoUL FrequencyInfoUL
    initialUplinkBWP BWP-UplinkCommon
    dummy TimeAlignmentTimer
}
```


ETSI


--- Page 858  ---


3GPP TS 38.331 version 17.0.0 Release 17
857
ETSI TS 138331 V17.0.0 (2022-05)
```
UplinkConfigCommon-vl700 ::= SEQUENCE {
    initialUplinkBWP-RedCap-rl7
}
-- TAG-UPLINKCONFIGCOMMON-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UplinkConfigCommon field descriptions \\
\hline \begin{tabular}{l}
frequencyinfoUL \\
Absolute uplink frequency configuration and subcarrier specific virtual carriers.
\end{tabular} \\
\hline \begin{tabular}{l}
initialUplinkBWP \\
The initial uplink BWP configuration for a serving cell (see TS 38.213 [13], clause 12).
\end{tabular} \\
\hline \begin{tabular}{l}
initialUplinkBWP-RedCap \\
If present, RedCap UEs use this UL BWP instead of initialUplinkBWP. \\
If absent, RedCap UEs use initialUplinkBWP provided that it does not exceed the RedCap UE maximum bandwidth (see also clause 5.2.2.4.2).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline InterFreqHOAndServCellAdd & This field is mandatory present for inter-frequency handover and upon serving cell (PSCell/SCell) addition. Otherwise, the field is optionally present, Need M. \\
\hline ServCellAdd & This field is mandatory present upon serving cell addition (for PSCell and SCell) and upon handover from E-UTRA to NR. It is optionally present, Need M otherwise. \\
\hline
\end{tabular}

一
UplinkConfigCommonSIB
The IE UplinkConfigCommonSIB provides common uplink parameters of a cell.
UplinkConfigCommonSIB information element
```
-- ASNISTART
-- TAG-UPLINKCONFIGCOMMONSIB-START
UplinkConfigCommonSIB ::=
SEQUENCE {
    FrequencylnfoUL-SIB,
    BWP-UplinkCommon,
    TimeAlignmentTimer
SEQUENCE \
UplinkConfigCommonSIB-vl700 ::=
    initialUplinkBWP-RedCap-rl7
}
-- TAG-UPLINKCONFIGCOMMONSIB-STOP
-- ASNISTOP
```


ETSI


--- Page 859  ---


3GPP TS 38.331 version 17.0.0 Release 17
858
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UplinkConfigCommonSIB field descriptions \\
\hline \begin{tabular}{l}
frequencyinfoUL \\
Absolute uplink frequency configuration and subcarrier specific virtual carriers.
\end{tabular} \\
\hline \begin{tabular}{l}
InitialUplinkBWP \\
The initial uplink BWP configuration for a PCell (see TS 38.213 [13], clause 12).
\end{tabular} \\
\hline \begin{tabular}{l}
initialUplinkBWP-RedCap \\
If present, RedCap UEs use this UL BWP instead of initialUplinkBWP. \\
If absent, RedCap UEs use initialUplinkBWP provided that it does not exceed the RedCap UE maximum bandwidth (see also clause 5.2.2.4.2).
\end{tabular} \\
\hline
\end{tabular}
- Uplink-PowerControl

The IE Uplink-PowerControl is used to configure UE specific power control parameter for PUSCH, PUCCH and SRS.
Uplink-PowerContro/information element
```
-- ASNISTART
-- TAG-UPLINK-POWERCONTROL-START
Uplink-powerControl-rl7 ::= SEQUENCE {
```

```
}
POAlphaSet-rl7 ::= SEQUENCE {
```

```
    closedLoopIndex-rl7 ENUMERATED { i0, il }
}
Uplink-powerControlId-rl7 ::= INTEGER(l.. maxULTCI-rl7)
-- editor's note: how to handle any legacy power control parameters, where to state those are not configred/applied?
-- TAG-UPLINK-PONERCONTROL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline Uplink-PowerControl field descriptions \\
\hline UL-powerControl \\
Configures power control parameters for PUSCH, PUCCH and SRS. \\
\hline
\end{tabular}

ETSI


--- Page 860  ---


3GPP TS 38.331 version 17.0.0 Release 17
859
ETSI TS 138331 V17.0.0 (2022-05)
- Uu-Relay-RLC-ChannelConfig

The IE Uu-Relay-RLC-ChannelConfig is used to configure an RLC entity, a corresponding logical channel in MAC for Uu Relay RLC channel between L2 U2N Relay UE and network.

Uu-Relay-RLC-Channe/Config information element
```
-- ASNISTART
-- TAG-UURELAYRLCCHANNELCONFIG-START
Uu-Relay-RLC-ChannelConfig-rl7::= SEQUENCE {
    uu-LogicalChannelIdentity-rl7 LogicalChannelIdentity OPTIONAL, -- Cond LCH-SetupOnly
    uu-Relay-RLC-ChannelID-rl7 Uu-Relay-RLC-ChannelID-rl7,
    reestablishRLC-rl7 ENUMERATED {true} OPTIONAL, -- Need. N
    rlc-Config-rl7 RLC-Config OPTIONAL, -- Cond LCH-Setup
    mac-LogicalChannelConfig-rl7 LogicalChannelConfig OPTIONAL, -- Cond LCH-Setup
}
-- TAG-UURELAYRLCCHANNELCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline Uu-Relay-RLC-ChannelConfig field descriptions \\
\hline \begin{tabular}{l}
uu-LogicalChannelldentity \\
Indicates the logical channel id for Uu Relay RLC channel of the L2 U2N Relay UE.
\end{tabular} \\
\hline \begin{tabular}{l}
uu-Relay-RLC-ChannellD \\
Indicates the Uu Relay RLC channel in the link between L2 U2N Relay UE and network.
\end{tabular} \\
\hline \begin{tabular}{l}
reestablishRLC \\
Indicates that RLC should be re-established.
\end{tabular} \\
\hline \begin{tabular}{l}
ric-Config \\
Determines the RLC mode (UM, AM) and provides corresponding parameters.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline LCH-Setup & This field is mandatory present upon creation of a new logical channel for a Uu Relay RLC channel. It is optionally present, Need M, otherwise. \\
\hline LCH-SetupOnly & This field is mandatory present upon creation of a new logical channel for a Uu Relay RLC channel. It is absent, Need M otherwise. \\
\hline
\end{tabular}
- Uu-Relay-RLC-ChannellD

The IE Uu-Relay-RLC-ChannellD is used to identify a Uu Relay RLC channel in the link between L2 U2N Relay UE and network.
Uu-Relay-RLC-ChannellD information element

-- ASNISTART
ETSI


--- Page 861  ---


3GPP TS 38.331 version 17.0.0 Release 17
860
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-UURELAYRLCCHANNELID-START

Uu-Relay-RLC-ChannelID-rl7 ::= BIT STRING (SIZE (16))
-- TAG-UURELAYRLCCHANNELID-STOP
-- ASNISTOP
- UplinkTxDirectCurrentList

The IE UplinkTxDirectCurrentList indicates the Tx Direct Current locations per serving cell for each configured UL BWP in the serving cell, based on the BWP numerology and the associated carrier bandwidth.

Uplink TxDirectCurrentList information element
```
-- ASNISTART
-- TAG-UPLINKTXDIRECTCURRENTLIST-START
UplinkTxDirectCurrentList ::= SEQUENCE (SIZE (l..maxNrofServingCells)) OF UplinkTxDirectCurrentCell
UplinkTxDirectCurrentCell := SEQUENCE \
    servCellIndex
    uplink ServCellIndex
    ...,
    [ [
    uplinkDirectCurrentBWP-SUL
    ]]
}
UplinkTxDirectCurrentBWP ::=
    bwp-Id.
    shift7dot5kHz
    txDirectCurrentLocation
}
-- TAG-UPLINKTXDIRECTCURRENTLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline Uplink TxDirectCurrentBWP field descriptions \\
\hline \begin{tabular}{l}
bwp-id \\
The BWP-Id of the corresponding uplink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
shift7dot5kHz \\
Indicates whether there is 7.5 kHz shift or not. 7.5 kHz shift is applied if the field is set to true. Otherwise 7.5 kHz shift is not applied.
\end{tabular} \\
\hline \begin{tabular}{l}
txDirectCurrentLocation \\
The uplink Tx Direct Current location for the carrier. Only values in the value range of this field between 0 and 3299, which indicate the subcarrier index within the carrier corresponding to the numerology of the corresponding uplink BWP and value 3300 , which indicates "Outside the carrier" and value 3301 , which indicates "Undetermined position within the carrier" are used in this version of the specification.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 862  ---


3GPP TS 38.331 version 17.0.0 Release 17
861
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UplinkTxDirectCurrentCell field descriptions \\
\hline \begin{tabular}{l}
servCellindex \\
The serving cell ID of the serving cell corresponding to the uplinkDirectCurrentBWP.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkDirectCurrentBWP \\
The Tx Direct Current locations for all the uplink BWPs configured at the corresponding serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkDirectCurrentBWP-SUL \\
The Tx Direct Current locations for all the supplementary uplink BWPs configured at the corresponding serving cell.
\end{tabular} \\
\hline
\end{tabular}
- UplinkTxDirectCurrentTwoCarrierList

The IE UplinkTxDirectCurrentTwoCarrierList indicates the Tx Direct Current locations when uplink intra-band CA with two carriers is configured, based on the configured carriers and BWP numerology and the associated carrier bandwidth of the carriers. The UE does not report the uplink Direct Current location information for SUL carrier(s).

UplinkTxDirectCurrentTwoCarrierList information element
```
-- ASNISTART
-- TAG-UPLINKTXDIRECTCURRENTTWOCARRIERLIST-START
```

```
UplinkTxDirectCurrentTwoCarrier-rl6 ::= SEQUENCE {
    carrierOneInfo-rl6 UplinkTxDirectCurrentCarrierInfo-rl6,
    carrierTwoInfo-rl6 UplinkTxDirectCurrentCarrierInfo-rl6,
    singlePA-TxDirectCurrent-rl6 UplinkTxDirectCurrentTwoCarrierInfo-rl6,
    secondPA-TxDirectCurrent-rl6 UplinkTxDirectCurrentTwoCarrierInfo-rl6 OPTIONAL
}
UplinkTxDirectCurrentCarrierInfo-rl6 := SEQUENCE \
    servCell
    servs servCellindex,
        CHOICE l
        BWP-Id,
    }
}
UplinkTxDirectCurrentTwoCarrierInfo-rl6 := SEQUENCE {
    referenceCarrierIndex-rl6 ServCellIndex,
    shift7dot5kHz-rl6 BOOLEAN,
    txDirectCurrentLocation-rl6 INTEGER (0..3301)
}
-- TAG-UPLINKTXDIRECTCURRENTTWOCARRIERLIST-STOP
-- ASNISTOP
```


ETSI


--- Page 863  ---


3GPP TS 38.331 version 17.0.0 Release 17
862
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UplinkTxDirectCurrentTwoCarrierInfo field descriptions \\
\hline \begin{tabular}{l}
referenceCarrierIndex \\
The serving cell ID of the carrier which is to be used as the reference for interpreting the Tx Direction Current location as reported using txDirectCurrentLocation-r16. The numerology of the uplink BWP ID reported with bwp-/d-r16 for this serving cell is the numerology used for interpreting the reported subcarrier location.
\end{tabular} \\
\hline \begin{tabular}{l}
shift7dot5kHz \\
Indicates whether there is 7.5 kHz shift or not. 7.5 kHz shift is applied if the field is set to true. Otherwise 7.5 kHz shift is not applied.
\end{tabular} \\
\hline \begin{tabular}{l}
txDirectCurrentLocation \\
The uplink Tx Direct Current location for the two carrier uplink CA with the serving cells reported using carrierOnelnfo-r16 and carrierTwolnfo-r16. Values in the range of this field between 0 and 3299 indicate the subcarrier index of the uplink Tx Direct Current location with the subcarrier taken from the serving cell with ID referenceCarrierindex and the numerology of the corresponding uplink BWP reported for this serving cell. Value 3300 indicates "Outside the carrier" and value 3301 indicates "Undetermined position within the carrier".
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline UplinkTxDirectCurrentCarrierinfo field descriptions \\
\hline \begin{tabular}{l}
bwp-ld \\
The BWP ID of the serving cell which is part of the two carrier uplink carrier aggregation. The UE shall not report this field if the serving cell is reported as deactivated using deactivatedCarrier-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
deactivatedCarrier \\
For the reported uplink Tx Direct Current location(s) corresponding to singlePA-TxDirectCurrent-r16, indicates whether the carrier is deactivated or not for this serving cell. If the carrier refers to the PCell, the UE shall not set this field to deactivated.
\end{tabular} \\
\hline \begin{tabular}{l}
servCellindex \\
The serving cell ID of the serving cell which is part of the two carrier uplink carrier aggregation.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline Uplink TxDirectCurrentTwoCarrier field descriptions \\
\hline \begin{tabular}{l}
carrierOneinfo \\
The serving cell ID and BWP ID of the first carrier of the uplink carrier aggregation for which the uplink Tx Direct Current location(s) are being reported.
\end{tabular} \\
\hline \begin{tabular}{l}
carrierTwoinfo \\
The serving cell ID and BWP ID of the second carrier of the uplink carrier aggregation for which the uplink Tx Direct Current location(s) are being reported.
\end{tabular} \\
\hline \begin{tabular}{l}
singlePA-TxDirectCurrent \\
The uplink Tx Direct Current location for the UE which support single PA for this uplink carrier aggregation. For the UEs which support dual PA for this uplink carrier aggregation, this field is for reporting the uplink Tx Direct Current location of the first PA.
\end{tabular} \\
\hline \begin{tabular}{l}
secondPA-TxDirectCurrent \\
The uplink Tx Direct Current location used by the UE with the second PA for the UEs which support dual PA for this uplink carrier aggregation. This field shall be absent for the UplinkTxDirectCurrentTwoCarrier entity where deactivatedCarrier of carrierOnelnfo or carrierTwolnfo is set to deactivated.
\end{tabular} \\
\hline
\end{tabular}
- ZP-CSI-RS-Resource

The IE ZP-CSI-RS-Resource is used to configure a Zero-Power (ZP) CSI-RS resource (see TS 38.214 [19], clause 5.1.4.2). Reconfiguration of a ZP-CSI-RS-Resource between periodic or semi-persistent and aperiodic is not supported.

ZP-CSI-RS-Resource information element
-- ASNISTART
-- TAG-ZP-CSI-RS-RESOURCE-START

ETSI


--- Page 864  ---


3GPP TS 38.331 version 17.0.0 Release 17
863
ETSI TS 138331 V17.0.0 (2022-05)
```
ZP-CSI-RS-Resource ::=
    zp-CSI-RS-ResourceId
    resourceMapping
    periodicityAndOffset
    ...
}
```

ZP-CSI-RS-ResourceId : : INTEGER (O. maxNrofZP-CSI-RS-Resources-1)
-- TAG-ZP-CSI-RS-RESOURCE-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline ZP-CSI-RS-Resource field descriptions \\
\hline \begin{tabular}{l}
periodicityAndOffset \\
Periodicity and slot offset for periodic/semi-persistent ZP-CSI-RS (see TS 38.214 [19], clause 5.1.4.2). Network always configures the UE with a value for this field for periodic and semi-persistent ZP-CSI-RS resource (as indicated in PDSCH-Config).
\end{tabular} \\
\hline \begin{tabular}{l}
resourceMapping \\
OFDM symbol and subcarrier occupancy of the ZP-CSI-RS resource within a slot.
\end{tabular} \\
\hline \begin{tabular}{l}
zp-CSI-RS-Resourceld \\
ZP CSI-RS resource configuration ID (see TS 38.214 [19], clause 5.1.4.2).
\end{tabular} \\
\hline
\end{tabular}
- ZP-CSI-RS-ResourceSet

The IE ZP-CSI-RS-ResourceSet refers to a set of ZP-CSI-RS-Resources using their ZP-CSI-RS-Resourcelds.
ZP-CSI-RS-ResourceSet information element
```
-- ASNISTART
-- TAG-ZP-CSI-RS-RESOURCESET-START
ZP-CSI-RS-ResourceSet ::=
    zp-CSI-RS-ResourceSetId
    zp-CSI-RS-ResourceIdList
    ...
}
-- TAG-ZP-CSI-RS-RESOURCESET-STOP
-- ASNISTOP
                                                                                                                                }
```

```
                                        NISTOP
SEQUENCE 1
        ZP-CSI-RS-ResourceSetId,
    SEQUENCE (SIZE(l..maxNrofZP-CSI-RS-ResourcesPerSet)) OF ZP-CSI-RS-ResourceId,
```

```
SEQUENCE \
    ZP-CSI-RS-ResourceId,
    CSI-RS-ResourceMapping,
    CSI-ResourcePeriodicityAndOffset OPTIONAL, --Cond PeriodicOrSemiPersistent
```

INTEGER (O. . maxNrofZP-CSI-RS-Resources-1)

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{c|}{ Explanation } \\
\hline PeriodicOrSemiPersistent & \begin{tabular}{l} 
The field is optionally present, Need M, for periodic and semi-persistent ZP-CSI-RS-Resources (as indicated in PDSCH- \\
Config). The field is absent otherwise.
\end{tabular} \\
\hline
\end{tabular}
                        ZP-CSI-RS-ResourceSet information element

ETSI


--- Page 865  ---


3GPP TS 38.331 version 17.0.0 Release 17
864
ETSI TS 138331 V17.0.0 (2022-05)

ZP-CSI-RS-ResourceSet field descriptions
zp-CSI-RS-ResourceldList
The list of ZP-CSI-RS-Resourceld identifying the ZP-CSI-RS-Resource elements belonging to this set.

ZP-CSI-RS-ResourceSettld
The IE ZP-CSI-RS-ResourceSetld identifies a ZP-CSI-RS-ResourceSet.
ZP-CSI-RS-ResourceSetid information element
-- ASNISTART
-- TAG-ZP-CSI-RS-RESOURCESETID-START
ZP-CSI-RS-ResourceSetId::=
INTEGER (O. MAXNrofZP-CSI-RS-ResourceSets-1)
-- TAG-ZP-CSI-RS-RESOURCESETID-STOP
-- ASNISTOP
6.3.3 UE capability information elements
- AccessStratumRelease

The IE AccessStratumRelease indicates the release supported by the UE.
AccessStratumRelease information element
-- ASNISTART
-- TAG-ACCESSSTRATUMRELEASE-START
Access StratumRelease : : ENUMERATED [
rell5, rel16, rell7, spare5, spare4, spare3, spare2, sparel, ... \}
-- TAG-ACCESSSTRATUMRELEASE-STOP
-- ASNISTOP
- BandCombinationList

The IE BandCombinationList contains a list of NR CA, NR non-CA and/or MR-DC band combinations (also including DL only or UL only band).
BandCombinationList information element
-- ASNISTART

ETSI


--- Page 866  ---


3GPP TS 38.331 version 17.0.0 Release 17
865
ETSI TS 138331 V17.0.0 (2022-05)

\begin{table}
\captionsetup{labelformat=empty}
\caption{-- TAG-BANDCOMBINATIONLIST-START}
\begin{tabular}{|l|l|}
\hline BandCombinationList : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination \\
\hline BandCombinationList-v1540 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl540 \\
\hline BandCombinationList-v1550 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl550 \\
\hline BandCombinationList-v1560 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl560 \\
\hline BandCombinationList-v1570 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl570 \\
\hline BandCombinationList-v1580 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl580 \\
\hline BandCombinationList-vl590 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl590 \\
\hline BandCombinationList-vl5g0 : := & SEQUENCE (SIZE (l...maxBandComb)) OF BandCombination-vl5gO \\
\hline BandCombinationList-v1610 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl610 \\
\hline BandCombinationList-vl630 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl630 \\
\hline BandCombinationList-vl640 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl640 \\
\hline BandCombinationList-vl650 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl650 \\
\hline BandCombinationList-vl680 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl680 \\
\hline BandCombinationList-vl700 : := & SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-vl700 \\
\hline & BandCombinationList-UplinkTxSwitch-rl6::= SEQUENCE (SIZE (l..maxBandComb)) OF BandCombination-UplinkTxSwitch-rl6 \\
\hline \multicolumn{2}{|c|}{BandCombinationList-UplinkTxSwitch-vl630 : := SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-UplinkTxSwitch-vl630} \\
\hline \multicolumn{2}{|c|}{BandCombinationList-UplinkTxSwitch-vl640 : := SEQUENCE (SIZE (l..maxBandComb)) OF BandCombination-UplinkTxSwitch-vl640} \\
\hline & BandCombinationList-UplinkTxSwitch-vl650 : := SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-UplinkTxSwitch-vl650 \\
\hline \multicolumn{2}{|c|}{BandCombinationList-UplinkTxSwitch-vl670 : := SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-UplinkTxSwitch-vl670} \\
\hline \multicolumn{2}{|c|}{BandCombinationList-UplinkTxSwitch-vl700 : : SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination-UplinkTxSwitch-vl700} \\
\hline BandCombination ::= bandList featureSetCombination ca-ParametersEUTRA ca-ParametersNR mrdc-Parameters supportedBandwidthCombinationSet powerClass-vl530 & \begin{tabular}{l}
SEQUENCE 1 \\
SEQUENCE (SIZE (l..maxSimultaneousBands)) OF BandParameters, \\
FeatureSetCombinationId, \\
CA-ParametersEUTRA \\
OPTIONAL, \\
CA-ParametersNR \\
OPTIONAL, \\
MRDC-Parameters \\
OPTIONAL, \\
BIT STRING (SIZE (1..32)) \\
OPTIONAL, \\
ENUMERATED \{pc2\} \\
OPTIONAL
\end{tabular} \\
\hline \begin{tabular}{l}
BandCombination-vl540::= \\
bandList-vl540
\end{tabular} & \begin{tabular}{l}
SEQUENCE 1 \\
SEQUENCE (SIZE (1..maxSimultaneousBands)) OF BandParameters-vl540,
\end{tabular} \\
\hline
\end{tabular}
\end{table}

ETSI


--- Page 867  ---


3GPP TS 38.331 version 17.0.0 Release 17
866
ETSI TS 138331 V17.0.0 (2022-05)
```
    ca-ParametersNR-v1540 CA-ParametersNR-v1540 OPTIONAL
}
BandCombination-vl550 ::= SEQUENCE \
    ca-ParametersNR-vl550 CA-ParametersNR-v1550
}
BandCombination-vl560::= SEQUENCE {
    ne-DC-BC
    ca-ParametersNRDC
    ca-ParametersEUTRA-v1560
    ca-ParametersNR-v1560
}
BandCombination-v1570 ::=
    ca-ParametersEUTRA-v1570 CA-ParametersEUTRA-v1570
}
BandCombination-vl580 ::= SEQUENCE \
    mrdc-Parameters-vl580 MRDC-Parameters-vl580
}
BandCombination-vl590::= SEQUENCE {
    supportedBandwidthCombinationSetIntraENDC BIT STRING (SIZE (1..32)) OPTIONAL,
    mrdc-Parameters-vl590 MRDC-Parameters-vl590
}
BandCombination-vl5g0::= SEQUENCE \
    ca-ParametersNR-vl5g0
    ca-ParametersNRDC-vl5g0
    modc-Parameters-vl5g0
}
BandCombination-vl6l0 ::=
    bandList-vl610
        ca-ParametersNR-vl610
        ca-ParametersNRDC-vl610
        powerClass-vl610
        powerClassNRPart-rl6
        featureSetCombinationDAPS-r16
        mrdc-Parameters-vl620 MRDC-Parameters-vl620 OPTIONAL
}
BandCombination-vl630 ::= SEQUENCE \
```

```
}
BandCombination-vl640 ::= SEQUENCE \
    ca-ParametersNR-vl640 CA-ParametersNR-vl640
OPTIONAL,
```


ETSI


--- Page 868  ---


3GPP TS 38.331 version 17.0.0 Release 17
867
ETSI TS 138331 V17.0.0 (2022-05)
```
    ca-ParametersNRDC-vl640 CA-ParametersNRDC-vl640
}
BandCombination-vl650 ::= SEQUENCE {
    ca-ParametersNRDC-vl650 CA-ParametersNRDC-vl650 OPTIONAL
}
BandCombination-vl680 ::= SEQUENCE {
    intrabandConcurrentOperationPowerClass-rl6 SEQUENCE (SIZE (l..MaxBandComb)) OF IntraBandPowerClass-rl6 OPTIONAL
}
BandCombination-vl700 ::= SEQUENCE {
    ca-ParametersNR-vl700 CA-ParametersNR-vl700 OPTIONAL,
    ca-ParametersNRDC-vl700 CA-ParametersNRDC-vl700 OPTIONAL,
    mrdc-Parameters-vl700 MRDC-Parameters-vl700 OPTIONAL
}
BandCombination-UplinkTxSwitch-rl6::= SEQUENCE {
    bandCombination-rl6 BandCombination,
    bandCombination-vl540 BandCombination-vl540 OPTIONAL,
    bandCombination-vl560 BandCombination-vl560 OPTIONAL,
    bandCombination-vl570 BandCombination-vl570 OPTIONAL,
    bandCombination-vl580 BandCombination-vl580 OPTIONAL,
    bandCombination-vl590 BandCombination-vl590 OPTIONAL,
    bandCombination-vl610 BandCombination-vl610 OPTIONAL,
    supportedBandPairListNR-rl6 SEQUENCE (SIZE (l..maxULTxSwitchingBandPairs)) OF ULTxSwitchingBandPair-rl6,
    uplinkTxSwitching-OptionSupport-rl6 ENUMERATED {switchedUL, dualUL, both} OPTIONAL,
    uplinkTxSwitching-PowerBoosting-rl6 ENUMERATED {supported} OPTIONAL,
    ...;
    [ [
    -- R4 16-5 UL-MIMO coherence capability for dynamic Tx switching between 3CC lTx-2Tx switching
    uplinkTxSwitching-PUSCH-TransCoherence-r16 ENUMERATED {nonCoherent, fullCoherent} OPTIONAL
    ]]
}
-- Editor's Note: whether switching option can be reported differently for 1T2T and 2T2T is FFS.
BandCombination-UplinkTxSwitch-vl630 ::= SEQUENCE {
    bandCombination-vl630 BandCombination-vl630 OPTIONAL
}
BandCombination-UplinkTxSwitch-vl640 ::= SEQUENCE {
    bandCombination-v1640 BandCombination-v1640 OPTIONAL
}
BandCombination-UplinkTxSwitch-vl650 ::= SEQUENCE {
    bandCombination-vl650 BandCombination-vl650 OPTIONAL
}
BandCombination-UplinkTxSwitch-vl670 ::= SEQUENCE {
    bandCombination-vl5g0 BandCombination-vl5g0 OPTIONAL
}
BandCombination-UplinkTxSwitch-vl700 ::= SEQUENCE {
    bandCombination-vl700 BandCombination-vl700 OPTIONAL,
```


ETSI


--- Page 869  ---


3GPP TS 38.331 version 17.0.0 Release 17
868
ETSI TS 138331 V17.0.0 (2022-05)
```
    -- R4 16-1/16-2/16-3 Dynamic Tx switching between 2CC/3CC 2Tx-2Tx/lTx-2Tx switching
```

```
    -- R4 16-6: UL-MIMO coherence capability for dynamic Tx switching between 2Tx-2Tx switching
```

```
}
ULTxSwitchingBandPair-rl6 ::= SEQUENCE {
    bandIndexULl-rl6 INTEGER(1..maxSimultaneousBands),
    bandIndexUL2-r16 INTEGER(1..maxSimultaneousBands),
    uplinkTxSwitchingPeriod-rl6 ENUMERATED {n35us, nl40us, n210us},
    uplinkTxSwitching-DL-Interruption-rl6 BIT STRING (SIZE(1..maxSimultaneousBands)) OPTIONAL
}
ULTxSwitchingBandPair-vl700 ::= SEQUENCE {
    uplinkTxSwitchingPeriod2T2T-rl7 ENUMERATED {n35us, nl40us, n210us} OPTIONAL
}
UplinkTxSwitchingBandParameters-vl700 ::= SEQUENCE {
    bandIndex-rl7 INTEGER(1..maxSimultaneousBands),
    uplinkTxSwitching2T2T-PUSCH-TransCoherence-rl7 ENUMERATED {nonCoherent, fullCoherent} OPTIONAL
}
BandParameters ::= CHOICE \
    eutra SEQUENCE \
        bandEUTRA
        ca-BandwidthClassDL-EUTRA
        ca-BandwidthClassUL-EUTRA CA-BandwidthClassEUJTRA CA-BandwidthClassEUTRA OPTIONAL
    },
    nr SEQUENCE \
        bandNR FreqBandIndicatorNR,
        ca-BandwidthClassDL-NR CA-BandwidthClassNR OPTIONAL,
        ca-BandwidthClassUL-NR CA-BandwidthClassNR OPTIONAL
    }
}
BandParameters-vl540 ::= SEQUENCE \
    srs-CarrierSwitch CHOICE {
        nr SEQUENCE \
            srs-SwitchingTimesListNR SEQUENCE (SIZE (l..maxSimultaneousBands)) OF SRS-SwitchingTimeNR
        },
        eutra SEQUENCE {
            srs-SwitchingTimesListEUTRA SEQUENCE (SIZE (l..maxSimultaneousBands)) OF SRS-SwitchingTimeEUTRA
        }
    } OPTIONAL,
    srs-TxSwitch SEQUENCE \
        supportedSRS-TxPortSwitch
        txSwitchImpactToRx
        txSwitchwithAnotherBand.
    }
}
BandParameters-vl610 ::= SEQUENCE \
    srs-TxSwitch-vl610 SEQUENCE \
```


ETSI


--- Page 870  ---


3GPP TS 38.331 version 17.0.0 Release 17
869
ETSI TS 138331 V17.0.0 (2022-05)

tlrl-t2r2, tlrl-t2r2-t4r4\}
\}
OPTIONAL
\}
ScalingFactorSidelink-rl6 ::=
ENUMERATED \{f0p4, f0p75, f0p8, fl\}
IntraBandPowerClass-rl6 ::=
ENUMERATED \{pc2, pc3, spare6, spare5, spare4, spare3, spare2, sparel\}
-- TAG-BANDCOMBINATIONLIST-STOP
-- ASNISTOP

ETSI


--- Page 871  ---


3GPP TS 38.331 version 17.0.0 Release 17
870
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline BandCombination field descriptions \\
\hline \begin{tabular}{l}
BandCombinationList-v1540, BandCombinationList-v1550, BandCombinationList-v1560, BandCombinationList-v1570, BandCombinationList-v1580, BandCombinationList-v1590, BandCombinationList-v15g0, BandCombinationList-v1610, BandCombinationList-v1630, BandCombinationList-v1640, BandCombinationList-v1650-r16, BandCombinationList-v1680, BandCombinationList-v1700 \\
The UE shall include the same number of entries, and listed in the same order, as in BandCombinationList (without suffix). If the field is included in supportedBandCombinationListNEDC-Only-v1610, the UE shall include the same number of entries, and listed in the same order, as in BandCombinationList of supportedBand Combination ListNEDC-Only (without suffix) field. \\
If the field is included in supportedBandCombinationListNEDC-Only-v15a0, the UE shall include the same number of entries, and listed in the same order, as in BandCombinationList (without suffix) of supportedBandCombinationListNEDC-Only (without suffix) field.
\end{tabular} \\
\hline \begin{tabular}{l}
BandCombinationList-UplinkTxSwitch-r16, BandCombinationList-UplinkTxSwitch-v1630, BandCombinationList-UplinkTxSwitch-v1640, BandCombinationList-UplinkTxSwitch-v1650, BandCombinationList-UplinkTxSwitch-v1700 \\
The UE shall include the same number of entries, and listed in the same order, as in BandCombinationList-UplinkTxSwitch-r16. \\
For the field of supportedBandCombinationList-UplinkTxSwitch-v1700, if the UE does not support 2Tx-2Tx switching for a given band combination, the field of supportedBandPairListNR-v1700 in the corresponding entry is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
ca-ParametersNRDC \\
If the field is included for a band combination in the NR capability container, the field indicates support of NR-DC. Otherwise, the field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
featureSetCombinationDAPS \\
If this field is present for a band combination, it reports the feature set combination supported for the band combination when any DAPS bearer is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
ne-DC-BC \\
If the field is included for a band combination in the MR-DC capability container, the field indicates support of NE-DC. Otherwise, the field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandPairListNR-r16, supportedBandPairListNR-v1700 \\
Indicates a list of band pair supporting UL Tx switching as defined in TS 38.101-1 [15] for a given band combination. \\
A UE supporting 2Tx-2Tx switching should include both of supportedBandPairListNR-r16 and supportedBandPairListNR-v1700. And the UE shall include the same number of entries listed in the same order as in supportedBandPairListNR-r16. \\
If the UE does not support 2Tx-2Tx switching for a given band pair, the field of uplinkTxSwitchingPeriod2T2T in the corresponding entry is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
srs-Switching TimesListNR \\
Indicates, for a particular pair of NR bands, the RF retuning time when switching between a NR carrier corresponding to this band entry and another (PUSCH-less) NR carrier corresponding to the band entry in the order indicated below: \\
- For the first NR band, the UE shall include the same number of entries for NR bands as in bandList, i.e. first entry corresponds to first NR band in bandList and so on, \\
- For the second NR band, the UE shall include one entry less, i.e. first entry corresponds to the second NR band in bandList and so on \\
- Andso on
\end{tabular} \\
\hline \begin{tabular}{l}
srs-Switching TimesListEUTRA \\
Indicates, for a particular pair of E-UTRA bands, the RF retuning time when switching between an E-UTRA carrier corresponding to this band entry and another (PUSCH-less) E-UTRA carrier corresponding to the band entry in the order indicated below: \\
- For the first E-UTRA band, the UE shall include the same number of entries for E-UTRA bands as in bandList, i.e. first entry corresponds to first E-UTRA band in bandList and so on, \\
- For the second E-UTRA band, the UE shall include one entry less, i.e. first entry corresponds to the second E-UTRA band in bandList and so on \\
- Andso on
\end{tabular} \\
\hline \begin{tabular}{l}
srs-TxSwitch \\
Indicates supported SRS antenna switch capability for the associated band. If the UE indicates support of SRS-SwitchingTimeNR, the UE is allowed to set this field for a band with associated FeatureSetUplinkld set to 0 for SRS carrier switching.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkTxSwitchingBandParametersList-v1700 \\
Indicates a list of per band per band combination capabilities for UL Tx switching.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 872  ---


3GPP TS 38.331 version 17.0.0 Release 17
871
ETSI TS 138331 V17.0.0 (2022-05)
- BandCombinationListSidelinkEUTRA-NR

The IE BandCombinationListSidelinkEUTRA-NR contains a list of V2X sidelink and NR sidelink band combinations.
BandCombinationListSidelinkEUTRA-NR information element
```
-- ASNISTART
-- TAG-BANDCOMBINATIONLISTSIDELINKEUTRANR-START
```

```
BandParametersSidelinkEUTRA-NR-rl6 ::= CHOICE {
    eutra SEQUENCE {
        bandParametersSidelinkEUTRAl-rl6 OCTET STRING OPTIONAL,
        bandParametersSidelinkEUTRA2-r16 OCTET STRING OPTIONAL
    },
    nr SEQUENCE {
        bandParametersSidelinkNR-r16 BandParametersSidelink-r16
    }
}
BandParametersSidelinkEUTRA-NR-vl630 ::= CHOICE {
    eutra NULL,
    nr SEQUENCE \
        tx-Sidelink-rl6 ENUMERATED {supported} OPTIONAL,
        rx-Sidelink-rl6 ENUMERATED {supported} OPTIONAL,
        sl-CrossCarrierScheduling-rl6 ENUMERATED {supported} OPTIONAL
    }
}
BandParametersSidelink-rl6 ::= SEQUENCE \
    freqBandSidelink-r16 FreqBandIndicatorNR
}
-- TAG-BANDCOMBINATIONLISTSIDELINKEUTRANR-STOP
-- ASNISTOP
```


BandParametersSidelinkEUTRA-NR field descriptions
bandParametersSidelinkEUTRA1, bandParametersSidelinkEUTRA2
This field includes the V2X-BandParameters-r14 and V2X-BandParameters-v1530 IE as specified in 36.331 [10]. It is used for reporting the per-band capability for V2X sidelink communication.

ETSI


--- Page 873  ---


3GPP TS 38.331 version 17.0.0 Release 17
872
ETSI TS 138331 V17.0.0 (2022-05)
- BandCombinationListSL-NonRelayDiscovery

The IE BandCombinationListSL-NonRelayDiscovery contains a list of NR sidelink band combinations supporting transmission and reception of non-relay discovery message.
BandCombinationListSL-NonRelayDiscovery information element
-- ASNISTART
-- TAG-BANDCOMBINATIONLISTSL-NONRELAYDISCOVERY-START
-- TAG-BANDCOMBINATIONLISTSL-NONRELAYDISCOVERY-STOP
-- ASNISTOP
- BandCombinationListSL-RelayDiscovery

The IE BandCombinationListSL-RelayDiscovery contains a list of NR sidelink band combinations supporting transmission and reception of relay discovery message.
BandCombinationListSL-RelayDiscovery information element
-- ASNISTART
-- TAG-BANDCOMBINATIONLISTSL-RELAYDISCOVERY-START
-- TAG-BANDCOMBINATIONLISTSL-RELAYDISCOVERY-STOP
-- ASNISTOP
- CA-BandwidthClassEUTRA

The IE CA-BandwidthClassEUTRA indicates the E-UTRA CA bandwidth class as defined in TS 36.101 [22], table 5.6A-1.
CA-BandwidthClassEUTRA information element
-- ASNISTART
-- TAG-CA-BANDWIDTHCLASSEUTRA-START
CA-BandwidthClassEUTRA ::= ENUMERATED la, b, c, d, e, f, ...
-- TAG-CA-BANDWIDTHCLASSEUTRA-STOP
-- ASNISTOP

ETSI


--- Page 874  ---


3GPP TS 38.331 version 17.0.0 Release 17
873
ETSI TS 138331 V17.0.0 (2022-05)
- CA-BandwidthClassNR

The IE CA-BandwidthClassNR indicates the NR CA bandwidth class as defined in TS 38.101-1 [15], table 5.3A.5-1 and TS 38.101-2 [39], table 5.3A.4-1.
CA-BandwidthClassNR information element
```
-- ASNISTART
-- TAG-CA-BANDWIDTHCLASSNR-START
CA-BandwidthClassNR ::= ENUMERATED {a, b, c, d, e, f, g, h, i, j, k, l, m, M, o, p, q, ..l
-- TAG-CA-BANDWIDTHCLASSNR-STOP
-- ASNISTOP
```

- CA-ParametersEUTRA

The IE CA-ParametersEUTRA contains the E-UTRA part of band combination parameters for a given MR-DC band combination.
NOTE: If additional E-UTRA band combination parameters are defined in TS 36.331 [10], which are supported for MR-DC, they will be defined here as well.
CA-ParametersEUTRA information element
```
-- ASNISTART
-- TAG-CA-PARAMETERSEUTRA-START
CA-ParametersEUTRA ::=
    multipleTimingAdvance
    simultaneousRx-Tx
    supportedNAICS-2CRS-AP
    additionalRx-Tx-PerformanceReq
    ve-CA-PowerClass-N
    supportedBandwidthCombinationSetEUTRA-v1530
    ...
}
CA-ParametersEUTRA-vl560 ::= SEQUENCE \
    fd-MIMO-TotalWeightedLayers
}
CA-ParametersEUTRA-vl570 ::= SEQUENCE \
    dl-1024QAM-TotalWeightedLayers
}
-- TAG-CA-PARAMETERSEUTRA-STOP
-- ASNISTOP
```


ETSI


--- Page 875  ---


3GPP TS 38.331 version 17.0.0 Release 17
874
ETSI TS 138331 V17.0.0 (2022-05)
- CA-ParametersNR

The IE CA-ParametersNR contains carrier aggregation and inter-frequency DAPS handover related capabilities that are defined per band combination.
CA-ParametersNR information element
```
-- ASNISTART
-- TAG-CA-PARAMETERSNR-START
CA-ParametersNR ::= SEQUENCE \
    dumny ENUMERATED {supported} OPTIONAL,
    parallelTxSRS-PUCCH-PUSCH ENUMERATED {supported} OPTIONAL,
    parallelTxPRACH-SRS-PUCCH-PUSCH ENUMERATED {supported} OPTIONAL,
    simultaneousRxTxInterBandCA ENUMERATED {supported} OPTIONAL,
    simultaneousRxTxSUL ENUMERATED {supported} OPTIONAL,
    diffNumerologyAcrossPUCCH-Group ENUMERATED {supported} OPTIONAL,
    diffNumerologyWithinPUCCH-GroupSmallerSCS ENUMERATED {supported} OPTIONAL,
    supportedNumberTAG ENUMERATED{n2, n3, n4} OPTIONAL,
    ...
}
CA-ParametersNR-v1540 ::= SEQUENCE \
    simultaneousSRS-AssocCSI-RS-AllCC INTEGER (5..32) OPTIONAL,
    csi-RS-IM-ReceptionForFeedbackPerBandComb SEQUENCE \
        maxNumberSimultaneousNZP-CSI-RS-ActBWP-AllCC INTEGER (1..64) OPTIONAL,
        totalNumberPortsSimultaneousNZP-CSI-RS-ActBNP-AllCC INTEGER (2..256) OPTIONAL
    }
    simultaneousCSI-ReportsAllCC INTEGER (5..32)
    dualPA-Architecture ENUMERATED {supported} OPTIONAL
}
CA-ParametersNR-vl550 ::= SEQUENCE \
    dummy ENUMERATED {supported} OPTIONAL
}
CA-ParametersNR-vl560 ::= SEQUENCE \
    diffNumerologyWithinPUCCH-GroupLargerSCS ENUMERATED {supported} OPTIONAL
}
CA-ParametersNR-vl5gO ::= SEQUENCE \
    simultaneousRxTxInterBandCAPerBandPair SimultaneousRxTxPerBandPair OPTIONAL,
    simultaneousRxTxSULPerBandPair SimultaneousRxTxPerBandPair OPTIONAL
}
CA-ParametersNR-vl610 ::= SEQUENCE {
        -- Rl 9-3: Parallel MsgA and SRS/PUCCH/PUSCH transmissions across CCs in inter-band CA
    parallelTxMsgA-SRS-PUCCH-PUSCH-rl6 ENUMERATED {supported} OPTIONAL,
        -- Rl 9-4: MsgA operation in a band combination including SUL
    msgA-SUL-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-9c: Joint search space group switching across multiple cells
    jointSearchSpaceSwitchAcrossCells-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 14-5: Half-duplex UE behaviour in TDD CA for same SCS
    half-DuplexTDD-CA-SameSCS-rl6 ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 876  ---


3GPP TS 38.331 version 17.0.0 Release 17
875
ETSI TS 138331 V17.0.0 (2022-05)
```
-- Rl 18-4: SCell dormancy within active time
scellDormancyWithinActiveTime-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl 18-4a: SCell dormancy outside active time
scellDormancyOutsideActiveTime-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl 18-6: Cross-carrier A-CSI RS triggering with different SCS
crossCarrierA-CSI-trigDiffSCS-rl6 ENUMERATED {higherA-CSI-SCS,lowerA-CSI-SCS,both} OPTIONAL,
-- Rl 18-6a: Default QCL assumption for cross-carrier A-CSI-RS triggering
defaultQCL-CrossCarrierA-CSI-Trig-rl6 ENUMERATED {diffOnly, both} OPTIONAL,
-- Rl 18-7: CA with non-aligned frame boundaries for inter-band CA
interCA-NonAlignedFrame-rl6 ENUMERATED {supported} OPTIONAL,
simul-SRS-Trans-BC-r16 ENUMERATED {n2} OPTIONAL,
interFreqDAPS-r16 SEQUENCE [
    interFreqAsyncDAPS-rl6 ENUMERATED {supported} OPTIONAL,
    interFreqDiffSCS-DAPS-rl6 ENUMERATED {supported} OPTIONAL,
    interFreqMultiUL-TransmissionDAPS-r16 ENUMERATED {supported} OPTIONAL,
    interFreqSemiStaticPowerSharingDAPS-Model-rl6 ENUMERATED {supported} OPTIONAL,
    interFreqSemiStaticPowerSharingDAPS-Mode2-rl6 ENUMERATED {supported} OPTIONAL,
    interFreqDynamicPowerSharingDAPS-r16 ENUMERATED {short, long} OPTIONAL,
    interFreqUL-TransCancellationDAPS-r16 ENUMERATED {supported} OPTIONAL
} OPTIONAL,
codebookParametersPerBC-r16 CodebookParameters-vl610 OPTIONAL,
-- Rl 16-2a-10 Value of R for BD/CCE
blindDetectFactor-rl6 INTEGER (1..2) OPTIONAL,
-- Rl ll-2a: Capability on the number of CCs for monitoring a maximum number of BDs and non-overlapped CCEs per span when configured.
-- with DL CA with Rel-16 PDCCH monitoring capability on all the serving cells
pdech-MonitoringCA-rl6 SEQUENCE {
    maxNumberOfMonitoringCC-r16 INTEGER (2..16),
    supportedSpanArrangement-rl6 ENUMERATED {alignedOnly, alignedAndNonAligned}
} OPTIONAL,
-- Rl ll-2c: Number of carriers for CCE/BD scaling with DL CA with mix of Rel. 16 and Rel. 15 PDCCH monitoring capabilities on
-- different carriers
pdech-BlindDetectionCA-Mixed-rl6 SEQUENCE {
    pdcch-BlindDetectionCAl-r16 INTEGER (1..15),
    pdcch-BlindDetectionCA2-r16 INTEGER (1..15),
    supportedSpanArrangement-rl6 ENUMERATED {alignedOnly, alignedAndNonAligned}
} OPTIONAL,
-- Rl ll-2d: Capability on the number of CCs for monitoring a maximum number of BDs and non-overlapped CCEs per span for MCG and for
-- SCG when configured for NR-DC operation with Rel-16 PDCCH monitoring capability on all the serving cells
pdech-BlindDetectionMCG-UE-rl6 INTEGER (1..14) OPTIONAL,
pdech-BlindDetectionSCG-UE-rl6 INTEGER (1..14) OPTIONAL,
-- Rl ll-2e: Number of carriers for CCE/BD scaling for MCG and for SCG when configured for NR-DC operation with mix of Rel. 16 and
-- Rel. 15 PDCCH monitoring capabilities on different carriers
pdcch-BlindDetectionMCG-UE-Mixed-r16 SEQUENCE {
    pdcch-BlindDetectionMCG-UEl-rl6 INTEGER (0..15),
    pdcch-BlindDetectionMCG-UE2-rl6 INTEGER (0..15)
} OPTIONAL,
pdcch-BlindDetectionSCG-UE-Mixed-rl6 SEQUENCE {
    pdcch-BlindDetectionSCG-UEl-rl6 INTEGER (0..15),
    pdech-BlindDetectionSCG-UE2-rl6 INTEGER (0..15)
} OPTIONAL,
-- Rl 18-5 cross-carrier scheduling with different SCS in DL CA
crossCarrierSchedulingDL-DiffSCS-rl6 ENUMERATED {low-to-high, high-to-low, both} OPTIONAL,
-- Rl 18-5a Default QCL assumption for cross-carrier scheduling
crossCarrierSchedulingDefaultQCL-r16 ENUMERATED {diff-only, both} OPTIONAL,
```


ETSI


--- Page 877  ---


3GPP TS 38.331 version 17.0.0 Release 17
876
ETSI TS 138331 V17.0.0 (2022-05)
```
    -- Rl 18-5b cross-carrier scheduling with different SCS in UL CA
    crossCarrierSchedulingUL-DiffSCS-rl6 ENUMERATED {low-to-high, high-to-low, both} OPTIONAL,
    -- Rl 13.19a Simultaneous positioning SRS and MIMO SRS transmission for a given BC
    simul-SRS-MIMO-Trans-BC-rl6 ENOMERATED {n2} OPTIONAL,
    -- Rl 16-3a, 16-3a-1, 16-3b, 16-3b-1: New Individual Codebook
    codebookParametersAdditionPerBC-r16 CodebookParametersAdditionPerBC-rl6 OPTIONAL,
    -- Rl 16-8: Mixed codebook
    codebookComboParametersAdditionPerBC-r16 CodebookComboParametersAdditionPerBC-r16 OPTIONAL
}
CA-ParametersNR-vl630 ::= SEQUENCE {
    -- Rl 22-5b: Simultaneous transmission of SRS for antenna switching and SRS for CB/NCB /BM for inter-band UL CA
    -- Rl 22-5d: Simultaneous transmission of SRS for antenna switching for inter-band UL CA
    simulTX-SRS-AntSwitchingInterBandUL-CA-rl6 SimulSRS-ForAntennaSwitching-rl6 OPTIONAL,
    -- R4 8-5: supported beam management type for inter-band CA
    beamManagementType-rl6 ENUMERATED {ibm, com} OPTIONAL,
    -- R4 7-3a: UL frequency separation class with aggregate BW and Gap BW
    intraBandFreqSeparationUL-AggBW-GapBW-rl6 ENUMERATED {classI, classII, classIII} OPTIONAL,
    -- RAN 89: Case B in case of Inter-band CA with non-aligned frame boundaries
    interCA-NonAlignedFrame-B-rl6 ENUMERATED [supported] OPTIONAL
}
CA-ParametersNR-vl640 ::= SEQUENCE {
    -- R4 7-5: Support of reporting UL Tx DC locations for uplink intra-band CA.
    uplinkTxDC-TwoCarrierReport-rl6 ENUMERATED {supported} OPTIONAL,
    -- RAN 22-6: Support of up to 3 different numerologies in the same NR PUCCH group for NR part of EN-DC, NGEN-DC, NE-DC and NR-CA
    -- where UE is not configured with two NR PUCCH groups
    maxUpTo3Diff-NumerologiesConfigSinglePUCCH-grp-rl6 PUCCH-Grp-CarrierTypes-rl6 OPTIONAL,
    -- RAN 22-6a: Support of up to 4 different numerologies in the same NR PUCCH group for NR part of EN-DC, NGEN-DC, NE-DC and NR-CA
    -- where UE is not configured with two NR PUCCH groups
    maxUpTo4Diff-NumerologiesConfigSinglePUCCH-grp-rl6 PUCCH-Grp-CarrierTypes-rl6 OPTIONAL,
    -- RAN 22-7: Support two PUCCH groups for NR-CA with 3 or more bands with at least two carrier types
    twoPUCCH-Grp-ConfigurationsList-rl6 SEQUENCE (SIZE (l..maxTwoPUCCH-Grp-ConfigList-rl6)) OF TwoPUCCH-Grp-Configurations-rl6 OPTIONAL,
    -- Rl 22-7a: Different numerology across NR PUCCH groups
    diffNumerologyAcrossPUCCH-Group-CarrierTypes-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 22-7b: Different numerologies across NR carriers within the same NR PUCCH group, with PUCCH on a carrier of smaller SCS
    diffNumerologyWithinPUCCH-GroupSmallerSCS-CarrierTypes-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 22-7c: Different numerologies across NR carriers within the same NR PUCCH group, with PUCCH on a carrier of larger SCS
    diffNumerologyWithinPUCCH-GroupLargerSCS-CarrierTypes-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl ll-2f: add the replicated FGs of ll-2a/c with restriction for non-aligned span case
    -- with DL CA with Rel-16 PDCCH monitoring capability on all the serving cells
    pdcch-MonitoringCA-NonAlignedSpan-rl6 INTEGER (2..16) OPTIONAL,
    -- Rl ll-2g: add the replicated FGs of ll-2a/c with restriction for non-aligned span case
    pdcch-BlindDetectionCA-Mixed-NonAlignedSpan-rl6 SEQUENCE [
        pdcch-BlindDetectionCAl-rl6 INTEGER (1..15),
        pdech-BlindDetectionCA2-r16 INTEGER (1..15)
    } OPTIONAL
}
CA-ParametersNR-vl700 ::= SEQUENCE {
    -- Rl 23-9-1: Basic Features of Further Enhanced Port-Selection Type II Codebook (FeType-II) per band combination information
    codebookParametersfetype2PerBC-rl7 CodebookParametersfetype2PerBC-rl7 OPTIONAL,
    -- R4 18-4: Support of enhanced Demodulation requirements for CA in HST SEN FRl
    demodulationEnhancementCA-rl7 ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 878  ---


3GPP TS 38.331 version 17.0.0 Release 17
877
ETSI TS 138331 V17.0.0 (2022-05)
```
    -- R4 20-1: Maximum uplink duty cycle for NR inter-band CA power class 2
    maxUplinkDutyCycle-interBandCA-PC2-r17 ENUMERATED {n50, n60, n70, n80, n90, nl00} OPTIONAL,
    -- R4 20-2: Maximum uplink duty cycle for NR SUL combination power class 2
    maxUplinkDutyCycle-SULCombination-PC2-r17 ENUMERATED {n50, n60, n70, n80, n90, nl00} OPTIONAL
}
SimulSRS-ForAntennaSwitching-rl6 ::= SEQUENCE {
    supportSRS-xTyR-xLessThanY-r16 ENUMERATED {supported} OPTIONAL,
    supportSRS-xTyR-xEqualToY-rl6 ENUMERATED {supported} OPTIONAL,
    supportSRS-AntennaSwitching-rl6 ENUMERATED {supported} OPTIONAL
}
TwoPUCCH-Grp-Configurations-rl6::= SEQUENCE \
    pucch-PrimaryGroupMapping-rl6 TwoPUCCH-Grp-ConfigParams-rl6,
    pucch-SecondaryGroupMapping-r16 TwoPUCCH-Grp-ConfigParams-rl6
}
TwoPUCCH-Grp-ConfigParams-r16 ::= SEQUENCE \
    pucch-GroupMapping-r16 PUCCH-Grp-CarrierTypes-r16,
    pucch-TX-rl6 PUCCH-Grp-CarrierTypes-rl6
}
PUCCH-Grp-CarrierTypes-rl6 ::= SEQUENCE \
    frl-NonSharedTDD-rl6 ENUMERATED {supported} OPTIONAL,
    frl-SharedTDD-rl6 ENUMERATED {supported} OPTIONAL,
    frl-NonSharedFDD-rl6 ENUMERATED {supported} OPTIONAL,
    fr2-rl6 ENUMERATED {supported} OPTIONAL
}
-- TAG-CA-PARAMETERSNR-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CA-ParametersNR field description \\
\hline \begin{tabular}{l}
codebookParametersPerBC \\
For a given supported band combination, this field indicates the alternative list of SupportedCS/-RS-Resource supported for each codebook type, amongst the supported CSIRS resources included in codebookParametersPerBand in MMO-ParametersPerBand.
\end{tabular} \\
\hline
\end{tabular}
- CA-ParametersNRDC

The IE CA-ParametersNRDC contains dual connectivity related capabilities that are defined per band combination.
CA-ParametersNRDC information element
```
-- ASNISTART
-- TAG-CA-PARAMETERS-NRDC-START
CA-ParametersNRDC ::=
    ca-ParametersNR-ForDC
    ca-ParametersNR-ForDC-v1540
```

```
SEQUENCE \
    CA-ParametersNR
    CA-ParametersNR-v1540
```

```
OPTIONAL,
OPTIONAL,
```


ETSI


--- Page 879  ---


3GPP TS 38.331 version 17.0.0 Release 17
878
ETSI TS 138331 V17.0.0 (2022-05)
```
        ca-ParametersNR-ForDC-vl550 CA-ParametersNR-vl550 OPTIONAL,
        CA-ParametersNR-vl560 OPTIONAL,
}
CA-ParametersNRDC-vl5gO ::= SEQUENCE \
    ca-ParametersNR-ForDC-vl5gO CA-ParametersNR-vl5gO OPTIONAL
}
CA-ParametersNRDC-vl610 ::= SEQUENCE \
    -- Rl 18-1: Semi-static power sharing model between MCG and SCG cells of same FR for NR dual connectivity
    intraFR-NR-DC-PwrSharingModel-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 18-la: Semi-static power sharing mode 2 between MCG and SCG cells of same FR for NR dual connectivity
    intraFR-NR-DC-PwrSharingMode2-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 18-1b: Dynamic power sharing between MCG and SCG cells of same FR for NR dual connectivity
    intraFR-NR-DC-DynamicPwrSharing-rl6 ENUMERATED {short, long} OPTIONAL,
    asyncNRDC-rl6 ENUMERATED {supported} OPTIONAL
}
CA-ParametersNRDC-vl630 ::= SEQUENCE \
        ca-ParametersNR-ForDC-vl610 CA-ParametersNR-vl610 OPTIONAL,
        ca-ParametersNR-ForDC-vl630 CA-ParametersNR-vl630 OPTIONAL
}
CA-ParametersNRDC-vl640 ::= SEQUENCE {
    ca-ParametersNR-ForDC-vl640 CA-ParametersNR-vl640 OPTIONAL
}
CA-ParametersNRDC-vl650 ::= SEQUENCE \
    supportedCellGrouping-rl6 BIT STRING (SIZE (1..MaxCellGroupings-rl6)) OPTIONAL
}
CA-ParametersNRDC-vl700 ::= SEQUENCE \
```

```
    simultaneousRxTx-IAB-MultipleParents-rl7 ENUMERATED {supported} OPTIONAL,
    condPSCellAdditionNRDC-rl7 ENUMERATED {supported} OPTIONAL,
    scg-ActivationDeactivationNRDC-rl7 ENUMERATED {supported} OPTIONAL,
    scg-ActivationDeactivationResumeNRDC-rl7 ENUMERATED {supported} OPTIONAL
}
-- TAG-CA-PARAMETERS-NRDC-STOP
-- ASN1STOP
```


ETSI


--- Page 880  ---


3GPP TS 38.331 version 17.0.0 Release 17
879
ETSI TS 138331 V17.0.0 (2022-05)

CA-ParametersNRDC field descriptions
ca-ParametersNR-forDC (with and without suffix)
If this field is present for a band combination, it reports the UE capabilities when NR-DC is configured with the band combination. If a version of this field (i.e., with or without suffix) is absent for a band combination, the corresponding ca-ParametersNR field version in BandCombination is applicable to the UE configured with NR-DC for the band combination. If a version of this field (i.e., with or without suffix) is present for a band combination but does not contain any parameters, the UE does not support the corresponding field version when configured with NR-DC for the band combination.
featureSetCombinationDC
If this field is present for a band combination, it reports the feature set combination supported for the band combination when NR-DC is configured. If this field is absent for a band combination, the featureSetCombination in BandCombination (without suffix) is applicable to the UE configured with NR-DC for the band combination.
- CarrierAggregationVariant

The IE CarrierAggregationVariant informs the network about supported "placement" of the SpCell in an NR cell group.
CarrierAggregationVariant information element
-- ASN1START
-- TAG-CARRIERAGGREGATIONVARIANT-START

CarrierAggregationVariant : = SEQUENCE [
frlfdd-FRITDD-CA-SpCellOnFRIFDD
ENUMERATED \{supported\} OPTIONAL,
frlfdd-FRITDD-CA-SpCellOnFRITDD ENUMERATED [supported] OPTIONAL,
frlfdd-FR2TDD-CA-SpCellOnFRIFDD ENUMERATED \{supported\} OPTIONAL,
frlfdd-FR2TDD-CA-SpCel1OnFR2TDD ENUMERATED \{supported\} OPTIONAL,
frltdd-FR2TDD-CA-SpCellOnFRITDD ENUMERATED [supported] OPTIONAL,
frltdd-FR2TDD-CA-SpCellOnFR2TDD ENUMERATED [supported] OPTIONAL,
frlfdd-FRITDD-FR2TDD-CA-SpCellOnFRIFDD ENUMERATED \{supported\} OPTIONAL,
frlfdd-FRITDD-FR2TDD-CA-SpCellOnFRITDD ENUMERATED [supported] OPTIONAL,
frlfdd-FRITDD-FR2TDD-CA-SpCellOnER2TDD ENUMERATED [supported] OPTIONAL
\}
-- TAG-CARRIERAGGREGATIONVARIANT-STOP
-- ASNISTOP
- CodebookParameters

The IE CodebookParameters is used to convey codebook related parameters.
CodebookParameters information element
-- ASNISTART
-- TAG-CODEBOOKPARAMETERS-START

CodebookParameters : :=
typel
singlePanel

SEQUENCE 1
SEQUENCE 1
SEQUENCE 1

ETSI


--- Page 881  ---


3GPP TS 38.331 version 17.0.0 Release 17
880
ETSI TS 138331 V17.0.0 (2022-05)
```
            supportedCSI-RS-ResourceList SEQUENCE (SIZE (l.. maxNrofCSI-RS-Resources)) OF SupportedCSI-RS-Resource,
            modes
            ENUMERATED {model, modelandMode2},
        },
        multiPanel
            supportedCSI-RS-ResourceList
            modes
            nrofPanels
            maxNumberCSI-RS-PerResourceSet INTEGER (1..8)
        } OPTIONAL
    },
    type2 SEQUENCE \
        supportedCSI-RS-ResourceList SEQUENCE (SIZE (1.. maxNrofCSI-RS-Resources)) OF SupportedCSI-RS-Resource,
        parameterlx
        amplitudeScalingType
        ENUMERATED {wideband, widebandAndSubband},
    } ENUMERATED {supported} OPTIONAL
    type2-PortSelection SEQUENCE {
        supportedCSI-RS-ResourceList
        parameterLx
        amplitudeScalingType ENUMERATED {wideband, widebandAndSubband}
    } OPTIONAL
}
CodebookParameters-vl610 ::= SEQUENCE {
    supportedCSI-RS-ResourceListAlt-rl6 SEQUENCE {
        typel-SinglePanel-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-Resources)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
OPTIONAL,
        typel-MultiPanel-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-Resources)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
OPTIONAL,
        type2-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-Resources)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
OPTIONAL,
        type2-PortSelection-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-Resources)) OF INTEGER (O..maxNrofCSI-RS-ResourcesAlt-l-rl6)
OPTIONAL
    }
OPTIONAL
}
CodebookParametersAddition-rl6 ::= SEQUENCE {
    etype2-rl6 SEQUENCE {
        -- Rl 16-3a Regular eType 2 R=l
        etype2Rl-rl6 SEQUENCE {
            supportedCSI-RS-ResourceListAdd-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF
                            INTEGER (0..maxNrofCSI-RS-ResourcesAlt-1-r16)
        },
        -- Rl 16-3a-l Regular eType 2 R=2
        etype2R2-rl6 SEQUENCE {
            supportedCSI-RS-ResourceListAdd-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF
                            INTEGER (O..maxNrofCSI-RS-ResourcesAlt-1-rl6)
        } OPTIONAL,
        -- Rl 16-3a-2: Support of parameter combinations 7-8
        paramComb7-8-rl6 ENOMERATED {supported} OPTIONAL,
        -- Rl 16-3a-3: Support of rank 3,4
        rank3-4-rl6 ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 882  ---


3GPP TS 38.331 version 17.0.0 Release 17
881
ETSI TS 138331 V17.0.0 (2022-05)
```
        -- Rl 16-3a-4: CBSR with soft amplitude restriction
    amplitudeSubsetRestriction-rl6 ENUMERATED {supported} OPTIONAL
    etype2-PS-r16 SEQUENCE \
        -- Rl 16-3b Regular eType 2 R=l PortSelection
        etype2Rl-PortSelection-rl6 SEQUENCE {
            supportedCSI-RS-ResourceListAdd-r16 SEQUENCE (SIZE (1..maxNrofCSI-RS-ResourcesExt-rl6)) OF
                            INTEGER (O..maxNrofCSI-RS-ResourcesAlt-1-r16)
        },
        -- Rl 16-3b-1 Regular eType 2 R=2 PortSelection
        etype2R2-PortSelection-r16 SEQUENCE {
            supportedCSI-RS-ResourceListAdd-r16 SEQUENCE (SIZE (1..maxNrofCSI-RS-ResourcesExt-rl6)) OF
                                INTEGER (O..maxNrofCSI-RS-ResourcesAlt-1-r16)
        } OPTIONAL,
        -- Rl 16-3b-2: Support of rank 3,4
        rank3-4-r16 ENUMERATED {supported} OPTIONAL
    }
}
CodebookComboParametersAddition-r16 ::= SEQUENCE \
    -- Rl 16-8 Mixed codebook types
    typelSP-Type2-null-rl6 SEQUENCE \
```

```
    } OPTIONAL,
    typelSP-Type2PS-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
    typelSP-eType2Rl-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
    typelSP-eType2R2-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
    typelSP-eType2RlPS-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
    typelSP-eType2R2PS-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
    typelSP-Type2-Type2PS-rl6 SEQUENCE \
```

```
    } OPTIONAL,
    typelMP-Type2-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
    typelMP-Type2PS-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
    typelMP-eType2Rl-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
    typelMP-eType2R2-null-rl6 SEQUENCE {
```

```
    } OPTIONAL,
```


ETSI


--- Page 883  ---


3GPP TS 38.331 version 17.0.0 Release 17
882
ETSI TS 138331 V17.0.0 (2022-05)
```
    typelMP-eType2RlPS-null-rl6 SEQUENCE {
        supportedCSI-RS-ResourceListAdd-r16 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
    } OPTIONAL,
    typelMP-eType2R2PS-null-rl6 SEQUENCE {
        supportedCSI-RS-ResourceListAdd-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (O..maxNrofCSI-RS-ResourcesAlt-l-rl6)
    } OPTIONAL,
    typelMP-Type2-Type2PS-rl6 SEQUENCE {
        supportedCSI-RS-ResourceListAdd-r16 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (O..maxNrofCSI-RS-ResourcesAlt-l-rl6)
    } OPTIONAL
}
CodebookParametersfetype2-rl7 ::= SEQUENCE [
    -- Rl 23-9-1 Basic Features of Further Enhanced Port-Selection Type II Codebook (FeType-II)
    fetype2basic-rl7 SEQUENCE (SIZE (l.. maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6),
    -- Rl 23-9-2 Support of M=2 and R=1 for FeType-II
    fetype2Rankl-rl7 SEQUENCE (SIZE (l..MAXNrofCSI-RS-ResourcesExt-rl7)) OF INTEGER (0.. maxNrofCSI-RS-ResourcesAlt-l-rl6)
                OPTIONAL,
    -- Rl 23-9-4 Support of R = 2 for FeType-II
    fetype2Rank2-rl7 SEQUENCE (SIZE (l..MAXNrofCSI-RS-ResourcesExt-rl7)) OF INTEGER (0.. maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL,
    -- Rl 23-9-3 Support of rank 3, 4 for FeType-II
    fetype2Rank3Rank4-rl7 ENUMERATED {supported} OPTIONAL
}
CodebookParametersAdditionPerBC-r16::= SEQUENCE [
    -- Rl 16-3a Regular eType 2 R=l
    etype2Rl-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (O..maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL,
    -- Rl 16-3a-1 Regular eType 2 R=2
    etype2R2-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (O..maxNrofCSI-RS-ResourcesAlt-l-rl6)
                OPTIONAL,
    -- Rl 16-3b Regular eType 2 R=l PortSelection
    etype2Rl-PortSelection-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-1-rl6)
            OPTIONAL,
    -- Rl 16-3b-1 Regular eType 2 R=2 PortSelection
    etype2R2-PortSelection-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL
}
CodebookComboParametersAdditionPerBC-r16::= SEQUENCE {
    -- Rl 16-8 Mixed codebook types
    typelSP-Type2-null-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL,
    typelSP-Type2PS-null-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL,
    typelSP-eType2Rl-null-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (O..maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL,
    typelSP-eType2R2-null-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (O..maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL,
    typelSP-eType2RlPS-null-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL,
    typelSP-eType2R2PS-null-rl6 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
            OPTIONAL,
    typelSP-Type2-Type2PS-r16 SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesExt-rl6)) OF INTEGER (0..maxNrofCSI-RS-ResourcesAlt-l-rl6)
```


ETSI


--- Page 884  ---


3GPP TS 38.331 version 17.0.0 Release 17
883
ETSI TS 138331 V17.0.0 (2022-05)
```
    OPTIONAL,
```

```
            OPTIONAL,
```

```
            OPTIONAL,
```

```
            OPTIONAL,
```

```
            OPTIONAL,
```

```
            OPTIONAL
}
CodebookParametersfetype2PerBC-rl7 ::= SEQUENCE {
    -- Rl 23-9-1 Basic Features of Further Enhanced Port-Selection Type II Codebook (FeType-II)
```

```
    -- Rl 23-9-2 Support of M=2 and R=1 for FeType-II
```

```
                OPTIONAL,
    -- Rl 23-9-4 Support of R = 2 for FeType-II
```

```
        OPTIONAL
}
CodebookVariantsList-rl6 ::= SEQUENCE (SIZE (l..maxNrofCSI-RS-ResourcesAlt-rl6)) OF SupportedCSI-RS-Resource
SupportedCSI-RS-Resource ::= SEQUENCE \
    maxNumberTxPortsPerResource ENUMERATED {p2,p4,p8,p12,p16,p24,p32},
    maxNumberResources PerBand.
    totalNumberTxPortsPerBand INTEGER (1..64)
}
-- TAG-CODEBOOKPARAMETERS-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CodebookParameters field descriptions \\
\hline \begin{tabular}{l}
supportedCSI-RS-ResourceListAIt \\
This field indicates the alternative list of SupportedCS/-RS-Resource supported for each codebook type. The supported CSI-RS resource is indicated by an integer value which pinpoints SupportedCS/-RS-Resource defined in CodebookVariantsList. The value 0 corresponds to the first entry of CodebookVariantsList. The value 1 corresponds to the second entry of CodebookVariantsList, and so on. For each codebook type, the field shall be included in both codebookParametersPerBC and codebookParametersPerBand.
\end{tabular} \\
\hline
\end{tabular}
- FeatureSetCombination

The IE FeatureSetCombination is a two-dimensional matrix of FeatureSet entries.

ETSI


--- Page 885  ---


3GPP TS 38.331 version 17.0.0 Release 17
884
ETSI TS 138331 V17.0.0 (2022-05)

Each FeatureSetsPerBand contains a list of feature sets applicable to the carrier(s) of one band entry of the associated band combination. Across the associated bands, the UE shall support the combination of FeatureSets at the same position in the FeatureSetsPerBand. All FeatureSetsPerBand in one FeatureSetCombination must have the same number of entries.

The number of FeatureSetsPerBand in the FeatureSetCombination must be equal to the number of band entries in an associated band combination. The first FeatureSetPerBand applies to the first band entry of the band combination, and so on.

Each FeatureSet contains either a pair of NR or E-UTRA feature set IDs for UL and DL.
In case of NR, the actual feature sets for UL and DL are defined in the FeatureSets IE and referred to from here by their ID, i.e., their position in the featureSetsUplink / featureSetsDownink list in the FeatureSet IE.

In case of E-UTRA, the feature sets referred to from this list are defined in TS 36.331 [10] and conveyed as part of the UE-EUTRA-Capability container.
The FeatureSetUplink and FeatureSetDownlink referred to from the FeatureSet comprise, among other information, a set of FeatureSetUplinkPerCC-Ids and FeatureSetDownlinkPerCC-Ids. The number of these per-CC [Ds determines the number of carriers that the UE is able to aggregate contiguously in frequency domain in the corresponding band. The number of carriers supported by the UE is also restricted by the bandwidth class indicated in the associated BandCombination, if present.

In feature set combinations the UE shall exclude entries with same or lower capabilities, since the network may anyway assume that the UE supports those.
NOTE 1: The UE may advertise fallback band-combinations in which it supports additional functionality explicitly in two ways: Either by setting FeatureSet IDs to zero (inter-band and intra-band non-contiguous fallback) and by reducing the number of FeatureSet-PerCC Ids in a Feature Set (intra-band contiguous fallback). Or by separate BandCombination entries with associated FeatureSetCombinations.

NOTE 2: The UE may advertise a FeatureSetCombination containing only fallback band combinations. That means, in a FeatureSetCombination, each group of FeatureSets across the bands may contain at least one pair of FeatureSetUplinkld and FeatureSetDownlinkld which is set to 0/0.

NOTE 3: The Network configures serving cell(s) and BWP(s) configuration to comply with capabilities derived from the combination of FeatureSets at the same position in the FeatureSetsPerBand, regardless of activated/deactivated serving cell(s) and BWP(s).

FeatureSetCombination information element
```
-- ASNISTART
-- TAG-FEATURESETCOMBINATION-START
FeatureSetCombination := SEQUENCE (SIZE (l..maxSimultaneousBands)) OF FeatureSetsPerBand
FeatureSetsPerBand ::= SEQUENCE (SIZE (l..maxFeatureSetsPerBand)) OF FeatureSet
FeatureSet ::=
    eutra
        SEQUENCE \
        uplinkSetEUTRA FeatureSetEUTRA-UplinkId.
    },
    nr
        downlinkSetNR FeatureSetDownlinkId,
        uplinkSetNR FeatureSetUplinkId
    }
```


ETSI


--- Page 886  ---


3GPP TS 38.331 version 17.0.0 Release 17
885
ETSI TS 138331 V17.0.0 (2022-05)

\}
-- TAG-FEATURESETCOMBINATION-STOP
-- ASNISTOP
- FeatureSetCombinationId

The IE FeatureSetCombinationId identifies a FeatureSetCombination. The FeatureSetCombinationId of a FeatureSetCombination is the position of the FeatureSetCombination in the featureSetCombinations list (in UE-NR-Capability or UE-MRDC-Capability). The FeatureSetCombinationId \( =0 \) refers to the first entry in the featureSetCombinations list (in UE-NR-Capability or UE-MRDC-Capability).

NOTE: The FeatureSetCombinationId \( =1024 \) is not used due to the maximum entry number of featureSetCombinations.
FeatureSetCombinationid information element
-- ASNISTART
-- TAG-FEATURESETCOMBINATIONID-START
FeatureSetCombinationId : : INTEGER (0. maxFeatureSetCombinations)
-- TAG-EEATURESETCOMBINATIONID-STOP
-- ASNISTOP
- FeatureSetDownlink

The IE FeatureSetDownlink indicates a set of features that the UE supports on the carriers corresponding to one band entry in a band combination.
FeatureSetDownlink information element
-- ASNISTART
-- TAG-FEATURESETDOWNLINK-START

FeatureSetDownlink ::=
featureSetListPerDownlinkCC
intraBandFreqSeparationDL
scalingFactor
dummy8
scellWithoutSSB
csi-RS-MeasSCellWithoutSSB
dummyl
typel-3-CSS
pdech-MonitoringAnyOccasions
dummy 2
ue-SpecificUL-DL-Assignment
searchSpaceSharingCA-DL
timeDurationForQCL

SEQUENCE
SEQUENCE (SIZE (l..maxNrofServingCells)) OF FeatureSetDownlinkPerCC-Id,
FreqSeparationClass OPTIONAL, ENUMERATED \{f0p4, f0p75, f0p8\} OPTIONAL,
ENUMERATED \{supported\} OPTIONAL,
ENUMERATED \{supported\} OPTIONAL,
ENUMERATED \{supported\} OPTIONAL,
ENUMERATED \{supported\} OPTIONAL,
ENUMERATED \{supported\} OPTIONAL,
ENUMERATED \{withoutDCI-Gap, withDCI-Gap\} OPTIONAL,
ENUMERATED \{supported\} OPTIONAL,
ENUMERATED \{supported\} OPTIONAL,
ENUMERATED \{supported\} OPTIONAL,
SEQUENCE [

ETSI


--- Page 887  ---


3GPP TS 38.331 version 17.0.0 Release 17
886
ETSI TS 138331 V17.0.0 (2022-05)
```
    }
    pdsch-ProcessingTypel-DifferentTB-PerSlot SEQUENCE {
```

```
        scs-120kHz ENUMERATED {upto2, upto4, upto7}
    }
    dumay3 DumayA
    dumny4 SEQUENCE (SIZE (1.. maxNrofCodebooks)) OF DummyB
    dumny5 SEQUENCE (SIZE (1.. maxNrofCodebooks)) OF DumnyC
    dummy6 SEQUENCE (SIZE (1.. maxNrofCodebooks)) OF DummyD
    OPTIONAL,
}
FeatureSetDownlink-vl540 ::= SEQUENCE [
    oneFL-DMRS-TwoAdditionalDMRS-DL ENUMERATED {supported} OPTIONAL,
    additionalDMRS-DL-Alt ENUMERATED {supported} OPTIONAL,
    twoFL-DMRS-TwoAdditionalDMRS-DL ENUMERATED {supported} OPTIONAL,
    oneFL-DMRS-ThreeAdditionalDMRS-DL ENUMERATED {supported} OPTIONAL,
    pdcch-MonitoringAnyOccasionsWithSpanGap SEQUENCE {
        scs-l5kHz ENUMERATED {setl, set2, set3} OPTIONAL,
        scs-30kHz ENUMERATED {setl, set2, set3} OPTIONAL,
        scs-60kHz ENUMERATED {setl, set2, set3} OPTIONAL,
        scs-120kHz ENUMERATED {setl, set2, set3} OPTIONAL
    }
    pdsch-Se
    pdsch-eparationWithGap ENUMERATED {supported} OPTIONAL,
        scs-15kHz ProcessingParameters OPTIONAL,
        scs-30kHz ProcessingParameters OPTIONAL,
        scs-60kHz ProcessingParameters OPTIONAL
    } OPTIONAL,
    pdsch-ProcessingType2-Limited SEQUENCE \
        differentTB-PerSlot-SCS-30kHz ENUMERATED {uptol, upto2, upto4, uptol}
    } OPTIONAL,
    dl-MCS-TableAlt-DynamicIndication ENUMERATED {supported} OPTIONAL
}
FeatureSetDownlink-vl5a0 ::= SEQUENCE [
    supportedSRS-Resources SRS-Resources OPTIONAL
}
FeatureSetDownlink-vl6l0 ::= SEQUENCE {
```

```
    cogPDSCH-ProcessingTypel-DifferentTB-PerSlot-rl6 SEQUENCE {
        scs-15kHz-r16 ENUMERATED {one, upto2, upto4, upto7} OPTIONAL,
        scs-30kHz-r16 ENUMERATED {one, upto2, upto4, upto7} OPTIONAL,
        scs-60kHz-r16 ENUMERATED {one, upto2, upto4, upto7} OPTIONAL,
        scs-120kHz-r16 ENUMERATED {one, upto2, upto4, upto7} OPTIONAL
    } OPTIONAL,
```

```
    cogPDSCH-ProcessingType2-DifferentTB-PerSlot-rl6 SEQUENCE {
```


ETSI


--- Page 888  ---


3GPP TS 38.331 version 17.0.0 Release 17
887
ETSI TS 138331 V17.0.0 (2022-05)
```
        scs-15kHz-r16 ENUMERATED {one, upto2, upto4, upto7} OPTIONAL,
        scs-30kHz-r16 ENUMERATED {one, upto2, upto4, upto7} OPTIONAL,
        scs-60kHz-r16 ENUMERATED {one, upto2, upto4, upto7} OPTIONAL,
        scs-120kHz-r16 ENUMERATED {one, upto2, upto4, upto7} OPTIONAL
    } OPTIONAL,
    intraFreqDAPS-rl6 SEQUENCE \
        intraFreqDiffSCS-DAPS-r16 ENUMERATED {supported} OPTIONAL,
        intraFreqAsyncDAPS-r16 ENUMERATED {supported} OPTIONAL
    } OPTIONAL,
    intraBandFreqSeparationDL-vl620 FreqSeparationClassDL-vl620 OPTIONAL,
    intraBandFreqSeparationDL-Only-rl6 FreqSeparationClassDL-Only-r16 OPTIONAL,
    -- Rl ll-2: Rel-16 PDCCH monitoring capability
    pdcch-Monitoring-rl6 SEQUENCE {
        pdsch-ProcessingTypel-rl6 SEQUENCE {
            scs-15kHz-r16 PDCCH-MonitoringOccasions-rl6 OPTIONAL,
            scs-30kHz-r16 PDCCH-MonitoringOccasions-rl6 OPTIONAL
        }
        pdsch-ProcessingType2-r16 SEQUENCE {
            scs-15kHz-r16 PDCCH-MonitoringOccasions-rl6 OPTIONAL,
            scs-30kHz-r16 PDCCH-MonitoringOccasions-rl6 OPTIONAL
        }
    } OPTIONAL,
```

```
    pdcch-MonitoringMixed-r16 ENUMERATED {supported} OPTIONAL,
    -- Rl 18-5c: Processing up to X unicast DCI scheduling for DL per scheduled CC
    crossCarrierSchedulingProcessing-DiffSCS-r16 SEQUENCE {
        scs-l5kHz-120kHz-r16 ENUMERATED {nl,n2,n4} OPTIONAL,
        scs-15kHz-60kHz-r16 ENUMERATED {nl,n2,n4} OPTIONAL,
        scs-30kHz-120kHz-r16 ENUMERATED {nl,n2,n4} OPTIONAL,
        scs-l5kHz-30kHz-r16 ENUMERATED {n2} OPTIONAL,
        scs-30kHz-60kHz-r16 ENUMERATED {n2} OPTIONAL,
        scs-60kHz-120kHz-r16 ENUMERATED {n2} OPTIONAL
    } OPTIONAL,
    -- Rl 16-2b-1: Support of single-DCI based SDM scheme
    singleDCI-SDM-scheme-rl6 ENUMERATED {supported} OPTIONAL
}
FeatureSetDownlink-vl700 ::= SEQUENCE {
    -- Rl 36-2: Scaling factor to be applied to 1024QAM for FRl
    scalingFactor-1024QAM-FRl-rl7 ENUMERATED {f0p4, f0p75, f0p8} OPTIONAL
}
PDCCH-MonitoringOccasions-r16 ::= SEQUENCE [
    period7span3-rl6 ENUMERATED {supported} OPTIONAL,
    period4span3-r16 ENUMERATED [supported] OPTIONAL,
    period2span2-r16 ENUMERATED {supported} OPTIONAL
}
Dummy ::= SEQUENCE \
    maxNumberNZP-CSI-RS-PerCC INTEGER (1..32),
```


ETSI


--- Page 889  ---


3GPP TS 38.331 version 17.0.0 Release 17
888
ETSI TS 138331 V17.0.0 (2022-05)
```
    maxNumberPortsAcrossNZP-CSI-RS-PerCC
        ENUMERATED {p2, p4, p8, p12, p16, p24, p32, p40, p48, p56, p64, p72, p80,
    p88, p96, p104, p112, p120, p128, p136, p144, p152, p160, p168,
    maxNumberCS-IM-PerCC
    maxNumberSimultaneousCSI-RS-ActBWP-AllCC
            p176, p184, p192, p200, p208, p216, p224, p232, p240, p248, p256},
ENUMERATED {nl, n2, n4, n8, nl6, n32},
ENUMERATED {n5, n6, n7, n8, n9, nl0, nl2, nl4, nl6, nl8, n20, n22, n24, n26,
        n28, n30, n32, n34, n36, n38, n40, n42, n44, n46, n48, n50, n52,
            n54, n56, n58, n60, n62, n64},
    totalNumberPortsSimultaneousCSI-RS-ActBWP-AllCC ENUMERATED \p8, p12, pl6, p24, p32, p40, p48, p56, p64, p72, p80,
                p88, p96, pl04, pl12, pl20, pl28, pl36, pl44, pl52, pl60, pl68,
                p176, p184, p192, p200, p208, p216, p224, p232, p240, p248, p256}
}
DummyB ::= SEQUENCE \
    maxNumberTx Ports PerResource
    maxNumberResources
    totalNumberTxPorts
    supportedCodebookMode
    maxNumberCSI-RS-PerResourceSet
}
DummyC ::= SEQUENCE \
    maxNumberTxPortsPerResource
    maxNumberResources
    totalNumberTxPorts
    supportedCodebookMode
    supportedNumberPanels
    maxNumberCSI-RS-PerResourceSet
}
DummD ::= SEQUENCE \
    maxNumberTxPortsPerResource
    maxNumberResources
    totalNumberTxPorts
    parameterLx
    amplitudeScalingType
    amplitudeSubsetRestriction
    maxNumberCSI-RS-PerResourceSet
}
DummyE ::= SEQUENCE [
    maxNumberTxPortsPerResource
    maxNumberResources
    totalNumberTxPorts
    parameterLx
    amplitudeScalingType
    maxNumberCSI-RS-PerResourceSet
}
-- TAG-FEATURESETDOWNLINK-STOP
-- ASNISTOP
```


ETSI


--- Page 890  ---


3GPP TS 38.331 version 17.0.0 Release 17
889
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline FeatureSetDownlink field descriptions \\
\hline \begin{tabular}{l}
featureSetListPerDownlinkCC \\
Indicates which features the UE supports on the individual DL carriers of the feature set (and hence of a band entry that refer to the feature set). The UE shall hence include at least as many FeatureSetDownlinkPerCC-/d in this list as the number of carriers it supports according to the ca-BandwidthClassDL, except if indicating additional functionality by reducing the number of FeatureSetDowninkPerCC-Id in the feature set (see NOTE 1 in FeatureSetCombination IE description). The order of the elements in this list is not relevant, i.e., the network may configure any of the carriers in accordance with any of the FeatureSetDowninkPerCC-Id in this list.
\end{tabular} \\
\hline \begin{tabular}{l}
supportedSRS-Resources \\
Indicates supported SRS resources for SRS carrier switching to the band associated with this FeatureSetDownink. The UE is only allowed to set this field for a band with associated FeatureSetUplinkld set to 0.
\end{tabular} \\
\hline
\end{tabular}
- FeatureSetDownlinkId

The IE FeatureSetDownlinkld identifies a downlink feature set. The FeatureSetDownlinkld of a FeatureSetDownlink is the index position of the FeatureSetDownlink in the featureSetsDownlink list in the FeatureSets [E. The first element in that list is referred to by FeatureSetDownlinkld \( =1 \). The FeatureSetDownlinkl \( d=0 \) is not used by an actual FeatureSetDownlink but means that the UE does not support a carrier in this band of a band combination.

FeatureSetDownlinkld information element
```
-- ASNISTART
-- TAG-FEATURESETDOWNLINKID-START
FeatureSetDownlinkId:: INTEGER (O..maxDownlinkFeatureSets)
-- TAG-FEATURESETDOWNLINKID-STOP
-- ASNISTOP
```

- FeatureSetDownlinkPerCC

The IE FeatureSetDownlinkPerCC indicates a set of features that the UE supports on the corresponding carrier of one band entry of a band combination.

FeatureSetDownlinkPerCC information element
```
-- ASNISTART
-- TAG-FEATURESETDOWNLINKPERCC-START
FeatureSetDownlinkPerCC ::= SEQUENCE {
    supportedSubcarrierSpacingDL SubcarrierSpacing,
    supportedBandwidthDL SupportedBandwidth,
    channelBW-90mhz ENUMERATED {supported}
    maxNumberMIMO-LayersPDSCH MIMO-LayersDL
    supportedModulationOrderDL ModulationOrder
}
FeatureSetDownlinkPerCC-vl620 ::= SEQUENCE {
    -- Rl 16-2a: Mulit-DCI based multi-TRP
```


ETSI


--- Page 891  ---


3GPP TS 38.331 version 17.0.0 Release 17
890
ETSI TS 138331 V17.0.0 (2022-05)
```
    -- R1 16-2b-3: Support of single-DCI based FDMSchemeB
```

```
}
FeatureSetDownlinkPerCC-vl700 ::= SEQUENCE {
```

```
}
MultiDCI-MultiTRP-rl6 ::= SEQUENCE \
    maxNumberCORESET-rl6 ENUMERATED {n2, n3, n4, n5},
    maxNumberCORESETPerPoolIndex-rl6 INTEGER (1..3),
    maxNumberUnicastPDSCH-PerPool-rl6 ENUMERATED {nl, n2, n3, n4, n7}
}
-- TAG-FEATURESETDOWNLINKPERCC-STOP
-- ASNISTOP
```

- FeatureSetDownlinkPerCC-Id

The IE FeatureSetDownlinkPerCC-Id identifies a set of features applicable to one carrier of a feature set. The FeatureSetDownlinkPerCC-Id of a FeatureSetDownlinkPerCC is the index position of the FeatureSetDownlinkPerCC in the featureSetsDownlinkPerCC. The first element in the list is referred to by FeatureSetDownlinkPerCC-Id \( =1 \), and so on.

FeatureSetDownlinkPerCC-Id information element
```
-- ASNISTART
-- TAG-FEATURESETDOWNLINKPERCC-ID-START
FeatureSetDownlinkPerCC-Id::= INTEGER (l..maxPerCC-FeatureSets)
-- TAG-FEATURESETDOWNLINKPERCC-ID-STOP
-- ASNISTOP
```

- FeatureSetEUTRA-Downlinkld

The IE FeatureSetEUTRA-Downlinkld identifies a downlink feature set in E-UTRA list (see TS 36.331 [10]. The first element in that list is referred to by FeatureSetEUTRADownlinkld \( =1 \). The FeatureSetEUTRA-Downlinkld \( =0 \) is used when the UE does not support a carrier in this band of a band combination.

FeatureSetEUTRA-Downlinkid information element
```
-- ASNISTART
-- TAG-FEATURESETEUTRADOWNLINKID-START
FeatureSetEUTRA-DownlinkId ::= INTEGER (O..maxEUTRA-DL-FeatureSets)
-- TAG-FEATURESETEUTRADOWNLINKID-STOP
```


ETSI


--- Page 892  ---


3GPP TS 38.331 version 17.0.0 Release 17
891
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP
- FeatureSetEUTRA-Uplinkld

The IE FeatureSetEUTRA-Uplinkld identifies an uplink feature set in E-UTRA list (see TS 36.331 [10]. The first element in that list is referred to by FeatureSetEUTRAUplinkld \( =1 \). The FeatureSetEUTRA-Uplinkld \( =0 \) is used when the UE does not support a carrier in this band of a band combination.

FeatureSetEUTRA-Uplinkld information element
-- ASNISTART
-- TAG-FEATURESETEUTRAUPLINKID-START
FeatureSetEUTRA-UplinkId : := INTEGER (0. maxEUTRA-UL-FeatureSets)
-- TAG-FEATURESETEUTRAUPLINKID-STOP
-- ASNISTOP
- FeatureSets

The IE FeatureSets is used to provide pools of downlink and uplink features sets. A FeatureSetCombination refers to the IDs of the feature set(s) that the UE supports in that FeatureSetCombination. The BandCombination entries in the BandCombinationList then indicate the ID of the FeatureSetCombination that the UE supports for that band combination.

The entries in the lists in this IE are identified by their index position. For example, the FeatureSetUplinkPerCC-Id \( =4 \) identifies the \( 4{ }^{\text {th }} \) element in the featureSetsUplinkPerCC list.

NOTE: When feature sets (per CC) [Es require extension in future versions of the specification, new versions of the FeatureSetDownlink, FeatureSetUplink, FeatureSets, FeatureSetDownlinkPerCC and/or FeatureSetUplinkPerCC will be created and instantiated in corresponding new lists in the FeatureSets IE. For example, if new capability bits are to be added to the FeatureSetDownlink, they will instead be defined in a new FeatureSetDownlink-rxy which will be instantiated in a new featureSetDownlinkList-rxy list. If a UE indicates in a FeatureSetCombination that it supports the FeatureSetDownlink with ID \#5, it implies that it supports both the features in FeatureSetDownlink \#5 and FeatureSetDownlink-rxy \#5 (if present). The number of entries in the new list(s) shall be the same as in the original list(s).

FeatureSets information element
-- ASNISTART
-- TAG-FEATURESETS-START
FeatureSets : : SEQUENCE [
featureSetsDownlink
featureSetsDownlinkPerCC
featureSetsUplink
featureSetsUplinkPerCC

SEQUENCE (SIZE (1..maxDownlinkFeatureSets)) OF FeatureSetDownlink OPTIONAL,
SEQUENCE (SIZE (1..maxPerCC-FeatureSets)) OF FeatureSetDownlinkPerCC OPTIONAL,
SEQUENCE (SIZE (1..maxUplinkFeatureSets)) OF FeatureSetUplink OPTIONAL,
SEQUENCE (SIZE (1..maxPerCC-FeatureSets)) OF FeatureSetUplinkPerCC OPTIONAL,
⋯'
[ [

ETSI


--- Page 893  ---


3GPP TS 38.331 version 17.0.0 Release 17
892
ETSI TS 138331 V17.0.0 (2022-05)
```
    featureSetsDownlink-vl540
    featureSetsUplink-vl540
    featureSetsUplinkPerCC-v1540
    ]],
    [ [
    ]],
    [ [
    featureSetsDownlink-vl610
    featureSetsUplink-vl6l0
    featureSetDownlinkPerCC-vl620
    ]],
    [ [
    ]],
    [ [
    featureSetsUplink-v
    ]],
    [ [
    featureSetsDownlink-vl700
    featureSetsDownlinkPerCC-vl700
    featureSetsUplinkPerCC-vl700
    ] ]
}
-- TAG-FEATURESETS-STOP
-- ASNISTOP
```

```
SEQUENCE (SIZE (l..maxDownlinkFeatureSets)) OF FeatureSetDownlink-vl540 OPTIONAL,
SEQUENCE (SIZE (l..maxUplinkFeatureSets)) OF FeatureSetUplink-vl540 OPTIONAL,
SEQUENCE (SIZE (l..maxPerCC-FeatureSets)) OF FeatureSetUplinkPerCC-vl540 OPTIONAL
```

SEQUENCE (SIZE (1..maxDownlinkFeatureSets)) OF FeatureSetDownlink-vl5a0 OPTIONAL
SEQUENCE (SIZE (1..maxDownlinkFeatureSets)) OF FeatureSetDownlink-vl6lo OPTIONAL,
SEQUENCE (SIZE (l..maxUplinkFeatureSets)) OF FeatureSetUplink-vl6lO OPTIONAL,
SEQUENCE (SIZE (1..maxPerCC-FeatureSets)) OF FeatureSetDownlinkPerCC-vl620 OPTIONAL
SEQUENCE (SIZE (1..maxUplinkFeatureSets)) OF FeatureSetUplink-vl630 OPTIONAL
SEQUENCE (SIZE (l..maxUplinkFeatureSets)) OF FeatureSetJplink-vl640 OPTIONAL
SEQUENCE (SIZE (1..MaxDownlinkFeatureSets)) OF FeatureSetDownlink-vl700 OPTIONAL,
SEQUENCE (SIZE (1..maxPerCC-FeatureSets)) OF FeatureSetDownlinkPerCC-vl700 OPTIONAL,
SEQUENCE (SIZE (1..maxPerCC-FeatureSets)) OF FeatureSetUplinkPerCC-vl700 OPTIONAL

FeatureSetUplink
The IE FeatureSetUplink is used to indicate the features that the UE supports on the carriers corresponding to one band entry in a band combination.
FeatureSetUplink information element
```
-- ASNISTART
-- TAG-FEATURESETUPLINK-START
FeatureSetUplink ::=
SEQUENCE \
    featureSetListPerUplinkCC
    scalingFactor
    dummy 3
    intraBandFreqSeparationUL
    searchSpaceSharingCA-UL
    dummyl
    supportedSRS-Resources
    twoPUCCH-Group
    dynamicSwitchSUL
    simultaneousTxSUL-NonSUL
    pusch-P.
        SEQUENCE
         F Ne
    SEQUENCE (SIZE (1.. maxNrofServingCells)) OF FeatureSetUplinkPerCC-Id,
    ENUMERATED {f0p4, f0p75, f0p8} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    FreqSeparationClass OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    Dummyl OPTIONAL,
    SRS-Resources OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {upto2, upto4, upto7} OPTIONAL,
            ENUMERATED {upto2, upto4, upto7}
```


ETSI


--- Page 894  ---


3GPP TS 38.331 version 17.0.0 Release 17
893
ETSI TS 138331 V17.0.0 (2022-05)
```
    }
    dumay2 DumayF
}
FeatureSetUplink-vl540 ::= SEQUENCE \
    zeroSlotOffsetAperiodicSRS ENUMERATED {supported} OPTIONAL,
    pa-PhaseDiscontinuityImpacts ENUMERATED {supported} OPTIONAL,
    pusch-SeparationWithGap ENUMERATED {supported} OPTIONAL,
    pusch-ProcessingType2 SEQUENCE \
        scs-15kHz ProcessingParameters OPTIONAL,
        scs-30kHz ProcessingParameters
        scs - 60 kHz
    }
    ul- OPTIONAL,
}
FeatureSetUplink-vl610 ::= SEQUENCE \
    -- Rl 11-5: PUsCH repetition Type B
    pusch-RepetitionTypeB-r16 SEQUENCE \
        maxNumberPUSCH-Tx-rl6 ENUMERATED {n2, n3, n4, n7, n8, nl2},
        hoppingScheme-rl6 ENUMERATED {interSlotHopping, interRepetitionHopping, both}
    } OPTIONAL,
    -- Rl ll-7: UL cancelation scheme for self-carrier
    ul-CancellationSelfCarrier-rl6 ENUMERATED [supported] OPTIONAL,
    -- Rl ll-7a: UL cancelation scheme for cross-carrier
    ul-CancellationCrossCarrier-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-5c: The maximum number of SRS resources in one SRS resource set with usage set to 'codebook' for Mode 2
    ul-FullPwrMode2-MaxSRS-ResInSet-r16 ENUMERATED {nl, n2, n4} OPTIONAL,
```

```
    cogPUSCH-ProcessingTypel-DifferentTB-PerSlot-rl6 SEQUENCE {
            scs-15kHz-r16 ENUMERATED {one-pusch, upto2, upto4, upto7} OPTIONAL,
            scs-30kHz-r16 ENUMERATED {one-pusch, upto2, upto4, upto7} OPTIONAL,
            scs-60kHz-rl6 ENUMERATED {one-pusch, upto2, upto4, upto7} OPTIONAL,
            scs-120kHz-r16 ENUMERATED {one-pusch, upto2, upto4, upto7} OPTIONAL
        } OPTIONAL,
```

```
    cogPUSCH-ProcessingType2-DifferentTB-PerSlot-rl6 SEQUENCE {
            scs-15kHz-rl6 ENUMERATED {one-pusch, upto2, upto4, upto7} OPTIONAL,
            scs-30kHz-r16 ENUMERATED {one-pusch, upto2, upto4, upto7} OPTIONAL,
            scs-60kHz-r16 ENUMERATED {one-pusch, upto2, upto4, upto7} OPTIONAL,
            scs-120kHz-r16 ENUMERATED {one-pusch, upto2, upto4, upto7} OPTIONAL
        } OPTIONAL,
    supportedSRS-PosResources-r16 SRS-AllPosResources-rl6 OPTIONAL,
    intraFreqDAPS-UL-rl6 SEQUENCE \
            dumny ENUMERATED {supported} OPTIONAL,
        intraFreqTwoTAGs-DAPS-rl6 ENUMERATED {supported} OPTIONAL,
        dumnyl ENUMERATED {supported} OPTIONAL,
        dumny2 ENUMERATED {supported} OPTIONAL,
        dumny3 ENUMERATED {short, long} OPTIONAL
    }
```


ETSI


--- Page 895  ---


3GPP TS 38.331 version 17.0.0 Release 17
894
ETSI TS 138331 V17.0.0 (2022-05)
```
intraBandFreqSeparationUL-vl620 FreqSeparationClassUL-vl620 OPTIONAL,
-- Rl ll-3: More than one PUCCH for HARQ-ACK transmission within a slot
multiPUCCH-rl6 SEQUENCE {
    sub-SlotConfig-NCP-rl6 ENUMERATED {setl, set2} OPTIONAL,
    sub-SlotConfig-ECP-rl6 ENUMERATED {setl, set2} OPTIONAL
} OPTIONAL,
-- Rl ll-3c: 2 PUCCH of format 0 or 2 for a single 7*2-symbol subslot based HARQ-ACK codebook
twoPUCCH-Typel-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl ll-3d: 2 PUCCH of format 0 or 2 for a single 2*7-symbol subslot based HARQ-ACK codebook
twoPUCCH-Type2-r16 ENUMERATED {supported} OPTIONAL,
-- Rl ll-3e: l PUCCH format 0 or 2 and l PUCCH format l, 3 or 4 in the same subslot for a single 2*7-symbol HARQ-ACK codebooks
twoPUCCH-Type3-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl ll-3f: 2 PUCCH transmissions in the same subslot for a single 2*7-symbol HARQ-ACK codebooks which are not covered by ll-3d and
-- 11-3e
twoPUCCH-Type4-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl ll-3g: SR/HARQ-ACK multiplexing once per subslot using a PUCCH (or HARQ-ACK piggybacked on a PUSCH) when SR/HARQ-ACK
-- are supposed to be sent with different starting symbols in a subslot
mux-SR-HARQ-ACK-r16 ENUMERATED {supported} OPTIONAL,
dummyl ENUMERATED {supported} OPTIONAL,
dumm2 ENUMERATED {supported} OPTIONAL,
-- Rl ll-4c: 2 PUCCH of format 0 or 2 for two HARQ-ACK codebooks with one 7*2-symbol sub-slot based HARQ-ACK codebook
twoPUCCH-Type5-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl ll-4d: 2 PUCCH of format 0 or 2 in consecutive symbols for two HARQ-ACK codebooks with one 2*7-symbol sub-slot based HARQ-ACK
-- codebook
twoPUCCH-Type6-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl ll-4e: 2 PUCCH of format 0 or 2 for two subslot based HARQ-ACK codebooks
twoPUCCH-Type7-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl ll-4f: l PUCCH format 0 or 2 and l PUCCH format l, 3 or 4 in the same subslot for HARQ-ACK codebooks with one 2*7-symbol
-- subslot based HARQ-ACK codebook
twoPUCCH-Type8-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl ll-4g: l PUCCH format 0 or 2 and l PUCCH format l, 3 or 4 in the same subslot for two subslot based HARQ-ACK codebooks
twoPUCCH-Type9-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl 1l-4h: 2 PUCCH transmissions in the same subslot for two HARQ-ACK codebooks with one 2*7-symbol subslot which are not covered
-- by 11-4c and 11-4e
twoPUCCH-Typel0-r16 ENUMERATED {supported} OPTIONAL,
-- Rl ll-4i: 2 PUCCH transmissions in the same subslot for two subslot based HARQ-ACK codebooks which are not covered by ll-4d and
-- 11-4f
twoPUCCH-Typell-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl 12-l: UL intra-UE multiplexing/prioritization of overlapping channel/signals with two priority levels in physical layer
ul-IntraUE-Mux-rl6 SEQUENCE {
    pusch-PreparationLowPriority-r16 ENUMERATED {sym0, syml, sym2},
    pusch-PreparationHighPriority-rl6 ENUMERATED {sym0, syml, sym2}
} OPTIONAL,
-- Rl 16-5a: Supported UL full power transmission mode of fullpower
ul-FullPwrMode-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl 18-5d: Processing up to X unicast DCI scheduling for UL per scheduled CC
crossCarrierSchedulingProcessing-DiffSCS-rl6 SEQUENCE {
    scs-l5kHz-120kHz-rl6 ENUMERATED {nl,n2,n4} OPTIONAL,
    scs-l5kHz-60kHz-rl6 ENUMERATED {nl,n2,n4} OPTIONAL,
    scs-30kHz-120kHz-rl6 ENUMERATED {n1,n2,n4} OPTIONAL,
    scs-l5kHz-30kHz-rl6 ENUMERATED {n2} OPTIONAL,
    scs -30kHz-60kHz-rl6 ENUMERATED {n2} OPTIONAL,
    scs-60kHz-120kHz-r16 ENUMERATED {n2} OPTIONAL
```


ETSI


--- Page 896  ---


3GPP TS 38.331 version 17.0.0 Release 17
895
ETSI TS 138331 V17.0.0 (2022-05)
```
    } OPTIONAL,
    -- Rl 16-5b: Supported UL full power transmission mode of fullpowerModel
    ul-FullPwrModel-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-5c-2: Ports configuration for Mode 2
    ul-FullPwrMode2-SRSConfig-diffNumSRSPorts-rl6 ENUMERATED {pl-2, pl-4, pl-2-4} OPTIONAL,
    -- Rl 16-5c-3: TPMI group for Mode 2
    ul-FullPwrMode2-TPMIGroup-rl6 SEQUENCE {
        twoPorts-rl6 BIT STRING(SIZE(2)) OPTIONAL,
        fourPortsNonCoherent-rl6 ENUMERATED{g0, gl, g2, g3} OPTIONAL,
        fourPortsPartialCoherent-rl6 ENUMERATED{g0, gl, g2, g3, g4, g5, g6} OPTIONAL
    }
}
FeatureSetUplink-vl630 ::= SEQUENCE {
```

```
    offsetSRS-CB-PUSCH-Ant-Switch-frl-rl6 ENUMERATED {supported} OPTIONAL,
```

```
    -- PUSCH and antenna switching on FRl
    offsetSRS-CB-PUSCH-PDCCH-MonitorSingleOcc-frl-rl6 ENUMERATED {supported} OPTIONAL,
```

```
    -- of a slot for Case 2 and constrained timeline for SRS for CB PUSCH and antenna switching on FRl
    offsetSRS-CB-PUSCH-PDCCH-MonitorAnyOccWithoutGap-frl-rl6 ENUMERATED {supported} OPTIONAL,
```

```
    -- of a slot for Case 2 with a DCI gap and constrained timeline for SRS for CB PUSCH and antenna switching on FRl
    offsetSRS-CB-PUSCH-PDCCH-MonitorAnyOccWithGap-frl-rl6 ENUMERATED {supported} OPTIONAL,
    dumny ENUMERATED {supported} OPTIONAL,
```

```
    partialCancellationPUCCH-PUSCH-PRACH-TX-r16 ENUMERATED {supported} OPTIONAL
}
FeatureSetUplink-vl640 ::= SEQUENCE \
```

```
    -- sub-slot based) simultaneously constructed for supporting HARQ-ACK codebooks with different priorities at a UE
    twoHARQ-ACK-Codebook-typel-rl6 SubSlot-Config-rl6 OPTIONAL,
```

```
    -- priorities at a UE
    twoHARQ-ACK-Codebook-type2-rl6 SubSlot-Config-rl6 OPTIONAL,
```

```
    -- for SRS for CB PUSCH and antenna switching on FRl
    offsetSRS-CB-PUSCH-PDCCH-MonitorAnyOccWithSpanGap-frl-rl6 SEQUENCE {
        scs-l5kHz-rl6 ENUMERATED {setl, set2, set3} OPTIONAL,
        scs-30kHz-r16 ENUMERATED {setl, set2, set3}
        scs - 60 kHz-r16
    }
}
SubSlot-Config-r16::= SEQUENCE \
    sub-SlotConfig-NCP-rl6
    sub-SlotConfig-ECP-r16
}
SRS-AllPosResources-rl6 ::= SEQUENCE [
    srs-PosResources-r16
    srs-PosResourceAP-r16
    } SRS-PosResources-rl6,
        SRS-PosResourceAP-r16 OPTIONAL,
```


ETSI


--- Page 897  ---


3GPP TS 38.331 version 17.0.0 Release 17
896
ETSI TS 138331 V17.0.0 (2022-05)
```
    srs-PosResourceSP-r16 SRS-PosResourceSP-r16 OPTIONAL
}
SRS-PosResources-r16 ::= SEQUENCE \
    maxNumberSRS-PosResourceSet PerBWP-r16
    ENUMERATED {nl, n2, n4, n8, nl2, nl6},
    ENUMERATED{nl, n2, n4, n8, nl6, n32, n64},
    maxNumberPeriodicSRS-PosResourcesPerBWP-r16 ENUMERATED {nl, n2, n4, n8, nl6, n32, n64},
    maxNumberPeriodicSRS-PosResourcesPerBWP-PerSlot-rl6 ENUMERATED {nl, n2, n3, n4, n5, n6, n8, nl0, nl2, nl4}
}
SRS-PosResourceAP-rl6 ::= SEQUENCE \
    maxNumberAP-SRS-PosResourcesPerBWP-r16 ENUMERATED {nl, n2, n4, n8, nl6, n32, n64},
    maxNumberAP-SRS-PosResourcesPerBWP-PerSlot-rl6 ENUMERATED {nl, n2, n3, n4, n5, n6, n8, nl0, nl2, nl4}
}
SRS-PosResourceSP-rl6 ::= SEQUENCE \
    maxNumberSP-SRS-PosResourcesPerBWP-r16 ENUMERATED{nl, n2, n4, n8, nl6, n32, n64},
    maxNumberSP-SRS-PosResourcesPerBWP-PerSlot-rl6 ENUMERATED {nl, n2, n3, n4, n5, n6, n8, nl0, nl2, nl4}
}
SRS-Resources ::= SEQUENCE \
    maxNumberAperiodicSRS-PerBWP ENUMERATED {nl, n2, n4, n8, nl6},
    maxNumberAperiodicSRS-PerBWP-PerSlot INTEGER (1..6),
    maxNumberPeriodicSRS-PerBWP ENUMERATED {nl, n2, n4, n8, n16},
    maxNumberPeriodicSRS-PerBWP-PerSlot INTEGER (1..6),
    maxNumberSemiPersistentSRS-PerBWP ENUMERATED {nl, n2, n4, n8, nl6},
    maxNumberSemiPersistentSRS-PerBWP-PerSlot INTEGER (1..6),
    maxNumberSRS-Ports-PerResource ENUMERATED {nl, n2, n4}
}
DummyF ::= SEQUENCE \
    maxNumberPeriodicCSI-ReportPerBWP INTEGER (1..4),
    maxNumberAperiodicCSI-ReportPerBWP INTEGER (1..4),
    maxNumberSemiPersistentCSI-ReportPerBWP INTEGER (0.4),
    simultaneousCSI-ReportsAllCC INTEGER (5..32)
}
-- TAG-FEATURESETUPLINK-STOP
-- ASNISTOP
```


FeatureSetUplink field descriptions
featureSetListPerUplinkCC
Indicates which features the UE supports on the individual UL carriers of the feature set (and hence of a band entry that refers to the feature set). The UE shall hence include at least as many FeatureSetUplinkPerCC-Id in this list as the number of carriers it supports according to the ca-BandwidthClassUL, except if indicating additional functionality by reducing the number of FeatureSetUplinkPerCC-Id in the feature set (see NOTE 1 in FeatureSetCombination IE description). The order of the elements in this list is not relevant, i.e., the network may configure any of the carriers in accordance with any of the FeatureSetUplinkPerCC-Id in this list.

ETSI


--- Page 898  ---


3GPP TS 38.331 version 17.0.0 Release 17
897
ETSI TS 138331 V17.0.0 (2022-05)
- FeatureSetUplinkld

The IE FeatureSetUplinkld identifies an uplink feature set. The FeatureSetUplinkld of a FeatureSetUplink is the index position of the FeatureSetUplink in the featureSetsUplink list in the FeatureSets IE. The first element in the list is referred to by FeatureSetUplinkld \( =1 \), and so on. The FeatureSetUplinkld \( =0 \) is not used by an actual FeatureSetUplink but means that the UE does not support a carrier in this band of a band combination.

FeatureSetUplinkld information element
```
-- ASNISTART
-- TAG-FEATURESETUPLINKID-START
FeatureSetUplinkId ::= INTEGER (O.maxUplinkFeatureSets)
-- TAG-FEATURESETUPLINKID-STOP
-- ASNISTOP
```


FeatureSetUplinkPerCC
The IE FeatureSetUplinkPerCC indicates a set of features that the UE supports on the corresponding carrier of one band entry of a band combination.

FeatureSetUplinkPerCC information element
```
-- ASNISTART
-- TAG-FEATURESETUPLINKPERCC-START
FeatureSetUplinkPerCC ::= SEQUENCE \
    supportedSubcarrierSpacingUL SubcarrierSpacing,
    supportedBandwidthUL SupportedBandwidth,
    channelBW-90mhz ENUMERATED {supported}
    mimo-CB-PUSCH
        maxNumberMIMO-LayersCB-PUSCH
        maxNumberSRS-ResourcePerSet
    }
    maxNumberMIMO-LayersNonCB-PUSCH
    supportedModulationOrderUL
}
FeatureSetUplinkPerCC-vl540 ::= SEQUENCE {
    mimo-NonCB-PUSCH SEQUENCE \
        maxNumberSRS-ResourcePerSet INTEGER (1.4),
        maxNumberSimultaneousSRS-ResourceTx INTEGER (1..4)
    } OPTIONAL
}
FeatureSetUplinkPerCC-vl700 ::= SEQUENCE [
    supportedMinBandwidthUL-rl7 SupportedBandwidth-vl700 OPTIONAL
}
-- TAG-FEATURESETUPLINKPERCC-STOP
-- ASNISTOP
```


ETSI


--- Page 899  ---


3GPP TS 38.331 version 17.0.0 Release 17
898
ETSI TS 138331 V17.0.0 (2022-05)
- FeatureSetUplinkPerCC-Id

The IE FeatureSetUplinkPerCC-Id identifies a set of features applicable to one carrier of a feature set. The FeatureSetUplinkPerCC-Id of a FeatureSetUplinkPerCC is the index position of the FeatureSetUplinkPerCC in the featureSetsUplinkPerCC. The first element in the list is referred to by FeatureSetUplinkPerCC-Id \( =1 \), and so on.

FeatureSetUplinkPerCC-Id information element
```
-- ASNISTART
-- TAG-FEATURESETUPLINKPERCC-ID-START
FeatureSetUplinkPerCC-Id::= INTEGER (l..MAXPerCC-FeatureSets)
-- TAG-FEATURESETUPLINKPERCC-ID-STOP
-- ASNISTOP
```

- FreqBandIndicatorEUTRA
-- ASNISTART
-- TAG-FREQBANDINDICATOREUTRA-START
FreqBandIndicatorEUTRA ::= INTEGER (1..maxBandsEUTRA)
-- TAG-FREQBANDINDICATOREUTRA-STOP
-- ASNISTOP
- FreqBandList

The IE FreqBandList is used by the network to request NR CA, NR non-CA and/or MR-DC band combinations for specific NR and/or E-UTRA frequency bands and/or up to a specific number of carriers and/or up to specific aggregated bandwidth. This is also used to request feature sets (for NR) and feature set combinations (for NR and MR-DC). For NR sidelink communication, this is used by the initiating UE to request sidelink UE radio access capabilities from the peer UE.

FreqBandList information element
```
-- ASNISTART
-- TAG-FREQBANDLIST-START
FreqBandInformation ::=
    bandInformationEUTRA
    bandInformationNR
}
```

```
FreqBandList ::= SEQUENCE (SIZE (l..maxBandsMRDC)) OF FreqBandInformation
SEQUENCE (SIZE (1..maxBandsMRDC)) OF FreqBandInformation
CHOICE \
    FreqBandInformationEUTRA,
    FreqBandInformationNR
```


ETSI


--- Page 900  ---


3GPP TS 38.331 version 17.0.0 Release 17
899
ETSI TS 138331 V17.0.0 (2022-05)
```
FreqBandInformationEUTRA ::=
    bandEUTRA
    ca-BandwidthClassDL-EUTRA
    ca-BandwidthClassUL-EUTRA
}
FreqBandInformationNR ::=
    bandNR
    maxBandwidthRequestedDL
    maxBandwidthRequestedUL
    maxCarriersRequested.DL
    maxCarriersRequestedUL
}
AggregatedBandwidth ::=
-- TAG-FREQBANDLIST-STOP
-- ASNISTOP
```

- FreqSeparationClass

The IE FreqSeparationClass is used for an intra-band non-contiguous CA band combination to indicate frequency separation between lower edge of lowest CC and upper edge of highest CC in a frequency band.

FreqSeparationClass information element

FreqSeparationClassDL-Only
The IE FreqSeparationClassDL-Only is used to indicate the frequency separation between lower edge of lowest CC and upper edge of highest CC of DL only frequency spectrum in a frequency band.

FreqSeparationClassDL-Only information element

-- ASNISTART
```
SEQUENCE {
    FreqBandIndicatorEUTRA,
    CA-BandwidthClassEUTRA
    CA-BandwidthClassEUTRA
```


SEQUENCE 1
    FreqBandIndicatorNR,
    AggregatedBandwidth
    AggregatedBandwidth
    INTEGER (1..MAXNrofServingCells)
    INTEGER (1..maxNrofServingCells)
```
OPTIONAL, -- Need. N
OPTIONAL -- Need. N
```

OPTIONAL, -- Need N
OPTIONAL, -- Need N
OPTIONAL, -- Need N
OPTIONAL -- Need N
```
ENUMERATED [mhz50, mhz100, mhz150, mhz200, mhz250, mhz300, mhz350,
        mhz400, mhz450, mhz500, mhz550, mhz600, mhz650, mhz700, mhz750, mhz800}
```

```
}
```

            "
-
"
□
```
-- ASNISTART
-- TAG-FREQSEPARATIONCLASS-START
FreqSeparationClass ::= ENUMERATED {mhz800, mhz1200, mhz1400, ..., mhz400-v1650, mhz600-v1650}
FreqSeparationClassDL-vl620 ::= ENUMERATED {mhz1000, mhzl600, mhz1800, mhz2000, mhz2200, mhz2400}
FreqSeparationClassUL-vl620 ::= ENUMERATED {mhzl000}
-- TAG-FREQSEPARATIONCLASS-STOP
-- ASN1STOP
--
-- TAG-FREQSEPARATIONCLASS-START
FreqSeparationClass ::= ENUMERATED {mhz800, mhz1200, mhz1400, ... mhz400-v1650, mhz600-v1650}
EreqSeparationClassDL-vl620::= ENUMERATED {mhz1000, mhz1600, mhz1800, mhz2000, mhz2200, mhz2400}
    :)
    }
```

        FreqSeparationClassDL-Only
    -

T spectrum in a frequency band.
\( \_\_\_\_ \) FreqSeparationClassDL-Only information element
FreqSeparationClassDL-Only information element


--- Page 901  ---


3GPP TS 38.331 version 17.0.0 Release 17
900
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-FREQSEPARATIONCLASSDL-Only-START
FreqSeparationClassDL-Only-r16 ::= ENUMERATED {mhz200, mhz400, mhz600, mhz800, mhz1000, mhz1200}
-- TAG-FREQSEPARATIONCLASSDL-Only-STOP
-- ASNISTOP
```


FR2-2-AccessParamsPerBand
The IE FR2-2-AccessParamsPerBand is used to convey FR2-2 related parameters specific for a certain frequency band (not per feature set or band combination).

FR2-2-AccessParamsPerBand information element
```
-- ASNISTART
-- TAG-FR2-2-ACCESSPARAMSPERBAND-START
FR2-2-AccessParamsPerBand-r17 ::= SEQUENCE \
    -- R1 24-1: Basic FR2-2 DL support
    dl-FR2-2-SCS-120kHz-r17 ENUMERATED {supported} OPTIONAL,
    -- R1 24-1a: Basic FR2-2 UL support
    ul-FR2-2-SCS-120kHz-r17 ENUMERATED {supported} OPTIONAL,
    -- R1 24-2: 120KHz SSB support for initial access in FR2-2
    initialAccessSSB-120kHz-rl7 ENUMERATED {supported} OPTIONAL,
    ...
}
-- TAG-FR2-2-ACCESSPARAMSPERBAND-STOP
-- ASN1STOP
```

- HighSpeedParameters

The IE HighSpeedParameters is used to convey capabilities related to high speed scenarios.

HighSpeedParameters information element
```
-- ASNISTART
-- TAG-HIGHSPEEDPARAMETERS-START
HighSpeedParameters-rl6 ::= SEQUENCE {
    measurementEnhancement-rl6 ENUMERATED {supported} OPTIONAL,
    demodulationEnhancement-r16 ENUMERATED {supported} OPTIONAL
}
HighSpeedParameters-v1650 ::= CHOICE {
    intraNR-MeasurementEnhancement-r16 ENUMERATED {supported},
    interRAT-MeasurementEnhancement-rl6 ENUMERATED {supported}
}
```


ETSI


--- Page 902  ---


3GPP TS 38.331 version 17.0.0 Release 17
901
ETSI TS 138331 V17.0.0 (2022-05)
```
HighSpeedParameters-vl700 ::= SEQUENCE [
    -- R4 18-1: Enhanced RRM requirements specified for CA for FRl HST
    measurementEnhancementCA-rl7 ENUMERATED {supported} OPTIONAL,
    -- R4 18-2: Enhanced RRM requirements specified for inter-frequency measurement in connected mode for FRl HST
    measurementEnhancementInterFreq-rl7 ENUMERATED {supported} OPTIONAL
}
-- TAG-HIGHSPEEDPARAMETERS-STOP
-- ASNISTOP
```


IMS-Parameters
The IE IMS-Parameters is used to convey capabilities related to IMS.

IMS-Parameters information element
```
-- ASNISTART
-- TAG-IMS-PARAMETERS-START
IMS-Parameters ::= SEQUENCE \
    ims-ParametersCommon IMS-ParametersCommon OPTIONAL,
    ims-ParametersFRX-Diff IMS-ParametersFRX-Diff OPTIONAL,
    ...
}
IMS-Parameters-vl700 ::= SEQUENCE \
    ims-ParametersFR2-2-rl7 IMS-ParametersFR2-2-rl7 OPTIONAL
}
IMS-ParametersCommon ::= SEQUENCE \
    voiceOverEUTRA-5GC ENUMERATED {supported} OPTIONAL,
    ...;
    [ [
    voiceOverSCG-BearerEUTRA-5GC ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    voiceEallbackIndicationEPS-r16 ENUMERATED {supported} OPTIONAL
    ]]
}
IMS-ParametersFRX-Diff ::= SEQUENCE |
    voiceOverNR ENUMERATED {supported} OPTIONAL,
    ...
}
IMS-ParametersFR2-2-rl7 ::= SEQUENCE {
    voiceOverNR-rl7 ENUMERATED {supported} OPTIONAL,
    ...
}
-- TAG-IMS-PARAMETERS-STOP
```


ETSI


--- Page 903  ---


3GPP TS 38.331 version 17.0.0 Release 17
902
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP
- InterRAT-Parameters

The IE InterRAT-Parameters is used convey UE capabilities related to the other RATs.
InterRAT-Parameters information element
```
-- ASNISTART
-- TAG-INTERRAT-PARAMETERS-START
InterRAT-Parameters ::=
    SEQUENCE {
    eutra
    ...;
    [ [
    utra-FDD-rl6 UTRA-FDD-Parameters-r16 OPTIONAL
    ] ]
}
EUTRA-Parameters ::= SEQUENCE \
    supportedBandListEUTRA
    eutra-ParametersCommon
    eutra-ParametersXDD-Diff EUTRA-ParametersXDD-Diff OPTIONAL,
    ...
}
EUTRA-ParametersCommon ::= SEQUENCE {
    mfbi-EUTRA
    modifiedMPR-BehaviorEUTRA
    multiNS-Pmax-EUTRA
    rs-SINR-MeasEUTRA
    ...;
    [ [
    ne-DC ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    nr-HO-TOEN-DC-rl6 ENUMERATED {supported} OPTIONAL
    ] ]
}
EUTRA-ParametersXDD-Diff ::= SEQUENCE {
    rsrqMeasWidebandEUTRA ENUMERATED {supported} OPTIONAL,
    ...
}
UTRA-FDD-Parameters-rl6 ::= SEQUENCE [
    supportedBandListUTRA-FDD-r16 SEQUENCE (SIZE (1..maxBandsUTRA-FDD-r16)) OF SupportedBandUTRA-FDD-r16,
    ...
}
```


ETSI


--- Page 904  ---


3GPP TS 38.331 version 17.0.0 Release 17
903
ETSI TS 138331 V17.0.0 (2022-05)

SupportedBandUTRA-FDD-r16 ::=

ENUMERATED [ bandI, bandII, bandIII, bandIV, bandV, bandVI, bandVII, bandVIII, bandIX, bandX, bandXI, bandXII, bandXIII, bandXIV, bandXV, bandXVI, bandXVII, bandXVIII, bandXIX, bandXX, bandXXI, bandXXII, bandXXIII, bandXXIV, bandXXV, bandXXVI, bandXXVII, bandXXVIII, bandXXIX, bandXXX, bandXXXI, bandXXXII\}
-- TAG-INTERRAT-PARAMETERS-STOP
-- ASNISTOP

MAC-Parameters
The IE MAC-Parameters is used to convey capabilities related to MAC.
MAC-Parameters information element
```
-- ASNISTART
-- TAG-MAC-PARAMETERS-START
MAC-Parameters ::= SEQUENCE [
    mac-ParametersCommon MAC-ParametersCommon OPTIONAL,
    mac-ParametersXDD-Diff MAC-ParametersXDD-Diff OPTIONAL
}
MAC-Parameters-vl610 ::= SEQUENCE [
    mac-ParametersFRX-Diff-rl6 MAC-ParametersFRX-Diff-rl6 OPTIONAL
}
MAC-Parameters-vl700 ::= SEQUENCE [
    mac-ParametersFR2-2-rl7 MAC-ParametersFR2-2-r17 OPTIONAL
}
MAC-ParametersCommon ::= SEQUENCE \
    lcp-Restriction ENUMERATED {supported} OPTIONAL,
    dummy ENUMERATED {supported} OPTIONAL,
    lch-ToSCellRestriction ENUMERATED {supported} OPTIONAL,
    ...;
    [ [
    recommendedBitRate ENUMERATED {supported} OPTIONAL,
    recommendedBitRateQuery ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    recommendedBitRateMultiplier-rl6
    preEmptiveBSR-r16
    autonomousTransmission-rl6
    lch-PriorityBasedPrioritization-rl
    lch-ToConfiguredGrantMapping-rl6
    lch-ToGrantPriorityRestriction-rl6
    singlePHR-P-rl6

\begin{tabular}{ll} 
& \\
ENUMERATED [supported] & OPTIONAL, \\
ENUMERATED [supported] & OPTIONAL, \\
ENUMERATED [supported] & OPTIONAL, \\
ENUMERATED [supported] & OPTIONAL, \\
ENUMERATED [supported] & OPTIONAL, \\
ENUMERATED [supported] & OPTIONAL, \\
ENUMERATED [supported] & OPTIONAL,
\end{tabular}
```


ETSI


--- Page 905  ---


3GPP TS 38.331 version 17.0.0 Release 17
904
ETSI TS 138331 V17.0.0 (2022-05)
```
    ul-LBT-FailureDetectionRecovery-r16 ENUMERATED {supported} OPTIONAL,
    -- R4 8-1: MPE
    tdd-MPE-P-MPR-Reporting-rl6 ENUMERATED {supported} OPTIONAL,
    lcid-ExtensionIAB-rl6 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    spCell-BER-CBRA-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    srs-ResourceId-Ext-rl6 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    enhancedUuDRX-forSidelink-rl7 ENUMERATED {supported} OPTIONAL,
    --27-10: Support of UL MAC CE based MG activation request for PRS measurements
    mg-ActivationRequestPRS-Meas-rl7 ENUMERATED {supported} OPTIONAL,
    --27-11: Support of DL MAC CE based MG activation request for PRS measurements
    mg-ActivationCommPRS-Meas-rl7 ENUMERATED {supported} OPTIONAL,
    intraCG-Prioritization-rl7 ENUMERATED {supported} OPTIONAL,
    jointPrioritizationCG-Retx-Timer-rl7 ENUMERATED {supported} OPTIONAL,
    survivalTime-rl7 ENUMERATED {supported} OPTIONAL,
    lcg-ExtensionIAB-rl7 ENUMERATED {supported} OPTIONAL,
    maxNumberRNTIs-MBS-rl7 INTEGER (l..ffsUPPerLimit) OPTIONAL, -- EFS
    harq-FeedbackDisabled-rl7 ENUMERATED {supported} OPTIONAL,
    uplink-Harq-ModeB-rl7 ENUMERATED {supported} OPTIONAL,
    sr-TriggeredBy-TA-Report-rl7 ENUMERATED {supported} OPTIONAL
    ] ]
}
MAC-ParametersFRX-Diff-rl6 ::= SEQUENCE {
    directMCG-SCellActivation-rl6 ENUMERATED {supported} OPTIONAL,
    directMCG-SCellActivationResume-rl6 ENUMERATED {supported} OPTIONAL,
    directSCG-SCellActivation-rl6 ENUMERATED {supported} OPTIONAL,
    directSCG-SCellActivationResume-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 19-1: DRX Adaptation
    drx-Adaptation-rl6 SEQUENCE \
        non-SharedSpectrumChAccess-r16 MinTimeGap-rl6 OPTIONAL,
        sharedSpectrumChAccess-rl6 MinTimeGap-r16 OPTIONAL
    } OPTIONAL,
    ...
}
MAC-ParametersFR2-2-rl7 ::= SEQUENCE {
    directMCG-SCellActivation-rl7 ENUMERATED {supported} OPTIONAL,
    directMCG-SCellActivationResume-rl7 ENUMERATED {supported} OPTIONAL,
    directSCG-SCellActivation-rl7 ENUMERATED {supported} OPTIONAL,
    directSCG-SCellActivationResume-rl7 ENUMERATED {supported} OPTIONAL,
    ...
}
MAC-ParametersXDD-Diff ::= SEQUENCE \
    skipUplinkTxDynamic ENUMERATED {supported} OPTIONAL,
    logicalChannelSR-DelayTimer ENUMERATED {supported} OPTIONAL,
    longDRX-Cycle ENUMERATED {supported} OPTIONAL,
    shortDRX-Cycle ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 906  ---


3GPP TS 38.331 version 17.0.0 Release 17
905
ETSI TS 138331 V17.0.0 (2022-05)
```
    multipleSR-Configurations
    multipleConfiguredGrants
    ...;
    [ [
    secondaryDRX-Group-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    enhancedSkipUplinkTxDynamic-r16
    enhancedSkipUplinkTxConfigured-r16
    ] ]
}
MinTimeGap-r16 ::= SEQUENCE [
    scs-l5kHz-rl6
    scs-30kHz-r16
    scs - 60 kHz-rl6
    scs - l20kHz-rl6
}
-- TAG-MAC-PARAMETERS-STOP
-- ASNISTOP
```

```
ENUMERATED {supported} OPTIONAL,
ENUMERATED {supported} OPTIONAL,
```

```
ENUMERATED {supported} OPTIONAL,
ENUMERATED {supported} OPTIONAL
ENUMERATED {sll, sl3} OPTIONAL,
ENUMERATED {sll, sl6} OPTIONAL,
ENUMERATED {sll, sll2} OPTIONAL,
ENUMERATED {sl2, sl24} OPTIONAL
```

- MeasAndMobParameters

The IE MeasAndMobParameters is used to convey UE capabilities related to measurements for radio resource management (RRM), radio link monitoring (RLM) and mobility (e.g. handover).

MeasAndMobParameters information element
```
-- ASN1START
-- TAG-MEASANDMOBPARAMETERS-START
MeasAndMobParameters ::= SEQUENCE \
    measAndMobParametersCommon
    measAndMobParametersXDD-Diff
    measAndMobParametersFRX-Diff
}
MeasAndMobParameters-vl700 ::= SEQUENCE [
    measAndMobParametersFR2-2-rl7
}
MeasAndMobParametersCommon ::=
    supportedGapPattern
    ssb-RLM
    ssb-AndCSI-RS-RLM
    ...;
    [ [
    eventB-MeasAndReport ENUMERATED {supported} OPTIONAL,
    handoverFDD-TDD
    eutra-CGI-Reporting
    BIT STRING (SIZE (22)) OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED [supported] OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 907  ---


3GPP TS 38.331 version 17.0.0 Release 17
906
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline nr-CGI-Reporting & ENUMERATED \{supported\} & OPTIONAL \\
\hline \multicolumn{3}{|l|}{]],} \\
\hline independentGapConfig & ENUMERATED [supported] & OPTIONAL, \\
\hline periodicEUTRA-MeasAndReport & ENUMERATED [supported] & OPTIONAL, \\
\hline handoverFRI-FR2 & ENUMERATED \{supported\} & OPTIONAL, \\
\hline maxNumberCSI-RS-RRM-RS-SINR & ENUMERATED \{n4, n8, n16, n32, n64, n96\} & OPTIONAL \\
\hline \multicolumn{3}{|l|}{] ],} \\
\hline nr-CGI-Reporting-ENDC & ENUMERATED \{supported\} & OPTIONAL \\
\hline \multicolumn{3}{|l|}{]],} \\
\hline \multicolumn{3}{|l|}{[ [} \\
\hline eutra-CGI-Reporting-NEDC & ENUMERATED [supported] & \multirow[t]{6}{*}{OPTIONAL, OPTIONAL, OPTIONAL, OPTIONAL} \\
\hline eutra-CGI-Reporting-NRDC & ENUMERATED \{supported\} & \\
\hline nr-CGI-Reporting-NEDC & ENUMERATED \{supported\} & \\
\hline nr-CGI-Reporting-NRDC & ENUMERATED [supported] & \\
\hline \multicolumn{3}{|l|}{\multirow{2}{*}{]], [ [}} \\
\hline & & \\
\hline reportAddNeighMeasForPeriodic-r16 & ENUMERATED \{supported\} & OPTIONAL, \\
\hline condHandoverParametersCommon-rl6 & \multicolumn{2}{|l|}{SEQUENCE [} \\
\hline condHandoverFDD-TDD-r16 & ENUMERATED \{supported\} & OPTIONAL, \\
\hline condHandoverFR1-FR2-r16 & ENUMERATED \{supported\} & OPTIONAL \\
\hline \multicolumn{2}{|l|}{\}} & OPTIONAL, \\
\hline nr-NeedForGap-Reporting-rl6 & ENUMERATED & OPTIONAL, \\
\hline supportedGapPattern-NRonly-rl6 & BIT STRING & OPTIONAL, \\
\hline supportedGapPattern-NRonly-NEDC-rl6 & ENUMERATED \{supported\} & OPTIONAL, \\
\hline maxNumberCLI-RSSI-r16 & ENUMERATED & OPTIONAL, \\
\hline maxNumberCLI-SRS-RSRP-r16 & ENUMERATED & OPTIONAL, \\
\hline maxNumberPerSlotCLI-SRS-RSRP-r16 & ENUMERATED & OPTIONAL, \\
\hline mfbi-IAB-rl6 & ENUMERATED & OPTIONAL, \\
\hline dummy & ENUMERATED & OPTIONAL, \\
\hline nr-CGI-Reporting-NPN-rl6 & ENUMERATED & OPTIONAL, \\
\hline idleInactiveEUTRA-MeasReport-r16 & ENUMERATED & OPTIONAL, \\
\hline idleInactive-ValidityArea-rl6 & ENUMERATED & OPTIONAL, \\
\hline eutra-AutonomousGaps-rl6 & ENUMERATED & OPTIONAL, \\
\hline eutra-AutonomousGaps-NEDC-rl6 & ENUMERATED & OPTIONAL, \\
\hline eutra-AutonomousGaps-NRDC-r16 & ENUMERATED & OPTIONAL, \\
\hline pcellT312-rl6 & ENUMERATED & OPTIONAL, \\
\hline supportedGapPattern-rl6 & BIT STRING & OPTIONAL \\
\hline \multicolumn{3}{|l|}{] ],} \\
\hline \multicolumn{3}{|l|}{[ [} \\
\hline \multicolumn{3}{|l|}{-- R4 19-2 Concurrent measurement gaps} \\
\hline concurrentMeasGap-rl7 & ENUMERATED [supported] & OPTIONAL, \\
\hline -- R4 19-1 Network controlled small gap & (NCSG) & \\
\hline ncsg-MeasGap-rl7 & ENUMERATED [supported] & OPTIONAL, \\
\hline ncsg-MeasGapEUTRAN-rl7 & ENUMERATED [supported] & OPTIONAL, \\
\hline -- R4 19-3-2 pre-configured measurement & gap & \\
\hline preconfiguredUE-AutonomousMeasGap-rl7 & ENUMERATED [supported] & OPTIONAL, \\
\hline -- R4 19-3-1 pre-configured measurement & \multicolumn{2}{|l|}{gap} \\
\hline preconfiguredNW-ControlledMeasGap-rl7 & ENUMERATED \{supported\} & OPTIONAL, \\
\hline handoverFRI-FR2-2-rl7 & ENUMERATED \{supported\} & OPTIONAL, \\
\hline handoverFR2-1-FR2-2-r17 & ENUMERATED [supported] & OPTIONAL, \\
\hline \multicolumn{3}{|l|}{-- RAN4 14-1: per-FR MG for PRS measurement} \\
\hline independentGapConfigPRS-rl7 & ENUMERATED \{supported\} & OPTIONAL \\
\hline
\end{tabular}

ETSI


--- Page 908  ---


3GPP TS 38.331 version 17.0.0 Release 17
907
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]]
}
MeasAndMobParametersXDD-Diff ::=
    intraAndInterF-MeasAndReport
    event Mexim
    ...,
    [ [
    handoverInterF ENUMERATED {supported} OPTIONAL,
    handoverLTE-EPC ENUMERATED {supported}
    handoverLTE-5GC ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    sftd-MeasNR-Neigh ENUMERATED {supported} OPTIONAL,
    sftd-MeasNR-Neigh-DRX ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    dumny ENUMERATED {supported} OPTIONAL
    ]]
}
MeasAndMobParametersFRX-Diff ::= SEQUENCE {
    ss-SINR-Meas
    csi-RSRP-And
    csi-RSRP-AndRSRQ-MeasWithoutSSB
    csi-SINR-Meas
    csi-RS-RLM
    ...,
    [ [
    handoverInterF ENUMERATED {supported} OPTIONAL,
    handover 
    handoverLTE-5GC ENUMERATED [supported
    ]],
    [ [
    maxNumberResource-CSI-RS-RLM ENUMERATED {n2, n4, n6, n8} OPTIONAL
    ]],
    [ [
    simultaneousRxDataSSB-DiffNumerology ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    nr-AutonomousGaps-rl6 ENUMERATED {supported} OPTIONAL,
    nr-AutonomousGaps-ENDC-r16 ENUMERATED {supported} OPTIONAL,
    nr-AutonomousGaps-NEDC-r16 ENUMERATED {supported} OPTIONAL,
    nr-AutonomousGaps-NRDC-rl6 ENUMERATED {supported} OPTIONAL,
    dummy Eli-RSSI-Meas-rl6 ENUMERATED {supported} OPTIONAL,
```

```
    interFrequencyMeas-NoGap-rl6 ENUMERATED {supported} OPTIONAL,
    simultaneousRxDataSSB-DiffNumerology-Inter-rl6 ENUMERATED [supported] ENUMERATED {supported} OPTIONAL,
    -- R4 6-2: Support of beam level Early Measurement Reporting
    idleInactiveNR-MeasBeamReport-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
```

```
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL
OPTIONAL,
```

```
ONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL
OPTIONAL
```

```
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
```


--- Page 909  ---


3GPP TS 38.331 version 17.0.0 Release 17
908
ETSI TS 138331 V17.0.0 (2022-05)
```
    increasedNumberofCSIRSPerMO-r16
    ]]
}
MeasAndMobParametersFR2-2-rl7 ::=
    handoverInterF-rl7
    handoverLTE-EPC-rl7
    handoverLTE-5GC-rl7
    idleInactiveNR-MeasReport-rl7
\text { ⋯}
}
-- TAG-MEASANDMOBPARAMETERS-STOP
-- ASNISTOP
```


MeasAndMobParametersMRDC
The IE MeasAndMobParametersMRDC is used to convey capability parameters related to RRM measurements and RRC mobility.

MeasAndMobParametersMRDC information element
```
-- ASNISTART
-- TAG-MEASANDMOBPARAMETERSMRDC-START
MeasAndMobParametersMRDC ::= SEQUENCE [
    measAndMobParametersMRDC-Common MeasAndMobParametersMRDC-Comon OPTIONAL,
    measAndMobParametersMRDC-XDD-Diff MeasAndMobParametersMRDC-XDD-Diff OPTIONAL,
    measAndMobParametersMRDC-FRX-Diff MeasAndMobParametersMRDC-FRX-Diff OPTIONAL
}
MeasAndMobParametersMRDC-vl560 ::= SEQUENCE {
    measAndMobParametersMRDC-XDD-Diff-vl560 MeasAndMobParametersMRDC-XDD-Diff-vl560 OPTIONAL
}
MeasAndMobParametersMRDC-vl610 ::= SEQUENCE \
    measAndMobParametersMRDC-Common-vl610 MeasAndMobParametersMRDC-Comon-vl6lO OPTIONAL,
    interNR-MeasEUTRA-IAB-r16 ENUMERATED {supported} OPTIONAL
}
MeasAndMobParametersMRDC-vl700 ::= SEQUENCE [
    measAndMobParametersMRDC-Comon-vl700 MeasAndMobParametersMRDC-Common-vl700 OPTIONAL
}
MeasAndMobParametersMRDC-Common ::= SEQUENCE \
    independentGapConfig ENUMERATED {supported} OPTIONAL
}
MeasAndMobParametersMRDC-Common-vl610 ::= SEQUENCE {
    condPSCellChangeParametersCommon-r16 SEQUENCE {
        condPSCellChangeFDD-TDD-rl6 ENUMERATED {supported} OPTIONAL,
        condPSCellChangeFRl-FR2-rl6 ENUMERATED {supported} OPTIONAL
```


ETSI


--- Page 910  ---


3GPP TS 38.331 version 17.0.0 Release 17
909
ETSI TS 138331 V17.0.0 (2022-05)
```
    } OPTIONAL,
    pscellT312-rl6 ENUMERATED {supported} OPTIONAL
}
MeasAndMobParametersMRDC-Common-vl700 ::= SEQUENCE {
    condPSCellChangeParameters-rl7 SEQUENCE {
        inter-SN-condPSCellChangeFDD-TDD-NRDC-rl7 ENUMERATED {supported} OPTIONAL,
        inter-SN-condPSCellChangeFRl-FR2-NRDC-rl7 ENUMERATED {supported} OPTIONAL,
        inter-SN-condPSCellChangeFDD-TDD-ENDC-rl7 ENUMERATED {supported} OPTIONAL,
        inter-SN-condPSCellChangeFRl-FR2-ENDC-rl7 ENUMERATED {supported} OPTIONAL,
        mn-InitiatedCondPSCellChange-FRlFDD-ENDC-rl7 ENUMERATED {supported} OPTIONAL,
        mn-InitiatedCondPSCellChange-FRlTDD-ENDC-rl7 ENUMERATED {supported} OPTIONAL,
        mn-InitiatedCondPSCellChange-FR2TDD-ENDC-rl7 ENUMERATED {supported} OPTIONAL,
        sn-InitiatedCondPSCellChange-FRlFDD-ENDC-rl7 ENUMERATED {supported} OPTIONAL,
        sn-InitiatedCondPSCellChange-FRlTDD-ENDC-rl7 ENUMERATED {supported} OPTIONAL,
        sn-InitiatedCondPSCellChange-FR2TDD-ENDC-rl7 ENUMERATED [supported] OPTIONAL
    }
}
MeasAndMobParametersMRDC-XDD-Diff ::= SEQUENCE {
    sftd-MeasPSCell ENUMERATED {supported} OPTIONAL,
    sftd-MeasNR-Cell ENUMERATED {supported} OPTIONAL
}
MeasAndMobParametersMRDC-XDD-Diff-vl560 ::= SEQUENCE {
    sftd-MeasPSCell-NEDC
}
MeasAndMobParametersMRDC-FRX-Diff ::= SEQUENCE {
    simultaneousRxDataSSB-DiffNumerology ENUMERATED {supported} OPTIONAL
}
-- TAG-MEASANDMOBPARAMETERSMRDC-STOP
-- ASNISTOP
```


MIMO-Layers
The IE MIMO-Layers is used to convey the number of supported MIMO layers.
MIMO-Layers information element
```
-- ASNISTART
-- TAG-MIMO-LAYERS-START
MIMO-LayersDL ::= ENUMERATED {twoLayers, fourLayers, eightLayers}
MIMO-LayersUL ::= ENUMERATED {oneLayer, twoLayers, fourLayers}
-- TAG-MIMO-LAYERS-STOP
-- ASNISTOP
```


ETSI


--- Page 911  ---


3GPP TS 38.331 version 17.0.0 Release 17
910
ETSI TS 138331 V17.0.0 (2022-05)

MIMO-ParametersPerBand
The IE MIMO-ParametersPerBand is used to convey MIMO related parameters specific for a certain band (not per feature set or band combination).
MMO-ParametersPerBand information element
```
-- ASNISTART
-- TAG-MIMO-PARAMETERSPERBAND-START
MIMO-ParametersPerBand ::= SEQUENCE {
    tci-StatePDSCH SEQUENCE {
        maxNumberConfiguredTCIstatesPerCC ENUMERATED {n4, n8, nl6, n32, n64, nl28}
        maxNumberActiveTCI-PerBWP ENUMERATED {nl, n2, n4, n8}
    }
    additionalActiveTCI-StatePDCCH ENUMERATED {supported}
    pusch-TransCoherence ENUMERATED {nonCoherent, partialCoherent, fullCoherent}
    beamCorrespondenceWithoutUL-BeamSweeping
    periodicBeamReport
    aperiodicBeamReport
    sp-BeamReport PUCCH
    sp-BeamReportPUSCH
    dummyl
    maxNumberRxBeam
    maxNumberRxTxBeamSwitchDL
        scs - l 5kHz
        scs - 30kHz
        scs - 60 kHz
        scs - 120kHz
        scs - 240kHz
    }
    maxNumberNonGroupBeamReporting
    groupBeamReporting
    uplinkBeamManagement
        maxNumberSRS-ResourcePerSet-BM
        maxNumberSRS-ResourceSet
    }
    maxNumberCSI-RS-BFD
    maxNumberSSB-BFD
    maxNumberCSI-RS-SSB-CBD
    dummy2
    twoPortsPTRS-UL
    dummy 5
    dummy 3
    beamReportTiming
        scs-15kHz ENUMERATED {sym2, sym4, sym8}
        scs - 30kHz
        scs-60kHz
        sym28}
    }
    ptrs-DensityRecommendationSetDL SEQUENCE {
        scs-15kHz PTRS-DensityRecommendationDL
        scs-30kHz PTRS-DensityRecommendationDL
```

```
        scs - 60 kHz
sCs-60kHz
-DensityRecommendationDL
```


ETSI


--- Page 912  ---


3GPP TS 38.331 version 17.0.0 Release 17
911
ETSI TS 138331 V17.0.0 (2022-05)
```
    scs - 120 kHz
PTRS-DensityRecommendationDL
}
ptrs-DensityRecommendationSetUL SEQUENCE {
    scs - l 5kHz
    scs - 30 kHz
    scs - 60 kHz
    scs - l20kHz
}
dumny 4 DumayH
aperiodicTRS ENUMERATED {supported}
...;
[ [
dummy6
beamManagementSSB-CSI-RS
beamSwitchTiming
    scs - 60 kHz
    scs - 120kHz
}
codebookParameters
csi-RS-IM-ReceptionForFeedback
csi-RS-ProcFrameworkForSRS
csi-ReportFramework
csi-RS-ForTracking
srs-AssocCSI-RS
spatialRelations
]],
[ [
-- Rl 16-2b-0: Support of default QCL assumption with two TCI states
defaultQCL-TwoTCI-rl6 ENUMERATED [supported]
codebookParametersPerBand-r16 CodebookParameters-vl610
-- Rl 16-1b-3: Support of PUCCH resource groups per BWP for simultaneous spatial relation update
simul-SpatialRelationUpdatePUCCHResGroup-rl6 ENUMERATED {supported}
-- Rl 16-lf: Maximum number of SCells configured for SCell beam failure recovery simultaneously
```

```
-- R1 16-2c: Supports simultaneous reception with different Type-D for FR2 only
```

```
-- Rl 16-la-l: SSB/CSI-RS for Ll-SINR measurement
ssb-csirs-SINR-measurement-rl6 SEQUENCE {
    maxNumberSSB-CSIRS-OneTx-CMR-rl6 ENUMERATED {n8, nl6, n32, n64},
    maxNumberCSI-IM-NZP-IMR-res-r16 ENUMERATED {n8, nl6, n32, n64},
    maxNumberCSIRS-2Tx-res-r16 ENUMERATED {n0, n4, n8, nl6, n32, n64},
    maxNumberSSB-CSIRS-res-rl6 ENUMERATED {n8, nl6, n32, n64, nl28},
    maxNumberCSI-IM-NZP-IMR-res-mem-rl6 ENUMERATED {n8, nl6, n32, n64, nl28},
    supportedCSI-RS-Density-CMR-r16 ENUMERATED {one, three, oneAndThree},
    maxNumberAperiodicCSI-RS-Res-r16 ENUMERATED {n2, n4, n8, nl6, n32, n64},
```

```
-- Rl 16-1a-2: Non-group based Ll-SINR reporting
```

```
-- Rl 16-la-3: Non-group based Ll-SINR reporting
```


ETSI


--- Page 913  ---


3GPP TS 38.331 version 17.0.0 Release 17
912
ETSI TS 138331 V17.0.0 (2022-05)
```
    multiDCI-multiTRP-Parameters-rl6 SEQUENCE {
        -- Rl 16-2a-0: Overlapping PDSCHs in time and fully overlapping in frequency and time
        overlapPDSCHsFullyFreqTime-rl6 INTEGER (1..2) OPTIONAL,
        -- Rl 16-2a-1: Overlapping PDSCHs in time and partially overlapping in frequency and time
        overlapPDSCHsInTimePartiallyFreq-rl6 ENUMERATED {supported} OPTIONAL,
        -- Rl 16-2a-2: Out of order operation for DL
        outOfOrderOperationDL-rl6 SEQUENCE {
            supportPDCCH-ToPDSCH-rl6 ENUMERATED {supported} OPTIONAL,
            supportPDSCH-ToHARQ-ACK-r16 ENUMERATED {supported}
        }
        -- Rl 16-2a-3: Out of order operation for UL
        outOfOrderOperationUL-r16 ENUMERATED {supported}
        -- Rl 16-2a-5: Separate CRS rate matching
        separateCRS-RateMatching-rl6 ENUMERATED {supported}
        -- Rl 16-2a-6: Default QCL enhancement for multi-DCI based multi-TRP
        defaultQCL-PerCORESETPoolIndex-rl6 ENUMERATED {supported}
        -- Rl 16-2a-7: Maximum number of activated TCI states
        maxNumberActivatedTCI-States-r16 SEQUENCE {
            maxNumberPerCORESET-Pool-rl6 ENUMERATED {nl, n2, n4, n8},
            maxTotalNumberAcrossCORESET-Pool-rl6 ENUMERATED {n2, n4, n8, nl6}
        }
    }
    singleDCI-SDM-scheme-Parameters-r16 SEQUENCE {
        -- Rl 16-2b-1b: Single-DCI based SDM scheme - Support of new DMRS port entry
        supportNewDMRS-Port-r16 ENUMERATED {supportedl, supported2, supported3}
OPTIONAL,
        -- Rl 16-2b-la: Support of s-port DL PTRS
        supportTwoPortDL-PTRS-r16 ENUMERATED {supported}
    }
    -- R1 16-2b-2: Support of single-DCI based FDMSchemeA
```

```
    -- Rl 16-2b-3a: Single-DCI based FDMSchemeB CW soft combining
```

```
    -- Rl 16-2b-4: Single-DCI based TDMSchemeA
```

```
    -- Rl 16-2b-5: Single-DCI based inter-slot TDM
    supportInter-slotTDM-r16 SEQUENCE {
        supportRepNumPDSCH-TDRA-r16 ENUMERATED {n2, n3, n4, n5, n6, n7, n8, nl6},
        maxTBS-Size-rl6 ENUMERATED {ko3, kb5, kbl0, ko20, noRestriction},
        maxNumberTCI-states-rl6 INTEGER (1..2)
    } -- R1 16-4: Low PAPR DMRS for PDSCH
```

```
    lowPAPR-DMRS-PDSCH-r16 ENUMERATED {supported}
    -- Rl 16-6a: Low PAPR DMRS for PUSCH without transform precoding
    lowPAPR-DMRS-PUSCHwithoutPrecoding-rl6 ENUMERATED {supported}
    -- Rl 16-6b: Low PAPR DMRS for PUCCH
    lowPAPR-DMRS-PUCCH-r16 ENUMERATED {supported}
    -- Rl 16-6c: Low PAPR DMRS for PUSCH with transform precoding & pi/2 BPSK
    lowPAPR-DMRS-PUSCHwithPrecoding-rl6 ENUMERATED {supported}
    -- Rl 16-7: Extension of the maximum number of configured aperiodic CSI report settings
    csi-ReportFrameworkExt-rl6 CSI-ReportFrameworkExt-rl6
    -- Rl 16-3a, 16-3a-1, 16-3b, 16-3b-1, 16-8: Individual new codebook types
    codebookParametersAddition-r16 CodebookParametersAddition-rl6
```

```
OPT OPTIONAL
```


OPTIONAL OPTIONAL,

OPTIONAL OPTIONAL, OPTIONAL, OPTIONAL, OPTIONAL, OPTIONAL, OPTIONAL, OPTIONAL, OPTIONAL, OPTIONAL, OPTIONAL,
```
    -- Rl 16-8: Mixed codebook types
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
```


ETSI


--- Page 914  ---


3GPP TS 38.331 version 17.0.0 Release 17
913
ETSI TS 138331 V17.0.0 (2022-05)
```
    -- R4 8-2: SSB based beam correspondence
```

```
    -- R4 8-3: CSI-RS based beam correspondence
```

```
    beamSwitchTiming-rl6 SEQUENCE {
        scs-60kHz-rl6 ENUMERATED {sym224, sym336} OPTIONAL,
        scs-120kHz-r16 ENUMERATED {sym224, sym336} OPTIONAL
    }
    ]],
    [ [
    -- Rl 16-la-4: Semi-persistent Ll-SINR report on PUCCH
    semi-PersistentLl-SINR-Report-PUCCH-rl6 SEQUENCE {
        supportReportFormatl-20FDM-syms-r16 ENUMERATED {supported} OPTIONAL,
        supportReportFormat4-140FDM-syms-r16 ENUMERATED {supported} OPTIONAL
    } OPTIONAL,
    -- Rl 16-la-5: Semi-persistent Ll-SINR report on PUSCH
    semi-PersistentLl-SINR-Report-PUSCH-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    -- Rl 16-1h: Support of 64 configured PUCCH spatial relations
    spatialRelations-vl640 SEQUENCE {
        maxNumberConfiguredSpatialRelations-v1640 ENUMERATED {n96, n128, nl60, n192, n224, n256, n288, n320}
    } OPTIONAL,
    -- Rl 16-li: Support of 64 configured candidate beam RSs for BFR
    support64CandidateBeamRS-BER-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    -- R1 16-2a-9: Interpretation of maxNumberMIMO-LayersPDSCH for multi-DCI based mTRP
    maxMIMO-LayersForMulti-DCI-mTRP-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    supportedSINR-meas-vl670 BIT STRING (SIZE (4)) OPTIONAL
    ]],
    [ [
    -- Rl 23-8-5 Increased repetition for SRS
    srs-increasedRepetition-rl7 ENUMERATED {supported} OPTIONAL,
    -- Rl 23-8-6 Partial frequency sounding of SRS
    srs-partialFrequencySounding-rl7 ENUMERATED {supported} OPTIONAL,
    -- Rl 23-8-7 Start RB location hopping for partial frequency SRS
    srs-startRB-locationHoppingPartial-rl7 ENUMERATED {supported} OPTIONAL,
    -- Rl 23-8-8 Comb-8 SRS
    srs-combEight-rl7 ENUMERATED {supported} OPTIONAL,
    -- Rl 23-9-1 Basic Features of Further Enhanced Port-Selection Type II Codebook (FeType-II) per band information
    codebookParametersfetype2-rl7 CodebookParametersfetype2-rl7 OPTIONAL
    ]]
}
Dummy ::= SEQUENCE \
    maxNumberSSB-CSI-RS-ResourceOneTx ENUMERATED {n8, n16, n32, n64},
    maxNumberSSB-CSI-RS-ResourceTwoTx ENUMERATED {n0, n4, n8, nl6, n32, n64},
    supportedCSI-RS-Density ENUMERATED [one, three, oneAndThree]
}
```


ETSI


--- Page 915  ---


3GPP TS 38.331 version 17.0.0 Release 17
914
ETSI TS 138331 V17.0.0 (2022-05)
```
BeamManagementSSB-CSI-RS ::= SEQUENCE \
    maxNumberSSB-CSI-RS-ResourceOneTx ENUMERATED {n0, n8, nl6, n32, n64},
    maxNumberCSI-RS-Resource ENUMERATED {n0, n4, n8, nl6, n32, n64},
    maxNumberCSI-RS-ResourceTwoTx ENUMERATED {n0, n4, n8, nl6, n32, n64},
    supportedCSI-RS-Density ENUMERATED [one, three, oneAndThree]
    maxNumberAperiodicCSI-RS-Resource ENUMERATED {n0, nl, n4, n8, nl6, n32, n64}
}
DummyH ::= SEQUENCE \
    burstLength INTEGER (1..2),
    maxSimultaneousResourceSetsPerCC INTEGER (1..8),
    maxConfiguredResourceSetsPerCC INTEGER (1.64),
    maxConfiguredResourceSetsAllCC INTEGER (1..128)
}
CSI-RS-ForTracking ::= SEQUENCE \
    maxBurstLength INTEGER (1..2),
    maxSimultaneousResourceSetsPerCC INTEGER (1..8),
    maxConfiguredResourceSetsPerCC INTEGER (1..64),
    maxConfiguredResourceSetsAllCC INTEGER (1..256)
}
CSI-RS-IM-ReceptionForFeedback ::= SEQUENCE \
    maxConfigNumberNZP-CSI-RS-PerCC INTEGER (1..64),
    maxConfigNumberPortsAcrossNZP-CSI-RS-PerCC INTEGER (2..256),
    maxConfigNumberCSI-IM-PerCC ENUMERATED {nl, n2, n4, n8, nl6, n32},
    maxNumberSimultaneousNZP-CSI-RS-PerCC INTEGER (1..64),
    totalNumberPortsSimultaneousNZP-CSI-RS-PerCC INTEGER (2..256)
}
CSI-RS-ProcFrameworkForSRS ::= SEQUENCE \
    maxNumberPeriodicSRS-AssocCSI-RS-PerBWP INTEGER (1.4),
    maxNumberAperiodicSRS-AssocCSI-RS-PerBWP INTEGER (1.4),
    maxNumberSP-SRS-AssocCSI-RS-PerBWP INTEGER (0.4),
    simultaneousSRS-AssocCSI-RS-PerCC INTEGER (1..8)
}
CSI-ReportFramework ::= SEQUENCE \
    maxNumberPeriodicCSI-PerBWP-ForCSI-Report INTEGER (1.4),
    maxNumberAperiodicCSI-PerBWP-ForCSI-Report INTEGER (1.4),
    maxNumberSemiPersistentCSI-PerBWP-ForCSI-Report INTEGER (0.,4),
    maxNumberPeriodicCSI-PerBWP-ForBeamReport INTEGER (1.4),
    maxNumberAperiodicCSI-PerBWP-ForBeamReport INTEGER (1.4),
    maxNumberAperiodicCSI-triggeringStatePerCC ENUMERATED {n3, n7, nl5, n31, n63, nl28},
    maxNumberSemiPersistentCSI-PerBWP-ForBeamReport INTEGER (0.4),
    simultaneousCSI-ReportsPerCC INTEGER (1..8)
}
CSI-ReportFrameworkExt-rl6 ::= SEQUENCE \
    maxNumberAperiodicCSI-PerBWP-ForCSI-ReportExt-r16 INTEGER (5..8)
}
PTRS-DensityRecommendationDL ::= SEQUENCE {
```


ETSI


--- Page 916  ---


3GPP TS 38.331 version 17.0.0 Release 17
915
ETSI TS 138331 V17.0.0 (2022-05)
```
    frequencyDensityl
    INTEGER (1..276),
```

```
    INTEGER (0..29),
    timeDensity3 INTEGER (0.29),
}
PTRS-DensityRecommendationUL ::= SEQUENCE {
    frequencyDensityl INTEGER (1..276),
    frequencyDensity2 INTEGER (1..276),
    timeDensityl INTEGER (0..29),
    timeDensity2 INTEGER (0..29),
    timeDensity3 INTEGER (0..29),
    sampleDensityl INTEGER (1..276),
    sampleDensity2 INTEGER (1..276),
    sampleDensity3 INTEGER (1..276),
    sampleDensity4 INTEGER (1..276),
    sampleDensity5 INTEGER (1..276)
}
SpatialRelations ::= SEQUENCE \
    maxNumberConfiguredSpatialRelations ENUMERATED {n4, n8, nl6, n32, n64, n96},
    maxNumberActiveSpatialRelations ENUMERATED {nl, n2, n4, n8, nl4},
    additionalActiveSpatialRelationPUCCH ENUMERATED {supported} OPTIONAL,
    maxNumberDL-RS-QCL-TypeD ENUMERATED {n1, n2, n4, n8, nl4}
}
Dummyl ::= SEQUENCE \
    supportedSRS-TxPortSwitch ENUMERATED {tlr2, tlr4, t2r4, tlr4-t2r4, tr-equal},
    txSwitchImpactToRx ENUMERATED {true} OPTIONAL
}
-- TAG-MIMO-PARAMETERSPERBAND-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MMMO-ParametersPerBand field descriptions \\
\hline \begin{tabular}{l}
codebookParametersPerBand \\
For a given frequency band, this field this field indicates the alternative list of SupportedCSI-RS-Resource supported for each codebook type. The supported CSI-RS resources indicated by this field are referred by codebookParametersperBC in CA-ParametersNR to indicate the supported CSI-RS resource per band combination.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-RS-M-ReceptionForFeedback/ csi-RS-ProcFrameworkForSRS/ csi-ReportFramework \\
CSI related capabilities which the UE supports on each of the carriers operated on this band. If the network configures the UE with serving cells on both FR1 and FR2 bands these values may be further limited by the corresponding fields in fr1-fr2-Add-UE-NR-Capabilities.
\end{tabular} \\
\hline \begin{tabular}{l}
supportNewDMRS-Port \\
Presence of this field set to supported 1 , supported 2 or supported 3 indicates that the UE supports the new DMRS port entry \( \{0,2,3\} \).
\end{tabular} \\
\hline
\end{tabular}
- ModulationOrder

The IE ModulationOrder is used to convey the maximum supported modulation order.

ETSI


--- Page 917  ---


3GPP TS 38.331 version 17.0.0 Release 17
916
ETSI TS 138331 V17.0.0 (2022-05)

ModulationOrder information element
```
-- ASNISTART
-- TAG-MODULATIONORDER-START
ModulationOrder ::= ENUMERATED {bpsk-halfpi, bpsk, qpsk, qaml6, qam64, qam256}
-- TAG-MODULATIONORDER-STOP
-- ASNISTOP
```


MRDC-Parameters
The IE MRDC-Parameters contains the band combination parameters specific to MR-DC for a given MR-DC band combination.
MRDC-Parameters information element
```
-- ASNISTART
-- TAG-MRDC-PARAMETERS-START
MRDC-Parameters ::= SEQUENCE \
    singleUL-Transmission ENUMERATED {supported} OPTIONAL,
    dynamicPowerSharingENDC ENUMERATED {supported} OPTIONAL,
    tdm-Pattern ENUMERATED {supported} OPTIONAL,
    ul-SharingEUTRA-NR ENUMERATED {tdm, fdm, both} OPTIONAL,
    ul-SwitchingTimeEUTRA-NR ENUMERATED {typel, type2} OPTIONAL,
    simultaneousRxTxInterBandENDC ENUMERATED {supported} OPTIONAL,
    asyncIntraBandENDC ENUMERATED {supported} OPTIONAL,
    ...;
    dualPA-Architecture ENUMERATED {supported} OPTIONAL,
    intraBandENDC-Support ENUMERATED {non-contiguous, both} OPTIONAL,
    ul-TimingAlignmentEUTRA-NR ENUMERATED {required} OPTIONAL
    ]]
}
MRDC-Parameters-vl580 ::= SEQUENCE [
    dynamicPowerSharingNEDC ENUMERATED {supported} OPTIONAL
}
MRDC-Parameters-vl590 ::= SEQUENCE \
    interBandContiguousMRDC ENUMERATED {supported} OPTIONAL
}
MRDC-Parameters-vl5gO ::= SEQUENCE {
    simultaneousRxTxInterBandENDCPerBandPair SimultaneousRxTxPerBandPair OPTIONAL
}
MRDC-Parameters-vl620 ::= SEQUENCE \
    maxUplinkDutyCycle-interBandENDC-TDD-PC2-r16 SEQUENCE[
        eutra-TDD-CONFig0-r16 ENUMERATED {n20, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL,
        eutra-TDD-Configl-rl6 ENUMERATED {n20, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL,
```


ETSI


--- Page 918  ---


3GPP TS 38.331 version 17.0.0 Release 17
917
ETSI TS 138331 V17.0.0 (2022-05)
```
        eutra-TDD-Config2-r16 ENUMERATED {n20, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL,
        eutra-TDD-CONFig3-rl6 ENUMERATED {n20, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL,
        eutra-TDD-Config4-r16 ENUMERATED {n20, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL,
        eutra-TDD-Config5-rl6 ENUMERATED {n20, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL,
        eutra-TDD-Config6-rl6 ENUMERATED{n20, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL
    }
    -- Rl 18-2 Single UL TX operation for TDD PCell in EN-DC
    tdm-restrictionTDD-endc-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 18-2a Single UL TX operation for FDD PCell in EN-DC
    tdm-restrictionFDD-endc-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 18-2b Support of HARQ-offset for SUO casel in EN-DC with LTE TDD PCell for type l UE
    singleUL-HARQ-offsetTDD-PCell-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 18-3 Dual Tx transmission for EN-DC with FDD PCell(TDM pattern for dual Tx UE)
    tdm-restrictionDualTX-FDD-endc-rl6 ENUMERATED {supported} OPTIONAL
}
MRDC-Parameters-vl630 ::= SEQUENCE {
    -- R4 2-20 Maximum uplink duty cycle for FDD+TDD EN-DC power class 2
    maxUplinkDutyCycle-interBandENDC-FDD-TDD-PC2-r16 SEQUENCE {
        maxUplinkDutyCycle-FDD-TDD-EN-DCl-r16 ENUMERATED {n30, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL,
        maxUplinkDutyCycle-FDD-TDD-EN-DC2-r16 ENUMERATED {n30, n40, n50, n60, n70, n80, n90, n100} OPTIONAL
    }
    -- R4 2-19 FDD-FDD or TDD-TDD inter-band MR-DC with overlapping or partially overlapping DL spectrum
    interBandMRDC-WithOverlapDL-Bands-rl6 ENUMERATED {supported} OPTIONAL
}
MRDC-Parameters-vl700 ::= SEQUENCE {
    condPSCellAdditionENDC-rl7 ENUMERATED {supported} OPTIONAL,
    scg-ActivationDeactivationENDC-rl7 ENUMERATED {supported} OPTIONAL,
    scg-ActivationDeactivationResumeENDC-rl7 ENUMERATED [supported] OPTIONAL
}
-- TAG-MRDC-PARAMETERS-STOP
-- ASNISTOP
```


NRDC-Parameters
The IE NRDC-Parameters contains parameters specific to NR-DC, i.e., which are not applicable to NR SA.
NRDC-Parameters information element
```
-- ASNISTART
-- TAG-NRDC-PARAMETERS-START
NRDC-Parameters ::=
    measAndMobParametersNRDC
    generalParametersNRDC
    fdd-Add-UE-NRDC-Capabilities
    tdd-Add-UE-NRDC-Capabilities
SEQUENCE \
    frl-Add-UE-NRDC-Capabilities
    MeasAndMobParametersMRDC OPTIONAL,
    GeneralParametersMRDC-XDD-Diff OPTIONAL,
    UE-MRDC-CapabilityAddXDD-Mode OPTIONAL,
    UE-MRDC-CapabilityAddXDD-Mode OPTIONAL,
    UE-MRDC-CapabilityAddFRX-Mode OPTIONAL,
```


ETSI


--- Page 919  ---


3GPP TS 38.331 version 17.0.0 Release 17
918
ETSI TS 138331 V17.0.0 (2022-05)
```
    fr2-Add-UE-NRDC-Capabilities
    dummy2
    dummy
}
NRDC-Parameters-vl570 ::= SEQUENCE \
    sfn-SyncNRDC
}
NRDC-Parameters-vl5c0 ::= SEQUENCE \
    pdep-DuplicationSplitSRB
    pdcp-DuplicationSplitDRB
}
NRDC-Parameters-vl610 ::= SEQUENCE {
    measAndMobParametersNRDC-vl610
}
NRDC-Parameters-vl700 ::= SEQUENCE \
    flc-OverNR-RRC-rl7
    measAndMobParametersNRDC-vl700 MeasAndMobParametersMRDC-vl700
}
-- TAG-NRDC-PARAMETERS-STOP
-- ASNISTOP
```


OLPC-SRS-Pos
The IE OLPC-SRS-Pos is used to convey OLPC SRS positioning related parameters specific for a certain band.

OLPC-SRS-Pos information element
```
-- ASNISTART
-- TAG-OLPC-SRS-POS-START
OLPC-SRS-Pos-rl6 ::= SEQUENCE {
    olpc-SRS-PosBasedOnPRS-Serving-r16 ENUMERATED {supported} OPTIONAL,
    olpc-SRS-PosBasedOnSSB-Neigh-rl6 ENUMERATED {supported} OPTIONAL,
    olpc-SRS-PosBasedOnPRS-Neigh-r16 ENUMERATED {supported} OPTIONAL,
    maxNumberPathLossEstimatePerServing-rl6 ENUMERATED {nl, n4, n8, nl6} OPTIONAL
}
--TAG-OLPC-SRS-POS-STOP
-- ASNISTOP
```


PDCP-Parameters
The IE PDCP-Parameters is used to convey capabilities related to PDCP.

ETSI


--- Page 920  ---


3GPP TS 38.331 version 17.0.0 Release 17
919
ETSI TS 138331 V17.0.0 (2022-05)

PDCP-Parameters information element
```
-- ASNISTART
-- TAG-PDCP-PARAMETERS-START
PDCP-Parameters ::= SEQUENCE \
    supportedROHC-Profiles SEQUENCE [
        profile0x0000 BOOLEAN,
        profile0x0001 BOOLEAN,
        profile0x0002 BOOLEAN,
        profile0x0003 BOOLEAN,
        profile0x0004 BOOLEAN,
        profile0x0006 BOOLEAN,
        profile0x0101 BOOLEAN,
        profile0x0l02 BOOLEAN,
        profile0x0103 BOOLEAN,
        profile0x0104 BOOLEAN
    },
    maxNumberROHC-ContextSessions ENUMERATED lcs2, cs4, cs8, csl2, csl6, cs24, cs32, cs48, cs64,
                        csl28, cs256, cs5l2, csl024, csl6384, spare2, sparel},
    uplinkOnlyROHC-Profiles ENUMERATED {supported} OPTIONAL,
    continueROHC-Context ENUMERATED {supported} OPTIONAL,
    outOfOrderDelivery ENUMERATED {supported} OPTIONAL,
    shortSN ENUMERATED {supported} OPTIONAL,
    pdcp-DuplicationSRB ENUMERATED {supported} OPTIONAL,
    pdcp-DuplicationMCG-OrSCG-DRB ENUMERATED {supported} OPTIONAL,
    ...;
    [ [
    drb-IAB-rl6 ENUMERATED {supported} OPTIONAL,
    non-DRB-IAB-rl6 ENUMERATED {supported} OPTIONAL,
    extendedDiscardTimer-r16 ENUMERATED {supported} OPTIONAL,
    continueEHC-Context-rl6 ENUMERATED {supported} OPTIONAL,
    ehc-rl6 ENUMERATED {supported} OPTIONAL,
    maxNumberEHC-Contexts-r16 ENUMERATED lcs2, cs4, cs8, csl6, cs32, cs64, cs128, cs256, cs512,
                                cslo24, cs2048, cs4096, cs8192, cs16384, cs32768, cs65536} OPTIONAL,
    jointeHC-ROHC-Config-rl6 ENUMERATED {supported} OPTIONAL,
    pdop-DuplicationMoreThanTwoRLC-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    longSN-RedCap-rl7 ENUMERATED {supported} OPTIONAL,
    udc-rl7
        standardDictionary-rl7
        operatorDictionary-rl7
            versionOfDictionary-rl7
            associatedPLMN-ID-rl7
        }
        continueUDC-rl7 ENUMERATED {supported} OPTIONAL
    } OPTIONAL
    ] ]
}
-- TAG-PDCP-PARAMETERS-STOP
-- ASN1STOP
```


ETSI


--- Page 921  ---


3GPP TS 38.331 version 17.0.0 Release 17
920
ETSI TS 138331 V17.0.0 (2022-05)
- PDCP-ParametersMRDC

The IE PDCP-ParametersMRDC is used to convey PDCP related capabilities for MR-DC.
PDCP-ParametersMRDC information element
```
-- ASNISTART
-- TAG-PDCP-PARAMETERSMRDC-START
PDCP-ParametersMRDC ::= SEQUENCE \
    pdcp-DuplicationSplitSRB
    pdcp-DuplicationSplitDRB
}
PDCP-ParametersMRDC-vl610 ::= SEQUENCE [
    scg-DRB-NR-IAB-rl6 ENUMERATED {supported} OPTIONAL
}
-- TAG-PDCP-PARAMETERSMRDC-STOP
-- ASNISTOP
```


Phy-Parameters
The IE Phy-Parameters is used to convey the physical layer capabilities.
Phy-Parameters information element
```
-- ASNISTART
-- TAG-PHY-PARAMETERS-START
Phy-Parameters ::= SEQUENCE [
    phy-ParametersCommon
    phy-ParametersXDD-Diff
    phy-ParametersFRX-Diff
    phy-ParametersFRl
    phy-ParametersFR2
}
Phy-ParametersCommon ::=
    CSi-RS-CFRA-ForHO
    dynamicerR-BundlingDL
    sp-CSI-Report PUCCH
    sp-CSI-ReportPUSCH
    nzp-CSI-RS-IntefMgmt
    type2-SP-CSI-Feedback-LongPUCCH
    precoderGranularityCORESET
    noported}
    semiStaticHARQ-ACK-Codeboinged]
    spatialBundlingHARQ-ACK ENUMERATED {supported}
    dynamicBetaOffsetInd-HARQ-ACK-CSI ENUMERATED {supported}
```

```
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL
    OPTIONAL,
    OPTIONAL,
        OPTIONAL,
```

```
SEQUENCE \
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
        Phy-ParametersCommon = OPTIONAL,
```


ETSI


--- Page 922  ---


3GPP TS 38.331 version 17.0.0 Release 17
921
ETSI TS 138331 V17.0.0 (2022-05)
```
pucch-Repetition-Fl-3-4
ra-Type0-PUSCH
dynamicSwitchRA-Type0-1-PDSCH
dynamicSwitchRA-Type0-1-PUSCH
pdsch-MappingTypeA
pdsch-MappingTypeB
interleavingVRB-ToPRB-PDSCH
interSlotFreqHopping-PUSCH
typel-PUSCH-RepetitionMultiSlots
type2-PUSCH-RepetitionMultiSlots
pusch-RepetitionMultislots
pdsch-RepetitionMultiSlots
downlinkSPS
configuredUL-GrantTypel
configuredUL-GrantType2
pre-EmptIndication-DL
cog-TransIndication-DL
cog-TransIndication-UL
cog-FlushIndication-DL
dynamicHARQ-ACK-CodeB-CBG-Retx-DL
rateMatchingResrcSetSemi-Static
rateMatchingResrcSetDynamic
bwp-SwitchingDelay
...,
[ [
dummy ENUMERATED {supported} OPTIONAL
]],
[ [
maxNumberSearchSpaces
rateMatchingCtrlResrcSetDynamic
maxLayersMIMO-Indication
]],
[ [
spCellPlacement CarrierAggregationVariant OPTIONAL
]],
[ [
-- Rl 9-1: Basic channel structure and procedure of 2-step RACH
twoStepRACH-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl ll-l: Monitoring DCI format l_2 and DCI format 0_2
dci-Formatl-2And0-2-r16 ENUMERATED [supported] OPTIONAL,
-- Rl ll-la: Monitoring both DCI format 0_1/l_l and DCI format 0_2/l_2 in the same search space
monitoringDCI-SameSearchSpace-rl6 - ENUMERATED {supported} - OPTIONAL,
-- Rl 11-10: Type 2 configured grant release by DCI format 0_l
type2-CG-ReleaseDCI-0-1-r16 ENUMERATED {supported} OPTIONAL,
-- Rl ll-ll: Type 2 configured grant release by DCI format 0_2
type2-CG-ReleaseDCI-0-2-r16 ENUMERATED {supported} OPTIONAL,
-- Rl 12-3: SPS release by DCI format l_l
sps-ReleaseDCI-1-1-r16 ENUMERATED {supported} OPTIONAL,
-- Rl 12-3a: SPS release by DCI format 1_2
sps-ReleaseDCI-1-2-r16 ENUMERATED {supported} OPTIONAL,
-- Rl 14-8: CSI trigger states containing non-active BWP
csi-TriggerStateNon-ActiveBWP-r16 ENUMERATED {supported} OPTIONAL,
```

```
seperateSMTC-InterIAB-Support-rl6 ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 923  ---


3GPP TS 38.331 version 17.0.0 Release 17
922
ETSI TS 138331 V17.0.0 (2022-05)
```
    -- Rl 20-3: Support RACH configuration separately from the RACH configuration for UE access, including new IAB-specific offset and scaling
factors
    seperateRACH-IAB-Support-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 20-5a: Support semi-static configuration/indication of UL-Flexible-DL slot formats for IAB-MT resources
    ul-flexibleDL-SlotFormatSemiStatic-IAB-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 20-5b: Support dynamic indication of UL-Flexible-DL slot formats for IAB-MT resources
    ul-flexibleDL-SlotFormatDynamics-IAB-r16 ENUMERATED {supported} OPTIONAL,
    dft-S-OFDM-WaveformUL-IAB-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 20-6: Support DCI Format 2_5 based indication of soft resource availability to an IAB node
    dci-25-AI-RNTI-Support-IAB-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 20-7: Support T_delta reception.
    t-DeltaReceptionSupport-IAB-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 20-8: Support of Desired guard symbol reporting and provided guard symbok reception.
    guardSymbolReportReception-IAB-r16 ENUMERATED {supported} OPTIONAL,
    -- Rl 18-8 HARQ-ACK codebook type and spatial bundling per PUCCH group
    harqACK-CB-SpatialBundlingPUCCH-Group-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 19-2: Cross Slot Scheduling
    crossSlotScheduling-rl6 SEQUENCE {
        non-SharedSpectrumChAccess-rl6 ENUMERATED [supported] OPTIONAL,
        sharedSpectrumChAccess-rl6 ENUMERATED {supported} OPTIONAL
    } OPTIONAL,
    maxNumberSRS-PosPathLossEstimateAllServingCells-rl6 ENUMERATED {nl, n4, n8, nl6} OPTIONAL,
    extendedCG-Periodicities-rl6 ENUMERATED {supported} OPTIONAL,
    extendedSPS-Periodicities-rl6 ENUMERATED {supported} OPTIONAL,
    codebookVariantsList-rl6 CodebookVariantsList-rl6 OPTIONAL,
    -- Rl ll-6: PUSCH repetition Type A
    pusch-RepetitionTypeA-rl6 SEQUENCE {
        sharedSpectrumChAccess-rl6 ENUMERATED {supported} OPTIONAL,
        non-SharedSpectrumChAccess-r16 ENUMERATED {supported} OPTIONAL
    } OPTIONAL,
    -- Rl ll-4b: DL priority indication in DCI with mixed DCI formats
    dci-DL-PriorityIndicator-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 12-la: UL priority indication in DCI with mixed DCI formats
    dci-UL-PriorityIndicator-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-le: Maximum number of configured pathloss reference RSs for PUSCH/PUCCH/SRS by RRC for MAC-CE based pathloss reference RS update
    maxNumberPathlossRS-Update-rl6 ENUMERATED {n4, n8, nl6, n32, n64} OPTIONAL,
    -- Rl 18-9: Usage of the PDSCH starting time for HARQ-ACK type 2 codebook
    type2-HARQ-ACK-Codebook-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-lg-l: Resources for beam management, pathloss measurement, BFD, RLM and new beam identification across frequency ranges
    maxTotalResourcesForAcrossFreqRanges-rl6 SEQUENCE {
        maxNumberResWithinSlotAcrossCC-AcrossFR-rl6 ENUMERATED {n2, n4, n8, nl2, nl6, n32, n64, nl28} OPTIONAL,
        maxNumberResAcrossCC-AcrossFR-r16 ENUMERATED {n2, n4, n8, nl2, nl6, n32, n40, n48, n64, n72, n80, n96, nl28, n256}
                    OPTIONAL
    } OPTIONAL,
    -- Rl 16-2a-4: HARQ-ACK for multi-DCI based multi-TRP - separate
    harqACK-separateMultiDCI-MultiTRP-rl6 SEQUENCE {
    maxNumberLongPUCCHs-rl6 ENUMERATED {longAndLong, longAndShort, shortAndShort} OPTIONAL
    } OPTIONAL,
    -- Rl 16-2a-4: HARQ-ACK for multi-DCI based multi-TRP - joint
    harqACK-jointMultiDCI-MultiTRP-r16 ENUMERATED {supported} OPTIONAL,
    -- R4 9-1: BWP switching on multiple CCs RRM requirements
    bwp-SwitchingMultiCCs-rl6 CHOICE {
        typel-rl6 ENUMERATED {usl00, us200},
```


ETSI


--- Page 924  ---


3GPP TS 38.331 version 17.0.0 Release 17
923
ETSI TS 138331 V17.0.0 (2022-05)
```
        type2-rl6 ENUMERATED {us200, us400, us800, usl000}
    } OPTIONAL
    ]],
    [ [
    targetSMTC-SCG-rl6 ENUMERATED {supported} OPTIONAL,
    supportRepetitionZeroOffsetRV-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl ll-12: in-order CBG-based re-transmission
    cog-TransInOrderPUSCH-UL-rl6 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    -- R4 6-3: Dormant BWP switching on multiple CCs RRM requirements
    bwp-SwitchingMultiDormancyCCs-rl6 CHOICE {
        typel-rl6 ENUMERATED {usl00, us200},
        type2-rl6 ENUMERATED {us200, us400, us800, usl000}
    } OPTIONAL,
```

```
    supportRetx-Diff-CoresetPool-Multi-DCI-TRP-r16 ENUMERATED {notSupported} OPTIONAL,
```

```
    pdcch-MonitoringAnyOccasionsWithSpanGapCrossCarrierSch-rl6 ENUMERATED {mode2, mode3} OPTIONAL
    ]],
    [ [
    -- Rl 16-lj-1: Support of 2 port CSI-RS for new beam identification
    newBeamIdentifications2PortCSI-RS-r16 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-lj-2: Support of 2 port CSI-RS for pathloss estimation
    pathlossestimation2PortCSI-RS-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    -- Rl 3l-l: Support of Desired Guard Symbol reporting and provided guard symbol reception.
    guardSymbolReportReception-IAB-rl7 ENUMERATED {supported} OPTIONAL,
    -- Rl 3l-2: support of restricted IAB-DU beam reception
    restricted-IAB-DU-BeamReception-rl7 ENUMERATED {supported} OPTIONAL,
    -- Rl 31-3: support of recommended IAB-MT beam transmission for DL and UL beam
    recommended-IAB-MT-BeamTransmission-rl7 ENUMERATED {supported} OPTIONAL,
    -- Rl 31-4: support of case 6 timing alignment indication reception
    case6-TimingAlignmentReception-IAB-rl7 ENUMERATED {supported} OPTIONAL,
```

```
    case7-TimingAlignmentReception-IAB-rl7 ENUMERATED {supported} OPTIONAL,
    -- Rl 31-6: support of desired DL Tx power adjustment reporting and DL Tx power adjustment reception
    dl-tx-PowerAdjustment-IAB-rl7 ENUMERATED {supported} OPTIONAL
    ]]
}
Phy-ParametersXDD-Diff ::= SEQUENCE {
    dynamicSEI
    twoPUCCH-FO-2-ConsecSymbols CHCHCH
    twoDifferentTPC-Loop-PUSCH ENUMERATED {supported} OPTIONAL,
    twodifferentTPC-Loop-PUCCH ENUMERATED {supported} OPTIONAL,
    ...;
    [ [
    dl-SchedulingOffset-PDSCH-TypeA ENUMERATED {supported} OPTIONAL,
    dl-SchedulingOffset-PDSCH-TypeB ENUMERATED [supported] OPTIONAL,
    ul-SchedulingOffset ENUMERATED [supported] OPTIONAL
    ]]
}
```


ETSI


--- Page 925  ---


3GPP TS 38.331 version 17.0.0 Release 17
924
ETSI TS 138331 V17.0.0 (2022-05)
```
Phy-ParametersFRX-Diff ::=
    dynamicSFI
    dummyl
    twoFL-DMRS
    dummy2
    dummy 3
    supportedDMRS-TypeDL
    supportedDMRS-TypeUL
    semiOpenLoopCSI
    csi-ReportWithoutPMI
    csi-ReportWithoutCQI
    onePortsPTRS
    twoPUCCH-FO-2-ConsecSymbols
    pucch-F2-WithFH
    pucch-F3-WithFH
    pucch-F4-WithFH
    pucch-FO-2WithoutFH
    pucch-Fl-3-4WithoutFH
    mux-SR-HARQ-ACK-CSI-PUCCH-MultiPerSlot
    uci-CodeBlockSegmentation
    onePUCCH-LongAndShortFormat
    twoPUCCH-AnyOthersInSlot
    intraSlotFreqHopping-PUSCH
    pusch-LBRM
    pdcch-BlindDetectionCA
    tpc-PUSCH-RNTI
    tpc-PUCCH-RNTI
    tpc-SRS-RNTI
    absoluteTPC-Command.
    twoDifferentTPC-Loop-PUSCH
    twoDifferentTPC-Loop-PUCCH
    pusch-HalfPi-BPSK
    pucch-F3-4-HalfPi-BPSK
    almostContiguousCP-OFDM-UL
    sp-CSI-RS
    sp-CSI-IM
    tdd-MultiDL-UL-SwitchPerSlot
    multipleCORESET
    ...;
    [ [
    csi-RS-IM-ReceptionForFeedback
    csi-RS-ProcFrameworkForSRS
    csi-ReportFramework
    mux-SR-HARQ-ACK-CSI-PUCCH-OncePerSlot
        sameSymbol
        diffSymbol
    }
    mux-SR-HARQ-ACK-PUCCH
    mux-MultipleGroupCtrlCH-Overlap
    dl-SchedulingOffset-PDSCH-TypeA
    dl-SchedulingOffset-PDSCH-TypeB
    ul-SchedulingOffset
    dl-640AM-MCS-TableAlt
```

```
SEQUENCE {
    ENUMERATED {supported} OPTIONAL,
    BIT STRING (SIZE (2)) OPTIONAL,
    BIT STRING (SIZE (2)) OPTIONAL,
    BIT STRING (SIZE (2))
    BIT STRING (SIZE (2))
    ENUMERATED {typel, typelAnd2}
    OPTIONAL,
    OPTIONAL,
    F Supported}
    ATED {supported}
    OPTIONAL,
    SIRING (SIZE (2))
    OPTIONAL,
    ERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {notSupported}
    ENUMERATED {notSupported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    INTEGER (4..16)
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED [supported]
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
    ENUMERATED {supported}
OPTIONAL,
```

    CSI-RS-IM-ReceptionForFeedback
CSI-RS-ProcFrameworkForSRS
CSI-ReportFramework
    SEQUENCE 1
        ENUMERATED \{supported\}
        ENUMERATED [supported]
ENUMERATED [supported]
ENUMERATED \{supported\}
ENUMERATED [supported]
ENUMERATED [supported]
ENUMERATED \{supported\}
ENUMERATED [supported]
```
OPTIONAL,
OPTIONAL,
OPTIONAL,
```

    OPTIONAL,
    OPTIONAL
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,


--- Page 926  ---


3GPP TS 38.331 version 17.0.0 Release 17
925
ETSI TS 138331 V17.0.0 (2022-05)
```
    ul-64QAM-MCS-TableAlt ENUMERATED {supported} OPTIONAL,
    cqi-TableAlt ENUMERATED {supported} OPTIONAL,
    oneEl-DMRS-TwoAdditionalDMRS-UL ENUMERATED {supported} OPTIONAL,
    twoFl-DMRS-TwoAdditionalDMRS-UL ENUMERATED {supported} OPTIONAL,
    oneEL-DMRS-ThreeAdditionalDMRS-UL ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    pdcch-BlindDetectionNRDC SEQUENCE {
        pdcch-BlindDetectionMCG-UE INTEGER (1..15),
        pdech-BlindDetectionSCG-UE INTEGER (1..15)
    }
    mux-
    ]],
    [ [
    -- Rl ll-lb: Type l HARQ-ACK codebook support for relative TDRA for DL
    typel-HARQ-ACK-Codebook-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl ll-8: Enhanced UL power control scheme
    enhancedPowerControl-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-1b-1: TCI state activation across multiple CCs
    simultaneousTCI-ActMultipleCC-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-1b-2: Spatial relation update across multiple CCs
    simultaneousSpatialRelationMultipleCC-rl6 ENUMERATED {supported} OPTIONAL,
    cli-RSSI-FDM-DL-rl6 ENUMERATED {supported} OPTIONAL,
    cli-SRS-RSRP-FDM-DL-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 19-3: Maximum MIMO Layer Adaptation
    maxLayersMIMO-Adaptation-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 12-5: Configuration of aggregation factor per SPS configuration
    aggregationFactorSPS-DL-r16 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-lg: Resources for beam management, pathloss measurement, BFD, RLM and new beam identification
    maxTotalResourcesForOneFreqRange-rl6 SEQUENCE {
        maxNumberResWithinSlotAcrossCC-OneFR-rl6 ENUMERATED {n2, n4, n8, nl2, nl6, n32, n64, nl28} OPTIONAL,
        maxNumberResAcrossCC-OneFR-rl6 ENUMERATED {n2, n4, n8, nl2, nl6, n32, n40, n48, n64, n72, n80, n96, nl28, n256}
                    OPTIONAL
    } OPTIONAL,
    -- Rl 16-7: Extension of the maximum number of configured aperiodic CSI report settings
    csi-ReportFrameworkExt-rl6 CSI-ReportFrameworkExt-rl6 OPTIONAL
    ]],
    [ [
    twoTCI-Act-servingCellInCC-List-rl6 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    -- Rl 22-ll: Support of 'cri-RI-CQI' report without non-PMI-PortIndication
    cri-RI-CQI-WithoutNon-PMI-PortInd-r16 ENUMERATED {supported} OPTIONAL
    ]]
}
Phy-ParametersFRl ::= SEQUENCE {
    pdech-MonitoringSingleOccasion ENUMERATED {supported} OPTIONAL,
    scs-60kHz ENUMERATED {supported} OPTIONAL,
    pdsch-256QAM-FRl ENUMERATED {supported} OPTIONAL,
    pdsch-RE-MappingFRl-PerSymbol ENUMERATED {n10, n20} OPTIONAL,
    ....
    [ [
    pdsch-RE-MappingFRl-PerSlot ENUMERATED {n16, n32, n48, n64, n80, n96, nl12, nl28,
```


ETSI


--- Page 927  ---


3GPP TS 38.331 version 17.0.0 Release 17
926
ETSI TS 138331 V17.0.0 (2022-05)
```
        n144, n160, n176, n192, n208, n224, n240, n256} OPTIONAL
    ] ]
}
Phy-ParametersFR2 ::= SEQUENCE \
    dumany
    pdsch-RE-MappingER2-PerSymbol ENUMERATED {n6, n20} OPTIONAL,
    ...;
    [ [
    pCell-FR2 ENUMERATED {supported} OPTIONAL,
    pdsch-RE-MappingFR2-PerSlot ENUMERATED \n16, n32, n48, n64, n80, n96, nl12, nl28,
            nl44, nl60, nl76, n192, n208, n224, n240, n256} OPTIONAL
    ]],
    [ [
    -- Rl 16-lc: Support of default spatial relation and pathloss reference RS for dedicated-PUCCH/SRS and PUSCH
    defaultSpatialRelationPathlossRS-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 16-ld: Support of spatial relation update for AP-SRS via MAC CE
    spatialRelationUpdateAP-SRS-r16 ENUMERATED {supported} OPTIONAL,
    maxNumberSRS-PosSpatialRelationsAllServingCells-rl6 ENUMERATED {n0, nl, n2, n4, n8, nl6} OPTIONAL
    ] ]
}
```

-- TAG-PHY-PARAMETERS-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline Phy-ParametersFRX-Diff field descriptions \\
\hline csi-RS-IM-ReceptionForFeedback/csi-RS-ProcFrameworkForSRS/ csi-ReportFramework \\
These fields are optionally present in fr1-fr2-Add-UE-NR-Capabilities in UE-NR-Capability. They shall not be set in any other instance of the IE Phy-ParametersFRX-Diff. If the \\
network configures the UE with serving cells on both FR1 and FR2 bands, these parameters, if present, limit the corresponding parameters in MIMO-ParametersPerBand. \\
\hline
\end{tabular}
- Phy-ParametersMRDC

The IE Phy-ParametersMRDC is used to convey physical layer capabilities for MR-DC.

Phy-ParametersMRDC information element
```
-- ASNISTART
-- TAG-PHY-PARAMETERSMRDC-START
Phy-ParametersMRDC ::=
SEQUENCE {
    naics-Capability-List
    SEQUENCE (SIZE (1..maxNrofNAICS-Entries)) OF NAICS-Capability-Entry OPTIONAL,
    ...;
    [ [
```

```
    ]],
    [ [
```


ETSI


--- Page 928  ---


3GPP TS 38.331 version 17.0.0 Release 17
927
ETSI TS 138331 V17.0.0 (2022-05)
```
    ] ]
}
NAICS-Capability-Entry ::=
    numberOfNAICS-CapableCC
    numberOfAggregated.PRB
    ...
}
-- TAG-PHY-PARAMETERSMRDC-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline PHY-ParametersMRDC field descriptions \\
\hline naics-Capability-List \\
Indicates that UE in MR-DC supports NAICS as defined in TS 36.331 [10]. \\
\hline
\end{tabular}
- Phy-ParametersSharedSpectrumChAccess

The IE Phy-ParametersSharedSpectrumChAccess is used to convey the physical layer capabilities specific for shared spectrum channel access.

Phy-ParametersSharedSpectrumChAccess information element
```
-- ASNISTART
-- TAG-PHY-PARAMETERSSHAREDSPECTRUMCHACCESS-START
Phy-ParametersSharedSpectrumChAccess-rl6::= SEQUENCE {
    -- 10-32 (1-2) : SS block based SINR measurement (SS-SINR) for unlicensed spectrum
    ss-SINR-Meas-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-33 (2-32a): Semi-persistent CSI report on PUCCH for unlicensed spectrum
    sp-CSI-ReportPUCCH-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-33a (2-32b): Semi-persistent CSI report on PUSCH for unlicensed spectrum
    sp-CSI-ReportPUSCH-r16 ENUMERATED {supported} OPTIONAL,
    -- 10-34 (3-6): Dynamic SFI monitoring for unlicensed spectrum
    dynamicSFI-rl6 ENUMERATED {supported} OPTIONAL,
```

```
    -- ACK/CSI are supposed to be sent with different starting symbols in a slot for unlicensed spectrum
```

```
    mux-SR-HARQ-ACK-CSI-PUCCH-OncePerSlot-rl6 SEQUENCE {
        sameSymbol-rl6 ENUMERATED {supported} OPTIONAL,
        diffSymbol-rl6 ENUMERATED {supported} OPTIONAL
    } OPTIONAL,
    -- 10-35a (4-19a): Overlapping PUCCH resources have different starting symbols in a slot for unlicensed spectrum
    mux-SR-HARQ-ACK-PUCCH-r16 ENUMERATED {supported} OPTIONAL,
```

```
    mux-SR-HARQ-ACK-CSI-PUCCH-MultiPerSlot-rl6 ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 929  ---


3GPP TS 38.331 version 17.0.0 Release 17
928
ETSI TS 138331 V17.0.0 (2022-05)
```
    mux-HARQ-ACK-PUSCH-DiffSymbol-r16 ENUMERATED {supported} OPTIONAL,
```

```
    pucch-Repetition-Fl-3-4-r16 ENUMERATED [supported] OPTIONAL,
    -- 10-38 (5-14): Type l configured PUSCH repetitions over multiple slots for unlicensed spectrum
    typel-PUSCH-RepetitionMultiSlots-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-39 (5-16): Type 2 configured PUSCH repetitions over multiple slots for unlicensed spectrum
    type2-PUSCH-RepetitionMultiSlots-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-40 (5-17): PUSCH repetitions over multiple slots for unlicensed spectrum
    pusch-RepetitionMultiSlots-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-40a (5-17a) : PDSCH repetitions over multiple slots for unlicensed spectrum
    pdsch-RepetitionMultiSlots-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-41 (5-18): DL SPS
    downlinkSPS-r16 ENUMERATED {supported} OPTIONAL,
    -- 10-42 (5-19): Type l Configured UL grant
    configuredUL-GrantTypel-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-43 (5-20): Type 2 Configured. UL grant
    configuredUL-GrantType2-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-44 (5-21): Pre-emption indication for DL
    pre-EmptIndication-DL-r16 ENUMERATED {supported} OPTIONAL,
    ...
}
-- TAG-PHY-PARAMETERSSHAREDSPECTRUMCHACCESS-STOP
-- ASNISTOP
```


PowSav-Parameters
The IE PowSav-Parameters is used to convey the capabilities supported by the UE for the power saving preferences.

PowSav-Parameters information element
```
-- ASNISTART
-- TAG-POWSAV-PARAMETERS-START
PowSav-Parameters-rl6 ::= SEQUENCE \
```

```
    ...
}
PowSav-Parameters-vl700 ::= SEQUENCE [
```

```
    ...
}
PowSav-ParametersCommon-rl6 ::= SEQUENCE \
```

```
    releasePreference-rl6
    -- Rl 19-4a: UE assistance information
```


ETSI


--- Page 930  ---


3GPP TS 38.331 version 17.0.0 Release 17
929
ETSI TS 138331 V17.0.0 (2022-05)
```
    minSchedulingOffsetPreference-r16
    ...
}
PowSav-ParametersFRX-Diff-rl6 ::= SEQUENCE \
    maxBW-Preference-rl6
    maxMIMO-LayerPreference-rl6
    ...
}
PowSav-ParametersFR2-2-rl7 ::= SEQUENCE [
    maxBW-Preference-rl7
    maxMIMO-LayerPreference-rl7
    ...
}
-- TAG-PONSAV-PARAMETERS-STOP
-- ASNISTOP
```

- ProcessingParameters

The IE ProcessingParameters is used to indicate PDSCH/PUSCH processing capabilities supported by the UE.
ProcessingParameters information element
```
-- ASNISTART
-- TAG-PROCESSINGPARAMETERS-START
ProcessingParameters ::= SEQUENCE [
    fallback
    differentTB-PerSlot
        SEQUENCE {
        NumberOfCarriers OPTIONAL,
        NumberOfCarriers
        NumberOfCarriers
    }
}
NumberOfCarriers ::= INTEGER (1..16)
-- TAG-PROCESSINGPARAMETERS-STOP
-- ASNISTOP
```


QoE-Parameters
The IE QoE-Parameters is used to convey the capabilities supported by the UE for application layer measurements.

ETSI


--- Page 931  ---


3GPP TS 38.331 version 17.0.0 Release 17
930
ETSI TS 138331 V17.0.0 (2022-05)

QoE-Parameters information element
```
-- ASNISTART
-- TAG-QOE-PARAMETERS-START
QoE-Parameters-rl7 ::= SEQUENCE [
```

```
    ...
}
-- TAG-QOE-PARAMETERS-STOP
-- ASNISTOP
```

- RAT-Type

The IE RAT-Type is used to indicate the radio access technology (RAT), including NR, of the requested/transferred UE capabilities.
RAT-Type information element
```
-- ASNISTART
-- TAG-RAT-TYPE-START
RAT-Type ::= ENUMERATED {nr, eutra-nr, eutra, utra-fdd-vl610, ...}
-- TAG-RAT-TYPE-STOP
-- ASNISTOP
```


RedCapParameters
The IE RedCapParameters is used to indicate the UE capabilities supported by RedCap UEs.
RedCapParameters information element
```
-- ASNISTART
-- TAG-REDCAPPARAMETERS-START
RedCapParameters-rl7::= SEQUENCE [
    supportOfRedCap-rl7
    supportOfl6DRB-RedCap-rl7
}
}
```

```
SEQUENCE \
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL
```


ETSI


--- Page 932  ---


3GPP TS 38.331 version 17.0.0 Release 17
931
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-REDCAPPARAMETERS-STOP
-- ASNISTOP

RF-Parameters
The IE RF-Parameters is used to convey RF-related capabilities for NR operation.
RF-Parameters information element
```
-- ASNISTART
-- TAG-RF-PARAMETERS-START
RE-Parameters ::= SEQUENCE \
    supportedBandListNR
    supportedBandCombinationList
    appliedFreqBandListFilter
    ...;
    [ [
    supportedBandCombinationList-v1540
    srs-SwitchingTimeRequested.
    ]],
    [ [
    supportedBandCombinationList-v1550 BandCombinationList-v1550
    ]],
    [ [
    supportedBandCombinationList-vl560 BandCombinationList-vl560
    ]],
    [ [
    supportedBandCombinationList-vl610 BandCombinationList-vl610
    supportedBandCombinationListSidelinkEUTRA-NR-r16
    supportedBandCombinationList-UplinkTxSwitch-rl6
    ]],
    [ [
    supportedBandCombinationList-vl630 BandCombinationList-vl630
    supportedBandCombinationListSidelinkEUTRA-NR-v1630 BandCombinationListSidelinkEUTRA-NR-vl630
    supportedBandCombinationList-UplinkTxSwitch-vl630 BandCombinationList-UplinkTxSwitch-vl630
    ]],
    [ [
    supportedBandCombinationList-v1640 BandCombinationList-v1640
    supportedBandCombinationList-UplinkTxSwitch-vl640 BandCombinationList-UplinkTxSwitch-vl640
    ]],
    [ [
    supportedBandCombinationList-vl650 BandCombinationList-vl650
    supportedBandCombinationList-UplinkTxSwitch-vl650 BandCombinationList-UplinkTxSwitch-vl650
    ]],
    [ [
    extendedBand-n77-r16 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    supportedBandCombinationList-UplinkTxSwitch-vl670 BandCombinationList-UplinkTxSwitch-vl670 OPTIONAL
    ]],
```


ETSI


--- Page 933  ---


3GPP TS 38.331 version 17.0.0 Release 17
932
ETSI TS 138331 V17.0.0 (2022-05)
```
    [ [
    supportedBandCombinationList-vl680 BandCombinationList-vl680 OPTIONAL
    ]],
    [ [
    supportedBandCombinationList-vl700 BandCombinationList-vl700 OPTIONAL,
    supportedBandCombinationList-UplinkTxSwitch-vl700 BandCombinationList-UplinkTxSwitch-vl700 OPTIONAL,
    supportedBandCombinationListSL-RelayDiscovery-rl7 BandCombinationListSL-RelayDiscovery-rl7 OPTIONAL,
    supportedBandCombinationListSL-NonRelayDiscovery-rl7 BandCombinationListSL-NonRelayDiscovery-rl7 OPTIONAL
    ]]
}
RF-Parameters-vl5g0 ::= SEQUENCE [
    supportedBandCombinationList-vl5g0 BandCombinationList-vl5g0 OPTIONAL
}
BandNR ::=
    bandNR
    modifiedMPR-Behaviour
    mimo-ParametersPerBand
    extendedCP
    multipleTCI
    bwp-WithoutRestriction
    bwp-SameNumerology
    bwp-DiffNumerology
    crossCarrierScheduling-SameSCS
    pdsch-256QAM-FR2
    pusch-256QAM
    ue-PowerClass
    rateMatchingLTE-CRS
    channelBWs-DL
        frl
            scs - l5kHz
            scs - 30kHz
            scs - 60 kHz
        },
        fr2 SEQUENCE \
            scs-60kHz BIT STRING (SIZE (3)
            scs-l20kHz BIT STRING (SIZE (3)
        }
    }
    channelBWs-UL CHOICE {
        frl
            SEQUENCE \
            scs - 30kH
            scs - 60 kHz
        },
        fr2 SEQUENCE \
            SCS-60kHz BIT STRING (SIZE (3)) OPTIONAL,
            scs-120kHz BIT STRING (SIZE (3)) OPTIONAL
        }
    } OPTIONAL,
    ....
    [ [
    maxUplinkDutyCycle-PC2-FRl ENUMERATED {n60, n70, n80, n90, nl00} OPTIONAL
```


ETSI


--- Page 934  ---


3GPP TS 38.331 version 17.0.0 Release 17
933
ETSI TS 138331 V17.0.0 (2022-05)
```
]],
[ [
pucch-SpatialRelInfoMAC-CE ENUMERATED {supported} OPTIONAL,
powerBoosting-pi2BPSK ENUMERATED {supported} OPTIONAL
]],
[ [
maxUplinkDutyCycle-FR2 ENUMERATED {n15, n20, n25, n30, n40, n50, n60, n70, n80, n90, n100} OPTIONAL
]],
[ [
channelBWs-DL-vl590
    frl
        SEQUENCE \
        SCS-30kHZ BIT STRING (SIZE (16)) OPTIONAL,
        scs-60kHz BIT STRING (SIZE (16)) OPTIONAL
    },
    fr2 SEQUENCE \
        scs - 60 kHz
        scs - 120kHz
    }
} OPTIONAL,
channelBWs-UL-vl590 CHOICE {
    frl
        SCS-15kHZ BIT STRING (SIZE (16)) OPTIONAL,
        scs-30kHz BIT STRING (SIZE (16)) OPTIONAL,
        scs-60kHz BIT STRING (SIZE (16)) OPTIONAL
    },
    fr2 SEQUENCE \
        scs-60kHz BIT STRING (SIZE (8)) OPTIONAL,
        SCS-120kHz BIT STRING (SIZE (8)) OPTIONAL
    }
} OPTIONAL
]],
[ [
asymetricBandwidthCombinationSet BIT STRING (SIZE (1..32)) OPTIONAL
]],
[ [
-- Rl 10: NR-unlicensed
sharedSpectrumChAccessParamsPerBand-r16 SharedSpectrumChAccessParamsPerBand-rl6 OPTIONAL,
-- Rl ll-7b: Independent cancellation of the overlapping PUSCHs in an intra-band UL CA
cancelOverlappingPUSCH-r16 ENUMERATED {supported} OPTIONAL,
-- Rl 14-1: Multiple LTE-CRS rate matching patterns
multipleRateMatchingEUTRA-CRS-r16 SEQUENCE {
    maxNumberPatterns-rl6 INTEGER (2..6),
    maxNumberNon-OverlapPatterns-rl6 INTEGER (1..3)
} OPTIONAL,
-- Rl 14-la: Two LTE-CRS overlapping rate matching patterns within a part of NR carrier using l5 kHz overlapping with a LTE carrier
overlapRateMatchingEUTRA-CRS-r16 ENUMERATED {supported} OPTIONAL,
-- Rl 14-2: PDSCH Type B mapping of length 9 and 10 OFDM symbols
pdsch-MappingTypeB-Alt-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl 14-3: One slot periodic TRS configuration for FRl
oneSlotPeriodicTRS-r16 ENUMERATED {supported} OPTIONAL,
olpc-SRS-Pos-rl6 OLPC-SRS-Pos-rl6 OPTIONAL,
spatialRelationsSRS-Pos-rl6 SpatialRelationsSRS-Pos-rl6 OPTIONAL,
simulSRS-MIMO-TransWithinBand-rl6 ENUMERATED {n2} OPTIONAL,
```


ETSI


--- Page 935  ---


3GPP TS 38.331 version 17.0.0 Release 17
934
ETSI TS 138331 V17.0.0 (2022-05)
```
channelBW-DL-IAB-rl6
    frl-100mhz
CHOICE {
        scs - l5 kHz
        scs - 30kHz
        scs - 60 kHz
    },
    fr2-200mhz
        scs - 60kHz
        scs - 120kHz
    }
}
channelBW-UL-IAB-rl6 CHOICE {
    frl-100mhz
        scs - l5 kHz
        scs - 30kHz
        scs - 60 kHz
    },
    fr2-200mhz SEQUENCE \
        scs - 60kHz
        scs - 120kHz
    }
} OPTIONAL,
rasterShift7dot5-IAB-rl6 ENUMERATED {supported} OPTIONAL,
ue-PowerClass-vl610 ENUMERATED {pcldot5} OPTIONAL,
condHandover-rl6
condHandoverFailure-rl6
condHandoverTwoTriggerEvents-rl6
condPSCellChange-rl6
condPSCellChangeTwoTriggerEvents-rl6
mpr-PowerBoost-FR2-r16
-- Rl ll-9: Multiple active configured grant configurations for a BWP of a serving cell
activeConfiguredGrant-rl6 SEQUENCE {
maxNumberConfigsPerBWP-rl6 ENUMERATED {nl, n2, n4, n8, nl2},
maxNumberConfigsAllCC-rl6 INTEGER (2..32)
} OPTIONAL,
```

```
jointReleaseConfiguredGrantType2-rl6 ENUMERATED {supported} OPTIONAL,
-- Rl 12-2: Multiple SPS configurations
sps-r16 SEQUENCE {
maxNumberConfigsPerBWP-r16 INTEGER (1..8),
maxNumberConfigsAllCC-rl6 INTEGER (2..32)
} OPTIONAL,
-- Rl 12-2a: Joint release in a DCI for two or more SPS configurations for a given BWP of a serving cell
jointReleaseSPS-r16 ENUMERATED {supported} OPTIONAL,
-- Rl 13-19: Simultaneous positioning SRS and MIMO SRS transmission within a band across multiple CCs
simulSRS-TransWithinBand-r16 ENUMERATED {n2} OPTIONAL,
trs-AdditionalBandwidth-rl6 ENUMERATED {trs-AddBW-Setl, trs-AddBW-Set2} OPTIONAL,
handoverIntraF-IAB-r16 ENUMERATED {supported} OPTIONAL
]],
[ [
-- Rl 22-5a: Simultaneous transmission of SRS for antenna switching and SRS for CB/NCB /BM for intra-band UL CA
```

```
simulTX-SRS-AntSwitchingIntraBandUL-CA-rl6 SimulSRS-ForAntennaSwitching-rl6 OPTIONAL,
```


ETSI


--- Page 936  ---


3GPP TS 38.331 version 17.0.0 Release 17
935
ETSI TS 138331 V17.0.0 (2022-05)
```
    -- Rl 10: NR-unlicensed
    sharedSpectrumChAccessParamsPerBand-vl630 SharedSpectrumChAccessParamsPerBand-vl630 OPTIONAL
    ]],
    [ [
    handoverUTRA-FDD-rl6 ENUMERATED {supported} OPTIONAL,
    -- R4 7-4: Report the shorter transient capability supported by the UE: 2, 4 or 7us
    enhancedUL-TransientPeriod-rl6 ENUMERATED {us2, us4, us7} OPTIONAL,
    sharedSpectrumChAccessParamsPerBand-vl640 SharedSpectrumChAccessParamsPerBand-vl640 OPTIONAL
    ]],
    [ [
    typel-PUSCH-RepetitionMultiSlots-vl650 ENUMERATED {supported} OPTIONAL,
    type2-PUSCH-RepetitionMultiSlots-vl650 ENUMERATED {supported} OPTIONAL,
    pusch-RepetitionMultiSlots-vl650 ENUMERATED {supported} OPTIONAL,
    configuredUL-GrantTypel-vl650 ENUMERATED {supported} OPTIONAL,
    configuredUL-GrantType2-vl650 ENUMERATED {supported} OPTIONAL,
    sharedSpectrumChAccessParamsPerBand-vl650 SharedSpectrumChAccessParamsPerBand-vl650 OPTIONAL
    ]],
    [ [
    enhancedSkipUplinkTxConfigured-vl660 ENUMERATED {supported} OPTIONAL,
    enhancedSkipUplinkTxDynamic-vl660 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    maxUplinkDutyCycle-PCldot5-MPE-FRl-rl6 ENUMERATED {nl0, nl5, n20, n25, n30, n40, n50, n60, n70, n80, n90, nl00} OPTIONAL,
    txDiversity-rl6 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
        -- Rl 36-l: Support of l024QAM for PDSCH for FRl
    pdsch-1024QAM-FRl-rl7 ENUMERATED {supported} OPTIONAL,
        -- R4 22-1 support of FR2 HST operation
    ue-PowerClass-vl700 ENUMERATED {pc5,pc6} OPTIONAL,
    -- Rl 24: NR extension to 7lGHz (FR2-2)
    fr2-2-Access Params PerBendede
    Band-rl7 FR2-2-AccessParamsPerBand-rl7 OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    cg ENUMERATED [supported, OPTIONAL,
    ENUMERATED {supported} OPTIONAL,
    timeBasedCondHandover-rl7
    eventA
    A4BasedCondHandover-rl7 
    ENOMERATED {supported OPTIONAL,
    ]]
}
-- TAG-RF-PARAMETERS-STOP
-- ASNISTOP
```


ETSI


--- Page 937  ---


3GPP TS 38.331 version 17.0.0 Release 17
936
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RF-Parameters field descriptions \\
\hline \begin{tabular}{l}
appliedFreqBandListFilter \\
In this field the UE mirrors the FreqBandList that the NW provided in the capability enquiry, if any. The UE filtered the band combinations in the supportedBandCombinationList in accordance with this appliedFreqBandListFilter. The UE does not include this field if the UE capability is requested by E-UTRAN and the network request includes the field eutra-nr-only [10].
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandCombinationList \\
A list of band combinations that the UE supports for NR (and NR-DC, if requested). The FeatureSetCombination/d:s in this list refer to the FeatureSetCombination entries in the featureSetCombinations list in the UE-NR-Capability IE. The UE does not include this field if the UE capability is requested by E-UTRAN and the network request includes the field eutra-nr-only [10].
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandCombinationListSidelinkEUTRA-NR \\
A list of band combinations that the UE supports for NR sidelink communication only, for joint NR sidelink communication and V2X sidelink communication, or for V2X sidelink communication only. The UE does not include this field if the UE capability is requested by E-UTRAN (see TS 36.331[10]) and the network request includes the field eutra-nronly.
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandCombinationListSL-NonRelayDiscovery \\
A list of band combinations that the UE supports for NR sidelink non-relay discovery.
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandCombinationListSL-RelayDiscovery \\
A list of band combinations that the UE supports for NR sidelink relay discovery.
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandCombinationList-UplinkTxSwitch \\
A list of band combinations that the UE supports dynamic uplink Tx switching for NR UL CA and SUL. The FeatureSetCombination/d:s in this list refer to the \\
FeatureSetCombination entries in the featureSetCombinations list in the UE-NR-Capability IE. The UE does not include this field if the UE capability is requested by E-UTRAN and the network request includes the field eutra-nr-only [10].
\end{tabular} \\
\hline
\end{tabular}
- RF-ParametersMRDC

The IE RF-ParametersMRDC is used to convey RF related capabilities for MR-DC.
RF-ParametersMRDC information element
```
-- ASNISTART
-- TAG-RF-PARAMETERSMRDC-START
RF-ParametersMRDC ::= SEQUENCE \
    supportedBandCombinationList
    appliedFreqBandListFilter
    ...;
    [ [
    srs-SwitchingTimeRequested
    suppor ENUMERATED {true}
    ]],
    [ [
    supportedBandCombinationList-vl550 BandCombinationList-vl550 OPTIONAL
    ]],
    [ [
    \begin{array} { l l l } { \text { supportedBandCombinationList-vl560 } } & { \text { BandCombinationList-v1560} } & { \text { OPTIONAL,} } \\ { \text { supportedBandCombinationListNEDC-Only } } & { \text { BandCombinationList } } & { \text { OPTIONAL} } \end{array}
    supported
    ]],
    [ [
    supportedBandCombinationList-v1570 BandCombinationList-v1570 OPTIONAL
```


ETSI


--- Page 938  ---


3GPP TS 38.331 version 17.0.0 Release 17
937
ETSI TS 138331 V17.0.0 (2022-05)
```
    ]],
    [ [
    supportedBandCombinationList-vl580 BandCombinationList-vl580 OPTIONAL
    ]],
    [ [
    supportedBandCombinationList-vl590 BandCombinationList-vl590 OPTIONAL
    ]],
    [ [
    supportedBandCombinationListNEDC-Only-vl5a0 SEQUENCE {
        supportedBandCombinationList-v1540 BandCombinationList-v1540 OPTIONAL,
        supportedBandCombinationList-vl560 BandCombinationList-vl560 OPTIONAL,
        supportedBandCombinationList-v1570 BandCombinationList-vl570 OPTIONAL,
        supportedBandCombinationList-vl580 BandCombinationList-vl580 OPTIONAL,
        supportedBandCombinationList-vl590 BandCombinationList-vl590 OPTIONAL
    } OPTIONAL
    ]],
    [ [
    supportedBandCombinationList-vl610 BandCombinationList-vl610 OPTIONAL,
    supportedBandCombinationListNEDC-Only-vl610 BandCombinationList-vl610 OPTIONAL,
    supportedBandCombinationList-UplinkTxSwitch-rl6 BandCombinationList-UplinkTxSwitch-rl6 OPTIONAL
    ]],
    [ [
    supportedBandCombinationList-vl630 BandCombinationList-vl630 OPTIONAL,
    supportedBandCombinationListNEDC-Only-vl630 BandCombinationList-vl630 OPTIONAL,
    supportedBandCombinationList-UplinkTxSwitch-vl630 BandCombinationList-UplinkTxSwitch-vl630 OPTIONAL
    ]],
    [ [
    supportedBandCombinationList-v1640 BandCombinationList-v1640 OPTIONAL,
    supportedBandCombinationListNEDC-Only-vl640 BandCombinationList-vl640
    supportedBandCombinationList-UplinkTxSwitch-vl640 BandCombinationList-UplinkTxSwitch-vl640 OPTIONAL
    ]],
    [ [
    supportedBandCombinationList-UplinkTxSwitch-vl670 BandCombinationList-UplinkTxSwitch-vl670 OPTIONAL
    ]],
    [ [
    supportedBandCombinationList-vl700 BandCombinationList-vl700 OPTIONAL,
    supportedBandCombinationList-UplinkTxSwitch-vl700 BandCombinationList-UplinkTxSwitch-vl700 OPTIONAL
    ] ]
}
RF-ParametersMRDC-vl5gO ::= SEQUENCE \
    supportedBandCombinationList-vl5g0 BandCombinationList-vl5g0 OPTIONAL,
    supportedBandCombinationListNEDC-Only-vl5g0 BandCombinationList-vl5g0 OPTIONAL
}
-- TAG-RF-PARAMETERSMRDC-STOP
-- ASNISTOP
```


ETSI


--- Page 939  ---


3GPP TS 38.331 version 17.0.0 Release 17
938
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RF-ParametersMRDC field descriptions \\
\hline \begin{tabular}{l}
appliedFreqBandListFilter \\
In this field the UE mirrors the FreqBandList that the NW provided in the capability enquiry, if any. The UE filtered the band combinations in the supportedBandCombinationList in accordance with this appliedFreqBandListFilter.
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandCombinationList \\
A list of band combinations that the UE supports for (NG)EN-DC, or both (NG)EN-DC and NE-DC. The FeatureSetCombination/ds in this list refer to the \\
FeatureSetCombination entries in the featureSetCombinations list in the UE-MRDC-Capability IE.
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandCombinationListNEDC-Only, supportedBandCombinationListNEDC-Only-v1610 \\
A list of band combinations that the UE supports only for NE-DC. The FeatureSetCombination/d:s in this list refer to the FeatureSetCombination entries in the \\
featureSetCombinations list in the UE-MRDC-Capability IE.
\end{tabular} \\
\hline \begin{tabular}{l}
supportedBandCombinationList-UplinkTxSwitch \\
A list of band combinations that the UE supports dynamic UL Tx switching for (NG)EN-DC. The FeatureSetCombination/d:s in this list refer to the FeatureSetCombination entries in the featureSetCombinations list in the UE-MRDC-Capability IE.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RLC-Parameters

The IE RLC-Parameters is used to convey capabilities related to RLC.
RLC-Parameters information element
```
-- ASNISTART
-- TAG-RLC-PARAMETERS-START
RLC-Parameters ::= SEQUENCE {
    am-WithShortSN
```

```
    - UNUMERAIED \ supported. OPTIONAL,
    ...;
    [ [
    extendedT-PollRetransmit-rl6 ENUMERATED {supported} OPTIONAL,
    extendedT-StatusProhibit-rl6 ENUMERATED {supported} OPTIONAL
    ]],
    [ [
    am-WithLongSN-RedCap-rl7 ENUMERATED {supported} OPTIONAL
    ] ]
}
-- TAG-RLC-PARAMETERS-STOP
-- ASNISTOP
```

- SDAP-Parameters

The IE SDAP-Parameters is used to convey capabilities related to SDAP.

ETSI


--- Page 940  ---


3GPP TS 38.331 version 17.0.0 Release 17
939
ETSI TS 138331 V17.0.0 (2022-05)

SDAP-Parameters information element
```
-- ASNISTART
-- TAG-SDAP-PARAMETERS-START
SDAP-Parameters ::= SEQUENCE {
    as-ReflectiveQoS
    ...;
    [ [
    sdap-QOS-IAB-r16
    sdapHeaderIAB-r16
    ] ]
}
-- TAG-SDAP-PARAMETERS-STOP
-- ASN1STOP
```


\begin{tabular}{ll} 
ENUMERATED [true] & OPT \\
& \\
ENUMERATED [supported] & OPTIONAL, \\
ENUMERATED [supported] & OPTIONAL
\end{tabular}
- SidelinkParameters

The IE SidelinkParameters is used to convey capabilities related to NR and V2X sidelink communications.

SidelinkParameters information element
```
-- ASNISTART
-- TAG-SIDELINKPARAMETERS-START
SidelinkParameters-rl6 ::= SEQUENCE {
    sidelinkParametersNR-r16 SidelinkParametersNR-r16
    sidelinkParametersEUTRA-r16 SidelinkParametersEUTRA-rl
}
SidelinkParametersNR-rl6 ::= SEQUENCE {
    rlc-ParametersSidelink-rl6
    mac-ParametersSidelink-rl6 MAC-ParametersSidelink-rl
    fdd-Add-UE-Sidelink-Capabilities-rl6
    tdd-Add-UE-Sidelink-Capabilities-rl6 JE-SidelinkCapabilityAddXDD-Mode-rl6
    UE-SidelinkCapabilityAddXDD-Mode-rl
    ...,
    [ [
    relayParameters-rl7 RelayParameters-rl7
    ]]
}
SidelinkParametersEUTRA-r16 ::= SEQUENCE {
    sl-ParametersEUTRAl-r16 OCTET STRING
    sl-ParameterseUTRA2-r16 OCTET STRING
    sl-ParameterseUTRA3-r16 OCTET STRING
```

```
    ...
}
```


ETSI


--- Page 941  ---


3GPP TS 38.331 version 17.0.0 Release 17
940
ETSI TS 138331 V17.0.0 (2022-05)
```
RLC-ParametersSidelink-rl6 ::= SEQUENCE \
```

```
    \cdots.
}
MAC-ParametersSidelink-rl6 ::= SEQUENCE \
    mac-ParametersSidelinkCommon-rl6 MAC-ParametersSidelinkCommon-rl6
    mac-ParametersSidelinkXDD-Diff-rl6 MAC-ParametersSidelinkXDD-Diff-rl6
    ...
}
UE-SidelinkCapabilityAddXDD-Mode-rl6 ::= SEQUENCE {
    mac-ParametersSidelinkXDD-Diff-rl6 MAC-ParametersSidelinkXDD-Diff-rl6
}
MAC-ParametersSidelinkCommon-r16 ::= SEQUENCE {
```

```
    ...;
    [ [
```

```
    ] ]
}
MAC-ParametersSidelinkXDD-Diff-rl6 ::= SEQUENCE {
    multipleSR-ConfigurationsSidelink-rl6 ENUMERATED {supported}
    logicalChannelSR-DelayTimerSidelink-rl6 ENUMERATED {supported}
    ...
}
BandSidelinkEUTRA-rl6 ::= SEQUENCE [
    freqBandSidelinkEUTRA-r16 FreqBandIndicatorEUTRA,
    -- Rl 15-7: Transmitting LTE sidelink mode 3 scheduled by NR Uu
    gnb-ScheduledMode3SidelinkEUTRA-r16 SEQUENCE {
        gnb-ScheduledMode3DelaySidelinkEUTRA-r16 ENUMERATED {ms0, ms0dot25, ms0dot5, ms0dot625, ms0dot75, msl,
                                        msldot25, msldot5, msldot75, ms2, ms2dot5, ms3, ms4,
                                        ms5, ms6, ms8, ms10, ms20}
    }
    -- Rl 15-9: Transmitting LTE sidelink mode 4 configured by NR Uu
    gnb-ScheduledMode4SidelinkEUTRA-r16 ENUMERATED {supported}
}
BandSidelink-rl6 ::= SEQUENCE {
    freqBandSidelink-r16 FreqBandIndicatorNR,
    --15-1
    sl-Reception-rl6
        harq-RxProcessSidelink-rl6
        pscch-RxSidelink-rl6
        scs-CP-PatternRxSidelink-rl6
            frl-rl6
                scs-15kHz-r16 BIT STRING (SIZE (16)) OPTIONAL,
                scs-30kHz-r16
SEQUENCE {
    ENUMERATED {n16, n24, n32, n48, n64},
    ENUMERATED {valuel, value2},
    CHOICE \
        SEQUENCE {
                scs-30kHz-rl6 BIT STRING (SIZE (16)) OPTIONAL,
```


ETSI


--- Page 942  ---


3GPP TS 38.331 version 17.0.0 Release 17
941
ETSI TS 138331 V17.0.0 (2022-05)
```
            scs-60kHz-rl6 BIT STRING (SIZE (16)) OPTIONAL
        },
        fr2-rl6 SEQUENCE \
            scs-60kHz-rl6
            scs-l20kHz-rl6 BIT STRING (SIZE (16)) OPTIONAL,
        }
    } OPTIONAL,
    extendedCP-RxSidelink-rl6 ENUMERATED {supported} OPTIONAL
}
--15-2
sl-TransmissionModel-rl6
    harq-TxProcessModeOneSidelink-rl6
    scs-CP-PatternTxSidelinkModeOne-r16
        frl-rl6
            scs - l5kHz-rl6
            scs - 30kHz-rl6
            scs-60kHz-rl6
        },
        fr2-rl6
            scs-60kHz-rl6
            scs - l20kHz-rl6
        }
    },
    extendedCP-TxSidelink-rl6
    harq-ReportOnPUCCH-rl6
}
--15-4
sync-Sidelink-rl6
    gNB-Sync-rl6 ENUMERATED {supported} OPTIONAL,
    gNB-GNSS-UE-SyncWithPriorityOnGNB-ENB-rl6
    gNB-GNSS-UE-SyncWithPriorityOnGNSS-rl6
}
--15-10
sl-Tx-256QAM-r16
--15-11
psfch-FormatZeroSidelink-rl6
    psfch-RxNumber
    psfch-TxNumber
}
--15-12
lowSE-64QAM-MCS-TableSidelink-rl6
--15-15
enb-sync-Sidelink-rl6
....
[ [
--15-3
sl-TransmissionMode2-rl6
    harq-TxProcessModeTwoSidelink-rl6
    scs-CP-PatternTxSidelinkModeTwo-r16
    dl-openLoopPC-Sidelink-rl6
}
--15-5
congestionControlSidelink-rl6
    cbr-ReportSidelink-r16
```

```
SEQUENCE \
    ENUMERATED {n8, nl6},
    CHOICE l
        SEQUENCE \
            BIT STRING (SIZE (16)) OPTIONAL,
            BIT STRING (SIZE (16)) OPTIONAL,
            BIT STRING (SIZE (16)) OPTIONAL
        SEQUENCE \
            BIT STRING (SIZE (16)) OPTIONAL,
            BIT STRING (SIZE (16)) OPTIONAL
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL
OPTIONAL,
SEQUENCE \
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL
            OPTIONAL,
ENUMERATED {supported} OPTIONAL,
SEQUENCE \
    ENUMERATED {n5, n15, n25, n32, n35, n45, n50, n64},
    ENUMERATED {n4, n8, nl6}
            OPTIONAL,
ENUMERATED {supported} OPTIONAL,
ENUMERATED {supported} OPTIONAL,
```

```
SEQUENCE \
    ENUMERATED {n8, nl6},
    ENUMERATED {supported} OPTIONAL,
    ENUMERATED {supported} OPTIONAL
        OPTIONAL,
SEQUENCE \
    ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 943  ---


3GPP TS 38.331 version 17.0.0 Release 17
942
ETSI TS 138331 V17.0.0 (2022-05)
```
        cbr-CR-TimeLimitSidelink-rl6 ENUMERATED {timel, time2}
    }
    --15-22
    fewerSymbolSlotSidelink-r16
    --15-23
    sl-openLoopPC-RSRP-ReportSidelink-rl6
    --13-1
    sl-Rx-256QAM-r16
    ]],
    [ [
    ue-PowerClassSidelink-rl6
    ] ]
}
RelayParameters-rl7 ::= SEQUENCE [
    relayUE-Operation-L2-rl7
    remoteUE-Operation-L2-rl7
    remoteUE-PathSwitchToIdleInactiveRelay-rl7
    ...
}
-- TAG-SIDELINKPARAMETERS-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SidelinkParametersEUTRA field descriptions \\
\hline \begin{tabular}{l}
sl-ParametersEUTRA1, si-ParametersEUTRA2, si-ParametersEUTRA3 \\
This field includes IE of SL-Parameters-v1430 (where v2x-eNB-Scheduled-r14 and V2X-SupportedBandCombination-r14 shall not be included), SL-Parameters-v1530 (where V2X-SupportedBandCombination-r1530 shall not be included) and SL-Parameters-v1540 respectively defined in 36.331 [10]. It is used for reporting the per-UE capability for V2X sidelink communication.
\end{tabular} \\
\hline
\end{tabular}
- SimultaneousRxTxPerBandPair

The IE SimultaneousRxTxPerBandPair contains the simultaneous Rx/Tx UE capability for each band pair in a band combination.
SimultaneousRxTxPerBandPair information element
-- ASNISTART
-- TAG-SIMULTANEOUSRXTXPERBANDPAIR-START
SimultaneousRxTxPerBandPair : := BIT STRING (SIZE (3.496))
-- TAG-SIMULTANEOUSRXTXPERBANDPAIR-STOP
-- ASNISTOP

ETSI


--- Page 944  ---


3GPP TS 38.331 version 17.0.0 Release 17
943
ETSI TS 138331 V17.0.0 (2022-05)

SON-Parameters
The IE SON-Parameters contains SON related parameters.
SON-Parameters information element
```
-- ASNISTART
-- TAG-SON-PARAMETERS-START
SON-Parameters-rl6 ::= SEQUENCE [
    rach-Report-rl6 ENUMERATED {supported} OPTIONAL,
    ...;
    [ [
    rlfReportCHO-rl7 ENUMERATED {supported} OPTIONAL,
    rlfReportDAPS-rl7 ENUMERATED {supported} OPTIONAL,
    success-HO-Report-rl7 ENUMERATED {supported} OPTIONAL,
    twoStepRACH-Report-rl7 ENUMERATED {supported} OPTIONAL,
    pscell-MHI-Report-rl7 ENUMERATED {supported} OPTIONAL,
    onDemandSI-Report-rl7 ENUMERATED {supported} OPTIONAL
    ]]
}
-- TAG-SON-PARAMETERS-STOP
-- ASNISTOP
```


SpatialRelationsSRS-Pos
The IE SpatialRelationsSRS-Pos is used to convey spatial relation for SRS for positioning related parameters.

SpatialRelationsSRS-Pos information element
```
-- ASNISTART
-- TAG-SPATIALRELATIONSSRS-POS-START
SpatialRelationsSRS-Pos-rl6 ::= SEQUENCE [
    spatialRelation-SRS-PosBasedOnSSB-Serving-r16 ENUMERATED {supported} OPTIONAL,
    spatialRelation-SRS-PosBasedOnCSI-RS-Serving-r16 ENUMERATED {supported} OPTIONAL,
    spatialRelation-SRS-PosBasedOnPRS-Serving-rl6 ENUMERATED {supported} OPTIONAL,
    spatialRelation-SRS-PosBasedOnSRS-rl6 ENUMERATED {supported} OPTIONAL,
    spatialRelation-SRS-PosBasedOnSSB-Neigh-rl6 ENUMERATED {supported} OPTIONAL,
    spatialRelation-SRS-PosBasedOnPRS-Neigh-r16 ENUMERATED {supported} OPTIONAL
}
--TAG-SPATIALRELATIONSSRS-POS-STOP
-- ASNISTOP
```


ETSI


--- Page 945  ---


3GPP TS 38.331 version 17.0.0 Release 17
944
ETSI TS 138331 V17.0.0 (2022-05)
- SRS-SwitchingTimeNR

The IE SRS-SwitchingTimeNR is used to indicate the SRS carrier switching time supported by the UE for one NR band pair.
SRS-Switching TimeNR information element
```
-- ASNISTART
-- TAG-SRS-SWITCHINGTIMENR-START
SRS-SwitchingTimeNR ::= SEQUENCE \
    switchingTimeDL ENOMERATED {nOus, n30us, nl00us, nl40us, n200us, n300us, n500us, n900us} OPTIONAL,
    switchingTimeUL ENUMERATED {nOus, n30us, nl00us, nl40us, n200us, n300us, n500us, n900us} OPTIONAL
}
-- TAG-SRS-SWITCHINGTIMENR-STOP
-- ASNISTOP
```

- SRS-SwitchingTimeEUTRA

The IE SRS-SwitchingTimeEUTRA is used to indicate the SRS carrier switching time supported by the UE for one E-UTRA band pair.

SRS-SwitchingTimeEUTRA information element
```
-- ASNISTART
-- TAG-SRS-SWITCHINGTIMEEUTRA-START
SRS-SwitchingTimeEUTRA ::= SEQUENCE \
```

```
        OPTIONAL,
```

```
            OPTIONAL
}
-- TAG-SRS-SWITCHINGTIMEEUTRA-STOP
-- ASNISTOP
```


SupportedBandwidth
The IE SupportedBandwidth is used to indicate the channel bandwidth supported by the UE on one carrier of a band of a band combination.
SupportedBandwidth information element
```
-- ASNISTART
-- TAG-SUPPORTEDBANDWIDTH-START
SupportedBandwidth ::= CHOICE \
    frl
    ENUMERATED {mhz5, mhzl0, mhzl5, mhz20, mhz25, mhz30, mhz40, mhz50, mhz60, mhz80, mhzl00},
```


ETSI


--- Page 946  ---


3GPP TS 38.331 version 17.0.0 Release 17
945
ETSI TS 138331 V17.0.0 (2022-05)
```
    fr2 ENUMERATED {mhz50, mhz100, mhz200, mhz400}
}
SupportedBandwidth-vl700 ::= CHOICE {
```

```
    fr2-rl7 ENUMERATED {mhz50, mhzl00, mhz200, mhz400}
}
-- TAG-SUPPORTEDBANDWIDTH-STOP
-- ASNISTOP
```


UE-BasedPerfMeas-Parameters
The IE UE-BasedPerfMeas-Parameters contains UE-based performance measurement parameters.

UE-BasedPerfMeas-Parameters information element
```
-- ASNISTART
-- TAG-UE-BASEDPERFMEAS-PARAMETERS-START
UE-BasedPerfMeas-Parameters-rl6 ::= SEQUENCE {
    barometerMeasReport-r16 ENUMERATED {supported} OPTIONAL,
    immeasBT-rl6 ENUMERATED {supported} OPTIONAL,
    immeasWLAN-r16 ENUMERATED {supported} OPTIONAL,
    loggedMeasBT-rl6 ENUMERATED {supported} OPTIONAL,
    loggedMeasurements-rl6 ENUMERATED {supported} OPTIONAL,
    loggedMeasWLAN-rl6 ENUMERATED {supported} OPTIONAL,
    orientationMeasReport-r16 ENUMERATED {supported} OPTIONAL,
    speedMeasReport-r16 ENUMERATED {supported} OPTIONAL,
    gnss-Location-r16 ENUMERATED {supported} OPTIONAL,
    ulPDCP-Delay-rl6 ENUMERATED {supported} OPTIONAL,
    ...;
    [ [
    sigBasedLogMDT-OverrideProtect-rl7 ENUMERATED {supported} OPTIONAL,
    multipleCEF-Report-rl7 ENUMERATED {supported} OPTIONAL,
    excesspacketDelay-rl7 ENUMERATED {supported} OPTIONAL
    ] ]
}
-- TAG-UE-BASEDPERFMEAS-PARAMETERS-STOP
-- ASNISTOP
```


UE-CapabilityRAT-ContainerList

The IE UE-CapabilityRAT-ContainerList contains a list of radio access technology specific capability containers.

ETSI


--- Page 947  ---


3GPP TS 38.331 version 17.0.0 Release 17
946
ETSI TS 138331 V17.0.0 (2022-05)

UE-CapabilityRAT-ContainerList information element
```
-- ASNISTART
-- TAG-UE-CAPABILITYRAT-CONTAINERLIST-START
```

```
UE-CapabilityRAT-Container ::= SEQUENCE \
    rat-Type RAT-Type,
    ue-CapabilityRAT-Container OCTET STRING
}
-- TAG-UE-CAPABILITYRAT-CONTAINERLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UE-CapabilityRAT-ContainerList field descriptions \\
\hline \begin{tabular}{l}
ue-CapabilityRAT-Container \\
Container for the UE capabilities of the indicated RAT. The encoding is defined in the specification of each RAT: \\
For rat-Type set to nr. the encoding of UE capabilities is defined in UE-NR-Capability. \\
For rat-Type set to eutra-nr. the encoding of UE capabilities is defined in UE-MRDC-Capability. \\
For rat-Type set to eutra: the encoding of UE capabilities is defined in UE-EUTRA-Capability specified in TS 36.331 [10]. \\
For rat-Type set to utra-fdd: the octet string contains the INTER RAT HANDOVER INFO message defined in TS 25.331 [45].
\end{tabular} \\
\hline
\end{tabular}
- UE-CapabilityRAT-RequestList

The IE UE-CapabilityRAT-RequestList is used to request UE capabilities for one or more RATs from the UE.
UE-CapabilityRAT-RequestList information element
```
-- ASNISTART
-- TAG-UE-CAPABILITYRAT-REQUESTLIST-START
```

```
UE-CapabilityRAT-Request ::= SEQUENCE \
    rat-Type RAT-Type,
    capabilityRequestFilter OCTET STRING OPTIONAL, -- Need. N
    ...
}
-- TAG-UE-CAPABILITYRAT-REQUESTLIST-STOP
-- ASNISTOP
```


ETSI


--- Page 948  ---


3GPP TS 38.331 version 17.0.0 Release 17
947
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UE-CapabilityRAT-Request field descriptions \\
\hline \begin{tabular}{l}
capabilityRequestFilter \\
Information by which the network requests the UE to filter the UE capabilities. \\
For rat-Type set to \( n r \) or eutra-nr. the encoding of the capabilityRequestFilter is defined in UE-CapabilityRequestFilterNR. \\
For rat-Type set to eutra: the encoding of the capabilityRequestFilter is defined by UECapabilityEnquiry message defined in TS36.331 [10], in which RAT-Type in UE- \\
CapabilityRequest includes only 'eutra'.
\end{tabular} \\
\hline \begin{tabular}{l}
rat-Type \\
The RAT type for which the NW requests UE capabilities.
\end{tabular} \\
\hline
\end{tabular}
- UE-CapabilityRequestFilterCommon

The IE UE-CapabilityRequestFilterCommon is used to request filtered UE capabilities. The filter is common for all capability containers that are requested.
UE-CapabilityRequestFilterCommon information element
```
-- ASNISTART
-- TAG-UE-CAPABILITYREQUESTEILTERCOMMON-START
UE-CapabilityRequestFilterCommon ::= SEQUENCE {
    mrdc-Request SEQUENCE {
        omitEN-DC
        includeNR-DC
        includeNE-DC
    }
    ...;
    [ [
    codebookTypeRequest-rl6 SEQUENCE {
        typel-SinglePanel-rl6
        typel-MultiPanel-rl6 ENUMERATED {true}
        type2-rl6
        type2-PortSelection-rl6 ENUMERATED {true}
    }
    uplinkTxSwitchRequest-rl6 ENUMERATED {true} OPTIONAL -- Need. N
    ]],
    [ [
```

```
    ] ]
}
CellGrouping-rl6 ::= SEQUENCE \
    mcg-rl6 SEQUENCE (SIZE (l..maxBands)) OF FreqBandIndicatorNR,
    scg-r16 SEQUENCE (SIZE (l..maxBands)) OF FreqBandIndicatorNR,
    mode-r16 ENUMERATED {sync, async}
}
-- TAG-UE-CAPABILITYREQUESTFILTERCOMMON-STOP
-- ASNISTOP
```


ETSI


--- Page 949  ---


3GPP TS 38.331 version 17.0.0 Release 17
948
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UE-CapabilityRequestFilterCommon field descriptions \\
\hline \begin{tabular}{l}
codebookTypeRequest \\
Only if this field is present, the UE includes SupportedCS/-RS-Resource supported for the codebook type(s) requested within this field (i.e. type I single/multi-panel, type II and type II port selection) into codebookVariantsList, codebookParametersPerBand and codebookParametersPerBC. If this field is present and none of the codebook types is requested within this field (i.e. empty field), the UE includes SupportedCS/-RS-Resource supported for all codebook types into codebookVariantsList, codebookParametersPerBand and codebookParametersPerBC.
\end{tabular} \\
\hline \begin{tabular}{l}
includeNE-DC \\
Only if this field is present, the UE supporting NE-DC shall indicate support for NE-DC in band combinations and include feature set combinations which are applicable to NEDC. Band combinations supporting both NE-DC and (NG)EN-DC shall be included in supportedBandCombinationList, band combinations supporting only NE-DC shall be included in supportedBandCombinationListNEDC-Only.
\end{tabular} \\
\hline \begin{tabular}{l}
includeNR-DC \\
Only if this field is present, the UE supporting NR-DC shall indicate support for NR-DC in band combinations and include feature set combinations which are applicable to NRDC.
\end{tabular} \\
\hline \begin{tabular}{l}
mode \\
The mode of NR-DC operation that the NW is interested in for this cell grouping. The value sync means that the UE only indicates NR-DC support for band combinations for which it supports synchronous NR-DC with the requested cell grouping. The value async means that the UE only indicates NR-DC support for band combinations for which it supports asynchronous NR-DC with the requested cell grouping.
\end{tabular} \\
\hline \begin{tabular}{l}
omitEN-DC \\
Only if this field is present, the UE shall omit band combinations and feature set combinations which are only applicable to (NG)EN-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedCellGrouping \\
The NR-DC cell groupings that the NW is interested in, i.e., the bands that it might use in an MCG and the bands that it might use in an SCG. Only if this field is present, the UE indicates NR-DC support for band combinations for which it supports the requested cell grouping, i.e., in which it supports at least one of the mcg bands on MCG and at least one of the scg bands on the SCG. In its supportedBandCombinationList, the UE indicates which of its NR-DC band combinations supports which of the requested cell groupings. The first element in this list is referred to by ID\#0, the second by ID\#1 and so on. If this field is absent, the UE only includes band combinations for which it supports NR-DC with only FR1 bands in MCG and only FR2 bands in SCG. \\
Example 1: requestedCellGrouping is set to \( m c g=[\mathrm{n} 1, \mathrm{n} 7, \mathrm{n} 41, \mathrm{n} 66] \) and \( \operatorname{scg}=[\mathrm{n} 78, \mathrm{n} 261] \). This assumes that the NW would always use CA among n 1 , \( \mathrm{n7} \), n 41 and \( \mathrm{n66} \) (depending on which are deployed on a given site) whereas with n78 and/or n261 the NW may need to use DC. With this filter a UE may report a band combination n1A-n7An78A for NR-DC only if it supports that serving cells for n 1 and n 7 are in the MCG and a serving cell for n 78 is in the SCG. The UE may also report a band combination n41Cn261M for NR-DC provided that it supports a serving cell for n41 in the MCG and a serving cell for n261 in the SCG. \\
Example 2: One requestedCellGrouping is set to \( m c g=[\mathrm{n} 1, \mathrm{n} 7, \mathrm{n} 41, \mathrm{n} 66] \) and \( \mathrm{scg}=[\mathrm{n78}, \mathrm{n261}] \) and another requestedCellGrouping is set to mcg=[n1, n7, n66] and scg=[ n41, n78, n261]. This assumes that the NW uses sometimes CA among n1, n7, n41 and n66 (as in example 1) and sometimes CA among n1, n7 and n66 but DC towards one or several of n41, n78, n261. If a UE supports n1A-n41A-n78A only if n41A and n78A are in the same cell group, this UE may only indicate cell grouping ID\#1 (not \#0) in its BC.
\end{tabular} \\
\hline \begin{tabular}{l}
uplinkTxSwitchRequest \\
Only if this field is present, the UE supporting dynamic UL Tx switching shall indicate support for UL Tx switching in band combinations which are applicable to inter-band UL CA, SUL and (NG)EN-DC.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline NRDC & The field is optionally present, Need N, if includeNR-DC is included. It is absent otherwise. \\
\hline
\end{tabular}
- UE-CapabilityRequestFilterNR

The IE UE-CapabilityRequestFilterNR is used to request filtered UE capabilities.

ETSI


--- Page 950  ---


3GPP TS 38.331 version 17.0.0 Release 17
949
ETSI TS 138331 V17.0.0 (2022-05)

UE-CapabilityRequestFilterNR information element
```
-- ASNISTART
-- TAG-UE-CAPABILITYREQUESTEILTERNR-START
UE-CapabilityRequestFilterNR ::= SEQUENCE {
    frequencyBandListFilter
    nonCriticalExtension
}
UE-CapabilityRequestFilterNR-vl540 ::= SEQUENCE {
    srs-SwitchingTimeRequest
    nonCriticalExtension
}
-- TAG-UE-CAPABILITYREQUESTFILTERNR-STOP
```

-- ASNISTOP
```
FreqBandList
UE-CapabilityRequestFilterNR-v1540
OPTIONAL, -- Need N
OPTIONAL
ENUMERATED {true} OPTIONAL, -- Need N
SEQUENCE {}
OPTIONAL
```

- UE-MRDC-Capability

The IE UE-MRDC-Capability is used to convey the UE Radio Access Capability Parameters for MR-DC, see TS 38.306 [26].
UE-MRDC-Capability information element
```
-- ASNISTART
-- TAG-UE-MRDC-CAPABILITY-START
UE-MRDC-Capability ::= SEQUENCE \
    measAndMobParametersMRDC
    phy-ParametersMRDC-w1530
    rf-ParametersMRDC
    generalParametersMRDC
    fdd-Add-UE-MRDC-Capabilities
    tdd-Add-UE-MRDC-Capabilities
    frl-Add-UE-MRDC-Capabilities
    fr2-Add-UE-MRDC-Capabilities
    featureSetCombinations
    pdcp-ParametersMRDC-v1530
    lateNonCriticalExtension
    nonCriticalExtension
}
-- Regular non-critical extensions:
UE-MRDC-Capability-vl560 ::= SEQUENCE {
    receivedFilters OCTET STRING (CONTAINING UECapabilityEnquiry-vl560-IEs)
    measAndM-Add-UE-MRDC-Capabilities-vl560 UE-MRDC-CapabilityAddXDD-Mode-vl560
    tdd-Add-UE-MRDC-Capabilities-vl560 UE-MRDC-CapabilityAddXDD-Mode-vl560
    nonCriticalExtension UE-MRDC-Capability-vl610
}
```


ETSI


--- Page 951  ---


3GPP TS 38.331 version 17.0.0 Release 17
950
ETSI TS 138331 V17.0.0 (2022-05)
```
UE-MRDC-Capability-vl610 ::= SEQUENCE {
    measAndMobParametersMRDC-vl610
    generalParametersMRDC-vl610
    pdcp-ParametersMRDC-v1610
    nonCritit{
}
UE-MRDC-Capability-vl700 ::=
    measAndMobParametersMRDC-vl700
    nonCriticalExtension
}
-- Late non-critical extensions:
UE-MRDC-Capability-vl5gO ::= SEQUENCE {
    rf-ParametersMRDC-vl5g0
    nonCritic
}
UE-MRDC-CapabilityAddXDD-Mode ::= SEQUENCE \
    measAndMobParametersMRDC-XDD-Diff MeasAndMobParametersMRDC-XDD-Diff
    generalParametersMRDC-XDD-Diff GeneralParametersMRDC-XDD-Diff
}
UE-MRDC-CapabilityAddXDD-Mode-vl560 ::= SEQUENCE [
    measAndMobParametersMRDC-XDD-Diff-vl560 MeasAndMobParametersMRDC-XDD-Diff-vl560
}
UE-MRDC-CapabilityAddFRX-Mode ::= SEQUENCE \
    measAndMobParametersMRDC-FRX-Diff MeasAndMobParametersMRDC-FRX-Diff
}
GeneralParametersMRDC-XDD-Diff ::= SEQUENCE {
```

```
    splitDRB-withUL-Both-MCG-SCG ENUMERATED {supported}
    srb3 ENUMERATED {supported}
    dummy ENUMERATED {supported}
    ...
}
GeneralParametersMRDC-vl610 ::= SEQUENCE [
    flc-OverEUTRA-rl6 ENUMERATED {supported}
}
```

-- TAG-UE-MRDC-CAPABILITY-STOP
-- ASNISTOP

UE-MRDC-Capability field descriptions
featureSetCombinations
A list of FeatureSetCombination:s for supportedBandCombinationList and supportedBandCombinationListNEDC-Only in UE-MRDC-Capability. The FeatureSetDownlinks and FeatureSetUplinks referred to from these FeatureSetCombination:s are defined in the featureSets list in UE-NR-Capability.

ETSI


--- Page 952  ---


3GPP TS 38.331 version 17.0.0 Release 17
951
ETSI TS 138331 V17.0.0 (2022-05)

UE-NR-Capability
The IE UE-NR-Capability is used to convey the NR UE Radio Access Capability Parameters, see TS 38.306 [26].
UE-NR-Capability information element
```
-- ASNISTART
-- TAG-UE-NR-CAPABILITY-START
UE-NR-Capability ::= SEQUENCE \
    accessStratumRelease
    pdcp-Parameters
    rlc-Parr
    ma RLC-Parameters OPTIONAL,
    phy-Parameters Phy-Parameters,
    rf-Parameters RF-Parameters,
    measAndMobParameters
    fdd-Add-UE-NR-Capabilities
    tdd-Add-UE-NR-Capabilities
    frl-Add-UE-NR-Capabilities
    fr2-Add-UE-NR-Capabilities
    featureSets
    featureSetCombinations
    lateNonCriticalExtension
    nonCriticalExtension
}
-- Regular non-critical extensions:
UE-NR-Capability-v1530 ::=
    fdd-Add-UE-NR-Capabilities-vl530
    tdd-Add-UE-NR-Capabilities-vl530
    dummy
    interRAT-Parameters
    inactiveState
    delayBudgetReporting
    nonCriticalExtension
}
UE-NR-Capability-vl540 ::= SEQUENCE \
    sdap-Parameters
    overheatingInd.
    ims-Parameters
    frl-Add-UE-NR-Capabilities-v1540
    fr2-Add-UE-NR-Capabilities-v1540
    frl-fr2-Add-UE-NR-Capabilities
    nonCriticalExtension
}
UE-NR-Capability-vl550 ::= SEQUENCE \
    reducedCP-Latency ENUMERATED {supported} OPTIONAL,
    nonCriticalExtension UE-NR-Capability-vl560 OPTIONAL
}
```


ETSI


--- Page 953  ---


3GPP TS 38.331 version 17.0.0 Release 17
952
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline \begin{tabular}{l}
UE-NR-Capability-vl560 : := \\
nrdc-Parameters
\end{tabular} & \begin{tabular}{l}
SEQUENCE 1 \\
NRDC-Parameters \\
OCTET STRING (CONTAINING UECApabilityEnquiry-vl560-IEs) \\
UE-NR-Capability-vl570
\end{tabular} \\
\hline \begin{tabular}{l}
UE-NR-Capability-vl570 : := \\
nrdc-Parameters-vl570 \\
nonCriticalExtension
\end{tabular} & \begin{tabular}{l}
SEQUENCE 1 \\
NRDC-Parameters-vl570 \\
UE-NR-Capability-vl610
\end{tabular} \\
\hline -- Late non-critical extensions: & \\
\hline UE-NR-Capability-vl5c0 : := & \begin{tabular}{l}
SEQUENCE 1 \\
NRDC-Parameters-vl5c0 \\
ENUMERATED \{true\} \\
UE-NR-Capability-vl5g0
\end{tabular} \\
\hline \} & \\
\hline \} & \begin{tabular}{l}
SEQUENCE 1 \\
RE-Parameters-vl5g0 \\
SEQUENCE \{\}
\end{tabular} \\
\hline -- Regular non-critical extensions: & \\
\hline UE-NR-Capability-vl610 : := & \begin{tabular}{l}
SEQUENCE 1 \\
ENUMERATED \{supported\} \\
ENUMERATED [supported] \\
NRDC-Parameters-vl610 \\
PowSav-Parameters-rl6
\end{tabular} \\
\hline \} & \\
\hline \} & \begin{tabular}{l}
SEQUENCE 1 \\
ENUMERATED \{supported\} \\
phy-ParametersSharedSpectrumChAccess-rl6 Phy-ParametersSharedSpectrumChAccess-rl6 \\
UE-NR-Capability-vl650
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 954  ---


3GPP TS 38.331 version 17.0.0 Release 17
953
ETSI TS 138331 V17.0.0 (2022-05)
```
UE-NR-Capability-vl650 ::= SEQUENCE \
    mpsPriorityIndication-rl6
    highSpeedParameters-vl650
    nonCriticalExtension
}
UE-NR-Capability-vl700 ::=
    inactiveStatePO-Determination-rl7
    highSpeedParameters-vl700
    powSav-Parameters-vl700
    mac-Parameters-vl700
    ims-Parameters-vl700
    measAndMobParameters-vl700 MeasAndMobParameters-vl700,
    qoe-Parameters-rl7 QoE-Parameters-rl7
    redCapParameters-rl7 RedCapParameters-rl7
    ra-SDT-rl7 ENUMERATED {supported}
    srb-SDT-rl7 ENUMERATED {supported}
    gNB-SideRTT-BasedPDC-rl7 ENUMERATED {supported}
    bh-RLF-RecoveryDetection-Indication-rl7 ENUMERATED {supported}
    nrdc-Parameters-vl700 NRDC-Parameters-vl700
    bap-Parameters-vl700 BAP-Parameters-vl700
    musimGapPreference-rl7 ENUMERATED {supported}
    musimLeaveConnected-rl7 ENUMERATED {supported}
    mbs-Parameters-rl7 MBS-Parameters-rl7,
    nonTerrestrialNetwork-rl7 ENUMERATED {supported}
    ntn-ScenarioSupport-rl7 ENUMERATED {gso, ngso}
    sliceInfoforCellReselection-rl7 ENUMERATED {supported}
    nonCriticalExtension SEQUENCE {}
}
UE-NR-CapabilityAddXDD-Mode ::= SEQUENCE [
    phy-ParametersXDD-Diff Phy-ParametersXDD-Diff
    mac-ParametersXDD-Diff MAC-ParametersXDD-Diff
    measAndMobParametersXDD-Diff MeasAndMobParametersXDD-Diff
}
UE-NR-CapabilityAddXDD-Mode-vl530 ::= SEQUENCE {
    eutra-ParametersXDD-Diff EUTRA-ParametersXDD-Diff
}
UE-NR-CapabilityAddFRX-Mode ::= SEQUENCE {
    phy-ParametersFRX-Diff Phy-ParametersFRX-Diff
    measAndMobParametersFRX-Diff MeasAndMobParametersFRX-Diff
}
UE-NR-CapabilityAddFRX-Mode-v1540 ::= SEQUENCE {
    ims-ParametersFRX-Diff IMS-ParametersFRX-Diff
}
UE-NR-CapabilityAddFRX-Mode-vl610 ::= SEQUENCE {
    powSav-ParametersFRX-Diff-rl6 PowSav-ParametersFRX-Diff-rl6 OPTIONAL,
    mac-ParametersFRX-Diff-rl6 MAC-ParametersFRX-Diff-rl6
}
```

```
OPTIONAL,
OPTIONAL,
OPTIONAL
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL,
OPTIONAL
OPTIONAL,
OPTIONAL,
OPTIONAL
OPTIONAL,
OPTIONAL
OPTIONAL
```


ETSI


--- Page 955  ---


3GPP TS 38.331 version 17.0.0 Release 17
954
ETSI TS 138331 V17.0.0 (2022-05)
```
BAP-Parameters-rl6 ::=
    flowControlBH-RLC-ChannelBased-rl6
    flowControlRouting-ID-Based-r16
}
BAP-Parameters-vl700 ::=
    bapHeaderRewriting-Rerouting-rl7
    bapHeaderRewriting-Routing-rl7
}
MBS-Parameters-rl7 ::=
    maxMRB-Add-rl7
}
-- TAG-UE-NR-CAPABILITY-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UE-NR-Capability field descriptions \\
\hline \begin{tabular}{l}
featureSetCombinations \\
A list of FeatureSetCombination:s for supportedBandCombinationList in UE-NR-Capability. The FeatureSetDownlink:s and FeatureSetUplinks referred to from these \\
FeatureSetCombination:s are defined in the featureSets list in UE-NR-Capability.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline UE-NR-Capability-v1540 field descriptions \\
\hline fr1-fr2-Add-UE-NR-Capabilities \\
This instance of UE-NR-CapabilityAddFRX-Mode does not include any other fields than csi-RS-IM-ReceptionForFeedback/csi-RS-ProcFrameworkForSRS/csi- \\
ReportFramework.
\end{tabular}
- SharedSpectrumChAccessParamsPerBand

The IE SharedSpectrumChAccessParamsPerBand is used to convey shared channel access related parameters specific for a certain frequency band (not per feature set or band combination).

SharedSpectrumChAccessParamsPerBand information element
```
-- ASNISTART
-- TAG-SHAREDSPECTRUMCHACCESSPARAMSPERBAND-START
SharedSpectrumChAccessParamsPerBand-r16 ::= SEQUENCE {
    -- Rl lO-l: UL channel access for dynamic channel access mode
    ul-DynamicChAccess-r16 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-la: UL channel access for semi-static channel access mode
    ul-Semi-StaticChAccess-r16 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-2: SSB-based RRM for dynamic channel access mode
    ssb-RRM-DynamicChAccess-r16 ENUMERATED {supported} OPTIONAL,
    -- R1 10-2a: SSB-based RRM for semi-static channel access mode
    ssb-RRM-Semi-StaticChAccess-rl6 ENUMERATED {supported} OPTIONAL,
```


ETSI


--- Page 956  ---


3GPP TS 38.331 version 17.0.0 Release 17
955
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|}
\hline \begin{tabular}{l}
-- Rl 10-2b: MIB reading on unlicensed cell \\
mib-Acquisition-rl6
\end{tabular} & & \\
\hline & ENUMERATED [supported] & OPTIONAL, \\
\hline \multicolumn{3}{|l|}{-- R1 10-2c: SSB-based RLM for dynamic channel access mode} \\
\hline \multicolumn{3}{|l|}{-- R1 10-2d: SSB-based RLM for semi-static channel access mode} \\
\hline \section*{ssb-RLM-Semi-StaticChAccess-rl6 \\ -- Rl 10-2e: SIBl reception on unlicensed cell} & & OPTIONAL, \\
\hline \multicolumn{3}{|l|}{-- R1 10-2f: Support monitoring of extended RAR window} \\
\hline \multicolumn{3}{|l|}{-- Rl 10-2g: SSB-based BED/CBD for dynamic channel access mode} \\
\hline \multicolumn{3}{|l|}{-- R1 10-2h: SSB-based BFD/CBD for semi-static channel access mode} \\
\hline ssb-BFD-CBD-semi-staticChannelAccess-rl6 & & \\
\hline \begin{tabular}{l}
csi-RS-BFD-CBD-rl6 \\
-- Rl 10-7: UL channel access for 10 MHz SCell
\end{tabular} & ENUMERATED \{supported\} & OPTIONAL, \\
\hline ul-ChannelBW-SCell-10mhz-rl6 & -- R1 10-10: RSSI and channel occupancy measurement & \\
\hline \multicolumn{3}{|l|}{-- R1 lO-ll:SRS starting position at any OFDM symbol in a slot} \\
\hline \multicolumn{3}{|l|}{-- R1 10-20: Support search space set configuration with freqMonitorLocation-rl6} \\
\hline \multicolumn{3}{|l|}{-- Rl 10-20a: Support coreset configuration with rb-Offset} \\
\hline coreset-RB-Offset-rl6 & & \\
\hline \multicolumn{3}{|l|}{-- R1 10-23:CGI reading on unlicensed cell for ANR functionality} \\
\hline cgi-Acquisition-rl6 & ENUMERATED \{supported\} & OPTIONAL, \\
\hline \multicolumn{3}{|c|}{\begin{tabular}{l}
-- Rl 10-25: Enable configured UL transmissions when DCI 2_0 is configured but not detected configuredUL-Tx-rl6 \\
ENUMERATED \{supported\} \\
OPTIONAL, \\
-- R1 10-27: Wideband PRACH
\end{tabular}} \\
\hline prach-Wideband-rl6 & \multicolumn{2}{|c|}{\multirow{2}{*}{}} \\
\hline & & \\
\hline \multirow[b]{3}{*}{\begin{tabular}{l}
-- Rl 10-29: Support available RB set indicator fiel
dci-AvailableRB-Set-rl6 \\
-- R1 10-30: Support channel occupancy duration indi \\
dci-ChOccupancyDuration-rl6
\end{tabular}} & ENUMERATED [supported] & \\
\hline & & \\
\hline & & \\
\hline \multicolumn{3}{|l|}{\begin{tabular}{l}
-- R1 10-8: Type B PDSCH length \{3, 5, 6, 8, 9, 10, 11, 12, 13\} without DMRS shift due to CRS collision \\
typeB-PDSCH-length-rl6 \\
ENUMERATED [supported] \\
OPTIONAL,
\end{tabular}} \\
\hline \multicolumn{3}{|l|}{\multirow{2}{*}{\begin{tabular}{l}
searchSpaceSwitchWithDCI-r16 \\
ENUMERATED [supported] \\
OPTIONAL,
\end{tabular}}} \\
\hline & & \\
\hline \multicolumn{3}{|l|}{\multirow{3}{*}{\begin{tabular}{l}
-- R1 10-95: Search space set group switching with implicit PDCCH decoding without DCI 2_0 monitoring \\
searchSpaceSwitchWithoutDCI-rl6 \\
ENUMERATED [supported] \\
OPTIONAL,
\end{tabular}}} \\
\hline & & \\
\hline \multicolumn{3}{|l|}{-- R1 10-9d: Support Search space set group switching capability 2} \\
\hline & ENUMERATED \{supported\} & OPTIONAL, \\
\hline \begin{tabular}{l}
searchSpaceSwitchCapability2-r16 \\
-- R1 10-14: Non-numerical PDSCH to HARQ-ACK timing
\end{tabular} & & \\
\hline \begin{tabular}{l}
non-numericalPDSCH-HARQ-timing-rl6 \\
-- R1 10-15: Enhanced dynamic HARQ codebook
\end{tabular} & ENUMERATED \{supported\} & OPTIONAL, \\
\hline enhancedDynamicHARQ-codebook-rl6 & & OPTIONAL, \\
\hline \multicolumn{3}{|l|}{-- R1 10-16: One-shot HARQ ACK feedback} \\
\hline \multicolumn{3}{|l|}{-- R1 10-17: Multi-PUSCH UL grant} \\
\hline \multicolumn{3}{|l|}{-- Rl 10-26: CSI-RS based RLM for NR-U} \\
\hline csi-RS-RLM-r16 & ENUMERATED [supported] & OPTIONAL, \\
\hline
\end{tabular}

ETSI


--- Page 957  ---


3GPP TS 38.331 version 17.0.0 Release 17
956
ETSI TS 138331 V17.0.0 (2022-05)
```
    dumny ENUMERATED {supported} OPTIONAL,
    -- Rl 10-31: Support of P/SP-CSI-RS reception with CSI-RS-ValidationWith-DCI-rl6 configured
    periodicAndSemi-PersistentCSI-RS-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-3: PRB interlace mapping for PUSCH
    pusch-PRB-interlace-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-3a: PRB interlace mapping for PUCCH
    pucch-FO-Fl-PRB-Interlace-rl6 ENUMERATED {supported} OPTIONAL,
    -- R1 10-12: OCC for PRB interlace mapping for PF2 and PF3
    occ-PRB-PF2-PF3-r16 ENUMERATED {supported} OPTIONAL,
    -- R1 10-13a: Extended CP range of more than one symbol for CG-PUSCH
    extCP-rangeCG-PUSCH-r16 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-18: Configured grant with retransmission in CG resources
    configuredGrantWithReTx-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-21a: Support using ED threshold given by gNB for UL to DL COT sharing
    ed-Threshold-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-21b: Support UL to DL COT sharing
    ul-DL-COT-Sharing-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl lo-24: CG-UCI multiplexing with HARQ ACK
    mux-CG-UCI-HARQ-ACK-rl6 ENUMERATED {supported} OPTIONAL,
    -- Rl 10-28: Configured grant with Rel-16 enhanced resource configuration
    cg-resourceConfig-rl6 ENUMERATED {supported} OPTIONAL
}
SharedSpectrumChAccessParamsPerBand-vl630 ::= SEQUENCE [
    -- R4 4-1: DL reception in intra-carrier guardband.
    dl-ReceptionIntraCellGuardband-rl6 ENUMERATED {supported} OPTIONAL,
    -- R4 4-2: DL reception when gNB does not transmit on all RB sets of a carrier as a result of LBT
    dl-ReceptionLBT-subsetRB-r16 ENUMERATED {supported} OPTIONAL
}
SharedSpectrumChAccessParamsPerBand-v1640::= SEQUENCE [
    -- 10-26b(1-4): CSI-RS based RRM measurement with associated SS-block
    csi-RSRP-AndRSRQ-MeasWithSSB-r16 ENUMERATED {supported} OPTIONAL,
    -- 10-26c(1-5): CSI-RS based. RRM measurement without associated SS-block
    csi-RSRP-AndRSRQ-MeasWithoutSSB-r16 ENUMERATED {supported} OPTIONAL,
    -- 10-26d(1-6) : CSI-RS based. RS-SINR measurement
    csi-SINR-Meas-r16 ENUMERATED {supported} OPTIONAL,
    -- 10-26e(1-8): RLM based on a mix of SS block and CSI-RS signals within active BWP
    ssb-AndCSI-RS-RLM-rl6 ENUMERATED {supported} OPTIONAL,
    -- 10-26f(1-9): CSI-RS based contention free RA for HO
    csi-RS-CFRA-ForHO-rl6 ENUMERATED {supported} OPTIONAL
}
SharedSpectrumChAccessParamsPerBand-vl650 ::= SEQUENCE {
    -- Extension of Rl 10-9 capability to configure up to 16 instead of 4 cells or cell groups, respectively
    extendedSearchSpaceSwitchWithDCI-r16 ENUMERATED {supported} OPTIONAL
}
-- TAG-SHAREDSPECTRUMCHACCESSPARAMSPERBAND-STOP
-- ASNISTOP
```


ETSI


--- Page 958  ---


3GPP TS 38.331 version 17.0.0 Release 17
957
ETSI TS 138331 V17.0.0 (2022-05)
6.3.4 Other information elements
- Absolute TimeInfo

The IE AbsoluteTimeInfo indicates an absolute time in a format YY-MM-DD HH:MM:SS and using BCD encoding. The first/leftmost bit of the bit string contains the most significant bit of the most significant digit of the year and so on.

AbsoluteTimeInfo information element
```
-- ASNISTART
-- TAG-ABSOLUTETIMEINFO-START
AbsoluteTimeInfo-rl6 ::= BIT STRING (SIZE (48))
-- TAG-ABSOLUTETIMEINFO-STOP
-- ASNISTOP
```


AppLayerMeasConfig
The IE AppLayerMeasConfig indicates configuration of application layer measurements.
AppLayerMeasConfig information element
```
-- ASNISTART
-- TAG-APPLAYERMEASCONFIG-START
AppLayerMeasConfig-rl7 ::= SEQUENCE \
```

```
    rrc-SegAllowed-rl7 ENUMERATED {enabled}
    ...
}
MeasConfigAppLayer-rl7 ::= SEQUENCE \
    measConfigAppLayerId-rl7 MeasConfigAppLayerId-rl7,
    measConfigAppLayerContainer-rl7
    serviceType-rl7
    pauseReporting
    transmissionOfSessionStartStop
    ran-VisibleParameters-rl7
    ...
}
RAN-VisibleParameters-rl7 := SEQUENCE {
    ran-VisiblePeriodicity
    numberOfBufferLevelEntries
    reportInitialPlayOutDelay
    ...
```


ETSI


--- Page 959  ---


3GPP TS 38.331 version 17.0.0 Release 17
958
ETSI TS 138331 V17.0.0 (2022-05)
\}

-- TAG-APPLAYERMEASCONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline AppLayerMeasConfig field descriptions \\
\hline \begin{tabular}{l}
measConfigAppLayerContainer \\
The field contains configuration of application layer measurements, see Annex L (normative) in TS 26.247 [68], clause 16.5 in TS 26.114 [69] and TS 26.118 [70].
\end{tabular} \\
\hline \begin{tabular}{l}
numberOfBufferLevelEntries \\
The field contains the maximum number of buffer level entries that can be reported for RAN visible application layer measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
pauseReporting \\
The field indicates whether the transmission of measReportAppLayerContainer is paused or not.
\end{tabular} \\
\hline \begin{tabular}{l}
ran-VisiblePeriodicity \\
The field indicates the periodicity of RAN visible reporting. Value ms 120 indicates 120 ms , value ms 240 indicates 240 ms and so on. If no value is indicated and the UE is configured with RAN visible reporting, the same periodicity as indicated in the measConfigAppLayerContainer is used.
\end{tabular} \\
\hline \begin{tabular}{l}
reportinitialPlayoutDelay \\
The field indicates whether the UE shall report Initial Playout Delay for RAN visible application layer measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
rrc-SegAllowed \\
This field, when received in MeasConfigAappLayerMeasConfigList, indicates that RRC segmentation of MeasurementReportAppLayer is allowed. It may be present only if the UE supports RRC message segmentation.
\end{tabular} \\
\hline \begin{tabular}{l}
serviceType \\
Indicates the type of application layer measurement. Value streaming indicates Quality of Experience Measurement Collection for streaming services (see TS 26.247 [68]), value mtsi indicates Quality of Experience Measurement Collection for MTSI (see TS 26.114 [69]). value vr indicates Quality of Experience Measurement Collection for VR service (see TS 26.118 [70]). The network always configures service Type when application layer measurements are initially configured and at fullConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
transmissionOfSessionStartStop \\
The field indicates whether the UE shall transmit indications when sessions in the application layer start and stop. The UE transmits a session start indication upon configuration of this field if a session already has started in the application layer.
\end{tabular} \\
\hline
\end{tabular}
- AreaConfiguration

The AreaConfiguration indicates area for which UE is requested to perform measurement logging. If not configured, measurement logging is not restricted to specific cells or tracking areas but applies as long as the RPLMN is contained in plmn-IdentityList stored in VarLogMeasReport.

AreaConfiguration information element
```
-- ASNISTART
-- TAG-AREACONFIGURATION-START
AreaConfiguration-rl6 ::= SEQUENCE \
    areaConfig-rl6
    interFreqTargetList-rl6
}
AreaConfiguration-vl700 ::= SEQUENCE \
    areaConfig-rl7
    interFreqTargetList-rl7
    AreaConfig-rl6,
    SEQUENCE (SIZE (l..maxFreq)) OF InterFreqTargetInfo-rl6 OPTIONAL -- Need R
SEQUENCE \
    AreaConfig-rl6
    OPTIONAL, -- Need R
    SEQUENCE (SIZE (l..maxFreq)) OF InterFreqTargetInfo-rl6
OPTIONAL, -- Need. R
```


ETSI


--- Page 960  ---


3GPP TS 38.331 version 17.0.0 Release 17
959
ETSI TS 138331 V17.0.0 (2022-05)
```
}
AreaConfig-rl6 ::= CHOICE \
    cellGlobalIdList-rl6 CellGlobalIdList-rl6,
    trackingAreaCodeList-rl6 TrackingAreaCodeList-rl6,
    trackingAreaIdentityList-rl6 TrackingAreaIdentityList-rl6
}
InterFreqTargetInfo-rl6 ::= SEQUENCE \
    dl-CarrierFreq-rl6 ARFCN-ValueNR,
    cellList-rl6 SEQUENCE (SIZE (1..32)) OF PhysCellId OPTIONAL -- Need R
}
CellGlobalIdList-rl6 ::= SEQUENCE (SIZE (l..32)) OF CGI-Info-Logging-rl6
TrackingAreaCodeList-rl6 ::= SEQUENCE (SIZE (1..8)) OF TrackingAreaCode
TrackingAreaIdentityList-rl6 ::= SEQUENCE (SIZE (l..8)) OF TrackingAreaIdentity-rl6
TrackingAreaIdentity-rl6 ::= SEQUENCE \
    plmn-Identity-rl6 PLMN-Identity,
    trackingAreaCode-rl6 TrackingAreaCode
}
-- TAG-AREACONFIGURATION-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline AreaConfiguration field descriptions \\
\hline \begin{tabular}{l}
InterFreqTargetinfo \\
If configured, it indicates the neighbouring frequency and cells for which UE is requested to perform measurement logging. It can include sync raster or non-sync raster frequencies.
\end{tabular} \\
\hline
\end{tabular}
- BT-NameList

The IE BT-NameList is used to indicate the names of the Bluetooth beacon which the UE is configured to measure.
BT-NameList information element
```
-- ASNISTART
-- TAG-BTNAMELIST-START
BT-NameList-rl6 ::= SEQUENCE (SIZE (l..maxBT-Name-rl6)) OF BT-Name-rl6
BT-Name-rl6 ::= OCTET STRING (SIZE (1..248))
-- TAG-BTNAMELIST-STOP
-- ASNISTOP
```


ETSI


--- Page 961  ---


3GPP TS 38.331 version 17.0.0 Release 17
960
ETSI TS 138331 V17.0.0 (2022-05)

BT-NameList field descriptions
bt-Name
If configured, the UE only performs Bluetooth measurements according to the names identified. For each name, it refers to LOCAL NAME defined in Bluetooth specification [51].

DedicatedInfoF1c
The IE DedicatedInfoFIc is used to transfer [AB-DU specific F1-C related information between the network and the [AB node. The carried information consists of F1AP message encapsulated in SCTP/IP or F1-C related (SCTP)/IP packet, see TS 38.472 [64]. The RRC layer is transparent for this information.

DedicatedInfoF1c information element
-- ASNISTART
-- TAG-DEDICATEDINFOFIC-START
DedicatedInfoFlc-rl7 : := OCTET STRING
-- TAG-DEDICATEDINFOFIC-STOP
-- ASNISTOP
- EUTRA-AllowedMeasBandwidth

The IE EUTRA-AllowedMeasBandwidth is used to indicate the maximum allowed measurement bandwidth on a carrier frequency as defined by the parameter Transmission Bandwidth Configuration " \( \mathrm{N}_{\mathrm{RB}} \) " in TS 36.104 [33]. The values \( m b w 6, m b w 15, m b w 25, m b w 50, m b w 75, m b w 100 \) indicate 6, 15, 25, 50,75 and 100 resource blocks, respectively.

EUTRA-AllowedMeasBandwidth information element
-- ASNISTART
-- TAG-EUTRA-ALLOWEDMEASBANDWIDTH-START
EUTRA-AllowedMeasBandwidth ::= ENUMERATED \{mbw6, mbw15, mbw25, mbw50, mbw75, mbwl00\}
-- TAG-EUTRA-ALLOWEDMEASBANDWIDTH-STOP
-- ASNISTOP
- EUTRA-MBSFN-SubframeConfigList

The IE EUTRA-MBSFN-SubframeConfigList is used to define an E-UTRA MBSFN subframe pattern (for the purpose of NR rate matching).
EUTRA-MBSFN-SubframeConfigList information element

-- ASNISTART
ETSI


--- Page 962  ---


3GPP TS 38.331 version 17.0.0 Release 17
961
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-EUTRA-MBSFN-SUBFRAMECONFIGLIST-START
EUTRA-MBSFN-SubframeConfigList ::= SEQUENCE (SIZE (l..maxMBSFN-Allocations)) OF EUTRA-MBSFN-SubframeConfig
EUTRA-MBSFN-SubframeConfig ::= SEQUENCE {
    radioframeAllocationPeriod ENUMERATED {nl, n2, n4, n8, nl6, n32},
    radioframeAllocationOffset
    subframeAllocationl
        oneFrame
        BIT STRING (SIZE(6)),
    },
    subframeAllocation2 CHOICE \
        oneFrame BIT STRING (SIZE(2)),
        fourframes BIT STRING (SIZE(8))
    }
    ...
}
-- TAG-EUTRA-MBSFN-SUBFRAMECONFIGLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline EUTRA-MBSFN-SubframeConfig field descriptions \\
\hline \begin{tabular}{l}
radioframeAllocationOffset \\
Field as defined in MBSFN-SubframeConfig in TS 36.331 [10].
\end{tabular} \\
\hline \begin{tabular}{l}
radioframeAllocationPeriod \\
Field as defined in MBSFN-SubframeConfig in TS 36.331 [10], where SFN refers to the SFN of the NR serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
subframeAllocation1 \\
Field as defined in MBSFN-SubframeConfig in TS 36.331 [10], where the UE assumes the duplex mode (FDD or TDD) of the NR cell for which the E-UTRA-MBSFNSubframeConfig is provided.
\end{tabular} \\
\hline \begin{tabular}{l}
subframeAllocation2 \\
Field as defined in MBSFN-SubframeConfig-v1430 in TS 36.331 [10], where the UE assumes the duplex mode (FDD or TDD) of the NR cell for which the E-UTRA-MBSFNSubframeConfig is provided.
\end{tabular} \\
\hline
\end{tabular}
- EUTRA-MultiBandInfoList

The IE EUTRA-MultiBandInfoList indicates the list of frequency bands in addition to the band represented by CarrierFreq for which cell reselection parameters are common, and a list of additionalPmax and additionalSpectrumEmission.

EUTRA-MultiBandinfoList information element
```
-- ASNISTART
-- TAG-EUTRA-MULTIBANDINFOLIST-START
EUTRA-MultiBandInfoList ::= SEQUENCE (SIZE (l..maxMultiBands)) OF EUTRA-MultiBandInfo
EUTRA-MultiBandInfo ::= SEQUENCE {
    eutra-FreqBandIndicator FreqBandIndicatorEUTRA,
    eutra-NS-PmaxList EUTRA-NS-PmaxList OPTIONAL -- Need R
```


ETSI


--- Page 963  ---


3GPP TS 38.331 version 17.0.0 Release 17
962
ETSI TS 138331 V17.0.0 (2022-05)

\}
-- TAG-EUTRA-MULTIBANDINFOLIST-STOP
-- ASNISTOP
- EUTRA-NS-PmaxList

The IE EUTRA-NS-PmaxList concerns a list of additionalPmax and additionalSpectrumEmission, as defined in TS 36.101 [22], table 6.2.4-1 for UEs neither in CE nor BL UEs and TS 36.101 [22], table 6.2.4E-1 for UEs in CE or BL UEs, for a given frequency band.

EUTRA-NS-PmaxList information element
```
-- ASNISTART
-- TAG-EUTRA-NS-PMAXLIST-START
EUTRA-NS-PmaxList ::=
EUTRA-NS-PmaxValue ::=
    additionalPmax
    additionalSpectrumEmission
}
-- TAG-EUTRA-NS-PMAXLIST-STOP
-- ASNISTOP
```

```
SEQUENCE (SIZE (1..maxEUTRA-NS-Pmax)) OF EUTRA-NS-PmaxValue
SEQUENCE \
    INTEGER (-30..33) OPTIONAL, -- Need R
    INTEGER (1..288) OPTIONAL -- Need R
    INTEGER (1..288)
            SEQUENCE (SIZE (1..maxEUTRA-NS-Pmax)) OF EUTRA-NS-PmaxValue
```

```
lllellell
```

```
        CE C(
```

            P
        L
    "
T
- EUTRA-PhysCellld

The IE EUTRA-PhysCellld is used to indicate the physical layer identity of the cell, as defined in TS 36.211 [31].
EUTRA-PhysCellid information element
```
-- ASNISTART
-- TAG-EUTRA-PHYSCELLID-START
EUTRA-PhysCellId ::=
-- TAG-EUTRA-PHYSCELLID-STOP
-- ASNISTOP
```


ETSI


--- Page 964  ---


3GPP TS 38.331 version 17.0.0 Release 17
963
ETSI TS 138331 V17.0.0 (2022-05)
- EUTRA-PhysCellIdRange

The IE EUTRA-PhysCellIdRange is used to encode either a single or a range of physical cell identities. The range is encoded by using a start value and by indicating the number of consecutive physical cell identities (including start) in the range. For fields comprising multiple occurrences of EUTRA-PhysCellldRange, NW may configure overlapping ranges of physical cell identities.

EUTRA-PhysCellldRange information element
```
-- ASNISTART
-- TAG-EUTRA-PHYSCELLIDRANGE-START
EUTRA-PhysCellIdRange ::= SEQUENCE {
    start
    EUTRA-PhysCellId,
            n n12 , n16, n24, n32, n48, n64, n84, n96,
}
-- TAG-EUTRA-PHYSCELLIDRANGE-STOP
-- ASN1STOP
```

- EUTRA-PresenceAntennaPort1

The IE EUTRA-PresenceAntennaPortl is used to indicate whether all the neighbouring cells use Antenna Port 1. When set to true, the UE may assume that at least two cellspecific antenna ports are used in all neighbouring cells.

EUTRA-PresenceAntennaPort1 information element
-- ASNISTART
-- TAG-EUTRA-PRESENCEANTENNAPORTI-START
EUTRA-PresenceAntennaPortl : :=
BOOLEAN
-- TAG-EUTRA-PRESENCEANTENNAPORTI-STOP
-- ASNISTOP
- EUTRA-Q-OffsetRange

The IE EUTRA-Q-OffsetRange is used to indicate a cell, or frequency specific offset to be applied when evaluating triggering conditions for measurement reporting. The value in dB . Value \( d B-24 \) corresponds to -24 dB , value \( d B-22 \) corresponds to -22 dB and so on.

EUTRA-Q-OffsetRange information element
-- ASNISTART
-- TAG-EUTRA-Q-OFFSETRANGE-START

ETSI


--- Page 965  ---


3GPP TS 38.331 version 17.0.0 Release 17
964
ETSI TS 138331 V17.0.0 (2022-05)
```
EUTRA-Q-OffsetRange ::=
```

```
ENOMERATED {
    dB-24, dB-22, dB-20, dB-18, dB-16, dB-14,
    dB-12, dB-10, dB-8, dB-6, dB-5, dB-4, dB-3,
    dB-2, dB-1, dB0, dB1, dB2, dB3, dB4, dB5,
    dB6, dB8, dBl0, dBl2, dBl4, dBl6, dBl8,
    dB20, dB22, dB24}
```

```
-- TAG-EUTRA-Q-OFFSETRANGE-STOP
-- ASNISTOP
```

- IAB-IP-Address

The IE IAB-IP-Address is used to indicate the IP address/prefix.
IAB-IP-Address information element
```
-- ASNISTART
-- TAG-IABIPADDRESS-START
IAB-IP-Address-r16 ::= CHOICE {
    iPv4-Address-rl6 BIT STRING (SIZE(32)),
    iPv6-Address-rl6 BIT STRING (SIZE(128)),
    iPv6-Prefix-rl6 BIT STRING (SIZE(64)),
    ...
}
-- TAG-IABIPADDRESS-STOP
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline & IAB-IP-Address field descriptions \\
\hline \begin{tabular}{l}
iPv4-Address \\
This field is used to provide the allocated IPv4 address.
\end{tabular} & \\
\hline \begin{tabular}{l}
iPv6-Address \\
This field is used to provide the allocated IPv6 address.
\end{tabular} & \\
\hline \begin{tabular}{l}
iPv6-Prefix \\
This field is used to provide the allocated IPv6 prefix.
\end{tabular} & \\
\hline
\end{tabular}
- IAB-IP-Addressindex

The IE IAB-IP-AddressIndex is used to identify a configuration of an IP address.
IAB-IP-Addressindex information element
-- ASNISTART
-- TAG-IABIPADDRESSINDEX-START

ETSI


--- Page 966  ---


3GPP TS 38.331 version 17.0.0 Release 17
965
ETSI TS 138331 V17.0.0 (2022-05)
```
IAB-IP-AddressIndex-r16 ::= INTEGER (1..maxIAB-IP-Address-r16)
-- TAG-IABIPADDRESSINDEX-STOP
-- ASNISTOP
```

- IAB-IP-Usage

The IE IAB-IP-Usage is used to indicate the usage of the assigned IP address/prefix.
IAB-IP-Usage information element
```
-- ASNISTART
-- TAG-IAB-IP-USAGE-START
IAB-IP-Usage-rl6 ::= ENUMERATED {fl-C, fl-U, non-Fl, spare}
-- TAG-IAB-IP-USAGE-STOP
-- ASNISTOP
```


LoggingDuration
The LoggingDuration indicates the duration for which UE is requested to perform measurement logging. Value min10 corresponds to 10 minutes, value min20 corresponds to 20 minutes and so on.

LoggingDuration information element
```
-- ASNISTART
-- TAG-LOGGINGDURATION-START
LoggingDuration-rl6 ::= ENUMERATED {
    min10, min20, min40, min60, min90, min120, spare2, sparel}
-- TAG-LOGGINGDURATION-STOP
-- ASNISTOP
```

- LoggingInterval

The LoggingInterval indicates the periodicity for logging measurement results. Value ms1280 corresponds to 1.28 s , value ms2560 corresponds to 2.56 s and so on. Value infinity means it is equal to the configured value of the LoggingDuration IE.

Logginginterval information element

-- ASNISTART
ETSI


--- Page 967  ---


3GPP TS 38.331 version 17.0.0 Release 17
966
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-LOGGINGINTERVAL-START
```

LoggingInterval-rl6 : := ENUMERATED [
ms320, ms640, ms1280, ms2560, ms5120, ms10240, ms20480,
ms30720, ms40960, ms61440, infinity\}
-- TAG-LOGGINGINTERVAL-STOP
-- ASNISTOP
- LogMeasResultListBT

The IE LogMeasResultListBT covers measured results for Bluetooth.
LogMeasResultListBT information element
-- ASNISTART
-- TAG-LOGMEASRESULTLISTBT-START

LogMeasResultListBT-rl6 : := SEQUENCE (SIZE (l..maxBT-IdReport-rl6)) OF LogMeasResultBT-rl6
LogMeasResultBT-r16::= SEQUENCE [
bt-Addr-rl6 BIT STRING (SIZE (48)),
rssi-BT-rl6 INTEGER (-128..127) OPTIONAL,
⋯
\}
-- TAG-LOGMEASRESULTLISTBT-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline LogMeasResu/tListBT field descriptions \\
\hline \begin{tabular}{l}
bt-Addr \\
This field indicates the Bluetooth public address of the Bluetooth beacon as defined in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
rssi-BT \\
This field provides the beacon received signal strength indicator (RSSI) in dBm as defined in TS 37.355 [49].
\end{tabular} \\
\hline
\end{tabular}
- LogMeasResultListWLAN

The IE LogMeasResultListWLAN covers measured results for WLAN.
LogMeasResultListWLAN information element
-- ASNISTART
-- TAG-LOGMEASRESULTLISTWLAN-START

LogMeasResultListWLAN-rl6 : := SEQUENCE (SIZE (l..MaxWLAN-Id-Report-rl6)) OF LogMeasResultWLAN-rl6

ETSI


--- Page 968  ---


3GPP TS 38.331 version 17.0.0 Release 17
967
ETSI TS 138331 V17.0.0 (2022-05)
```
LogMeasResultWLAN-rl6 ::=
    wlan-Identifiers-rl6
    rssiWLAN-r16
    rtt-WLAN-rl6
    ...
}
WLAN-Identifiers-rl6 ::= SEQUENCE \
    ssid-rl6
    bssid-rl6
    hessid-rl6
    ...
}
WLAN-RSSI-Range-r16 ::= INTEGER(0..141)
WLAN-RTT-rl6 ::= SEQUENCE \
    rttValue-rl6 INTEGER (0..16777215),
    rttUnits-rl6 ENUMERATED \
            microseconds,
            hundredsofnanoseconds,
            tensofnanoseconds,
            nanoseconds,
            tenthsofnanoseconds,
            ...},
    rttAccuracy-rl6 INTEGER (0..255) OPTIONAL,
    \cdots.
}
-- ASNISTOP
-- TAG-LOGMEASRESULTLISTWLAN-STOP
```


\begin{tabular}{|l|}
\hline LogMeasResultListWLAN field descriptions \\
\hline \begin{tabular}{l}
Bssid \\
Basic Service Set Identifier (BSSID) defined in IEEE 802.11-2012 [50].
\end{tabular} \\
\hline \begin{tabular}{l}
Hessid \\
Homogenous Extended Service Set Identifier (HESSID) defined in IEEE 802.11-2012 [50].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 969  ---


3GPP TS 38.331 version 17.0.0 Release 17
968
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline LogMeasResu/tListWLAN field descriptions \\
\hline \begin{tabular}{l}
rssiWLAN \\
Measured WLAN RSSI result in dBm. The IE WLAN-RSSI-Range specifies the value range used in WLAN RSSI measurements and thresholds. Integer value for WLAN RSSI measurements is according to mapping table in TS 36.133[40]. Value 0 corresponds to -infinity, value 1 to -100 dBm , value 2 to -99 dBm , and so on (i.e. in steps of 1 dBm ) until value 140 , which corresponds to 39 dBm , while value 141 corresponds to +infinity.
\end{tabular} \\
\hline \begin{tabular}{l}
rtt-WLAN \\
This field provides the measured roundtrip time between the target device and WLAN AP and optionally the accuracy expressed as the standard deviation of the delay. Units for each of these are \( 1000 \mathrm{~ns}, 100 \mathrm{~ns}, 10 \mathrm{~ns}, 1 \mathrm{~ns} \), and 0.1 ns as defined in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
rttValue \\
This field specifies the Round Trip Time (RTT) measurement between the target device and WLAN AP in units given by the field rttUnits as defined in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
rttUnits \\
This field specifies the Units for the fields rttValue and rttAccuracy. The available Units are \( 1000 \mathrm{~ns}, 100 \mathrm{~ns}, 10 \mathrm{~ns}, 1 \mathrm{~ns} \), and 0.1 ns as defined in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
rttAccuracy \\
This field provides the estimated accuracy of the provided rttValue expressed as the standard deviation in units given by the field rttUnits as defined in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
Ssid \\
Service Set Identifier (SSID) defined in IEEE 802.11-2012 [50].
\end{tabular} \\
\hline \begin{tabular}{l}
Wlan-Identifiers \\
Indicates the WLAN parameters used for identification of the WLAN for which the measurement results are applicable.
\end{tabular} \\
\hline
\end{tabular}
- OtherConfig

The IE OtherConfig contains configuration related to miscellaneous other configurations.
OtherConfig information element
```
-- ASNISTART
-- TAG-OTHERCONFIG-START
OtherConfig ::= SEQUENCE \
    delayBudgetReportingConfig CHOICEl
        release NULL,
        setup SEQUENCE\
            delayBudgetReportingProhibitTimer ENUMERATED {s0, s0dot4, s0dot8, sldot6, s3, s6, sl2, s30}
        }
```

```
}
OtherConfig-vl540 ::= SEQUENCE {
```

```
    ...
}
CandidateServingFreqListNR-r16 ::= SEQUENCE (SIZE (1..maxFreqIDC-r16)) OF ARFCN-ValueNR
OtherConfig-vl610 ::= SEQUENCE \
    idc-AssistanceConfig-r16
    drx-PreferenceConfig-rl6
    maxBW-PreferenceConfig-rl6
    SetupRelease {MaxBW-PreferenceConfig-r16}
    maxCC-PreferenceConfig-rl6
```


ETSI


--- Page 970  ---


3GPP TS 38.331 version 17.0.0 Release 17
969
ETSI TS 138331 V17.0.0 (2022-05)
```
    releasePreferenceConfig-r16 SetupRelease {ReleasePreferenceConfig-rl6}
    referenceTimePreferenceReporting-rl6 ENUMERATED {true}
    btNameList-rl6 SetupRelease {BT-NameList-rl6}
    wlanNameList-rl6 SetupRelease {WLAN-NameList-rl6}
    sensorNameList-rl6 SetupRelease {Sensor-NameList-rl6}
    obtainCommonLocation-rl6 ENUMERATED {true}
    sl-AssistanceConfigNR-rl6 ENUMERATED{true}
}
OtherConfig-vl700 ::= SEQUENCE \
    ul-GapFR2-PreferenceConfig-rl7 ENUMERATED {true}
    musim-GapAssistanceConfig-rl7 SetupRelease {MUSIM-GapAssistanceConfig-rl7}
    musim-LeaveAssistanceConfig-rl7 SetupRelease {MUSIM-LeaveAssistanceConfig-rl7}
    successHO-Config-rl7 SetupRelease {SuccessHO-Config-rl7}
    maxBW-PreferenceConfigFR2-2-rl7 ENUMERATED {true}
    maxMIMO-LayerPreferenceConfigFR2-2-rl7 ENUMERATED {true}
    minSchedulingOffsetPreferenceConfigExt-rl7 ENUMERATED {true}
    rlm-RelaxationReportingConfig-rl7 SetupRelease {RLM-RelaxationReportingConfig-rl7}
    bfd-RelaxationReportingConfig-rl7 SetupRelease {BFD-RelaxationReportingConfig-rl7}
    scg-DeactivationPreferenceConfig-rl7 SetupRelease {SCG-DeactivationPreferenceConfig-rl7}
    rrm-MeasRelaxationReportingConfig-rl7 SetupRelease {RRM-MeasRelaxationReportingConfig-rl7}
}
MUSIM-GapAssistanceConfig-rl7 ::= SEQUENCE \
```

```
}
MUSIM-LeaveAssistanceConfig-rl7 ::= SEQUENCE [
    musim-LeaveWithoutResponseTimer-rl7 ENUMERATED {msl0, ms20, ms40, ms60, ms80, msl00, spare2, sparel}
}
SuccessHO-Config-rl7 ::= SEQUENCE \
```

```
    thresholdPercentageT310-r17 ENUMERATED {p40, p60, p80, spare5, spare4, spare3, spare2, sparel}
    thresholdPercentageT312-r17 ENUMERATED {p20, p40, p60, p80, spare4, spare3, spare2, sparel}
    sourceDAPS-FailureReporting-rl7 ENUMERATED {true}
    ...
}
OverheatingAssistanceConfig ::= SEQUENCE {
    overheatingIndicationProhibitTimer ENUMERATED [s0, s0dot5, sl, s2, s5, s10, s20, s30,
        s60, s90, s120, s300, s600, spare3, spare2, sparel}
}
IDC-AssistanceConfig-rl6 ::= SEQUENCE {
    candidateServingFreqListNR-r16 CandidateServingFreqListNR-rl6 OPTIONAL, -- Need R
    ...
}
DRX-PreferenceConfig-rl6 ::= SEQUENCE \
    drx-PreferenceProhibitTimer-r16 ENUMERATED {
                s0, s0dot5, sl, s2, s3, s4, s5, s6, s7,
```


ETSI


--- Page 971  ---


3GPP TS 38.331 version 17.0.0 Release 17
970
ETSI TS 138331 V17.0.0 (2022-05)
```
                s8, s9, sl0, s20, s30, spare2, sparel}
}
MaxBW-PreferenceConfig-rl6 ::= SEQUENCE \
    maxBW-PreferenceProhibitTimer-rl6 ENUMERATED {
                s0, s0dot5, sl, s2, s3, s4, s5, s6, s7,
                s8, s9, sl0, s20, s30, spare2, sparel}
}
MaxCC-PreferenceConfig-rl6 ::= SEQUENCE \
    maxCC-PreferenceProhibitTimer-rl6 ENUMERATED {
                s0, s0dot5, sl, s2, s3, s4, s5, s6, s7,
                s8, s9, s10, s20, s30, spare2, sparel}
}
MaxMIMO-LayerPreferenceConfig-rl6 ::= SEQUENCE [
    maxMIMO-LayerPreferenceProhibitTimer-rl6 ENUMERATED {
                    s0, s0dot5, sl, s2, s3, s4, s5, s6, s7,
                    s8, s9, sl0, s20, s30, spare2, sparel}
}
MinSchedulingOffsetPreferenceConfig-rl6 ::= SEQUENCE [
    minSchedulingOffsetPreferenceProhibitTimer-rl6 ENUMERATED {
                            s0, s0dot5, sl, s2, s3, s4, s5, s6, s7,
                            s8, s9, sl0, s20, s30, spare2, sparel}
}
ReleasePreferenceConfig-rl6 := SEQUENCE {
    releasePreferenceProhibitTimer-r16 ENUMERATED {
                s0, s0dot5, sl, s2, s3, s4, s5, s6, s7,
                s8, s9, sl0, s20, s30, infinity, sparel},
    connectedReporting ENUMERATED {true}
}
RLM-RelaxationReportingConfig-rl7 ::= SEQUENCE [
    rlm-RelaxtionReportingProhibitTimer ENUMERATED {s0, s0dot5, sl, s2, s5, s10, s20, s30,
            s60, s90, s120, s300, s600, infinity, spare2, sparel}
}
BED-RelaxationReportingConfig-rl7 ::= SEQUENCE [
    ofd-RelaxtionReportingProhibitTimer ENUMERATED {s0, s0dot5, sl, s2, s5, s10, s20, s30,
        s60, s90, sl20, s300, s600, infinity, spare2, sparel}
}
SCG-DeactivationPreferenceConfig-rl7 := SEQUENCE {
    scg-DeactivationPreferenceProhibitTimer-rl7 ENUMERATED {
                        s0, sl, s2, s4, s8, s10, s15, s30,
                            s60, s120, s180, s240, s300, s600, s900, s1800}
}
RRM-MeasRelaxationReportingConfig-rl7 ::= SEQUENCE {
    s-SearchDeltaP-Stationary-rl7 ENUMERATED {dB3, dB6, dB9, dBl2, dBl5, spare3, spare2, sparel},
```

```
                        spare4, spare3, spare2, sparel}
```


ETSI


--- Page 972  ---


3GPP TS 38.331 version 17.0.0 Release 17
971
\}
-- TAG-OTHERCONFIG-STOP
-- ASNISTOP

ETSI


--- Page 973  ---


3GPP TS 38.331 version 17.0.0 Release 17
972
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline OtherConfig field descriptions \\
\hline \begin{tabular}{l}
bfd-RelaxationReportingConfig \\
Configuration for the UE to report the relaxation state of BDF measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateServingFreqListNR \\
Indicates for each candidate NR serving cells, the center frequency around which UE is requested to report IDC issues.
\end{tabular} \\
\hline \begin{tabular}{l}
connectedReporting \\
Indicates that the UE can report a preference to remain in RRC_CONNECTED state following a report to leave RRC_CONNECTED state. If absent, the UE cannot report a preference to stay in RRC_CONNECTED state.
\end{tabular} \\
\hline \begin{tabular}{l}
delayBudgetReportingProhibitTimer \\
Prohibit timer for delay budget reporting. Value in seconds. Value s 0 means prohibit timer is set to 0 seconds, value s 0 dot 4 means prohibit timer is set to 0.4 seconds, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-PreferenceConfig \\
Configuration for the UE to report assistance information to inform the gNB about the UE's DRX preferences for power saving.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-PreferenceProhibitTimer \\
Prohibit timer for DRX preferences assistance information reporting. Value in seconds. Value s 0 means prohibit timer is set to 0 seconds, value sOdot 5 means prohibit timer is set to 0.5 seconds, value s 1 means prohibit timer is set to 1 second and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
idc-AssistanceConfig \\
Configuration for the UE to report assistance information to inform the gNB about UE detected IDC problem.
\end{tabular} \\
\hline \begin{tabular}{l}
maxBW-PreferenceConfig \\
Configuration for the UE to report assistance information to inform the gNB about the UE's preferred bandwidth for power saving.
\end{tabular} \\
\hline \begin{tabular}{l}
maxBW-PreferenceProhibitTimer \\
Prohibit timer for preferred bandwidth assistance information reporting. Value in seconds. Value \( s 0 \) means prohibit timer is set to 0 seconds, value \( s 0 \) dot 5 means prohibit timer is set to 0.5 seconds, value s 1 means prohibit timer is set to 1 second and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
maxCC-PreferenceConfig \\
Configuration for the UE to report assistance information to inform the gNB about the UE's preferred number of carriers for power saving.
\end{tabular} \\
\hline \begin{tabular}{l}
maxBW-PreferenceConfigFR2-2 \\
Configuration for the UE to report assistance information to inform the gNB about the UE's preferred bandwidth for power saving for FR2-2.
\end{tabular} \\
\hline \begin{tabular}{l}
maxCC-PreferenceProhibitTimer \\
Prohibit timer for preferred number of carriers assistance information reporting. Value in seconds. Value \( \mathbf{s} \mathbf{0} \) means prohibit timer is set to 0 seconds, value s0dot5 means prohibit timer is set to 0.5 seconds, value s 1 means prohibit timer is set to 1 second and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
maxMIMO-LayerPreferenceConfig \\
Configuration for the UE to report assistance information to inform the gNB about the UE's preferred number of MIMO layers for power saving.
\end{tabular} \\
\hline \begin{tabular}{l}
maxMIMO-LayerPreferenceConfigFR2-2 \\
Configuration for the UE to report assistance information to inform the gNB about the UE's preferred number of MIMO layers for power saving for FR2-2.
\end{tabular} \\
\hline \begin{tabular}{l}
maxMMMO-LayerPreferenceProhibitTimer \\
Prohibit timer for preferred number of number of MIMO layers assistance information reporting. Value in seconds. Value \( s 0 \) means prohibit timer is set to 0 seconds, value sodot 5 means prohibit timer is set to 0.5 seconds, value \( s 1 \) means prohibit timer is set to 1 second and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
minSchedulingOffsetPreferenceConfig \\
Configuration for the UE to report assistance information to inform the gNB about the UE's preferred minimumSchedulingOffset value for cross-slot scheduling for power saving.
\end{tabular} \\
\hline \begin{tabular}{l}
minSchedulingOffsetPreferenceConfigExt \\
Configuration for the UE to report assistance information to inform the gNB about the UE's preferred minimumSchedulingOffset value for cross-slot scheduling for power saving for SCS 480 kHz and/or 960 kHz .
\end{tabular} \\
\hline \begin{tabular}{l}
minSchedulingOffsetPreferenceProhibitTimer \\
Prohibit timer for preferred minimumSchedulingOffset assistance information reporting. Value in seconds. Value \( s 0 \) means prohibit timer is set to 0 seconds, value \( s 0 \) dot 5 means prohibit timer is set to 0.5 seconds, value s 1 means prohibit timer is set to 1 second and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-GapAssistanceConfig \\
Configuration for the UE to report assistance information without leaving RRC_CONNECTED for MUSIM purpose.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 974  ---


3GPP TS 38.331 version 17.0.0 Release 17
973
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
musim-GapProhibitTimer \\
Prohibit timer for MUSIM assistance information reporting without leaving RRC_CONNECTED for MUSIM purpose.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-LeaveAssistanceConfig \\
Configuration for the UE to report assistance information for leaving RRC_CONNECTED for MUSIM purpose.
\end{tabular} \\
\hline \begin{tabular}{l}
musim-LeaveWithoutResponseTimer \\
Indicates the timer for to leave RRC_CONNECTED without network response. When T346g expires, UE autonomously leaves RRC_CONNECTED state and enters RRC_IDLE for MUSIM purpose.
\end{tabular} \\
\hline \begin{tabular}{l}
obtainCommonLocation \\
Requests the UE to attempt to have detailed location information available using GNSS. NR configures the field if includeCommonLocation/nfo is configured for one or more measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
overheatingAssistanceConfig \\
Configuration for the UE to report assistance information to inform the gNB about UE detected internal overheating.
\end{tabular} \\
\hline \begin{tabular}{l}
overheatingindicationProhibitTimer \\
Prohibit timer for overheating assistance information reporting. Value in seconds. Value \( s 0 \) means prohibit timer is set to 0 seconds, value s 0 dot 5 means prohibit timer is set to 0.5 seconds, value s 1 means prohibit timer is set to 1 second and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
reference TimePreferenceReporting \\
If present, the field indicates the UE is configured to provide reference time assistance information.
\end{tabular} \\
\hline \begin{tabular}{l}
releasePreferenceConfig \\
Configuration for the UE to report assistance information to inform the gNB about the UE's preference to leave RRC_CONNECTED state.
\end{tabular} \\
\hline \begin{tabular}{l}
rim-RelaxationReportingConfig \\
Configuration for the UE to report the relaxation state of RLM measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
releasePreferenceProhibitTimer \\
Prohibit timer for release preference assistance information reporting. Value in seconds. Value \( s 0 \) means prohibit timer is set to 0 seconds, value s 0 dot 5 means prohibit timer is set to 0.5 seconds, value s 1 means prohibit timer is set to 1 second and so on. Value infinity means that once a UE has reported a release preference, the UE cannot report a release preference again during the RRC connection.
\end{tabular} \\
\hline \begin{tabular}{l}
s-SearchDeltaP-Stationary \\
Parameter "SsearchDeltaP-StationaryConnected" in 5.7.4.4. Value dB3 corresponds to \( 3 \mathrm{~dB}, \mathrm{~dB} 6 \) corresponds to 6 dB and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
scg-DeactivationPreferenceConfig \\
Configuration of the UE to indicate its preference for SCG deactivation.
\end{tabular} \\
\hline \begin{tabular}{l}
scg -StatePreferenceProhibitTimer \\
Prohibit timer for UE indication of its preference for SCG deactivation. Value in seconds. Value \( s 0 \) means prohibit timer is set to 0 seconds, value \( s 1 \) means prohibit timer is set to 1 second and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sensorNameList \\
Configuration for the UE to report measurements from specific sensors.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-AssistanceConfigNR \\
Indicate whether UE is configured to provide configured grant assistance information for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
sourceDAPS-FailureReporting \\
This field indicates whether the UE shall generate the SHR upon successfully completing the DAPS handover to the target cell and if a radio link failure was experienced in the source PCell while executing the DAPS handover. This field is set in the otherConfig configured by the source cell of the DAPS handover.
\end{tabular} \\
\hline \begin{tabular}{l}
successHO-Config \\
Configuration for the UE to report the successful handover information to the network.
\end{tabular} \\
\hline \begin{tabular}{l}
t-SearchDeltaP-Stationary \\
Parameter "T \( { }_{\text {searchDeltaP-StationaryConnected" }} \) in 5.7.4.4. Value in seconds. Value s5 means 5 seconds, value s10 means 10 seconds and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
thresholdPercentageT304 \\
This field indicates the threshold for the ratio in percentage between the elapsed T304 timer and the configured value of the T304 timer. Value p40 corresponds to 40\%, value p60 corresponds to 60\% and so on. This field is set in the otherConfig configured by the target cell of the handover.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 975  ---


3GPP TS 38.331 version 17.0.0 Release 17
974
ETSI TS 138331 V17.0.0 (2022-05)

thresholdPercentageT310
This field indicates the threshold for the ratio in percentage between the elapsed T310 timer and the configured value of the T310 timer. Value p40 corresponds to 40\%, value p60 corresponds to 60\% and so on. This field is set in the otherConfig configured by the source cell of the handover.
thresholdPercentageT312
This field indicates the threshold for the ratio in percentage between the elapsed T312 timer and the configured value(s) of the T312 timer. Value p20 corresponds to \( 20 \% \), value p40 corresponds to 40\% and so on. This field is set in the otherConfig configured by the source cell of the handover.
ul-GapFR2-PreferenceConfig
Indicates whether UE is configured to request for FR2 UL gap activation/deactivation and preferred FR2 UL gap pattern.

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline maxBW & This field is optionally present, need R, if maxBW-PreferenceConfig-r16 is setup; otherwise it is absent, need R. \\
\hline maxMIMO & This field is optionally present, need R, if maxMIMO-LayerPreferenceConfig-r16 is setup; otherwise it is absent, need R. \\
\hline minOffset & This field is optionally present, need R, if minSchedulingOffsetPreferenceConfig-r16 is setup; otherwise it is absent, need R. \\
\hline
\end{tabular}
- PhysCellidUTRA-FDD

The IE PhysCellIdUTRA-FDD is used to indicate the physical layer identity of the cell, i.e the primary scrambling code, as defined in TS 25.331 [45].
PhysCellldUTRA-FDD information element
-- ASNISTART
-- TAG-PHYSCELLIDUTRA-FDD-START

PhysCellIdUTRA-FDD-rl6 : := INTEGER (0. .5l1)
-- TAG-PHYSCELLIDUTRA-FDD-STOP
-- ASNISTOP
- \( \quad \) RRC-Transaction/dentifier

The IE RRC-TransactionIdentifier is used, together with the message type, for the identification of an RRC procedure (transaction).
RRC-Transaction/dentifier information element
-- ASNISTART
-- TAG-RRC-TRANSACTIONIDENTIFIER-START
RRC-TransactionIdentifier : : INTEGER (0.3)
-- TAG-RRC-TRANSACTIONIDENTIFIER-STOP
-- ASNISTOP

ETSI


--- Page 976  ---


3GPP TS 38.331 version 17.0.0 Release 17
975
ETSI TS 138331 V17.0.0 (2022-05)
- Sensor-NameList

The IE Sensor-NameList is used to indicate the names of the sensors which the UE is configured to measure.
Sensor-NameList information element
```
-- ASNISTART
-- TAG-SENSORNAMELIST-START
Sensor-NameList-rl6 ::= SEQUENCE {
    measUncomBarPre-rl6 ENUMERATED {true} OPTIONAL, -- Need. R
    measUeSpeed ENUMERATED {true} OPTIONAL, -- Need. R
    measUeOrientation ENUMERATED {true} OPTIONAL -- Need R
}
-- TAG-SENSORNAMELIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline Sensor-NameList field descriptions \\
\hline \begin{tabular}{l}
measUncomBarPre \\
If configured, the UE reports the uncompensated Barometeric pressure measurement as defined in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
measUeSpeed \\
If configured, the UE reports the UE speed measurement as defined in TS 37.355 [49].
\end{tabular} \\
\hline \begin{tabular}{l}
measUeOrientation \\
If configured, the UE reports the UE orientation information as defined in TS 37.355 [49].
\end{tabular} \\
\hline
\end{tabular}
- TraceReference

The TraceReference contains parameter Trace Reference as defined in TS 32.422 [52].
TraceReference information element
```
-- ASNISTART
-- TAG-TRACEREFERENCE-START
TraceReference-r16 ::= SEQUENCE {
    plmn-Identity-rl6 PLMN-Identity,
    traceld-rl6 OCTET STRING (SIZE (3))
}
-- TAG-TRACEREFERENCE-STOP
-- ASNISTOP
```


ETSI


--- Page 977  ---


3GPP TS 38.331 version 17.0.0 Release 17
976
ETSI TS 138331 V17.0.0 (2022-05)

UE-MeasurementsAvailable
The IE UE-MeasurementsAvailable is used to indicate all relevant available indicators for UE measurements.
UE-MeasurementsAvailable information element
```
-- ASNISTART
-- TAG-UE-MeasurementsAvailable-START
UE-MeasurementsAvailable-rl6 ::= SEQUENCE {
    logMeasAvailable-rl6
    logMeasAvailableBT-rl6
    logMeasAvailableWLAN-r16
    connEstFailInfoAvailable-rl6
    rlf-InfoAvailable-rl6
    ...;
    [ [
    successHO-InfoAvailable-rl7
    sigLogMeasConfigAvailable-rl7
    ]]
}
-- TAG-UE-MeasurementsAvailable-STOP
-- ASNISTOP
```

- UTRA-FDD-Q-OffsetRange

The IE UTRA-FDD-Q-OffsetRange is used to indicate a frequency specific offset to be applied when evaluating triggering conditions for measurement reporting. The value is in dB . Value \( d B-24 \) corresponds to -24 dB , value \( d B-22 \) corresponds to -22 dB and so on.

UTRA-FDD-Q-OffsetRange information element
```
-- ASNISTART
-- TAG-UTRA-FDD-Q-OFFSETRANGE-START
UTRA-FDD-Q-OffsetRange-rl6 ::=
```

```
ENOMERATED {
    dB-24, dB-22, dB-20, dB-18, dB-16, dB-14,
    dB-12, dB-10, dB-8, dB-6, dB-5, dB-4, dB-3,
    dB-2, dB-l, dB0, dBl, dB2, dB3, dB4, dB5,
    dB6, dB8, dBl0, dBl2, dBl4, dBl6, dBl8,
    dB20, dB22, dB24}
```

-- TAG-UTRA-FDD-Q-OFFSETRANGE-STOP
-- ASNISTOP

ETSI


--- Page 978  ---


3GPP TS 38.331 version 17.0.0 Release 17
977
ETSI TS 138331 V17.0.0 (2022-05)
- VisitedCellInfoList

The IE VisitedCellInfoList includes the mobility history information of maximum of 16 most recently visited primary cells or time spent in any cell selection state and/or camped on any cell state in NR or E-UTRA and, in case of Dual Connectivity, the mobility history information of maxPSCellHistory most recently visited primary secondary cell group cells per visited primary cell. The most recently visited cell is stored first in the list. The list includes cells visited in RRC_IDLE, RRC_INACTIVE and RRC_CONNECTED states for NR and RRC_IDLE and RRC_CONNECTED for E-UTRA.

VisitedCellinfoList information element
```
-- ASNISTART
-- TAG-VISITEDCELLINFOLIST-START
VisitedCellInfoList-rl6 ::= SEQUENCE (SIZE (l..maxCellHistory-rl6)) OF VisitedCellInfo-rl6
VisitedCellInfo-rl6 ::= SEQUENCE {
    visitedCellId-rl6 CHOICE {
        nr-CellId-rl6 CHOICE {
            cgi-Info CGI-Info-Logging-rl6,
            pci-arfcn-rl6 SEQUENCE \
                physCellId-rl6 PhysCellId,
                carrierFreq-rl6 ARFCN-ValueNR
            }
        },
        eutra-CellId-rl6 CHOICE {
            cellGlobalId-rl6 CGI-InfoEUTRA,
            pci-arfcn-rl6 SEQUENCE {
                physCellId-rl6 EUTRA-PhysCellId,
                carrierFreq-rl6 ARFCN-ValueEUTRA
            }
        }
    } ti
    timefiONAL,
    ...;
    [ [
    visitedPSCellInfoList-rl7 VisitedPSCellInfoList-rl7 OPTIONAL
    ]]
}
VisitedPSCellInfoList-rl7 ::= SEQUENCE (SIZE (l..maxPSCellHistory-rl7)) OF VisitedPSCellInfo-rl7
VisitedPSCellInfo-rl7 := SEQUENCE {
    visitedCellId-rl7 CHOICE {
        nr-CellId-rl7 CHOICE {
            cgi-Info-rl7 CGI-Info-Logging-rl6,
            pci-arfcn-rl7 SEQUENCE {
                physCellId-rl7 PhysCellId,
                carrierFreq-rl7 ARFCN-ValueNR
            }
        },
        eutra-CellId-rl7 CHOICE [
            cellGlobalId-rl7 CGI-InfoEUTRALogging,
            pci-arfcn-rl7 SEQUENCE {
```


ETSI


--- Page 979  ---


3GPP TS 38.331 version 17.0.0 Release 17
978
ETSI TS 138331 V17.0.0 (2022-05)
```
                physCellId-rl7 EUTRA-PhysCellId,
            carrierFreq-rl7 ARFCN-ValueEUTRA
            }
        }
    }
    timeSpent-rl7 INTEGER (0.4095),
    ...
}
-- TAG-VISITEDCELLINFOLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline VisitedCellinfoList field descriptions \\
\hline \begin{tabular}{l}
timeSpent \\
This field indicates the duration of stay in the cell or in any cell selection state and/or camped on any cell state in NR or E-UTRA approximated to the closest second. If the duration of stay exceeds 4095s, the UE shall set it to 4095s.
\end{tabular} \\
\hline \begin{tabular}{l}
visitedCellid \\
This field indicates the visited cell id including NR and E-UTRA cells.
\end{tabular} \\
\hline
\end{tabular}
- WLAN-NameList

The IE WLAN-NameList is used to indicate the names of the WLAN AP for which the UE is configured to measure.
WLAN-NameList information element
```
-- ASNISTART
-- TAG-WLANNAMELIST-START
WLAN-NameList-rl6 ::= SEQUENCE (SIZE (1..maxWLAN-Name-rl6)) OF WLAN-Name-rl6
WLAN-Name-rl6 ::= OCTET STRING (SIZE (1..32))
-- ASNISTOP
-- TAG-WLANNAMELIST-STOP
```


WLAN-NameList field descriptions
WLAN-Name
If configured, the UE only performs WLAN measurements according to the names identified. For each name, it refers to Service Set Identifier (SSID) defined in IEEE 802.112012 [50].

ETSI


--- Page 980  ---


3GPP TS 38.331 version 17.0.0 Release 17
979
ETSI TS 138331 V17.0.0 (2022-05)
6.3.5 Sidelink information elements
- SL-BWP-Config

The IE SL-BWP-Config is used to configure the UE specific NR sidelink communication on one particular sidelink bandwidth part.
SL-BWP-Config information element
```
-- ASNISTART
-- TAG-SL-BWP-CONFIG-START
SL-BWP-Config-rl6 ::=
    sl-BWP-Id
    sl-BWP-Generic-rl6
    sl-BWP-PoolConfig-rl6
    ...;
    [ [
    sl-BWP-PoolConfigPS-rl7
    sl-BWP-DiscPoolConfig-rl7
    ] ]
}
SL-BWP-Generic-rl6 ::=
    sl-BWP-rl6
    sl-LengthSymbols-rl6
    sl-StartSymbol-rl6
    sl-PSBCH-Config-rl6
    sl-TxDirectCurrentLocation-r16
    ...
}
-- TAG-SL-BWP-CONFIG-STOP
-- ASNISTOP
```

```
SEQUENCE \
    BWP-Id,
    SL-BWP-Generic-rl6 OPTIONAL, -- Need M
    SL-BWP-PoolConfig-rl6 OPTIONAL, -- Need. M
SetupRelease {SL-BWP-PoolConfigPS-rl7} OPTIONAL, -- Need M
SetupRelease {SL-BWP-DiscPoolConfig-rl7} OPTIONAL -- Need M
SEQUENCE \
    BWP
    ENUMERATED {sym7, sym8, sym9, symlo, symll, syml2, syml3, syml4}
    ENOMERATED {sym0, syml, sym2, sym3, sym4, sym5, sym6, sym7}
    SetupRelease {SL-PSBCH-Config-r16}
    INTEGER (0..3301)

\begin{tabular}{ll} 
OPTIONAL, & -- Need. M \\
OPTIONAL, & -- Need. M \\
OPTIONAL, & -- Need. M \\
OPTIONAL, & -- Need. M \\
OPTIONAL, & -- Need. M
\end{tabular}
```


\begin{tabular}{|l|}
\hline SL-BWP-Config field descriptions \\
\hline \begin{tabular}{l}
sl-BWP-DiscPoolConfig \\
This field indicates the NR sidelink discovery dedicated resource pool configurations on the configured sidelink BWP. The total number of RxTx resource pools configured for communication and discovery does not exceed the maximum number of Rx/Tx resource pool for NR sidelink communication (i.e. maxNrofRXPool-r16/maxNrofTXPool-r16).
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BWP-Generic \\
This field indicates the generic parameters on the configured sidelink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
si-BWP-PoolConfig \\
This field indicates the resource pool configurations on the configured sidelink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BWP-ld \\
An identifier for this sidelink bandwidth part.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-BWP-PoolConfigPS \\
This field indicates the resource pool configurations for power saving on the configured sidelink BWP.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 981  ---


3GPP TS 38.331 version 17.0.0 Release 17
980
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-BWP-Generic field descriptions \\
\hline \begin{tabular}{l}
si-LengthSymbols \\
This field indicates the number of symbols used for sidelink in a slot without SL-SSB. A single value can be (pre)configured per sidelink bandwidth part.
\end{tabular} \\
\hline \begin{tabular}{l}
si-StartSymbol \\
This field indicates the starting symbol used for sidelink in a slot without SL-SSB. A single value can be (pre)configured per sidelink bandwidth part.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TxDirectCurrentLocation \\
The sidelink Tx/Rx Direct Current Iocation for the carrier. Only values in the value range of this field between 0 and 3299, which indicate the subcarrier index within the carrier corresponding to the numerology of the corresponding sidelink BWP and value 3300, which indicates "Outside the carrier" and value 3301, which indicates "Undetermined position within the carrier" are used in this version of the specification.
\end{tabular} \\
\hline
\end{tabular}
- SL-BWP-ConfigCommon

The IE SL-BWP-ConfigCommon is used to configure the cell-specific configuration information on one particular sidelink bandwidth part.
SL-BWP-ConfigCommon information element
```
-- ASNISTART
-- TAG-SL-BWP-CONFIGCOMMON-START
SL-BWP-ConfigCommon-rl6 ::= SEQUENCE \
    sl-BWP-Generic-rl6
    SL-BWP-Generic-rl6
    ...;
    [ [
    sl-BWP-PoolConfigCommonPS-rl7 SL-BWP-PoolConfigCommonPS-rl7
    sl-BWP-DiscPoolConfigComon-rl7 SL-BWP-DiscPoolConfigCommon-rl7
    ] ]
}
-- TAG-SL-BWP-CONFIGCOMMON-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-BWP-ConfigCommon field descriptions \\
\hline \begin{tabular}{l}
sl-BWP-DiscPoolConfigCommon \\
This field indicates the NR sidelink discovery dedicated resource pool configurations on the configured sidelink BWP. The total number of RxTx resource pools configured for communication and discovery does not exceed the maximum number of Rx/Tx resource pool for NR sidelink communication (i.e. maxNrofRXPool-r16/maxNrofTXPool-r16).
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BWP-Generic \\
This field indicates the generic parameters on the configured sidelink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BWP-PoolConfigCommon \\
This field indicates the resource pool configurations on the configured sidelink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BWP-PoolConfigCommonPS \\
This field indicates the resource pool configurations for power saving on the configured sidelink BWP.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 982  ---


3GPP TS 38.331 version 17.0.0 Release 17
981
ETSI TS 138331 V17.0.0 (2022-05)
- SL-BWP-DiscPoolConfig

The IE SL-BWP-DiscPoolConfig is used to configure UE specific NR sidelink discovery dedicated resource pool.
SL-BWP-DiscPoo/Config information element
```
-- ASNISTART
-- TAG-SL-BWP-DISCPOOLCONFIG-START
SL-BWP-DiscPoolConfig-rl7 ::=
    sl-DiscRxPool-rl7
    sl-DiscTxPoolSelected-rl7
    sl-DiscTxPoolScheduling-rl7
}
-- TAG-SL-BWP-DISCPOOLCONFIG-STOP
-- ASNISTOP

\begin{tabular}{ll} 
OPTIONAL, & -- Cond. HO \\
OPTIONAL, & -- Need. M \\
OPTIONAL & -- Need. N
\end{tabular}
```


\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline HO & \begin{tabular}{l} 
This field is optionally present, need M, in an RRCReconfiguration message including reconfigurationWithSync; otherwise it is \\
absent, need M.
\end{tabular} \\
\hline
\end{tabular}

The IE SL-BWP-DiscPoolConfigCommon is used to configure the cell-specific NR sidelink discovery dedicated resource pool.
SL-BWP-DiscPoo/ConfigCommon information element
```
-- ASNISTART
-- TAG-SL-BWP-DISCPOOLCONFIGCOMMON-START
SL-BWP-DiscPoolConfigCommon-rl7 ::= SEQUENCE {
```

```
    ...
}
-- TAG-SL-BWP-DISCPOOLCONEIGCOMMON-STOP
-- ASNISTOP
```

```
    ...
}
-- ASNISTOP
```


SL-BWP-DiscPoolConfigCommon
- SL-BWP-DiscPoolConfigCommon

The IE SL-BWP-DiscPoolConfigCommon is used to configure the cell-specific NR sidelink discovery dedicated resource pool.
        SL-BWP-DiscPoo/ConfigCommon information element
- SL-BWP-PoolConfig

The IE SL-BWP-PoolConfig is used to configure NR sidelink communication resource pool.

ETSI


--- Page 983  ---


3GPP TS 38.331 version 17.0.0 Release 17
982
ETSI TS 138331 V17.0.0 (2022-05)

SL-BWP-Poo/Config information element
```
-- ASNISTART
-- TAG-SL-BWP-POOLCONFIG-START
SL-BWP-PoolConfig-rl6 ::=
    sl-RxPool-rl6
    sl-TxPoolSelectedNormal-r16
    sl-TxPoolscheduling-rl6
    sl-TxPoolExceptional-rl6
}
SL-TxPoolDedicated-r16 ::=
    sl-PoolToReleaseList-rl6
    sl-PoolToAddModList-rl6
}
SL-ResourcePoolConfig-rl6 ::=
    sl-ResourcePoolID-r16
    sl-ResourcePool-rl6
}
SL-ResourcePoolID-rl6 :-
-- TAG-SL-BWP-POOLCONFIG-STOP
-- ASNISTOP
    sl-PoolToAddModList-rl6
}
}
```

```
SEQUENCE \
    SEQUENCE (SIZE (l..maxNrofRXPool-r16)) OF SL-ResourcePool-rl6
    SL-TxPoolDedicated-r16
    SL-TxPoolDedicated-r16
    St-ResourcePoolConfig-rl6
```

SEQUENCE 1
    SEQUENCE (SIZE (1..maxNrofTXPool-rl6)) OF SL-ResourcePoolID-rl6 OPTIONAL, -- Need. N
    SEQUENCE (SIZE (l..maXNrofTXPool-rl6)) OF SL-ResourcePoolConfig-rl6 OPTIONAL -- Need N
SEQUENCE 1
SL-ResourcePoolID-rl6,
SL-ResourcePool-rl6

\begin{tabular}{ll} 
OPTIONAL, & -- Cond. HO \\
OPTIONAL, & -- Need. M \\
OPTIONAL, & -- Need. N \\
OPTIONAL & -- Need. M
\end{tabular}
```
PTIONAL, -- Need. N
```

INTEGER (1..maxNrofPoolID-rl6)

\begin{tabular}{|l|}
\hline SL-BWP-PoolConfig field descriptions \\
\hline \begin{tabular}{l}
sl-RxPool \\
Indicates the receiving resource pool on the configured BWP. For the PSFCH related configuration, if configured, will be used for PSFCH transmission/reception. If the field is included, it replaces any previous list, i.e. all the entries of the list are replaced and each of the SL-ResourcePool entries is considered to be newly created.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TxPoolExceptional \\
Indicates the resources by which the UE is allowed to transmit NR sidelink communication in exceptional conditions on the configured BWP. For the PSFCH related configuration, if configured, will be used for PSFCH transmission/reception.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TxPoolScheduling \\
Indicates the resources by which the UE is allowed to transmit NR sidelink communication based on network scheduling on the configured BWP. For the PSFCH related configuration, if configured, will be used for PSFCH transmission/reception.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TxPoolSelectedNormal \\
Indicates the resources by which the UE is allowed to transmit NR sidelink communication by UE autonomous resource selection on the configured BWP. For the PSFCH related configuration, if configured, will be used for PSFCH transmission/reception.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline HO & \begin{tabular}{l} 
This field is optionally present, need M, in an RRCReconfiguration message including reconfigurationWithSync; otherwise it is \\
absent, Need M.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 984  ---


3GPP TS 38.331 version 17.0.0 Release 17
983
ETSI TS 138331 V17.0.0 (2022-05)
- SL-BWP-PoolConfigCommon

The IE SL-BWP-PoolConfigCommon is used to configure the cell-specific NR sidelink communication resource pool.
SL-BWP-Poo/ConfigCommon information element
```
-- ASNISTART
-- TAG-SL-BWP-POOLCONFIGCOMMON-START
SL-BWP-PoolConfigCommon-rl6 ::= SEQUENCE {
    sl-RxPool-rl6
    sl-TxPoolSelectedNormal-rl6
    sl-TxPoolExceptional-rl6
}
-- TAG-SL-BWP-POOLCONFIGCOMMON-STOP
-- ASNISTOP
```

- SL-BWP-PoolConfigCommonPS

The IE SL-BWP-PoolConfigCommonPS is used to configure the cell-specific NR sidelink communication resource pool for power saving.
SL-BWP-Poo/ConfigCommonPS information element
```
-- ASNISTART
-- TAG-SL-BWP-POOLCONFIGCOMMONPS-START
SL-BWP-PoolConfigCommonPS-rl7 ::= SEQUENCE [
```

```
        ...
}
SL-ResourcePoolConfigPS-rl7 ::= SEQUENCE \
    sl-ResourcePoolPS-ID-rl7 SL-ResourcePoolID-rl6,
    sl-ResourcePoolPS-rl7 SL-ResourcePool-rl6
    \cdots
}
-- TAG-SL-BWP-POOLCONFIGCOMMONPS-STOP
-- ASNISTOP
```


ETSI


--- Page 985  ---


3GPP TS 38.331 version 17.0.0 Release 17
984
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-BWP-PoolConfigCommonPS field descriptions \\
\hline \begin{tabular}{l}
sI-ResourcePooIPS \\
Indicates the resource pool for power saving.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ResourcePooIPS-ID \\
Indicates the ID to identify the resource pool for power saving.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-RxPooIPS \\
Indicates the receiving resource pool on the configured BWP for power saving. For the PSFCH related configuration, if configured, will be used for PSFCH transmission/reception.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TxPoolSelectedNormalPS \\
Indicates the resources by which the UE is allowed to transmit NR sidelink communication by UE autonomous resource selection on the configured BWP for power saving. For the PSFCH related configuration, if configured, will be used for PSFCH transmission/reception.
\end{tabular} \\
\hline
\end{tabular}
- SL-BWP-PoolConfigPS

The IE SL-BWP-PoolConfigPS is used to configure the UE-specific NR sidelink communication resource pool for power saving.
SL-BWP-Poo/ConfigPS information element
```
-- ASNISTART
-- TAG-SL-BWP-POOLCONFIGPS-START
SL-BWP-PoolConfigPS-rl7 ::= SEQUENCE {
```

```
    ...
}
SL-TxPoolDedicatedPS-rl7 ::= SEQUENCE {
```

```
}
-- TAG-SL-BWP-POOLCONFIGPS-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-BWP-Poo/ConfigPS field descriptions \\
\hline \begin{tabular}{l}
sI-Poo/ToAddModPS-List \\
Indicates the list of resource pool for power saving to be added or modified.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PoolToReleasePS-List \\
Indicates the list of the resource pool for power saving to be released.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline HO & \begin{tabular}{l} 
This field is optionally present, need M, in an RRCReconfiguration message including reconfigurationWithSync; otherwise it is \\
absent, Need M.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 986  ---


3GPP TS 38.331 version 17.0.0 Release 17
985
ETSI TS 138331 V17.0.0 (2022-05)
- SL-CBR-PriorityTxConfigList

The IE SL-CBR-PriorityTxConfigList indicates the mapping between PSSCH transmission parameter (such as MCS, PRB number, retransmission number, CR limit) sets by using the indexes of the configurations provided in \( s l \)-CBR-PSSCH-TxConfigList, CBR ranges by an index to the entry of the CBR range configuration in \( s l \)-CBRRangeConfigList, and priority ranges. It also indicates the default PSSCH transmission parameters to be used when CBR measurement results are not available, and MCS range for the MCS tables used in the resource pool.

SL-CBR-PriorityTxConfigList information element
```
-- ASNISTART
-- TAG-SL-CBR-PRIORITYTXCONEIGLIST-START
SL-CBR-PriorityTxConfigList-rl6 ::= SEQUENCE (SIZE (1..8)) OF SL-PriorityTxConfigIndex-rl6
SL-CBR-PriorityTxConfigList-vl650 ::= SEQUENCE (SIZE (1..8)) OF SL-PriorityTxConfigIndex-vl650
SL-PriorityTxConfigIndex-rl6 ::= SEQUENCE {
    sl-PriorityThreshold-rl6 INTEGER (1..8)
    sl-DefaultTxConfigIndex-r16 INTEGER (O..maxCBR-Level-1-r16)
    sl-CBR-ConfigIndex-rl6 INTEGER (O..maxCBR-Config-l-rl6)
```

```
}
SL-PriorityTxConfigIndex-vl650 ::= SEQUENCE {
```

```
}
SL-TxConfigIndex-rl6 ::= INTEGER (O..maxTxConfig-l-rl6)
-- TAG-SL-CBR-PRIORITYTXCONFIGLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-CBR-Priority Tx ConfigList field descriptions \\
\hline \begin{tabular}{l}
sl-CBR-Configindex \\
Indicates the CBR ranges to be used by an index to the entry of the CBR range configuration in sl-CBR-RangeConfigList.
\end{tabular} \\
\hline \begin{tabular}{l}
si-DefaultTxConfigindex \\
Indicates the PSSCH transmission parameters to be used by the UEs which do not have available CBR measurement results, by means of an index to the corresponding entry in \( t x \)-ConfigindexList. Value 0 indicates the first entry in \( t x \)-ConfigindexList. The field is ignored if the UE has available CBR measurement results.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MCS-RangeList \\
Indicates the minimum MCS value and maximum MCS value for the associated MCS table(s). UE shall ignore the minimum MCS value and maximum MCS value used for table of 64QAM indicated in SL-CBR-PriorityTxConfigList-r16 if SL-CBR-PriorityTxConfigList-v1650 is present.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PriorityThreshold \\
Indicates the upper bound of priority range which is associated with the configurations in si-CBR-Config/ndex and in s/-Tx-ConfiglndexList. The upper bounds of the priority ranges are configured in ascending order for consecutive entries of SL-PriorityTxConfig/ndex in SL-CBR-PriorityTxConfigList. For the first entry of SL-PriorityTxConfig/ndex, the lower bound of the priority range is 1.
\end{tabular} \\
\hline \begin{tabular}{l}
SL-CBR-PriorityTxConfigList-v1650 \\
If included, it includes the same number of entries, and listed in the same order, as in SL-CBR-PriorityTxConfigList-r16.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 987  ---


3GPP TS 38.331 version 17.0.0 Release 17
986
ETSI TS 138331 V17.0.0 (2022-05)
- SL-CBR-CommonTxConfigList

The IE SL-CBR-CommonTxConfigList indicates the list of PSSCH transmission parameters (such as MCS, sub-channel number, retransmission number, CR limit) in sl-CBR-PSSCH-TxConfigList, and the list of CBR ranges in sl-CBR-RangeConfigList, to configure congestion control to the UE for sidelink communication.

SL-CBR-CommonTxConfigListinformation element
```
-- ASNISTART
-- TAG-SL-CBR-COMMONTXCONEIGLIST-START
SL-CBR-CommonTxConfigList-rl6 ::=
EQUENCE {
    sl-CBR-RangeConfigList-rl6
    sl-CBR-PSSCH-TxConfigList-rl6
}
SL-CBR-LevelsConfig-rl6 ::= SEQUENCE (SIZE (l..maxCBR-Level-rl6)) OF SL-CBR-rl6
SL-CBR-PSSCH-TxConfig-rl6 ::=
    sl-CR-Limit-rl6
    sl-TxParameters-rl6
}
SL-CBR-rl6 ::= INTEGER (0..100)
```

-- TAG-SL-CBR-COMMONTXCONFIGLIST-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SL-CBR-CommonTxConfigList field descriptions \\
\hline \begin{tabular}{l}
si-CBR-RangeConfigList \\
Indicates the list of CBR ranges. Each entry of the list indicates in SL-CBR-LevelsConfig the upper bound of the CBR range for the respective entry. The upper bounds of the CBR ranges are configured in ascending order for consecutive entries of s/CBR-RangeConfigList. For the first entry of sl-CBR-RangeConfigList the lower bound of the CBR range is 0 . Value 0 corresponds to 0 , value 1 to 0.01 , value 2 to 0.02 , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-CR-Limit \\
Indicates the maximum limit on the occupancy ratio. Value 0 corresponds to 0 , value 1 to 0.0001 , value 2 to 0.0002 , and so on (i.e. in steps of 0.0001 ) until value 10000 , which corresponds to 1.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-CBR-PSSCH-TxConfigList \\
Indicates the list of available PSSCH transmission parameters (such as MCS, sub-channel number, retransmission number and CR limit) configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TxParameters \\
Indicates PSSCH transmission parameters.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 988  ---


3GPP TS 38.331 version 17.0.0 Release 17
987
ETSI TS 138331 V17.0.0 (2022-05)
- SL-ConfigDedicatedNR

The IE SL-ConfigDedicatedNR specifies the dedicated configuration information for NR sidelink communication.
SL-ConfigDedicatedNR information element
```
-- ASNISTART
-- TAG-SL-CONFIGDEDICATEDNR-START
SL-ConfigDedicatedNR-rl6 ::= SEQUENCE \
    sl-PHY-MAC-RLC-Config-rl6 SL-PHY-MAC-RLC-Config-rl6
    sl-RadioBearerToReleaseList-rl6
    sl-RadioBearerToAddModList-r16
    sl-MeasConfigInfoToReleaseList-r16
    sl-MeasConfigInfoToAddModList-rl6
    t400-r16
    ...;
    [ [
    sl-PHY-MAC-RLC-Config-vl700
    sl-DiscConfig-rl7
    sl-RLC-ChannelToReleaseList-rl7
    sl-RLC-ChannelToAddModList-rl7
    ] ]
}
SL-DestinationIndex-rl6 ::= INTEGER (O..MaxNrofSL-Dest-1-r16)
SL-PHY-MAC-RLC-Config-rl6::= SEQUENCE {
    sl-ScheduledConfig-rl6
    sl-UE-SelectedConfig-rl6
    sl-FreqInfoToReleaseList-r16
    sl-FreqInfoToAddModList-r16
    sl-RLC-BearerToReleaseList-r16
    sl-RLC-BearerToAddModList-r16
    sl-MaxNumConsecutiveDTX-r16
    sl-CSI-Acquisition-rl6
    sl-CSI-SchedulingRequestId-r16
    sl-SSB-PriorityNR-rl6
    networkControlledSyncTx-rl6
}
SL-PHY-MAC-RLC-Config-vl700 ::= SEQUENCE {
    sl-DRX-Config-rl7
    ...
}
Sl-DiscConfig-rl7::= SEQUENCE {
    sl-RelayUE-Config-rl7
    sl-RemoteUE-Config-rl7
}
-- TAG-SL-CONFIGDEDICATEDNR-STOP
-- ASNISTOP
```


ETSI


--- Page 989  ---


3GPP TS 38.331 version 17.0.0 Release 17
988
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-ConfigDedicatedNR field descriptions \\
\hline \begin{tabular}{l}
sl-MeasConfiginfoToAddModList \\
This field indicates the RSRP measurement configurations for unicast destinations to add and/or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
si-MeasConfiginfoToReleaseList \\
This field indicates the RSRP measurement configurations for unicast destinations to remove.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PHY-MAC-RLC-Config \\
This field indicates the lower layer sidelink radio bearer configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-RadioBearerToAddModList \\
This field indicates one or multiple sidelink radio bearer configurations to add and/or modify. This field is not configured to the PC5 connection used for L2 U2N relay operation.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-RadioBearerToReleaseList \\
This field indicates one or multiple sidelink radio bearer configurations to remove. This field is not configured to the PC5 connection used for L2 U2N relay operation.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-PHY-MAC-RLC-Config field descriptions \\
\hline \begin{tabular}{l}
networkControlledSyncTx \\
This field indicates whether the UE shall transmit synchronisation information (i.e. become synchronisation source). Value on indicates the UE to transmit synchronisation information while value off indicates the UE to not transmit such information.
\end{tabular} \\
\hline \begin{tabular}{l}
si-DRX-Config \\
This field indicates the sidelink DRX configuration(s) for unicast, groupcast and/or broadcast communication, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MaxNumConsecutiveDTX \\
This field indicates the maximum number of consecutive HARQ DTX before triggering sidelink RLF. Value n1 corresponds to 1, value n2 corresponds to 2, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-FreqinfoToAddModList \\
This field indicates the NR sidelink communication configuration on some carrier frequency (ies) to add and/or modify. In this release, only one entry can be configured in the list.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-FreqinfoToReleaseList \\
This field indicates the NR sidelink communication configuration on some carrier frequency (ies) to remove. In this release, only one entry can be configured in the list.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RLC-BearerToAddModList \\
This field indicates one or multiple sidelink RLC bearer configurations to add and/or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-RLC-BearerToReleaseList \\
This field indicates one or multiple sidelink RLC bearer configurations to remove.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ScheduledConfig \\
Indicates the configuration for UE to transmit NR sidelink communication based on network scheduling. This field is not configured simultaneously with sl-UE-SelectedConfig. \\
This field is not configured to a L2 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-UE-SelectedConfig \\
Indicates the configuration used for UE autonomous resource selection. This field is not configured simultaneously with si-ScheduledConfig.
\end{tabular} \\
\hline \begin{tabular}{l}
si-CSI-Acquisition \\
Indicates whether CSI reporting is enabled in sidelink unicast. If the field is absent, sidelink CSI reporting is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
si-CSI-SchedulingRequestid \\
If present, it indicates the scheduling request configuration applicable for sidelink CSI report MAC CE, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
si-SSB-PriorityNR \\
This field indicates the priority of NR sidelink SSB transmission and reception.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 990  ---


3GPP TS 38.331 version 17.0.0 Release 17
989
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline L2RelayUE & For L2 U2N Relay UE, the field is optionally present, Need M. Otherwise, it is absent. \\
\hline L2RemoteUE & For L2 U2N Remote UE, the field is optionally present, Need M. Otherwise, it is absent. \\
\hline L2U2N & The field is optional present for L2 U2N Relay UE and L2 U2N Remote UE, need M. Otherwise, it is absent. \\
\hline
\end{tabular}
- SL-ConfiguredGrantConfig

The IE SL-ConfiguredGrantConfig specifies the configured grant configuration information for NR sidelink communication.
SL-ConfiguredGrantConfig information element
```
-- ASNISTART
-- TAG-SL-CONFIGUREDGRANTCONFIG-START
```

```
SL-ConfiguredGrantConfig-rl6 ::=
    sl-ConfigIndexCG-rl6
    sl-PeriodCG-rl6
    sl-NrOfHARQ-Processes-rl6
    sl-HARQ-ProcID-offset-rl6
    sl-CG-MaxTransNumList-rl6
    rrc-ConfiguredSidelinkGrant-r16
        sl-TimeResourceCG-Typel-rl6
        sl-StartSubchannelCG-Typel-rl6
        sl-FreqResourceCG-Typel-rl6
        sl-TimeOffsetCG-Typel-rl6
        sl-Nl PUCCH-AN-rl6
        sl-PSFCH-ToPUCCH-CG-Typel-rl6
        sl-ResourceP.
        sl-TimeReferenceSFN-Typel-rl6
    }
    ...,
    [ [
```

```
    ]]
}
SL-ConfigIndexCG-rl6 ::= INTEGER (O..maxNrofCG-SL-l-rl6)
SL-CG-MaxTransNumList-rl6 ::= SEQUENCE (SIZE (1..8)) OF SL-CG-MaxTransNum-rl6
SL-CG-MaxTransNum-rl6 ::= SEQUENCE \
    sl-Priority-rl6
    sl-MaxTransNum-rl6
}
SL-PeriodCG-rl6 ::= CHOICEl
```

```
                spare5, spare4, spare3, spare2, sparel},
    sl-PeriodCG2-r16 INTEGER (1..99)
}
```


ETSI


--- Page 991  ---


3GPP TS 38.331 version 17.0.0 Release 17
990
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-SL-CONFIGUREDGRANTCONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SL-ConfiguredGrantConfig field descriptions \\
\hline \begin{tabular}{l}
si-ConfigindexCG \\
This field indicates the ID to identify configured grant for sidelink.
\end{tabular} \\
\hline \begin{tabular}{l}
si-CG-MaxTransNumList \\
This field indicates the maximum number of times that a TB can be transmitted using the resources provided by the configured grant. si-Priority corresponds to the logical channel priority.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-FreqResourceCG-Type1 \\
Indicates the frequency resource location of sidelink configured grant type 1. An index giving valid combinations of one or two starting sub-channel and length (jointly encoded) as resource indicator (RIV), as defined in TS 38.214 [19].
\end{tabular} \\
\hline \begin{tabular}{l}
sI-HARQ-ProcID-Offset \\
Indicates the offset used in deriving the HARQ process IDs for SL configured grant type 1 or SL configured type 2, see TS 38.321 [3], clause 5.8.3.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-N1PUCCH-AN \\
This field indicates the HARQ resource for PUCCH for sidelink configured grant type 1. The actual PUCCH-Resource is configured in si-PUCCH-Config and referred to by its ID.
\end{tabular} \\
\hline \begin{tabular}{l}
si-N1PUCCH-AN-Type 2 \\
This field indicates the HARQ resource for PUCCH for PSCCH/PSSCH transmissions without a corresponding PDCCH on sidelink configured grant type 2. The actual PUCCHResource is configured in sl-PUCCH-Config and referred to by its ID.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-NrOfHARQ-Processes \\
This field indicates the number of HARQ processes configured for a specific configured grant. It applies for both Type 1 and Type 2.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PeriodCG \\
This field indicates the period of sidelink configured grant in the unit of ms.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PSFCH-ToPUCCH-CG-Type1 \\
This field, for configured grant type 1, indicates slot offset between the PSFCH associated with the last PSSCH resource of each period and the PUCCH occasion used for reporting sidelink HARQ.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ResourcePoollD \\
Indicates the resource pool in which the configured sidelink grant Type 1 is applied.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-StartSubchannelCG-Type1 \\
This field indicates the starting sub-channel of sidelink configured grant Type 1. An index giving valid sub-channel index.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-TimeOffsetCG-Type1 \\
This field indicates the slot offset with respect to logical slot defined by si-TimeReferenceSFN-Type1, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sI-TimeReferenceSFN-Type 1 \\
Indicates SFN used for determination of the offset of a resource in time domain. If it is present, the UE uses the \( 1^{\text {st }} \) logical slot of associated resource pool after the starting time of the closest SFN with the indicated number preceding the reception of the sidelink configured grant configuration Type 1 as reference logical slot, see TS 38.321 [3], clause 5.8.3. If it is not present, the reference SFN is 0 .
\end{tabular} \\
\hline \begin{tabular}{l}
si-TimeResourceCG-Type1 \\
This field indicates the time resource location of sidelink configured grant Type 1. An index giving valid combinations of up to two slot positions (jointly encoded) as time resource indicator (TRIV), as defined in TS 38.212 [17].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 992  ---


3GPP TS 38.331 version 17.0.0 Release 17
991
ETSI TS 138331 V17.0.0 (2022-05)

SL-Destination/dentity
The IE SL-DestinationIdentity is used to identify a destination of a NR sidelink communication.
SL-Destination/dentity information element
```
-- ASNISTART
-- TAG-SL-DESTINATIONIDENTITY-START
SL-DestinationIdentity-rl6 ::= BIT STRING (SIZE (24))
-- TAG-SL-DESTINATIONIDENTITY-STOP
-- ASNISTOP
```


SL-DRX-Config
The IE SL-DRX-Config is used to configure DRX related parameters for NR sidelink communication. The SL DRX timers should be calculated in the unit of physical slot.
SL-DRX-Config information element
```
-- ASNISTART
-- TAG-SL-DRX-CONFIG-START
SL-DRX-Config-rl7 ::= SEQUENCE {
    sl-DRX-Config-GC-BC-rl7
    sl-DRX-ConfigUC-ToReleaseList-rl7
    sl-DRX-ConfigUC-ToAddModList-rl7
    ...
}
SL-DRX-ConfigUC-Info-rl7 ::= SEQUENCE \
    sl-DestinationIndex-rl7
    sl-DRX-ConfigUC-rl7
    ...
}
-- TAG-SL-DRX-CONFIG-STOP
-- ASN1STOP
    SL-DRX-Config-GC-BC-rl7 OPTIONAL, -- Cond. HO
    SEQUENCE (SIZE (l..maxNrofSL-Dest-rl6)) OF SL-DestinationIndex-rl6 OPTIONAL, -- Need N
    SEQUENCE (SIZE (1..maxNrofSL-Dest-rl6)) OF SL-DRX-ConfigUC-Info-rl7 OPTIONAL, -- Need N
SEQUENCE \
    SL-DestinationIndex-rl6 OPTIONAL, -- Need N
    SL-DRX-ConfigUC-rl7 OPTIONAL, -- Need. N
```


ETSI


--- Page 993  ---


3GPP TS 38.331 version 17.0.0 Release 17
992
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-DRX-Config field descriptions \\
\hline \begin{tabular}{l}
sl-DRX-Config-GC-BC \\
This field indicates the sidelink DRX configurations for groupcast and broadcast communication, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DRX-ConfigUC-ToReleaseList \\
This field indicates the sidelink DRX configurations for corresponding unicast destinations to remove.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DRX-ConfigUC-ToAddModList \\
This field indicates the sidelink DRX configurations for corresponding unicast destinations to add and/or modify.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline HO & \begin{tabular}{l} 
This field is optionally present, need M, in an RRCReconfiguration message including reconfigurationWithSync; otherwise it is \\
absent, Need M.
\end{tabular} \\
\hline
\end{tabular}
- SL-DRX-Config-GC-BC

The IE SL-DRX-Config-GC-BC is used to configure DRX related parameters for NR sidelink groupcast and broadcast communication.
SL-DRX-Config-GC-BC information element
```
-- ASNISTART
-- TAG-SL-DRX-CONFIG-GC-BC-START
SL-DRX-Config-GC-BC-rl7 ::= SEQUENCE {
```

```
    ...
}
SL-DRX-GC-BC-QOS-rl7 ::= SEQUENCE {
```

```
    sl-DRX-GC-BC-OnDurationTimer-rl7 CHOICE {
            subMilliSeconds INTEGER (1..31),
            milliSeconds ENUMERATED {
                msl, ms2, ms3, ms4, ms5,ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60,
                ms80, msl00, ms200, ms300, ms400, ms500, ms600, ms800, ms1000, ms1200,
                msl600, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel}
    sl-DRX-GC-InactivityTimer-rl7
            },
            ENUMERATED {
            ms0, msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60, ms80,
    sl-DRX-GC-BC-Cycle-rl7
                msl0, ms20, ms32, ms40, ms60, ms64, ms70, ms80, ms128, ms160, ms256, ms320, ms512,
                    ms640, msl024, msl280, ms2048, ms2560, ms5120, msl0240, sparel2, sparell, sparel0,
                    spare9, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel },
}
```


ETSI


--- Page 994  ---


3GPP TS 38.331 version 17.0.0 Release 17
993
ETSI TS 138331 V17.0.0 (2022-05)
```
SL-DRX-GC-Generic-rl7 ::=
    sl-DRX-GC-HARQ-RTT-Timerl
    sl-DRX-GC-HARQ-RTT-Timer2
    sl-DRX-GC-RetransmissionTimer
```

```
SEQUENCE \
    ENUMERATED {sl0, sll, sl2, sl4, spare4, spare3, spare2, sparel},
    ENUMERATED {sl0, sll, sl2, sl4, spare4, spare3, spare2, sparel},
    ENUMERATED {
        sl0, sll, sl2, sl4, sl6, sl8, sll6, sl24, sl33, sl40, sl64, sl80, sl96, slll2, sll28, sll60,
        sl320, sparel5, sparel4, sparel3, sparel2, sparell, sparel0, spare9, spare8, spare7, spare6,
        spare5, spare4, spare3, spare2, sparel}
```

\}
-- TAG-SL-DRX-CONFIG-GC-BC-STOP
-- ASNISTOP

Editor's Note 1: the value of "maxSL-GC-BC-DRX-QoS-r17" is FFS, the value of "maxSL-GC-BC-DRX -Dest-r17" is FFS.
Editor's Note 2: the implementation of timers (values is FFS, if agreed to be different from legacy spec.
Editor's Note 3: FFS on whether the "RTT-Timer2" for UC/GC is needed, as "The value of the RTT timer length (fixed to be zero, or allow non-zero value configuration as well) is FFS" and how MAC spec can capture it.

\begin{tabular}{|l|}
\hline SL-DRX-Config-GC-BC field descriptions \\
\hline \begin{tabular}{l}
sl-DefaultDRX-GC-BC-r17 \\
Indicates the default sidelink DRX configuration for groupcast and broadcast communications, which is used for QoS profile(s) that cannot be mapped into DRX configuration(s) configured for dedicated QoS profile(s). This field can be applied for the broadcast based or unicast based communication of Direct Link Establishment Request as described in TS 24.587 [57].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DRX-GC-BC-PerQoS-List \\
List of one or multiple sidelink DRX configurations for groupcast and broadcast communication, which are mapped from QoS profile(s).
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DRX-GC-BC-Cycle \\
Value in ms, ms10 corresponds to 10 ms , ms 20 corresponds to 20 ms , ms 32 corresponds to 32 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DRX-GC-BC-MappedQoS-FlowsList \\
List of QoS profiles of the NR sidelink communication, which are mapped to a sidelink DRX configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DRX-GC-BC-OnDuration Timer \\
Value in multiples of \( 1 / 32 \mathrm{~ms} \) (subMilliSeconds) or in ms (milliSecond). For the latter, value ms 1 corresponds to 1 ms , value ms 2 corresponds to 2 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
si-DRX-GC-HARQ-RTT-Timer1, si-DRX-GC-HARQ-RTT-Timer2 \\
Value in number of slot lengths of the BWP where the transport block was received. Value sl0 corresponds to 0 slots, sl1 corresponds to 1 slot, sl2 corresponds to 2 slots, and so on. Different timer length values can be configured depending on whether a resource pool is configured with PSFCH or not.
\end{tabular} \\
\hline \begin{tabular}{l}
si-DRX-GC-Generic \\
Indicates a sidelink DRX configuration, which is applicable to any QoS profile or any Destination Layer-2 ID.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-DRX-GC-InactivityTimer \\
Value in multiple integers of \( 1 \mathrm{~ms}, \mathrm{~ms} 0 \) corresponds to \( 0, \mathrm{~ms} 1 \) corresponds to \( 1 \mathrm{~ms}, \mathrm{~ms} 2 \) corresponds to 2 ms , and so on. This field is only valid for groupcast communication.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-DRX-GC-RetransmissionTimer \\
Value in number of slot lengths of the BWP where the transport block was received. Value sl0 corresponds to 0 slots, sl1 corresponds to 1 slot, sl2 corresponds to 2 slots, and so on.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 995  ---


3GPP TS 38.331 version 17.0.0 Release 17
994
ETSI TS 138331 V17.0.0 (2022-05)

SL-DRX-ConfigUC
The IE SL-DRX-ConfigUC is used to configure sidelink DRX related parameters for unicast communication.
SL-DRX-ConfigUC information element
```
-- ASNISTART
-- TAG-DRX-CONFIGUC-START
SL-DRX-ConfigUC-rl7 ::=
    sl-drx-onDurationTimer-rl7
    sl-drx-InactivityTimer-rl7
    sl-drx-HARQ-RTT-Timerl-rl7
    sl-drx-HARQ-RTT-Timer2-rl7
    sl-drx-RetransmissionTimer-rl7
    sl-drx-CycleStartOffset-rl7
        mslo
        ms20
        ms32
        ms 40
        ms60
        ms64
        ms 70
        ms80
        msl28
        msl60
        ms256
        ms320
        ms512
        ms640
        msl024
        msl280
        ms2048
        ms2560
        ms5120
        msl0240
    },
    sl-drx-SlotOffset INTEGER (0..31)
}
-- TAG-SL-DRX-CONFIGUC-STOP
        -drx-SlotOffset
}
```

```
                                                subMilliSeconds INTEGER (1..31),
                            milliSeconds ENUMERATED {
                        msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60,
                        ms80, ms100, ms200, ms300, ms400, ms500, ms600, ms800, ms1000, ms1200,
                        msl600, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel}
                },
                    ms0, ms1, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60, ms80,
                        slig, sli, sl6, sl8, sll6, sl24, sl33, sl40, sl64, sl80, sl96, sl112, sll28,
sll60, sl320, sparel5, sparel4, sparel3, sparel2, sparell, sparel0, spare9,
SEQUENCE \
    CHOICE {
    CHOICE 
        milliSeconds ENUMERATED {
                msl, ms2, ms3, ms4, ms5, ms 6,
            msl600, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel}
        ms0, msl, ms2, ms3, ms4, ms5, ms6, ms8, msl0, ms20, ms30, ms40, ms50, ms60,
        spare7, spare6, spare5, spare4, spare3, spare2, sparel},
        spare7 (0. 56),
    INTEGER (0..56),
    INTEGER (0..56),
    ENUMERATED {
            spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel},
        ~
CHOICE \
    INTEGER(0..9),
    INTEGER(0..19),
    INTEGER(0..31),
    INTEGER(0..39),
    INTEGER(0..59),
    INTEGER(0..63),
    INTEGER(0..69),
    INTEGER(0..79),
    INTEGER(0..127),
    INTEGER(0..159),
    INTEGER(0..255),
    INTEGER(0..319),
    INTEGER(0..511),
    INTEGER(0..639),
    INTEGER(0..1023),
    INTEGER(0..1279),
    INTEGER(0..2047),
    INTEGER(0..2559),
    INTEGER(0..5119),
    INTEGER(0..10239)
    INTEGER (0..31)
```


-- TAG-SL-DRX-CONFIGUC-STOP
ETSI


--- Page 996  ---


3GPP TS 38.331 version 17.0.0 Release 17
995
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

Editor's Note 1: the implementation of timers (values) is FFS, if agreed to be different from legacy spec.
Editor's Note 2: the actual implementation on slotOffset is FFS.

\begin{tabular}{|l|}
\hline SL-DRX-ConfigUC field descriptions \\
\hline \begin{tabular}{l}
sl-drx-CycleStartOffset \\
drx-Cycle in ms and drx-StartOffset in multiples of 1 ms .
\end{tabular} \\
\hline \begin{tabular}{l}
si-drx-HARQ-RTT-Timer1, si-drx-HARQ-RTT-Timer2 \\
Value in number of symbols of the BWP where the transport block was received. Different timer length values can be configured depending on whether a resource pool is configured with PSFCH or not.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-drx-InactivityTimer \\
Value in number of slot lengths of the BWP where the transport block was received, sl0 corresponds to 0 , sl1 corresponds to 1 slot, sl2 corresponds to 2 slots, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
si-drx-onDurationTimer \\
Value in multiples of \( 1 / 32 \mathrm{~ms} \) (subMilliSeconds) or in ms (milliSecond). For the latter, value ms 1 corresponds to 1 ms , value ms 2 corresponds to 2 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-drx-Retransmission Timer \\
Value in number of slot lengths of the BWP where the transport block was received. Value sl0 corresponds to 0 slots, sl1 corresponds to 1 slot, sl2 corresponds to 2 slots, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-drx-SlotOffset \\
Value in \( 1 / 32 \mathrm{~ms} \). Value 0 corresponds to 0 ms , value 1 corresponds to \( 1 / 32 \mathrm{~ms} \), value 2 corresponds to \( 2 / 32 \mathrm{~ms} \), and so on.
\end{tabular} \\
\hline
\end{tabular}
- SL-DRX-ConfigUC-SemiStatic

The IE SL-DRX-ConfigUC-SemiStatic is used to configure the semi-static sidelink DRX related parameters for unicast communication.
SL-DRX-ConfigUC-SemiStatic information element
```
-- ASNISTART
-- TAG-DRX-CONFIGUCSEMISTATIC-START
SL-DRX-ConfigUC-SemiStatic-rl7 ::=
    sl-drx-onDurationTimer-rl7
    sl-drx-CycleStartOffset-rl7
        mslo
        ms20
        ms 32
        ms 40
        ms 60
        ms 64
        ms 70
```

```
                                                                subMilliSeconds INTEGER (1..31),
    milliSeconds ENUMERATED {
                        msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60,
                        ms80, ms100, ms200, ms300, ms400, ms500, ms600, ms800, ms1000, ms1200,
            },
SEQUENCE \
    CHOICE
        msl600, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel}
                R(0..63),
```

                        ETSI


--- Page 997  ---


3GPP TS 38.331 version 17.0.0 Release 17
996
ETSI TS 138331 V17.0.0 (2022-05)
```
        ms80 INTEGER(0..79),
        msl28 INTEGER(0..127),
        msl60 INTEGER(0..159),
        ms256 INTEGER(0..255),
        ms320 INTEGER(0..319),
        ms5l2 INTEGER(0..511),
        ms640 INTEGER(0..639),
        msl024 INTEGER(0..1023),
        msl280 INTEGER(0..1279),
        ms2048 INTEGER(0..2047),
        ms2560
        ms5120
        msl0240
    }
}
-- TAG-SL-DRX-CONFIGUCSEMISTATIC-STOP
-- ASNISTOP
```

```
INTEGER(0..79),
INTEGER(0..127),
INTEGER(0..255),
INTEGER(0..319),
INTEGER(0..511),
INTEGER(0..639),
INTEGER(0..1279),
INTEGER(0..2559),
INTEGER(0..5119),
INTEGER(0..10239)
```


Editor's Note: the implementation of timer values is FFS.
- SL-FreqConfig

The IE \( S L \)-FreqConfig specifies the dedicated configuration information on one particular carrier frequency for NR sidelink communication.
SL-FreqConfig information element
```
-- ASNISTART
-- TAG-SL-FREQCONFIG-START
SL-FreqConfig-rl6 ::= SEQUENCE \
    sl-Freq-Id-rl6
    sl-SCS-SpecificCarrierList-r16
    sl-AbsoluteFrequencyPointA-r16
    sl-AbsoluteFrequencySSB-r16
    frequencyShift7p5khzSL-r16
    valueN-rl6
    sl-BWP-ToReleaseList-rl6
    sl-BWP-ToAddModList-r16
    sl-SyncConfigList-rl6
    sl-SyncPriority-rl6
}
SL-Freq-Id-rl6 ::= INTEGER (1.. maxNrofFreqSL-r16)
-- TAG-SL-FREQCONFIG-STOP
-- ASN1STOP
```


ETSI


--- Page 998  ---


3GPP TS 38.331 version 17.0.0 Release 17
997
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-FreqConfig field descriptions \\
\hline \begin{tabular}{l}
frequencyShift7p5khzSL \\
Enable the NR SL transmission with a 7.5 kHz shift to the LTE raster. If the field is absent, the frequency shift is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-AbsoluteFrequencyPointA \\
Absolute frequency of the reference resource block (Common RB 0). Its lowest subcarrier is also known as Point A.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-AbsoluteFrequencySSB \\
Indicates the frequency location of sidelink SSB. The transmission bandwidth for sidelink SSB is within the bandwidth of this sidelink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BWP-ToAddModList \\
This field indicates the list of sidelink BWP(s) on which the NR sidelink communication configuration is to be added or reconfigured. In this release, only one BWP is allowed to be configured for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BWP-ToReleaseList \\
This field indicates the list of sidelink BWP(s) on which the NR sidelink communication configuration is to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Freq-ld \\
This field indicates the identity of the dedicated configuration information on the carrier frequency for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SCS-SpecificCarrierList \\
A set of UE specific channel bandwidth and location configurations for different subcarrier spacings (numerologies). Defined in relation to Point A. The UE uses the configuration provided in this field only for the purpose of channel bandwidth and location determination. In this release, only one SCS-SpecificCarrier is allowed to be configured for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SyncPriority \\
This field indicates synchronization priority order, as specified in clause 5.8.6.
\end{tabular} \\
\hline \begin{tabular}{l}
valueN \\
Indicate the NR SL transmission with a valueN \( { }^{*} 5 \mathrm{kHz} \) shift to the LTE raster. (see TS 38.101-1 [15], clause 5.4E.2).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline V2X-SL-Shared & \begin{tabular}{l} 
This field is mandatory present if the carrier frequency configured for NR sidelink communication is shared by V2X sidelink \\
communication. It is absent, Need R, otherwise.
\end{tabular} \\
\hline
\end{tabular}

- SL-FreqConfigCommon

The IE FreqConfigCommon specifies the cell-specific configuration information on one particular carrier frequency for NR sidelink communication.
SL-FreqConfigCommon information element
```
-- ASN1START
-- TAG-SL-FREQCONFIGCOMMON-START
SL-FreqConfigCommon-rl6 ::= SEQUENCE \
    sl-SCS-SpecificCarrierList-rl6 SEQUENCE (SIZE (l..MaxSCSs)) OF SCS-SpecificCarrier,
    sl-AbsoluteErequencyPointA-rl6 ARFCN-ValueNR,
```

```
    valueN-rl6 INTEGER (-l..l),
```


ETSI


--- Page 999  ---


3GPP TS 38.331 version 17.0.0 Release 17
998
ETSI TS 138331 V17.0.0 (2022-05)
```
    sl-SyncConfigList-rl6 SL-SyncConfigList-rl6
    ...
}
-- TAG-SL-FREQCONFIGCOMMON-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-FreqConfigCommon field descriptions \\
\hline \begin{tabular}{l}
frequencyShift7p5khzSL \\
Enable the NR SL transmission with a 7.5 kHz shift to the LTE raster. If the field is absent, the frequency shift is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-AbsoluteFrequencyPointA \\
Absolute frequency of the reference resource block (Common RB 0). Its lowest subcarrier is also known as Point A .
\end{tabular} \\
\hline \begin{tabular}{l}
sI-AbsoluteFrequencySSB \\
Indicates the frequency location of sidelink SSB. The transmission bandwidth for sidelink SSB is within the bandwidth of this sidelink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BWP-List \\
This field indicates the list of sidelink BWP(s) on which the NR sidelink communication configuration. In this release, only one BWP is allowed to be configured for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
si-NbAsSync \\
This field indicates whether the network can be selected as synchronization reference directly/indirectly only, if s/-SyncPriority is set to gnss. If this field is set to TRUE, the network is enabled to be selected as synchronization reference directly/indirectly. The field is only present in SidelinkPreconfigNR. Otherwise it is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SyncPriority \\
This field indicates synchronization priority order, as specified in clause 5.8.6..
\end{tabular} \\
\hline \begin{tabular}{l}
sl-SyncConfigList \\
This field indicates the configuration by which the UE is allowed to receive and transmit synchronisation information for NR sidelink communication. Network configures s/SyncConfig including txParameters when configuring UEs to transmit synchronisation information. If this field is configured in SL-PreconfigurationNR-r16, only one entry is configured in sl-SyncConfigList.
\end{tabular} \\
\hline \begin{tabular}{l}
valueN \\
Indicate the NR SL transmission with a valueN *5kHz shift to the LTE raster (see TS 38.101-1 [15], clause 5.4E.2).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline V2X-SL-Shared & \begin{tabular}{l} 
This field is mandatory present if the carrier frequency configured for NR sidelink communication is shared by V2X sidelink \\
communication. It is absent, Need R, otherwise.
\end{tabular} \\
\hline
\end{tabular}
- SL-InterUE-CoordinationConfig

The IE SL-InterUE-CoordinationConfig is used to configure the sidelink inter-UE coordination parameters.
SL-InterUE-CoordinationConfig information element
```
-- ASNISTART
-- TAG-SL-INTERUE-COORDINATIONCONFIG-START
SL-InterUE-CoordinationConfig-rl7 ::= SEQUENCE [
    sl-InterUE-CoordinationSchemel-rl7 SL-InterUE-CoordinationSchemel-rl7
    sl-InterUE-CoordinationScheme2-rl7 SL-InterUE-CoordinationScheme2-rl7
```


OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
ETSI


--- Page 1000  ---


3GPP TS 38.331 version 17.0.0 Release 17
999
ETSI TS 138331 V17.0.0 (2022-05)
```
    ...
}
SL-InterUE-CoordinationSchemel-rl7 ::= SEQUENCE [
    sl-IUC-Explicit-rl7 ENUMERATED {enabled, disabled}
    OPTIONAL, -- Need M
    OPTIONAL, -- Need. M
```

```
    sl-TriggerConditionCoordInfo-rl7 INTEGER (0..1)
    sl-TriggerConditionRequest-rl7 INTEGER (0..1)
    sl-PriorityCoordInfoExplicit-rl7 INTEGER (1..8)
    sl-PriorityCoordInfoCondition-rl7 INTEGER (1..8)
    sl-PriorityRequest-rl7 INTEGER (1..8)
    sl-PriorityPreferredResourceSet-rl7 INTEGER (1..8)
    sl-MaxSlotOffsetTRIV-rl7 INTEGER (1..8000)
    sl-NumSubCH-PreferredResourceSet-rl7 INTEGER (1..27)
    sl-ReservedPeriodPreferredResourceSet-rl7 INTEGER (1..16)
    CHTIONAL,
    ...
}
SL-InterUE-CoordinationScheme2-rl7 ::= SEQUENCE {
    sl-IUC-Scheme2-rl7
    sl-RB-SetPSFCH-rl7 BIT STRING (SIZE (10..275))
    sl-TypeUE-A-rl7 ENUMERATED {enabled}
    sl-PSFCH-Occasion-rl7 INTEGER (0..1)
    sl-SlotLevelResourceExclusion-rl7 ENUMERATED {enabled}
    sl-OptionForCondition2-A-l-rl7 INTEGER (0..1)
    sl-IndicationUE-B-rl7 ENUMERATED {enabled, disabled}
    ...
}
SL-ThresholdRSRP-Conditionl-B-l-rl7 ::= SEQUENCE {
    sl-Priority-rl6
    sl-T
}
-- TAG-SL-INTERUE-COORDINATIONCONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 1001  ---


3GPP TS 38.331 version 17.0.0 Release 17
1000
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-InterUE-CoordinationScheme1 field descriptions \\
\hline \begin{tabular}{l}
si-Condition 1-A-2 \\
Indicates disabling the use of condition of excluding from preferred resource set resource(s) in slot(s) where UE-A, when it is intended receiver of UE-B, does not expect to perform SL reception from UE-B due to half duplex operation.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ContainerCoordinfo \\
Indicates whether a SCI format 2-C can be used as the container of inter-UE coordination information transmission from UE-A to UE-B in Scheme 1 in addition to using MAC CE.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ContainerRequest \\
Indicates whether a SCI format 2-C can be used as the container of an explicit request for inter-UE coordination information transmission form UE-B to UE-A in Scheme 1 in addition to using MAC CE.
\end{tabular} \\
\hline \begin{tabular}{l}
si-DetermineResourceType \\
Indicates how to determine the resource set type to be provided by inter-UE coordination information transmission. Value "uea" means the resource set type is determined by UE-A's implementation. Value "ueb" means the resource set type is determined by UE-B's request.
\end{tabular} \\
\hline \begin{tabular}{l}
si-IUC-Condition \\
Indicates whether inter-UE coordination information triggered by a condition is enabled or not other than explicit request reception.
\end{tabular} \\
\hline \begin{tabular}{l}
si-IUC-Explicit \\
Indicates whether inter-UE coordination information triggered by an explicit request is enabled or not.
\end{tabular} \\
\hline \begin{tabular}{l}
si-MaxSlotOffsetTRIV \\
Indicates the maximum value of logical slot offset with respect to a reference slot that is used for representing the first resource location of each TRIV to indicate the set of resources in Scheme 1 as specified in TS 38.214 [19].
\end{tabular} \\
\hline \begin{tabular}{l}
si-NumSubCH-PreferredResousrceSet \\
Indicates the number of sub-channels used for determining the preferred resource set in Scheme 1 when the inter-UE coordination information transmission is triggered by a condition other than explicit request reception.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PriorityCoordinfoCondition \\
Indicates the priority value of inter-UE coordination information triggered by a condition other than explicit request reception in Scheme 1.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PriorityCoordinfoExplicit \\
Indicates the priority value of inter-UE coordination information triggered by an explicit request in Scheme 1.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PriorityPreferredResourceSet \\
Indicates the priority value used for determining the preferred resource set in Scheme 1 when the inter-UE coordination information transmission is triggered by a condition other than explicit request reception.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PriorityRequest \\
Indicates the priority value of an explicit request for inter-UE coordination information in Scheme 1.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-ReservedPeriodPreferredResourceSet \\
Indicates the resource reservation interval used for determining the preferred resource set in Scheme 1 when the inter-UE coordination information transmission is triggered by a condition, by means of an index to the corresponding entry of si-ResourceReservePeriodList-r16.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TriggerConditionCoordinfo \\
Indicates the trigger condition of inter-UE coordination information from UE-A to UE-B. Value 0 means inter-UE coordination information is triggered by UE-A's implementation. Value 1 means inter-UE coordination information is triggered only when UE-A has data to be transmitted together with the inter-UE coordination information to UE-B.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TriggerConditionRequest \\
Indicates the trigger condition of an explicit request from UE-B to UE-A. Value 0 means the explicit request is triggered by UE-B's implementation. Value 1 means the explicit request is triggered only when UE-B has data to be transmitted to UE-A.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ThresholdRSRP-Condition 1-B-1-Option 1List \\
Indicates the RSRP threshold used to determine reserved resource(s) of other UE(s) whose RSRP measurement is larger than it as the set of resource(s) non-preferred for UEB's transmission for Condition 1-B-1 of Scheme 1, as specified in TS 38.214 [19]. Value 0 corresponds to minus infinity dBm, value 1 corresponds to -128 dBm , value 2 corresponds to -126 dBm , value n corresponds to \( \left(-128+(\mathrm{n}-1)^{* 2} 2\right) \mathrm{dBm} \) and so on, value 66 corresponds to infinity dBm .
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1002  ---


3GPP TS 38.331 version 17.0.0 Release 17
1001
ETSI TS 138331 V17.0.0 (2022-05)

sl-ThresholdRSRP-Condition1-B-1-Option2List
Indicates the RSRP threshold used to determine reserved resource(s) of other UE(s) whose RSRP measurement is smaller than it as the set of resource(s) non-preferred for UE-B's transmission for Condition 1-B-1 of Scheme 1, as specified in TS 38.214 [19]. Value 0 corresponds to minus infinity dBm, value 1 corresponds to -128 dBm , value 2 corresponds to -126 dBm , value n corresponds to \( \left(-128+(\mathrm{n}-1)^{\star} 2\right) \mathrm{dBm} \) and so on, value 66 corresponds to infinity dBm .

\begin{tabular}{|l|}
\hline SL-InterUE-CoordinationScheme2 field descriptions \\
\hline \begin{tabular}{l}
si-indicationUE-B \\
Indicates whether to enable or disable the usage of 1 LSB of reserved bits of a SCI format 1-A to indicate of whether UE scheduling a conflict TB can be UE-B or not.
\end{tabular} \\
\hline \begin{tabular}{l}
si-IUC-Scheme2 \\
Indicates whether inter-UE coordination scheme 2 is enabled or not.
\end{tabular} \\
\hline \begin{tabular}{l}
si-OptionForCondition 2-A-1 \\
Indicates the RSRP threshold used to consider additional criteria for condition 2-A-1. Value 0 corresponds to the RSRP threshold according to the priorities included in the SCI. Value 1 corresponds to a (pre)configured RSRP threshold compared to the RSRP measurement of UE-B' or another UE's reserved resource.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PSFCH-Occasion \\
Indicates the reference slot from which a PSFCH occasion for inter-UE coordination information transmission is derived. Value 0 corresponds to the slot where UE-B's SCI is transmitted and value 1 corresponds to the slot where expected/potential resource conflict occurs on PSSCH resource indicated by UE-B's SCI.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-RB-SetPSFCH \\
Indicates the set of PRBs that are actually used for inter-UE coordination information transmission and reception in Scheme 2. The leftmost bit of the bitmap refers to the lowest RB index in the resource pool, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SiotLevelResourceExclusion \\
Indicates that physical layer of UE-B reports resources in a slot including the next reserved resource indicated by the corresponding UE-B's SCI for current TB transmission to higher layer.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TypeUE-A \\
Indicates that a non-destination UE of a TB transmitted by UE-B can be UE-A which sends inter-UE coordination information to UE-B, when UE-A is a destination UE of another TB conflicting with the TB transmitted by UE-B.
\end{tabular} \\
\hline
\end{tabular}
- SL-LogicalChannelConfig

The IE SL-LogicalChannelConfig is used to configure the sidelink logical channel parameters.
SL-Logica/Channe/Config information element
```
-- ASNISTART
-- TAG-SL-LOGICALCHANNELCONFIG-START
SL-LogicalChannelConfig-rl6 ::=
    sl-Priority-rl6
    sl-PrioritisedBitRate-rl6
    sl-BucketSizeDuration-rl6
    sl-ConfiguredGrantTypelAllowed-rl6
    sl-HARQ-FeedbackEnabled-r16
    sl-AllowedCG-List-rl6
    sl-AllowedSCS-List-rl6
```

```
SEQUENCE \
    INTEGER (1..8),
    ENUMERATED {kBps0, kBps8, kBps16, kBps32, kBps64, kBps128, kBps256, kBps512,
    kBpsl024, kBps2048, kBps4096, kBps8192, kBps16384, kBps32768, kBps65536, infinity},
    ENUMERATED [ms5, mslo, ms20, ms50, msl00, msl50, ms300, ms500, msl000,
    spare7, spare6, spare5, spare4, spare3, spare2, sparel},
    ENUMERATED {true} OPTIONAL, -- Need R
    ENUMERATED {enabled, disabled} OPTIONAL, -- Need R
    SEQUENCE (SIZE (O.. maxNrofCG-SL-l-rl6)) OF SL-ConfigIndexCG-rl6
        OPTIONAL, -- Need. R
    SEQUENCE (SIZE (l..maxSCSs)) OF SubcarrierSpacing OPTIONAL, -- Need R
```


ETSI


--- Page 1003  ---


3GPP TS 38.331 version 17.0.0 Release 17
1002
ETSI TS 138331 V17.0.0 (2022-05)
```
    sl-MaxPUSCH-Duration-r16
    sl-LogicalChannelGroup-rl6
    sl-SchedulingRequestId-rl6
    SchedulingRequestId
    ...
}
-- TAG-SL-LOGICALCHANNELCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-LogicalChannelConfig field descriptions \\
\hline \begin{tabular}{l}
sl-AllowedCG-List \\
This restriction applies only when the SL grant is a configured grant. If present, SL MAC SDUs from this logical channel can only be mapped to the indicated configured grant configuration. If the size of the sequence is zero, then SL MAC SDUs from this logical channel cannot be mapped to any configured grant configurations. If the field is not present, SL MAC SDUs from this logical channel can be mapped to any configured grant configurations. If the field sl-ConfiguredGrantType 1Allowed is present, only those sidelink configured grant type 1 configurations indicated in this sequence are allowed for use by this sidelink logical channel; otherwise, this sequence shall not include any sidelink configured grant type 1 configuration. Corresponds to "sl-AllowedCG-List" as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-AllowedSCS-List \\
If present, indicate the numerology of UL-SCH resources that this sidelink logical channel is mapped to, when checking the SR trigger condition. Corresponds to' sl-AllowedSCS-List' in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-BucketSizeDuration \\
Value in \( \mathrm{ms} . \mathrm{ms} 5 \) corresponds to 5 ms , value ms 10 corresponds to 10 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ConfiguredGrantType1Allowed \\
If present and set to true, or if the capability Icp-RestrictionSidelink as specified in TS 38.306 [26] is not indicated, SL MAC SDUs from this sidelink logical channel can be transmitted on a sidelink configured grant type 1. Otherwise, SL MAC SDUs from this logical channel cannot be transmitted on a sidelink configured grant type 1. Corresponds to 'sl-configuredGrantType1Allowed' in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-HARQ-FeedbackEnabled \\
Network always includes this field. It indicates the HARQ feedback enabled/disabled restriction in LCP for this sidelink logical channel. If set to enabled, the sidelink logical channel will be multiplexed only with a logical channel which enabling the HARQ feedback. If set to disabled, the sidelink logical channel cannot be multiplexed with a logical channel which enabling the HARQ feedback. Corresponds to 'sl-HARQ-FeedbackEnabled' in TS 38.321 [3]. If this field of at least one sidelink logical channel for the UE is set to enabled, sl-PSFCH-Config should be mandatory present in at least one of the SL-ResourcePool.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-LogicalChannelGroup \\
ID of the sidelink logical channel group, as specified in TS 38.321 [3], which the sidelink logical channel belongs to.
\end{tabular} \\
\hline \begin{tabular}{l}
s/-LogicalChannelSR-Delay TimerApplied \\
Indicates whether to apply the delay timer for SR transmission for this sidelink logical channel. Set to false if logicalChannelSR-DelayTimer is not included in sl-BSR-Config.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-MaxPUSCH-Duration \\
If present, indicate the maximum PUSCH duration of UL-SCH resources that this sidelink logical channel is mapped to, when checking the SR trigger condition. Corresponds to "sI-MaxPUSCH-Duration" in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PrioritisedBitRate \\
Value in kiloBytes/s. Value \( k B p s 0 \) corresponds to 0 kiloBytes/s, value \( k B p s 8 \) corresponds to 8 kiloBytes/s, value \( k B p s 16 \) corresponds to 16 kiloBytes/s, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Priority \\
Sidelink logical channel priority, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
si-Scheduling Requestid \\
If present, it indicates the scheduling request configuration applicable for this sidelink logical channel, as specified in TS 38.321 [3].
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1004  ---


3GPP TS 38.331 version 17.0.0 Release 17
1003
ETSI TS 138331 V17.0.0 (2022-05)
- SL-L2RelayUEConfig

The IE SL-L2RelayUEConfig is used to configure L2 U2N relay operation related configurations used by L2 U2N Relay UE, e.g. SRAP-Config.
SL-L2RelayUEConfig information element
```
-- ASNISTART
-- TAG-SL-L2RELAYUECONFIG-START
SL-L2RelayUEConfig-rl7 ::= SEQUENCE {
    sl-RemoteUE-ToAddModList-rl7
    sl-RemoteUE-ToReleaseList-rl7
    ...
}
SL-RemoteUE-ToAddMod-rl7 ::= SEQUENCE {
    sl-L2Identity-Remote-rl7
    SL-DestinationIdentity-rl6,
    ...
}
-- TAG-SL-L2RELAYUECONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline & SL-L2RelayUEConfig field descriptions \\
\hline \begin{tabular}{l}
sI-RemoteUE-ToAddModList \\
List of L2 U2N Remote UEs to be added and modified.
\end{tabular} & \\
\hline \begin{tabular}{l}
si-RemoteUE-ToReleaseList \\
List of L2 U2N Remote UEs to be released.
\end{tabular} & \\
\hline
\end{tabular}
- SL-L2RemoteUEConfig

The IE SL-L2RemoteUEConfig is used to L2 U2N relay operation related configurations used by L2 U2N Remote UE, e.g. SRAP-Config.
SL-L2RemoteUEConfig information element
```
-- ASNISTART
-- TAG-SL-L2REMOTEUECONFIG-START
SL-L2RemoteUEConfig-rl7 ::= SEQUENCE [
    sl-SRAP-Config-Remote-rl7
    sl-ServingCellInfo-rl7 SL-ServingCellInfo
    ...
}
-- TAG-SL-L2REMOTEUECONFIG-STOP
-- ASNISTOP
```


ETSI


--- Page 1005  ---


3GPP TS 38.331 version 17.0.0 Release 17
1004
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline & SL-L2RemoteUEConfig field descriptions \\
\hline \begin{tabular}{l}
si-SRAP-Config-Remote \\
Indicates SRAP configuration used for L2 U2N Remote UE.
\end{tabular} & \\
\hline \begin{tabular}{l}
si-ServingCellinfo \\
Indicates the Uu serving Cell related information.
\end{tabular} & \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{c|}{ Explanation } \\
\hline RRCEstab & \begin{tabular}{l} 
This field is mandatory present in RRCSetup, RRCResume, and RRCRestablishment, Need M. Otherwise the field is \\
absent.
\end{tabular} \\
\hline
\end{tabular}
- SL-MeasConfigCommon

The IE SL-MeasConfigCommon is used to set the cell specific SL RSRP measurement configurations for unicast destinations.
SL-MeasConfigCommon information element
```
-- ASNISTART
-- TAG-SL-MEASCONFIGCOMMON-START
SL-MeasConfigCommon-rl6 ::=
    sl-MeasObjectListCommon-r16
    sl-ReportConfigListCommon-rl6
    sl-MeasIdListCommon-rl6
    sl-QuantityConfigCommon-rl6
    ...
}
-- TAG-SL-MEASCONFIGCOMMON-STOP
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline & SL-MeasConfigCommon field descriptions \\
\hline \begin{tabular}{l}
si-MeasidListCommon \\
List of sidelink measurement identities
\end{tabular} & \\
\hline \begin{tabular}{l}
sI-MeasObjectListCommon \\
List of sidelink measurement objects.
\end{tabular} & \\
\hline \begin{tabular}{l}
si-QuantityConfigCommon \\
Indicates the layer 3 filtering coefficient for sidelink measurement.
\end{tabular} & \\
\hline \begin{tabular}{l}
si-ReportConfigListCommon \\
List of sidelink measurement reporting configurations.
\end{tabular} & \\
\hline
\end{tabular}
- SL-MeasConfigInfo

The IE SL-MeasConfigInfo is used to set RSRP measurement configurations for unicast destinations.

ETSI


--- Page 1006  ---


3GPP TS 38.331 version 17.0.0 Release 17
1005
ETSI TS 138331 V17.0.0 (2022-05)

SL-MeasConfigInfo information element
```
-- ASNISTART
-- TAG-SL-MEASCONFIGINFO-START
SL-MeasConfigInfo-rl6 ::= SEQUENCE {
    sl-DestinationIndex-rl6
    sl-MeasConfig-rl6
    ...
}
SL-MeasConfig-rl6 ::= SEQUENCE \
    sl-MeasObjectToRemoveList-r16
    sl-MeasObjectToAddModList-r16
    sl-ReportConfigToRemoveList-r16
    sl-ReportConfigToAddModList-r16
    sl-MeasIdToRemoveList-rl6
    sl-MeasIdToAddModList-r16
    sl-QuantityConfig-rl6 SL-MeasIdList-rl6
    ...
}
SL-MeasObjectToRemoveList-rl6 ::= SEQUENCE (SIZE (1..maxNrofSL-ObjectId-rl6)) OF SL-MeasObjectId-rl6
SL-ReportConfigToRemoveList-rl6 ::= SEQUENCE (SIZE (l..maxNrofSL-ReportConfigId-rl6)) OF SL-ReportConfigId-rl6
SL-MeasIdToRemoveList-rl6 ::= SEQUENCE (SIZE (l..maxNrofSL-MeasId-rl6)) OF SL-MeasId-rl6
-- TAG-SL-MEASCONFIGINFO-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-MeasConfiginfo field descriptions \\
\hline \begin{tabular}{l}
sI-MeasIdToAddModList \\
List of sidelink measurement identities to add and/or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
si-MeasidToRemoveList \\
List of sidelink measurement identities to remove.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-MeasObjectToAddModList \\
List of sidelink measurement objects to add and/or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-MeasObjectToRemoveList \\
List of sidelink measurement objects to remove.
\end{tabular} \\
\hline \begin{tabular}{l}
si-QuantityConfig \\
Indicates the layer 3 filtering coefficient for sidelink measurement.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ReportConfigToAddModList \\
List of sidelink measurement reporting configurations to add and/or modify.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ReportConfigToRemoveList \\
List of sidelink measurement reporting configurations to remove.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1007  ---


3GPP TS 38.331 version 17.0.0 Release 17
1006
ETSI TS 138331 V17.0.0 (2022-05)
- SL-MeasidList

The IE SL-MeasIdList concerns a list of SL measurement identities to add or modify for a destination, with for each entry the sl-Measld, the associated sl-MeasObjectld and the associated sl-ReportConfigld.

SL-Meas/dList information element
```
-- ASNISTART
-- TAG-SL-MEASIDLIST-START
SL-MeasIdList-rl6 ::= SEQUENCE (SIZE (1..maxNrofSL-MeasId-r16)) OF SL-MeasIdInfo-rl6
SL-MeasIdInfo-rl6 ::= SEQUENCE \
    sl-MeasId-rl6
    sl-MeasObjectId-rl6
    sl-ReportConfigId-r16
    ...
}
SL-MeasId-rl6 ::= INTEGER (l..maxNrofSL-MeasId-rl6)
-- TAG-SL-MEASIDLIST-STOP
-- ASNISTOP
```

- SL-MeasObjectList

The IE SL-MeasObjectList concerns a list of SL measurement objects to add or modify for a destination.
SL-MeasObjectList information element
```
-- ASNISTART
-- TAG-SL-MEASOBJECTLIST-START
SL-MeasObjectInfo-rl6 ::= SEQUENCE \
    sl-MeasObjectId-rl6
    sl-MeasObject-r16
    ...
}
SL-MeasObject-rl6 ::=
    frequencyInfoSL-rl6
    \cdots.
}
-- TAG-SL-MEASOBJECTLIST-STOP
```

SL-MeasObjectId-rl6 : := INTEGER (1..maxNrofSL-ObjectId-rl6)
```
SL-MeasObjectList-rl6 ::= SEQUENCE (SIZE (l..maxNrofSL-ObjectId-rl6)) OF SL-MeasObjectInfo-rl6
SEQUENCE (SIZE (1..maxNrofSL-ObjectId-r16)) OF SL-MeasObjectInfo-rl6
    SL-MeasObjectId-r16,
    SL-MeasObject-rl6,
NTEGER (1..maxNrofSL-ObjectId-r16)
SEQUENCE \
    ARFCN-ValueNR,
```


--- Page 1008  ---


3GPP TS 38.331 version 17.0.0 Release 17
1007
ETSI TS 138331 V17.0.0 (2022-05)
```
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline & SL-MeasObjectList field descriptions \\
\hline \begin{tabular}{l}
si-MeasObjectid \\
It is used to identify a sidelink measurement object configuration.
\end{tabular} & \\
\hline \begin{tabular}{l}
si-MeasObject \\
It specifies information applicable for sidelink DMRS measurement.
\end{tabular} & \\
\hline
\end{tabular}

\section*{- SL-MeasResultsRelay}

The IE SL-MeasResultsSLRelay covers measured results of L2 U2N Relay UEs.
SL-MeasResultsRelay information element
```
-- ASNISTART
-- TAG-SL-MEASRESULTSRELAY-START
SL-MeasResultsRelay-rl7 ::=
    sl-MeasResultsListRelay-rl7
        sl-MeasResultNR-Relay-rl7
        ...
    },
    ...
}
SL-MeasResultNR-Relay-rl7 ::= SEQUENCE {
    sl-FrequencyInfo-rl7
    ARFCN-ValueNR,
    ...
}
SL-MeasResultRelay-rl7 ::= SEQUENCE {
    cellIdentity-rl7
    sl-RelayUEIdentity-rl7
    sl-MeasResult-rl7
    ...
}
```

```
SL-MeasResult-rl6 ::= SEQUENCE {
```

```
    ...
}
SL-MeasQuantityResult-rl6 ::= SEQUENCE \
    sl-RSRP-r16
    ...
}
-- TAG-SL-MEASRESULTSRELAY-STOP
```


ETSI


--- Page 1009  ---


3GPP TS 38.331 version 17.0.0 Release 17
1008
ETSI TS 138331 V17.0.0 (2022-05)
```
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline Sl-MeasResultNR-Relay \\
Include the measured results for L2 U2N Relay UEs. \\
\hline
\end{tabular}

\begin{tabular}{|ll|}
\hline sl-RelayUEldentity & SL-MeasResultRelay field descriptions \\
The identity of the measured L2 U2N Relay UE's source L2 ID. & \\
\hline
\end{tabular}
- SL-PagingIdentity-RemoteUE

The IE SL-PagingIdentity-RemoteUE includes the Remote UE's paging UE ID.
SL-Paging/dentity-RemoteUE information element
-- ASNISTART
-- TAG-SL-PAGINGIDENTITY-REMOTEUE-START

SL-PagingIdentity-RemoteUE-rl7 : := SEQUENCE [
ng-5G-S-TMSI-rl7 NG-5G-S-TMSI,
fullI-RNTI-rl7 I-RNTI-Value OPTIONAL
\}
-- TAG-SL-PAGINGIDENTITY-REMOTEUE-STOP
-- ASNISTOP
- SL-PBPS-CPS-Config

The IE SL-PBPS-CPS-Config specifies the operation information for a resource pool which can be (pre-)configured to enable full sensing only, partial sensing only, random resource selection only, or any combination(s) thereof.

SL-PBPS-CPS-Config information element
-- ASNISTART
-- TAG-SL-PBPS-CPS-CONFIG-START

SL-PBPS-CPS-Config-rl7 : :=
sl-AllowedResourceSelectionConfig-rl7
sl-MinNumCandidateSlotsPeriodic-rl7
sl-PBPS-OccasionReservePeriodList-rl7
sl-Additional-PBPS-Occasion-rl7
sl-CPS-WindowPeriodic-rl7
sl-MinNumCandidateSlotsAperiodic-rl7

SEQUENCE 1
ENUMERATED \{cl,c2,c3,c4,c5,c6,c7\} OPTIONAL, -- Need M INTEGER (1..32) OPTIONAL, -- Need M SEQUENCE (SIZE (1.16)) OF SL-ResourceReservePeriod-r16 OPTIONAL, -- Need M ENUMERATED \{ monitored \} OPTIONAL, -- Need M INTEGER (5..30) OPTIONAL, -- Need M INTEGER (1..32)

ETSI


--- Page 1010  ---


3GPP TS 38.331 version 17.0.0 Release 17
1009
ETSI TS 138331 V17.0.0 (2022-05)
```
sl-MinNumRssiMeasurementSlots-rl7
sl-DefaultCBR-RandomSelection-rl7
sl-DefaultCBR-PartialSensing-rl7
sl-CPS-WindowAperiodic-rl7
sl-PartialSensingInactiveTime-rl7
    \cdots
}
-- TAG-SL-PBPS-CPS-CONFIG-STOP
-- ASNISTOP
```

```
INTEGER (1..800)
INTEGER (0..100)
INTEGER (0..100)
INTEGER (0..30)
ENUMERATED { enabled, disabled }
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
```


ETSI


--- Page 1011  ---


3GPP TS 38.331 version 17.0.0 Release 17
1010
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-PBPS-CPS-Config field descriptions \\
\hline \begin{tabular}{l}
si-Additional-PBPS-Occasion \\
Indicates that UE additionally monitors periodic sensing occasions that correspond to a set of values. (see TS 38.214 [19], clause 8.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
si-AllowedResourceSelectionConfig \\
Indicates the allowed resource selection mechanism(s), i.e. full sensing only, partial sensing only, random resource selection only, or any combination(s) thereof. (see TS 38.214 [19], clause 8.1.4). Only c1, c4, c5 or c7 can be configured for a Rel-16 resource pool. \\
c1: only full sensing allowed \\
c2: only partial sensing allowed \\
c3: only random selection allowed \\
c4: full sensing+random selection allowed \\
c5: full sensing+ partial sensing allowed \\
c6: partial sensing + random selection allowed \\
c7: full sensing + partial sensing + random selection allowed.
\end{tabular} \\
\hline \begin{tabular}{l}
si-CPS-WindowAperiodic \\
Parameter that indicates the minimum size of contiguous partial sensing window in logical slot units for a resource (re)selection procedure and re-evaluation/pre-emption checking triggered by aperiodic transmission. (see TS 38.214 [19], clause 8.1.4). If not configured, the size of contiguous partial sensing window in logical slot units is 31.
\end{tabular} \\
\hline \begin{tabular}{l}
si-CPS-WindowPeriodic \\
Indicates the size of contiguous partial sensing window in logical slot units when UE performs periodic-based and contiguous partial sensing for a resource (re)selection procedure triggered by periodic transmission. If not configured, the size of contiguous partial sensing window in logical slot units is 31.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DefaultCBR-PartialSensing \\
Indicates default value of SL CBR measurement for a UE that is configured to perform partial sensing by its higher layer (including when SL DRX is configured) if the number of SL RSSI measurement slots over CBR measurement window is below [minNumRssiSlots], (see TS 38.214 [19], clause 8.1.6). Value 0 corresponds to 0 , value 1 to 0.01 , value 2 to 0.02 , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DefaultCBR-RandomSelection \\
Indicates default value of CBR measurement for a UE that performs random resource selection if no SL CBR measurement result over SL CBR measurement window, (see TS 38.214 [19], clause 8.1.6). Value 0 corresponds to 0 , value 1 to 0.01 , value 2 to 0.02 , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
si-MinNumCandidateSlotsAperiodic \\
Indicates the minimum number of \( Y^{\prime} \) slots that are included in the possible candidate resources corresponding to periodic-based partial sensing and/or contiguous partial sensing for resource (re)selection triggered by aperiodic transmission. (see TS 38.214 [19], clause 8.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MinNumCandidateSlotsPeriodic \\
Indicates the minimum number of \( Y \) slots that are included in the possible candidate resources.corresponding to periodic-based partial sensing for resource (re)selection triggered by periodic transmission. (see TS 38.214 [19], clause 8.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
sI-MinNumRssiMeasurementSlots \\
Indicates a threshold for a minimum number of SL RSSI measurement slots over CBR measurement window for which the SL RSSI is measured for a UE that is configured to perform partial sensing by its higher layer (including when SL DRX is configured). (see TS 38.214 [19], clause 8.1.6).
\end{tabular} \\
\hline \begin{tabular}{l}
si-PartialSensinginactiveTime \\
Indicates whether or not UE is required to perform SL reception of PSCCH and RSRP measurement for partial sensing on slots in SL DRX inactive time when partial sensing is configured by its higher layer. (see TS 38.214 [19], clause 8.1.4).
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PBPS-OccasionReservePeriodList \\
Indicates the subset of periodicity values from sl-ResourceReservePeriodList used to determine periodic sensing occasions in periodic-based partial sensing. If not configured, all periodicity values from sl-ResourceReservePeriodList are used to determine periodic sensing occasions in periodic-based partial sensing.(see TS 38.214 [19], clause 8.1.4).
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) SL-PDCP-Config

The IE SL-PDCP-Config is used to set the configurable PDCP parameters for a sidelink radio bearer.

ETSI


--- Page 1012  ---


3GPP TS 38.331 version 17.0.0 Release 17
1011
ETSI TS 138331 V17.0.0 (2022-05)

SL-PDCP-Config information element
```
-- ASNISTART
-- TAG-SL-PDCP-CONFIG-START
SL-PDCP-Config-rl6 ::=
    SEQUENCE \
    sl-PDCP-SN-Size-rl6
    sl-OutOfOrderDelivery
    ...
}
-- TAG-SL-PDCP-CONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-PDCP-Config field descriptions \\
\hline \begin{tabular}{l}
sl-DiscardTimer \\
Value in ms of discardTimer specified in TS 38.323 [5]. Value \( m s 50 \) corresponds to 50 ms , value \( m s 100 \) corresponds to 100 ms and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-OutOfOrderDelivery \\
Indicates whether or not outOfOrderDelivery specified in TS 38.323 [5] is configured. This field should be either always present or always absent, after the radio bearer is established.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PDCP-SN-Size \\
PDCP sequence number size for unicast NR sidelink communication, 12 or 18 bits, as specified in TS 38.323 [5]. For groupcast and broadcast NR sidelink communication, only 12 bits is applicable, as specified in 9.1.1.5.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline Setup & The field is mandatory present in case of sidelink DRB setup via dedicated signaling and in case of sidelink DRB configuration via system information and pre-configuration; otherwise the field is optionally present, need M . \\
\hline Setup2 & The field is mandatory present in case of sidelink DRB setup via dedicated signaling and in case of sidelink DRB configuration via system information and pre-configuration for RLC-AM and RLC-UM for unicast NR sidelink communication; otherwise the field is not present, Need M. \\
\hline
\end{tabular}
- SL-PSBCH-Config

The IE SL-PSBCH-Config indicates PSBCH transmission parameters on each sidelink band width part.
SL-PSBCH-Config information element
```
-- ASNISTART
-- TAG-SL-PSBCH-CONFIG-START
SL-PSBCH-Config-rl6::= SEQUENCE \
```

```
    ...
```


ETSI


--- Page 1013  ---


3GPP TS 38.331 version 17.0.0 Release 17
1012
ETSI TS 138331 V17.0.0 (2022-05)
\}

-- TAG-SL-PSBCH-CONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SL-PSBCH-Config field descriptions \\
\hline \begin{tabular}{l}
di-Alpha-PSBCH \\
Indicates alpha value for DL pathloss based power control for PSBCH. When the field is not configured the UE applies the value 1
\end{tabular} \\
\hline \begin{tabular}{l}
dI-P0-PSBCH \\
Indicates P0 value for DL pathloss based power control for PSBCH. If not configured, DL pathloss based power control is disabled for PSBCH.
\end{tabular} \\
\hline
\end{tabular}
- SL-PSSCH-TxConfigList

The IE SL-PSSCH-TxConfigList indicates PSSCH transmission parameters. When lower layers select parameters from the range indicated in IE SL-PSSCH-TxConfigList, the UE considers both configurations in IE SL-PSSCH-TxConfigList and the CBR-dependent configurations represented in IE SL-CBR-PriorityTxConfigList. Only one IE SL-PSSCH-TxConfig is provided per SL-TypeTxSync.

SL-PSSCH-TxConfigList information element
```
-- ASNISTART
-- TAG-SL-PSSCH-TXCONFIGLIST-START
SL-PSSCH-TxConfigList-rl6 := SEQUENCE (SIZE (l..maxPSSCH-TxConfig-rl6)) OF SL-PSSCH-TxConfig-rl6
SL-PSSCH-TxConfig-rl6 ::= SEQUENCE \
    sl-TypeTxSync-rl6
    sl-ThresUE-Speed-r16
    sl-ParametersAboveThres-rl
    sl-ParametersBelowThres-r16 SL-PSSCH-TxParameters-rl6,
    ...;
    [ [
    sl-ParametersAboveThres-vl650 SL-MinMaxMCS-List-rl6
    sl-ParametersBelowThres-vl650 SL-MinMaxMCS-List-rl6
    ] ]
}
SL-PSSCH-TxParameters-rl6 ::= SEQUENCE {
    sl-MinMCS-PSSCH-rl6
    sl-MaxMCS-PSSCH-rl6
    sl-MinSubChannel Num
    INSSCH-rl6 INEGER (1..27),
    ubchannelNumPSSCH-r16
    sl INTEGER (l..32)
}
-- TAG-SL-PSSCH-TXCONFIGLIST-STOP
```


ETSI


--- Page 1014  ---


3GPP TS 38.331 version 17.0.0 Release 17
1013
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

\begin{tabular}{|l|}
\hline SL-PSSCH-TxConfigList field descriptions \\
\hline \begin{tabular}{l}
sl-MaxTxTransNumPSSCH \\
Indicates the maximum transmission number (including new transmission and retransmission) for PSSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MaxTxPower \\
This field indicates the maximum transmission power for transmission on PSSCH and PSCCH .
\end{tabular} \\
\hline \begin{tabular}{l}
sI-MinMCS-PSSCH, sl-MaxMCS-PSSCH \\
This field indicates the minimum and maximum MCS values used for transmissions on PSSCH. The UE shall ignore the minimum and maximum MCS values used for the associated MCS table(s) in sl-ParametersAboveThres-r16 and sl-ParametersBelow Thres-r16 if sl-ParametersAbove Thres-v1650 and sl-ParametersBelow Thres-v1650 are present, respectively.
\end{tabular} \\
\hline \begin{tabular}{l}
si-MinSubChanneINumPSSCH, si-MaxSubChanneINumPSSCH \\
This field indicates the minimum and maximum number of sub-channels which may be used for transmissions on PSSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TypeTxSync \\
This field indicates the synchronization reference type. For configurations by the eNB/gNB, only gnbEnb can be configured; and for pre-configuration or when this field is absent, the configuration is applicable for all synchronization reference types.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ThresUE-Speed \\
This field indicates a UE absolute speed threshold.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline CBR & The field is optionally present, Need R, when the IE SL-PSSCH-TXParameters is present in SL-CBR-CommonTxConfigList, \\
& SL-UE-SelectedConfig, SIB12 or SidelinkPreconfigNR; otherwise the field is not present, need R. \\
\hline
\end{tabular}
- SL-QoS-Flowidentity

The IE SL-QoS-Flowldentity is used to identify a sidelink QoS flow.
SL-QoS-Flowidentity information element
-- ASNISTART
-- TAG-SL-QOS-FLOWIDENTITY-START
SL-QoS-FlowIdentity-r16 : := INTEGER (1..maxNrofSL-QFIs-r16)
-- TAG-SL-QOS-ELOWIDENTITY-STOP
-- ASNISTOP
- SL-QoS-Profile

The IE SL-QoS-Profile is used to give the QoS parameters for a sidelink QoS flow. Need codes or conditions specified for SL-QoS-Profile do not apply, in case SL-QoS-Profile is included in Sidelink UEInformationNR.

ETSI


--- Page 1015  ---


3GPP TS 38.331 version 17.0.0 Release 17
1014
ETSITS 138331 V17.0.0 (2022-05)

SL-QoS-Profile information element
```
-- ASNISTART
-- TAG-SL-QOS-PROFILE-START
SL-QOS-Profile-rl6 ::= SEQUENCE {
    sl-PQI-rl6
    sl-GFBR-rl6
    sl-MFBR-r16
    sl-Range-rl6
    ...
}
SL-PQI-rl6 ::= CHOICE \
        sl-StandardizedPQI-r16 INTEGER (0.255),
        sl-Non-StandardizedPQI-rl6 SEQUENCE {
            sl-ResourceType-rl6 ENUMERATED {gbr, non-GBR, delayCriticalGBR, sparel}
            sl-PriorityLevel-rl6 INTEGER (1..8)
            sl-PacketDelayBudget-rl6 INTEGER (0..1023)
            sl-PacketErrorRate-rl6 INTEGER (0..9)
            sl-AveragingWindow-r16 INTEGER (0.4095)
            sl-MaxDataBurstVolume-rl6 INTEGER (0.4095)
        ...
    }
}
-- TAG-SL-QOS-PROFILE-STOP
-- ASN1STOP
```


\begin{tabular}{|l|}
\hline SL-QoS-Profile field descriptions \\
\hline \begin{tabular}{l}
sl-GFBR \\
Indicate the guaranteed bit rate for a GBR QoS flow. The unit is: Kbit/s
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MFBR \\
Indicate the maximum bit rate for a GBR QoS flow. The unit is: Kbit/s
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PQI \\
This field indicates either the PQI for standardized PQI or non-standardized QoS parameters.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Range \\
This field indicates the range parameter of the Qos flow, as defined in clause 5.4.1.1.1, TS 23.287 [55]. It is present only for groupcast. The unit is meter.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1016  ---


3GPP TS 38.331 version 17.0.0 Release 17
1015
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-PQI field descriptions \\
\hline \begin{tabular}{l}
si-AveragingWindow \\
Indicates the Averaging Window for a QoS flow, and applies to GBR QoS flows only. Unit: ms . The default value of the IE is 2000 ms .
\end{tabular} \\
\hline \begin{tabular}{l}
sI-MaxDataBurstVolume \\
Indicates the Maximum Data Burst Volume for a QoS flow, and applies to delay critical GBR QoS flows only. Unit: byte.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PacketDelayBudget \\
Indicates the Packet Delay Budget for a QoS flow. Upper bound value for the delay that a packet may experience expressed in unit of 0.5 ms .
\end{tabular} \\
\hline \begin{tabular}{l}
si-PacketErrorRate \\
Indicates the Packet Error Rate for a QoS flow. The packet error rate is expressed as Scalar \( \times 10-\mathrm{k} \) where k is the Exponent.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PriorityLevel \\
Indicates the Priority Level for a QoS flow. Values ordered in decreasing order of priority, i.e. with 1 as the highest priority and 8 as the lowest priority.
\end{tabular} \\
\hline \begin{tabular}{l}
si-StandardizedPQI \\
Indicate the PQI for standardized PQI.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) SL-QuantityConfig

The IE SL-QuantityConfig specifies the layer 3 filtering coefficients for NR SL RSRP measurement for a destination.
SL-QuantityConfig information element
```
-- ASNISTART
-- TAG-SL-QUANTITYCONFIG-START
SL-QuantityConfig-rl6 ::=
    sl-FilterCoefficientDMRS-r16
    ...
}
-- TAG-SL-QuantityConfig-STOP
-- ASNISTOP
```

```
SEQUENCE \
```

    FilterCoefficient DEFAULT fc4,

\begin{tabular}{|l|}
\hline SL-QuantityConfig field descriptions \\
\hline \begin{tabular}{l}
sl-FilterCoefficientDMRS \\
DMRS based L3 filter configuration: \\
Specifies L3 fitler configuration for sidelink RSRP measurment result from the L1 fiter(s), as defined in TS 38.215 [9].
\end{tabular} \\
\hline
\end{tabular}
- SL-RadioBearerConfig

The IE SL-RadioBearerConfig specifies the sidelink DRB configuration information for NR sidelink communication.
SL-RadioBearerConfig information element

-- ASNISTART
ETSI


--- Page 1017  ---


3GPP TS 38.331 version 17.0.0 Release 17
1016
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-SL-RADIOBEARERCONFIG-START
SL-RadioBearerConfig-rl6 ::= SEQUENCE \
    slrb-Uu-ConfigIndex-rl6
    sl-SDAP-Config-rl6
```

```
            m400, m420, m450, m480, m500, m550, m600, m700, m1000, spare9, spare8, spare7, spare6,
            spare5, spare4, spare3, spare2, sparel} OPTIONAL, -- Need R
\cdots
```

\}
-- TAG-SL-RADIOBEARERCONEIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SL-RadioBearerCoonfig field descriptions \\
\hline \begin{tabular}{l}
sI-PDCP-Config \\
This field indicates the PDCP parameters for the sidelink DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SDAP-Config \\
This field indicates how to map sidelink QoS flows to sidelink DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
sirb-Uu-Configindex \\
This field indicates the index of sidelink DRB configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TransRange \\
This field indicates the transmission range of the sidelink DRB. The unit is meter.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline SLRBSetup & \begin{tabular}{l} 
The field is mandatory present in case of sidelink DRB setup via the dedicated signalling and in case of sidelink DRB \\
configuration via system information and pre-configuration; otherwise the field is optionally present, need M.
\end{tabular} \\
\hline
\end{tabular}
- SL-RelayUE-Config

The IE SL-RelayUE-Config specifies the configuration information for NR sidelink U2N Relay UE.
SL-RelayUE-Config information element
```
-- ASNISTART
-- TAG-SL-RELAYUE-CONFIG-START
SL-RelayUE-Config-rl7::= SEQUENCE {
    threshHighRelay-rl7
    threshLowRelay-rl7
    hystMaxRelay-rl7
    hystMinRelay-rl7
}
-- TAG-SL-RELAYUE-CONFIG-STOP
    -- TAG-SL-RELAYUE-CONFIG-STOP
```

```
SEQUENCE \
    RSRP-Range OPTIONAL, -- Need R
    RSRP-Range OPTIONAL, -- Need R
    Hysteresis OPTIONAL, -- Cond ThreshHighRelay
    Hysteresis OPTIONAL -- Cond ThreshLowRelay
```


ETSI


--- Page 1018  ---


3GPP TS 38.331 version 17.0.0 Release 17
1017
ETSI TS 138331 V17.0.0 (2022-05)

-- ASNISTOP

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline ThreshHighRelay & This field is mandatory present if threshHighRelay is included. Otherwise, the field is absent, Need R. \\
\hline ThreshLowRelay & This field is mandatory present if threshLowRelay is included. Otherwise, the field is absent, Need R. \\
\hline
\end{tabular}
- SL-RemoteUE-Config

The IE SL-RemoteUE-Config specifies the configuration information for NR sidelink U2N Remote UE.
SL-RemoteUE-Config information element
```
-- ASNISTART
-- TAG-SL-REMOTEUE-CONFIG-START
SL-RemoteUE-Config-rl7::= SEQUENCE {
    threshHighRemote-rl7
    hystMaxRemote-rl7
    sl-ReselectionConfig-rl7
}
SL-ReselectionConfig-rl7:: SEQUENCE {
    sl-RSRP-Thresh-rl7
    sl-FilterCoefficient-RSRP-rl7
    sl-HystMin-rl7
}
-- TAG-SL-REMOTEUE-CONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline ThreshHighRemote & This field is mandatory present if threshHighRemote is included. Otherwise, the field is absent, Need R. \\
\hline
\end{tabular}
- SL-ReportConfigList

The IE SL-ReportConfigList concerns a list of SL measurement reporting configurations to add or modify for a destination.
SL-ReportConfigList information element
-- ASNISTART
-- TAG-SL-REPORTCONFIGLIST-START

SL-ReportConfigList-rl6 : : SEQUENCE (SIZE (l..maxNrofSL-ReportConfigId-rl6)) OF SL-ReportConfigInfo-rl6

ETSI


--- Page 1019  ---


3GPP TS 38.331 version 17.0.0 Release 17
1018
ETSI TS 138331 V17.0.0 (2022-05)
```
SL-ReportConfigInfo-rl6 ::=
    sl-ReportConfigId-rl6
    sl-ReportConfig-rl6
    ...
}
SL-ReportConfigId-rl6 ::=
SL-ReportConfig-rl6 ::=
    sl-ReportType-rl6
        sl-Periodical-rl6
        sl-EventTriggered-r16
        ...
    },
    ...
}
SL-PeriodicalReportConfig-rl6 ::=
    sl-ReportInterval-rl6
    sl-ReportAmount-rl6
    sl-ReportQuantity-rl6
    sl-RS-Type-rl6
    ...
}
SL-EventTriggerConfig-rl6 ::=
    sl-EventId-rl6
        eventSl-rl6
            sl-Threshold-rl6
            sl-ReportOnLeave-rl6
            sl-Hysteresis-rl6
            sl-TimeToTrigger-rl6
            ...
        },
        eventS2-r16
            s2-Threshold-rl6
            sl-ReportOnLeave-r16
            sl-Hysteresis-rl6
            sl-TimeToTrigger-rl6
            ...
        },
        ...
    },
    sl-ReportInterval-r16
    sl-ReportAmount-rl6
    sl-ReportQuantity-rl6
    sl-RS-Type-rl6
    ...
}
SL-MeasReportQuantity-rl6 ::=
    sl-RSRP-r16
    ...
}
```

```
SEQUENCE \
    SL-ReportConfigId-r16,
    SL-ReportConfig-rl6,
```

```
INTEGER (1..maxNrofSL-ReportConfigId-r16)
SEQUENCE \
    CHOICE \
        SL-PeriodicalReportConfig-r16,
        SL-EventTriggerConfig-rl6,
SEQUENCE \
    ReportInterval,
    ENUMERATED {rl, r2, r4, r8, rl6, r32, r64, infinity},
    SL-MeasReportQuantity-rl6,
    SL-RS-Type-rl6,
SEQUENCE \
    CHOICE {
        SEQUENCE \
            SL-MeasTriggerQuantity-rl6,
            BOOLEAN,
            Hysteresis,
            TimeToTrigger,
        SEQUENCE \
            SL-MeasTriggerQuantity-rl6,
            BOOLEAN,
            Hysteresis,
            TimeToTrigger,
    ReportInterval,
        ENUMERATED {rl, r2, r4, r8, rl6, r32, r64, infinity},
        SL-MeasReportQuantity-rl6,
        SL-RS-Type-rl6,
CHOICE \
    BOOLEAN,
```


ETSI


--- Page 1020  ---


3GPP TS 38.331 version 17.0.0 Release 17
1019
ETSI TS 138331 V17.0.0 (2022-05)
```
SL-MeasTriggerQuantity-rl6 ::=
    sl-RSRP-r16
    ...
}
SL-RS-Type-rl6 ::= ENUMERATED {dmrs, spare3, spare2, sparel}
-- TAG-SL-REPORTCONFIGLIST-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-ReportType \\
Type of the configured sidelink measurement report. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-EventTriggerConfig field descriptions \\
\hline \begin{tabular}{l}
si-Eventid \\
Choice of sidelink measurement event triggered reporting criteria.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ReportAmount \\
Number of sidelink measurement reports applicable for si-EventTriggered report type.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Reportinterval \\
Indicates the interval between periodical reports (i.e., when sl-ReportAmount exceeds 1) for si-EventTriggered report type.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ReportOnLeave \\
indicates whether or not the UE shall initiate the sidelink measurement reporting procedure when the leaving condition is met for a frequency in sl-FrequencyTriggeredList, as specified in 5.8.10.4.1.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ReportQuantity \\
The sidelink measurement quantities to be included in the sidelink measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TimeToTrigger \\
Time during which specific criteria for the event needs to be met in order to trigger a sidelink measurement report.
\end{tabular} \\
\hline \begin{tabular}{l}
sN-Threshold \\
Threshold used for events S1 and S2 specified in clauses 5.8.10.4.2 and 5.8.10.4.3, respectively.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-PeriodicalReportConfig field descriptions \\
\hline \begin{tabular}{l}
si-ReportAmount \\
Number of sidelink measurement reports applicable for si-Periodical report type.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Reportinterval \\
Indicates the interval between periodical reports (i.e., when sl-ReportAmount exceeds 1) for sl-Periodical report type.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ReportQuantity \\
The sidelink measurement quantities to be included in the sidelink measurement report.
\end{tabular} \\
\hline
\end{tabular}
- SL-ResourcePool

The IE SL-ResourcePool specifies the configuration information for NR sidelink communication resource pool.

ETSI


--- Page 1021  ---


3GPP TS 38.331 version 17.0.0 Release 17
1020
ETSI TS 138331 V17.0.0 (2022-05)

SL-ResourcePoo/ information element
```
-- ASNISTART
-- TAG-SL-RESOURCEPOOL-START
SL-ResourcePool-rl6 ::= SEQUENCE {
    sl-PSCCH-Config-rl6
    sl-PSSCH-Config-rl6
    sl-PSFCH-Config-rl6
    sl-SyncAllowed-rl6
    sl-SubchannelSize-rl6
    dumary 
    sl-StartRB-Subchannel-rl6
    sl-NumSubchannel-rl6
    sl-Additional-MCS-Table-rl6
    sl-ThreshS-RSSI-CBR-r16
    sl-TimeWindowSizeCBR-r16
    sl-TimeWindowSizeCR-r16
    sl-PTRS-Config-r16
    sl-UE-SelectedConfigRP-r16
    sl-RxParametersNcell-rl6
        sl-TDD-Configuration-rl6
        sl-SyncConfigIndex-rl6
    }
    sl-ZoneConfigMCR-List-rl6 SEQUENCE (SIZE (16)) OF SL-ZoneConfigMCR-rl6
    sl-FilterCoefficient-rl6 FilterCoefficient
    sl-RB-Number-rl6
    sl-PreemptionEnable-rl6 ENUMERATED {enabled, pll, pl2, pl3, pl4, pl5, pl6, pl7, pl8}
    sl-PriorityThreshold-UL-URLLC-r16 INTEGER (1..9)
    sl-PriorityThreshold-r16 INTEGER (1.9)
    sl-X-Overhead-rl6 ENUMERATED {n0,n3, n6, n9}
    sl-PowerControl-rl6 SL-PowerControl-rl6
    sl-TxPercentageList-r16 SL-TxPercentageList-r16
    sl-MinMaxMCS-List-rl6 SL-MinMaxMCS-List-rl6
    ...;
    [ [
```

```
    ]],
    [ [
```

```
    ]]
}
SL-ZoneConfigMCR-r16 ::= SEQUENCE \
    sl-ZoneConfigMCR-Index-r16
    INTEGER (0..15)
            ENUMERATED [m20, m50, m80, m100, m120, m150, m180, m200, m220, m250, m270, m300, m350,
                m370, m400, m420, m450, m480, m500, m550, m600, m700, m1000, spare9, spare8,
                spare7, spare6, spare5, spare4, spare3, spare2, sparel}
    sl-ZoneConfig-rl6
    ...
}
```


ETSI


--- Page 1022  ---


3GPP TS 38.331 version 17.0.0 Release 17
1021
ETSI TS 138331 V17.0.0 (2022-05)
```
SL-SyncAllowed-rl6 ::=
    gnss-Sync-rl6
    gnbEnb-Sync-r16
    ue-Sync-rl6
}
SL-PSCCH-Config-rl6 ::=
    sl-TimeResourcePSCCH-r16
    sl-FreqResourcePSCCH-r16
    sl-DMRS-ScrambleID-rl6
    sl-NumReservedBits-rl6
    \cdots
}
SL-PSSCH-Config-rl6 ::=
    sl-PSSCH-DMRS-TimePatternList-rl6
    sl-BetaOffsets2ndSCI-rl6
    sl-Scaling-rl6
    ...
}
SL-PSFCH-Config-rl6 ::=
    sl-PSFCH-Period-rl6
    sl-PSFCH-RB-Set-rl6
    sl-NumMuxCS-Pair-rl6
    sl-MinTimeGapPSFCH-rl6
    sl-PSFCH-HopID-rl6
    sl-PSFCH-CandidateResourceType-rl6
    ...
}
SL-PTRS-Config-rl6 ::= SEQUENCE {
    sl-PTRS-FreqDensity-rl6
    sl-PTRS-TimeDensity-rl6
    sl-PTRS-RE-Offset-rl6
    ...
}
SL-UE-SelectedConfigRP-rl6 ::= SEQUENCE {
    sl-CBR-PriorityTxConfigList-rl6
    sl-Thres-RSRP-List-rl6
    sl-MultiReserveResource-rl6
    sl-MaxNumPerReserve-rl6
    sl-SensingWindow-rl6
    sl-SelectionWindowList-rl6
    sl-ResourceReservePeriodList-r16
    sl-RS-ForSensing-rl6
    ...,
    [ [
    sl-CBR-PriorityTxConfigList-vl650
    ]]
}
SL-ResourceReservePeriod-r16 ::=
    sl-ResourceReservePeriodl-rl6
```

```
SEQUENCE {
    ENUMERATED {true}
    ENUMERATED {true}
```

```
    ENUMERATED {true} OPTIONAL, -- Need. R
SEQUENCE {
ENUMERATED {n2, n3}
ENUMERATED {n10,n12, n15, n20, n25}
INTEGER (0..65535)
INTEGER (2..4)
SEQUENCE \
SEQUENCE (SIZE (1..3)) OF INTEGER (2.4) OPTIONAL, -- Need M
SEQUENCE (SIZE (4)) OF SL-BetaOffsets-rl6 OPTIONAL, -- Need. M
ENUMERATED {f0p5, f0p65, f0p8, fl}
SEQUENCE {
ENUMERATED {slO, sll, sl2, sl4}
BIT STRING (SIZE (10..275))
ENUMERATED {nl, n2, n3, n6}
ENUMERATED {sl2, sl3}
INTEGER (0..1023)
ENUMERATED {startSubCH, allocSubCH}
\textbf{ \textbf{ \textit{m}
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
PTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need M
OPTIONAL, -- Need. M
CHOICE {
ENUMERATED {ms0, msl00, ms200, ms300, ms400, ms500, ms600, ms700, ms800, ms900, ms1000},
```


ETSI


--- Page 1023  ---


3GPP TS 38.331 version 17.0.0 Release 17
1022
ETSI TS 138331 V17.0.0 (2022-05)
```
    sl-ResourceReservePeriod2-r16 INTEGER (1..99)
}
SL-SelectionWindowList-rl6 ::= SEQUENCE (SIZE (8)) OF SL-SelectionWindowConfig-rl6
SL-SelectionWindowConfig-rl6 ::= SEQUENCE {
    sl-Priority-rl6
    sl-SelectionWindow-rl6 ENUMERATED {nl, n5, nl0, n20}
}
SL-TxPercentageList-rl6 ::= SEQUENCE (SIZE (8)) OF SL-TxPercentageConfig-rl6
SL-TxPercentageConfig-rl6 ::= SEQUENCE [
    sl-Priority-rl6
    sl-TxPercentage-rl6 ENUMERATED {p20, p35, p50}
}
SL-MinMaxMCS-List-rl6 ::= SEQUENCE (SIZE (1..3)) OF SL-MinMaxMCS-Config-rl6
SL-MinMaxMCS-Config-rl6 ::= SEQUENCE \
    sl-MCS-Table-rl6
    sl-MinMCS-PSSCH-rl6
    sl-MaxMCS-PSSCH-rl6
}
SL-BetaOffsets-rl6 ::= INTEGER (0..31)
SL-PowerControl-rl6 ::= SEQUENCE {
    sl-MaxTransPower-rl6 INTEGER (-30..33),
```

```
    sl-PO-PSSCH-PSCCH-r16 INTEGER (-16..15)
    dl-PO-PSSCH-PSCCH-rl6 INTEGER (-16.15)
    dl-Alpha-PSFCH-
```

```
    ...
}
-- TAG-SL-RESOURCEPOOL-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-ZoneConfigMCR field descriptions \\
\hline \begin{tabular}{l}
si-TransRange \\
Indicates the communication range requirement for the corresponding s/-ZoneConfigMCR-Index.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ZoneConfig \\
Indicates the zone configuration for the corresponding s/-ZoneConfigMCR-Index.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ZoneConfigMCR-index \\
Indicates the codepoint of the communication range requirement field in SCl .
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1024  ---


3GPP TS 38.331 version 17.0.0 Release 17
1023
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-ResourcePoo/ field descriptions \\
\hline \begin{tabular}{l}
dummy \\
This field is not used in the specification. If received it shall be ignored by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Additional-MCS-Table \\
Indicates the MCS table(s) additionally used in the resource pool. 64QAM table is (pre-)configured as default. Zero, one or two can be additionally (pre-)configured using the 256QAM and/or low-SE MCS tables. If two MCS tables are indicated, 256QAM MCS table is the \( 1^{\text {st }} \) table and qam64lowSE MCS table is the \( 2^{\text {nd }} \) table as specified in TS 38.214 [19], clause 8.1.3.1.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-FilterCoefficient \\
This field indicates the filtering coefficient for long-term measurement and reference signal power derivation used for sidelink open-loop power control.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-InterUE-CoordinationConfig \\
Indicates the configured sidelink inter-UE coordination parameters.
\end{tabular} \\
\hline \begin{tabular}{l}
si-NumSubchannel \\
Indicates the number of subchannels in the corresponding resource pool, which consists of contiguous PRBs only.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PBPS-CPS-Config \\
Indicates configuration information for the operation of full sensing only, partial sensing only, random resource selection only, or any combination(s) configured.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PreemptionEnable \\
Indicates whether pre-emption is disabled or enabled in a resource pool. If the field is present and the value is pl1,pl2, and so on (but not enabled), it means that pre-emption is enabled and a priority level p_preemption is configured. If the field is present and the value is enabled, the pre-emption is enabled (but p_preemption is not configured) and pre-emption is applicable to all levels.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-Priority Threshold-UL-URLLC \\
Indicates the threshold used to determine whether NR sidelink transmission is prioritized over uplink transmission of priority index 1 as specified in TS 38.213[13], clause 16.2.4.3, or whether PUCCH transmission carrying SL HARQ is prioritized over PUCCH transmission carrying UCI of priority index 1 if they overlap in time as specified in TS 38.213 [13], clause 9.2.5.0.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PriorityThreshold \\
Indicates the threshold used to determine whether NR sidelink transmission is prioritized over uplink transmission of priority index 0 as specified in TS 38.213[13], clause 16.2.4.3, or whether PUCCH transmission carrying SL HARQ is prioritized over PUCCH transmission carrying UCI of priority index 0 if they overlap in time as specified in TS 38.213 [13], clause 9.2.5.0.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RB-Number \\
Indicates the number of PRBs in the corresponding resource pool, which consists of contiguous PRBs only. The remaining RB cannot be used (See TS 38.214[19], clause 8).
\end{tabular} \\
\hline \begin{tabular}{l}
sl-StartRB-Subchannel \\
Indicates the lowest RB index of the subchannel with the lowest index in the resource pool with respect to the lowest RB index of a SL BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-SubchannelSize \\
Indicates the minimum granularity in frequency domain for the sensing for PSSCH resource selection in the unit of PRB.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SyncAllowed \\
Indicates the allowed synchronization reference(s) which is (are) allowed to use the configured resource pool.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SyncConfigindex \\
Indicates the synchronisation configuration that is associated with a reception pool, by means of an index to the corresponding entry SL-SyncConfigList of in SIB12 for NR sidelink communication.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TDD-Configuration \\
Indicates the TDD configuration associated with the reception pool of the cell indicated by si-SyncConfigindex.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-ThreshS-RSSI-CBR \\
Indicates the S-RSSI threshold for determining the contribution of a sub-channel to the CBR measurement. Value 0 corresponds to -112 dBm , value 1 to -110 dBm , value n to ( \( -112+\mathrm{n}^{\star} 2 \) ) dBm, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TimeResource \\
Indicates the bitmap of the resource pool, which is defined by repeating the bitmap with a periodicity during a SFN or DFN cycle.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1025  ---


3GPP TS 38.331 version 17.0.0 Release 17
1024
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
sI-TimeWindowSizeCBR \\
Indicates the time window size for CBR measurement.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TimeWindowSizeCR \\
Indicates the time window size for CR evaluation.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-TxPercentageList \\
Indicates the portion of candidate single-slot PSSCH resources over the total resources. Value p20 corresponds to 20\%, and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-X-Overhead \\
Accounts for overhead from CSI-RS, PT-RS. If the field is absent, the UE applies value \( n 0 \) (see TS 38.214 [19], clause 5.1.3.2).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-SyncAllowed field descriptions \\
\hline \begin{tabular}{l}
gnbEnb-Sync \\
If configured, the (pre-) configured resources can be used if the UE is directly or indirectly synchronized to eNB or gNB (i.e., synchronized to a reference UE which is directly synchronized to eNB or gNB).
\end{tabular} \\
\hline \begin{tabular}{l}
gnss-Sync \\
If configured, the (pre-) configured resources can be used if the UE is directly or indirectly synchronized to GNSS (i.e., synchronized to a reference UE which is directly synchronized to GNSS).
\end{tabular} \\
\hline \begin{tabular}{l}
ue-Sync \\
If configured, the (pre-) configured resources can be used if the UE is synchronized to a reference UE which is not synchronized to eNB, gNB and GNSS directly or indirectly.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline \\
\hline \begin{tabular}{l}
sl-FreqResourcePSCCH \\
Indicates the number of PRBs for PSCCH in a resource pool where it is not greater than the number PRBs of the subchannel.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DMRS-ScramblelD \\
Indicates the initialization value for PSCCH DMRS scrambling.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-NumReservedBits \\
Indicates the number of reserved bits in first stage SCI.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TimeResourcePSCCH \\
Indicates the number of symbols of PSCCH in a resource pool.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-PSSCH-Config field descriptions \\
\hline \begin{tabular}{l}
sI-BetaOffsets2ndSCI \\
Indicates candidates of beta-offset values to determine the number of coded modulation symbols for second stage SCI. The value indicates the index of Table 9.3-2 of TS 38.213 [13].
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PSSCH-DMRS-TimePatternList \\
Indicates the set of PSSCH DMRS time domain patterns in terms of PSSCH DMRS symbols in a slot that can be used in the resource pool.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Scaling \\
Indicates a scaling factor to limit the number of resource elements assigned to the second stage SCI on PSSCH. Value f0p5 corresponds to 0.5 , value f0p65 corresponds to 0.65 , and so on.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1026  ---


3GPP TS 38.331 version 17.0.0 Release 17
1025
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-PSFCH-Config field descriptions \\
\hline \begin{tabular}{l}
si-MinTimeGapPSFCH \\
The minimum time gap between PSFCH and the associated PSSCH in the unit of slots.
\end{tabular} \\
\hline \begin{tabular}{l}
si-NumMuxCS-Pair \\
Indicates the number of cyclic shift pairs used for a PSFCH transmission that can be multiplexed in a PRB.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PSFCH-CandidateResourceType \\
Indicates the number of PSFCH resources available for multiplexing HARQ-ACK information in a PSFCH transmission (see TS 38.213 [13], clause 16.3).
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PSFCH-HopID \\
Scrambling ID for sequence hopping of the PSFCH used in the resource pool.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PSFCH-Period \\
Indicates the period of PSFCH resource in the unit of slots within this resource pool. If set to sil, no resource for PSFCH, and HARQ feedback for all transmissions in the resource pool is disabled.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PSFCH-RB-Set \\
Indicates the set of PRBs that are actually used for PSFCH transmission and reception. The leftmost bit of the bitmap refers to the lowest RB index in the resource pool, and so on. Value 0 in the bitmap indicates that the corresponding PRB is not used for PSFCH transmission and reception while value 1 indicates that the corresponding PRB is used for PSFCH transmission and reception (see TS 38.213 [13]).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-PTRS-Config field descriptions \\
\hline \begin{tabular}{l}
sI-PTRS-FreqDensity \\
Presence and frequency density of SL PT-RS as a function of scheduled BW. If the field is not configured, the UE uses K_PT-RS \( =2 \)
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PTRS-TimeDensity \\
Presence and time density of SLPT-RS as a function of MCS. If the field is not configured, the UE uses L_PT-RS \( =1 \)
\end{tabular} \\
\hline \begin{tabular}{l}
si-PTRS-RE-Offset \\
Indicates the subcarrier offset for SL PT-RS. If the field is not configured, the UE applies the value offset 00
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1027  ---


3GPP TS 38.331 version 17.0.0 Release 17
1026
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-UE-SelectedConfigRP field descriptions \\
\hline \begin{tabular}{l}
sI-CBR-PriorityTxConfigList \\
Indicates the mapping between PSSCH transmission parameter (such as MCS, PRB number, retransmission number, CR limit) sets by using the indexes of the configurations in sl-CBR-PSSCH-TxConfigList, CBR ranges by using the indexes to the entry of the CBR range configurations in s/-CBR-RangeConfigList, and priority ranges. It also indicates the default PSSCH transmission parameters to be used when CBR measurement results are not available, and MCS range for the MCS tables used in the resource pool. The field sl-CBR-PriorityTxConfigList-v1650 is present only when si-CBR-Priority TxConfigList-r16 is configured.
\end{tabular} \\
\hline \begin{tabular}{l}
si-MaxNumPerReserve \\
Indicates the maximum number of reserved \( \mathrm{PSCCH} / \mathrm{PSSCH} \) resources that can be indicated by an SCI.
\end{tabular} \\
\hline \begin{tabular}{l}
si-MultiReserveResource \\
Indicates if it is allowed to reserve a sidelink resource for an initial transmission of a TB by an SCI associated with a different TB, based on sensing and resource selection procedure.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ResourceReservePeriodList \\
Set of possible resource reservation period allowed in the resource pool in the unit of ms. Up to 16 values can be configured per resource pool. The value \( m s 0 \) is always configured.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-RS-ForSensing \\
Indicates whether DMRS of PSCCH or PSSCH is used for L1 RSRP measurement in the sensing operation.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-SensingWindow \\
Parameter that indicates the start of the sensing window.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SelectionWindowList \\
Parameter that determines the end of the selection window in the resource selection for a TB with respect to priority indicated in SCI. Value n 1 corresponds to \( 1 * 2^{\mu} \), value n 5 corresponds to \( 5^{\star} 2^{\mu} \), and so on, where \( \mu=0,1,2,3 \) refers to SCS \( 15,30,60,120 \mathrm{kHz} \) respectively.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Thres-RSRP-List \\
Indicates a list of 64 thresholds, and the threshold should be selected based on the priority in the decoded SCI and the priority in the SCI to be transmitted. A resource is excluded if it is indicated or reserved by a decoded SCI and PSSCH/PSCCH RSRP in the associated data resource is above a threshold.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline SL-PowerControl field descriptions \\
\hline \begin{tabular}{l}
sl-MaxTransPower \\
Indicates the maximum value of the UE's sidelink transmission power on this resource pool. The unit is dBm.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Alpha-PSSCH-PSCCH \\
Indicates alpha value for sidelink pathloss based power control for \( \mathrm{PSCCH} / \mathrm{PSSCH} \) when si-PO-PSSCH-PSCCH is configured. When the field is absent the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-P0-PSSCH-PSCCH \\
Indicates P0 value for sidelink pathloss based power control for PSCCH/PSSCH. If not configured, sidelink pathloss based power control is disabled for PSCCH/PSSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
di-Alpha-PSSCH-PSCCH \\
Indicates alpha value for downlink pathloss based power control for \( \mathrm{PSCCH} / \mathrm{PSSCH} \) when dl-PO-PSSCH-PSCCH is configured. When the field is absent the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
dI-P0-PSSCH-PSCCH \\
Indicates P0 value for downlink pathloss based power control for PSCCH/PSSCH. If not configured, downlink pathloss based power control is disabled for PSCCH/PSSCH.
\end{tabular} \\
\hline \begin{tabular}{l}
di-Alpha-PSFCH \\
Indicates alpha value for downlink pathloss based power control for PSFCH when dl-PO-PSFCH is configured. When the field is absent the UE applies the value 1.
\end{tabular} \\
\hline \begin{tabular}{l}
dI-P0-PSFCH \\
Indicates P0 value for downlink pathloss based power control for PSFCH. If not configured, downlink pathloss based power control is disabled for PSFCH.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1028  ---


3GPP TS 38.331 version 17.0.0 Release 17
1027
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-MinMaxMCS-Config field descriptions \\
\hline \begin{tabular}{l}
sI-MaxMCS-PSSCH \\
Indicates the maximum MCS value when using the associated MCS table. If no MCS is configured, UE autonomously selects MCS from the full range of values.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MinMCS-PSSCH \\
Indicates the minimum MCS value when using the associated MCS table. If no MCS is configured, UE autonomously selects MCS from the full range of values.
\end{tabular} \\
\hline
\end{tabular}
- SL-RLC-BearerConfig

The IE SL-RLC-BearerConfig specifies the SL RLC bearer configuration information for NR sidelink communication.
SL-RLC-BearerConfig information element
```
-- ASNISTART
-- TAG-SL-RLC-BEARERCONFIG-START
SL-RLC-BearerConfig-rl6 ::=
    sl-RLC-BearerConfigIndex-rl6
    sl-ServedRadioBearer-r16
    sl-RLC-Config-rl6
    sl-MAC-LogicalChannelConfig-rl6
    ...
}
-- TAG-SL-RLC-BEARERCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-RLC-BearerConfig field descriptions \\
\hline \begin{tabular}{l}
si-MAC-LogicalChannelConfig \\
The field is used to configure MAC SL logical channel paramenters.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-RLC-BearerConfigindex \\
The index of the RLC bearer configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RLC-Config \\
Determines the RLC mode (UM, AM) and provides corresponding parameters.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ServedRadioBearer \\
Associates the sidelink RLC Bearer with a sidelink DRB. It indicates the index of SL radio bearer configuration, which is corresponding to the RLC bearer configuration.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline LCH-Setup & The field is mandatory present upon creation of a new sidelink logical channel via the dedicated signalling and in case of sidelink DRB configuration via system information and pre-configuration; otherwise the field is optionally present, Need M. \\
\hline LCH-SetupOnly & This field is mandatory present upon creation of a new sidelink logical channel via the dedicated signalling and in case of sidelink DRB configuration via system information and pre-configuration. Otherwise, it is absent, Need M. \\
\hline
\end{tabular}

ETSI


--- Page 1029  ---


3GPP TS 38.331 version 17.0.0 Release 17
1028
ETSI TS 138331 V17.0.0 (2022-05)
- SL-RLC-BearerConfigIndex

The IE SL-RadioBearerConfigIndex is used to identify a SL RLC bearer configuration.
SL-RadioBearerConfigindex information element
-- ASNISTART
-- TAG-SL-RLC-BEARERCONEIGINDEX-START

SL-RLC-BearerConfigIndex-rl6 : := INTEGER (1..maxSL-LCID-r16)
-- TAG-RLC-BEARERCONFIGINDEX-STOP
-- ASNISTOP
- SL-RLC-ChannelConfig

The IE SL-RLC-ChannelConfig specifies the SL RLC bearer configuration information for PC5 Relay RLC channel between L2 U2N Relay UE and L2 U2N Remote UE.
SL-RLC-Channe/Config information element
-- ASNISTART
-- TAG-SL-RLC-RLC-CHANNEL-CONFIG-START

SL-RLC-ChannelConfig-rl7 : :=
sl-RLC-ChannelID-rl7
sl-RLC-Config-rl7
sl-MAC-LogicalChannelConfig-rl7
sl-PacketDelayBudget-rl7
...\}

SEQUENCE 1
SL-RLC-ChannelID-rl7,
SL-RLC-Config-rl6 OPTIONAL,
SL-LogicalChannelConfig-rl6 OPTIONAL,
INTEGER (0..1023) OPTIONAL,
-- TAG-SL-RLC-CHANNEL-CONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SL-RLC-ChannelConfig field descriptions \\
\hline \begin{tabular}{l}
sl-MAC-LogicalChannelConfig \\
The field is used to configure MAC SL logical channel paramenters.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-RLC-ChannellD \\
Indicates the PC5 Relay RLC channel in the link between L2 U2N Relay UE and L2 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RLC-Config \\
Determines the RLC mode (UM, AM) and provides corresponding parameters.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PacketDelayBudget \\
Indicates the Packet Delay Budget for a PC5 RLC bearer. Upper bound value for the delay that a packet may experience expressed in unit of 0.5 ms .
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1030  ---


3GPP TS 38.331 version 17.0.0 Release 17
1029
ETSI TS 138331 V17.0.0 (2022-05)
- SL-RLC-ChannellD

The IE SL-RLC-ChannellD is used to identify a PC5 RLC channel in the link between L2 U2N Relay UE and L2 U2N Remote UE.
SL-RLC-ChannellD information element
```
-- ASNISTART
-- TAG-SL-RLC-CHANNELID-START
SL-RLC-ChannelID-rl7 ::= INTEGER (1..maxSL-LCID-r16)
-- TAG-SL-RLC-CHANNELID-STOP
-- ASNISTOP
```

- \( \quad \) SL-RLC-Config

The IE \( S L \)-RLC-Config is used to specify the RLC configuration of sidelink DRB. RLC AM configuration is only applicable to the unicast NR sidelink communication.
SL-RLC-Config information element
```
-- ASNISTART
-- TAG-SL-RLC-CONFIG-START
SL-RLC-Config-rl6 ::=
    sl-AM-RLC-rl6
        sl-SN-FieldLengthAM-rl6
        sl-T-PollRetransmit-rl6
        sl-PollPDU-rl6
        sl-PollByte-rl6
        sl-MaxRetxThreshold-rl6
    ...
    },
    sl-UM-RLC-r16
        sl-SN-FieldLengthUM-rl6
    ...
    },
    ...
}
-- TAG-SL-RLC-CONFIG-STOP
-- ASNISTOP
-- ASNISTOP
```

```
CHOICE {
    SEQUENCE \
        SN-FieldLengthAM OPTIONAL, -- Cond SLRBSetup
        T-PollRetransmit,
            PollPDU,
            PollByte,
            ENUMERATED { tl, t2, t3, t4, t6, t8, t16, t32 },
    SEQUENCE \
        SN-FieldLengthUM OPTIONAL, -- Cond. SLRBSetup
        SN-FieldLengthUM
```

            CH

ETSI


--- Page 1031  ---


3GPP TS 38.331 version 17.0.0 Release 17
1030
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-RLC-Config field descriptions \\
\hline \begin{tabular}{l}
sl-MaxRetxThreshold \\
Parameter value of maxRetxThreshold for RLC AM for NR sidelink communications, see TS 38.322 [4]. Value \( t 1 \) corresponds to 1 retransmission, value \( t 2 \) corresponds to 2 retransmissions and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PollByte \\
Parameter value of pollByte for RLC AM for NR sidelink communications, see TS 38.322 [4]. Value \( k B 25 \) corresponds to 25 kBytes , value \( k B 50 \) corresponds to 50 kBytes and so on. infinity corresponds to an infinite amount of kBytes.
\end{tabular} \\
\hline \begin{tabular}{l}
s/-PollPDU \\
Parameter value of pollPDU for RLC AM for NR sidelink communications, seeTS 38.322 [4]. Value \( p 4 \) corresponds to 4 PDUs, value \( p 8 \) corresponds to 8 PDUs and so on. infinity corresponds to an infinite number of PDUs.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SN-FieldLength \\
This field indicates the RLC SN field size for NR sidelink communication, see TS 38.322 [4]. For groupcast and broadcast, only value size 6 ( 6 bits) is configured for the field si-SN-FieldLengthUM.
\end{tabular} \\
\hline \begin{tabular}{l}
si-T-PollRetransmit \\
Timer value of \( t \)-PollRetransmit for RLC AM for NR sidelink communications, see TS 38.322 [4], in milliseconds. Value ms 5 means 5 ms , value ms 10 means 10 ms and so on.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline SLRBSetup & \begin{tabular}{l} 
The field is mandatory present in case of sidelink DRB setup via the dedicated signalling and in case of sidelink DRB \\
configuration via system information and pre-configuration; otherwise the field is optionally present, need M.
\end{tabular} \\
\hline
\end{tabular}
- SL-ScheduledConfig

The IE SL-ScheduledConfig specifies sidelink communication configurations used for network scheduled NR sidelink communication.
SL-ScheduledConfig information element
```
-- ASNISTART
-- TAG-SL-SCHEDULEDCONFIG-START
SL-ScheduledConfig-rl6 ::=
    sl-RNTI-r16
    mac-MainConfigSL-rl6
    sl-CS-RNTI-rl6
    sl-PSFCH-TOPUCCH-rl6
    sl-ConfiguredGrantConfigList-rl6
    ...;
    [ [
    sl-DCI-ToSL-Trans-rl6
    ] ]
}
MAC-MainConfigSL-rl6 ::=
    sl-BSR-Config-rl6
    ul-PrioritizationThres-rl6
    sl-PrioritizationThres-rl6
    ...
}
```

```
SEQUENCE {
    RNTI-Value,
    MAC-MainConfigSL-rl6
    RNTI-Value
    SEQUENCE (SIZE (1..8)) OF INTEGER (0..15)
    SL-ConfiguredGrantConfigList-rl6
    SEQUENCE (SIZE (1..8)) OF INTEGER (1..32) OPTIONAL -- Need M
SEQUENCE \
    BSR-Config OPTIONAL, -- Need. M
    INTEGER (1..16) OPTIONAL, -- Need. M
    INTEGER (1..8) OPTIONAL, -- Need.M
```


ETSI


--- Page 1032  ---


3GPP TS 38.331 version 17.0.0 Release 17
1031
ETSI TS 138331 V17.0.0 (2022-05)
```
SL-ConfiguredGrantConfigList-rl6 ::= SEQUENCE {
```

```
}
-- TAG-SL-SCHEDULEDCONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-ScheduledConfig field descriptions \\
\hline \begin{tabular}{l}
sI-CS-RNTI \\
Indicate the RNTI used to scramble CRC of DCI format 3_0, see TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DCI-ToSL-Trans \\
Indicate the time gap between DCI reception and the first sidelink transmission scheduled by the DCI (see TS 38.214 [19], clause 8.1.2.1). Value 1 included in this field corresponds to 1 slot, value 2 corresponds to 2 slots and so on, based on the numerology of sidelink BWP.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PSFCH-ToPUCCH \\
For dynamic grant and configured grant type 2, this field configures the values of the PSFCH to PUCCH gap. The field PSFCH-to-HARQ_feedback timing indicator in DCI format \( 3 \_0 \) selects one of the configured values of the PSFCH to PUCCH gap.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-RNTI \\
Indicate the C-RNTI used for monitoring the network scheduling to transmit NR sidelink communication (i.e. the mode 1).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline MAC-MainConfigSL field descriptions \\
\hline \begin{tabular}{l}
sl-BSR-Config \\
This field is to configure the sidelink buffer status report.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PrioritizationThres \\
Indicates the SL priority threshold, which is used to determine whether SL TX is prioritized over UL TX, as specified in TS 38.321 [3]. Network does not configure the s/PrioritizationThres and the ul-PrioritizationThres to the UE separately.
\end{tabular} \\
\hline \begin{tabular}{l}
ul-PrioritizationThres \\
Indicates the UL priority threshold, which is used to determine whether SL TX is prioritized over UL TX, as specified in TS 38.321 [3]. Network does not configure the s/PrioritizationThres and the ul-PrioritizationThres to the UE separately.
\end{tabular} \\
\hline
\end{tabular}
- SL-SDAP-Config

The IE SL-SDAP-Config is used to set the configurable SDAP parameters for a Sidelink DRB.
SL-SDAP-Config information element
```
-- ASNISTART
-- TAG-SL-SDAP-CONFIG-START
SL-SDAP-Config-rl6 ::=
    sl-SDAP-Header-rl6
    sl-DefaultRB-rl6
    sl-MappedQoS-Flows-rl6
        sl-MappedQoS-FlowsList-r16
```

```
SEQUENCE \
    ENUMERATED {present, absent},
    BOOLEAN,
    CHOICE [
        SEQUENCE (SIZE (l..maxNrofSL-QFIs-r16)) OF SL-QOS-Profile-rl6,
```


ETSI


--- Page 1033  ---


3GPP TS 38.331 version 17.0.0 Release 17
1032
ETSI TS 138331 V17.0.0 (2022-05)
```
        sl-MappedQoS-FlowsListDedicated-r16 SL-MappedQoS-FlowsListDedicated-r16
```

```
    ...
}
SL-MappedQoS-FlowsListDedicated-r16 ::= SEQUENCE {
```

```
}
-- TAG-SL-SDAP-CONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline SL-SDAP-Config field descriptions \\
\hline \begin{tabular}{l}
sl-DefaultRB \\
Indicates whether or not this is the default sidelink DRB for this NR sidelink communication transmission destination. Among all configured instances of SL-SDAP-Config for this destination, this field shall be set to true in at most one instance of SL-SDAP-Config and to false in all other instances.
\end{tabular} \\
\hline \begin{tabular}{l}
si-MappedQoS-Flows \\
Indicates QoS flows to be mapped to the sidelink DRB. If the field is included in dedicated signalling, it is set to s/-MappedQoS-FlowsListDedicated; otherwise, it is set to s/Mapped QoS-FlowsList.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MappedQoS-FlowsList \\
Indicates the list of QoS profiles of the NR sidelink communication transmission destination mapped to this sidelink DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MappedQoS-Flows ToAddList \\
Indicates the list of SL QoS flows ID of the NR sidelink communication transmission destination to be additionally mapped to this sidelink DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MappedQoS-FlowsToReleaseList \\
Indicates the list of SL QoS flows ID of the NR sidelink communication transmission destination to be released from existing QoS flow to SLRB mapping of this sidelink DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-SDAP-Header \\
Indicates whether or not a SDAP header is present on this sidelink DRB. The field cannot be changed after a sidelink DRB is established. This field is set to present if the field sl-DefaultRB is set to true.
\end{tabular} \\
\hline
\end{tabular}
- SL-ServingCellInfo

The IE SL-ServingCellInfo is used to indicate L2 U2N Remote UE's serving cell information.
SL-ServingCellinfo information element
```
-- ASNISTART
-- TAG-SL-SERVINGCELLINFO-START
SL-ServingCellInfo-rl7 ::= SEQUENCE {
    sl-UEIdentityRemote-rl7 RNTI-Value,
    sl-PhysCellId-rl7 PhysCellId
}
-- TAG-SL-SERVINGCELLINFO-STOP
-- ASN1STOP
```


ETSI


--- Page 1034  ---


3GPP TS 38.331 version 17.0.0 Release 17
1033
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|}
\hline & SL-ServingCelllinfo field descriptions \\
\hline \begin{tabular}{l}
si-UEldentityRemote \\
Indicate the C-RNTI used in the PCell.
\end{tabular} & \\
\hline \begin{tabular}{l}
sl-PhysCellld \\
Indicates the PCI of the PCell.
\end{tabular} & \\
\hline
\end{tabular}
- SL-SourceIdentity

The IE SL-Sourceldentity is used to identify a source of a NR sidelink communication.
SL-Sourceldentity information element
```
-- ASNISTART
-- TAG-SL-SOURCEIDENTITY-START
SL-SourceIdentity-rl7 ::= BIT STRING (SIZE (24))
-- TAG-SL-SOURCEIDENTITY-STOP
-- ASNISTOP
```

- SL-SRAP-Config

The IE SL-SRAP-Config is used to set the configurable SRAP parameters used by L2 U2N Relay UE and L2 U2N Remote UE as specified in TS 38.351 [66].
SL-SRAP-Config information element
```
-- ASNISTART
-- TAG-SL-SRAP-CONFIG-START
SL-SRAP-Config-rl7 ::= SEQUENCE \
    sl-LocalIdentity-rl7
    sl-MappingToAddModList-rl7
    sl-MappingToReleaseList-rl7
    ...
}
SL-MappingToAddMod-rl7 ::= SEQUENCE {
    sl-RemoteUE-RB-Identity-rl7
    sl-Egress-RLC-Channel-Uu-rl7
    sl-Egress-RLC-Channel-PC5-rl7
    ...
}
SL-RemoteUE-RB-Identity-rl7 ::= CHOICE {
```


ETSI


--- Page 1035  ---


3GPP TS 38.331 version 17.0.0 Release 17
1034
ETSI TS 138331 V17.0.0 (2022-05)
```
    srb-Identity-rl7
    drb-Identity-rl7
    ...
}
```

-- TAG-SL-SRAP-CONFIG-STOP
-- ASNISTOP
```
INTEGER (O..ffsUpperLimit), -- Rapp note: Upper limit FFS, left open in agreed CR R2-2204226.
DRB-Identity,
```


\begin{tabular}{|l|}
\hline SL-SRAP-Config field descriptions \\
\hline \begin{tabular}{l}
si-Localldentity \\
Indicates the local UE ID of the L2 U2N Remote UE used in SRAP as specified in TS 38.351 [66].
\end{tabular} \\
\hline \begin{tabular}{l}
SL-MappingToAddModList \\
Indicates the list of mapping between the bearer identity of the L2 U2N Remote UE and the egress RLC channel as specified in TS 38.351 [66].
\end{tabular} \\
\hline \begin{tabular}{l}
SL-MappingToReleaseList \\
Indicates the list of mapping to be released.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-RemoteUE-RB-Identity \\
Identity of the end-to-end Uu bearer identity of the L2 U2N Remote UE.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Egress-RLC-Channel-Uu \\
Indicates the egress RLC channel on Uu Hop.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Egress-RLC-Channel-PC5 \\
Indicates the egress RLC channel on PC5 Hop.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline L2RelayUE & For L2 U2N Relay UE, the field is optionally present, Need M. Otherwise, it is absent. \\
\hline
\end{tabular}
- SL-SyncConfig

The IE SL-SyncConfig specifies the configuration information concerning reception of synchronisation signals from neighbouring cells as well as concerning the transmission of synchronisation signals for sidelink communication.

SL-SyncConfig information element
```
-- ASNISTART
-- TAG-SL-SYNCCONFIG-START
SL-SyncConfigList-rl6 ::=
SL-SyncConfig-rl6 ::=
    sl-SyncRefMinHyst-rl6
    sl-SyncRefDiffHyst-rl6
    sl-filterCoefficient-rl6
    sl-SSB-TimeAllocationl-rl6
    sl-SSB-TimeAllocation2-rl6
    sl-SSB-TimeAllocation3-rl6
    sl-SSID-rl6
```

```
SEQUENCE (SIZE (l..maxSL-SyncConfig-rl6)) OF SL-SyncConfig-rl6
SEQUENCE \
    ENUMERATED {dBO, dB3, dB6, dB9, dBl2} OPTIONAL, -- Need. R
    ENUMERATED {dBO, dB3, dB6, dB9, dBl2, dBinf}
    FilterCoefficient
    SL-SSB-TimeAllocation-rl6
    SL-SSB-TimeAllocation-rl6
    SL-SSB-TimeAllocation-rl6
    INTEGER (0..671)
```


\begin{tabular}{ll} 
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R
\end{tabular}

ETSI


--- Page 1036  ---


3GPP TS 38.331 version 17.0.0 Release 17
1035
ETSI TS 138331 V17.0.0 (2022-05)
```
    txParameters-rl6
        syncTxThreshIC-r16
        syncTxThreshOoC-r16
        syncInfoReserved-r16
    },
    gnss-Sync-rl6
    ...
}
SL-RSRP-Range-r16 ::=
SL-SSB-TimeAllocation-r16 ::=
    sl-NumSSB-WithinPeriod-rl6
    sl-TimeOffsetSSB-rl6
    sl-TimeInterval-rl6
}
-- TAG-SL-SYNCCONFIG-STOP
-- ASNISTOP
```

```
SEQUENCE {
    SL-RSRP-Range-r16
    SL-RSRP-Range-r16
    BIT STRING (SIZE (2))
ENUMERATED {true}
```

INTEGER (0. 13)
SEQUENCE 1
    ENUMERATED \{nl, \( n 2, n 4, n 8, n 16, n 32, n 64\} \)
    INTEGER (0.1279)
    INTEGER (0. . 639)

\begin{tabular}{ll} 
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL & -- Need. R \\
OPTIONAL, & -- Need. R
\end{tabular}

\begin{tabular}{|l|}
\hline SL-SyncConfig field descriptions \\
\hline \begin{tabular}{l}
gnss-Sync \\
If configured, the synchronization configuration is used for SLSS transmission/reception when the UE is synchronized to GNSS. If not configured, the synchronization configuration is used for SLSS transmission/reception when the UE is synchronized to eNB/gNB.
\end{tabular} \\
\hline \begin{tabular}{l}
si-SyncRefMinHyst \\
Hysteresis when evaluating a SyncRef UE using absolute comparison.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-SyncRefDiffHyst \\
Hysteresis when evaluating a SyncRef UE using relative comparison.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-NumSSB-WithinPeriod \\
Indicates the number of sidelink SSB transmissions within one sidelink SSB period. The applicable values are related to the subcarrier spacing and frequency as follows: \\
FR1, SCS \( =15 \mathrm{kHz}: 1 \) \\
FR1, SCS \( =30 \mathrm{kHz}: 1,2 \) \\
FR1, \( \mathrm{SCS}=60 \mathrm{kHz}: 1,2,4 \) \\
FR2, SCS \( =60 \mathrm{kHz}: 1,2,4,8,16,32 \) \\
FR2, SCS = \( 120 \mathrm{kHz}: 1,2,4,8,16,32,64 \)
\end{tabular} \\
\hline \begin{tabular}{l}
sl-TimeOffsetSSB \\
Indicates the slot offset from the start of sidelink SSB period to the first sidelink SSB.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Timeinterval \\
Indicates the slot interval between neighboring sidelink SSBs. This value is applicable when there are more than one sidelink SSBs within one sidelink SSB period.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-SSID \\
Indicates the ID of sidelink synchronization signal associated with different synchronization priorities.
\end{tabular} \\
\hline \begin{tabular}{l}
syncinfoReserved \\
Reserved for future use.
\end{tabular} \\
\hline \begin{tabular}{l}
syncTxThresh/C, syncTxThreshOoC \\
Indicates the thresholds used while in coverage and out of coverage, respectively. Value 0 corresponds to -infinity, value 1 to -115 dBm , value 2 to -110 dBm , and so on (i.e. in steps of 5 dBm ) until value 12, which corresponds to -60 dBm , while value 13 corresponds to +infinity.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1037  ---


3GPP TS 38.331 version 17.0.0 Release 17
1036
ETSI TS 138331 V17.0.0 (2022-05)
- SL-Thres-RSRP-List

IE SL-Thres-RSRP-List indicates a threshold used for sensing based UE autonomous resource selection (see TS 38.215 [9]). A resource is excluded if it is indicated or reserved by a decoded SCI and PSSCH/PSCCH RSRP in the associated data resource is above the threshold defined by IE SL-Thres-RSRP-List. Value 0 corresponds to minus infinity dBm , value 1 corresponds to -128 dBm , value 2 corresponds to -126 dBm , value \( n \) corresponds to \( (-128+(n-1) * 2) \mathrm{dBm} \) and so on, value 66 corresponds to infinity dBm .

SL-Thres-RSRP-List information element
```
-- ASNISTART
-- TAG-SL-THRES-RSRP-LIST-START
SL-Thres-RSRP-List-rl6 ::= SEQUENCE (SIZE (64)) OF SL-Thres-RSRP-rl6
SL-Thres-RSRP-rl6 ::= INTEGER (0..66)
-- TAG-SL-THRES-RSRP-LIST-STOP
-- ASNISTOP
```

- SL-TxPower

The IE SL-TxPower is used to limit the UE's sidelink transmission power on a carrier frequency. The unit is dBm . Value minusinfinity corresponds to -infinity.
SL-TxPower information element
```
-- ASN1START
-- TAG-SL-TXPOWER-START
SL-TxPower-rl6 ::= CHOICEl
    minusinfinity-rl6
    txPower-rl6
}
-- TAG-SL-TXPOWER-STOP
-- ASNISTOP
```

- SL-TypeTxSync

The IE SL-TypeTxSync indicates the synchronization reference type.
SL-TypeTxSync information element
```
-- ASNISTART
-- TAG-SL-TYPETXSYNC-START
```

Sl-TypeTxSync-rl6 : := ENUMERATED \{gnss, gnbEnb, ue\}

ETSI


--- Page 1038  ---


3GPP TS 38.331 version 17.0.0 Release 17
1037
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-SL-TYPETXSYNC-STOP
-- ASNISTOP
- SL-UE-SelectedConfig

IE SL-UE-SelectedConfig specifies sidelink communication configurations used for UE autonomous resource selection.
SL-UE-SelectedConfig information element
```
-- ASNISTART
-- TAG-SL-UE-SELECTEDCONFIG-START
SL-UE-SelectedConfig-r16 ::=
    sl-PSSCH-TxConfigList-rl6
    sl-ProbResourceKeep-rl6
    sl-ReselectAfter-rl6
    sl-CBR-CommonTxConfigList-rl6
    ul-PrioritizationThres-rl6
    sl-PrioritizationThres-rl6
    ...
}
```

```
SEQUENCE \
    SL-PSSCH-TxConfigList-rl6
    ENUMERATED {v0, v0dot2, v0dot4, v0dot6, v0dot8}
    ENUMERATED {nl, n2, n3, n4, n5, n6, n7, n8, n9}
    SL-CBR-CommonTxConfigList-rl6
    INTEGER (1..16)
    INTEGER (1..8)
```


\begin{tabular}{ll} 
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R \\
OPTIONAL, & -- Need. R
\end{tabular}
-- TAG-SL-UE-SELECTEDCONFIG-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline SL-UE-SelectedConfig field descriptions \\
\hline \begin{tabular}{l}
s/-PrioritizationThres \\
Indicates the SL priority threshold, which is used to determine whether SL TX is prioritized over UL TX, as specified in TS 38.321 [3]. Network does not configure the s/PrioritizationThres and the ul-PrioritizationThres to the UE separately.
\end{tabular} \\
\hline \begin{tabular}{l}
si-ProbResourceKeep \\
Indicates the probability with which the UE keeps the current resource when the resource reselection counter reaches zero for sensing based UE autonomous resource selection (see TS 38.321 [3]).
\end{tabular} \\
\hline \begin{tabular}{l}
si-PSSCH-TxConfigList \\
Indicates PSSCH TX parameters such as MCS, sub-channel number, retransmission number, associated to different UE absolute speeds and different synchronization reference types for UE autonomous resource selection.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-ReselectAfter \\
Indicates the number of consecutive skipped transmissions before triggering resource reselection for sidelink communication (see TS 38.321 [3]).
\end{tabular} \\
\hline \begin{tabular}{l}
ul-PrioritizationThres \\
Indicates the UL priority threshold, which is used to determine whether SL TX is prioritized over UL TX, as specified in TS 38.321 [3]. Network does not configure the s/PrioritizationThres and the ul-PrioritizationThres to the UE separately.
\end{tabular} \\
\hline
\end{tabular}
- SL-ZoneConfig

The IE SL-ZoneConfig is used to configure the zone ID related parameters.

ETSI


--- Page 1039  ---


3GPP TS 38.331 version 17.0.0 Release 17
1038
ETSI TS 138331 V17.0.0 (2022-05)

SL-ZoneConfig information element
```
-- ASNISTART
-- TAG-SL-ZONECONFIG-START
SL-ZoneConfig-rl6 ::=
    sl-ZoneLength-rl6
    ...
}
-- TAG-SL-ZONECONFIG-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline Sl-ZoneLength \\
Indicates the length of each geographic zone. \\
\hline
\end{tabular}
- \( \quad \) SLRB-Uu-ConfigIndex

The IE SLRB-Uu-ConfigIndex is used to identify a sidelink DRB configuration from the network side.
SLRB-Uu-Configindex information element
-- ASN1START
-- TAG-SLRB-UU-CONFIGINDEX-START
SLRB-Uu-ConfigIndex-rl6 : := INTEGER (1..maxNrofSLRB-r16)
-- TAG-SLRB-UU-CONFIGINDEX-STOP
-- ASNISTOP
6.3.6 MBS information elements
- CarrierFreqListMBS

The IE CarrierFreqListMBS is used to inform network of the frequencies on which the UE is receiving or interested to receive MBS broadcast service via a broadcast MRB
CarrierFreqListMBS information element
-- ASNISTART
-- TAG-CARRIEREREQLISTMBS-START

CarrierFreqListMBS-rl7 : : SEQUENCE (SIZE (l..maxFreqMBS-rl7)) OF ARFCN-ValueNR

ETSI


--- Page 1040  ---


3GPP TS 38.331 version 17.0.0 Release 17
1039
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-CARRIEREREQLISTMBS-STOP
-- ASNISTOP
- CFR-ConfigMCCH-MTCH

The IE \( C F R \)-ConfigMCCH-MTCH is used to configure the common frequency resource used for MCCH and MTCH reception.
CFR-ConfigMCCH-MTCH information element
```
-- ASNISTART
-- TAG-CFRCONFIGMCCHMTCH-START
CFR-ConfigMCCH-MTCH-rl7::= SEQUENCE [
    locationAndBandwidthBroadcast-rl7
    pdsch-ConfigMCCH-rl7
    commonControlResourceSetExt-rl7
}
LocationAndBandwidthBroadcast-rl7::= CHOICE [
    sameAsCoreset0-rl7
    sameAsSiblConfiguredLocationAndBW-rl7
    locationAndBandwidth-rl7
}
-- TAG-CFRCONFIGMCCHMTCH-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline CFR-ConfigMCCH-MTCH field descriptions \\
\hline \begin{tabular}{l}
commonControlResourceSetExt \\
An additional common control resource set which may be configured and used for searchSpaceMCCH/searchSpaceMTCHor UE-specific search space in the BWP where searchSpaceMCCH is configured. It is contained in the bandwidth of locationAndBandwidthBroadcast.
\end{tabular} \\
\hline \begin{tabular}{l}
locationAndBandwidthBroadcast \\
Indicates starting PRB and the number of PRBs of CFR used for MCCH and MTCH reception. \\
Value sameAsCoresetO means the CFR for broadcast has the same location and size as CORESET0. \\
Value sameAsSib1ConfiguredLocationAndBW means the CFR for broadcast has the same location and size as the locationAndBandwidth for initial BWP configured in SIB1. \\
Value locationAndBandwidth is used to configure CFR with bandwidth that is larger than the bandwidth for initial BWP configured in SIB1.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|c|c|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline NotS/B1CommonControlResource & The field is optional present in case commonControlResourceSet is not configured in SIB1, Need R, otherwise it is absent. \\
\hline
\end{tabular}
- DRX-ConfigPTM

The IE DRX-Config-PTM is used to configure DRX related parameters for PTM transmission as specified in TS 38.321 [3].

ETSI


--- Page 1041  ---


3GPP TS 38.331 version 17.0.0 Release 17
1040
ETSI TS 138331 V17.0.0 (2022-05)

DRX-Config-PTM information element
```
-- ASNISTART
-- TAG-DRX-CONFIGPTM-START
DRX-ConfigPTM-rl7 ::= SEQUENCE \
    drx-onDurationTimerPTM-rl7 CHOICE {
        subMilliSeconds
        INTEGER (1..31),
            msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60,
            ms80, msl00, ms200, ms300, ms400, ms500, ms600, ms800, ms1000, ms1200,
            msl600, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel
        }
    },
    drx-InactivityTimerPTM-rl7 ENUMERATED {
            ms0, msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60, ms80,
            ms100, ms200, ms300, ms500, ms750, ms1280, ms1920, ms2560, spare9, spare8,
            spare7, spare6, spare5, spare4, spare3, spare2, sparel
    },
    drx-HARQ-RTT-TimerDL-PTM-r17 INTEGER (0.56) OPTIONAL, -- CONd HAROFeedback
    drx-RetransmissionTimerDL-PTM-rl7 ENUMERATED {
            sl0, sll, sl2, sl4, sl6, sl8, sll6, sl24, sl33, sl40, sl64, sl80, sl96, slll2, sll28,
            sll60, sl320, sparel5, sparel4, sparel3, sparel2, sparell, sparel0, spare9,
            spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel
    }
    drx-LongCycleStartOffsetPTM-rl7 CHOICE {
        msl0 INTEGER(0..9),
        ms20 INTEGER(0..19),
        ms32 INTEGER(0..31),
        ms40 INTEGER(0..39),
        ms60 INTEGER(0..59),
        ms64 INTEGER(0..63),
        ms70 INTEGER(0..69),
        ms80 INTEGER(0..79),
        msl28 INTEGER(0..127),
        msl60 INTEGER(0..159),
        ms256 INTEGER(0..255),
        ms320 INTEGER(0..319),
        ms512 INTEGER(0..511),
        ms640 INTEGER(0..639),
        msl024 INTEGER(0..1023),
        msl280 INTEGER(0..1279),
        ms2048 INTEGER(0..2047),
        ms2560 INTEGER(0..2559),
        ms5120 INTEGER(0..5119),
        msl0240 INTEGER(0..10239)
    },
    drx-SlotOffsetPTM-rl7 INTEGER (0..31)
}
-- TAG-DRX-CONFIGPTM-STOP
-- ASNISTOP
```


ETSI


--- Page 1042  ---


3GPP TS 38.331 version 17.0.0 Release 17
1041
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline DRX-Config-PTM field descriptions \\
\hline \begin{tabular}{l}
drx-HARQ-RTT-Timer-DL-PTM \\
Value in number of symbols of the CFR where the transport block was received.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-InactivityTimerPTM \\
Value in multiple integers of \( 1 \mathrm{~ms} . \mathrm{ms} 0 \) corresponds to \( 0, \mathrm{~ms} 1 \) corresponds to \( 1 \mathrm{~ms}, \mathrm{~ms} 2 \) corresponds to 2 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-LongCycleStartOffsetPTM \\
drx-LongCycle-PTM in ms and drx-StartOffset-PTM in multiples of 1 ms .
\end{tabular} \\
\hline \begin{tabular}{l}
drx-onDurationTimerPTM \\
Value in multiples of \( 1 / 32 \mathrm{~ms} \) (subMilliSeconds) or in ms (milliSecond). For the latter, value ms 1 corresponds to 1 ms , value ms 2 corresponds to 2 ms , and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-RetransmissionTimer-DL-PTM \\
Value in number of slot lengths of the CFR where the transport block was received. value s \( / 0 \) corresponds to 0 slots, s \( / 1 \) corresponds to 1 slot, s \( / 2 \) corresponds to 2 slots, and So on.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-SlotOffsetPTM \\
Value in \( 1 / 32 \mathrm{~ms} \). Value 0 corresponds to 0 ms , value 1 corresponds to \( 1 / 32 \mathrm{~ms} \), value 2 corresponds to \( 2 / 32 \mathrm{~ms} \), and so on.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional Presence } & \multicolumn{1}{|c|}{ Explanation } \\
\hline HARQFeedback & \begin{tabular}{l} 
The field is mandatory present if HARQ feedback is enabled for a G-RNTI associated with this DRX configuration. It is \\
absent otherwise.
\end{tabular} \\
\hline
\end{tabular}
- MBS-NeighbourCellList

The IE MBS-NeighbourCellList indicates a list of neighbour cells where ongoing MBS sessions provided via broadcast MRB in the current cells are also provided.
-- ASNISTART
-- TAG-MBS-NEIGHBOURCELLLIST-START
MBS-NeighbourCellList-rl7 : : SEQUENCE (SIZE (O...maxNeighCell-MBS-rl7)) OF PCI-ARFCN-rl7
PCI-ARFCN-rl7 : := SEQUENCE l
physCellId-rl7 PhysCellId,
carrierFreq-rl7
ARFCN-ValueNR
OPTIONAL -- Need S
\}
-- TAG-MBS-NEIGHBOURCELLLIST-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline MBS-NeighbourCellList field description \\
\hline \begin{tabular}{l}
carrierFreq \\
Indicates the frequency of the neighbour cell indicated by physCellid. Absence of the IE means that the neighbour cell is on the same frequency as the current cell.
\end{tabular} \\
\hline
\end{tabular}
- MBS-ServiceList

The IE MBS- ServiceList is used to inform the network of the MBS services that the UE is receiving or interested to receive.

ETSI


--- Page 1043  ---


3GPP TS 38.331 version 17.0.0 Release 17
1042
ETSI TS 138331 V17.0.0 (2022-05)

MBS-ServiceList information element
```
-- ASNISTART
-- TAG-MBSSERVICELIST-START
MBS-ServiceList-rl7 := SEQUENCE (SIZE (O..maxNrofMBS-ServiceListPerUE-rl7)) OF MBS-ServiceInfo-rl7
MBS-ServiceInfo-rl7 ::= SEQUENCE {
    tmgi-rl7
}
-- TAG-MBSSERVICELIST-STOP
-- ASNISTOP
```

- MBS-SessionInfoList

The IE MBS-SessionInfoList provides the list of ongoing MBS broadcast sessions transmitted via broadcast MRB and, for each MBS broadcast session, the associated G-RNTI and scheduling information.

MBS-SessioninfoList information element
```
-- ASNISTART
-- TAG-MBS-SESSIONINFOLIST-START
MBS-SessionInfoList-rl7 := SEQUENCE (SIZE (O..maxNrofMBS-Session-rl7)) OF MBS-SessionInfo-rl7
MBS-SessionInfo-rl7 ::= SEQUENCE [
    mbs-SessionId-rl7 TMGI-rl7,
    g-RNTI-rl7 RNTI-Value,
    mrb-ListBroadcast-rl7 MRB-ListBroadcast-rl7 OPTIONAL,
    mtch-SchedulingInfo-rl7 DRX-ConfigPTM-Index-rl7
    OPTIONAL, -- Need. S
    pdsch-ConfigIndex-rl7 PDSCH-ConfigIndex-rl7 OPTIONAL, -- Need.S
    mtch-SSB-MappingWindowIndex-rl7 MTCH-SSB-MappingWindowIndex-rl7 OPTIONAL -- Need. R
}
DRX-ConfigPTM-Index-rl7 ::= INTEGER (O..maxNrofDRX-ConfigPTM-l-rl7)
PDSCH-ConfigIndex-rl7 ::= INTEGER (O..maxNrofPDSCH-ConfigPTM-l-rl7)
MTCH-SSB-MappingWindowIndex-rl7::= INTEGER (0..maxNrofMTCH-SSB-MappingWindow-l-rl7)
MRB-ListBroadcast-rl7 ::= SEQUENCE (SIZE (l..maxNrofMRB-Broadcast-rl7)) OF MRB-InfoBroadcast-rl7
MRB-InfoBroadcast-rl7 ::= SEQUENCE [
    pdcp-Config-rl7 MRB-PDCP-ConfigBroadcast-rl7,
    rlc-Config-rl7 MRB-RLC-ConfigBroadcast-rl7,
    ...
}
```


ETSI


--- Page 1044  ---


3GPP TS 38.331 version 17.0.0 Release 17
1043
ETSI TS 138331 V17.0.0 (2022-05)
```
MRB-PDCP-ConfigBroadcast-rl7 ::=
    pdcp-SN-SizeDL-rl7
    headerCompression-rl7
        notUsed-rl7
        rohe-rl7
            maxCID-rl7
            profiles-rl7
                profile0x000l-rl7
                profile0x0002-rl7
                profile0x0003-rl7
            }
        }
    }
    t-Reordering-rl7
}
MRB-RLC-ConfigBroadcast-rl7 ::=
    logicalChannelIdentity-rl7
    sn-FieldLength-rl7
    t-Reassembly-rl7
}
TMGI-rl7 ::=
    plmn-Id-rl7
        plmn-Index-rl7
        explicitValue-rl7
    },
    serviceId-rl7 OCTET STRING (SIZE (3))
}
-- TAG-MBS-SESSIONINFOLIST-STOP
-- ASNISTOP
```


Editor's note: At least profiles \( 0 \times 0000,0 \times 0001,0 \times 0002 \) are supported. FFS other profiles.

ETSI


--- Page 1045  ---


3GPP TS 38.331 version 17.0.0 Release 17
1044
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MBS-SessioninfoList field descriptions \\
\hline \begin{tabular}{l}
g-RNTI \\
G-RNTI used to scramble the scheduling and transmission of MTCH.
\end{tabular} \\
\hline \begin{tabular}{l}
headerCompression \\
If rohc is configured, the UE shall apply the configured ROHC profile(s) in downlink. When the field is absent the UE applies the value as specified in 9.1.1.7.
\end{tabular} \\
\hline \begin{tabular}{l}
mbsSessionid \\
Indicates an identifier of the MBS session provided by the MTCH.
\end{tabular} \\
\hline \begin{tabular}{l}
mrb-listBroadcast \\
A list of broadcast MRBs to which the associated broadcast MBS session is mapped to.
\end{tabular} \\
\hline \begin{tabular}{l}
mtch-neighbourCell \\
Indicates neighbour cells which provide this service on MTCH. The first bit is set to 1 if the service is provided on MTCH in the first cell in mbs-NeighbourCellList, otherwise it is set to 0 . The second bit is set to 1 if the service is provided on MTCH in the second cell in mbs-NeighbourCellList, and so on. If the service is not available in any neighbouring cell and \( m b s \)-NeighbourCellList is signalled, the network sets all bits in this field to 0 . If this field is absent, the related service may or may not be available in any neighbouring cell, i.e. the UE cannot determine the presence or absence of an MBS service in neighbouring cells based on the absence of this field.
\end{tabular} \\
\hline \begin{tabular}{l}
mtch-schedulinginfo \\
Indicates the index of DRX configuration entry in drx-ConfigPTM-List that is used for scheduling the MTCH. The value 0 corresponds to the first entry in drx-ConfigPTM-List, the value 1 corresponds to the second entry in drx-ConfigPTM-List and so on. In case mtch-schedulinglnfo is absent for a G-RNTI (i.e. no PTM DRX), the UE shall monitor for PDCCH scrambled with G-RNTI in any slot according to the search space configured for MTCH [see TS 38.213 [13], clause 10.1].
\end{tabular} \\
\hline \begin{tabular}{l}
mtch-SSB-MappingWindowindex \\
Indicates the index of MTCH-SSB-MappingWindowCycleOffset configuration entry in MTCH-SSB-MappingWindowList. The value 0 corresponds to the first entry in MTCH-SSB-MappingWindowList, the value 1 corresponds to the second entry in MTCH-SSB-MappingWindowList and so on. This field is set to the same value for all MBS sessions mapped to the same G-RNTI.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcp-SN-SizeDL \\
Indicates that PDCP sequence number size of 12 bits is used, as specified in TS 38.323 [5]. When the field is absent the UE applies the value as specified in 9.1.1.7.
\end{tabular} \\
\hline \begin{tabular}{l}
pdschConfigindex \\
Indicates the index of PDSCH configuration entry in pdschConfigList for MTCH. Value 0 corresponds to the first entry in pdschConfigList, the value 1 corresponds to the second entry in pdschConfigList and so on. When the field is absent the UE applies the first entry in pdschConfigList for MTCH.
\end{tabular} \\
\hline \begin{tabular}{l}
sn-FieldLength \\
Indicates that the RLC SN field size of 6 bits is used, see TS 38.322 [4]. When the field is absent the UE applies the value as specified in 9.1.1.7.
\end{tabular} \\
\hline \begin{tabular}{l}
t-Reassembly \\
Timer for reassembly in TS 38.322 [4], in milliseconds. Value ms 0 means 0 ms , value ms 5 means 5 ms and so on. When the field is absent the UE applies the value in specified in 9.1.1.7.
\end{tabular} \\
\hline \begin{tabular}{l}
t-Reordering \\
Value in ms of t -Reordering specified in TS 38.323 [5]. Value ms 1 corresponds to 1 ms , value ms 10 corresponds to 10 ms , and so on. When the field is absent the UE applies the value as specified in 9.1.1.7.
\end{tabular} \\
\hline
\end{tabular}
- MTCH-SSB-MappingWindowList

The IE MTCH-SSB-MappingWindowList is used to configure MTCH PDCCH ocassions to SSB mapping window related periodic and offset parameters.
MTCH-SSB-MappingWindowList information element
-- ASNISTART
-- TAG-MTCH-SSB-MAPPINGWINDOWLIST-START

ETSI


--- Page 1046  ---


3GPP TS 38.331 version 17.0.0 Release 17
1045
ETSI TS 138331 V17.0.0 (2022-05)
```
MTCH-SSB-MappingWindowCycleOffset-rl7 ::= CHOICE [
    msl0 INTEGER(0..9),
    ms20 INTEGER(0..19),
    ms32 INTEGER(0..31),
    ms64 INTEGER(0..63),
    msl28 INTEGER(0.127),
    ms256 INTEGER(0..255)
}
```

-- TAG-MTCH-SSB-MAPPINGWINDONLIST-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline MTCH-SSB-MappingWindowList field descriptions \\
\hline \begin{tabular}{l}
MTCH-SSB-MappingWindowCycleOffset \\
Indicates the cycle and offset for MTCH PDCCH ocassions to SSB mapping. Value is expressed in multiple integers of \( 1 \mathrm{~ms} . \mathrm{ms} 20 \) corresponds to 20 ms , ms 32 corresponds to 32 ms , and so on. The mapping window starts at a subframe in a SFN where [(SFN number × 10) + subframe number] modulo (cycle) = offset. \\
The \( [\mathrm{x} \times \mathrm{N}+\mathrm{K}]^{\text {th }} \) PDCCH monitoring occasion for MTCH in this mapping window corresponds to the \( \mathrm{K}^{\text {th }} \) transmitted SSB, where \( \mathrm{x}=0,1, \ldots \mathrm{X}-1, \mathrm{~K}=1,2, \ldots \mathrm{~N}, \mathrm{~N} \) is the number of actual transmitted SSBs determined according to ssb-PositionsinBurst in SIB1 and X is equal to CEIL(number of PDCCH monitoring occasions in MTCH to SSB mapping transmission window/N). The actual transmitted SSBs are sequentially numbered from one in ascending order of their SSB indexes. \\
Editor's note: Whether to move the mapping rule description to some other place, e.g. clause 5.9 or to MAC specifications, can be discussed during ASN. 1 review.
\end{tabular} \\
\hline
\end{tabular}
- PDSCH-ConfigBroadcast

The IE PDSCH-ConfigBroadcast is used to configure parameters for acquiring the PDSCH for MCCH and MTCH.
PDSCH-ConfigBroadcast information element
```
-- ASNISTART
-- TAG-PDSCH-CONFIGBROADCAST-START
PDSCH-ConfigBroadcast-rl7 ::= SEQUENCE [
    pdschConfigList-rll
    pdsch-TimeDomainAllocationList-rl7
    rateMatchPatternToAddModList-rl7
    lte-CRS-ToMatchAround.
    mcs-Table-rl7
    xOverhead-rl7
SEQUENCE (SIZE (l..maxNrofPDSCH-ConfigPTM-rl7) ) OF PDSCH-ConfigPTM-rl7,
PDSCH-TimeDomainResourceAllocationList-rl6 OPTIONAL, -- Need R
SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPattern OPTIONAL, -- Need R
RateMatchPatternLTE-CRS OPTIONAL, -- Need R
ENUMERATED {qam256, qam64LowSE} OPTIONAL, -- Need.S
}
PDSCH-ConfigPTM-r17 ::= SEQUENCE [
    dataScramblingIdentityPDSCH-rl7
    dmrs-ScramblingIDO-rl7
ENUMERATED {xOh6, xOhl2, xOhl8} OPTIONAL -- Need S
    pdsch-AggregationFactor-rl7 ENUMERATED {n2, n4, n8} OPTIONAL -- Need.S
}
```


ETSI


--- Page 1047  ---


3GPP TS 38.331 version 17.0.0 Release 17
1046
ETSI TS 138331 V17.0.0 (2022-05)

-- TAG-PDSCH-CONFIGBROADCAST-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline PDSCH-ConfigBroadcast field descriptions \\
\hline \begin{tabular}{l}
Ite-CRS-ToMatchAround \\
Parameters to determine an LTE CRS pattern that the UE shall rate match around.
\end{tabular} \\
\hline \begin{tabular}{l}
pdschConfigList \\
List of PDSCH parameters which can be configured per G-RNTI. Only one entity is allowed to be configured if included in SIB20.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-TimeDomainAllocationList \\
List of time-domain configurations for timing of DL assignment to DL data. \\
The field pdsch-TimeDomainAllocationList applies to DCI format 4 _ 0 (see table 5.1.2.1.1-1 in TS 38.214 [19]). When the field is absent, the UE follows PDSCH time domain resource allocation determination rule as specified in TS 38.214 [19], clause 5.1.2.1.1.
\end{tabular} \\
\hline \begin{tabular}{l}
rateMatchPatternToAddModList \\
Resources patterns which the UE should rate match PDSCH around. The UE rate matches around the union of all resources indicated in the rate match patterns (see TS 38.214 [19], clause 5.1.4.1).
\end{tabular} \\
\hline \begin{tabular}{l}
mcs-Table \\
Indicates which MCS table the UE shall use for PDSCH. If the field is absent the UE applies the value 64QAM. The field mcs-Table applies to DCI format \( 4 \_0 \) with CRC scrambled by MCCH-RNTI/G-RNTI (see TS 38.214 [19], clause 5.1.3.1).
\end{tabular} \\
\hline \begin{tabular}{l}
xOverhead \\
Accounts for an overhead from CSI-RS, CORESET, etc. If the field is absent, the UE applies value xOh0 (see TS 38.214 [19], clause 5.1.3.2).
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline PDSCH-ConfigPTM field descriptions \\
\hline \begin{tabular}{l}
dataScramblingldentityPDSCH \\
Identifier(s) used to initialize data scrambling (c_init) for PDSCH as specified in TS 38.211 [16], clause 7.3.1.1. When the field is absent the UE applies the value physCellld configured for this serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
dmrs-ScramblingID0 \\
DL DMRS scrambling initialization (see TS 38.211 [16], clause 7.4.1.1.1). When the field is absent the UE applies the value physCellld configured for this serving cell.
\end{tabular} \\
\hline \begin{tabular}{l}
pdsch-AggregationFactor \\
Number of repetitions for dynamic scheduling of MBS broadcast data for MTCH PDSCH (see TS 38.214 [19], clause 5.1.2.1). When the field is absent the UE applies the value 1.
\end{tabular} \\
\hline
\end{tabular}
6.4 RRC multiplicity and type constraint values
- Multiplicity and type constraint definitions
-- ASNISTART
-- TAG-MULTIPLICITY-AND-TYPE-CONSTRAINT-DEFINITIONS-START
maxAdditionalRACH-rl7
maxAI-DCI-PayloadSize-rl6
maxAI-DCI-PayloadSize-l-rl6
maxBandComb

INTEGER : := 999

INTEGER : : 128 --Maximum size of the DCI payload scrambled with ai-RNTI
INTEGER : : 127 --Maximum size of the DCI payload scrambled with ai-RNTI minus 1
INTEGER : := 65536 -- Maximum number of DL band combinations
-- Maximum number of additional RACH configurations is FFS, value 999 to
-- make ASN.l compile
-- make ASN.l compile
--Maximum size of the DCI
--Maximum size of the DCI payload scrambled with ai-RNTI minus 1
-- Maximum number of DL band combinations

ETSI


--- Page 1048  ---


3GPP TS 38.331 version 17.0.0 Release 17
1047
ETSI TS 138331 V17.0.0 (2022-05)

maxBandsUTRA-FDD-rl6
maxBH-RLC-ChannelID-rl6
maxBT-IdReport-rl6
maxBT-Name-rl6
maxCAG-Cell-rl6
maxTwoPUCCH-Grp-ConfigList-rl6
maxCBR-Config-rl6
maxCBR-Config-1-rl6
maxCBR-Level-rl6
maxCBR-Level-l-rl6
maxCellExcluded.
maxCellGroupings-rl6
maxCellHistory-rl6
maxPSCellHistory-rl7
maxCellInter
maxCellIntra
maxCellMeasEUTRA
maxCellMeasIdle-rl6
maxCellMeasUTRA-FDD-rl6
maxCellAllowed.
maxEARFCN
maxEUTRA-CellExcluded
maxEUTRA-NS-Pmax
maxFeatureCombPreambles-FFS-rl7
maxLogMeasReport-rl6
maxMultiBands
maxNARFCN
maxNR-NS-Pmax
maxFreqIdle-rl6
maxNrofServingCells
maxNrofServingCells-1
maxNrofAggregatedCellsPerCellGroup
maxNrofAggregatedCellsPerCellGroupMinus4-r16 INTEGER ::= 12
maxNrofAppLayerMeas-rl7
maxNrofAppLayerMeas-1-r17
maxNrofAvailabilityCombinationsPerSet-rl
maxNrofCellMeas
maxNrofRelayToMeasure-rl7
maxNrofCG-SL-rl6
maxNrofCG-SL-1-rl6
maxSL-GC-BC-DRX-QOS-rl7
maxNrofSL-Rx-InfoSet-rl7
maxNrofSS-BlocksToAverage
measurement
maxNrofDUCells-rl6 INTEGER ::= 512 -- Max number of cells configured on the collocated IAB-DU
maxNrofAvailabilityCombinationsPerSet-l-rl6 INTEGER ::= 511 -- Max number of AvailabilityCombinationId used in the DCI format 2 _ 5 minus 1
maxNrofSCellActRS-r17 INTEGER::=255-- Max number of RS configurations per SCell for SCell activation
maxNrofSCells INTEGER ::= 31 -- Max number of secondary serving cells per cell group
INTEGER ::= 64 -- Maximum number of bands listed in UTRA-FDD UE caps
INTEGER ::= 65536 -- Maximum value of BH RLC Channel ID
INTEGER ::= 32 -- Maximum number of Bluetooth IDs to report
INTEGER ::= 4 -- Maximum number of Bluetooth name
INTEGER ::= 16 -- Maximum number of NR CAG cell ranges in SIB3, SIB4
INTEGER ::= 32 -- Maximum number of supported configuration(s) of lprimary PUCCH group
-- config, secondary PUCCH group config\}
INTEGER ::=8 -- Maximum number of CBR range configurations for sidelink communication
-- congestion control
INTEGER ::= 7 -- Maximum number of CBR range configurations for sidelink communication
-- congestion control minus l
-- Maximum number of CBR levels
-- Maximum number of CBR levels minus 1
-- Maximum number of NR exclude-listed cell ranges in SIB3, SIB4
-- Maximum number of cell groupings for NR-DC
-- Maximum number of visited PCells reported
-- Maximum number of visited PSCells reported
-- Maximum number of inter-Freq cells listed in SIB4
-- Maximum number of intra-Freq cells listed in SIB3
-- Maximum number of cells in E-UTRAN
-- Maximum number of cells per carrier for idle/inactive measurements
-- Maximum number of cells in FDD UTRAN
-- Maximum number of NR allow-listed cell ranges in SIB3, SIB4
-- Maximum value of E-UTRA carrier frequency
-- Maximum number of E-UTRA exclude-listed physical cell identity ranges
-- in SIB5
-- Maximum number of NS and P-Max values per band
-- Maximum number of feature combination preambles FFS, value 999 to make
-- ASN. 1 compile
-- Maximum number of entries for logged measurements
-- Maximum number of additional frequency bands that a cell belongs to
-- Maximum value of NR carrier frequency
-- Maximum number of NS and P-Max values per band
-- Maximum number of carrier frequencies for idle/inactive measurements
-- Max number of serving cells (SpCells + SCells)
-- Max number of serving cells (SpCells + SCells) minus l

INTEGER ::= 32 -- Maximum number of entries in each of the cell lists in a measurement object
INTEGER ::= 32 -- Maximum number of L2 U2N Relay UEs to measure for each measurement object
-- on sidelink frequency
INTEGER ::= 8 -- Max number of sidelink configured grant
INTEGER ::=7 -- Max number of sidelink configured grant minus 1
INTEGER ::= ffsUpperLimit -- FFS
INTEGER ::= 4 -- Max number of sidelink DRX assistant information set [FFS]
INTEGER ::= 16 -- Max number for the (max) number of ss blocks to average to determine cell

ETSI


--- Page 1049  ---


3GPP TS 38.331 version 17.0.0 Release 17
1048
ETSI TS 138331 V17.0.0 (2022-05)

maxNrofCondCells-rl6
maxNrofCSI-RS-ResourcesToAverage
maxNrofDL-Allocations
maxNrofPDU-Sessions-rl7
maxNrofSR-ConfigPerCellGroup
maxLCG-ID
maxLCG-ID-IAB-rl7
maxLC-ID
maxLC-ID-Iab-rl6
maxLTE-CRS-Patterns-rl6
maxNrofTAGs
maxNroftAGs-1
maxNrofBWPs
maxNrofCombIDC
maxNrofSymbols-1
maxNrofSlots
maxNrofSlots-1
maxNrofPhysicalResourceBlocks
maxNrof PhysicalResourceBlocks-l
maxNrof PhysicalResourceBlocksPlusl
maxNrofControlResourceSets
maxNrofControlResourceSets-l
maxNrofControlResourceSets-1-rl6
maxNrofCoresetPools-rl6
maxCoReSetDuration
maxNrofSearchSpaces-1
maxNrofSearchSpacesLinks-l-rl7
maxNrofBFDResourcePerSet-rl7
max-DLorJointTCI-rl7
maxNrofCandidateBeams-rl7
maxSFI-DCI-PayloadSize
maxSFI-DCI-PayloadSize-1
maxIAB-IP-Address-rl6
maxINT-DCI-PayloadSize
maxINT-DCI-PayloadSize-1
maxNrofRateMatchPatterns
maxNrofRateMatchPatterns-l
maxNrofRateMatchPatternsPerGroup
maxNrofCSI-ReportConfigurations
maxNrofCSI-ReportConfigurations-l
maxNrofCSI-ResourceConfigurations
maxNrofCSI-ResourceConfigurations-l
maxNrofAP-CSI-RS-ResourcesPerSet
maxNrOfCSI-AperiodicTriggers
maxNrofReportConfigPerAperiodicTrigger
maxNrofNZP-CSI-RS-Resources
maxNrofNZP-CSI-RS-Resources-l
maxNrofNZP-CSI-RS-ResourcesPerSet
maxNrofNZP-CSI-RS-ResourceSets
maxNrofNZP-CSI-RS-ResourceSets-l
maxNrofNZP-CSI-RS-ResourceSetsPerConfig
maxNrofNZP-CSI-RS-ResourcesPerConfig
maxNrofZP-CSI-RS-Resources
maxNrofzP-CSI-RS-Resources-l

INTEGER ::= 8 -- Max number of conditional candidate SpCells
INTEGER ::=16 -- Max number for the (max) number of CSI-RS to average to determine cell measurement
INTEGER ::= 16 -- Maximum number of PDSCH time domain resource allocations
INTEGER ::= 256 -- Maximum number of PDU Sessions
INTEGER ::=8 -- Maximum number of SR configurations per cell group
INTEGER ::= 7 -- Maximum value of LCG ID
INTEGER ::= 255 -- Maximum value of LCG ID for IAB-MT
INTEGER ::= 32 -- Maximum value of Logical Channel ID
INTEGER ::= 65855 -- Maximum value of BH Logical Channel ID extension
INTEGER ::= 3 -- Maximum number of additional LTE CRS rate matching patterns
INTEGER ::= 4 -- Maximum number of Timing Advance Groups
INTEGER ::= 3 -- Maximum number of Timing Advance Groups minus 1
INTEGER : := 4 -- Maximum number of BWPs per serving cell
INTEGER : := 128 -- Maximum number of reported MR-DC combinations for IDC
INTEGER : = 13 -- Maximum index identifying a symbol within a slot (14 symbols, indexed from 0..13)
INTEGER : := 320 -- Maximum number of slots in a 10 ms period.
INTEGER ::= 319 -- Maximum number of slots in a 10 ms period minus 1
INTEGER ::= 275 -- Maximum number of PRBs
INTEGER ::= 274 -- Maximum number of PRBs minus 1
INTEGER ::= 276 -- Maximum number of PRBs plus 1
INTEGER ::= 12 -- Max number of CoReSets configurable on a serving cell
INTEGER : : 11 -- Max number of CoReSets configurable on a serving cell minus 1
INTEGER ::= 15 -- Max number of CoReSets configurable on a serving cell extended in minus l
INTEGER ::= 2 -- Maximum number of CORESET pools
INTEGER : : 3 -- Max number of OFDM symbols in a control resource set
INTEGER ::= 39 -- Max number of Search Spaces minus 1
INTEGER : : ffsUpperLimit -- Max number of Search Space links minus 1 FFS on actual size
INTEGER ::= ffsUpperLimit -- Size is FFS
INTEGER ::= ffsUpperLimit -- Size is EFS
INTEGER ::= ffsUpperLimit -- Size is FFS
INTEGER : := 128 -- Max number payload of a DCI scrambled with SEI-RNTI
INTEGER : := 127 -- Max number payload of a DCI scrambled with SEI-RNTI minus 1
INTEGER : := 32 -- Max number of assigned IP addresses
INTEGER : := 126 -- Max number payload of a DCI scrambled with INT-RNTI
INTEGER : := 125 -- Max number payload of a DCI scrambled with INT-RNTI minus 1
INTEGER ::= 4 -- Max number of rate matching patterns that may be configured
INTEGER ::= 3 -- Max number of rate matching patterns that may be configured minus l
INTEGER ::=8 -- Max number of rate matching patterns that may be configured in one group
INTEGER ::= 48 -- Maximum number of report configurations
INTEGER ::= 47 -- Maximum number of report configurations minus 1
INTEGER : := 112 -- Maximum number of resource configurations
INTEGER ::= 111 -- Maximum number of resource configurations minus 1
INTEGER : := 16
INTEGER ::= 128 -- Maximum number of triggers for aperiodic CSI reporting
INTEGER ::= 16 -- Maximum number of report configurations per trigger state for aperiodic reporting
INTEGER : := 192 -- Maximum number of Non-Zero-Power (NZP) CSI-RS resources
INTEGER : := 191 -- Maximum number of Non-Zero-Power (NZP) CSI-RS resources minus 1
INTEGER ::= 64 -- Maximum number of NZP CSI-RS resources per resource set
INTEGER ::= 64 -- Maximum number of NZP CSI-RS resource sets per cell
INTEGER ::= 63 -- Maximum number of NZP CSI-RS resource sets per cell minus 1
INTEGER ::= 16 -- Maximum number of resource sets per resource configuration
INTEGER : := 128 -- Maximum number of resources per resource configuration
INTEGER : := 32 -- Maximum number of Zero-Power (ZP) CSI-RS resources
INTEGER : : 31 -- Maximum number of Zero-Power (ZP) CSI-RS resources minus 1

ETSI


--- Page 1050  ---


3GPP TS 38.331 version 17.0.0 Release 17
1049
ETSI TS 138331 V17.0.0 (2022-05)

maxNrofZP-CSI-RS-ResourceSets-l
maxNrofZP-CSI-RS-ResourcesPerSet
maxNrofzP-CSI-RS-ResourceSets
maxNrofCSI-IM-Resources
maxNrofCSI-IM-Resources-l
maxNrofCSI-IM-ResourcesPerSet
maxNrofCSI-IM-ResourceSets
maxNrofCSI-IM-ResourceSets-l
maxNrofCSI-IM-ResourceSetsPerConfig
maxNrofCSI-SSB-ResourcePerSet
maxNrofCSI-SSB-ResourceSets
maxNrofCSI-SSB-ResourceSets-l
maxNrofCSI-SSB-ResourceSetsPerConfig
maxNrofCSI-SSB-ResourceSetsPerConfigExt
maxNrofFailureDetectionResources
maxNrofFailureDetectionResources-l
maxNrofFreqSL-rl6
maxNrofSL-BWPs-rl6
maxFreqSL-EUTRA-rl6
maxNrofSL-MeasId-r16
maxNrofSL-ObjectId-rl6
maxNrofSL-ReportConfigId-rl6
maxNrofSL-PoolToMeasureNR-rl6
maxFreqSL-NR-rl6
maxNrofSL-QFIs-rl6
maxNrofSL-QFIsPerDest-rl6
maxNrofObjectId.
maxNrofPageRec
maxNrofPCI-Ranges
max PLMN
maxTAC-rl7
maxNrofCSI-RS-ResourcesRRM
maxNrofCSI-RS-ResourcesRRM-1
maxNrofMeasId.
maxNrofQuantityConfig
maxNrofCSI-RS-CellsRRM
maxNrofSL-Dest-rl6
maxNrofSL-Dest-1-rl6
maxNrofSLRB-r16
maxSL-LCID-r16
maxSL-SyncConfig-rl6
maxNrofRXPool-rl6
maxNrofTXPool-rl6
maxNrofPoolID-rl6
maxNrofSRS-PathlossReferenceRS-rl6
maxNrofSRS-PathlossReferenceRS-1-rl6
maxNrofSRS-ResourceSets
maxNrofSRS-ResourceSets-l
maxNrofSRS-PosResourceSets-rl6
maxNrofSRS-PosResourceSets-l-rl6

INTEGER ::= 15
INTEGER ::= 16
INTEGER ::= 16
INTEGER ::= 32
INTEGER ::= 31
INTEGER ::= 8
INTEGER ::= 64
INTEGER ::= 63
INTEGER ::= 16
INTEGER ::= 64
INTEGER ::= 64
INTEGER ::= 63
INTEGER ::= l
INTEGER ::= 2
INTEGER : := 10
INTEGER ::= 9
INTEGER : := 8
INTEGER ::= 4
INTEGER ::= 8
INTEGER ::= 64
INTEGER ::= 64
INTEGER ::= 64
INTEGER : := 8
INTEGER ::= 8
INTEGER ::= 2048
INTEGER ::= 64
INTEGER ::= 64
INTEGER ::= 32
INTEGER : := 8
INTEGER ::= 12
INTEGER ::= 12
INTEGER ::= 96
INTEGER ::= 95
INTEGER ::= 64
INTEGER ::= 2
INTEGER ::= 96
INTEGER ::= 32
INTEGER ::= 31
INTEGER ::= 512
INTEGER ::= 512
INTEGER ::= 16
INTEGER ::= 16
INTEGER : := 8
INTEGER ::= 16
INTEGER ::= 64
INTEGER ::= 63
INTEGER ::= 16
INTEGER ::= 15
INTEGER ::= 16
INTEGER ::= 15
-- Maximum number of CSI-IM resources
-- Maximum number of CSI-IM resources minus 1
-- Maximum number of CSI-IM resources per set
-- Maximum number of NZP CSI-IM resource sets per cell
-- Maximum number of NZP CSI-IM resource sets per cell minus l
-- Maximum number of CSI IM resource sets per resource configuration
-- Maximum number of SSB resources in a resource set
-- Maximum number of CSI SSB resource sets per cell
-- Maximum number of CSI SSB resource sets per cell minus l
-- Maximum number of CSI SSB resource sets per resource configuration
-- Maximum number of CSI SSB resource sets per resource configuration
-- extended.
-- Maximum number of failure detection resources
-- Maximum number of failure detection resources minus 1
-- Maximum number of carrier frequency for NR sidelink communication
-- Maximum number of BWP for NR sidelink communication
-- Maximum number of EUTRA anchor carrier frequency for NR sidelink communication
-- Maximum number of sidelink measurement identity (RSRP) per destination
-- Maximum number of sidelink measurement objects (RSRP) per destination
-- Maximum number of sidelink measurement reporting configuration(RSRP) per destination
-- Maximum number of resource pool for NR sidelink measurement to measure for
-- each measurement object (for CBR)
-- Maximum number of NR anchor carrier frequency for NR sidelink communication
-- Maximum number of QOS flow for NR sidelink communication per UE
-- Maximum number of QOS flow per destination for NR sidelink communication
-- Maximum number of measurement objects
-- Maximum number of page records
-- Maximum number of PCI ranges
-- Maximum number of PLMNs broadcast and reported by UE at establishment
-- Maximum number of Tracking Area Codes to which a cell belongs to
-- Maximum number of CSI-RS resources per cell for an RRM measurement object
-- Maximum number of CSI-RS resources per cell for an RRM measurement object
-- minus 1.
-- Maximum number of configured measurements
-- Maximum number of quantity configurations
-- Maximum number of cells with CSI-RS resources for an RRM measurement object
-- Maximum number of destination for NR sidelink communication
-- Highest index of destination for NR sidelink communication
-- Maximum number of radio bearer for NR sidelink communication per UE
-- Maximum number of RLC bearer for NR sidelink communication per UE
-- Maximum number of sidelink Sync configurations
-- Maximum number of Rx resource pool for NR sidelink communication
-- Maximum number of Tx resource pool for NR sidelink communication
-- Maximum index of resource pool for NR sidelink communication
-- Maximum number of RSs used as pathloss reference for SRS power control.
-- Maximum number of RSs used as pathloss reference for SRS power control
-- minus 1.
-- Maximum number of SRS resource sets in a BWP.
-- Maximum number of SRS resource sets in a BWP minus 1.
-- Maximum number of SRS Positioning resource sets in a BWP.
-- Maximum number of SRS Positioning resource sets in a BWP minus 1.

ETSI


--- Page 1051  ---


3GPP TS 38.331 version 17.0.0 Release 17
1050
ETSI TS 138331 V17.0.0 (2022-05)

maxNrofSRS-Resources
maxNrofSRS-Resources-1
maxNrofSRS-PosResources-r16
maxNrofSRS-PosResources-l-rl6
maxNrofSRS-ResourcesPerSet
maxNrofSRS-TriggerStates-l
maxNrofSRS-TriggerStates-2
maxRAT-CapabilityContainers
maxSimultaneousBands
maxULTxSwitchingBandPairs
maxNrofSlotFormatCombinationsPerSet
maxNrofSlotFormatCombinationsPerSet-l
maxNrofTrafficPattern-rl6
maxNrofPUCCH-Resources
maxNrof PUCCH-Resources-l
maxNrofPUCCH-ResourceSets
maxNrofPUCCH-ResourceSets-l
maxNrofPUCCH-ResourcesPerSet
maxNrofPUCCH-PO-PerSet
maxNrofPUCCH-PathlossReferenceRSs
maxNrofPUCCH-PathlossReferenceRSs-l
maxNrofPUCCH-PathlossReferenceRSs-rl6
maxNrofPUCCH-PathlossReferenceRSs-1-r16
maxNrofPUCCH-PathlossReferenceRSsDiff-rl6 INTEGER::=60
maxNrofPUCCH-ResourceGroups-r16
maxNrof PUCCH-Resources PerGroup-rl6
maxNrofPowerControlSetInfos-rl7
maxNrofMultiplePUSCHs-rl6
maxNrofPO-PUSCH-AlphaSets
maxNrofPO-PUSCH-AlphaSets-l
maxNrofPUSCH-PathlossReferenceRSs
maxNrofPUSCH-PathlossReferenceRSs-l
maxNrofPUSCH-PathlossReferenceRSs-r16
maxNrofpUSCH-PathlossReferenceRSs-1-r16
maxNrofPUSCH-PathlossReferenceRSsDiff-rl6
maxNrofNAICS-Entries
maxBands
maxBandsMRDC
maxBandseUTRA
maxCellReport
maxDRB
maxFreq
maxFreqLayers
maxFreqIDC-r16
maxCombIDC-r16
maxFreqIDC-MRDC

INTEGER ::= 63
INTEGER : := 64
INTEGER ::= 63
INTEGER : := 64
INTEGER ::= 63
INTEGER ::= 16
INTEGER ::= 3
INTEGER ::= 2
INTEGER : := 8
INTEGER : := 32
INTEGER : := 32

INTEGER : := 512
INTEGER : := 511
INTEGER : := 8
INTEGER : := 128
INTEGER : := 127
INTEGER \( ::=4 \)
INTEGER ::= 3
INTEGER : := 32
INTEGER : := 8
INTEGER : := 4
INTEGER ::= 3

INTEGER ::= 64

INTEGER : := 4
INTEGER ::= 128
INTEGER : := 8
INTEGER : := 8
INTEGER : := 30
INTEGER ::= 29
INTEGER ::= 4
INTEGER ::= 3

INTEGER : := 64
INTEGER : := 63
INTEGER : := 60
INTEGER : := 8
INTEGER : := 1024
INTEGER : := 1280
INTEGER ::= 256
INTEGER : := 8
INTEGER ::= 29
INTEGER : := 8
INTEGER \( ::=4 \)
INTEGER : := 128
INTEGER ::= 128
INTEGER : := 32
-- Maximum number of SRS resources.
-- Maximum number of SRS resources minus 1.
-- Maximum number of SRS Positioning resources.
-- Maximum number of SRS Positioning resources minus 1.
-- Maximum number of SRS resources in an SRS resource set
-- Maximum number of SRS trigger states minus l, i.e., the largest code point.
-- Maximum number of SRS trigger states minus 2.
-- Maximum number of interworking RAT containers (incl NR and MRDC)
-- Maximum number of simultaneously aggregated bands
-- Maximum number of band pairs supporting dynamic UL Tx switching in a band
-- combination.
-- Maximum number of Slot Format Combinations in a SF-Set.
-- Maximum number of Slot Format Combinations in a SF-Set minus 1.
-- Maximum number of Traffic Pattern for NR sidelink communication.
-- Maximum number of PUCCH Resource Sets
-- Maximum number of PUCCH Resource Sets minus 1.
-- Maximum number of PUCCH Resources per PUCCH-ResourceSet
-- Maximum number of PO -pucch present in a p0-pucch set
-- Maximum number of RSs used as pathloss reference for PUCCH power control.
-- Maximum number of RSs used as pathloss reference for PUCCH power control
-- minus 1.
-- Maximum number of RSs used as pathloss reference for PUCCH power control
-- extended.
-- Maximum number of RSs used as pathloss reference for PUCCH power control
-- minus 1 extended.
-- Difference between the extended maximum and the non-extended maximum
-- Maximum number of PUCCH resources groups.
-- Maximum number of PUCCH resources in a PUCCH group.
-- Maximum number of PUCCH power control set infos
-- Maximum number of multiple PUSCHs in PUSCH TDRA list
-- Maximum number of PO-pusch-alpha-sets (see TS 38.213 [13], clause 7.1)
-- Maximum number of PO-pusch-alpha-sets minus 1 (see TS 38.213 [13], clause 7.1)
-- Maximum number of RSs used as pathloss reference for PUSCH power control.
-- Maximum number of RSs used as pathloss reference for PUSCH power control
-- minus 1.
-- Maximum number of RSs used as pathloss reference for PUSCH power control
-- extended.
-- Maximum number of RSs used as pathloss reference for PUSCH power control
-- extended minus 1
-- Difference between maxNrofPUSCH-PathlossReferenceRSs-r16 and
-- maxNrofPUSCH-PathlossReferenceRSs
-- Maximum number of supported NAICS capability set
-- Maximum number of supported bands in UE capability.
-- Maximum number of DRBs (that can be added in DRB-ToAddModList).
-- Max number of frequencies.
-- Max number of frequency layers.
-- Max number of frequencies for IDC indication.
-- Max number of reported UL CA for IDC indication.
-- Maximum number of candidate NR frequencies for MR-DC IDC indication

ETSI


--- Page 1052  ---


3GPP TS 38.331 version 17.0.0 Release 17
1051
ETSI TS 138331 V17.0.0 (2022-05)

maxNrofCandidateBeams
maxNrofCandidateBeams-rl6
maxNrofCandidateBeamsExt-rl6
maxNrofPCIsPerSMTC
maxNrofQFIs
maxNrofResourceAvailabilityPerCombination-rl6 INTEGER ::= 256
maxNrOfSemi PersistentPUSCH-Triggers
maxNrofSR-Resources
maxNrofSlotFormatsPerCombination
maxNrofSpatialRelationInfos
maxNrofSpatialRelationInfos-plus-l
maxNrofSpatialRelationInfos-rl6
maxNrofSpatialRelationInfosDiff-rl6
maxNrofIndexesToReport
maxNrofIndexesToReport2
maxNrofSSBs-rl6
maxNrofSSBs-1
maxNrofS-NSSAI
maxNrofTCI-StatesPDCCH
maxNrofTCI-States
maxNrofTCI-States-1
maxULTCI-rl7
maxULTCI-l-rl7
maxNrofAdditionalPCI-rl7
maxNrofAdditionalPCI-l-rl7
maxMPE-Resources-rl7
maxNrofUL-Allocations
maxQPI
maxRA-CSIRS-Resources
maxRA-OccasionsPerCSIRS
maxRA-Occasions-l
maxRA-SSB-Resources
maxSCSs
maxSecondaryCellGroups
maxNrofServingCellseUTRA
maxMBSFN-Allocations
maxNrofMultiBands
maxCellSFTD
maxReportConfigId.
maxNrofCodebooks
maxNrofCSI-RS-ResourcesExt-rl6
maxNrofCSI-RS-ResourcesExt-rl7
maxNrofCSI-RS-Resources
maxNrofCSI-RS-ResourcesAlt-rl6
maxNrofCSI-RS-ResourcesAlt-l-rl6
maxNrofSRI-PUSCH-Mappings
maxNrofSRI-PUSCH-Mappings-1
maxSIB
maxSI-Message
maxSI-MessagePlusl-rl7
maxPO-perPF
maxPEI-perPF-rl7
maxAccessCat-l
maxBarringInfoSet
INTEGER : := 16
INTEGER : := 64
INTEGER : := 48
INTEGER : := 64
INTEGER : := 64

INTEGER ::= 256
INTEGER : := 8
INTEGER : := 9
INTEGER : := 64

INTEGER ::= 32
INTEGER : := 64

INTEGER ::= 64

INTEGER ::= 63
INTEGER : := 96

INTEGER ::= 64
INTEGER : := 5
INTEGER ::= 3
INTEGER : := 32
INTEGER : := 8
INTEGER : := 8

INTEGER : := 64

INTEGER : := 16
INTEGER : := 15
6

INTEGER ::= 64 -- Maximum number of triggers for semi persistent reporting on PUSCH
INTEGER ::=8 -- Maximum number of SR resources per BWP in a cell.

INTEGER : 56 -- Difference between maxNrofSpatialRelationInfos-rl6 and maxNrofSpatialRelationInfos

INTEGER : := 64 -- Maximum number of SSB resources in a resource set.
INTEGER ::= 63 -- Maximum number of SSB resources in a resource set minus 1.
INTEGER ::=8 -- Maximum number of S-NSSAI.

INTEGER : := 128 -- Maximum number of TCI states.
INTEGER ::= 127 -- Maximum number of TCI states minus 1.
INTEGER ::= 64 -- Maximum number of TCI states.
INTEGER ::= 63 -- Maximum number of TCI states minus 1.
INTEGER ::=7 -- Maximum number of additional PCI
INTEGER ::= 6 -- Maximum number of additional PCI minus 1.
INTEGER ::= 64 -- Maximum number of pooled MPE resources
INTEGER ::= 16 -- Maximum number of PUSCH time domain resource allocations.

INTEGER ::=64 -- Maximum number of RA occasions for one CSI-RS
INTEGER : := 511 -- Maximum number of RA occasions in the system

INTEGER : := 3 -- Maximum number of cells for SFTD reporting
INTEGER : := 16 -- Maximum number of codebooks supported by the UE
INTEGER : := 16 -- Maximum number of codebook resources supported by the UE for eType2/Codebook combo
INTEGER : : 8 -- Maximum number of codebook resources for fetype2Rankl and fetype2Rank2
INTEGER : :=7 -- Maximum number of codebook resources supported by the UE
INTEGER ::= 512 -- Maximum number of alternative codebook resources supported by the UE
INTEGER : : 511 -- Maximum number of alternative codebook resources supported by the UE minus 1

INTEGER::= 32 -- Maximum number of SIBs
INTEGER: : 32 -- Maximum number of SI messages
INTEGER: := 33 -- Maximum number of SI messages plus 1
INTEGER ::= 4 -- Maximum number of paging occasion per paging frame
INTEGER ::=4 -- Maximum number of PEI occasion per paging frame
INTEGER ::= 63 -- Maximum number of Access Categories minus 1
INTEGER : := 8 -- Maximum number of access control parameter sets
-- Max number of PRACH-ResourceDedicatedBER in BFR config.
-- Max number of candidate beam resources in BFR config.
-- Max number of PRACH-ResourceDedicatedBFR in the CandidateBeamRSListExt
-- Maximum number of PCIs per SMTC.
DOCIs per SMIN.
-- Maximum number of triggers for semi persistent reporting on PUSCH
-- Maximum number of SR resources per BWP in a cell.
-- Maximum number of SSB resources in a resource set minus 1.
-- Maximum number of S-NSSAI.
-- Maximum number of TCI states.
-- Maximum number of TCI states minus 1.
-- Maximum number of TCI states.
-- Maximum number of TCI states minus 1.
-- Maximum number of additional PCI
-- Maximum number of additional PCI minus l.
-- Maximum number of pooled MPE resources
-- Maximum number of PUSCH time domain resource allocations.
-
-- Maximum number of codebooks supported by the UE
-- Maximum number of codebook resources supported by the UE for eType2/co
-- Maximum number of codebook resources supported by the UE
-- Maximum number of alternative codebook resources supported by the UE
-- Maximum number of alternative codebook resources supported by the UE minus l
-- Maximum number of SIBs
-- Maximum number of SI messages
-- Maximum number of SI messages plus 1
-- Maximum number of paging occasion per paging fra
-- Maximum number of Access Categories minus l

ETSI


--- Page 1053  ---


3GPP TS 38.331 version 17.0.0 Release 17
1052
ETSI TS 138331 V17.0.0 (2022-05)

maxCellEUTRA
maxeUTRA-Carrier
maxPLMNIdentities
maxDownlinkFeatureSets
maxUplinkFeatureSets
maxEUTRA-DL-FeatureSets
maxEUTRA-UL-FeatureSets
maxFeatureSetsPerBand
maxPerCC-FeatureSets
maxFeatureSetCombinations
maxInterRAT-RSTD-Freq
maxGIN-rl7
maxHRNN-Len-rl6
maxNPN-rl6
maxNrOfMinSchedulingOffsetValues-rl6
maxKO-SchedulingOffset-rl6
maxK2-SchedulingOffset-r16
maxKO-SchedulingOffset-rl7
maxK2-SchedulingOffset-rl7
maxDCI-2-6-Size-rl6
maxDCI-2-7-Size-rl7
maxDCI-2-6-Size-1-r16
maxNrofUL-Allocations-rl6
maxNrofPO-PUSCH-Set-rl6
maxOnDemandSIB-rl6
maxOnDemandPosSIB-r16
maxCI-DCI-PayloadSize-rl6
maxCI-DCI-PayloadSize-1-r16
maxUu-Relay-RLC-ChannelID-rl7
maxWLAN-Id-Report-rl6
maxWLAN-Name-rl6
maxRAReport-r16
maxTxConfig-rl6
maxTxConfig-1-rl6
maxPSSCH-TxConfig-rl6
maxNrofCLI-RSSI-Resources-rl6
maxNrofCLI-RSSI-Resources-l-rl6
maxNrofCLI-SRS-Resources-rl6
maxCLI-Report-rl6
maxNrofConfiguredGrantConfig-rl6
maxNrofConfiguredGrantConfig-1-rl6
maxNrofCG-Type2DeactivationState
maxNrofConfiguredGrantConfigMAC-1-r16
maxNrofSPS-Config-rl6
maxNrofSPS-Config-l-rl6
maxNrofSPS-DeactivationState
maxNrofPPW-Config-rl7
maxUE-Tx-TEG-ID-rl7
maxGapConfig-rl7
maxNrofDormancyGroups
maxNrofPagingSubgroups-rl7
maxNrofPUCCH-ResourceGroups-1-r16
maxNrofServingCellsTCI-rl6
maxNrofTxDC-TwoCarrier-rl6

INTEGER : : 8 -- Maximum number of E-UTRA cells in SIB list
INTEGER : : 8 -- Maximum number of E-UTRA carriers in SIB list
INTEGER ::=8 -- Maximum number of PLMN identities in RAN area configurations
INTEGER ::= 1024 -- (for NR DL) Total number of Featuresets (size of the pool)
INTEGER : := 1024 -- (for NR UL) Total number of FeatureSets (size of the pool)
INTEGER ::= 256 -- (for E-UTRA) Total number of FeatureSets (size of the pool)
INTEGER : := 256 -- (for E-UTRA) Total number of FeatureSets (size of the pool)
INTEGER ::= 128 -- (for NR) The number of feature sets associated with one band.
INTEGER : : 1024 -- (for NR) Total number of CC-specific FeatureSets (size of the pool)
INTEGER : : 1024 -- (for MR-DC/NR) Total number of Feature set combinations (size of the pool)
INTEGER ::= 3
INTEGER ::= 24 -- Maximum number of broadcast GINs
INTEGER ::= 48 -- Maximum length of HRNNs
INTEGER : : 12 -- Maximum number of NPNs broadcast and reported by UE at establishment
INTEGER : : 2 -- Maximum number of min. scheduling offset (KO/K2) configurations
INTEGER ::=16 -- Maximum number of slots configured as min. scheduling offset (KO)
INTEGER ::= 16 -- Maximum number of slots configured as min. scheduling offset (K2)
INTEGER ::= 64 -- Maximum number of slots configured as min. scheduling offset (KO)
INTEGER ::= 64 -- Maximum number of slots configured as min. scheduling offset (K2)
INTEGER ::= 140 -- Maximum size of DCI format 2-6
INTEGER ::= 43 -- Maximum size of DCI format 2-7
INTEGER : := 139 -- Maximum DCI format 2-6 size minus 1
INTEGER ::= 64 -- Maximum number of PUSCH time domain resource allocations
INTEGER ::= 2 -- Maximum number of PO PUSCH set(s)
INTEGER : : 8 -- Maximum number of SIB(s) that can be requested on-demand
INTEGER ::= 32 -- Maximum number of posSIB(s) that can be requested on-demand
INTEGER ::= 126 -- Maximum number of the DCI size for CI
INTEGER ::= 125 -- Maximum number of the DCI size for CI minus 1
INTEGER ::= 32 -- Maximum value of Uu Relay RLC channel ID
INTEGER : := 32 -- Maximum number of WLAN IDs to report
INTEGER ::= 4 -- Maximum number of WLAN name
INTEGER : : 8 -- Maximum number of RA procedures information to be included in the RA report
INTEGER ::= 64 -- Maximum number of sidelink transmission parameters configurations
INTEGER ::= 63 -- Maximum number of sidelink transmission parameters configurations minus l
INTEGER ::= 16 -- Maximum number of PSSCH TX configurations
INTEGER ::= 64 -- Maximum number of CLI-RSSI resources for UE
INTEGER ::= 63 -- Maximum number of CLI-RSSI resources for UE minus 1
INTEGER : : 32 -- Maximum number of SRS resources for CLI measurement for UE
INTEGER : := 8
INTEGER : := 12 -- Maximum number of configured grant configurations per BWP
INTEGER : = 11 -- Maximum number of configured grant configurations per BWP minus l
INTEGER : : 16 -- Maximum number of deactivation state for type 2 configured grants per BWP
INTEGER : : 31 -- Maximum number of configured grant configurations per MAC entity minus l
INTEGER ::=8 -- Maximum number of SPS configurations per BWP
INTEGER ::=7 -- Maximum number of SPS configurations per BWP minus l
INTEGER ::=16 -- Maximum number of deactivation state for SPS per BWP
INTEGER : := ffsUpperLimit -- Maximum number of Preconfigured PPW is FFS
INTEGER : := ffsUpperLimit -- Maximum number of UE Tx Timing Error Group ID is FFS
INTEGER ::= ffsUpperLimit -- Maximum number of Preconfigured Gaps is FES
INTEGER ::= 5 --
INTEGER ::= 8 -- Maximum number of paging subgroups per paging occasion
INTEGER ::= 3 --
INTEGER : : 32 -- Maximum number of serving cells in simultaneousTCI-UpdateList
INTEGER : := 64 -- Maximum number of UL Tx DC locations reported by the UE for 2CC uplink CA

ETSI


--- Page 1054  ---


3GPP TS 38.331 version 17.0.0 Release 17
1053
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline maxNrofRoSetGroups-rl7 & INTEGER & ::= 8 & -- Maximum number of RB set groups \\
\hline maxNrofRbSets-rl7 & INTEGER & ::= 8 & -- Maximum number of RB sets \\
\hline maxNrofEnhType3HARQ-ACK-rl7 & INTEGER & ::= 8 & -- Maximum number of enhanced type \\
\hline maxNrofEnhType 3 HARQ-ACK-1-rl7 & INTEGER & ::= 7 & -- Maximum number of enhanced type 3 HARQ-ACK codebook minus 1 \\
\hline maxNrofPRS-ResourcesPerSet-rl7 & INTEGER & ::= 64 & -- Maximum \\
\hline maxNrofPRS-ResourcesPerSet-l-rl7 & INTEGER & ::= 63 & -- Maximum \\
\hline maxNrofPRS-ResourceOffsetValue-l-rl7 & INTEGER & ::= 511 & \\
\hline maxNrofGapId-rl7 & INTEGER & & ::= ffsUpperLimit \\
\hline maxNrofGapId-1-rl7 & INTEGER & & ::= ffsUpperLimit \\
\hline maxNrOfGapPri-rl7 & INTEGER & & ::= ffsUpperLimit \\
\hline maxCEFReport-rl7 & INTEGER & ::= 4 & -- Maximum \\
\hline maxNrofMultiplePDSCHs-rl7 & INTEGER & ::= 8 & -- Maximum \\
\hline maxSliceInfo-rl7 & INTEGER & ::= 8 & -- Maximum number \\
\hline maxCellSlice-rl7 & INTEGER & ::= 16 & -- Maximum number of cells supporting the slice group \\
\hline maxNrofTRS-ResourceSets-rl7 & INTEGER & ::= 64 & -- Maximum \\
\hline maxNrofSearchSpaceGroups-l-rl7 & INTEGER & ::= 2 & -- Maximum \\
\hline maxRemoteUE-rl7 & INTEGER & & ::= ffsUpperLimit \\
\hline maxDCI-4-2-Size-rl7 & INTEGER & ::= 140 & -- Maximum size of DCI format 4-2 \\
\hline maxFreqMBS-rl7 & INTEGER & ::= 5 & -- FFS: if a higher value, e.g. 8 or 16 is needed \\
\hline maxNrofDRX-ConfigPTM-rl7 & INTEGER & ::= 64 & -- Max number of DRX configuration for PTM provided in MBS broadcast in a -- cell \\
\hline maxNrofDRX-ConfigPTM-1-rl7 & INTEGER & ::= 63 & -- Max number of DRX configuration for PTM provided in MBS broadcast in a -- cell minus 1 \\
\hline maxNrofMBS-ServiceListPerUE-rl7 & INTEGER & ::= 16 & -- Maximum number of services which the UE can include in the MBS interest -- indication \\
\hline maxNrofMBS-Session-rl7 & INTEGER & ::= 1024 & -- Maximum number of MBS sessions provided in MBS broadcast in a cell \\
\hline maxNrofMTCH-SSB-MappingWindow-rl7 & INTEGER & ::= 16 & -- FFS: Maximum number of MTCH to SSB beam mapping pattern \\
\hline maxNrofMTCH-SSB-MappingWindow-l-rl7 & INTEGER & ::= 15 & -- FFS: Maximum number of MTCH to SSB beam mapping pattern minus l \\
\hline maxNrofMRB-Broadcast-rl7 & INTEGER & ::= 4 & -- Maximum number of broadcast MRBs configured for one MBS broadcast service -- FFS: if a higher value, e.g. 8, is needed. \\
\hline maxNrofPageGroup-rl7 & INTEGER & ::= 32 & -- Maximum number of paging groups in a paging message \\
\hline maxNrofPDSCH-ConfigPTM-rl7 & INTEGER & ::= 16 & -- Maximum \\
\hline maxNrofPDSCH-ConfigPTM-1-rl7 & INTEGER & ::= 15 & -- Maximum number of PDSCH configuration groups for PTM minus l \\
\hline maxG-RNTI-rl7 & INTEGER & ::= 16 & -- Maximum number of G-RNTI that can be configured for a UE. FFS: if the \\
\hline & & & -final value should be different based on the related RANl discussion on \\
\hline maxG-RNTI-1-rl7 & INTEGER & ::= 15 & -- Maximum number of G-RNTI that can be configured for a UE minus l. \\
\hline & & & -FFS: if the final value should be different based on the related RANl \\
\hline maxG-CS-RNTI-rl7 & INTEGER & ::= 8 & \begin{tabular}{l}
-- Maximum number of G-CS-RNTI that can be configured for a UE. \\
-- FFS: the final value should be different based on the related RANl \\
-- discussion on UE capabilities
\end{tabular} \\
\hline maxG-CS-RNTI-l-rl7 & INTEGER & ::= 7 & -- FFS: Maximum number of G-CS-RNTI that can be configured for a UE minus l. \\
\hline maxMRB-rl7 & INTEGER & ::= 32 & -- Maximum number \\
\hline maxFSAI-MBS-rl7 & INTEGER & ::= 64 & -- Maximum number \\
\hline maxNeighCell-MBS-rl7 & INTEGER & ::= 8 & -- Maximum number \\
\hline
\end{tabular}
-- TAG-MULTIPLICITY-AND-TYPE-CONSTRAINT-DEFINITIONS-STOP
-- ASNISTOP

Editor's note: maxK0-SchedulingOffset and maxK0-SchedulingOffset need confirmation by RAN1.

ETSI


--- Page 1055  ---


3GPP TS 38.331 version 17.0.0 Release 17
1054
ETSI TS 138331 V17.0.0 (2022-05)
- End of NR-RRC-Definitions
-- ASNISTART

END
-- ASNISTOP
6.5 Short Message

Short Messages can be transmitted on PDCCH using P-RNTI with or without associated Paging message using Short Message field in DCI format 1 _0 (see TS 38.212 [17], clause 7.3.1.2.1).

Table 6.5-1 defines Short Messages. Bit 1 is the most significant bit.

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table 6.5-1: Short Messages}
\begin{tabular}{|l|l|}
\hline Bit & Short Message \\
\hline 1 & \begin{tabular}{l}
systeminfoModification \\
If set to 1: indication of a BCCH modification other than SIB6, SIB7 and SIB8.
\end{tabular} \\
\hline 2 & \begin{tabular}{l}
etwsAndCmasindication \\
If set to 1: indication of an ETWS primary notification and/or an ETWS secondary notification and/or a CMAS notification.
\end{tabular} \\
\hline 3 & \begin{tabular}{l}
stopPagingMonitoring \\
This bit can be used for only operation with shared spectrum channel access and if nrofPDCCH-MonitoringOccasionPerSSB-InPO is present. \\
If set to 1: indication that the UE may stop monitoring PDCCH occasion(s) for paging in this Paging Occasion as specified in TS 38.304 [20], clause 7.1.
\end{tabular} \\
\hline 4 & \begin{tabular}{l}
systeminfoModification-eDRX \\
If set to 1: indication of a BCCH modification other than SIB6, SIB7 and SIB8. This indication applies only to UEs using eDRX cycle longer than the BCCH modification period.
\end{tabular} \\
\hline 5-8 & Not used in this release of the specification, and shall be ignored by UE if received. \\
\hline
\end{tabular}
\end{table}
6.6 PC5 RRC messages
6.6.1 General message structure
- PC5-RRC-Definitions

This ASN-1 segment is the start of the PC5 RRC PDU definitions.

ETSI


--- Page 1056  ---


3GPP TS 38.331 version 17.0.0 Release 17
1055
ETSI TS 138331 V17.0.0 (2022-05)
```
-- ASNISTART
-- TAG-PC5-RRC-DEFINITIONS-START
PC5-RRC-Definitions DEFINITIONS AUTOMATIC TAGS ::=
BEGIN
IMPORTS
    SetupRelease,
    RRC-TransactionIdentifier,
    SN-FieldLengthAM,
    SN-FieldLengthUM,
    LogicalChannelIdentity,
    maxNrofSLRB-rl6,
    maxNrofSL-QFIs-rl6,
    maxNrofSL-QFIsPerDest-rl6,
    PagingCycle,
    PagingRecord,
    RSRP-Range,
    SL-MeasConfig-rl6,
    St-MeasId-rl6,
    FreqBandList,
    FreqBandIndicatorNR,
    maxSimultaneousBands,
    maxBandComb,
    maxBands,
    maxSI-MessagePlusl-rl7,
    maxSL-LCID-rl6,
    BandParametersSidelink-rl6,
    RLC-ParametersSidelink-rl6,
    SIBl,
    SL-DRX-ConfigUC-rl7,
    Sl-PagingIdentity-RemoteUE-rll,
    SL-RLC-ChannelID-rl7,
    SystemInformation
FROM NR-RRC-Definitions;
-- TAG-PC5-RRC-DEFINITIONS-STOP
-- ASN1STOP
```


SBCCH-SL-BCH-Message
The SBCCH-SL-BCH-Message class is the set of RRC messages that may be sent from the UE to the UE via SL-BCH on the SBCCH logical channel.
```
-- ASNISTART
-- TAG-SBCCH-SL-BCH-MESSAGE-START
SBCCH-SL-BCH-Message ::= SEQUENCE \
    message SBCCH-SL-BCH-MessageType
}
SBCCH-SL-BCH-MessageType::= CHOICE [
```


ETSI


--- Page 1057  ---


3GPP TS 38.331 version 17.0.0 Release 17
1056
ETSI TS 138331 V17.0.0 (2022-05)
```
    cl CHOICE {
        masterInformationBlockSidelink MasterInformationBlockSidelink,
        sparel NULL
    },
    messageClassExtension SEQUENCE {}
}
-- TAG-SBCCH-SL-BCH-MESSAGE-STOP
-- ASNISTOP
```

- SCCH-Message

The SCCH-Message class is the set of RRC messages that may be sent from the UE to the UE for unicast of NR sidelink communication on SCCH logical channel.
```
-- ASNISTART
-- TAG-SCCH-MESSAGE-START
SCCH-Message ::= SEQUENCE \
    message
}
SCCH-MessageType ::= CHOICE {
    cl CHOICE [
        measurementReportSidelink MeasurementReportSidelink,
        rrcReconfigurationSidelink RRCReconfigurationSidelink,
        rrcReconfigurationCompleteSidelink RRCReconfigurationCompleteSidelink,
        rrcReconfigurationFailureSidelink RRCReconfigurationFailureSidelink,
        uecapabilityEnquirySidelink UECapabilityEnquirySidelink,
        ueCapabilityInformationSidelink UECapabilityInformationSidelink,
        uuMessageTransferSidelink-rl7 UuMessageTransferSidelink-rl7,
        remoteUEInformationSidelink-rl7 RemoteUEInformationSidelink-rl7
    },
    messageClassExtension CHOICE {
        c2 CHOICE [
            notificationMessageSidelink-rl7 NotificationMessageSidelink-rl7,
            ueAssistanceInformationSidelink-rl7 UEAssistanceInformationSidelink-rl7,
            spare6 NULL, spare5 NULL, spare4 NULL, spare3 NULL, spare2 NULL, sparel NULL
        },
        messageClassExtensionFuture-rl7 SEQUENCE {}
    }
}
-- TAG-SCCH-MESSAGE-STOP
-- ASNISTOP
```


ETSI


--- Page 1058  ---


3GPP TS 38.331 version 17.0.0 Release 17
1057
ETSI TS 138331 V17.0.0 (2022-05)
6.6.2 Message definitions
- MasterInformationBlockSidelink

The MasterInformationBlockSidelink includes the system information transmitted by a UE via SL-BCH.
Signalling radio bearer: N/A
RLC-SAP: TM
Logical channel: SBCCH
Direction: UE to UE
MasterInformationBlockSidelink
```
-- ASNISTART
-- TAG-MASTERINFORMATIONBLOCKSIDELINK-START
MasterInformationBlockSidelink ::=
    sl-TDD-Config-rl6
    inCoverage-r16
    directFrameNumber-rl6
    slotIndex-rl6
    reservedBits-rl6
}
-- TAG-MASTERINFORMATIONBLOCKSIDELINK-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline MasterinformationBlockSidelink field descriptions \\
\hline \begin{tabular}{l}
directFrameNumber \\
Indicates the frame number in which S-SSB transmitted.
\end{tabular} \\
\hline \begin{tabular}{l}
inCoverage \\
Value true indicates that the UE transmitting the MasterinformationBlockSidelink is in network coverage, or UE selects GNSS timing as the synchronization reference source.
\end{tabular} \\
\hline \begin{tabular}{l}
slotindex \\
Indicates the slot index in which S-SSB transmitted.
\end{tabular} \\
\hline
\end{tabular}
- MeasurementReportSidelink

The MeasurementReportSidelink message is used for the indication of measurement results of NR sidelink.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM

ETSI


--- Page 1059  ---


3GPP TS 38.331 version 17.0.0 Release 17
1058
ETSI TS 138331 V17.0.0 (2022-05)

Logical channel: SCCH
Direction: UE to UE
MeasurementReportSidelink message
```
-- ASNISTART
-- TAG-MEASUREMENTREPORTSIDELINK-START
MeasurementReportSidelink ::=
    criticalExtensions
        measurementReportSidelink-rl6
        criticalExtensionsFuture
    }
}
MeasurementReportSidelink-IEs-rl6::= SEQUENCE {
    sl-measResults-rl6
    lateNonCriticalExtension
    nonCriticalExtension
}
SL-MeasResults-rl6 ::= SEQUENCE \
    sl-MeasId-rl6
    sl-MeasResult-rl6
    ...
}
SL-MeasResult-rl6 ::= SEQUENCE \
    sl-ResultDMRS-rl6
    ...
}
SL-MeasQuantityResult-rl6 ::= SEQUENCE {
    sl-RSRP-r16
    ...
}
-- TAG-MEASUREMENTREPORTSIDELINK-STOP
-- ASN1STOP
```


\begin{tabular}{|l|}
\hline MeasurementReportSidelink field descriptions \\
\hline \begin{tabular}{l}
s/-Meas/d \\
Identifies the sidelink measurement identity for which the reporting is being performed.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-MeasResult \\
Measured RSRP results of a unicast destination.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1060  ---


3GPP TS 38.331 version 17.0.0 Release 17
1059
ETSI TS 138331 V17.0.0 (2022-05)
- \( \quad \) NotificationMessageSidelink

The NotificationMessageSidelink message is used to send notification message from U2N Relay UE to the connected U2N Remote UE.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH
Direction: U2N Relay UE to U2N Remote UE
NotificationMessageSidelink message
```
-- ASNISTART
-- TAG-NOTIFICATIONMESSAGESIDELINK-START
NotificationMessageSidelink-rl7 ::= SEQUENCE {
    criticalExtensions
        notificationMessageSidelink-rl7
        criticalExtensionsFuture
    }
}
NotificationMessageSidelink-rl7-IEs ::= SEQUENCE {
    indicationType-rl7
                ENUMERATED {
                    relayUE-UuRLF-rl7, relayUE-HO-rl7, relayUE-CellReselection-rl7,
                    relayUE-UuRRCFailure-rl7
    lateNonCriticalExtension
    nonCriticalExtension
}
-- TAG-NOTIFICATIONMESSAGESIDELINK -STOP
-- ASNISTOP
```


RemoteUEInformationSidelink
The RemoteUEInformationSidelink message is used to request SIB(s) or provide paging related information as specified in clause 5.8.9.8.1.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH
Direction: L2 U2N Remote UE to L2 U2N Relay UE

ETSI


--- Page 1061  ---


3GPP TS 38.331 version 17.0.0 Release 17
1060
ETSI TS 138331 V17.0.0 (2022-05)

RemoteUEInformationSidelink message
```
-- ASNISTART
-- TAG-REMOTEUEINFORMATIONSIDELINK-START
RemoteUEInformationSidelink-rl7 ::=
    criticalExtensions
        remoteInformationSidelink-rl7
        criticalExtensionsFuture
    }
}
RemoteUEInformationSidelink-rl7-IEs ::=
    sl-Requested-SI-List-rl7
    sl-PagingInfo-RemoteUE-rl7
    lateNonCriticalExtension
    nonCriticalExtension
}
SL-Requested-SI-List-rl7 ::=
SL-PagingInfo-RemoteUE-rl7 ::=
    sl-PagingIdentity-RemoteUE-rl7
    sl-PagingCycle-RemoteUE-rl7
}
-- TAG-REMOTEUEINFORMATIONSIDELINK-STOP
-- ASN1STOP
```

```
SEQUENCE \
    CHOICE \
        RemoteUEInformationSidelink-rl7-IEs,
        SEQUENCE {}
```

SEQUENCE 1
    SetupRelease \{ SL-Requested-SI-List-rl7\} OPTIONAL, -- Need M
    SetupRelease \{ SL-PagingInfo-RemoteUE-rlㄱ\}\}OPTIONAL, -- Need M
    OCTET STRING
OPTIONAL,
    SEQUENCE \{\}
OPTIONAL
BIT STRING (SIZE (maxSI-MessagePlusl-rl7))
SEQUENCE 1
    SL-PagingIdentity-RemoteUE-rl7 OPTIONAL, -- Need M
    PagingCycle OPTIONAL -- Need M

\begin{tabular}{|l|}
\hline RemotelnformationSidelink-IEs field descriptions \\
\hline \begin{tabular}{l}
sl-Requested-Si-List \\
Contains a list of requested SI messages. The first/leftmost bit corresponds to SIB index 1 (i.e. SIB1), the second bit corresponds to SIB index 2 (i.e. SIB2), and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Paginginfo-RemoteUE \\
Indicates the paging information used by L2 U2N Relay UE to perform the connected L2 U2N Remote UE's paging monitoring.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Pagingidentity-RemoteUE \\
Indicates the L2 U2N Remote UE's paging UE ID.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PagingCycle-RemoteUE \\
Indicates the L2 U2N Remote UE's UE specific DRX cycle. Value rf32 corresponds to 32 radio frames, value rf64 corresponds to 64 radio frames and so on.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RRCReconfigurationSidelink

The RRCReconfigurationSidelink message is the command to AS configuration of the PC5 RRC connection. It is only applied to unicast of NR sidelink communication.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH

ETSI


--- Page 1062  ---


3GPP TS 38.331 version 17.0.0 Release 17
1061
ETSI TS 138331 V17.0.0 (2022-05)

Direction: UE to UE
RRCReconfigurationSidelink message
```
-- ASNISTART
-- TAG-RRCRECONEIGURATIONSIDELINK-START
RRCReconfigurationSidelink ::= SEQUENCE [
    rrc-TransactionIdentifier-r16
    criticalExtensions
        rrcReconfigurationSidelink-rl6
        criticalExtensionsFuture
    }
}
RRCReconfigurationSidelink-IEs-rl6 ::= SEQUENCE \
```

```
    slrb-ConfigToReleaseList-r16 SEQUENCE (SIZE (l..maxNrofSLRB-rl6)) OF SLRB-PC5-ConfigIndex-rl6
    sl-MeasConfig-rl6 SetupRelease {SL-MeasConfig-r16}
    sl-CSI-RS-Config-rl6 SetupRelease {SL-CSI-RS-Config-r16}
    sl-ResetConfig-rl6 ENUMERATED {true}
    sl-LatencyBoundCSI-Report-rl6 INTEGER (3..160)
    lateNonCriticalExtension OCTET STRING
    nonCriticalExtension RRCReconfigurationSidelink-vl700-IEs
}
RRCReconfigurationSidelink-vl700-IEs ::= SEQUENCE [
    sl-DRX-ConfigUC-PC5-rl7 SetupRelease { SL-DRX-ConfigUC-rl7}
    sl-LatencyBoundIUC-Report-r17
    sl-RLC-ChannelToReleaseList-PC5-rl7
    sl-RLC-ChannelToAddModList-PC5-rl7
    nonCriticalExtension
}
SL-LatencyBoundIUC-Report-rl7::= INTEGER (3..160)
SLRB-Config-rl6::= SEQUENCE \
    slrb-PC5-ConfigIndex-r16 SLRB-PC5-ConfigIndex-r16,
    sl-SDAP-ConfigPC5-r16 SL-SDAP-ConfigPC5-r16
    sl-PDCP-ConfigPC5-r16 SL-PDCP-ConfigPC5-r16
    sl-RLC-ConfigPC5-r16 SL-RLC-ConfigPC5-r16
    sl-MAC-LogicalChannelConfigPC5-r16 SL-LogicalChannelConfigPC5-rl6
    ...
}
SLRB-PC5-ConfigIndex-r16::= INTEGER (1..maxNrofSLRB-r16)
SL-SDAP-ConfigPC5-r16 ::= SEQUENCE \
```

```
    sl-SDAP-Header-rl6 ENUMERATED {present, absent},
    ...
}
```


ETSI


--- Page 1063  ---


3GPP TS 38.331 version 17.0.0 Release 17
1062
ETSI TS 138331 V17.0.0 (2022-05)
```
SL-PDCP-ConfigPC5-rl6 ::=
    sl-PDCP-SN-Size-rl6
    sl-OutOfOrderDelivery-rl6
    ...
}
SL-RLC-ConfigPC5-rl6 ::=
    sl-AM-RLC-rl6
        sl-SN-FieldLengthAM-rl6
        ...
    },
    sl-UM-Bi-Directional-RLC-rl6
        sl-SN-FieldLengthUM-rl6
        ...
    },
    sl-UM-Uni-Directional-RLC-rl6
        sl-SN-FieldLengthUM-rl6
        ...
    }
}
SL-LogicalChannelConfigPC5-rl6 ::= SEQUENCE {
    sl-LogicalChannelIdentity-rl6 LogicalChannelIdentity,
    ...
}
SL-PQFI-rl6 ::= INTEGER (1..64)
SL-CSI-RS-Config-rl6 ::= SEQUENCE {
    sl-CSI-RS-FreqAllocation-rl6
        sl-OneAntennaPort-rl6
        sl-TwoAntennaPort-rl6
    }
    sl-CSI-RS-FirstSymbol-rl6
    ...
}
SL-RLC-ChannelConfig-PC5-rl7::=
    sl-RLC-ChannelID-PC5-rl7
    sl-RLC-ConfigPC5-rl7
    sl-MAC-LogicalChannelConfigPC5-rl7 SL-LogicalChannelConfigPC5-rl6
    ...
}
-- TAG-RRCRECONFIGURATIONSIDELINK-STOP
-- ASNISTOP
```

```
SEQUENCE {
    ENUMERATED {lenl2bits, lenl8bits}
    ENUMERATED { true }
```

```
CHOICE \
    SEQUENCE {
        SN-FieldLengthAM OPTIONAL, -- Need. M
    SEQUENCE {
        SN-FieldLengthUM OPTIONAL, -- Need. M
    SEQUENCE \
        SN-FieldLengthUM OPTIONAL, -- Need. M
    LogicalChannelIdentity,
    ...
}
SEQUENCE
        SL-RLC
    ChannelID-rl7,
        ...
}
    SL-RLC-ChannelID-rl7
```

```
OPTIONAL, -- Need. M
OPTIONAL, -- Need. R
```

```
OPTIONAL, -- Need M
```

```
OPTIONAL, -- Need M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
OPTIONAL, -- Need. M
```


ETSI


--- Page 1064  ---


3GPP TS 38.331 version 17.0.0 Release 17
1063
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline RRCReconfigurationSidelink field descriptions \\
\hline \begin{tabular}{l}
si-CSI-RS-FreqAllocation \\
Indicates the frequency domain position for sidelink CSI-RS.
\end{tabular} \\
\hline \begin{tabular}{l}
si-CSI-RS-FirstSymbol \\
Indicates the position of first symbol of sidelink CSI-RS.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-DRX-ConfigUC-PC5 \\
Indicates the NR sidelink DRX configuration for unicast communication, as specified in TS 38.321 [3]
\end{tabular} \\
\hline \begin{tabular}{l}
si-LatencyBoundCSI-Report \\
Indicate the latency bound of SL CSI report from the associated SL CSI triggering in terms of number of slots.
\end{tabular} \\
\hline \begin{tabular}{l}
si-LatencyBoundIUC-Report \\
Indicates the latency bound of SL Inter-UE coordination report from the associated SL Inter-UE coordination explicit request triggering in terms of number of slots.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-LogicalChannelldentity \\
Indicates the identity of the sidelink logical channel.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MappedQoS-Flows ToAddList \\
Indicate the QoS flows to be mapped to the configured sidelink DRB. Each entry is indicated by the SL-PQFI, which is used between UEs, as defined in TS 23.287 [55].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MappedQoS-FlowsToReleaseList \\
Indicate the QoS flows to be released from the configured sidelink DRB. Each entry is indicated by the SL-PQFI, which is used between UEs, as defined in TS 23.287 [55].
\end{tabular} \\
\hline \begin{tabular}{l}
sl-MeasConfig \\
Indicates the sidelink measurement configuration for the unicast destination.
\end{tabular} \\
\hline \begin{tabular}{l}
si-OutOfOrderDelivery \\
Indicates whether or not outOfOrderDelivery specified in TS 38.323 [5] is configured. This field should be either always present or always absent, after the sidelink radio bearer is established.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PDCP-SN-Size \\
Indicates the PDCP SN size of the configured sidelink DRB.
\end{tabular} \\
\hline \begin{tabular}{l}
si-Resetconfig \\
Indicates that the full configuration should be applicable for the RRCReconfiguration Sidelink message.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-SDAP-Header \\
Indicates whether or not a SDAP header is present on this sidelink DRB.
\end{tabular} \\
\hline
\end{tabular}
- \( \quad \) RRCReconfigurationCompleteSidelink

The RRCReconfigurationCompleteSidelink message is used to confirm the successful completion of a PC5 RRC AS reconfiguration. It is only applied to unicast of NR sidelink communication.

Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH
Direction: UE to UE
RRCReconfigurationCompleteSidelink message

-- ASNISTART
ETSI


--- Page 1065  ---


3GPP TS 38.331 version 17.0.0 Release 17
1064
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-RRCRECONFIGURATIONCOMPLETESIDELINK-START
RRCReconfigurationCompleteSidelink ::= SEQUENCE {
    rrc-TransactionIdentifier-rl6
    criticalExtensions
        rrcReconfigurationCompleteSidelink-rl6
        criticalExtensionsFuture
    }
}
RRCReconfigurationCompleteSidelink-IEs-rl6 ::= SEQUENCE {
    lateNonCriticalExtension OCTET STRING
    OPTIONAL,
}
-- TAG-RRCRECONFIGURATIONCOMPLETESIDELINK-STOP
-- ASNISTOP
```


RRCReconfigurationFailureSidelink
The RRCReconfigurationFailureSidelink message is used to indicate the failure of a PC5 RRC AS reconfiguration. It is only applied to unicast of NR sidelink communication.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH
Direction: UE to UE
RRCReconfigurationFailureSidelink message
```
-- ASNISTART
-- TAG-RRCRECONFIGURATIONEAILURESIDELINK-START
RRCReconfigurationFailureSidelink ::= SEQUENCE \
    rrc-TransactionIdentifier-rl6 RRC-TransactionIdentifier,
    criticalExtensions
        rrcReconfigurationFailureSidelink-rl6 RRCReconfigurationEailureSidelink-IEs-rl6,
        criticalExtensionsFuture SEQUENCE {}
    }
}
RRCReconfigurationFailureSidelink-IEs-rl6 ::= SEQUENCE {
```

```
    nonCriticalExtension SEQUENCE {}
}
-- TAG-RRCRECONFIGURATIONFAILURESIDELINK-STOP
-- ASNISTOP
```


ETSI


--- Page 1066  ---


3GPP TS 38.331 version 17.0.0 Release 17
1065
ETSI TS 138331 V17.0.0 (2022-05)

Editor's Note: FFS on the format of reject indication, with either RRCReconfigurationCompleteSidelink or RRCReconfigurationFailureSidelink.
- UEAssistanceInformationSidelink

The UEAssistanceInformationSidelink may include sidelink DRX assistance information used to determine the sidelink DRX configuration.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH
Direction: UE to UE
UEAssistanceInformationSidelink
```
-- ASNISTART
-- TAG-UEASSISTANCEINFORMATIONSIDELINK-START
UEAssistanceInformationSidelink-rl7 := SEQUENCE [
    criticalExtensions CHOICE {
        ueAssistanceInformationSidelink-rl7 UEAssistanceInformationSidelink-rl7-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
UEAssistanceInformationSidelink-rl7-IEs ::= SEQUENCE [
    sl-PreferredDRXConfig-rl7
    lateNonCriticalExtension
    nonCriticalExtension
}
SL-PreferredDRXConfig-rl7 ::=
    sl-PreferredDRX-onDurationTimer-rl7
    sl-PreferredDRX-Cycle-rl7
    sl-PreferredDRX-StartOffset
}
-- TAG-UEASSISTANCEINFORMATIONSIDELINK-STOP
-- ASNISTOP
```


Editor's Note: values for onduration, startoffset, cycle in UE preferred DRX configuration are FFS.

ETSI


--- Page 1067  ---


3GPP TS 38.331 version 17.0.0 Release 17
1066
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UEAssistanceinformationSidelink field descriptions \\
\hline \begin{tabular}{l}
si-PreferredDRX-Config \\
Indicates the reference sidelink DRX configuration provided by a UE to a peer UE for determining the sidelink DRX configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PreferredDRX-Cycle \\
Indicates DRX cycle value in UE's preferred SL DRX configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
s/-PreferredDRX-onDurationTimer \\
Indicates onduration timer value in UE's preferred SL DRX configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PreferredDRX-StartOffset \\
Indicates DRX startoffset value in UE's preferred SL DRX configuration.
\end{tabular} \\
\hline
\end{tabular}
- UECapabilityEnquirySidelink

The UECapabilityEnquirySidelink message is used to request UE sidelink capabilities. It is only applied to unicast of NR sidelink communication.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH
Direction: UE to UE
UECapabilityEnquirySidelink information element
-- ASNISTART
-- TAG-UECAPABILITYENQUIRYSIDELINK-START

UECapabilityEnquirySidelink : :=
rrc-TransactionIdentifier-rl6
criticalExtensions
ueCapabilityEnquirySidelink-rl6
criticalExtensionsFuture
\}
\}
UECapabilityEnquirySidelink-IEs-rl6 : := SEQUENCE [
frequencyBandListFilterSidelink-rl6 FreqBandList
ue-CapabilityInformationSidelink-rl6 OCTET STRING
lateNonCriticalextension OCTET STRING
nonCriticalextension SEQUENCE\{\}
\}
-- TAG-UECAPABILITYENQUIRYSIDELINK-STOP
-- ASNISTOP
SEQUENCE 1
RRC-TransactionIdentifier,
CHOICE 1
SEQUENCE \{\}
"
    SEQUENCE \{\}
        criticalExtensionsFuture
    rrc-TransactionIdentifier-rl6
    criticalExtensions
            PRO-Tran
        CHOICE 1
        \}
\}
    ECa
        OCTET STRING
\}
                                            TAG-UECA
ASNISTOP

UECapabilityEnquirySidelink-IEs-rl6,
                MELIELIEII
        SEQUENCE\{\} OPTIONAL
                M
```
OPTIONAL, -- Need. N
```

OPTIONAL, -- Need N
OPTIONAL,
OPTIONAL


--- Page 1068  ---


3GPP TS 38.331 version 17.0.0 Release 17
1067
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline UECapabilityEnquirySidelink-IEs field descriptions \\
\hline \begin{tabular}{l}
frequencyBandListFilterSidelink \\
This field is used to indicate frequency bands for which the peer UE is requested to provide supported bands and band combinations for NR sidelink communications. The UE always provides this field.
\end{tabular} \\
\hline \begin{tabular}{l}
ue-CapabilitylnformationSidelink \\
This field indicates the UECapabilitylnformationSidelink message to provide the UE sidelink capability, which can be optionally sent together with UECapabilityEnquirySidelink.
\end{tabular} \\
\hline
\end{tabular}
- UECapabilityInformationSidelink

The UECapabilityInformationSidelink message is used to transfer UE radio access capabilities. It is only applied to unicast of NR sidelink communication.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH
Direction: UE to UE
UECapabilityInformationSidelink information element
```
-- ASNISTART
-- TAG-UECAPABILITYINFORMATIONSIDELINK-START
UECapabilityInformationSidelink ::= SEQUENCE {
    rrc-TransactionIdentifier-rl6 RRC-TransactionIdentifier,
    criticalExtensions CHOICE {
        ueCapabilityInformationSidelink-rl6 UECapabilityInformationSidelink-IEs-rl6,
        criticalExtensionsFuture SEQUENCE {}
    }
}
UECapabilityInformationSidelink-IEs-rl6 ::= SEQUENCE {
    accessStratumReleaseSidelink-rl6 AccessStratumReleaseSidelink-rl6,
```

```
}
UECapabilityInformationSidelink-IEs-vl700 ::= SEQUENCE {
```

```
}
MAC-ParametersSidelink-rl7 ::= SEQUENCE [
```


ETSI


--- Page 1069  ---


3GPP TS 38.331 version 17.0.0 Release 17
1068
ETSI TS 138331 V17.0.0 (2022-05)
```
    drx-OnSidelink-rl7 ENUMERATED {supported}
    ...
}
```

```
PDCP-ParametersSidelink-rl6 ::= SEQUENCE {
    outOfOrderDeliverySidelink-r16 ENUMERATED {supported} OPTIONAL,
    ...
}
BandCombinationListSidelinkNR-rl6 ::= SEQUENCE (SIZE (l..maxBandComb)) OF BandCombinationParametersSidelinkNR-rl6
BandCombinationParametersSidelinkNR-rl6 ::= SEQUENCE (SIZE (l..MaxSimultaneousBands)) OF BandParametersSidelink-rl6
BandSidelinkPC5-rl6 ::= SEQUENCE \
    freqBandSidelink-rl6 FreqBandIndicatorNR,
    --15-1
    sl-Reception-rl6 SEQUENCE \
        harq-RxProcessSidelink-r16 ENUMERATED {n16, n24, n32, n64},
        pscch-RxSidelink-rl6 ENUMERATED {valuel, value2},
        scs-CP-PatternRxSidelink-rl6 CHOICE {
            frl-rl6 SEQUENCE \
                scs-15kHz-r16 BIT STRING (SIZE (16)) OPTIONAL,
                scs-30kHz-r16 BIT STRING (SIZE (16)) OPTIONAL,
                scs-60kHz-r16 BIT STRING (SIZE (16)) OPTIONAL
            },
            fr2-rl6 SEQUENCE \
                scs-60kHz-r16 BIT STRING (SIZE (16)) OPTIONAL,
                scs-120kHz-r16 BIT STRING (SIZE (16)) OPTIONAL
            }
        } OPTIONAL,
        extendedCP-RxSidelink-rl6 ENUMERATED {supported} OPTIONAL
    }
    --15-10
    sl-Tx-2560AM-r16 ENUMERATED {supported} OPTIONAL,
    --15-12
    lowSE-64QAM-MCS-TableSidelink-r16 ENUMERATED {supported} OPTIONAL,
    ...;
    [ [
    --15-14
    csi-ReportSidelink-rl6 SEQUENCE \
        csi-RS-PortsSidelink-r16 ENUMERATED {pl, p2}
    } OPTIONAL,
    --15-19
    rankTwoReception-rl6 ENUMERATED {supported} OPTIONAL,
    --15-23
    sl-openLoopPC-RSRP-ReportSidelink-rl6 ENUMERATED {supported} OPTIONAL,
    --13-1
    sl-Rx-2560AM-r16 ENUMERATED {supported} OPTIONAL
    ] ]
}
-- TAG-UECAPABILITYINFORMATIONSIDELINK-STOP
```


ETSI


--- Page 1070  ---


3GPP TS 38.331 version 17.0.0 Release 17
1069
ETSI TS 138331 V17.0.0 (2022-05)

-- ASNISTOP
- UuMessage TransferSidelink

The UuMessageTransferSidelink message is used for the sidelink transfer of Paging message and System Information messages.
Signalling radio bearer: SL-SRB3
RLC-SAP: AM
Logical channel: SCCH
Direction: L2 U2N Relay UE to L2 U2N Remote UE
UuMessageTransferSidelink message
-- ASNISTART
-- TAG-UUMESSAGETRANSEERSIDELINK-START
UuMessageTransferSidelink-rl7 : := SEQUENCE [
criticalextensions
uuMessageTransferSidelink-rl7
CHOICE [
UuMessageTransferSidelink-rl7-IEs,
criticalExtensionsFuture
SEQUENCE \{\}
\}
\}

UuMessageTransferSidelink-rl7-IEs : :=
sl-PagingDelivery-rlv
sl-SIBl-Delivery-rl7
sl-SystemInformationDelivery-rl7
lateNonCriticalExtension
nonCriticalExtension
\}
-- TAG-UUMESSAGETRANSEERSIDELINK-STOP
-- ASNISTOP

\begin{tabular}{|l|}
\hline UuMessageTransferSidelink-IEs field descriptions \\
\hline \begin{tabular}{l}
sl-Paging Delivery \\
This field is used to transfer PagingRecord relevant to the L2 U2N Remote UE in RRC_IDLE or RRC_INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-SIB1-Delivery \\
This field is used to transfer SIB1 to the L2 U2N Remote UE in RRC IDLE or RRC INACTIVE.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-Systeminformation Delivery \\
This field is used to transfer SIBs to the L2 U2N Remote UE in RRC_IDLE or RRC_INACTIVE.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1071  ---


3GPP TS 38.331 version 17.0.0 Release 17
1070
ETSI TS 138331 V17.0.0 (2022-05)
- End of PC5-RRC-Definitions
-- ASNISTART
END
-- ASNISTOP

ETSI


--- Page 1072  ---


3GPP TS 38.331 version 17.0.0 Release 17
1071
ETSI TS 138331 V17.0.0 (2022-05)

7 Variables and constants
7.1 Timers
7.1.1 Timers (Informative)

ETSI


--- Page 1073  ---


3GPP TS 38.331 version 17.0.0 Release 17
1072
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Timer & Start & Stop & At expiry \\
\hline T300 & Upon transmission of RRCSetupRequest. & Upon reception of RRCSetup or RRCReject message, cell reselection, the (re)selected L2 U2N Relay UE becomes unsuitable, and upon abortion of connection establishment by upper layers. & Perform the actions as specified in 5.3.3.7. \\
\hline T301 & Upon transmission of RRCReestabilshmentRe quest & Upon reception of RRCReestablishment or RRCSetup message as well as when the selected cell becomes unsuitable or the (re)selected L2 U2N Relay UE becomes unsuitable. & Go to RRC_IDLE \\
\hline T302 & Upon reception of RRCReject while performing RRC connection establishment or resume, upon reception of RRCRelease with waitTime. & Upon entering RRC_CONNECTED or RRC_IDLE, upon cell reselection, upon cell change due to relay (re)selection, and upon reception of RRCReject message. & Inform upper layers about barring alleviation as specified in 5.3.14.4 \\
\hline T304 & Upon reception of RRCReconfiguration message including reconfigurationWithSync for the MCG, or upon reception of RRCReconfiguration message including reconfigurationWithSync for the SCG not indicated as deactivated in the NR or E-UTRA message containing the RRCReconfiguration message or upon conditional reconfiguration execution i.e. when applying a stored RRCReconfiguration message including reconfigurationWithSync. & Upon successful completion of random access on the corresponding SpCell For T304 of SCG, upon SCG release & \begin{tabular}{l}
For T304 of MCG, in case of the handover from NR or intra-NR handover, initiate the RRC reestablishment procedure; In case of handover to NR, perform the actions defined in the specifications applicable for the source RAT. If any DAPS bearer is configured and if there is no RLF in source PCell, initiate the failure information procedure. \\
For T304 of SCG, inform network about the reconfiguration with sync failure by initiating the SCG failure information procedure as specified in 5.7.3.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1074  ---


3GPP TS 38.331 version 17.0.0 Release 17
1073
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Timer & Start & Stop & At expiry \\
\hline T310 & Upon detecting physical layer problems for the SpCell i.e. upon receiving N310 consecutive out-ofsync indications from lower layers. & Upon receiving N311 consecutive in-sync indications from lower layers for the SpCell, upon receiving RRCReconfiguration with reconfigurationWithSync for that cell group, upon reception of MobilityFromNRCommand, upon the reconfiguration of \( n f \) TimersAnd Constant, upon initiating the connection reestablishment procedure, upon conditional reconfiguration execution i.e. when applying a stored RRCReconfiguration message including reconfigurationWithSync for that cell group, and upon initiating the MCG failure information procedure. Upon SCG release, if the T310 is kept in SCG. & If the T310 is kept in MCG: If AS security is not activated: go to RRC_IDLE else: initiate the MCG failure information procedure as specified in 5.7.3b or the connection reestablishment procedure as specified in 5.3.7 or the procedure as specified in 5.3.10.3 if any DAPS bearer is configured. If the T310 is kept in SCG, Inform E-UTRAN/NR about the SCG radio link failure by initiating the SCG failure information procedure as specified in 5.7.3. \\
\hline T311 & Upon initiating the RRC connection reestablishment procedure & Upon selection of a suitable NR cell, or upon selection of a suitable L2 U2N Relay UE, or a cell using another RAT. & Enter RRC_IDLE \\
\hline
\end{tabular}

ETSI


--- Page 1075  ---


3GPP TS 38.331 version 17.0.0 Release 17
1074
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Timer & Start & Stop & At expiry \\
\hline T312 & \begin{tabular}{l}
If T312 is configured in MCG: Upon triggering a measurement report for a measurement identity for which T312 has been configured and use T312 has been set to true, while T310 in PCell is running. \\
If T312 is configured in SCG and use T312 has been set to true: Upon triggering a measurement report for a measurement identity for which T312 has been configured, while T310 in PSCell is running.
\end{tabular} & Upon receiving N311 consecutive in-sync indications from lower layers for the SpCell, receiving \( R R C \) Reconfiguration with reconfigurationWithSync for that cell group, upon reception of MobilityFromNRCommand, upon initiating the connection reestablishment procedure, upon the reconfiguration of \( n f \) TimersAnd Constant, upon initiating the MCG failure information procedure, upon conditional reconfiguration execution i.e. when applying a stored RRCReconfiguration message including reconfigurationWithSync for that cell group, and upon the expiry of T310 in corresponding SpCell. Upon SCG release, if the T312 is kept in SCG & \begin{tabular}{l}
If the T312 is kept in MCG initiate the MCG failure information procedure as specified in 5.7.3b or the connection re-establishment procedure. \\
If the T312 is kept in SCG, Inform E-UTRAN/NR about the SCG radio link failure by initiating the SCG failure information procedure.as specified in 5.7.3.
\end{tabular} \\
\hline T316 & Upon transmission of the MCGFailurelnformation message & Upon receiving RRCRelease, RRCReconfiguration with reconfigurationwithSync for the PCell, MobilityFromNRCommand, or upon initiating the reestablishment procedure & Perform the actions as specified in 5.7.3b.5. \\
\hline T319 & Upon transmission of RRCResumeRequest or RRCResumeRequest1 when the resume procedure is not initiated for SDT. & Upon reception of RRCResume, RRCSetup, RRCRelease, RRCRelease with suspend Config or RRCReject message, upon cell re-selection and upon relay (re)selection. & Perform the actions as specified in 5.3.13.5. \\
\hline T319a & Upon transmission of RRCResumeRequest or RRCResumeRequest1 when the resume procedure is initiated for SDT. & Upon reception of RRCResume, RRCSetup, RRCRelease, RRCReject message or upon failure to resume RRC connection for SDT as specified in 5.3.13.5. & Perform the actions as specified in 5.3.13.5. \\
\hline
\end{tabular}

ETSI


--- Page 1076  ---


3GPP TS 38.331 version 17.0.0 Release 17
1075
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Timer & Start & Stop & At expiry \\
\hline T320 & Upon reception of 1320 or upon cell (re)selection to NR from another RAT with validity time configured for dedicated priorities (in which case the remaining validity time is applied). & Upon entering RRC_CONNECTED, upon reception of RRCRelease, when PLMN selection or SNPN selection is performed on request by NAS, when the UE enters RRC_IDLE from RRC_INACTIVE, or upon cell (re)selection to another RAT (in which case the timer is carried on to the other RAT). & Discard the cell reselection priority information provided by dedicated signalling. \\
\hline T321 & Upon receiving measConfig including a reportConfig with the purpose set to reportCG/ & Upon acquiring the information needed to set all fields of cgiinfo, upon receiving measConfig that includes removal of the reportConfig with the purpose set to reportCG/and upon detecting that a cell is not broadcasting SIB1. & Initiate the measurement reporting procedure, stop performing the related measurements. \\
\hline T322 & Upon receiving measConfig including reportConfigNR with the purpose set to reportSFTD and drx-SFTD-NeighMeas is set to true. & Upon acquiring the SFTD measurement results, upon receiving measConfig that includes removal of the reportConfig with the purpose set to reportSFTD. & Initiate the measurement reporting procedure, stop performing the related measurements. \\
\hline T325 & Upon reception of RRCRelease message with deprioritisation Timer. & & Stop deprioritisation of all frequencies or NR signalled by RRCRelease. \\
\hline T330 & Upon receiving LoggedMeasurementCon figuration message & Upon log volume exceeding the suitable UE memory, upon initiating the release of LoggedMeasurementConfigurati on procedure & Perform the actions specified in 5.5a.1.4 \\
\hline T331 & Upon receiving RRCRelease message with meas/dleDuration & Upon receiving RRCSetup, RRCResume, RRCRelease with idle/inactive measurement configuration, upon cell selection/reselection to a cell that does not belong to the validityArea (if configured), or upon cell re-selection to another RAT. & Perform the actions as specified in 5.7.8.3. \\
\hline
\end{tabular}

ETSI


--- Page 1077  ---


3GPP TS 38.331 version 17.0.0 Release 17
1076
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Timer & Start & Stop & At expiry \\
\hline T342 & Upon transmitting UEAssistance/nformation message with DelayBudgetReport. & Upon releasing delayBudgetReportingConfig during the connection reestablishment/resume procedures, and upon receiving delayBudgetReportingConfig set to release. & No action. \\
\hline T345 & Upon transmitting UEAssistance/nformation message with overheatingAssistance & Upon releasing overheatingAssistance during the connection re-establishment procedure, upon initiating the connection resumption procedure, and upon receiving overheatingAssistanceConfig set to release. & No action. \\
\hline T346a (The UE maintains one instance of this timer per cell group) & Upon transmitting UEAssistance/nformation message with drPreference. & Upon releasing \( d r x \) PreferenceConfig during the connection reestablishment/resume procedures, upon receiving \( d r x \) PreferenceConfig set to release, or upon performing MR-DC release. & No action. \\
\hline T346b (The UE maintains one instance of this timer per cell group) & Upon transmitting UEAssistanceInformation message with maxBWPreference. & Upon releasing maxBWPreferenceConfig during the connection reestablishment/resume procedures, upon receiving maxBW-PreferenceConfig set to release, or upon performing MRDC release. & No action. \\
\hline T346c (The UE maintains one instance of this timer per cell group) & Upon transmitting UEAssistance/nformation message with maxCCPreference. & Upon releasing maxCCPreferenceConfig during the connection reestablishment/resume procedures, upon receiving maxCC-PreferenceConfig set to release, or upon performing MRDC release. & No action. \\
\hline
\end{tabular}

ETSI


--- Page 1078  ---


3GPP TS 38.331 version 17.0.0 Release 17
1077
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Timer & Start & Stop & At expiry \\
\hline T346d (The UE maintains one instance of this timer per cell group) & Upon transmitting UEAssistanceInformation message with maxMIMOLayerPreference. & Upon releasing maxMIMOLayerPreferenceConfig during the connection reestablishment/resume procedures, upon receiving maxMIMOLayerPreferenceConfig set to release, or upon performing MRDC release. & No action. \\
\hline T346e (The UE maintains one instance of this timer per cell group) & Upon transmitting UEAssistance/nformation message with minSchedulingOffsetPref erence. & Upon releasing minSchedulingOffsetPreference Config during the connection reestablishment/resume procedures, upon receiving minSchedulingOffsetPreference Config set to release, or upon performing MR-DC release. & No action. \\
\hline T346f & Upon transmitting UEAssistance/nformation message with releasePreference. & Upon releasing releasePreferenceConfig during the connection reestablishment/resume procedures, or upon receiving releasePreferenceConfig set to release. & No action. \\
\hline T346g & Upon transmitting UEAssistance/nformation message with musim-PreferredRRC-State. & Upon receiving RRCRelease, or upon entering Idle state, or upon receiving musimLeaveAssistanceConfig set to release. & Perform the actions as specified in 5.3.8.6. \\
\hline T346h & Upon transmitting UEAssistance/nformation message with musimGapPreferenceList Information. & Upon releasing musimGapAssistanceConfig during the connection reestablishment/resume procedures, or upon receiving musim-GapAssistanceConfig set to release. & No action. \\
\hline T346i & Upon transmitting UEAssistance/nformation message with scgDeactivationPreference & Upon RRC connection reestablishment/resume or upon receiving scgDeactivationPreferenceConfig set to release. & No action. \\
\hline
\end{tabular}

ETSI


--- Page 1079  ---


3GPP TS 38.331 version 17.0.0 Release 17
1078
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Timer & Start & Stop & At expiry \\
\hline T346j (The UE maintains one instance of this timer per cell group) & Upon transmitting UEAssistancelnformation message with rimRelaxationReportingConfi g. & Upon releasing rimRelaxationReporting Config during the connection reestablishment/resume procedures, upon receiving rimRelaxationReportingConfig set to release, or upon performing MR-DC release. & No action. \\
\hline T346k (The UE maintains one instance of this timer per cell group) & Upon transmitting UEAssistanceInformation message with bfdRelaxationReportingConfi g. & Upon releasing bfdRelaxationReporting Config during the connection reestablishment/resume procedures, upon receiving bfdRelaxationReportingConfig set to release, or upon performing MR-DC release. & No action. \\
\hline T350 & Upon transmitting DedicatedSIBRequest message with requested SIB-List and/or requestedPosS/B-List. & Upon acquiring the requested SIB(s) or posSIB(s), upon releasing onDemandSIBRequest during the connection re-establishment procedures, upon receiving onDemandSIBRequest set to release, upon reception of RRCRelease or upon successful change of PCell while in RRC_CONNECTED. & No action \\
\hline T380 & Upon reception of t380 in RRCRelease. & Upon reception of RRCResume, RRCSetup or RRCRelease. & Perform the actions as specified in 5.3.13. \\
\hline T390 & When access attempt is barred at access barring check for an Access Category. The UE maintains one instance of this timer per Access Category. & Upon cell (re)selection, upon cell change due to relay (re)selection, upon entering RRC_CONNECTED, upon reception of RRCReconfiguration including reconfigurationWithSync, upon change of PCell while in RRC_CONNECTED, upon reception of MobilityFromNRCommand, or upon reception of RRCRelease. & Perform the actions as specified in 5.3.14.4. \\
\hline T400 & Upon transmission of RRCReconfigurationSidel ink & Upon reception of RRCReconfigurationFailureSidel ink or RRCReconfigurationCompleteSi delink & Perform the Sidelink radio link failure related actions as specified in 5.8.9.3. \\
\hline
\end{tabular}

ETSI


--- Page 1080  ---


3GPP TS 38.331 version 17.0.0 Release 17
1079
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline \multicolumn{1}{|c|}{ Timer } & \multicolumn{1}{c|}{ Start } & \multicolumn{1}{c|}{ Stop } & \multicolumn{1}{c|}{ At expiry } \\
\hline T420 & Upon reception of the & Upon successfully sending & Perform the RRC re- \\
& RRC reconfiguration & RRCReconfiguration Complete & establishment procedure as \\
& message indicating & message (i.e., PC5 RLC & specified in 5.3.7. \\
& direct-to-indirect path & acknowledge is received from & \\
\hline
\end{tabular}
7.1.2 Timer handling

When the UE applies zero value for a timer, the timer shall be started and immediately expire unless explicitly stated otherwise.
7.2 Counters

\begin{tabular}{|l|l|l|l|}
\hline Counter & Reset & Incremented & When reaching max value \\
\hline N310 & Upon reception of "insync" indication from lower layers; upon receiving RRCReconfiguration with reconfigurationWithSync for that cell group; upon initiating the connection reestablishment procedure. & Upon reception of "out-of-sync" from lower layer while the timer T310 is stopped. & Start timer T310 \\
\hline N311 & Upon reception of "out-of-sync" indication from lower layers; upon receiving RRCReconfiguration with reconfigurationWithSync for that cell group; upon initiating the connection reestablishment procedure. & Upon reception of the "in-sync" from lower layer while the timer T310 is running. & Stop the timer T310. \\
\hline
\end{tabular}

ETSI


--- Page 1081  ---


3GPP TS 38.331 version 17.0.0 Release 17
1080
ETSI TS 138331 V17.0.0 (2022-05)
7.3 Constants

\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Constant } & \multicolumn{1}{c|}{ Usage } \\
\hline N310 & \begin{tabular}{l} 
Maximum number of consecutive "out-of-sync" indications for the SpCell received from \\
lower layers
\end{tabular} \\
\hline N311 & \begin{tabular}{l} 
Maximum number of consecutive "in-sync" indications for the SpCell received from lower \\
layers
\end{tabular} \\
\hline
\end{tabular}
7.4 UE variables

NOTE: To facilitate the specification of the UE behavioural requirements, UE variables are represented using ASN.1. Unless explicitly specified otherwise, it is however up to UE implementation how to store the variables. The optionality of the IEs in ASN.1 is used only to indicate that the values may not always be available.
- NR-UE-Variables

This ASN. 1 segment is the start of the NR UE variable definitions.
```
-- ASNISTART
-- NR-UE-VARIABLES-START
NR-UE-Variables DEFINITIONS AUTOMATIC TAGS ::=
BEGIN
IMPORTS
    AreaConfiguration-vl700,
    ARFCN-ValueNR,
    CellIdentity,
    EUTRA-PhysCellId,
    maxCEFReport-rl7,
    MeasId,
    MeasIdToAddModList,
    MeasIdleCarrierEUTRA-rl6,
    MeasIdleCarrierNR-rl6,
    MeasResultIdleEUTRA-rl6,
    MeasResultIdleNR-rl6,
    MeasObjectToAddModList,
    PhyscellId,
    RNTI-Value,
    ReportConfigToAddModList,
    RSRP-Range,
    SL-MeasId-rl6,
    SL-MeasIdList-rl6,
    SL-MeasObjectList-rl6,
    SL-ReportConfigList-rl6,
    SL-QuantityConfig-rl6,
    Tx-PoolMeasList-rl6,
```


ETSI


--- Page 1082  ---


3GPP TS 38.331 version 17.0.0 Release 17
1081
ETSI TS 138331 V17.0.0 (2022-05)
```
    QuantityConfig,
    maxNrofCellMeas,
    maxNrofMeasId,
    maxFreqIdle-rl6,
    PhysCellIdUTRA-FDD-rl6,
    ValidityAreaList-rl6,
    CondReconfigToAddModList-rl6,
    ConnEstFailReport-rl6,
    LoggingDuration-rl6,
    LoggingInterval-rl6,
    LogMeasInfoList-r16,
    LogMeasInfo-rl6,
    RA-Report-rl6,
    RLF-Report-rl6,
    TraceReference-rl6,
    WLAN-Identifiers-rl6,
    WLAN-NameList-rl6,
    BT-NameList-rl6,
    PLMN-Identity,
    maxNrofRelayToMeasure-rl7,
    maxPLMN,
    RA-ReportList-rl6,
    VisitedCellInfoList-rl6,
    AbsoluteTimeInfo-rl6,
    LoggedEventTriggerConfig-rl6,
    LoggedPeriodicalReportConfig-rl6,
    Sensor-NameList-rl6,
    SL-SourceIdentity-rl7,
    SuccessHO-Report-rl7,
    PLMN-IdentityList2-rl6,
    AreaConfiguration-rl6,
    maxNrofSL-MeasId-rl6,
    maxNrofFreqSL-rl6,
    maxNrofCLI-RSSI-Resources-rl6,
    maxNrofCLI-SRS-Resources-rl6,
    RSSI-ResourceId-rl6,
    SRS-ResourceId
FROM NR-RRC-Definitions;
-- NR-UE-VARIABLES-STOP
-- ASNISTOP
```


VarConditionalReconfig
The UE variable VarConditionalReconfig includes the accumulated configuration of the conditional handover, conditional PSCell addition or conditional PSCell change configurations including the pointers to conditional handover, conditional PSCell addition or conditional PSCell change execution condition (associated measld(s)) and the stored target candidate SpCell RRCReconfiguration.

ETSI


--- Page 1083  ---


3GPP TS 38.331 version 17.0.0 Release 17
1082
ETSI TS 138331 V17.0.0 (2022-05)

VarConditionalReconfig UE variable
```
-- ASNISTART
-- TAG-VARCONDITIONALRECONFIG-START
VarConditionalReconfig ::= SEQUENCE {
    condReconfigList CondReconfigToAddModList-rl6 OPTIONAL
}
-- TAG-VARCONDITIONALRECONFIG-STOP
-- ASNISTOP
```

- VarConnEstFailReport

The UE variable VarConnEstFailReport includes the connection establishment failure and/or connection resume failure information.
VarConnEstFailReport UE variable
```
-- ASN1START
-- TAG-VARCONNESTFAILREPORT-START
VarConnEstFailReport-rl6 ::= SEQUENCE {
    connEstFailReport-rl6 ConnEstFailReport-rl6,
    plmn-Identity-rl6 PLMN-Identity
}
-- TAG-VARCONNESTFAILREPORT-STOP
-- ASNISTOP
```


VarConnEstFailReportList
The UE variable VarConnEstFailReportList includes a list of the connection establishment failure and/or connection resume failure information.
VarConnEstFailReportList UE variable
```
-- ASN1START
-- TAG-VARCONNESTEAILREPORTLIST-START
VarConnEstFailReportLIST-rl7 ::= SEQUENCE [
    connEstFailReportList-rl7 SEQUENCE (SIZE (l..maxCEFReport-rl7)) OF VarConnEstFailReport-rl6
}
-- TAG-VARCONNESTFAILREPORTLIST-STOP
-- ASNISTOP
```


ETSI


--- Page 1084  ---


3GPP TS 38.331 version 17.0.0 Release 17
1083
ETSI TS 138331 V17.0.0 (2022-05)
- VarLogMeasConfig

The UE variable VarLogMeasConfig includes the configuration of the logging of measurements to be performed by the UE while in RRC_IDLE, RRC_INACTIVE, covering intra-frequency, inter-frequency and inter-RAT mobility related measurements. The UE performs logging of measurements only while in RRC_IDLE and RRC_INACTIVE.

VarLogMeasConfig UE variable
```
-- ASNISTART
-- TAG-VARLOGMEASCONFIG-START
VarLogMeasConfig-rl6-IEs::= SEQUENCE {
    areaConfiguration-rl6 AreaConfiguration-rl6 OPTIONAL,
    bt-NameList-rl6 BT-NameList-rl6 OPTIONAL,
    wlan-NameList-rl6 WLAN-NameList-rl6 OPTIONAL,
    sensor-NameList-rl6 Sensor-NameList-rl6 OPTIONAL,
    loggingDuration-rl6 LoggingDuration-rl6,
    reportType CHOICE \
        periodical LoggedPeriodicalReportConfig-rl6,
        eventTriggered LoggedEventTriggerConfig-rl6
    },
    sigLoggedMeasType-rl7 ENUMERATED {true} OPTIONAL,
    earlyMeasIndication-rl7 ENUMERATED {true} OPTIONAL,
    areaConfiguration-vl700 AreaConfiguration-vl700 OPTIONAL
}
-- TAG-VARLOGMEASCONFIG-STOP
-- ASNISTOP
```


VarLogMeasReport
The UE variable VarLogMeasReport includes the logged measurements information.
VarLogMeasReport UE variable
```
-- ASNISTART
-- TAG-VARLOGMEASREPORT-START
VarLogMeasReport-rl6 ::= SEQUENCE {
    absoluteTimeInfo-r16 AbsoluteTimeInfo-rl6,
    traceReference-rl6 TraceReference-rl6,
    traceRecordingSessionRef-rl6 OCTET STRING (SIZE (2)),
    tce-Id-rl6 OCTET STRING (SIZE (1)),
    logMeasInfoList-r16 LogMeasInfoList-rl6,
    plmn-IdentityList-r16 PLMN-IdentityList2-r16,
    sigLoggedMeasType-rl7 ENUMERATED {true}
}
-- TAG-VARLOGMEASREPORT-STOP
-- ASNISTOP
```


ETSI


--- Page 1085  ---


3GPP TS 38.331 version 17.0.0 Release 17
1084
ETSI TS 138331 V17.0.0 (2022-05)
- VarMeasConfig

The UE variable VarMeasConfig includes the accumulated configuration of the measurements to be performed by the UE, covering intra-frequency, inter-frequency and interRAT mobility related measurements.

VarMeasConfig UE variable
```
-- ASNISTART
-- TAG-VARMEASCONFIG-START
VarMeasConfig ::= SEQUENCE \
    -- Measurement identities
    measIdList MeasIdToAddModList OPTIONAL,
    -- Measurement objects
    measObjectList MeasObjectToAddModList OPTIONAL,
    -- Reporting configurations
    reportConfigList
    -- Other parameters
    quantityConfig
    s-MeasureConfig
        ssb-RSRP
        csi-RSRP
    }
}
-- TAG-VARMEASCONFIG-STOP
-- ASN1STOP
```


VarMeasConfigSL
The UE variable VarMeasConfigSL includes the accumulated configuration of the NR sidelink measurements to be performed by the UE of unicast destination.

VarMeasConfigSL UE variable
```
-- ASNISTART
-- TAG-VARMEASCONFIGSL-START
VarMeasConfigSL-rl6 ::= SEQUENCE \
    -- NR sidelink measurement identities
    sl-MeasIdList-rl6 SL-MeasIdList-rl6 OPTIONAL,
    -- NR sidelink measurement objects
    sl-MeasObjectList-rl6 SL-MeasObjectList-rl6 OPTIONAL,
    -- NR sidelink reporting configurations
    sl-reportConfigList-rl6 SL-ReportConfigList-rl6 OPTIONAL,
    -- Other parameters
    sl-QuantityConfig-rl6 SL-QuantityConfig-rl6 OPTIONAL
}
-- TAG-VARMEASCONFIGSL-STOP
```


ETSI


--- Page 1086  ---


3GPP TS 38.331 version 17.0.0 Release 17
1085
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP
- VarMeasIdleConfig

The UE variable VarMeasIdleConfig includes the configuration of the measurements to be performed by the UE while in RRC_IDLE or RRC_INACTIVE for NR interfrequency and inter-RAT (i.e. EUTRA) measurements.

VarMeasIdleConfig UE variable
```
-- ASNISTART
-- TAG-VARMEASIDLECONFIG-START
VarMeasIdleConfig-rl6 ::= SEQUENCE {
```

```
}
-- TAG-VARMEASIDLECONFIG-STOP
-- ASNISTOP
```


VarMeasidleReport
The UE variable VarMeasIdleReport includes the logged measurements information.
VarMeasidleReport UE variable
```
-- ASNISTART
-- TAG-VARMEASIDLEREPORT-START
VarMeasIdleReport-rl6 ::= SEQUENCE {
    measReportIdleNR-r16 MeasResultIdleNR-rl6 OPTIONAL,
    measReportIdleEUTRA-r16 MeasResultIdleEUTRA-r16 OPTIONAL
}
-- TAG-VARMEASIDLEREPORT-STOP
-- ASNISTOP
```


VarMeasReportList
The UE variable VarMeasReportList includes information about the measurements for which the triggering conditions have been met.

ETSI


--- Page 1087  ---


3GPP TS 38.331 version 17.0.0 Release 17
1086
ETSI TS 138331 V17.0.0 (2022-05)

VarMeasReportList UE variable
```
-- ASNISTART
-- TAG-VARMEASREPORTLIST-START
VarMeasReportList ::= SEQUENCE (SIZE (l..maxNrofMeasId)) OF VarMeasReport
VarMeasReport ::= SEQUENCE \
    -- List of measurement that have been triggered.
    measId MeasId,
    cellsTriggeredList CellsTriggeredList OPTIONAL,
    numberOfReportsSent INTEGER,
    cli-TriggeredList-rl6
    tx-PoolMeasToAddModList CLI-TriggeredList-rl6 OPTIONAL
    relaysTriggeredList-rl7 RelaysTriggeredList-rl7 OPTONAL
}
CellsTriggeredList ::= SEQUENCE (SIZE (l..maxNrofCellMeas)) OF CHOICE l
    physCellId.
    physCellIdEUTRA
    physCellIdUTRA-FDD-rl6 PhysCellIdUTRA-FDD-rl6
    }
CLI-TriggeredList-rl6 ::= CHOICE \
    srs-RSRP-TriggeredList-r16 SRS-RSRP-TriggeredList-r16,
    cli-RSSI-TriggeredList-rl6 CLI-RSSI-TriggeredList-rl6
    }
SRS-RSRP-TriggeredList-r16 := SEQUENCE (SIZE (l.. maxNrofCLI-SRS-Resources-rl6)) OF SRS-ResourceId
CLI-RSSI-TriggeredList-r16 := SEQUENCE (SIZE (1.. maxNrofCLI-RSSI-Resources-rl6)) OF RSSI-ResourceId-rl6
RelaysTriggeredList-rl7 := SEQUENCE (SIZE (l.. maxNrofRelayToMeasure-rl7)) OF SL-SourceIdentity-rl7
-- TAG-VARMEASREPORTLIST-STOP
-- ASNISTOP
```


VarMeasReportListSL
The UE variable VarMeasReportListSL includes information about the NR sidelink measurements for which the triggering conditions have been met.
VarMeasReportListSL UE variable
```
-- ASN1START
-- TAG-VARMEASREPORTLISTSL-START
VarMeasReportListSL-rl6 ::= SEQUENCE (SIZE (l..maxNrofSL-MeasId-r16)) OF VarMeasReportSL-rl6
VarMeasReportSL-rl6 ::= SEQUENCE \
    -- List of NR sidelink measurement that have been triggered.
    sl-MeasId-rl6 SL-MeasId-rl6,
```


ETSI


--- Page 1088  ---


3GPP TS 38.331 version 17.0.0 Release 17
1087
ETSI TS 138331 V17.0.0 (2022-05)

sl-FrequencyTriggeredList-rl6
sl-NumberOfReportsSent-rl6
\}
-- TAG-VARMEASREPORTLISTSL-STOP
-- ASNISTOP

SEQUENCE (SIZE (1..maxNrofFreqSL-r16)) OF ARFCN-ValueNR OPTIONAL,
INTEGER

VarMobilityHistoryReport
The UE variable VarMobilityHistoryReport includes the mobility history information.
VarMobilityHistoryReport UE variable
-- ASNISTART
-- TAG-VARMOBILITYHISTORYREPORT-START
VarMobilityHistoryReport-rl6 : := VisitedCellInfoList-rl6
-- TAG-VARMOBILITYHISTORYREPORT-STOP
-- ASNISTOP

VarPendingRNA-Update
The UE variable VarPendingRNA-Update indicates whether there is a pending RNA update procedure or not. The setting of this BOOLEAN variable to true means that there is a pending RNA Update procedure.

VarPendingRNA-Update UE variable
-- ASNISTART
-- TAG-VARPENDINGRNA-UPDATE-START

VarPendingRNA-Update : :=
pendingRNA-Update
\}
-- TAG-VARPENDINGRNA-UPDATE-STOP
-- ASNISTOP
- VarRA-Report

ASNISTOP

SEQUENCE 1
BOOLEAN OPTIONAL
OPTIONAL

The UE variable VarRA-Report includes the random-access related information.

ETSI


--- Page 1089  ---


3GPP TS 38.331 version 17.0.0 Release 17
1088
ETSI TS 138331 V17.0.0 (2022-05)

VarRA-Report UE variable
```
-- ASNISTART
-- TAG-VARRA-REPORT-START
VarRA-Report-rl6 ::= SEQUENCE {
    ra-ReportList-rl6 RA-ReportList-rl6,
    plmn-IdentityList-rl6 PLMN-IdentityList-rl6
}
PLMN-IdentityList-rl6 ::= SEQUENCE (SIZE (l..maxPLMN)) OF PLMN-Identity
-- TAG-VARRA-REPORT-STOP
-- ASNISTOP
```

- VarResumeMAC-Input

The UE variable VarResumeMAC-Input specifies the input used to generate the resumeMAC-I during RRC Connection Resume procedure.
VarResumeMAC-Input variable
```
-- ASNISTART
-- TAG-VARRESUMEMAC-INPUT-START
VarResumeMAC-Input ::= SEQUENCE \
    sourcePhysCellId PhysCellId,
    targetCellIdentity CellIdentity,
    source-c-RNTI RNTI-Value
}
-- TAG-VARRESUMEMAC-INPUT-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline VarResumeMAC-Input field descriptions \\
\hline \begin{tabular}{l}
targetCellidentity \\
An input variable used to calculate the resumeMAC-I. Set to the cellidentity of the first PLMN-Identity included in the PLMN-Identity/nfoList broadcasted in SIB1 of the target cell i.e. the cell the UE is trying to resume.
\end{tabular} \\
\hline \begin{tabular}{l}
source-c-RNTI \\
Set to C-RNTI that the UE had in the PCell it was connected to prior to suspension of the RRC connection.
\end{tabular} \\
\hline \begin{tabular}{l}
sourcePhysCellid \\
Set to the physical cell identity of the PCell the UE was connected to prior to suspension of the RRC connection.
\end{tabular} \\
\hline
\end{tabular}
- VarRLF-Report

The UE variable VarRLF-Report includes the radio link failure information or handover failure information.

ETSI


--- Page 1090  ---


3GPP TS 38.331 version 17.0.0 Release 17
1089
ETSI TS 138331 V17.0.0 (2022-05)

VarRLF-Report UE variable
```
-- ASNISTART
-- TAG-VARRLF-REPORT-START
VarRLF-Report-rl6 ::= SEQUENCE \
    rlf-Report-rl6 RLF-Report-rl6,
    plmn-IdentityList-rl6 PLMN-IdentityList2-rl6
}
-- TAG-VARRLF-REPORT-STOP
-- ASNISTOP
- VarShortMAC-Input
```


The UE variable VarShortMAC-Input specifies the input used to generate the shortMAC-I during RRC Connection Reestablishment procedure.
VarShortMAC-Input variable
```
-- ASNISTART
-- TAG-VARSHORTMAC-INPUT-START
VarShortMAC-Input ::= SEQUENCE \
    sourcePhysCellId PhysCellId,
    targetCellIdentity CellIdentity,
    source-c-RNTI RNTI-Value
}
-- TAG-VARSHORTMAC-INPUT-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline VarShortMAC-Input field descriptions \\
\hline \begin{tabular}{l}
targetCellidentity \\
An input variable used to calculate the shortMAC-I. Set to the cellidentity of the first PLMN-Identity in the PLMN-Identity/nfoList broadcasted in SIB1 of the target cell i.e. the cell the UE is trying to reestablish the connection.
\end{tabular} \\
\hline \begin{tabular}{l}
source-c-RNTI \\
Set to C-RNTI that the UE had in the PCell it was connected to prior to the reestablishment.
\end{tabular} \\
\hline \begin{tabular}{l}
sourcePhysCellid \\
Set to the physical cell identity of the PCell the UE was connected to prior to the reestablishment.
\end{tabular} \\
\hline
\end{tabular}
- VarSuccessHO-Report

The UE variable VarSuccessHO-Report includes the successful handover information.

ETSI


--- Page 1091  ---


3GPP TS 38.331 version 17.0.0 Release 17
1090
ETSI TS 138331 V17.0.0 (2022-05)

VarSccessHO-Report variable
```
-- ASN1START
-- TAG-VARSUCCESSHO-Report-START
VarSuccessHO-Report-rl7-IEs ::= SEQUENCE {
    successHO-Report-rl7 SuccessHO-Report-rl7,
    plmn-IdentityList-rl7 PLMN-IdentityList2-rl6
}
-- TAG-VARSUCCESSHO-Report-STOP
-- ASNISTOP
- End of NR-UE-Variables
-- ASNISTART
END
-- ASNISTOP
```


ETSI


--- Page 1092  ---


3GPP TS 38.331 version 17.0.0 Release 17
1091
ETSI TS 138331 V17.0.0 (2022-05)

8 Protocol data unit abstract syntax
8.1 General

The RRC PDU contents in clause 6 and clause 10 are described using abstract syntax notation one (ASN.1) as specified in [TU-T Rec. X. 680 [6] and X. 681 [7]. Transfer syntax for RRC PDUs is derived from their ASN. 1 definitions by use of Packed Encoding Rules, unaligned as specified in ITU-T Rec. X. 691 [8].

The following encoding rules apply in addition to what has been specified in X.691:
- When a bit string value is placed in a bit-field as specified in 15.6 to 15.11 in X.691, the leading bit of the bit string value shall be placed in the leading bit of the bit-field, and the trailing bit of the bit string value shall be placed in the trailing bit of the bit-field;

NOTE: The terms 'leading bit' and 'trailing bit' are defined in ITU-T Rec. X.680. When using the 'bstring' notation, the leading bit of the bit string value is on the left, and the trailing bit of the bit string value is on the right.
- When decoding types constrained with the ASN. 1 Contents Constraint ("CONTAINING"), automatic decoding of the contained type should not be performed because errors in the decoding of the contained type should not cause the decoding of the entire RRC message PDU to fail. It is recommended that the decoder first decodes the outer PDU type that contains the OCTET STRING or BIT STRING with the Contents Constraint, and then decodes the contained type that is nested within the OCTET STRING or BIT STRING as a separate step;
- When decoding a) RRC message PDUs, b) BIT STRING constrained with a Contents Constraint, or c) OCTET STRING constrained with a Contents Constraint, PER decoders are required to never report an error if there are extraneous zero or non-zero bits at the end of the encoded RRC message PDU, BIT STRING or OCTET STRING.
8.2 Structure of encoded RRC messages

An RRC PDU, which is the bit string that is exchanged between peer entities/across the radio interface contains the basic production as defined in X. 691.

RRC PDUs shall be mapped to and from PDCP SDUs (in case of DCCH) or RLC SDUs (in case of PCCH, BCCH or CCCH ) upon transmission and reception as follows:
- when delivering an RRC PDU as an PDCP SDU to the PDCP layer for transmission, the first bit of the RRC PDU shall be represented as the first bit in the PDCP SDU and onwards; and
- when delivering an RRC PDU as an RLC SDU to the RLC layer for transmission, the first bit of the RRC PDU shall be represented as the first bit in the RLC SDU and onwards; and
- upon reception of an PDCP SDU from the PDCP layer, the first bit of the PDCP SDU shall represent the first bit of the RRC PDU and onwards; and
- upon reception of an RLC SDU from the RLC layer, the first bit of the RLC SDU shall represent the first bit of the RRC PDU and onwards.
8.3 Basic production

The 'basic production' is obtained by applying UNALIGNED PER to the abstract syntax value (the ASN. 1 description) as specified in X.691. It always contains a multiple of 8 bits.
8.4 Extension

The following rules apply with respect to the use of protocol extensions:

ETSI


--- Page 1093  ---


3GPP TS 38.331 version 17.0.0 Release 17
1092
ETSI TS 138331 V17.0.0 (2022-05)
- A transmitter compliant with this version of the specification shall, unless explicitly indicated otherwise on a PDU type basis, set the extension part empty. Transmitters compliant with a later version may send non-empty extensions;
- A transmitter compliant with this version of the specification shall set spare bits to zero.
8.5 Padding

If the encoded RRC message does not fill a transport block, the RRC layer shall add padding bits. This applies to PCCH and BCCH .

Padding bits shall be set to 0 and the number of padding bits is a multiple of 8 .

Figure 8.5-1: RRC level padding

9 Specified and default radio configurations
Specified and default configurations are configurations of which the details are specified in the standard. Specified configurations are fixed while default configurations can be modified using dedicated signalling. The default value for the parameters not listed in following clauses shall be set such as the corresponding features are not configured, i.e. release or false unless explicitly stated otherwise.

NOTE: The UE applies the default values specified in the field description of ASN. 1 parameters only when the parent IE is present. Hence, the UE does not apply all default values in field descriptions when it applies the "default radio configuration" in accordance with this clause.
9.1 Specified configurations
9.1.1 Logical channel configurations
9.1.1.1 BCCH configuration

Parameters

ETSI


--- Page 1094  ---


3GPP TS 38.331 version 17.0.0 Release 17
1093
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline \multicolumn{1}{|c|}{ Name } & \multicolumn{1}{c|}{ Value } & \multicolumn{1}{c|}{ Semantics description } & Ver \\
\hline SDAP configuration & Not used & & \\
\hline PDCP configuration & Not used & & \\
\hline RLC configuration & TM & & \\
\hline Logical channel configuration & Not used & & \\
\hline
\end{tabular}

NOTE: RRC will perform padding, if required due to the granularity of the TF signalling, as defined in 8.5.
9.1.1.2 CCCH configuration

Parameters

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline SDAP configuration & Not used & & \\
\hline PDCP configuration & Not used & & \\
\hline RLC configuration & TM & & \\
\hline Logical channel configuration & & & \\
\hline >priority & 1 & Highest priority & \\
\hline >prioritisedBitRate & infinity & & \\
\hline >bucketSizeDuration & ms1000 & & \\
\hline >logicalChannelGroup & 0 & & \\
\hline
\end{tabular}
9.1.1.3 PCCH configuration

Parameters

\begin{tabular}{|l|l|l|l|}
\hline \multicolumn{1}{|c|}{ Name } & \multicolumn{1}{c|}{ Value } & \multicolumn{1}{c|}{ Semantics description } & Ver \\
\hline SDAP configuration & Not used & & \\
\hline PDCP configuration & Not used & & \\
\hline RLC configuration & TM & & \\
\hline Logical channel configuration & Not used & & \\
\hline
\end{tabular}

NOTE: RRC will perform padding, if required due to the granularity of the TF signalling, as defined in 8.5.
9.1.1.4 SCCH configuration

Parameters that are specified for unicast of NR sidelink communication, which is used for the sidelink signalling radio bearer of PC5-RRC message. The SL-SRB using this SCCH configuration is named as SL-SRB3.

ETSI


--- Page 1095  ---


3GPP TS 38.331 version 17.0.0 Release 17
1094
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline PDCP configuration & & & \\
\hline >t-Reordering & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >pdcp-SN-Size & 12 & & \\
\hline RLC configuration & & AM RLC & \\
\hline >sn-FieldLength & 12 & & \\
\hline >t-Reassembly & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >t-PollRetransmit & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollPDU & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollByte & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >maxRetx Threshold & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >t-StatusProhibit & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >logicalChannelldentity & 3 & & \\
\hline MAC configuration & & & \\
\hline >priority & 1 & & \\
\hline >prioritisedBitRate & infinity & & \\
\hline >logicalChannelGroup & 0 & & \\
\hline >schedulingRequest/d & 0 & The scheduling request configuration with this value is applicable for this SCCH if configured by the network. & \\
\hline >s/-HARQ-FeedbackEnabled & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline
\end{tabular}

Parameters that are specified of NR sidelink communication, which is used for the sidelink signalling radio bearer of unprotected PC5-S message (e.g. Direct Link Establishment Request, TS 24.587 [57]). The SL-SRB using this SCCH configuration is named as SL-SRB0.

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline PDCP configuration & & & \\
\hline >t-Reordering & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >pdcp-SN-Size & 12 & & \\
\hline RLC configuration & & UM RLC & \\
\hline >sn-FieldLength & 6 & & \\
\hline >t-Reassembly & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >logicalChannelldentity & 0 & & \\
\hline MAC configuration & & & \\
\hline >priority & 1 & & \\
\hline >prioritisedBitRate & infinity & & \\
\hline >logicalChannelGroup & 0 & & \\
\hline >schedulingRequest/d & 0 & The scheduling request configuration with this value is applicable for this SCCH if configured by the network. & \\
\hline >s/-HARQ-FeedbackEnabled & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline
\end{tabular}

Parameters that are specified for unicast of NR sidelink communication, which is used for the sidelink signalling radio bearer of PC5-S message establishing PC5-S security (e.g. Direct Link Security Mode Command and Direct Link Security Mode Complete, TS 24.587 [57]). The SL-SRB using this SCCH configuration is named as SL-SRB1.

ETSI


--- Page 1096  ---


3GPP TS 38.331 version 17.0.0 Release 17
1095
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline PDCP configuration & & & \\
\hline >t-Reordering & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >pdcp-SN-Size & 12 & & \\
\hline RLC configuration & & AM RLC & \\
\hline >sn-FieldLength & 12 & & \\
\hline >t-Reassembly & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >t-PollRetransmit & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollPDU & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollByte & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >maxRetx Threshold & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >t-StatusProhibit & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >logicalChannelldentity & 1 & & \\
\hline MAC configuration & & & \\
\hline >priority & 1 & & \\
\hline >prioritisedBitRate & infinity & & \\
\hline >logicalChannelGroup & 0 & & \\
\hline >schedulingRequest/d & 0 & The scheduling request configuration with this value is applicable for this SCCH if configured by the network. & \\
\hline >s/-HARQ-FeedbackEnabled & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline
\end{tabular}

Parameters that are specified for unicast of NR sidelink communication, which is used for the sidelink signalling radio bearer of protected PC5-S message except Direct Link Security Mode Complete. The SL-SRB using this SCCH configuration is named as SL-SRB2.

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline PDCP configuration & & & \\
\hline >t-Reordering & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >pdcp-SN-Size & 12 & & \\
\hline RLC configuration & & AM RLC & \\
\hline >sn-FieldLength & 12 & & \\
\hline >t-Reassembly & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >t-PollRetransmit & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollPDU & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollByte & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >maxRetx Threshold & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >t-StatusProhibit & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >logicalChannelldentity & 2 & & \\
\hline MAC configuration & & & \\
\hline >priority & 1 & & \\
\hline >prioritisedBitRate & infinity & & \\
\hline >logicalChannelGroup & 0 & & \\
\hline >schedulingRequest/d & 0 & The scheduling request configuration with this value is applicable for this SCCH if configured by the network. & \\
\hline >s/-HARQ-FeedbackEnabled & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline
\end{tabular}

ETSI


--- Page 1097  ---


3GPP TS 38.331 version 17.0.0 Release 17
1096
ETSI TS 138331 V17.0.0 (2022-05)

Parameters that are specified for NR sidelink discovery, which is used for the sidelink signalling radio bearer of NR sidelink U2N relay related discovery messages (e.g., Announcement message, Solicitation message and Response message, see TS 23.304 [65]). The SL-SRB using this SCCH configuration is named as SL-SRB4.

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline PDCP configuration & & & \\
\hline >t-Reordering & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >pdcp-SN-Size & 12 & & \\
\hline RLC configuration & & UM RLC & \\
\hline >sn-FieldLength & 6 & & \\
\hline >t-Reassembly & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >logicalChannelldentity & FFS & & \\
\hline MAC configuration & & & \\
\hline >priority & 1 & & \\
\hline >prioritisedBitRate & infinity & & \\
\hline >logicalChannelGroup & 0 & & \\
\hline >schedulingRequest/d & 0 & The scheduling request configuration with this value is applicable for this SCCH if configured by the network. & \\
\hline
\end{tabular}

Parameters that are specified for NR sidelink L2 U2N Relay operations, which is used for the PC5 Relay RLC channel for Remote UE's SRB0 message transmission. The sidelink RLC bearer using this configuration is named as SL-RLC0.

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline RLC configuration & & AM & \\
\hline >sn-FieldLength & 12 & & \\
\hline >t-Reassembly & Undefined & Selected by the receving UE, up to UE implementation & \\
\hline >t-PollRetransmit & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollPDU & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollByte & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >maxRetx Threshold & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >t-StatusProhibit & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >logicalChannelldentity & FFS & & \\
\hline MAC configuration & & & \\
\hline >priority & 1 & & \\
\hline >proritisedBitRate & Inifinity & & \\
\hline >logicalChannelGroup & 0 & & \\
\hline >schedulingRequest/d & 0 & The scheduling request configuration with this value is applicable for this SCCH if configured by the network. & \\
\hline
\end{tabular}
9.1.1.5 STCH configuration

Parameters that are specified for NR sidelink communication, which is used for the sidelink data radio bearer.

ETSI


--- Page 1098  ---


3GPP TS 38.331 version 17.0.0 Release 17
1097
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline PDCP configuration & & & \\
\hline >t-Reordering & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >pdcp-SN-Size & 12 & For broadcast and groupcast of NR sidelink communication & \\
\hline >maxCID & 15 & For broadcast and groupcast of NR sidelink communication & \\
\hline >profiles & & & \\
\hline RLC configuration & & For broadcast and groupcast of NR sidelink communication, unidirectional UM RLC UM window size is set to 32 & \\
\hline >t-Reassembly & Undefined & Selected by the receiving UE, up to Up to UE implementation & \\
\hline >sn-FieldLength & 6 & For broadcast and groupcast of NR sidelink communication & \\
\hline >logicalChannelldentity & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline MAC configuration & & & \\
\hline >priority & & & \\
\hline
\end{tabular}
9.1.1.6 MCCH configuration

Parameters that are specified for MCCH .

\begin{tabular}{|l|l|l|l|}
\hline \multicolumn{1}{|c|}{ Name } & \multicolumn{1}{c|}{ Value } & \multicolumn{1}{c|}{ Semantics description } & Ver \\
\hline RLC configuration & 6 & UM RLC & \\
\hline\( >s n \)-FieldLength & ms0 & & \\
\hline\( >t \)-Reassembly & & \\
\hline
\end{tabular}
9.1.1.7 MTCH configuration for MBS broadcast

Parameters that are specified for MBS broadcast MTCH.

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline PDCP configuration & & & \\
\hline >t-Reordering & 0 & & \\
\hline >pdcp-SN-SizeDL & 18 & & \\
\hline RLC configuration & & UM RLC & \\
\hline >sn-FieldLength & 12 & & \\
\hline >t-Reassembly & ms0 & & \\
\hline
\end{tabular}
9.1.2 Void
9.2 Default radio configurations

The following clauses only list default values for REL-15 parameters included in protocol version v15.3.0. For all fields introduced in a later protocol version, the default value is "released" or "false" unless explicitly specified otherwise. If the UE is to apply default configuration while it is configured with some critically extended fields, the UE shall apply the original version of those fields with only default values.

NOTE 1: In general, the signalling should preferably support a "release" option for fields introduced after v15.3.0. The "value not applicable" should be used restrictively, mainly limited to for fields which value is relevant only if another field is set to a value other than its default.

NOTE 2: For parameters in ServingCellConfig, the default values are specified in the corresponding specification.

ETSI


--- Page 1099  ---


3GPP TS 38.331 version 17.0.0 Release 17
1098
ETSI TS 138331 V17.0.0 (2022-05)
9.2.1 Default SRB configurations

Parameters

\begin{tabular}{|l|l|l|l|l|l|}
\hline Name & \multicolumn{3}{|c|}{Value} & Semantics description & Ver \\
\hline & SRB1 & SRB2 & SRB3 & & \\
\hline PDCP-Config >t-Reordering & \multicolumn{3}{|l|}{infinity} & & \\
\hline RLC-Config CHOICE & \multicolumn{3}{|l|}{Am} & & \\
\hline \begin{tabular}{l}
ul-AM-RLC \\
>sn-FieldLength \\
>t-PollRetransmit \\
>pollPDU \\
>pollByte \\
>maxRetx Threshold
\end{tabular} & \multicolumn{3}{|l|}{\begin{tabular}{l}
size12 \\
ms45 \\
infinity \\
infinity \\
t8
\end{tabular}} & & \\
\hline \begin{tabular}{l}
dl-AM-RLC \\
>sn-FieldLength \\
>t-Reassembly \\
>t-StatusProhibit
\end{tabular} & \multicolumn{3}{|l|}{\begin{tabular}{l}
size12 \\
ms35 \\
ms0
\end{tabular}} & & \\
\hline logicalChannelldentity & 1 & 2 & 3 & & \\
\hline LogicalChannelConfig & \multicolumn{3}{|c|}{} & & \\
\hline >priority & 1 & 3 & 1 & & \\
\hline >prioritisedBitRate & \multicolumn{3}{|l|}{infinity} & & \\
\hline >logicalChannelGroup & \multicolumn{3}{|l|}{0} & & \\
\hline
\end{tabular}
9.2.2 Default MAC Cell Group configuration

Parameters

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline MAC Cell Group configuration & & & \\
\hline bsr-Config & & & \\
\hline >periodicBSR-Timer & sf10 & & \\
\hline >retxBSR-Timer & sf80 & & \\
\hline phr-Config & & & \\
\hline >phr-PeriodicTimer & sf10 & & \\
\hline >phr-ProhibitTimer & sf10 & & \\
\hline >phr-Tx-PowerFactorChange & dB1 & & \\
\hline
\end{tabular}
9.2.3 Default values timers and constants

Parameters

\begin{tabular}{|l|l|l|l|}
\hline \multicolumn{1}{|c|}{ Name } & \multicolumn{1}{c|}{ Value } & Semantics description & Ver \\
\hline t 310 & ms 1000 & & \\
\hline n 310 & n 1 & & \\
\hline t 311 & ms 30000 & & \\
\hline n 311 & n 1 & & \\
\hline
\end{tabular}
9.2.4 Default sidelink RLC bearer configuration

Parameters that are used for the sidelink RLC bearer for Remote UE's SRB1 RRC message such as RRCResume, RRCReestablishment, and RRCReconfigurationComplete (in response to the RRCReconfiguration message containing reconfigurationWithSync indicating path switch to a L2 U2N Relay UE) message. The sidelink RLC bearer using this configuration is named as SL-RLC1.

ETSI


--- Page 1100  ---


3GPP TS 38.331 version 17.0.0 Release 17
1099
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|}
\hline Name & Value & Semantics description & Ver \\
\hline RLC configuration & & AM & \\
\hline >sn-FieldLength & 12 & & \\
\hline >t-Reassembly & Undefined & Selected by the receving UE, up to UE implementation & \\
\hline >t-PollRetransmit & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollPDU & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >pollByte & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >maxRetx Threshold & Undefined & Selected by the transmitting UE, up to UE implementation & \\
\hline >t-StatusProhibit & Undefined & Selected by the receiving UE, up to UE implementation & \\
\hline >logicalChannelldentity & FFS & & \\
\hline MAC configuration & & & \\
\hline >priority & 1 & & \\
\hline >proritisedBitRate & Inifinity & & \\
\hline >logicalChannelGroup & 0 & & \\
\hline >schedulingRequest/d & 0 & The scheduling request configuration with this value is applicable for this SCCH if configured by the network. & \\
\hline
\end{tabular}

ETSI


--- Page 1101  ---


3GPP TS 38.331 version 17.0.0 Release 17
1100
ETSI TS 138331 V17.0.0 (2022-05)
9.3 Sidelink pre-configured parameters

This ASN. 1 segment is the start of the NR definitions of pre-configured sidelink parameters.
```
- NR-Sidelink-Preconf
-- ASNISTART
-- TAG-NR-SIDELINK-PRECONE-DEEINITIONS-START
NR-Sidelink-Preconf DEFINITIONS AUTOMATIC TAGS ::=
BEGIN
IMPORTS
    SL-DiscConfigCommon-rl7,
    SL-DRX-Config-GC-BC-rl7,
    ffsUpperLimit, -- to be removed later
    SL-FreqConfigCommon-rl6,
    SL-RadioBearerConfig-rl6,
    SL-RLC-BearerConfig-rl6,
    SL-EUTRA-AnchorCarrierFreqList-rl6,
    SL-NR-AnchorCarrierFreqList-rl6,
    SL-MeasConfigCommon-rl6,
    SL-UE-SelectedConfig-rl6,
    TDD-UL-DL-ConfigCommon,
    maxNrofFreqSL-rl6,
    maxNrofSLRB-rl6,
    maxSL-LCID-r16
FROM NR-RRC-Definitions;
-- TAG-NR-SIDELINK-PRECONF-DEFINITIONS-STOP
-- ASNISTOP
```

- SL-PreconfigurationNR

The IE SL-PreconfigurationNR includes the sidelink pre-configured parameters used for NR sidelink communication. Need codes or conditions specified for subfields in SLPreconfigurationNR do not apply.

SL-PreconfigurationNR information elements
```
-- ASNISTART
-- TAG-SL-PRECONFIGURATIONNR-START
SL-PreconfigurationNR-rl6 ::= SEQUENCE [
    sidelinkPreconfigNR-rl6
    ...
```


ETSI


--- Page 1102  ---


3GPP TS 38.331 version 17.0.0 Release 17
1101
ETSI TS 138331 V17.0.0 (2022-05)
```
}
SidelinkPreconfigNR-r16 ::= SEQUENCE {
```

```
    sl-OffsetDFN-rl6 INTEGER (1..1000)
    t400-rl6
```

```
    sl-UE-SelectedPreConfig-r16 SL-UE-SelectedConfig-r16
    sl-CSI-Acquisition-rl6
    sl-RoHC-Profiles-rl6 SL-RoHC-Profiles-rl6
    sl-MaxCID-r16 INTEGER (1..16383)
    ...,
    [ [
```

```
    sl-TxProfileList-rl7 SL-TxProfileList-rl7
    OPTIONAL,
    ] ]
}
SL-TxProfileList-rl7 := SEQUENCE (SIZE (l..ffsUpperLimit)) OF SL-TxProfile-rl7
```

```
SL-PreconfigGeneral-rl6 ::= SEQUENCE {
```

```
    reservedBits-rl6
    ...
}
SL-RoHC-Profiles-rl6 ::= SEQUENCE \
    profile0x0001-r16 BOOLEAN,
    profile0x0002-rl6 BOOLEAN,
    profile0x0003-rl6 BOOLEAN,
    profile0x0004-r16 BOOLEAN,
    profile0x0006-rl6 BOOLEAN,
    profile0x0101-r16 BOOLEAN,
    profile0x0102-r16 BOOLEAN,
    profile0x0103-r16 BOOLEAN,
    profile0x0104-r16 BOOLEAN
}
-- TAG-SL-PRECONFIGURATIONNR-STOP
-- ASNISTOP
```


Editor's Note: the actual capturing of Tx Profile FFS, pending on SA2 reply.

ETSI


--- Page 1103  ---


3GPP TS 38.331 version 17.0.0 Release 17
1102
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline SL-PreconfigurationNR field descriptions \\
\hline \begin{tabular}{l}
sl-DRX-PreConfig-GC-BC \\
This field indicates the sidelink DRX configuration for groupcast and broadcast communication, as specified in TS 38.321 [3].
\end{tabular} \\
\hline \begin{tabular}{l}
si-OffsetDFN \\
Indicates the timing offset for the UE to determine DFN timing when GNSS is used for timing reference. Value 1 corresponds to 0.001 milliseconds, value 2 corresponds to 0.002 milliseconds, and so on. If the field is absent, no offset is applied.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-PreconfigEUTRA-AnchorCarrierFreqList \\
This field indicates the EUTRA anchor carrier frequency list, which can provide the NR sidelink communication configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-PreconfigFreqinfoList \\
This field indicates the NR sidelink communication configuration some carrier frequency(ies). In this release, only one SL-FreqConfig can be configured in the list.
\end{tabular} \\
\hline \begin{tabular}{l}
si-PreconfigNR-AnchorCarrierFreqList \\
This field indicates the NR anchor carrier frequency list, which can provide the NR sidelink communication configuration.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-RadioBearerPreConfigList \\
This field indicates one or multiple sidelink radio bearer configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
sl-RLC-BearerPreConfigList \\
This field indicates one or multiple sidelink RLC bearer configurations.
\end{tabular} \\
\hline \begin{tabular}{l}
si-RoHC-Profiles \\
This field indicates the supported RoHC profiles for NR sidelink communications.
\end{tabular} \\
\hline \begin{tabular}{l}
sI-SSB-PriorityNR \\
This field indicates the priority of NR sidelink SSB transmission and reception.
\end{tabular} \\
\hline \begin{tabular}{l}
si-TxProfileList \\
List of one or multiple Tx profiles, which are indicated by upper layer in order of increasing Tx profile pointer identities, indicate the compatibility of supporting SL DRX as specified in TS 38.321 [3].
\end{tabular} \\
\hline
\end{tabular}
- End of NR-Sidelink-Preconf
-- ASNISTART

END
-- ASNISTOP
9.4 Radio Information Related to Discovery Message

This clause specifies RRC information elements that are transferred in Discovery Message.
- SL-Accessinfo-L2U2N

The IE SL-AccessInfo-L2U2N includes the radio information included in Discovery Message used for L2 U2N relay operation.

ETSI


--- Page 1104  ---


3GPP TS 38.331 version 17.0.0 Release 17
1103
ETSI TS 138331 V17.0.0 (2022-05)

SL-Accessinfo-L2U2N information elements
```
-- ASNISTART
-- TAG-SL-ACCESSINFO-L2U2N-START
```

```
BEGIN
IMPORTS
    CellAccessRelatedInfo
FROM NR-RRC-Definitions;
SL-AccessInfo-L2U2N-rl7 ::= SEQUENCE {
    cellAccessRelatedInfo-rl7 CellAccessRelatedInfo
...
}
END
-- TAG-SL-ACCESSINFO-L2U2N-STOP
-- ASNISTOP
```


ETSI


--- Page 1105  ---


3GPP TS 38.331 version 17.0.0 Release 17
1104
ETSI TS 138331 V17.0.0 (2022-05)

10 Generic error handling
10.1 General

The generic error handling defined in the subsequent subclauses applies unless explicitly specified otherwise e.g. within the procedure specific error handling.

The UE shall consider a value as not comprehended when it is set:
- to an extended value that is not defined in the version of the transfer syntax supported by the UE;
- to a spare or reserved value unless the specification defines specific behaviour that the UE shall apply upon receiving the concerned spare/reserved value.

The UE shall consider a field as not comprehended when it is defined:
- as spare or reserved unless the specification defines specific behaviour that the UE shall apply upon receiving the concerned spare/reserved field.
10.2 ASN.1 violation or encoding error

The UE shall:
\( 1> \) when receiving an RRC message on the \( \mathrm{BCCH}, \mathrm{CCCH} \) or PCCH for which the abstract syntax is invalid [6]:
\( 2> \) ignore the message.
NOTE: This clause applies in case one or more fields is set to a value, other than a spare, reserved or extended value, not defined in this version of the transfer syntax. E.g. in the case the UE receives value 12 for a field defined as INTEGER ( 1 _11). In cases like this, it may not be possible to reliably detect which field is in the error hence the error handling is at the message level.
10.3 Field set to a not comprehended value

The UE shall, when receiving an RRC message on any logical channel:
\( 1> \) if the message includes a field that has a value that the UE does not comprehend:
\( 2> \) if a default value is defined for this field:
\( 3> \) treat the message while using the default value defined for this field;
\( 2> \) else if the concerned field is optional:
\( 3> \) treat the message as if the field were absent and in accordance with the need code for absence of the concerned field;
\( 2> \) else:
\( 3> \) treat the message as if the field were absent and in accordance with clause 10.4
10.4 Mandatory field missing

The UE shall:
\( 1> \) if the message includes a field that is mandatory to include in the message (e \( g \) because conditions for mandatory presence are fulfilled) and that field is absent or treated as absent:
\( 2> \) if the RRC message was not received on DCCH or CCCH:

ETSI


--- Page 1106  ---


3GPP TS 38.331 version 17.0.0 Release 17
1105
ETSI TS 138331 V17.0.0 (2022-05)

\( 3> \) if the field concerns a (sub-field of) an entry of a list (ie a SEQUENCE OF):
4> treat the list as if the entry including the missing or not comprehended field was absent;
\( 3> \) else if the field concerns a sub-field of another field, referred to as the 'parent' field i.e. the field that is one nesting level up compared to the erroneous field:

4> consider the 'parent' field to be set to a not comprehended value;
4> apply the generic error handling to the subsequent 'parent' field(s), until reaching the top nesting level i.e. the message level;
\( 3> \) else (field at message level):
4> ignore the message.
NOTE 1: The error handling defined in these clauses implies that the UE ignores a message with the message type or version set to a not comprehended value.

NOTE 2: The nested error handling for messages received on logical channels other than DCCH and CCCH applies for errors in extensions also, even for errors that can be regarded as invalid network operation e.g. the network not observing conditional presence.

NOTE 3: UE behaviour on receipt of an RRC message on DCCH or CCCH that does not include a field that is mandatory (e.g. because conditions for mandatory presence are fulfilled) is unspecified.

The following ASN. 1 further clarifies the levels applicable in case of nested error handling for errors in extension fields.
```
-- /example/ ASN1START
-- Example with extension addition group
ItemInfolist ::= SEQUENCE (SIZE (1..max)) OFItemInfo
ItemInfo ::= SEQUENCE \
    itemIdentity INTEGER (1..max),
    fieldl Fieldl,
    field2 Field2 OPTIONAL, -- Need. N
    ...
    [ [
    field3-r9 Field3-r9 OPTIONAL, Cond Condl
    field4-r9 Field4-r9 OPTIONAL -- Need N
    ]]
}
-- Example with traditional non-critical extension (empty sequence)
BroadcastInfoBlockl ::= SEQUENCE {
    itemIdentity INTEGER (1..max),
    fieldl Fieldl,
    field2 Field2 OPTIONAL, -- Need. N
    nonCriticalExtension BroadcastInfoBlockl-v940-IEs OPTIONAL
}
BroadcastInfoBlockl-v940-IEs::= SEQUENCE {
    field3-r9 Field3-r9 OPTIONAL, Cond Condl
    field4-r9 Field4-r9 OPTIONAL, -- Need N
    nonCriticalExtension SEQUENCE {} OPTIONAL -- Need S
}
-- ASNISTOP
```


The UE shall, apply the following principles regarding the levels applicable in case of nested error handling:
- an extension addition group is not regarded as a level on its own. E.g. in the ASN. 1 extract in the previous, a error regarding the conditionality of field 3 would result in the entire itemInfo entry to be ignored (rather than just the extension addition group containing field 3 and field4);

ETSI


--- Page 1107  ---


3GPP TS 38.331 version 17.0.0 Release 17
1106
ETSI TS 138331 V17.0.0 (2022-05)
- a traditional nonCriticalExtension is not regarded as a level on its own. E.g. in the ASN. 1 extract in the previous, an error regarding the conditionality of field 3 would result in the entire BroadcastInfoBlockI to be ignored (rather than just the non-critical extension containing field3 and field4).
10.5 Not comprehended field

The UE shall, when receiving an RRC message on any logical channel:
\( 1> \) if the message includes a field that the UE does not comprehend:
\( 2> \) treat the rest of the message as if the field was absent.
NOTE: This clause does not apply to the case of an extension to the value range of a field. Such cases are addressed instead by the requirements in clause 10.3.

ETSI


--- Page 1108  ---


3GPP TS 38.331 version 17.0.0 Release 17
1107
ETSI TS 138331 V17.0.0 (2022-05)

11 Radio information related interactions between network nodes
11.1 General

This clause specifies RRC messages that are transferred between network nodes. These RRC messages may be transferred to or from the UE via another Radio Access Technology. Consequently, these messages have similar characteristics as the RRC messages that are transferred across the NR radio interface, i.e. the same transfer syntax and protocol extension mechanisms apply.
11.2 Inter-node RRC messages
11.2.1 General

This clause specifies RRC messages that are sent either across the X2-, Xn- or the NG-interface, either to or from the gNB, i.e. a single 'logical channel' is used for all RRC messages transferred across network nodes. The information could originate from or be destined for another RAT.
```
-- ASNISTART
-- TAG-NR-INTER-NODE-DEFINITIONS-START
NR-InterNodeDefinitions DEFINITIONS AUTOMATIC TAGS ::=
BEGIN
IMPORTS
    ARFCN-ValueNR,
    ARFCN-ValueEUTRA,
    CellIdentity,
    CGI-InfoEUTRA,
    CGI-InfoNR,
    CondReconfigExecCondSCG-rl7,
    CSI-RS-Index,
    CSI-RS-CellMobility,
    DRX-Config,
    EUTRA-PhysCellId,
    FeatureSetDownlinkPerCC-Id,
    FeatureSetUplinkPerCC-Id,
    FreqBandIndicatorNR,
    GapConfig,
    maxBandComb,
    maxBands,
    maxBandsEUTRA,
    maxCellSFTD,
    maxFeatureSetsPerBand,
    maxFreqIDC-MRDC,
    maxNrofCombIDC,
```


ETSI


--- Page 1109  ---


3GPP TS 38.331 version 17.0.0 Release 17
1108
ETSI TS 138331 V17.0.0 (2022-05)
```
    maxNrofCondCells-rl6,
    ffsUpperLimit, -- to be removed later
    maxNrofPhysicalResourceBlocks,
    maxNrofSCells,
    maxNrofServingCells,
    maxNrofServingCells-l,
    maxNrofServingCellseUTRA,
    maxNrofIndexesToReport,
    maxSimultaneousBands,
    MBSInterestIndication-rl7,
    MeasQuantityResults,
    MeasResultCellListSFTD-EUTRA,
    MeasResultCellListSFTD-NR,
    MeasResultList2NR,
    MeasResultSCG-Failure,
    MeasResultServFreqListEUTRA-SCG,
    NeedForGapsInfoNR-rl6,
    NeedForNCSG-InfoNR-rl7,
    NeedForNCSG-InfoEUTRA-rl7,
    OverheatingAssistance,
    OverheatingAssistance-rl7,
    P-Max,
    PhysCellId,
    RadioBearerConfig,
    RAN-NotificationAreaInfo,
    RRCReconfiguration,
    ServCellIndex,
    SetupRelease,
    SSB-Index,
    SSB-MTC,
    SSB-ToMeasure,
    SS-RSSI-Measurement,
    ShortMAC-I,
    SubcarrierSpacing,
    UEAssistanceInformation,
    UE-CapabilityRAT-ContainerList,
    maxNrofCLI-RSSI-Resources-rl6,
    maxNrofCLI-SRS-Resources-r16,
    RSSI-ResourceId-rl6,
    SidelinkUEInformationNR-rl6,
    SRS-ResourceId.
FROM NR-RRC-Definitions;
-- TAG-NR-INTER-NODE-DEFINITIONS-STOP
-- ASNISTOP
```


ETSI


--- Page 1110  ---


3GPP TS 38.331 version 17.0.0 Release 17
1109
ETSI TS 138331 V17.0.0 (2022-05)
11.2.2 Message definitions

CG-CandidateList
This message is used to transfer the SCG radio configuration for one or more candidate cells for Conditional PSCell Addition (CPA) or Conditional PSCell Change (CPC) as generated by the candidate target SgNB .

Direction: Secondary gNB to master gNB or eNB.
CG-CandidateList message
```
-- ASNISTART
-- TAG-CG-CANDIDATELIST-START
CG-CandidateList ::=
SEQUENCE \
    criticalExtensions
        cl
            CHOICE|
            spartellel
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
CG-CandidateList-IEs ::=
    cg-CandidateToAddModList-rl7
    cg-CandidateToReleaseList-rl7
    nonCriticalExtension
}
CG-CandidateInfo-rl7 ::=
    cg-CandidateInfoId-rl7
    CG-CandidateInfoId-rl7,
}
CG-CandidateInfoId-rl7::= SEQUENCE |
    ssbFrequency-rl7
    ARFCN-ValueNR,
}
-- TAG-CG-CANDIDATELIST-STOP
-- ASNISTOP
```


ETSI


--- Page 1111  ---


3GPP TS 38.331 version 17.0.0 Release 17
1110
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CG-CandidateList field descriptions \\
\hline \begin{tabular}{l}
cg-CandidateToAddModList \\
Contains information regarding candidate target cells to be added or modified for Conditional PSCell Addition (CPA) or Conditional PSCell Change (CPC) from the candidate target secondary node to the master node.
\end{tabular} \\
\hline \begin{tabular}{l}
cg-CandidateToReleaseList \\
Contains information regarding candidate target cells for CPA or CPC to be removed from the candidate target secondary node to the master node. This list is not used in CPA or CPC preparation.
\end{tabular} \\
\hline
\end{tabular}
- HandoverCommand

This message is used to transfer the handover command as generated by the target gNB.
Direction: target gNB to source gNB/source RAN.
HandoverCommand message
```
-- ASNISTART
-- TAG-HANDOVER-COMMAND-START
HandoverComand ::= SEQUENCE {
    criticalExtensions CHOICE {
        cl
            CHOICE[
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
HandoverCommand-IEs ::=
    handoverCommandMessage
    nonCriticalExtension
}
-- TAG-HANDOVER-COMMAND-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline \multicolumn{1}{|c|}{ HandoverCommand field descriptions } \\
\hline handoverCommandMessage \\
Contains the RRCReconfiguration message used to perform handover within NR or handover to NR, as generated (entirely) by the target gNB. \\
\hline
\end{tabular}
- HandoverPreparationInformation

This message is used to transfer the NR RRC information used by the target gNB during handover preparation or UE context retrieval, e.g. in case of resume or reestablishment, including UE capability information. This message is also used for transferring the information between the CU and DU.

ETSI


--- Page 1112  ---


3GPP TS 38.331 version 17.0.0 Release 17
1111
ETSI TS 138331 V17.0.0 (2022-05)

Direction: source gNB /source RAN to target gNB or CU to DU .
HandoverPreparationInformation message
```
-- ASNISTART
-- TAG-HANDOVER-PREPARATION-INFORMATION-START
HandoverPreparationInformation ::= SEQUENCE [
    criticalExtensions CHOICE {
        cl CHOICEl
            handoverPreparationInformation HandoverPreparationInformation-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
HandoverPreparationInformation-IEs ::= SEQUENCE \
    ue-CapabilityRAT-List UE-CapabilityRAT-ContainerList,
    sourceConfig AS-Config OPTIONAL, -- Cond HO
    rrm-Config RRM-Config OPTIONAL,
    as-Context AS-Context OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
AS-Config ::= SEQUENCE \
    rrcReconfiguration OCTET STRING (CONTAINING RRCReconfiguration),
    ...;
    [ [
    sourceRB-SN-Config OCTET STRING (CONTAINING RadioBearerConfig) OPTIONAL,
    sourceSCG-NR-Config OCTET STRING (CONTAINING RRCReconfiguration) OPTIONAL,
    sourceSCG-EUTRA-Config OCTET STRING OPTIONAL
    ]],
    [ [
    sourcesCG-Configured ENUMERATED {true} OPTIONAL
    ] ]
}
AS-Context ::= SEQUENCE \
    reestablishmentInfo ReestablishmentInfo OPTIONAL,
    configRestrictInfo ConfigRestrictInfoSCG OPTIONAL,
    ...r
    [[ ran-NotificationAreaInfo RAN-NotificationAreaInfo OPTIONAL
    ]],
    [[ ueAssistanceInformation OCTET STRING (CONTAINING UEAssistanceInformation) OPTIONAL -- Cond HO2
    ]],
    [ [
    selectedBandCombinationSN BandCombinationInfoSN OPTIONAL
    ]],
    [ [
    configRestrictInfoDAPS-r16 ConfigRestrictInfoDAPS-r16 OPTIONAL,
    sidelinkUEInformationNR-rl6 OCTET STRING OPTIONAL,
```


ETSI


--- Page 1113  ---


3GPP TS 38.331 version 17.0.0 Release 17
1112
ETSI TS 138331 V17.0.0 (2022-05)
```
    sidelinkUEInformationEUTRA-r16 OCTET STRING OPTIONAL,
    ueAssistanceInformationEUTRA-r16 OCTET STRING OPTIONAL,
    ueAssistanceInformationSCG-rl6 OCTET STRING (CONTAINING UEAssistanceInformation)
    needForGapsInfoNR-rl6
    ]],
    [ [
    configRestrictInfoDAPS-vl640 ConfigRestrictInfoDAPS-vl640 OPTIONAL
    ]],
    [ [
    needForNCSG-InfoNR-rl7 NeedForNCSG-InfoNR-rl7 OPTIONAL,
    needForNCSG-InfoEUTRA-rl7 NeedForNCSG-InfoEUTRA-rl7 OPTIONAL,
    mbsInterestIndication-rl7 OCTET STRING (CONTAINING MBSInterestIndication-rl7) OPTIONAL
    ] ]
}
ConfigRestrictInfoDAPS-rl6 ::=
    powerCoordination-rl6
        p-DAPS-Source-rl6
        p-DAPS-Target-r16
        uplinkPowerSharingDAPS-Mode-rl6 ENUMERATED {semi-static-model, semi-static-mode2, dynamic }
    } OPTIONAL
}
ConfigRestrictInfoDAPS-vl640 ::= SEQUENCE \
    sourceFeatureSetPerDownlinkCC-rl6 FeatureSetDownlinkPerCC-Id,
    sourceFeatureSetPerUplinkCC-r16 FeatureSetUplinkPerCC-Id
}
ReestablishmentInfo ::= SEQUENCE {
    sourcePhysCellId PhysCellId,
    targetCellShortMAC-I ShortMAC-I,
    additionalReestabInfoList ReestabNCellInfoList OPTIONAL
}
ReestabNCellInfoList ::= SEQUENCE (SIZE (l..maxCellPrep) ) OF ReestabNCellInfo
ReestabNCellInfo::= SEQUENCE[
    cellIdentity CellIdentity,
    key-gNodeB-Star BIT STRING (SIZE (256)),
    shortMAC-I ShortMAC-I
}
RRM-Config ::= SEQUENCE \
    ue-InactiveTime ENUMERATED [
            sl, s2, s3, s5, s7, s10, s15, s20,
                s25, s30, s40, s50, minl, minls20, minls40,
                min2, min2s30, min3, min3s30, min4, min5, min6,
                min7, min8, min9, minl0, minl2, minl4, minl7, min20,
                min24, min28, min33, min38, min44, min50, hrl,
                hrlmin30, hr2, hr2min30, hr3, hr3min30, hr4, hr5, hr6,
                hr8, hrl0, hrl3, hrl6, hr20, dayl, daylhrl2, day2,
                day2hr12, day3, day4, day5, day7, dayl0, dayl4, dayl9,
                day24, day30, dayMoreThan30} OPTIONAL,
    candidateCellInfoList MeasResultList2NR OPTIONAL,
```


ETSI


--- Page 1114  ---


3GPP TS 38.331 version 17.0.0 Release 17
1113
ETSI TS 138331 V17.0.0 (2022-05)
```
    ...;
    [ [
    candidateCellInfoListSN-EUTRA MeasResultServFreqListEUTRA-SCG OPTIONAL
}
-- TAG-HANDOVER-PREPARATION-INFORMATION-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline HandoverPreparationinformation field descriptions \\
\hline \begin{tabular}{l}
as-Context \\
Local RAN context required by the target gNB or DU.
\end{tabular} \\
\hline \begin{tabular}{l}
rm-Config \\
Local RAN context used mainly for RRM purposes.
\end{tabular} \\
\hline \begin{tabular}{l}
sourceConfig \\
The radio resource configuration as used in the source cell.
\end{tabular} \\
\hline \begin{tabular}{l}
ue-CapabilityRAT-List \\
The UE radio access related capabilities concerning RATs supported by the UE. A gNB that retrieves MRDC related capability containers ensures that the set of included MRDC containers is consistent w.r.t. the feature set related information.
\end{tabular} \\
\hline \begin{tabular}{l}
ue-inactiveTime \\
Duration while UE has not received or transmitted any user data. Thus the timer is still running in case e.g., UE measures the neighbour cells for the HO purpose. Value s1 corresponds to 1 second, \( s 2 \) corresponds to 2 seconds and so on. Value \( m i n 1 \) corresponds to 1 minute, value \( m i n 1 s 20 \) corresponds to 1 minute and 20 seconds, value min 1 s 40 corresponds to 1 minute and 40 seconds and so on. Value \( h r 1 \) corresponds to 1 hour, \( h r 1 \mathrm{~min} 30 \) corresponds to 1 hour and 30 minutes and so on.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline AS-Config field descriptions \\
\hline \begin{tabular}{l}
rrcReconfiguration \\
Contains the RRCReconfiguration configuration as generated entirely by the MN.
\end{tabular} \\
\hline \begin{tabular}{l}
sourceRB-SN-Config \\
Contains the IE RadioBearerConfig as generated entirely by the SN. This field is only used when the UE is configured with SN terminated RB(s).
\end{tabular} \\
\hline \begin{tabular}{l}
sourceSCG-Configured \\
Value true indicates that the UE is configured with NR or EUTRA SCG in source configuration. The field is only used in NR-DC and NE-DC and is included only if the fields sourceSCG-NR-Config and sourceSCG-EUTRA-Config are absent.
\end{tabular} \\
\hline \begin{tabular}{l}
sourceSCG-EUTRA-Config \\
Contains the current dedicated SCG configuration in RRCConnectionReconfiguration message as specified in TS 36.331 [10] and generated entirely by the SN. In this version of the specification, the E-UTRA RRCConnectionReconfiguration message can only include the field scg-Configuration. This field is only used in NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
sourceSCG-NR-Config \\
Contains the current dedicated SCG configuration in RRCReconfiguration message as generated entirely by the SN. In this version of the specification, the \\
RRCReconfiguration message can only include fields secondaryCellGroup and measConfig. This field is only used in NR-DC.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1115  ---


3GPP TS 38.331 version 17.0.0 Release 17
1114
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline AS-Context field descriptions \\
\hline \begin{tabular}{l}
configRestrictinfoDAPS \\
Includes fields for which source cell explicitly indicates the restriction to be observed by target cell during DAPS handover.
\end{tabular} \\
\hline \begin{tabular}{l}
mbsinterestindication \\
Includes the information last reported by the UE in the NR MBSinterestindication message, if any.
\end{tabular} \\
\hline \begin{tabular}{l}
needForGapsinfoNR \\
Includes measurement gap requirement information of the UE for NR target bands.
\end{tabular} \\
\hline \begin{tabular}{l}
selectedBandCombinationSN \\
Indicates the band combination selected by SN in (NG)EN-DC, NE-DC, and NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
sidelinkUEinformationEUTRA \\
This field includes SidelinkUEInformation IE as specified in TS 36.331 [10].
\end{tabular} \\
\hline \begin{tabular}{l}
sidelinkUEinformationNR \\
This field includes SidelinkUElnformationNR IE.
\end{tabular} \\
\hline \begin{tabular}{l}
ueAssistanceinformation \\
Includes for each UE assistance feature the information last reported by the UE, if any.
\end{tabular} \\
\hline \begin{tabular}{l}
ueAssistanceinformationSCG \\
Includes for each UE assistance feature associated with the SCG, the information last reported by the UE in the NR UEAssistancelnformation message for the SCG, if any.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline \multicolumn{1}{|c|}{ ConfigRestrictinfoDAPS field descriptions } \\
\hline sourceFeatureSetPerUplinkCC/sourceFeatureSetPerDownlinkCC \\
Indicates an index referring to the position of the FeatureSetUplinkPerCC/FeatureSetDownilikPerCC selected by source in the \\
featureSetsUplinkPerCC/featureSetsDowninkPerCC. \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline RRM-Config field descriptions \\
\hline \begin{tabular}{l}
candidateCellinfoList \\
A list of the best cells on each frequency for which measurement information was available
\end{tabular} \\
\hline \begin{tabular}{l}
candidateCellinfoListSN-EUTRA \\
A list of EUTRA cells including serving cells and best neighbour cells on each serving frequency, for which measurement results were available. This field is only used in NEDC.
\end{tabular} \\
\hline
\end{tabular}

\begin{table}
\begin{tabular}{|l|l|}
\hline Conditional Presence & Explanation \\
\hline HO & The field is mandatory present in case of handover within NR or UE context retrieval, e.g. in case of resume or reestablishment. The field is optionally present in case of handover from E-UTRA/5GC. Otherwise the field is absent. \\
\hline HO2 & The field is optionally present in case of handover within NR; otherwise the field is absent. \\
\hline
\end{tabular}
\captionsetup{labelformat=empty}
\caption{NOTE 1: The following table indicates per source RAT whether RAT capabilities are included or not.}
\end{table}

ETSI


--- Page 1116  ---


3GPP TS 38.331 version 17.0.0 Release 17
1115
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|}
\hline Source RAT & NR capabilities & E-UTRA capabilities & MR-DC capabilities & UTRA capabilities \\
\hline NR & May be included if UE Radio Capability ID as specified in 23.502 [43] is used for the UE. Included otherwise. & May be included & May be included & May be included, ignored by gNB if received \\
\hline E-UTRAN & May be included if UE Radio Capability ID as specified in 23.502 [43] is used for the UE. Included otherwise. & May be included & May be included & May be included, ignored by gNB if received \\
\hline
\end{tabular}

\begin{table}
\captionsetup{labelformat=empty}
\caption{NOTE 2: The following table indicates, in case of inter-RAT handover from E-UTRA, which additional IEs are included or not:}
\begin{tabular}{|l|l|l|l|}
\hline Source system & sourceConfig & rrm-Config & as-Context \\
\hline E-UTRA/EPC & Not included & May be included & Not included \\
\hline E-UTRA/5GC & May be included, but only radioBearerConfig is included in the RRCReconfiguration. & May be included & Not included \\
\hline
\end{tabular}
\end{table}
- CG-Config

This message is used to transfer the SCG radio configuration as generated by the SgNB or SeNB. It can also be used by a CU to request a DU to perform certain actions, e.g. to request the DU to perform a new lower layer configuration.

Direction: Secondary gNB or eNB to master gNB or eNB, alternatively CU to DU.
CG-Config message
```
-- ASNISTART
-- TAG-CG-CONFIG-START
CG-Config ::= SEQUENCE \
    criticalExtensions CHOICE \
        cl CHOICEl
            cg-Config CG-Config-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
CG-Config-IEs ::=
    scg-CellGroupConfig
    scg-RB-Config
    configRestrictModReq
    drx-InfoSCG
    candidateCellInfoListSN
    measConfigSN
    selectedBandCombination
    fr-InfolistSCG
```


ETSI


--- Page 1117  ---


3GPP TS 38.331 version 17.0.0 Release 17
1116
ETSI TS 138331 V17.0.0 (2022-05)
```
    candidateServingFreqListNR CandidateServingFreqListNR OPTIONAL,
    nonCriticalextension CG-Config-vl540-IEs OPTIONAL
}
CG-Config-vl540-IEs ::= SEQUENCE \
    pSCellFrequency ARFCN-ValueNR OPTIONAL,
    reportCGI-RequestNR
        requestedCellInfo
            ssbFrequency
            cellForWhichToReportCGI
        }
    }
    ph-InfoSCG PH-TypeListSCG
    nonCriticalExtension CG-Config-vl560-IEs
}
CG-Config-vl560-IEs ::=
    pSCellFrequencyEUTRA
    scg-CellGroupConfigEUTRA
    candidateCellInfoListSN-EUTRA
    candidateServingFreqListEUTRA
    needForGaps
    drx-ConfigSCG
    reportCGI-RequestEUTRA SEQUENCE {
        requestedCellInfoEUTRA SEQUENCE {
            eutraFrequency ARFCN-ValueEUTRA,
            cellForWhichToReportCGI-EUTRA EUTRA-PhysCellId
        }
    }
```

```
}
CG-Config-vl590-IEs ::= SEQUENCE {
    scellFrequencies SN-NR
    scellFrequenciesSN-EUTRA
    nonCriticalExtension
}
CG-Config-vl6l0-IEs ::= SEQUENCE \
    drx-InfoSCG2 DRX-Info2 OPTIONAL,
    nonCriticalExtension CG-Config-vl620-IEs OPTIONAL
}
CG-Config-vl620-IEs ::= SEQUENCE \
    ueAssistanceInformationSCG-rl6 OCTET STRING (CONTAINING UEAssistanceInformation) OPTIONAL,
    nonCriticalExtension CG-Config-vl630-IEs OPTIONAL
}
CG-Config-vl630-IEs ::= SEQUENCE \
    selectedToffset-rl6 T-Offset-rl6 OPTIONAL,
    nonCriticalExtension CG-Config-vl640-IEs OPTIONAL
}
CG-Config-vl640-IEs ::= SEQUENCE \
```


ETSI


--- Page 1118  ---


3GPP TS 38.331 version 17.0.0 Release 17
1117
ETSI TS 138331 V17.0.0 (2022-05)
```
    servCellInfoListSCG-NR-rl6 ServCellInfoListSCG-NR-rl6 OPTIONAL,
    servCellInfoListSCG-EUTRA-rl6 ServCellInfoListSCG-EUTRA-rl6 OPTIONAL,
    nonCriticalExtension CG-Config-vl700-IEs OPTIONAL
}
CG-Config-vl700-IEs ::= SEQUENCE {
    candidateCellInfoListCPC-rl7
    nonCriticalExtension
}
ServCellInfoListSCG-NR-rl6 ::= SEQUENCE (SIZE (l.. maxNrofServingCells)) OF ServCellInfoXCG-NR-rl6
ServCellInfoXCG-NR-rl6 ::= SEQUENCE {
    dl-FreqInfo-NR-rl6
    ul-FreqInfo-NR-rl6
    ...
}
FrequencyConfig-NR-rl6 ::= SEQUENCE \
    freqBandIndicatorNR-r16
    carrierCenterFreq-NR-rl6
    carrierBandwidth-NR-rl6
    subcarrierSpacing-NR-r16
}
ServCellInfoListSCG-EUTRA-rl6 ::= SEQUENCE (SIZE (l.. maxNrofServingCellsEUTRA)) OF ServCellInfoXCG-EUTRA-rl6
ServCellInfoXCG-EUTRA-rl6 ::= SEQUENCE \
    dl-CarrierFreq-EUTRA-rl6
    ul-CarrierFreq-EUTRA-r16
    transmissionBandwidth-EUTRA-rl6
    ...
}
TransmissionBandwidth-EUTRA-r16::= ENUMERATED {rb6, rbl5, rb25, rb50, rb75, rbl00}
PH-TypeListSCG ::= SEQUENCE (SIZE (1..maxNrofServingCells)) OF PH-InfoSCG
PH-InfoSCG ::=
    servCellIndex
    ph-Uplink
    ph-SupplementaryUplink PH-UplinkCarrierSCG OPTIONAL,
    ...
}
PH-UplinkCarrierSCG ::= SEQUENCE[
    ph-Typelor3
    ...
}
MeasConfigSN ::= SEQUENCE \
    measuredFrequenciesSN
    ...
}
```


ETSI


--- Page 1119  ---


3GPP TS 38.331 version 17.0.0 Release 17
1118
ETSI TS 138331 V17.0.0 (2022-05)
```
NR-FreqInfo ::= SEQUENCE \
    measuredFrequency ARFCN-ValueNR OPTIONAL,
    ...
}
ConfigRestrictModReqSCG ::= SEQUENCE {
    requestedBC-MRDC BandCombinationInfoSN OPTIONAL,
    requested.-MaxFRl P-Max OPTIONAL,
    ...;
    [ [
    requestedPDCCH-BlindDetectionSCG INTEGER (1..15) OPTIONAL,
    requested.P-MaxEUTRA P-Max
    ]],
    [ [
    requestedP-MaxFR2-rl6 P-Max OPTIONAL,
    requestedMaxInterFreqMeasIdSCG-rl6 INTEGER(l..maxMeasIdentitiesMN) OPTIONAL,
    requestedMaxIntraFreqMeasIdSCG-r16 INTEGER(1..maxMeasIdentitiesMN) OPTIONAL,
    requestedToffset-rl6 T-Offset-rl6 OPTIONAL
    ]]
}
BandCombinationIndex ::= INTEGER (1..maxBandComb)
BandCombinationInfoSN ::= SEQUENCE \
    bandCombinationIndex BandCombinationIndex,
    requestedFeatureSets FeatureSetEntryIndex
}
FR-InfoList ::= SEQUENCE (SIZE (l..MaxNrofServingCells-l)) OF FR-Info
FR-Info ::= SEQUENCE \
    servCellIndex ServCellIndex,
    fr-Type ENUMERATED {frl, fr2}
}
CandidateServingFreqListNR::= SEQUENCE (SIZE (1.. maxFreqIDC-MRDC)) OF ARFCN-ValueNR
CandidateServingFreqListEUTRA ::= SEQUENCE (SIZE (1.. maxFreqIDC-MRDC)) OF ARFCN-ValueEUTRA
T-Offset-rl6 ::= ENUMERATED {ms0dot5, ms0dot75, msl, msldot5, ms2, ms2dot5, ms3, sparel}
CandidateCellInfoListCPC-rl7 ::= SEQUENCE (SIZE (l..ffsUpperLimit)) OF CandidateCellInfo-rl7
CandidateCellInfo-rl7 ::= SEQUENCE \
    ssbFrequency-rl7 ARFCN-ValueNR,
    candidateList-rl7 SEQUENCE (SIZE (l..ffsUpperLimit)) OF CandidateCell-rl7 -- FFS
}
CandidateCell-rl7 ::= SEQUENCE [
    physCellId-rl7 PhysCellId,
    condExecutionCondSCG-rl7 OCTET STRING (CONTAINING CondReconfigExecCondSCG-rl7) OPTIONAL
-- FFS whether the Optional flag is to be removed from condExecutionConditionSN-rl7
}
```


ETSI


--- Page 1120  ---


3GPP TS 38.331 version 17.0.0 Release 17
1119
ETSI TS 138331 V17.0.0 (2022-05)

TAG-CG-CONFIG-STOP
ASNISTOP

ETSI


--- Page 1121  ---


3GPP TS 38.331 version 17.0.0 Release 17
1120
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CG-Config field descriptions \\
\hline \begin{tabular}{l}
candidateCellinfoListCPC \\
Contains information regarding candidate target cells for Conditional PSCell Change (CPC) that the source secondary gNB suggests the target secondary gNB to consider configuring for CPC.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateCellinfoListSN \\
Contains information regarding cells that the source secondary node suggests the target secondary gNB to consider configuring.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateCellinfoListSN-EUTRA \\
Includes the MeasResultList3EUTRA as specified in TS 36.331 [10]. Contains information regarding cells that the source secondary node suggests the target secondary eNB to consider configuring. This field is only used in NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateServingFreqListNR, candidateServingFreqListEUTRA \\
Indicates frequencies of candidate serving cells for In-Device Co-existence Indication (see TS 36.331 [10]).
\end{tabular} \\
\hline \begin{tabular}{l}
configRestrictModReq \\
Used by SN to request changes to SCG configuration restrictions previously set by MN to ensure UE capabilities are respected. E.g. can be used to request configuring an NR band combination whose use MN has previously forbidden. SN only includes this field in SN-initiated procedures.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-ConfigSCG \\
This field contains the complete DRX configuration of the SCG. This field is only used in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-InfoSCG \\
This field contains the DRX long and short cycle configuration of the SCG. This field is used in (NG)EN-DC and NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-InfoSCG2 \\
This field contains the drx-onDurationTimer configuration of the SCG. This field is only used in (NG)EN-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
fr-infoListSCG \\
Contains information of FR information of serving cells that include PScell and SCells configured in SCG.
\end{tabular} \\
\hline \begin{tabular}{l}
measuredFrequenciesSN \\
Used by SN to indicate a list of frequencies measured by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
needForGaps \\
In NE-DC, indicates whether the SN requests gNB to configure measurements gaps.
\end{tabular} \\
\hline \begin{tabular}{l}
ph-infoSCG \\
Power headroom information in SCG that is needed in the reception of PHR MAC CE of MCG
\end{tabular} \\
\hline \begin{tabular}{l}
ph-SupplementaryUplink \\
Power headroom information for supplementary uplink. In the case of (NG)EN-DC and NR-DC, this field is only present when two UL carriers are configured for a serving cell and one UL carrier reports type1 PH while the other reports type 3 PH.
\end{tabular} \\
\hline \begin{tabular}{l}
ph-Type1or3 \\
Type of power headroom for a certain serving cell in SCG (PSCell and activated SCells). Value type 1 refers to type 1 power headroom, value type3 refers to type 3 power headroom. (See TS 38.321 [3]).
\end{tabular} \\
\hline \begin{tabular}{l}
ph-Uplink \\
Power headroom information for uplink.
\end{tabular} \\
\hline \begin{tabular}{l}
pSCellFrequency, pSCellFrequencyEUTRA \\
Indicates the frequency of PSCell in NR (i.e., pSCellFrequency) or E-UTRA (i.e., pSCellFrequencyEUTRA). In this version of the specification, pSCellFrequency is not used in NE-DC whereas pSCellFrequencyEUTRA is only used in NE-DC. pSCellFrequency indicates the absoluteFrequencySSB.
\end{tabular} \\
\hline \begin{tabular}{l}
reportCGI-RequestNR, reportCGI-RequestEUTRA \\
Used by SN to indicate to MN about configuring reportCG/procedure. The request may optionally contain information about the cell for which SN intends to configure reportCG/ procedure. In this version of the specification, the reportCG/-RequestNR is used in (NG)EN-DC and NR-DC whereas reportCG/-RequestEUTRA is used only for NEDC.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedBC-MRDC \\
Used to request configuring a band combination and corresponding feature sets which are forbidden to use by MN (i.e. outside of the allowedBC-ListMRDC) to allow renegotiation of the UE capabilities for SCG configuration.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1122  ---


3GPP TS 38.331 version 17.0.0 Release 17
1121
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
requestedMaxinterFreqMeasidSCG \\
Used to request the maximum number of allowed measurement identities to configure for inter-frequency measurement. This field is only used in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedMaxintraFreqMeasidSCG \\
Used to request the maximum number of allowed measurement identities to configure for intra-frequency measurement on each serving frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedPDCCH-BlindDetectionSCG \\
Requested value of the reference number of cells for PDCCH blind detection allowed to be configured for the SCG.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedP-MaxEUTRA \\
Requested value for the maximum power for the serving cells the UE can use in E-UTRA SCG. This field is only used in NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedP-MaxFR1 \\
Requested value for the maximum power for the serving cells on frequency range 1 (FR1) in this secondary cell group (see TS 38.104 [12]) the UE can use in NR SCG.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedP-MaxFR2 \\
Requested value for the maximum power for the serving cells on frequency range 2 (FR2) in this secondary cell group the UE can use in NR SCG. This field is only used in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
requested Toffset \\
Requests the new value for the time offset restriction used by the SN for scheduling SCG transmissions (i.e. \( T_{p r o c, S C G}^{\text {max }} \), see TS 38.213 [13]). This field is used in NR-DC only when the fields nrdc-PC-mode-FR1-r16 or nrdc-PC-mode-FR2-r16 are set to dynamic. Value ms0dot5 corresponds to 0.5 ms , value ms0dot75 corresponds to 0.75 ms , value ms1 corresponds to 1 ms and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
scellFrequenciesSN-EUTRA, scellFrequenciesSN-NR \\
Indicates the frequency of all SCells with SSB configured in SCG. The field scellFrequenciesSN-EUTRA is used in NE-DC; the field scellFrequenciesSN-NR is used in (NG)EN-DC and NR-DC. In (NG)EN-DC, the field is optionally provided to the MN. scellFrequenciesSN-NR indicates absoluteFrequencySSB.
\end{tabular} \\
\hline \begin{tabular}{l}
scg-CellGroupConfig \\
Contains the RRCReconfiguration message (containing only secondaryCellGroup and/or measConfig and/or otherConfig and/or conditionalReconfiguration and/or bap-Config and/or iab-IP-AddressConfigurationList): \\
- to be sent to the UE, used upon SCG establishment or modification (only when the SCG is not released by the SN), as generated (entirely) by the (target) SgNB. In this case, the SN sets the RRCReconfiguration message in accordance with clause 6 e.g. regarding the "Need" or "Cond" statements. \\
or \\
- including the current SCG configuration of the UE, when provided in response to a query from MN , or in SN triggered SN change in order to enable delta signaling by the target SN . In this case, the SN sets the \( R R C \) Reconfiguration message in accordance with clause 11.2.3. \\
The field is absent if neither SCG (re)configuration nor SCG configuration query nor SN triggered SN change is performed, e.g. at inter-node capability/configuration coordination which does not result in SCG (re)configuration towards the UE. The field is also absent upon an SCG release triggered by the SN. This field is not applicable in NE-DC.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1123  ---


3GPP TS 38.331 version 17.0.0 Release 17
1122
ETSI TS 138331 V17.0.0 (2022-05)

scg-CellGroupConfigEUTRA
Includes the E-UTRA RRCConnectionReconfiguration message as specified in TS 36.331 [10]. In this version of the specification, the E-UTRA RRC message can only include the field scg-Configuration:
- to be sent to the UE, used to (re-)configure the SCG configuration upon SCG establishment or modification (only when the SCG is not released by the SN), as generated (entirely) by the (target) SeNB. In this case, the SN sets the scg-Configuration within the EUTRA RRCConnectionReconfiguration message in accordance with clause 6 in TS 36.331 [10] e.g. regarding the "Need" or "Cond" statements.
or
- including the current SCG configuration of the UE, when provided in response to a query from MN, or in SN triggered SN change in order to enable delta signalling by the target SN .

The field is absent if neither SCG (re)configuration nor SCG configuration query nor SN triggered SN change is performed, e.g. at inter-node capability/configuration coordination which does not result in SCG (re)configuration towards the UE. The field is also absent upon an SCG release triggered by the SN. This field is only used in NEDC.
scg-RB-Config
Contains the IE RadioBearerConfig:
- to be sent to the UE, used to (re-)configure the SCG RB configuration upon SCG establishment or modification, as generated (entirely) by the (target) SgNB or SeNB. In this case, the SN sets the RadioBearerConfig in accordance with clause 6, e.g. regarding the "Need" or "Cond" statements.
or
- including the current SCG RB configuration of the UE, when provided in response to a query from MN or in SN triggered SN change or in SN triggered SN release or bearer type change between SN terminated bearer to MN terminated bearer in order to enable delta signaling by the MN or target SN. In this case, the SN sets the RadioBearerConfig in accordance with clause 11.2.3.

The field is absent if neither SCG (re)configuration nor SCG configuration query nor SN triggered SN change nor SN triggered SN release is performed, e.g. at inter-node capability/configuration coordination which does not result in SCG RB (re)configuration.
selectedBandCombination
Indicates the band combination selected by SN in (NG)EN-DC, NE-DC, and NR-DC. The SN should inform the MN with this field whenever the band combination and/or feature set it selected for the SCG changes (i.e. even if the new selection concerns a band combination and/or feature set that is allowed by the allowedBC-ListMRDC)
selectedToffset
Indicates the value used by the SN for scheduling SCG transmissions (i.e. \( T_{\text {proc, } S C G}^{\text {max }} \), see TS 38.213 [13]). This field is used in NR-DC only when the fields nrdc-PC-mode-FR1r16 or nrdc-PC-mode-FR2-r16 are set to dynamic. The SN can only indicate a value that is less than or equal to maxToffset received from MN. This field is used in NR-DC only when MN has included the field maxToffset in CG-Config/nfo. Value \( m s O d o t 5 \) corresponds to 0.5 ms , value \( \mathrm{ms} O d o t 75 \) corresponds to 0.75 ms , value ms 1 corresponds to 1 ms and so on.
servCellinfoListSCG-EUTRA
Indicates the carrier frequency and the transmission bandwidth of the serving cell(s) in the SCG in intra-band NE-DC. The field is needed when MN and SN operate serving cells in the same band for either contiguous or non-contiguous intra-band band combination or LTE NR inter-band band combinations where the frequency range of the E UTRA band is a subset of the frequency range of the NR band (as specified in Table 5.5B.4.1-1 of TS 38.101-3 [34]) in NE-DC.
servCellinfoListSCG-NR
Indicates the frequency band indicator, carrier center frequency, UE specific channel bandwidth and SCS of the serving cell(s) in the SCG in intra-band (NG)EN-DC. The field is needed when MN and SN operate serving cells in the same band for either contiguous or non-contiguous intra-band band combination or LTE NR inter-band band combinations where the frequency range of the E-UTRA band is a subset of the frequency range of the NR band (as specified in Table 5.5B.4.1-1 of TS 38.101-3 [34]) in (NG)EN-DC.
transmissionBandwidth-EUTRA
Indicates the transmission bandwidth on an E-UTRA carrier frequency as defined by the parameter Transmission Bandwidth Configuration "NRB" TS 36.104 [33]. The values \( \mathrm{rb} 6, \mathrm{rb} 15, \mathrm{rb} 25, \mathrm{rb} 50, \mathrm{rb} 75, \mathrm{rb} 100 \) indicate \( 6,15,25,50,75 \) and 100 resource blocks respectively.

ETSI


--- Page 1124  ---


3GPP TS 38.331 version 17.0.0 Release 17
1123
ETSI TS 138331 V17.0.0 (2022-05)

ueAssistancelnformationSCG
Includes for each UE assistance feature associated with the SCG, the information last reported by the UE in the NR UEAssistancelnformation message for the SCG, if any.

\begin{tabular}{|l|}
\hline BandCombinationinfoSN field descriptions \\
\hline \begin{tabular}{l}
bandCombinationindex \\
In case of NR-DC, this field indicates the position of a band combination in the supportedBandCombinationList. In case of NE-DC, this field indicates the position of a band combination in the supportedBandCombinationList and/or supportedBandCombinationListNEDC-Only. In case of (NG)EN-DC, this field indicates the position of a band combination in the supportedBandCombinationList and/or supportedBandCombinationList-UplinkTxSwitch. Band combination entries in supportedBandCombinationList are referred by an index which corresponds to the position of a band combination in the supportedBandCombinationList. Band combination entries in supportedBandCombinationListNEDC-Only are referred by an index which corresponds to the position of a band combination in the supportedBandCombinationListNEDC-Only increased by the number of entries in supportedBandCombinationList. Band combination entries in supportedBandCombinationList-UplinkTxSwitch are referred by an index which corresponds to the position of a band combination in the supportedBandCombinationList-UplinkTxSwitch increased by the number of entries in supportedBand Combination List.
\end{tabular} \\
\hline \begin{tabular}{l}
requestedFeatureSets \\
The position in the FeatureSetCombination which identifies one FeatureSetUplinkJownlink for each band entry in the associated band combination
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|c|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline FDD & This field is mandatory present if dl-Freqlnfo-NR is included and concerns an FDD carrier; otherwise the field is absent. \\
\hline
\end{tabular}
- CG-Config/nfo

This message is used by master eNB or gNB to request the SgNB or SeNB to perform certain actions e.g to establish, modify or release an SCG. The message may include additional information e.g. to assist the SgNB or SeNB to set the SCG configuration. It can also be used by a CU to request a DU to perform certain actions, e.g. to establish, or modify an MCG or SCG.

Direction: Master eNB or gNB to secondary gNB or eNB, alternatively CU to DU.
CG-Configinfo message
```
-- ASNISTART
-- TAG-CG-CONFIG-INFO-START
```


CG-ConfigInfo : :=
SEQUENCE 1
CHOICE I
-
=
CHOICE
CG-ConfigInfo-IEs,
sparel NULL
SEQUENCE [\}

EQUENCE 1
MeasResultList2NR
```
    criticalExtensions
        cl
            cg-ConfigInfo CG-ConfigInfo-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
CG-ConfigInfo-IEs ::=
    ue-CapabilityInfo
    candidateCellInfoListMN
    candidateCellInfoListMN
```


OCTET STRING (CONTAINING UE-CapabilityRAT-ContainerList)

OPTIONAL, -- Cond. SN-AddMod.
OPTIONAL,

ETSI


--- Page 1125  ---


3GPP TS 38.331 version 17.0.0 Release 17
1124
ETSI TS 138331 V17.0.0 (2022-05)
```
    candidateCellInfoListSN
OCTET STRING (CONTAINING MeasResultList2NR)
MeasResultCellListSFTD-NR
    measResultCellListSFTD-NR
    scgFailureInfo
        failureType
            SEQUENCE {
    ENUMERATED { t310-Expiry, randomAccessProblem,
                rlc-MaxNumRetx, synchReconfigFailure-SCG,
                        scg-reconfigFailure,
                        srb3-IntegrityFailure},
        measResultSCG
    }
    configRestrictInfo
    drx-InfoMCG
    measConfigMN
    sourceConfigSCG
    scg-RB-Config
    mcg-RB-Config
    mrdc-AssistanceInfo
    nonCriticalExtension
}
CG-ConfigInfo-vl540-IEs ::= SEQUENCE {
    ph-InfoMCG PH-TypeListMCG
    measResultReportCGI
        ssbFrequency
        cellForWhichToReportCGI
        cgi-Info
    }
    nonCriticalExtension CG-ConfigInfo-vl560-IEs
}
CG-ConfigInfo-vl560-IEs ::= SEQUENCE {
    candidateCellInfoListMN-EUTRA OCTET STRING OPTIONAL,
    candidateCellInfoListSN-EUTRA OCTET STRING
    sourceConfigSCG-EUTRA OCTET STRING
    scgfailureInfoEUTRA SEQUENCE {
        failureTypeEUTRA ENUMERATED { t313-Expiry, randomAccessProblem,
                        rlc-MaxNumRetx, scg-ChangeFailure},
        measkesultSCG-EUTRA OCTET STRING
    }
    drx-ConfigMCG DRX-Config
    measResultReportCGI-EUTRA SEQUENCE {
        eutraFrequency ARFCN-ValueEUTRA,
        cellForwhichToReportCGI-EUTRA CUTRA-PhysCellId,
        CGi-InfoEUTRA CGI-InfoEUTRA
    }
    measResultCellListSFTD-EUTRA MeasResultCellListSFTD-EUTRA
    fr-InfolistMCG FR-Infolist
    nonCriticalExtension CG-ConfigInfo-vl570-IEs
}
CG-ConfigInfo-vl570-IEs ::= SEQUENCE {
    sftdFrequencyList-NR SFTD-FrequencyList-NR OPTIONAL,
    sftdFrequencyList-EUTRA SFTD-FrequencyList-EUTRA \textit{ConfigInfo-vl590-IEs OPTIONAL
    nonCriticalExtension CG-ConfigInfo-vl590-IEs
}
```


ETSI


--- Page 1126  ---


3GPP TS 38.331 version 17.0.0 Release 17
1125
ETSI TS 138331 V17.0.0 (2022-05)
```
CG-ConfigInfo-vl590-IEs ::= SEQUENCE {
    servFrequenciesMN-NR SEQUENCE (SIZE (l.. maxNrofServingCells-l)) OF ARFCN-ValueNR OPTIONAL,
    nonCriticalExtension CG-ConfigInfo-vl6l0-IEs OPTIONAL
}
CG-ConfigInfo-vl610-IEs ::= SEQUENCE {
    drx-InfoMCG2 DRX-Info2 OPTIONAL,
    alignedDRX-Indication ENUMERATED {true} OPTIONAL,
    scgFailureInfo-rl6 SEQUENCE {
        failureType-rl6 ENUMERATED | scg-lbtFailure-rl6, beamFailureRecoveryFailure-rl6,
                            t312-Expiry-rl6, oh-RLF-rl6,
                            beamFailure-rl7, spare3, spare2, sparel},
        measResultSCG-rl6 OCTET STRING (CONTAINING MeasResultSCG-Failure)
    }
    OPTIONAL,
        failureTypeEUTRA-r16 ENUMERATED | scg-lbtFailure-rl6, beamFailureRecoveryFailure-rl6,
                            t312-Expiry-rl6, spare5,
                                spare4, spare3, spare2, sparel},
    } measkesultSCG-EUTRA-rl6 OCTET STRING
    SiflONAL,
    OCTET STRING (CONTAINING SidelinkUEInformationNR-rl6) OPTIONAL,
    nonCriticalExtension CG-ConfigInfo-vl620-IEs OPTIONAL
}
CG-ConfigInfo-vl620-IEs ::= SEQUENCE [
    ueAssistanceInformationSourceSCG-rl6 OCTET STRING (CONTAINING UEAssistanceInformation) OPTIONAL,
    nonCriticalExtension CG-ConfigInfo-vl640-IEs OPTIONAL
}
CG-ConfigInfo-vl640-IEs ::= SEQUENCE [
    servCellInfoListMCG-NR-rl6 ServCellInfoListMCG-NR-rl6 OPTIONAL,
    servCellInfoListMCG-EUTRA-r16 ServCellInfoListMCG-EUTRA-r16 OPTIONAL,
    nonCriticalExtension CG-ConfigInfo-vl700-IEs OPTIONAL
}
CG-ConfigInfo-vl700-IEs ::= SEQUENCE \
    candidateCellListCPC-rl7 CandidateCellListCPC-rl7 OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
ServCellInfoListMCG-NR-rl6 ::= SEQUENCE (SIZE (l.. maxNrofServingCells)) OF ServCellInfoXCG-NR-rl6
ServCellInfoListMCG-EUTRA-rl6 := SEQUENCE (SIZE (l.. maxNrofServingCellsEUTRA)) OF ServCellInfoXCG-EUTRA-rl6
SFTD-FrequencyList-NR ::= SEQUENCE (SIZE (1..maxCellSFTD)) OF ARFCN-ValueNR
SFTD-FrequencyList-EUTRA ::= SEQUENCE (SIZE (1..maxCellSFTD)) OF ARFCN-ValueEUTRA
ConfigRestrictInfoSCG ::= SEQUENCE \
    allowedBC-ListMRDC BandCombinationInfoList OPTIONAL,
    powerCoordination-FRl SEQUENCE {
        P-maxNR-FRI P-Max OPTIONAL,
```


ETSI


--- Page 1127  ---


3GPP TS 38.331 version 17.0.0 Release 17
1126
ETSI TS 138331 V17.0.0 (2022-05)
```
        P-maxeUTRA P-Max OPTIONAL,
    }
    servCellIndexRangeSCG SEQUENCE [
        lowBound.
        ServCellIndex,
    ServCellIndex
```

```
    MeasFreqsSCG INTEGER(1..maxMeasFreqsMN)
    ...;
    [ [
    selectedBandEntriesMNList SEQUENCE (SIZE (l..maxBandComb)) OF SelectedBandEntriesMN OPTIONAL,
    pdcch-BlindDetectionSCG INTEGER (1..15) OPTIONAL,
    maxNumberROHC-ContextSessionsSN INTEGER(0.. 16384)
    ]],
    [ [
    maxIntraFreqMeasIdentitiesSCG INTEGER(l..maxMeasIdentitiesMN) OPTIONAL,
    maxInterFreqMeasIdentitiesSCG INTEGER(l..maxMeasIdentitiesMN) OPTIONAL
    ]],
    [ [
    P-maxNR-FRI-MCG-r16 P-Max OPTIONAL,
    powerCoordination-FR2-rl6 SEQUENCE {
        p-maxNR-FR2-MCG-r16 P-Max
        p-maxNR-FR2-SCG-r16 P-Max
        p-maxUE-FR2-rl6 P-Max
    }
    nrde-PC-
    mode-FRl-rl6 ENUMERATED [semi-static-model, semi-static-mode2, dynamic
    maxMeasSRS-ResourceSCG-r16 INTEGER(0..maxNrofCLI-SRS-Resources-r16) OPTIONAL,
    maxMeasCLI-ResourceSCG-r16 INTEGER(O..maxNrofCLI-RSSI-Resources-r16) OPTIONAL,
    maxNumberEHC-ContextsSN-rl6 INTEGER(0..65536) OPTIONAL,
    allowedReducedConfigForOverheating-rl6 OverheatingAssistance OPTIONAL,
    maxToffset-rl6 T-Offset-rl6 OPTIONAL
    ]],
    [ [
    allowedReducedConfigForOverheating-rl7 OverheatingAssistance-rl7 OPTIONAL,
    maxNumberUDC-DRB-rl7 INTEGER(0..2) OPTIONAL,
    maxNumberCPCCandidates-rl7 INTEGER(l..maxNrofCondCells-rl6) OPTIONAL
    ] ]
```

```
}
SelectedBandEntriesMN ::= SEQUENCE (SIZE (l..maxSimultaneousBands)) OF BandEntryIndex
BandEntryIndex ::= INTEGER (O.. maxNrofServingCells)
PH-TypeListMCG ::= SEQUENCE (SIZE (l..maxNrofServingCells)) OF PH-InfoMCG
PH-InfoMCG ::= SEQUENCE [
    servCellIndex ServCellIndex,
    ph-Uplink PH-UplinkCarrierMCG,
    ph-SupplementaryUplink PH-UplinkCarrierMCG OPTIONAL,
    ...
}
```


ETSI


--- Page 1128  ---


3GPP TS 38.331 version 17.0.0 Release 17
1127
ETSI TS 138331 V17.0.0 (2022-05)
```
PH-UplinkCarrierMCG ::= SEQUENCE[
    ph-Typelor3 ENUMERATED {typel, type3},
    ...
}
BandCombinationInfoList ::= SEQUENCE (SIZE (l..maxBandComb)) OF BandCombinationInfo
BandCombinationInfo ::= SEQUENCE \
    bandCombinationIndex
    allowedFeatureSetsList
}
FeatureSetEntryIndex ::= INTEGER (1.. maxFeatureSetsPerBand)
DRX-Info ::= SEQUENCE \
    drx-LongCycleStartOffset
        mslo
        ms20
        ms32 INTEGER(0..31),
        ms40 INTEGER(0..39),
        ms60 INTEGER(0..59),
        ms64 INTEGER(0..63),
        ms70 INTEGER(0..69),
        ms80 INTEGER(0..79),
        msl28 INTEGER(0..127),
        msl60 INTEGER(0.159),
        ms256 ms320 INTEGER(0..255)
        ms320 INTEGER(0.319),
        ms640 INTEGER(0..639),
        msl024 INTEGER(0..1023),
        ms1280 INTEGER(0..1279),
        ms1280 INSE048 INTEGER(0.12047),
        ms2560 INTEGER(0..2559),
        ms5120 INTEGER(0..5119),
        msl0240 INTEGER(0..10239)
        r
    },
    shortDRX SEQUENCE {
        drx-ShortCycle ENUMERATED {
                        ms2, ms3, ms4, ms5, ms6, ms7, ms8, msl0, msl4, msl6, ms20, ms30, ms32,
                        ms35, ms40, ms64, ms80, ms128, ms160, ms256, ms320, ms512, ms640, spare9,
                        spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel },
        drx-ShortCycleTimer INTEGER (1..16)
    }
}
DRX-Info2 ::= SEQUENCE \
    drx-onDurationTimer CHOICE {
            subMilliSeconds INTEGER (l..31),
            milliSeconds ENUMERATED {
                msl, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60,
                ms80, msl00, ms200, ms300, ms400, ms500, ms600, ms800, ms1000, ms1200,
                msl600, spare8, spare7, spare6, spare5, spare4, spare3, spare2, sparel}
```


ETSI


--- Page 1129  ---


3GPP TS 38.331 version 17.0.0 Release 17
1128
ETSI TS 138331 V17.0.0 (2022-05)
```
            }
}
MeasConfigMN ::= SEQUENCE {
    measuredFrequenciesMN
    measGapConfig
    gapPurpose
    ...;
    [ [
    measGapConfigFR2 SetupRelease { GapConfig } OPTIONAL
    ] ]
}
MRDC-AssistanceInfo ::= SEQUENCE {
    affectedCarrierFreqCombInfoListMRDC SEQUENCE (SIZE (l..maxNrofCombIDC)) OF AffectedCarrierFreqCombInfoMRDC,
    ...;
    [ [
    overheatingAssistanceSCG-r16 OCTET STRING (CONTAINING OverheatingAssistance) OPTIONAL
    ]]
}
AffectedCarrierFreqCombInfoMRDC ::= SEQUENCE {
    victimSystemType VictimSystemType,
```

```
    affectedCarrierFreqCombMRDC SEQUENCE \
        affectedCarrierFreqCombEUTRA AffectedCarrierFreqCombEUTRA OPTIONAL,
        affectedCarrierFreqCombNR AffectedCarrierFreqCombNR
    } OPTIONAL
}
VictimSystemType ::= SEQUENCE \
    gps ENUMERATED {true} OPTIONAL,
    glonass ENUMERATED {true} OPTIONAL,
    bds ENUMERATED {true} OPTIONAL,
    galileo ENUMERATED {true} OPTIONAL,
    wlan ENUMERATED {true} OPTIONAL,
    bluetooth ENUMERATED {true} OPTIONAL
}
AffectedCarrierFreqCombEUTRA ::= SEQUENCE (SIZE (1..maxNrofServingCellsEUTRA)) OF ARFCN-ValueEUTRA
AffectedCarrierFreqCombNR ::= SEQUENCE (SIZE (l..maxNrofServingCells)) OF ARFCN-ValueNR
CandidateCellListCPC-rl7 ::= SEQUENCE (SIZE (l..ffsUpperLimit)) OF CandidateCellCPC-rl7 -- FFS
CandidateCellCPC-rl7 ::= SEQUENCE {
    ssbFrequency-rl7 ARFCN-ValueNR,
    candidateCellList-rl7 SEQUENCE (SIZE (l..ffsUpperLimit)) OF PhysCellId -- FFS
}
-- TAG-CG-CONFIG-INFO-STOP
-- ASNISTOP
```


ETSI


--- Page 1130  ---


3GPP TS 38.331 version 17.0.0 Release 17
1129
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline CG-Configinfo field descriptions \\
\hline \begin{tabular}{l}
alignedDRX-indication \\
This field is signalled upon MN triggered CGI reporting by the UE that requires aligned DRX configurations between the MCG and the SCG (i.e. same DRX cycle and onduration configured by MN completely contains on-duration configured by SN).
\end{tabular} \\
\hline \begin{tabular}{l}
allowedBC-ListMRDC \\
A list of indices referring to band combinations in MR-DC capabilities from which SN is allowed to select the SCG band combination. Each entry refers to: \\
- a band combination numbered according to supportedBandCombinationList and supportedBandCombinationList-UplinkTxSwitch in the UE-MRDC-Capability (in case of (NG)EN-DC), or according to supportedBandCombinationList and supportedBandCombinationListNEDC-Only in the UE-MRDC-Capability (in case of NE-DC), or according to supportedBand CombinationList in the UE-NR-Capability (in case of NR-DC), \\
- and the Feature Sets allowed for each band entry. All MR-DC band combinations indicated by this field comprise the MCG band combination, which is a superset of the MCG band(s) selected by MN.
\end{tabular} \\
\hline \begin{tabular}{l}
allowedReducedConfigForOverheating \\
Indicates the reduced configuration that the SCG is allowed to configure. \\
reducedMaxCCs in allowedReducedConfigForOverheating indicates the maximum number of downlink/uplink PSCell/SCells that the SCG is allowed to configure. This field is used in (NG)EN-DC and NR-DC. \\
reducedMaxBW-FR1 and reducedMaxBW-FR2 in allowedReduced ConfigForOverheating indicates the maximum aggregated bandwidth across all downlink/uplink carriers of FR1 and FR2-1, respectively that the SCG is allowed to configure. reducedMaxBW-FR2 in allowedReduced ConfigForOverheating-r17 indicates the maximum aggregated bandwidth across all downlink/uplink carriers of FR2-2 that the SCG is allowed to configure. This field is only used in NR-DC. \\
reducedMaxMIMO-LayersFR1 and reducedMaxMIMO-LayersFR2 in allowedReducedConfigForOverheating indicates the maximum number of downlink/uplink MIMO layers of each serving cell operating on FR1 and FR2-1, respectively that the SCG is allowed to configure. reducedMaxMIMO-LayersFR2-2 in allowedReducedConfigForOverheatingr17 indicates the maximum number of downlink/uplink MIMO layers of each serving cell operating on FR2-2 that the SCG is allowed to configure. This field is only used in NRDC.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateCellinfoListMN, candidateCellinfoListSN \\
Contains information regarding cells that the master node or the source node suggests the target gNB or DU to consider configuring. In case of MN initiated CPA or CPC, the field candidateCellinfoListMN contains information regarding cells that the MN suggests the candidate target secondary node to consider configuring for MN initiated CPA or CPC. \\
For (NG)EN-DC, including CSI-RS measurement results in candidateCelllnfoListMN is not supported in this version of the specification. For NR-DC, including SSB and/or CSIRS measurement results in candidate CellinfoListMN is supported.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateCellinfoListMN-EUTRA, candidateCellinfoListSN-EUTRA \\
Includes the MeasResultList3EUTRA as specified in TS 36.331 [10]. Contains information regarding cells that the master node or the source node suggests the target secondary eNB to consider configuring. These fields are only used in NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
candidateCeIIListCPC \\
Contains information regarding cells that the source secondary node suggests the candidate target secondary node to consider configuring for SN initiated Conditional PSCell Change (CPC).
\end{tabular} \\
\hline \begin{tabular}{l}
configRestrictinfo \\
Includes fields for which SgNB is explicitly indicated to observe a configuration restriction.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-ConfigMCG \\
This field contains the complete DRX configuration of the MCG. This field is only used in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-InfoMCG \\
This field contains the DRX Iong and short cycle configuration of the MCG. This field is used in (NG)EN-DC and NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
drx-InfoMCG2 \\
This field contains the drx-onDurationTimer configuration of the MCG. This field is only used in (NG)EN-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
fr-infoListMCG \\
Contains information of FR information of serving cells that include PCell and SCell(s) configured in MCG.
\end{tabular} \\
\hline \begin{tabular}{l}
dummy, dummy1 \\
These fields are not used in the specification and SN ignores the received value(s).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1131  ---


3GPP TS 38.331 version 17.0.0 Release 17
1130
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
maxinterFreqMeasIdentitiesSCG \\
Indicates the maximum number of allowed measurement identities that the SCG is allowed to configure for inter-frequency measurement. The maximum value for this field is 10. If the field is absent, the SCG is allowed to configure inter-frequency measurements up to the maximum value. This field is only used in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
maxintraFreqMeasidentitiesSCG \\
Indicates the maximum number of allowed measurement identities that the SCG is allowed to configure for intra-frequency measurement on each serving frequency. The maximum value for this field is 9 (in case of (NG)EN-DC or NR-DC) or 10 (in case of NE-DC). If the field is absent, the SCG is allowed to configure intra-frequency measurements up to the maximum value on each serving frequency.
\end{tabular} \\
\hline \begin{tabular}{l}
maxMeasCLI-ResourceSCG \\
Indicates the maximum number of CLIRSSI resources that the SCG is allowed to configure.
\end{tabular} \\
\hline \begin{tabular}{l}
maxMeasFreqsSCG \\
Indicates the maximum number of NR inter-frequency carriers the SN is allowed to configure with PSCell for measurements.
\end{tabular} \\
\hline \begin{tabular}{l}
maxMeasSRS-ResourceSCG \\
Indicates the maximum number of SRS resources that the SCG is allowed to configure for CLI measurement.
\end{tabular} \\
\hline \begin{tabular}{l}
maxNumberCPCCandidates \\
Indicates the maximum numbers of conditional reconfigurations the SN is allowed to configure for SN initiated CPC. \\
Editor's note: This field is added following a working assumption, it can be revisited in next meeting if complications are found.
\end{tabular} \\
\hline \begin{tabular}{l}
maxNumberROHC-ContextSessionsSN \\
Indicates the maximum number of ROHC context sessions allowed to SN terminated bearer, excluding context sessions that leave all headers uncompressed.
\end{tabular} \\
\hline \begin{tabular}{l}
maxNumberEHC-ContextsSN \\
Indicates the maximum number of EHC contexts allowed to the SN terminated bearer. The field indicates the number of contexts in addition to CID = "all zeros", as specified in TS 38.323 [5].
\end{tabular} \\
\hline \begin{tabular}{l}
maxNumberUDC-DRB \\
Indicates the maximum number of UDC DRBs allowed to SN terminated bearer. This field is used in NGEN-DC, NR-DC and NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
maxToffset \\
Indicates the maximum Toffset value the SN is allowed to use for scheduling SCG transmissions (see TS 38.213 [13]). This field is used in NR-DC only when the fields nrdc-PC-mode-FR1-r16 or nrdc-PC-mode-FR2-r16 are set to dynamic. Value \( m s 0 d o t 5 \) corresponds to 0.5 ms , value \( m s 0 d o t 75 \) corresponds to 0.75 ms , value ms 1 corresponds to 1 ms and so on.
\end{tabular} \\
\hline \begin{tabular}{l}
measuredFrequencies \( M N \) \\
Used by MN to indicate a list of frequencies measured by the UE.
\end{tabular} \\
\hline \begin{tabular}{l}
measGapConfig \\
Indicates the FR1 and perUE measurement gap configuration configured by MN.
\end{tabular} \\
\hline \begin{tabular}{l}
measGapConfigFR2 \\
Indicates the FR2 measurement gap configuration configured by MN.
\end{tabular} \\
\hline \begin{tabular}{l}
mcg-RB-Config \\
Contains all of the fields in the IE RadioBearerConfig used in MN, used by the SN to support delta configuration to UE (i.e. when MN does not use full configuration option), for bearer type change between MN terminated bearer with NR PDCP to SN terminated bearer. It is also used to indicate the PDCP duplication related information for MN terminated split bearer (whether duplication is configured and if so, whether it is initially activated) in SN Addition/Modification procedure. Otherwise, this field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultReportCGI, measResultReportCGI-EUTRA \\
Used by MN to provide SN with CGI-Info for the cell as per SN's request. In this version of the specification, the measResultReportCG/is used for (NG)EN-DC and NR-DC and the measResultReportCG/-EUTRA is used only for NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
measResuitSCG-EUTRA \\
This field includes the MeasResultSCG-FailureMRDC IE as specified in TS 36.331 [10]. This field is only used in NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
measResultSFTD-EUTRA \\
SFTD measurement results between the PCell and the E-UTRA PScell in NE-DC. This field is only used in NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
mrdc-Assistanceinfo \\
Contains the IDC assistance information for MR-DC reported by the UE (see TS 36.331 [10]).
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1132  ---


3GPP TS 38.331 version 17.0.0 Release 17
1131
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
nrdc-PC-mode-FR1 \\
Indicates the uplink power sharing mode that the UE uses in NR-DC FR1 (see TS 38.213 [13], clause 7.6).
\end{tabular} \\
\hline \begin{tabular}{l}
nrdc-PC-mode-FR2 \\
Indicates the uplink power sharing mode that the UE uses in NR-DC FR2 (see TS 38.213 [13], clause 7.6).
\end{tabular} \\
\hline \begin{tabular}{l}
overheatingAssistanceSCG \\
Contains the UE's preference on reduced configuration for NR SCG to address overheating. This field is only used in (NG)EN-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
p-maxEUTRA \\
Indicates the maximum total transmit power to be used by the UE in the E-UTRA cell group (see TS 36.104 [33]). This field is used in (NG)EN-DC and NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
p-maxNR-FR1 \\
Indicates the maximum total transmit power to be used by the UE in the NR cell group across all serving cells in frequency range 1 (FR1) (see TS 38.104 [12]). The field is used in (NG)EN-DC and NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
p-maxUE-FR1 \\
Indicates the maximum total transmit power to be used by the UE across all serving cells in frequency range 1 (FR1).
\end{tabular} \\
\hline \begin{tabular}{l}
p-maxNR-FR1-MCG \\
Indicates the maximum total transmit power to be used by the UE in the NR cell group across all serving cells in frequency range 1 (FR1) (see TS 38.104 [12]) the UE can use in NR MCG. This field is only used in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
p-maxNR-FR2-SCG \\
Indicates the maximum total transmit power to be used by the UE in the NR cell group across all serving cells in frequency range 2 (FR2) (see TS 38.104 [12]) the UE can use in NR SCG.
\end{tabular} \\
\hline \begin{tabular}{l}
p-maxUE-FR2 \\
Indicates the maximum total transmit power to be used by the UE across all serving cells in frequency range 2 (FR2).
\end{tabular} \\
\hline \begin{tabular}{l}
p-maxNR-FR2-MCG \\
Indicates the maximum total transmit power to be used by the UE in the NR cell group across all serving cells in frequency range 2 (FR2) (see TS 38.104 [12]) the UE can use in NR MCG.
\end{tabular} \\
\hline \begin{tabular}{l}
pdcch-BlindDetectionSCG \\
Indicates the maximum value of the reference number of cells for PDCCH blind detection allowed to be configured for the SCG.
\end{tabular} \\
\hline \begin{tabular}{l}
ph-infoMCG \\
Power headroom information in MCG that is needed in the reception of PHR MAC CE in SCG.
\end{tabular} \\
\hline \begin{tabular}{l}
ph-SupplementaryUplink \\
Power headroom information for supplementary uplink. For UE in (NG)EN-DC, this field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
ph-Type1or3 \\
Type of power headroom for a serving cell in MCG (PCell and activated SCells). type1 refers to type 1 power headroom, type3 refers to type 3 power headroom. (See TS 38.321 [3]).
\end{tabular} \\
\hline \begin{tabular}{l}
ph-Uplink \\
Power headroom information for uplink.
\end{tabular} \\
\hline \begin{tabular}{l}
powerCoordination-FR1 \\
Indicates the maximum power that the UE can use in FR1.
\end{tabular} \\
\hline \begin{tabular}{l}
powerCoordination-FR2 \\
Indicates the maximum power that the UE can use in frequency range 2 (FR2). This field is only used in NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
scgFailureinfo \\
Contains SCG failure type and measurement results. In case the sender has no measurement results available, the sender may include one empty entry (i.e. without any optional fields present) in measResultPerMOList. This field is used in (NG)EN-DC and NR-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
scg-RB-Config \\
Contains all of the fields in the IE RadioBearerConfig used in SN, used to allow the target SN to use delta configuration to the UE, e.g. during SN change. The field is signalled upon change of SN unless MN uses full configuration option. Otherwise, the field is absent.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1133  ---


3GPP TS 38.331 version 17.0.0 Release 17
1132
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline \begin{tabular}{l}
selectedBandEntriesM/NList \\
A list of indices referring to the position of a band entry selected by the MN, in each band combination entry in allowedBC-ListMRDC IE. BandEntrylndex 0 identifies the first band in the bandList of the BandCombination, BandEntrylndex 1 identifies the second band in the bandList of the BandCombination, and so on. This selectedBandEntriesMNList includes the same number of entries, and listed in the same order as in allowedBC-ListMRDC. The SN uses this information to determine which bands out of the NR band combinations in allowedBC-ListMRDC it can configure in SCG in NR-DC. The SN can use this information to determine for which band pair(s) it should check SimultaneousRxTxPerBandPair.
\end{tabular} \\
\hline \begin{tabular}{l}
servCellindexRangeSCG \\
Range of serving cell indices that SN is allowed to configure for SCG serving cells.
\end{tabular} \\
\hline \begin{tabular}{l}
servCellinfoListMCG-EUTRA \\
Indicates the carrier frequency and the transmission bandwidth of the serving cell(s) in the MCG in intra-band (NG)EN-DC. The field is needed when MN and SN operate serving cells in the same band for either contiguous or non-contiguous intra-band band combination or LTE NR inter-band band combinations where the frequency range of the E-UTRA band is a subset of the frequency range of the NR band (as specified in Table 5.5B.4.1-1 of TS 38.101-3 [34]) in (NG)EN-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
servCellinfoListMCG-NR \\
Indicates the frequency band indicator, carrier center frequency, UE specific channel bandwidth and SCS of the serving cell(s) in the MCG in intra-band NE-DC. The field is needed when MN and SN operate serving cells in the same band for either contiguous or non-contiguous intra-band band combination or LTE NR inter-band band combinations where the frequency range of the E-UTRA band is a subset of the frequency range of the NR band (as specified in Table 5.5B.4.1-1 of TS 38.101-3 [34]) in NEDC .
\end{tabular} \\
\hline \begin{tabular}{l}
servFrequenciesMN-NR \\
Indicates the frequency of all serving cells that include PCell and SCell(s) with SSB configured in MCG. This field is only used in NR-DC. servFrequenciesMN-NR indicates absoluteFrequencySSB.
\end{tabular} \\
\hline \begin{tabular}{l}
sftdFrequencyList-NR \\
Includes a list of SSB frequencies. Each entry identifies the SSB frequency of a PSCell, which corresponds to one MeasResultCellSFTD-NR entry in the \\
MeasResultCellListSFTD-NR.
\end{tabular} \\
\hline \begin{tabular}{l}
sftdFrequencyList-EUTRA \\
Includes a list of E-UTRA frequencies. Each entry identifies the carrier frequency of a PSCell, which corresponds to one MeasResultSFTD-EUTRA entry in the MeasResultCellListSFTD-EUTRA.
\end{tabular} \\
\hline \begin{tabular}{l}
sidelinkUEinformationEUTRA \\
This field contains the E-UTRA SidelinkUE/nformation message as specified in TS 36.331 [10].
\end{tabular} \\
\hline \begin{tabular}{l}
sidelinkUEInformationNR \\
This field contains the NR SidelinkUE/nformationNR message.
\end{tabular} \\
\hline \begin{tabular}{l}
sourceConfigSCG \\
Includes all of the current SCG configurations used by the target SN to build delta configuration to be sent to UE, e.g. during SN change. The field contains the RRCReconfiguration message, i.e. including secondaryCellGroup and measConfig. The field is signalled upon change of SN, unless MN uses full configuration option. \\
Otherwise, the field is absent.
\end{tabular} \\
\hline \begin{tabular}{l}
sourceConfigSCG-EUTRA \\
Includes the E-UTRA RRCConnectionReconfiguration message as specified in TS 36.331 [10]. In this version of the specification, the E-UTRA RRC message can only include the field scg-Configuration. In this version of the specification, this field is absent when master gNB uses full configuration option. This field is only used in NE-DC.
\end{tabular} \\
\hline \begin{tabular}{l}
ueAssistanceinformationSourceSCG \\
Includes for each UE assistance feature associated with the SCG, the information last reported by the UE in the NR UEAssistancelnformation message for the source SCG, if any.
\end{tabular} \\
\hline \begin{tabular}{l}
ue-Capabilityinfo \\
Contains the IE UE-CapabilityRAT-ContainerList supported by the UE (see NOTE 3). A gNB that retrieves MRDC related capability containers ensures that the set of included MRDC containers is consistent w.r.t. the feature set related information.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1134  ---


3GPP TS 38.331 version 17.0.0 Release 17
1133
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline BandCombinationinfo field descriptions \\
\hline \begin{tabular}{l}
allowedFeatureSetsList \\
Defines a subset of the entries in a FeatureSetCombination. Each index identifies a position in the FeatureSetCombination, which corresponds to one \\
FeatureSetUplink/Downlink for each band entry in the associated band combination.
\end{tabular} \\
\hline \begin{tabular}{l}
bandCombinationindex \\
In case of NR-DC, this field indicates the position of a band combination in the supportedBandCombinationList. In case of NE-DC, this field indicates the position of a band combination in the supportedBandCombinationList and/or supportedBandCombinationListNEDC-Only. In case of (NG)EN-DC, this field indicates the position of a band combination in the supportedBandCombinationList and/or supportedBandCombinationList-UplinkTxSwitch. Band combination entries in supportedBandCombinationList are referred by an index which corresponds to the position of a band combination in the supportedBandCombinationList. Band combination entries in supportedBandCombinationListNEDC-Only are referred by an index which corresponds to the position of a band combination in the supportedBandCombinationListNEDC-Only increased by the number of entries in supportedBandCombinationList. Band combination entries in supportedBandCombinationList-UplinkTxSwitch are referred by an index which corresponds to the position of a band combination in the supportedBandCombinationList-UplinkTxSwitch increased by the number of entries in supportedBand Combination List.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|l|}
\hline Conditional Presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline SN-AddMod & \begin{tabular}{l} 
The field is mandatory present upon SN addition and SN change. It is optionally present upon SN modification and inter-MN handover \\
without SN change. Otherwise, the field is absent.
\end{tabular} \\
\hline
\end{tabular}

\begin{table}
\captionsetup{labelformat=empty}
\caption{NOTE 3: The following table indicates per MN RAT and SNRAT whether RAT capabilities are included or not in ue-CapabilityInfo.}
\begin{tabular}{|l|l|l|l|l|}
\hline MN RAT & SN RAT & NR capabilities & E-UTRA capabilities & MR-DC capabilities \\
\hline E-UTRA & NR & Need not be included if the UE Radio Capability ID as specified in 23.502 [43] is used. Included otherwise & Not included & Need not be included if the UE Radio Capability ID as specified in 23.502 [43] is used. Included otherwise \\
\hline NR & E-UTRA & Not included & Need not be included if the UE Radio Capability ID as specified in 23.502 [43] is used. Included otherwise & Need not be included if the UE Radio Capability ID as specified in 23.502 [43] is used. Included otherwise \\
\hline NR & NR & Need not be included if the UE Radio Capability ID as specified in 23.502 [43] is used. Included otherwise & Not included & Not included \\
\hline
\end{tabular}
\end{table}
- MeasurementTimingConfiguration

The MeasurementTimingConfiguration message is used to convey assistance information for measurement timing.
Direction: en-gNB to eNB, eNB to en-gNB, gNB to gNB, ng-eNB to gNB, gNB to ng-eNB, ng-eNB to ng-eNB, gNB DU to gNB CU, and gNB CU to gNB DU.
MeasurementTimingConfiguration message

-- ASNISTART
ETSI


--- Page 1135  ---


3GPP TS 38.331 version 17.0.0 Release 17
1134
ETSI TS 138331 V17.0.0 (2022-05)
```
-- TAG-MEASUREMENT-TIMING-CONFIGURATION-START
MeasurementTimingConfiguration ::= SEQUENCE \
    criticalExtensions CHOICE {
        cl CHOICEl
            measTimingConf MeasurementTimingConfiguration-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalextensionsFuture SEQUENCE {}
    }
}
MeasurementTimingConfiguration-IEs ::= SEQUENCE {
    measTiming MeasTimingList
    nonCriticalExtension MeasurementTimingConfiguration-vl550-IEs OPTIONAL
}
MeasurementTimingConfiguration-vl550-IEs ::= SEQUENCE {
    campOnFirstSSB BOOLEAN,
    psCellOnlyOnFirstSSB BOOLEAN,
    nonCriticalExtension MeasurementTimingConfiguration-vl6l0-IEs OPTIONAL
}
MeasurementTimingConfiguration-vl6l0-IEs ::= SEQUENCE {
    csi-RS-Config-rl6 SEQUENCE \
        csi-RS-SubcarrierSpacing-r16 SubcarrierSpacing,
        csi-RS-CellMobility-rl6 CSI-RS-CellMobility,
        refSSBFreq-r16 ARFCN-ValueNR
    },
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
MeasTimingList ::= SEQUENCE (SIZE (1..maxMeasFreqsMN)) OF MeasTiming
MeasTiming ::= SEQUENCE \
    frequencyAndTiming SEQUENCE \
        carrierFreq ARFCN-ValueNR,
        ssbSubcarrierSpacing SubcarrierSpacing,
        ssb-MeasurementTimingConfiguration SSB-MTC,
        ss-RSSI-Measurement SS-RSSI-Measurement
    }
    [ [
    ssb-ToMeasure SSB-ToMeasure OPTIONAL,
    physCellId PhysCellId OPTIONAL
    ] ]
}
-- TAG-MEASUREMENT-TIMING-CONFIGURATION-STOP
-- ASNISTOP
```


ETSI


--- Page 1136  ---


3GPP TS 38.331 version 17.0.0 Release 17
1135
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|}
\hline MeasTiming field descriptions \\
\hline \begin{tabular}{l}
carrierFreq, ssbSubcarrierSpacing \\
Indicates the frequency and subcarrier spacing of the SS block of the cell for which this message is included, or of other SS blocks within the same carrier.
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-MeasurementTimingConfiguration \\
Indicates the SMTC which can be used to search for SSB of the cell for which the message is included. When the message is included in "Served NR Cell Information" (see TS 36.423 [37]), "Served Cell Information NR" (see TS 38.423 [35]), or "Served Cell Information" (see TS 38.473 [36]), the timing is based on the cell for which the message is included. When the message is included in "NR Neighbour Information" (see TS 36.423 [37]), or "Served Cell Information" (see TS 38.423 [35]), the timing is based on the cell indicated in the "Served NR Cell Information" or "Served Cell Information NR" with which the "NR Neighbour Information" or "Neighbour Information NR" is provided. When the message is included in "CU to DU RRC Information", the timing is based on the cell indicated by SpCell ID with which the message is included.
\end{tabular} \\
\hline \begin{tabular}{l}
ss-RSSI-Measurement \\
Provides the configuration which can be used for RSSI measurements of the cell for which the message is included.
\end{tabular} \\
\hline
\end{tabular}

\begin{tabular}{|l|}
\hline MeasurementTimingConfiguration field descriptions \\
\hline \begin{tabular}{l}
campOnFirstSSB \\
Value true indicates that the SSB indicated in the first instance of MeasTiming in the measTiming list can be used for camping and for a PCell configuration (i.e. in spCellConfigCommon of the masterCellGroup).
\end{tabular} \\
\hline \begin{tabular}{l}
csi-RS-CellMobility \\
Indicates the CSI-RS configuration of the cell for which this message is included. The timing of the CSI-RS resources is based on the SSB indicated by refSSBFreq.
\end{tabular} \\
\hline \begin{tabular}{l}
csi-RS-SubcarrierSpacing \\
Indicates the subcarrier spacing of the CSI-RS resources included in csi-rs-CellMobility.
\end{tabular} \\
\hline \begin{tabular}{l}
measTiming \\
A list of SMTC information, SSB RSSI measurement information and associated NR frequency exchanged via EN-DC X2 Setup, EN-DC Configuration Update, Xn Setup and NG-RAN Node Configuration Update procedures, or F1 messages between gNB DU and gNB CU.
\end{tabular} \\
\hline \begin{tabular}{l}
physCellld \\
Physical Cell Identity of the SSB on the ARFCN indicated by carrierFreq.
\end{tabular} \\
\hline \begin{tabular}{l}
psCellOnlyOnFirstSSB \\
Value true indicates that only the SSB indicated in the first instance of MeasTiming in the measTiming list can be used for a PSCell configuration (i.e. in spCellConfigCommon of the secondaryCellGroup).
\end{tabular} \\
\hline \begin{tabular}{l}
ssb-ToMeasure \\
The set of SS blocks to be measured within the SMTC measurement duration (see TS 38.215 [9]).
\end{tabular} \\
\hline
\end{tabular}
- UERadioPagingInformation

This message is used to transfer radio paging information, covering both upload to and download from the 5GC, and between gNBs.
Direction: gNB to/ from 5 GC and gNB to/from gNB
UERadioPagingInformation message
-- ASNISTART
-- TAG-UE-RADIO-PAGING-INFORMATION-START

UERadioPagingInformation ::= SEQUENCE [
criticalextensions CHOICE [
cl CHOICEl

ETSI


--- Page 1137  ---


3GPP TS 38.331 version 17.0.0 Release 17
1136
ETSI TS 138331 V17.0.0 (2022-05)
```
            ueRadioPagingInformation UERadioPagingInformation-IEs,
            spare7 NULL,
            spare6 NULL, spare5 NULL, spare4 NULL,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
UERadioPagingInformation-IEs ::= SEQUENCE {
    supportedBandListNRForPaging SEQUENCE (SIZE (1..maxBands)) OF FreqBandIndicatorNR OPTIONAL,
    nonCriticalExtension UERadioPagingInformation-vl5e0-IEs OPTIONAL
}
UERadioPagingInformation-vl5e0-IEs := SEQUENCE {
    dl-SchedulingOffset-PDSCH-TypeA-FDD-FRI ENUMERATED {supported} OPTIONAL,
    dl-SchedulingOffset-PDSCH-TypeA-TDD-FRI ENUMERATED {supported} OPTIONAL,
    dl-SchedulingOffset-PDSCH-TypeA-TDD-FR2 ENUMERATED {supported} OPTIONAL,
    dl-SchedulingOffset-PDSCH-TypeB-FDD-FRI ENUMERATED {supported} OPTIONAL,
    dl-SchedulingOffset-PDSCH-TypeB-TDD-FRI ENUMERATED {supported} OPTIONAL,
    dl-SchedulingOffset-PDSCH-TypeB-TDD-FR2 ENUMERATED {supported} OPTIONAL,
    nonCriticalExtension UERadioPagingInformation-vl700-IEs OPTIONAL
}
UERadioPagingInformation-vl700-IEs ::= SEQUENCE {
    inactiveStatePO-Determination-rl7 ENUMERATED {supported} OPTIONAL,
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
-- TAG-UE-RADIO-PAGING-INFORMATION-STOP
-- ASNISTOP
```


\begin{tabular}{|l|}
\hline UERadioPaginginformation field descriptions \\
\hline \begin{tabular}{l}
supportedBandListNRForPaging \\
Indicates the UE supported NR frequency bands which are derived by the gNB from UE-NR-Capability.
\end{tabular} \\
\hline \begin{tabular}{l}
di-SchedulingOffset-PDSCH-TypeA-FDD-FR1 \\
Indicates whether the UE supports DL scheduling slot offset ( K 0 ) greater than 0 for PDSCH mapping type A in FDD FR1.
\end{tabular} \\
\hline \begin{tabular}{l}
di-SchedulingOffset-PDSCH-TypeA-TDD-FR1 \\
Indicates whether the UE supports DL scheduling slot offset ( K 0 ) greater than 0 for PDSCH mapping type A in TDD FR1.
\end{tabular} \\
\hline \begin{tabular}{l}
di-SchedulingOffset-PDSCH-TypeA-TDD-FR2 \\
Indicates whether the UE supports DL scheduling slot offset ( K 0 ) greater than 0 for PDSCH mapping type A in TDD FR2.
\end{tabular} \\
\hline \begin{tabular}{l}
dI-SchedulingOffset-PDSCH-TypeB-FDD-FR1 \\
Indicates whether the UE supports DL scheduling slot offset ( KO ) greater than 0 for PDSCH mapping type B in FDD FR1.
\end{tabular} \\
\hline \begin{tabular}{l}
di-SchedulingOffset-PDSCH-TypeB-TDD-FR1 \\
Indicates whether the UE supports DL scheduling slot offset ( KO ) greater than 0 for PDSCH mapping type B in TDD FR1.
\end{tabular} \\
\hline \begin{tabular}{l}
di-SchedulingOffset-PDSCH-TypeB-TDD-FR2 \\
Indicates whether the UE supports DL scheduling slot offset ( KO ) greater than 0 for PDSCH mapping type B in TDD FR2.
\end{tabular} \\
\hline \begin{tabular}{l}
inactiveStatePO-Determination \\
Indicates whether the UE supports to use the same i_s to determine PO in RRC_INACTIVE state as in RRC_IDLE state.
\end{tabular} \\
\hline
\end{tabular}

ETSI


--- Page 1138  ---


3GPP TS 38.331 version 17.0.0 Release 17
1137
ETSI TS 138331 V17.0.0 (2022-05)
- UERadioAccessCapabilityInformation

This message is used to transfer UE radio access capability information, covering both upload to and download from the 5GC.
Direction: ng-eNB or gNB to/ from 5GC
UERadioAccessCapabilityInformation message
```
-- ASNISTART
-- TAG-UE-RADIO-ACCESS-CAPABILITY-INFORMATION-START
UERadioAccessCapabilityInformation ::= SEQUENCE {
    criticalExtensions CHOICE \
        cl CHOICEl
            ueRadioAccessCapabilityInformation UERadioAccessCapabilityInformation-IEs,
            spare7 NULL,
            spare6 NULL, spare5 NULL, spare4 NULL,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
UERadioAccessCapabilityInformation-IEs ::= SEQUENCE {
    ue-RadioAccessCapabilityInfo OCTET STRING (CONTAINING UE-CapabilityRAT-ContainerList),
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
-- TAG-UE-RADIO-ACCESS-CAPABILITY-INFORMATION-STOP
-- ASNISTOP
```


UERadioAccessCapabilitylnformation-IEs field descriptions
ue-RadioAccessCapabilityinfo
Including NR, MR-DC, E-UTRA radio access capabilities. A gNB that retrieves MRDC related capability containers ensures that the set of included MRDC containers is consistent w.r.t. the feature set related information.
11.2.3 Mandatory information in inter-node RRC messages

For the AS-Config transferred within the HandoverPreparationInformation:
- The source node shall include all fields necessary to reflect the current AS configuration of the UE, except for the fields sourceSCG-NR-Config, sourceSCG-EUTRAConfig and sourceRB-SN-Config, which can be omitted in case the source MN did not receive the latest configuration from the source SN . For \( R R C R e c o n f i g u r a t i o n \) included in the field rrcReconfiguration, ReconfigurationWithSync is included with only the mandatory subfields (e.g. newUE-Identity and \( t 304 \) ) and ServingCellConfigCommon;

ETSI


--- Page 1139  ---


3GPP TS 38.331 version 17.0.0 Release 17
1138
ETSI TS 138331 V17.0.0 (2022-05)
- Need codes or conditions specified for subfields according to IEs defined in clause 6 do not apply. Le. some fields shall be included regardless of the "Need" or "Cond" e.g. discardTimer;
- Based on the received AS configuration, the target node can indicate the delta (difference) to the current AS configuration (as included in HandoverCommand) to the UE. The fields newUE-Identity and \( t 304 \) included in ReconfigurationWithSync are not used for delta configuration purpose.

The candidateCellInfoListSN(-EUTRA) in CG-Config and the candidateCellInfoListMN(-EUTRA)/candidateCellInfoListSN(-EUTRA) in CG-ConfigInfo need not be included in procedures that do not involve a change of node.

For fields scg-CellGroupConfig, scg-CellGroupConfigEUTRA and scg-RB-Config in CG-Config (sent upon SN initiated SN change or other conditions as specified in field descriptions) and fields mcg-RB-Config, scg-RB-Config and sourceConfigSCG in CG-ConfigInfo (sent upon change of SN):
- The source node shall include all fields necessary to reflect the current AS configuration of the UE, unless stated otherwise in the field description. For RRCReconfiguration included in the field scg-CellGroupConfig in CG-Config, ReconfigurationWithSync is included with only the mandatory subfields (e.g. newUEIdentity and \( t 304 \) ) and ServingCellConfigCommon;
- Need codes or conditions specified for subfields according to IEs defined in clause 6 do not apply;
- Based on the received AS configuration, the target node can indicate the delta (difference) as compared to the current AS configuration to the UE. The fields newUEIdentity and 304 in ReconfigurationWithSync are always included by the target node, i.e. they are not used for delta configuration purpose to UE.

For fields in CG-Config and CG-ConfigInfo listed below, absence of the field means that the receiver maintains the values informed via the previous message. Note that every time there is a change in the configuration covered by a listed field, the MN or SN shall include the field and it shall provide the full configuration provided by that field unless stated otherwise. Otherwise, if there is no change, the field can be omitted:
- configRestrictInfo;
- gapPurpose;
- measGapConfig (for which delta signaling applies);
- measGapConfigFR2 (for which delta signaling applies);
- measResultCellListSFTD;
- measResultSFTD-EUTRA;
- sftdFrequencyList-EUTRA;
- sftdFrequencyList-NR;
- ue-CapabilityInfo,
- servFrequenciesMN-NR.

For other fields in CG-Config and CG-ConfigInfo, the sender shall always signal the appropriate value even if same as indicated in the previous inter-node message, unless explicitly stated otherwise.

ETSI


--- Page 1140  ---


3GPP TS 38.331 version 17.0.0 Release 17
1139
ETSI TS 138331 V17.0.0 (2022-05)
11.3 Inter-node RRC information element definitions
11.4 Inter-node RRC multiplicity and type constraint values
- Multiplicity and type constraints definitions
-- ASNISTART
-- TAG-NR-MOLTIPLICITY-AND-CONSTRAINTS-START
maxMeasFreqsMN INTEGER ::= 32 -- Maximum number of MN-configured measurement frequencies
maxMeasFreqsSN INTEGER ::= 32 -- Maximum number of SN-configured measurement frequencies
maxMeasIdentitiesMN
maxCellPrep
INTEGER : := 62 -- Maximum number of measurement identities that a UE can be configured with
INTEGER : := 32 -- Maximum number of cells prepared for handover
-- TAG-NR-MOLTIPLICITY-AND-CONSTRAINTS-STOP
-- ASNISTOP
- End of NR-InterNodeDefinitions
-- ASNISTART
-- TAG-NR-INTER-NODE-DEFINITIONS-END-START
END
-- TAG-NR-INTER-NODE-DEFINITIONS-END-STOP
-- ASNISTOP

ETSI


--- Page 1141  ---


3GPP TS 38.331 version 17.0.0 Release 17
1140
ETSI TS 138331 V17.0.0 (2022-05)

12 Processing delay requirements for RRC procedures
The UE performance requirements for RRC procedures are specified in the following tables. The performance requirement is expressed as the time in [ ms ] from the end of reception of the network - \( > \) UE message on the UE physical layer up to when the UE shall be ready for the reception of uplink grant for the UE -> network response message with no access delay other than the TTI-alignment (e.g. excluding delays caused by scheduling, the random access procedure or physical layer synchronisation). In case the RRC procedure triggers BWP switching, the RRC procedure delay is the value defined in the following table plus the BWP switching delay defined in TS 38.133[14], clause 8.6.3.

Figure 12.1-1: Illustration of RRC procedure delay

ETSI


--- Page 1142  ---


3GPP TS 38.331 version 17.0.0 Release 17
1141
ETSI TS 138331 V17.0.0 (2022-05)

Table 12.1-1: UE performance requirements for RRC procedures for UEs

ETSI


--- Page 1143  ---


3GPP TS 38.331 version 17.0.0 Release 17
1142
ETSITS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|}
\hline Procedure title: & Network -> UE & UE -> Network & Value [ms] & Notes \\
\hline \multicolumn{5}{|l|}{RRC Connection Control Procedures} \\
\hline RRC reconfiguration & RRCReconfiguration & RRCReconfiguration Complete & 10 & \\
\hline RRC reconfiguration (scell addition/release) & RRCReconfiguration & RRCReconfiguration Complete & 16 & \\
\hline RRC reconfiguration (LTE/NR SCG establishment/ modification/ release) & RRCReconfiguration & RRCReconfiguration Complete & 16 & \\
\hline RRC reconfiguration (Intra-NR mobility with LTE/NR SCG establishment/ modification/ release) & RRCReconfiguration & RRCReconfiguration Complete & 16 & \\
\hline RRC reconfiguration & DLDedicatedMessage Segment & RRCReconfiguration Complete & 16+( Nseg -1)*10 & Nseg is number of RRC segments \\
\hline RRC setup & RRCSetup & RRCSetupComplete & 10 & \\
\hline RRC Release & RRCRelease & & NA & \\
\hline RRC re-establishment & RRCReestablishment & RRCReestablishmentComplete & 10 & \\
\hline
\end{tabular}

ETSI


--- Page 1144  ---


3GPP TS 38.331 version 17.0.0 Release 17
1143
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|}
\hline Procedure title: & Network -> UE & UE -> Network & Value [ms] & Notes \\
\hline RRC resume & RRCResume & RRCResumeComplete & 6 or 10 & \begin{tabular}{l}
Value=6 applies for a UE supporting reduced CP latency for the case of RRCResume message only including MAC and PHY configuration, reestablishPDCP and reestablishRLC for SRB2, multicast \( \mathrm{MRB}(\mathrm{s}) \) and \( \mathrm{DRB}(\mathrm{s}) \), and no DRX, SPS, configured grant, CA or MIMO reconfiguration will be triggered by this message. Further, the UL grant for transmission of RRCResumeComplet \( e \) and the data is transmitted over common search space with DCI format \( 0 \_0 \). In this scenario, the RRC procedure delay [ms] can extend beyond the reception of the UL grant, up to 7 ms . \\
For other cases, Value \( =10 \) applies.
\end{tabular} \\
\hline RRC resume (MCG SCell addition/restoration/release) & RRCResume & RRCResumeComplete & 16 & \\
\hline RRC resume (SCG establishment/ restoration/release) & RRCResume & RRCResumeComplete & 16 & \\
\hline RRC resume & DLDedicatedMessage Segment & RRCResumeComplete & 16+( Nseg -1)*10 & Nseg is number of RRC segments \\
\hline Initial AS security activation & SecurityModeComman d & SecurityModeComplete/Security ModeFailure & 5 & \\
\hline \multicolumn{5}{|l|}{Inter RAT mobility} \\
\hline
\end{tabular}

ETSI


--- Page 1145  ---


3GPP TS 38.331 version 17.0.0 Release 17
1144
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|}
\hline Procedure title: & Network -> UE & UE -> Network & Value [ms] & Notes \\
\hline Handover to NR & RRCReconfiguration (sent by other RAT) & RRCReconfiguration Complete & NA & The performance of this procedure is specified in TS 36.133 [40] clauses 5.3.4.2, 5.3.4A.2 and 5.3.5.2 in case of handover from E-UTRA to NR. \\
\hline Handover from NR & MobilityFromNRComm and & & NA & The performance of this procedure is specified in TS 38.133 [14], clauses 6.1.2.1.2 and 6.1.2.2.2. \\
\hline \multicolumn{5}{|l|}{Other procedures} \\
\hline UE assistance information & & UEAssistancelnformation & NA & \\
\hline UE capability transfer & UECapabilityEnquiry & UECapabilitylnformation & 80 & \\
\hline Counter check & CounterCheck & CounterCheckResponse & 5 & \\
\hline UE information & UEInformationRequest & UE/nformationResponse & 15 & \\
\hline DL Information transfer MR-DC & DLInformationTransfer MRDC & & NA & The UE shall apply the performance requirements of the RRC message included within the DLInformationTransfer MRDC message. \\
\hline IAB other information & & IABOtherinformation & NA & \\
\hline Sidelink UE information & & SidelinkUEInformationNR & NA & \\
\hline
\end{tabular}

ETSI


--- Page 1146  ---


3GPP TS 38.331 version 17.0.0 Release 17
1145
ETSI TS 138331 V17.0.0 (2022-05)

Annex A (informative): Guidelines, mainly on use of ASN. 1
A. 1 Introduction

The following clauses contain guidelines for the specification of RRC protocol data units (PDUs) with ASN.1.
A. 2 Procedural specification
A.2.1 General principles

The procedural specification provides an overall high level description regarding the UE behaviour in a particular scenario.
It should be noted that most of the UE behaviour associated with the reception of a particular field is covered by the applicable parts of the PDU specification. The procedural specification may also include specific details of the UE behaviour upon reception of a field, but typically this should be done only for cases that are not easy to capture in the PDU clause e.g. general actions, more complicated actions depending on the value of multiple fields.

Likewise, the procedural specification need not specify the UE requirements regarding the setting of fields within the messages that are sent to the network i.e. this may also be covered by the PDU specification.
A.2.2 More detailed aspects

The following more detailed conventions should be used:
- Bullets:
- Capitals should be used in the same manner as in other parts of the procedural text i.e in most cases no capital applies since the bullets are part of the sentence starting with 'The UE shall:'
- All bullets, including the last one in a clause, should end with a semi-colon i.e. an ';-
- Conditions:
- Whenever multiple conditions apply, a semi-colon should be used at the end of each conditions with the exception of the last one, i.e. as in 'if cond1, or cond2.

ETSI


--- Page 1147  ---


3GPP TS 38.331 version 17.0.0 Release 17
1146
ETSI TS 138331 V17.0.0 (2022-05)
A. 3 PDU specification
A.3.1 General principles
A.3.1.1 ASN.1 clauses

The RRC PDU contents are formally and completely described using abstract syntax notation (ASN.1), see X. 680 [6], X.681 [7].
The complete ASN. 1 code is divided into a number of ASN. 1 clauses in the specifications. In order to facilitate the extraction of the complete ASN. 1 code from the specification, each ASN. 1 clause begins with the following:
- a first text paragraph consisting entirely of an ASN.I start tag, which consists of a double hyphen followed by a single space and the text string "ASN1START" (in all upper case letters);
- a second text paragraph consisting entirely of a block start tag is included, which consists of a double hyphen followed by a single space and the text string "TAG-NAME-START" (in all upper case letters), where the "NAME" refers to the main name of the paragraph (in all upper-case letters).

Similarly, each ASN-1 clause ends with the following:
- a first text paragraph consisting entirely of a blockstop tag, which consists of a double hyphen followed by a single space and the text string "TAG-NAME-STOP" (in all upper-case letters), where the "NAME" refers to the main name of the paragraph (in all upper-case letters);
- a second text paragraph consisting entirely of an ASN.I stop tag, which consists of a double hyphen followed by a singlespace and the text "ASN1STOP" (in all upper case letters).

This results in the following tags:
-- ASNISTART
-- TAG-NAME-START
-- TAG-NAME-STOP
-- ASNISTOP

The text paragraphs containing either of the start and stop tags should not contain any ASN. 1 code significant for the complete description of the RRC PDU contents. The complete ASN. 1 code may be extracted by copying all the text paragraphs between an ASN. 1 start tag and the following ASN. 1 stop tag in the order they appear, throughout the specification.

NOTE: A typical procedure for extraction of the complete ASN1 code consists of a first step where the entire RRC PDU contents description (ultimately the entire specification) is saved into a plain text (ASCII) file format, followed by a second step where the actual extraction takes place, based on the occurrence of the ASN. 1 start and stop tags.

ETSI


--- Page 1148  ---


3GPP TS 38.331 version 17.0.0 Release 17
1147
ETSI TS 138331 V17.0.0 (2022-05)
A.3.1.2 ASN.1 identifier naming conventions

The naming of identifiers (i.e., the ASN. 1 field and type identifiers) should be based on the following guidelines:
- Message (PDU) identifiers should be ordinary mixed case without hyphenation. These identifiers, e.g, the RRCConnectionModificationCommand, should be used for reference in the procedure text. Abbreviations should be avoided in these identifiers and abbreviated forms of these identifiers should not be used.
- Type identifiers other than PDU identifiers should be ordinary mixed case, with hyphenation used to set off acronyms only where an adjacent letter is a capital, e.g., EstablishmentCause, SelectedPLMN (not Selected-PLMN, since the "d" in "Selected" is lowercase), InitialUE-Identity and MeasSFN-SFN-TimeDifference.
- Field identifiers shall start with a lowercase letter and use mixed case thereafter, e.g., establishmentCause. If a field identifier begins with an acronym (which would normally be in upper case), the entire acronym is lowercase (plmn-Identity, not pLMN-Identity). The acronym is set off with a hyphen (ue-Identity, not ueldentity), in order to facilitate a consistent search pattern with corresponding type identifiers.
- Identifiers should convey the meaning of the identifier and should avoid adding unnecessary postfixes (eg. abstractions like 'Info') for the name.
- Identifiers that are likely to be keywords of some language, especially widely used languages, such as C++ or Java, should be avoided to the extent possible.
- Identifiers, other than PDU identifiers, longer than 25 characters should be avoided where possible. It is recommended to use abbreviations, which should be done in a consistent manner i.e. use 'Meas' instead of 'Measurement' for all occurrences. Examples of typical abbreviations are given in table A.3.1.2.1-1 below.
- For future extension: When an extension is introduced a suffix is added to the identifier of the concerned ASN. 1 field and/or type. A suffix of the form "-rX" is used, with X indicating the release, for ASN 1 fields or types introduced in a later release (ie a release later than the original/first release of the protocol) as well as for ASN 1 fields or types for which a revision is introduced in a later release replacing a previous version, e.g., Foo-r9 for the Rel-9 version of the ASN 1 type Foo. A suffix of the form "rXb" is used for the first revision of a field that it appears in the same release ( \( X \) ) as the original version of the field, "rXc" for a second intra-release revision and so on. A suffix of the form "-vXYZ" is used for ASN. 1 fields or types that only are an extension of a corresponding earlier field or type (see clause A.4), e.g., AnElement\( v 10 b 0 \) for the extension of the ASN 1 type AnElement introduced in version 10.11 .0 of the specification. A number \( 0 . .9,10,11 \), etc. is used to represent the first part of the version number, indicating the release of the protocol. Lower case letters \( a, b, c \), etc. are used to represent the second (and third) part of the version number if they are greater than 9. In the procedural specification, in field descriptions as well as in headings suffices are not used, unless there is a clear need to distinguish the extension from the original field.
- More generally, in case there is a need to distinguish different variants of an ASN. 1 field or IE, a suffix should be added at the end of the identifiers e.g. MeasObjectUTRA, ConfigCommon. When there is no particular need to distinguish the fields (e.g. because the field is included in different IEs), a common field identifier name may be used. This may be attractive e.g. in case the procedural specification is the same for the different variants.
- It should be avoided to use field identifiers with the same name within the elements of a CHOICE, including using a CHOICE inside a SEQUENCE (to avoid certain compiler errors).

ETSI


--- Page 1149  ---


3GPP TS 38.331 version 17.0.0 Release 17
1148
ETSI TS 138331 V17.0.0 (2022-05)

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table A.3.1.2-1: Examples of typical abbreviations used in ASN. 1 identifiers}
\begin{tabular}{|l|l|}
\hline Abbreviation & Abbreviated word \\
\hline Config & Configuration \\
\hline DL & Downlink \\
\hline Ext & Extension \\
\hline Freq & Frequency \\
\hline Id & Identity \\
\hline Ind & Indication \\
\hline Meas & Measurement \\
\hline MIB & MasterInformationBlock \\
\hline Neigh & Neighbour(ing) \\
\hline Param(s) & Parameter(s) \\
\hline Phys & Physical \\
\hline PCI & Physical Cell Id \\
\hline Proc & Process \\
\hline Reconfig & Reconfiguration \\
\hline Reest & Re-establishment \\
\hline Req & Request \\
\hline Rx & Reception \\
\hline Sched & Scheduling \\
\hline SIB & System InformationBlock \\
\hline Sync & Synchronisation \\
\hline Thr & Threshold \\
\hline Tx & Transmission \\
\hline UL & Uplink \\
\hline
\end{tabular}
\end{table}

NOTE: The table A.3.1.2.1-1 is not exhaustive. Additional abbreviations may be used in ASN.1 identifiers when needed.
A.3.1.3 Text references using ASN. 1 identifiers

A text reference into the RRC PDU contents description from other parts of the specification is made using the ASN. 1 field identifier of the referenced type. The ASN. 1 field and type identifiers used in text references should be in the italic font style. The "do not check spelling and grammar" attribute in Word should be set. Quotation marks (i.e., "") should not be used around the ASN. 1 field or type identifier.

A reference to an RRC PDU should be made using the corresponding ASN. 1 field identifier followed by the word "message", e.g., a reference to the RRCRelease message.
A reference to a specific part of an RRC PDU, or to a specific part of any other ASN.1 type, should be made using the corresponding ASN.1 field identifier followed by the word "field", e.g., a reference to the prioritisedBitRate field in the example below.
-- /example/ ASNISTART

LogicalChannelConfig : := ul-SpecificParameters priority

SEQUENCE 1 SEQUENCE 1 Priority,

ETSI


--- Page 1150  ---


3GPP TS 38.331 version 17.0.0 Release 17
1149
ETSI TS 138331 V17.0.0 (2022-05)
```
        logicalChannelGroup
    } OPTIONAL
}
-- ASNISTOP
```

        prioritisedBitRate PrioritisedBitRate,
        bucketSizeDuration BucketSizeDuration,
```
PrioritisedBitRate,
INTEGER (0..3)
```


NOTE: All the ASN1 start tags in the ASN1 clauses, used as examples in this annex to the specification, are deliberately distorted, in order not to include them when the ASN. 1 description of the RRC PDU contents is extracted from the specification.

A reference to a specific type of information element should be made using the corresponding ASN 1 type identifier preceded by the acronym "IE", e.g., a reference to the IE LogicalChannelConfig in the example above.

References to a specific type of information element should only be used when those are generic, i.e., without regard to the particular context wherein the specific type of information element is used. If the reference is related to a particular context, e.g., an RRC PDU type (message) wherein the information element is used, the corresponding field identifier in that context should be used in the text reference.

A reference to a specific value of an ASN. 1 field should be made using the corresponding ASN. 1 value without using quotation marks around the ASN. 1 value, e.g., 'if the status field is set to value true'.
A.3.2 High-level message structure

Within each logical channel type, the associated RRC PDU (message) types are alternatives within a CHOICE, as shown in the example below.
```
-- /example/ ASN1START
DL-DCCH-Message ::= SEQUENCE {
    message DL-DCCH-MessageType
}
DL-DCCH-MessageType ::= CHOICE {
    cl CHOICE \
        dlInformationTransfer
        handoverFromEUTRAPr
        mobilityFromEUTRAComman
        rrcConnectionReconfiguration
        rrcConnectionRelease
        securityModeCommand.
        uecapabilityEnquiry UECapabilityEnquiry,
        sparel NULL
    },
    messageClassExtension SEQUENCE {}
}
-- ASNISTOP
```


ETSI


--- Page 1151  ---


3GPP TS 38.331 version 17.0.0 Release 17
1150
ETSI TS 138331 V17.0.0 (2022-05)

A nested two-level CHOICE structure is used, where the alternative PDU types are alternatives within the inner level \( c / \) CHOICE.
Spare alternatives (i.e., sparel in this case) may be included within the \( c l \) CHOICE to facilitate future extension. The number of such spare alternatives should not extend the total number of alternatives beyond an integer-power-of-two number of alternatives (i.e., eight in this case).

Further extension of the number of alternative PDU types is facilitated using the messageClass Extension alternative in the outer level CHOICE.
A.3.3 Message definition

Each PDU (message) type is specified in an ASN. 1 clause similar to the one shown in the example below.
```
-- /example/ ASN1START
RRCConnectionReconfiguration ::= SEQUENCE \
    rrc-TransactionIdentifier RRC-TransactionIdentifier,
    criticalExtensions CHOICE [
        cl CHOICEl
            rrcConnectionReconfiguration-r8 RRCConnectionReconfiguration-r8-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
RRCConnectionReconfiguration-r8-IEs ::= SEQUENCE {
    -- Enter the IEs here.
    ...
}
-- ASNISTOP
```


Hooks for critical and non-critical extension should normally be included in the PDU type specification. How these hooks are used is further described in clause A.4.
Critical extensions are characterised by a redefinition of the PDU contents and need to be governed by a mechanism for protocol version agreement between the encoder and the decoder of the PDU, such that the encoder is prevented from sending a critically extended version of the PDU type, which is not comprehended by the decoder.

Critical extension of a PDU type is facilitated by a two-level CHOICE structure, where the alternative PDU contents are alternatives within the inner level \( c \) / CHOICE. Spare alternatives (i.e., spare 3 down to sparel in this case) may be included within the \( c l \) CHOICE. The number of spare alternatives to be included in the original PDU specification should be decided case by case, based on the expected rate of critical extension in the future releases of the protocol.

Further critical extension, when the spare alternatives from the original specifications are used up, is facilitated using the criticalExtensionsFuture in the outer level CHOICE.
In PDU types where critical extension is not expected in the future releases of the protocol, the inner level \( c l \) CHOICE and the spare alternatives may be excluded, as shown in the example below.
-- /example/ ASNISTART

ETSI


--- Page 1152  ---


3GPP TS 38.331 version 17.0.0 Release 17
1151
ETSI TS 138331 V17.0.0 (2022-05)
```
RRCConnectionReconfigurationComplete ::= SEQUENCE \
    rrc-TransactionIdentifier RRC-TransactionIdentifier,
    criticalExtensions CHOICE \
        rrcConnectionReconfigurationComplete-r8
            RRCConnectionReconfigurationComplete-r8-IEs,
        criticalExtensionsFuture SEQUENCE {}
    }
}
RRCConnectionReconfigurationComplete-r8-IEs ::= SEQUENCE {
    -- Enter the fields here.
    ...
}
-- ASNISTOP
```


Non-critical extensions are characterised by the addition of new information to the original specification of the PDU type. If not comprehended, a non-critical extension may be skipped by the decoder, whilst the decoder is still able to complete the decoding of the comprehended parts of the PDU contents.

Non-critical extensions at locations other than the end of the message or other than at the end of a field contained in a BIT or OCTET STRING are facilitated by use of the ASN1 extension marker "...". The original specification of a PDU type should normally include the extension marker at the end of the sequence of information elements contained.

Non-critical extensions at the end of the message or at the end of a field that is contained in a BIT or OCTET STRING may be facilitated by use of an empty sequence that is marked OPTIONAL e.g as shown in the following example:
```
-- /example/ ASNISTART
RRCMessage-r8-IEs ::= SEQUENCE \
    fieldl
    field2
    nonCriticalExtension SEQUENCE {} OPTIONAL
}
-- ASNISTOP
```


The ASN 1 clause specifying the contents of a PDU type may be followed by a field description table where a further description of, e.g., the semantic properties of the fields may be included. The general format of this table is shown in the example below. The field description table is absent in case there are no fields for which further description needs to be provided e.g. because the PDU does not include any fields, or because an IE is defined for each field while there is nothing specific regarding the use of this IE that needs to be specified.

\begin{tabular}{|l|l|}
\hline & \%PDU-Typeldentifier\% field descriptions \\
\hline \%field identifier\% Field description. & \\
\hline & \\
\hline \%field identifier\% & \\
\hline Field description. & \\
\hline
\end{tabular}

ETSI


--- Page 1153  ---


3GPP TS 38.331 version 17.0.0 Release 17
1152
ETSI TS 138331 V17.0.0 (2022-05)

The field description table has one column. The header row shall contain the ASN. 1 type identifier of the PDU type.
The following rows are used to provide field descriptions. Each row shall include a first paragraph with a field identifier (in bold and italic font style) referring to the part of the PDU to which it applies. The following paragraphs at the same row may include (in regular font style), e.g., semantic description, references to other specifications and/or specification of value units, which are relevant for the particular part of the PDU.

The parts of the PDU contents that do not require a field description shall be omitted from the field description table.
A.3.4 Information elements

Each IE (information element) type is specified in an ASN. 1 clause similar to the one shown in the example below.
```
-- /example/ ASN1START
PRACH-ConfigSIB ::=
    rootSequenceIndex
    prach-ConfigInfo
}
PRACH-Config ::=
    rootSequenceIndex
    prach-ConfigInfo
}
PRACH-ConfigInfo ::=
    prach-ConfigIndex
    highSpeedFlag
    zeroCorrelationZoneConfig
}
-- ASNISTOP
```

```
SEQUENCE {
    INTEGER (0..1023),
    PRACH-ConfigInfo
```

```
SEQUENCE {
    INTEGER (0..1023),
    PRACH-ConfigInfo OPTIONAL -- Need N
SEQUENCE {
    ENUMERATED {ffs},
    ENUMERATED {ffs},
    ENUMERATED {ffs}
```


IEs should be introduced whenever there are multiple fields for which the same set of values apply. IEs may also be defined for other reasons e.g. to break down a ASN. 1 definition in to smaller pieces.

A group of closely related IE type definitions, like the IEs PRACH-ConfigSIB and PRACH-Config in this example, are preferably placed together in a common ASN-1 clause. The IE type identifiers should in this case have a common base, defined as the generic type identifier. It may be complemented by a suffix to distinguish the different variants. The "PRACH-Config" is the generic type identifier in this example, and the "SIB" suffix is added to distinguish the variant. The clause heading and generic references to a group of closely related IEs defined in this way should use the generic type identifier.

The same principle should apply if a new version, or an extension version, of an existing IE is created for critical or non-critical extension of the protocol (see clause A.4). The new version, or the extension version, of the IE is included in the same ASN. 1 clause defining the original. A suffix is added to the type identifier, using the naming conventions defined in clause A.3.1.2, indicating the release or version of the where the new version, or extension version, was introduced.

Local IE type definitions, like the IE PRACH-ConfigInfo in the example above, may be included in the ASN 1 clause and be referenced in the other IE types defined in the same ASN. 1 clause. The use of locally defined IE types should be encouraged, as a tool to break up large and complex IE type definitions. It can improve the readability of the code.

ETSI


--- Page 1154  ---


3GPP TS 38.331 version 17.0.0 Release 17
1153
ETSI TS 138331 V17.0.0 (2022-05)

There may also be a benefit for the software implementation of the protocol end-points, as these IE types are typically provided by the ASN. 1 compiler as independent data elements, to be used in the software implementation.

An IE type defined in a local context, like the IE PRACH-ConfigInfo, should not be referenced directly from other ASN 1 clauses in the RRC specification. An IE type which is referenced in more than one ASN. 1 clause should be defined in a separate clause, with a separate heading and a separate ASN. 1 clause (possibly as one in a set of closely related IE types, like the IEs PRACH-ConfigSIB and PRACH-Config in the example above). Such IE types are also referred to as 'global IEs'.

NOTE: Referring to an IE type, that is defined as a local IE type in the context of another ASN. 1 clause, does not generate an ASN. 1 compilation error. Nevertheless, using a locally defined IE type in that way makes the IE type definition difficult to find, as it would not be visible at an outline level of the specification. It should be avoided.

The ASN 1 clause specifying the contents of one or more IE types, like in the example above, may be followed by a field description table, where a further description of, e.g., the semantic properties of the fields of the information elements may be included. This table may be absent, similar as indicated in clause A.3.3 for the specification of the PDU type. The general format of the field description table is the same as shown in clause A.3.3 for the specification of the PDU type.
A.3.5 Fields with optional presence

A field with optional presence may be declared with the keyword DEFAULT. It identifies a default value to be assumed, if the sender does not include a value for that field in the encoding:
```
-- /example/ ASN1START
PreambleInfo ::=
SEQUENCE {
    numberOfRA-Preambles
    ...
}
-- ASNISTOP
```


Alternatively, a field with optional presence may be declared with the keyword OPTIONAL. It identifies a field for which a value can be omitted. The omission carries semantics, which is different from any normal value of the field:
```
-- /example/ ASN1START
PRACH-Config ::=
    rootSequenceIndex
    prach-ConfigInfo
}
-- ASNISTOP
SEQUENCE {
    INTEGER (0..1023),
    PRACH-ConfigInfo
OPTIONAL -- Need N
```


The semantics of an optionally present field, in the case it is omitted, should be indicated at the end of the paragraph including the keyword OPTIONAL, using a short comment text with a need code. The need code includes the keyword "Need", followed by one of the predefined semantics tags (S, M, N or R) defined in clause 6.1. If the semantics tag S is used, the semantics of the absent field are further specified either in the field description table following the ASN. 1 clause, or in procedure text.

ETSI


--- Page 1155  ---


3GPP TS 38.331 version 17.0.0 Release 17
1154
ETSI TS 138331 V17.0.0 (2022-05)

The addition of OPTIONAL keywords for capability groups is based on the following guideline. If there is more than one field in the lower level IE, then OPTIONAL keyword is added at the group level. If there is only one field in the lower level IE, OPTIONAL keyword is not added at the group level.
A.3.6 Fields with conditional presence

A field with conditional presence is declared with the keyword OPTIONAL. In addition, a short comment text shall be included at the end of the paragraph including the keyword OPTIONAL. The comment text includes the keyword "Cond", followed by a condition tag associated with the field ("UL" in this example):
```
-- /example/ ASN1START
LogicalChannelConfig ::= SEQUENCE {
    ul-SpecificParameters
        priority
        ...
    } OPTIONAL
}
-- ASNISTOP
```


When conditionally present fields are included in an ASN.1 clause, the field description table after the ASN.1 clause shall be followed by a conditional presence table. The conditional presence table specifies the conditions for including the fields with conditional presence in the particular ASN. 1 clause.

\begin{tabular}{|l|l|}
\hline Conditional presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline UL & \begin{tabular}{l} 
Specification of the conditions for including the field associated with the condition tag = "UL". Semantics in case of optional presence under certain \\
conditions may also be specified.
\end{tabular} \\
\hline
\end{tabular}

The conditional presence table has two columns. The first column (heading: "Conditional presence") contains the condition tag (in italic font style), which links the fields with a condition tag in the ASN_1 clause to an entry in the table. The second column (heading: "Explanation") contains a text specification of the conditions and requirements for the presence of the field. The second column may also include semantics, in case of an optional presence of the field, under certain conditions i.e. using the same predefined tags as defined for optional fields in A.3.5.

Conditional presence should primarily be used when presence of a field depends on the presence and/or value of other fields within the same message. If the presence of a field depends on whether another feature/function has been configured, while this function can be configured independently e.g. by another message and/or at another point in time, the relation is best reflected by means of a statement in the field description table.

If the ASN. 1 clause does not include any fields with conditional presence, the conditional presence table shall not be included.
Whenever a field is only applicable in specific cases e.g. TDD, use of conditional presence should be considered.
A.3.7 Guidelines on use of lists with elements of SEQUENCE type

Where an information element has the form of a list (the SEQUENCE OF construct in ASN.1) with the type of the list elements being a SEQUENCE data type, an information element shall be defined for the list elements even if it would not otherwise be needed.

ETSI


--- Page 1156  ---


3GPP TS 38.331 version 17.0.0 Release 17
1155
ETSI TS 138331 V17.0.0 (2022-05)

For example, a list of PLMN identities with reservation flags is defined as in the following example:
```
-- /example/ ASN1START
PLMN-IdentityInfoList ::= SEQUENCE (SIZE (1..6)) OF PLMN-IdentityInfo
PLMN-IdentityInfo ::= SEQUENCE {
    plmn-Identity
    cellReservedForOperatorUse
}
-- ASNISTOP
```

rather than as in the following (bad) example, which may cause generated code to contain types with unpredictable names:
```
-- /bad example/ ASN1START
PLMN-IdentityList ::=
    plmn-Identity
    cellReservedForOperatorUse
}
-- ASNISTOP
```

A.3.8 Guidelines on use of parameterised SetupRelease type

The usage of the parameterised SetupRelease type is like a function call in programming languages where the element type parameter is passed as a parameter. The parameterised type only implies a textual change in abstract syntax where all references to the parameterised type are replaced by the compiler with the release/setup choice. Two examples of the usage are shown below:
```
-- /example/ ASN1START
RRCMessage-rX-IEs ::= SEQUENCE [
    field-rX SetupRelease { IE-rX } OPTIONAL, -- Need M
...
}
RRCMessage-rX-IEs ::= SEQUENCE \
    field-rX SetupRelease { Element-rX }
} OPTIONAL, -- Need. M
Element-rX ::= SEQUENCE \
    fieldl-rX IEl-rX,
    field2-rX IE2-rX
}
-- /example/ ASN1STOP
```


ETSI


--- Page 1157  ---


3GPP TS 38.331 version 17.0.0 Release 17
1156
ETSI TS 138331 V17.0.0 (2022-05)

The SetupRelease is always be used with only named IEs, i.e. the example below is not allowed:
```
-- /example/ ASN1START
RRCMessage-rX-IEs ::= SEQUENCE \
    field-rX SetupRelease { SEQUENCE { -- Unnamed SEQUENCEs are not allowed!
            fieldl-rX IEl-rX,
            field2-rX IE2-rX OPTIONAL -- Need N
        }
        } OPTIONAL, -- Need M
}
-- /example/ ASN1STOP
```


If a field defined using the parameterized SetupRelease type requires procedural text, the field is referred to using the values defined for the type itself, namely, "setup" and "release". For example, procedural text for field-rX above could be as follows:
\( 1> \) if field-r \( X \) is set to "setup":
\( 2> \) do something;
\( 1> \) else (field-r \( X \) is set to "release"):
\( 2> \) release field-rX (if appropriate).
A.3.9 Guidelines on use of ToAddModList and ToReleaseList

In order to benefit from delta signalling when modifying lists with many and/or large elements, so-called add/mod- and release-lists should be used. Instead of a single list containing all elements of the list, the ASN. 1 provides two lists. One list is used to convey the actual elements that are to be added to the list or modified in the list. The second list conveys only the identities (IDs) of the list elements that are to be released from the list. In other words, the ASN. 1 defines only means to signal modifications to a list maintained in the receiver (typically the UE). An example is provided below:
```
-- /example/ ASN1START
AnExampleIE ::= SEQUENCE {
```

```
    ...
}
Element ::= SEQUENCE \
    elementId ElementId,
    aField INTEG ER (0..16777215),
    anotherField OCTET STRING,
    ...
}
```


ETSI


--- Page 1158  ---


3GPP TS 38.331 version 17.0.0 Release 17
1157
ETSI TS 138331 V17.0.0 (2022-05)
```
ElementId:: INTEGER (O..maxNrofElements-l)
maxNrofElements INTEGER ::= 50
maxNrofElements-l INTEGER ::= 49
-- /example/ ASN1STOP
```


As can be seen, the elements of the list must contain an identity (INTEGER) that identifies the elements unambiguously upon addition, modification and removal. It is recommended to define an IE for that identifier (here ElementId) so that it can be used both for a field inside the element as well as in the elementsToReleaseList.

Both lists should be made OPTIONAL and flagged as "Need N". The need code reflects that the UE does not maintain the received lists as such but rather updates its configuration using the information therein. In other words, it is not possible to provide via delta signalling an update to a previously signalled elementsToAddModList or elementsToReleaseList (which Need M would imply). The update is always in relation to the UE's internal configuration.

Note that the release of a field (a list element as well as any other field) releases all its sub-fields (sub-fields configured by elementsToAddModList and any other sub-field).
If no procedural text is provided for a set of ToAddModList and ToReleaseList, the following generic procedure applies:
The UE shall:
1> for each Elementld in the elementsToReleaseList,:
\( 2> \) if the current UE configuration includes an Element with the given Elementld:
3> release the Element from the current UE configuration;
1> for each Element in the elementsToAddModList:
\( 2> \) if the current UE configuration includes an Element with the given Elementld:
3> modify the configured Element in accordance with the received Element;
\( 2> \) else:
3> add received Element to the UE configuration.
A.3.10 Guidelines on use of lists (without ToAddModList and ToReleaseList)

As per clause 6.1.3, when using lists without the ToAddModList and ToReleaseList structure, the contents of the lists are always replaced. To illustrate this, an example is provided below:
```
-- /example/ ASN1START
-- TAG EXAMPLE LISTS START
AnExampleIE ::= SEQUENCE [
```


ETSI


--- Page 1159  ---


3GPP TS 38.331 version 17.0.0 Release 17
1158
ETSI TS 138331 V17.0.0 (2022-05)
```
    ...;
    [ [
```

```
    ]]
}
Element ::= SEQUENCE \
    useFeatureX BOOLEAN,
    aField INTEGER (0..127)
    anotherField INTEGER (0.127)
    ...
}
maxNrofElements INTEGER ::= 8
maxNrofElements-l INTEGER ::= 7
maxNrofElementsExt INTEGER ::= 8
maxNrofElementsExt-1 INTEGER ::= 7
-- TAG_EXAMPLE_LISTS_STOP
-- /example/ ASN1STOP
```


As can be seen, the elementList list itself uses Need M, but each list entry Element contains mandatory, Need M and Need R fields. If the list is first signalled to UE with 3 entries, and subsequently again with 2 entries, UE shall retain only the latter list, i.e the list with 2 elements will completely replace the list with 3 elements. That also means that the field aField will be treated as if it was newly created, i.e. network must include it if it wishes UE to utilize the field even if it was previously signalled. This also implies that the Need M field (aField) will be treated in the same way as the Need R field (anotherField), i.e delta signalling is not applied and the network has to signal the field to ensure UE does not release the value (which is why Need M should not normally be used in the entries of these lists).
A. 4 Extension of the PDU specifications
A.4.1 General principles to ensure compatibility

It is essential that extension of the protocol does not affect interoperability i.e it is essential that implementations based on different versions of the RRC protocol are able to interoperate. In particular, this requirement applies for the following kind of protocol extensions:
- Introduction of new PDU types (i.e. these should not cause unexpected behaviour or damage).
- Introduction of additional fields in an extensible PDUs (i.e. it should be possible to ignore uncomprehended extensions without affecting the handling of the other parts of the message).
- Introduction of additional values of an extensible field of PDUs. If used, the behaviour upon reception of an uncomprehended value should be defined.

It should be noted that the PDU extension mechanism may depend on the logical channel used to transfer the message e.g. for some PDUs an implementation may be aware of the protocol version of the peer in which case selective ignoring of extensions may not be required.

ETSI


--- Page 1160  ---


3GPP TS 38.331 version 17.0.0 Release 17
1159
ETSI TS 138331 V17.0.0 (2022-05)

The non-critical extension mechanism is the primary mechanism for introducing protocol extensions i.e the critical extension mechanism is used merely when there is a need to introduce a 'clean' message version. Such a need appears when the last message version includes a large number of non-critical extensions, which results in issues like readability, overhead associated with the extension markers. The critical extension mechanism may also be considered when it is complicated to accommodate the extensions by means of non-critical extension mechanisms.
A.4.2 Critical extension of messages and fields

The mechanisms to critically extend a message are defined in A.3.3. There are both "outer branch" and "inner branch" mechanisms available. The "outer branch" consists of a CHOICE having the name criticalExtensions, with two values, \( c I \) and criticalExtensionsFuture. The criticalExtensionsFuture branch consists of an empty SEQUENCE, while the cl branch contains the "inner branch" mechanism.

The "inner branch" structure is a CHOICE with values of the form "MessageName-rX-IEs" (e.g., "RRCConnectionReconfiguration-r8-IEs") or "spareX", with the spare values having type NULL. The "-rX-IEs" structures contain the complete structure of the message [Es for the appropriate release; i.e., the critical extension branch for the Rel-10 version of a message includes all Rel-8 and Rel-9 fields (that are not obviated in the later version), rather than containing only the additional Rel-10 fields.

The following guidelines may be used when deciding which mechanism to introduce for a particular message, i.e. only an 'outer branch', or an 'outer branch' in combination with an 'inner branch' including a certain number of spares:
- For certain messages, e.g. initial uplink messages, messages transmitted on a broadcast channel, critical extension may not be applicable.
- An outer branch may be sufficient for messages not including any fields.
- The number of spares within inner branch should reflect the likelihood that the message will be critically extended in future releases (since each release with a critical extension for the message consumes one of the spare values). The estimation of the critical extension likelihood may be based on the number, size and changeability of the fields included in the message.
- In messages where an inner branch extension mechanism is available, all spare values of the inner branch should be used before any critical extensions are added using the outer branch.

The following example illustrates the use of the critical extension mechanism by showing the ASN. 1 of the original and of a later release
```
-- /example/ ASN1START -- Original release
RRCMessage ::=
    rrc-TransactionIdentifier
    criticalExtensions
        cl
            rrcMessage-r8 RRCMessage-r8-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        },
        criticalExtensionsFuture SEQUENCE {}
    }
}
-- ASNISTOP
```


ETSI


--- Page 1161  ---


3GPP TS 38.331 version 17.0.0 Release 17
1160
ETSI TS 138331 V17.0.0 (2022-05)
```
-- /example/ ASN1START -- Later release
RRCMessage ::=
    rrc-TransactionIdentifier
    criticalExtensions
        cl
            rrcMessage-r8 RRCMessage-r8-IEs,
            rrcMessage-rl0 RRCMessage-rl0-IEs,
            rrcMessage-rll 新 能CMessage-rll-IEs,
            rrcMessage-rl4 RRCMessage-rl4-IEs
        },
        later CHOICE {
            c2 CHOICE\
                rrcMessage-rl6 RRCMessage-rl6-IEs,
                spare7 NULL, spare6 NULL, spare5 NULL, spare4 NULL,
                spare3 NULL, spare2 NULL, sparel NULL
            },
            criticalExtensionsFuture SEQUENCE {}
        }
    }
}
-- ASNISTOP
```


It is important to note that critical extensions may also be used at the level of individual fields i.e a field may be replaced by a critically extended version. When sending the extended version, the original version may also be included (e.g. original field is mandatory, E-UTRAN is unaware if UE supports the extended version). In such cases, a UE supporting both versions may be required to ignore the original field. The following example illustrates the use of the critical extension mechanism by showing the ASN. 1 of the original and of a later release.
```
-- /example/ ASN1START -- Original release
RRCMessage ::= SEQUENCE \
    rrc-TransactionIdentifier
    crit{ RRC-TransactionIdentifier,
        cl CHOICE {
            rrcMessage-r8 RRCMessage-r8-IEs,
            spare3 NULL, spare2 NULL, sparel NULL
        /,
        criticalExtensionsFuture SEQUENCE {}
    }
}
RRCMessage-rN-IEs ::= SEQUENCE \
    fieldl-rN ENUMERATED \
                valuel, value2, value3, value4} OPTIONAL, -- Need N
    field2-rN
    nonCriticalExtension
}
RRCConnectionReconfiguration-vMxy-IEs ::= SEQUENCE {
    field2-rM InformationElement2-rM OPTIONAL, -- Cond NoField2rN
    nonCriticalExtension SEQUENCE {} OPTIONAL
```


ETSI


--- Page 1162  ---


3GPP TS 38.331 version 17.0.0 Release 17
1161
ETSI TS 138331 V17.0.0 (2022-05)
```
}
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline Conditional presence & Explanation \\
\hline NoField2rN & The field is optionally present, need N , if field2-r N is absent. Otherwise the field is absent \\
\hline
\end{tabular}

Finally, it is noted that a critical extension may be introduced in the same release as the one in which the original field was introduced e.g. to correct an essential ASN. 1 error. In such cases a UE capability may be introduced, to assist the network in deciding whether or not to use the critical extension.

In the case of list fields (SEQUENCE OF types in ASN-1) using the ToAddMod/ToRelease construction, the use of critical extensions to increase the size of a list should be avoided; that is, replacing the original list field by a new field also used to signal entries previously covered by the original field (i.e. extensions done according to the following example) should be avoided:
```
-- /example/ ASN1START -- Discouraged example
ContainingStructure ::= SEQUENCE \
```

```
    [ [
```

```
    ]]
}-- ASN1STOP
```


Instead, a non-critical list extension mechanism should typically be used, such that the extension field only adds the new entries of the list. This approach is further described in clause A.4.3.6.

If the critical extension mechanism for a list is used, it should be clarified in the field description that the two versions of the list are not configured together, and that the network should release the contents of the original version when configuring the replacement version.
A.4.3 Non-critical extension of messages
A.4.3.1 General principles

The mechanisms to extend a message in a non-critical manner are defined in A_3.3. W.r.t. the use of extension markers, the following additional guidelines apply:
- When further non-critical extensions are added to a message that has been critically extended, the inclusion of these non-critical extensions in earlier critical branches of the message should be avoided when possible.
- The extension marker ("...") is the primary non-critical extension mechanism that is used but empty sequences may be used if length determinant is not required. Examples of cases where a length determinant is not required:
- at the end of a message;

ETSI


--- Page 1163  ---


3GPP TS 38.331 version 17.0.0 Release 17
1162
ETSI TS 138331 V17.0.0 (2022-05)
- at the end of a structure contained in a BIT STRING or OCTET STRING.
- When an extension marker is available, non-critical extensions are preferably placed at the location (e.g. the IE) where the concerned parameter belongs from a logical/ functional perspective (referred to as the 'default extension location').
- It is desirable to aggregate extensions of the same release or version of the specification into a group, which should be placed at the lowest possible level.
- In specific cases it may be preferable to place extensions elsewhere (referred to as the 'actual extension location') e.g. when it is possible to aggregate several extensions in a group. In such a case, the group should be placed at the lowest suitable level in the message.
- In case placement at the default extension location affects earlier critical branches of the message, locating the extension at a following higher level in the message should be considered.
- In case an extension is not placed at the default extension location, an IE should be defined. The IE's ASN. 1 definition should be placed in the same ASN. 1 clause as the default extension location. In case there are intermediate levels in-between the actual and the default extension location, an IE may be defined for each level. Intermediate levels are primarily introduced for readability and overview. Hence intermediate levels need not always be introduced e.g. they may not be needed when the default and the actual extension location are within the same ASN 1 clause.
A.4.3.2 Further guidelines

Further to the general principles defined in the previous clause, the following additional guidelines apply regarding the use of extension markers:
- Extension markers within SEQUENCE:
- Extension markers are primarily, but not exclusively, introduced at the higher nesting levels.
- Extension markers are introduced for a SEQUENCE comprising several fields as well as for information elements whose extension would result in complex structures without it (e.g. re-introducing another list).
- Extension markers are introduced to make it possible to maintain important information structures e.g. parameters relevant for one particular RAT.
- Extension markers are also used for size critical messages (i.e. messages on \( \mathrm{BCCH}, \mathrm{BR} \)-BCCH, PCCH and CCCH), although introduced somewhat more carefully.
- The extension fields introduced (or frozen) in a specific version of the specification are grouped together using double brackets.
- Extension markers within ENUMERATED:
- Spare values may be used until the number of values reaches the next power of 2 , while the extension marker caters for extension beyond that limit, given that the use of spare values in a later Release is possible without any error cases.
- A suffix of the form "vXYZ" is used for the identifier of each new value, e.g. "value-vXYZ".
- Extension markers within CHOICE:

ETSI


--- Page 1164  ---


3GPP TS 38.331 version 17.0.0 Release 17
1163
ETSI TS 138331 V17.0.0 (2022-05)
- Extension markers are introduced when extension is foreseen and when comprehension is not required by the receiver i.e behaviour is defined for the case where the receiver cannot comprehend the extended value (e.g. ignoring an optional CHOICE field). It should be noted that defining the behaviour of a receiver upon receiving a not comprehended choice value is not required if the sender is aware whether or not the receiver supports the extended value.
- A suffix of the form "vXYZ" is used for the identifier of each new choice value, e.g. "choice-vXYZ".

Non-critical extensions at the end of a message/ of a field contained in an OCTET or BIT STRING:
- When a nonCriticalExtension is actually used, a "Need" code should not be provided for the field, which always is a group including at least one extension and a field facilitating further possible extensions. For simplicity, it is recommended not to provide a "Need" code when the field is not actually used either.

Further, more general, guidelines:
- In case a need code is not provided for a group, a "Need" code is provided for all individual extension fields within the group i.e. including for fields that are not marked as OPTIONAL. The latter is to clarify the action upon absence of the whole group.
A.4.3.3 Typical example of evolution of IE with local extensions

The following example illustrates the use of the extension marker for a number of elementary cases (sequence, enumerated, choice). The example also illustrates how the IE may be revised in case the critical extension mechanism is used.

NOTE In case there is a need to support further extensions of release \( n \) while the ASN 1 of release ( \( n+1 \) ) has been frozen, without requiring the release \( n \) receiver to support decoding of release ( \( \mathrm{n}+1 \) ) extensions, more advanced mechanisms are needed e.g. including multiple extension markers.
```
-- /example/ ASN1START
InformationElementl ::=
    fieldl
    field2
        field2a
        field2b
        ...;
        field2c-v960
    },
    ...;
    [ [
    field3-r9
    ]],
    [ [
    field3-v9a0
    field4-r9
    ]]
}
InformationElementl-rlo ::=
    fieldl
```

```
SEQUENCE {
    ENUMERATED {
        valuel, value2, value3, value4-v880,
        ..., value5-v960 },
    CHOICE \
        BOOLEAN,
        InformationElement2b,
        InformationElement2c-r9
    InformationElement3-r9 OPTIONAL -- Need R
    InformationElement3-v9a0 OPTIONAL, -- Need R
    InformationElement4 OPTIONAL -- Need R
```

```
SEQUENCE \
    ENUMERATED {
        valuel, value2, value3, value4-v880,
```


ETSI


--- Page 1165  ---


3GPP TS 38.331 version 17.0.0 Release 17
1164
ETSI TS 138331 V17.0.0 (2022-05)
```
    field2
        field2a
        field2b
        field2c-v960
        ...,
        field2d-vl2b0
    },
    field3-r9
    field4-r9
    field5-rl0
    field6-rl0
    ...;
    []
    field3-vl170
    ]]
}
-- ASNISTOP
```

```
    value5-v960, value6-vl170, spare2, sparel, ... ,
CHOICE {
    BOOLEAN,
    InformationElement2b,
    InformationElement2c-r9,
    INTEGER (0..63)
InformationElement3-rl0 OPTIONAL, -- Need R
InformationElement4 OPTIONAL, -- Need R
BOOLEAN,
InformationElement6-rl0 OPTIONAL, -- Need R
InformationElement3-vll70 OPTIONAL -- Need R
```


Some remarks regarding the extensions of InformationElementl as shown in the above example:
- The InformationElementl is initially extended with a number of non-critical extensions. In release 10 however, a critical extension is introduced for the message using this [E. Consequently, a new version of the IE InformationElementl (i.e. InformationElementl-r10) is defined in which the earlier non-critical extensions are incorporated by means of a revision of the original field.
- The value 4 - \( v 880 \) is replacing a spare value defined in the original protocol version for field 1. Likewise value6-v1170 replaces spare 3 that was originally defined in the r10 version of field l.
- Within the critically extended release 10 version of InformationElementl, the names of the original fields/IEs are not changed, unless there is a real need to distinguish them from other fields/IEs. E.g. the fieldl and InformationElement4 were defined in the original protocol version (release 8) and hence not tagged. Moreover, the field3\( r 9 \) is introduced in release 9 and not re-tagged; although, the InformationElement 3 is also critically extended and therefore tagged InformationElement \( 3-r 10 \) in the release 10 version of InformationElement1.
A.4.3.4 Typical examples of non critical extension at the end of a message

The following example illustrates the use of non-critical extensions at the end of the message or at the end of a field that is contained in a BIT or OCTET STRING i.e. when an empty sequence is used.
```
-- /example/ ASN1START
RRCMessage-r8-IEs ::= SEQUENCE \
    fieldl
    field2
    field3
    nonCriticalExtension
}
    InformationElementl,
    InformationElement2,
    InformationElement3 OPTIONAL, -- Need N
    RRCMessage-v860-IEs OPTIONAL
}
```


ETSI


--- Page 1166  ---


3GPP TS 38.331 version 17.0.0 Release 17
1165
ETSI TS 138331 V17.0.0 (2022-05)
```
RRCMessage-v860-IEs ::= SEQUENCE {
    field4-v860
    field5-v860
    nonCriticalExtension
}
RRCMessage-v940-IEs ::=
    field6-v940
    nonCriticalExtensions
}
-- ASNISTOP
    InformationElement4 OPTIONAL, -- Need.S
    BOOLEAN
    RRCMessage-v940-IEs OPTIONAL
SEQUENCE \
    InformationElement 6-r9
    SEQUENCE {}
OPTIONAL, -- Need R
OPTIONAL
```


Some remarks regarding the extensions shown in the above example:
- The InformationElement4 is introduced in the original version of the protocol (release 8) and hence no suffix is used.
A.4.3.5 Examples of non-critical extensions not placed at the default extension location

The following example illustrates the use of non-critical extensions in case an extension is not placed at the default extension location.
- ParentlE-WithEM

The IE ParentIE-WithEMis an example of a high level IE including the extension marker (EM). The root encoding of this IE includes two lower level IEs ChildIEI-WithoutEM and ChildIE2-WithoutEM which not include the extension marker. Consequently, non-critical extensions of the Child-IEs have to be included at the level of the Parent-IE.

The example illustrates how the two extension IEs ChildIEI-WithoutEM-vNx0 and ChildIE2-WithoutEM-vNx0 (both in release N) are used to connect non-critical extensions with a default extension location in the lower level IEs to the actual extension location in this IE.

ParentIE-WithEM information element
```
-- /example/ ASN1START
ParentIE-WithEM ::= SEQUENCE \
    -- Root encoding, including:
    childIEl-WithoutEM ChildIEl-WithoutEM
    childIE2-WithoutEM
    ...,
    [ [
    childIEl-WithoutEM-vNxO
    childIE2-WithoutEM-vNx0
    ]]
}
-- ASNISTOP
```


ETSI


--- Page 1167  ---


3GPP TS 38.331 version 17.0.0 Release 17
1166
ETSI TS 138331 V17.0.0 (2022-05)

Some remarks regarding the extensions shown in the above example:
- The fields childIEx-WithoutEM-vNx0 may not really need to be optional (depends on what is defined at the next lower level).
- In general, especially when there are several nesting levels, fields should be marked as optional only when there is a clear reason.
- ChildIE1-WithoutEM

The IE ChildIEl-WithoutEM is an example of a lower level IE, used to control certain radio configurations including a configurable feature which can be setup or released using the local IE ChIE1-ConfigurableFeature. The example illustrates how the new field chIEI-NewField is added in release N to the configuration of the configurable feature. The example is based on the following assumptions:
- When initially configuring as well as when modifying the new field, the original fields of the configurable feature have to be provided also i.e as if the extended ones were present within the setup branch of this feature.
- When the configurable feature is released, the new field should be released also.
- When omitting the original fields of the configurable feature the UE continues using the existing values (which is used to optimise the signalling for features that typically continue unchanged upon handover).
- When omitting the new field of the configurable feature the UE releases the existing values and discontinues the associated functionality (which may be used to support release of unsupported functionality upon handover to an eNB supporting an earlier protocol version).

The above assumptions, which affect the use of conditions and need codes, may not always apply. Hence, the example should not be re-used blindly.

ChildIE1-WithoutEM information element
```
-- /example/ ASN1START
ChildIEl-WithoutEM ::=
    -- Root encoding, including:
    chIEl-ConfigurableFeature
}
ChildIEl-WithoutEM-vNxO ::= SEQUENCE {
    chIEl-ConfigurableFeature-vNxO ChIEl-ConfigurableFeature-vNxO OPTIONAL -- Cond ConfigF
}
ChIEl-ConfigurableFeature ::= CHOICE \
    release NULL,
    setup SEQUENCE {
        -- Root encoding
    }
}
ChIEl-ConfigurableFeature-vNx0 ::= SEQUENCE {
    chIEl-NewField-rN INTEGER (0..31)
}
```


ETSI


--- Page 1168  ---


3GPP TS 38.331 version 17.0.0 Release 17
1167
ETSI TS 138331 V17.0.0 (2022-05)
-- ASNISTOP

\begin{tabular}{|l|l|}
\hline Conditional presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline ConfigF & \begin{tabular}{l} 
The field is optional present, need R, in case of chIE1-ConfigurableFeature is included and set to "setup"; otherwise the field is absent and the UE \\
shall delete any existing value for this field.
\end{tabular} \\
\hline
\end{tabular}
- ChildIE2-WithoutEM

The IE ChildIE2-WithoutEM is an example of a lower level IE, typically used to control certain radio configurations. The example illustrates how the new field chIEl-NewField is added in release N to the configuration of the configurable feature.

ChildIE2-WithoutEM information element
```
-- /example/ ASN1START
ChildIE2-WithoutEM ::=
    release
    setup
        -- SEQUENCE {
    }
}
ChildIE2-WithoutEM-vNxO ::= SEQUENCE {
    chIE2-NewField-rN
}
-- ASNISTOP
```


\begin{tabular}{|l|l|}
\hline Conditional presence & Explanation \\
\hline ConfigF & The field is optional present, need R , in case of chIE2-ConfigurableFeature is included and set to "setup"; otherwise the field is absent and the UE shall delete any existing value for this field. \\
\hline
\end{tabular}
A.4.3.6 Non-critical extensions of lists with ToAddMod/ToRelease

When the size of a list using the ToAddMod/ToRelease construction is extended and/or fields are added to the list element structure, the list should be non-critically extended in accordance with the following general principles:
- When only the size of the list is extended, this extension is reflected in a non-critical extension of the list, with a "SizeExt" suffix added to the end of the field name (before the -vNxy suffix). The differential size of the extended list uses the suffix "Diff". A new ToRelease list is needed, and its range should include only the increase in list size. In many cases, extending the list size will also require an extended list element ID type to account for the increased size of the list; in these cases the element type will need to be extended to include the extended element ID, resulting in a more complex extension (see example 3 for further discussion of this case). The field

ETSI


--- Page 1169  ---


3GPP TS 38.331 version 17.0.0 Release 17
1168
ETSI TS 138331 V17.0.0 (2022-05)

description table should indicate that the UE considers the original list and the extension list as a single list; thus entries added with the original list can be modified by the extension list (or removed by the extension of the ToRelease list), or vice versa. The result is as shown in the following example:
```
-- /example 1/ ASN1START
ContainingStructure ::= SEQUENCE \
```

```
    ...;
    [ [
    -- Non-critical extension lists
```

```
    ]]
}
-- ASN1STOP
```

- When fields are added to the list element structure, an extension marker should normally be used if available. If no extension marker is available or if overhead or other considerations prevent using the extension marker, an extension structure should be created for the new fields, with the suffix "Ext" added to the end of the field name and the element structure type name (before the -vNxy suffix), and a parallel ToAddMod list introduced to hold the new structures, also with the "Ext" suffix. The field description table should indicate that the parallel list contains the same number of entries, and in the same order, as the original list. No new ToRelease list is typically needed (unless the list element ID type changes). It should typically be ensured that the contained fields in the "Ext" elements are releasable without release and add of the entire list element; this can, for instance, be ensured by having the new fields be OPTIONAL Need R. If multiple extensions of the same list are needed, the version suffix should distinguish the lists (e.g. listElementToAddModListExt-vNwz added after listElementToAddModListExt-vNxy). The result is as shown in the following example:
```
-- /example 2/ ASN1START
ContainingStructure ::= SEQUENCE {
```

```
    ...,
    [ [
    -- Parallel list
```

```
    ]],
    [ [
    -- Second parallel list from a later spec version
```

```
    ]]
}
ListElement ::= SEQUENCE \
    elementId ListElementId,
    fieldl INTEGER (0..3),
    field2 ENUMERATED { valuel, value2, value3 }
}
```


ETSI


--- Page 1170  ---


3GPP TS 38.331 version 17.0.0 Release 17
1169
ETSI TS 138331 V17.0.0 (2022-05)
```
ListElementExt-vNxy ::=
    fieldʒ-rN
}
ListElementExt-vNwz ::= SEQUENCE {
    field4-rN
}
-- ASNISTOP
```

```
SEQUENCE \
    BIT STRING (SIZE (8))
```

```
OPTIONAL -- Need R
OPTIONAL -- Need R
```

- When the size of a list is extended and fields are added to the list element structure, an extension marker should normally be used for the added fields if available, and the list extended with the non-critical mechanism as described in example 1 above. Note that if the list element ID type changes in this case, the new ID can be added after the extension marker, and the entries of the size-extended ToRelease list should have the type of the new ID (e.g. ListElementId-vNxy). If no extension marker is available or if overhead or other considerations prevent using the extension marker, an extension structure should be created for the new fields and a parallel list with ToAddMod introduced to hold the extension structures, as in the second example above, for entries of the original list and for entries of the extension list holding new entries. The field description table should indicate that the parallel list contains the same number of entries, and in the same order, as the concatenation of the original list and the extension list. An extended ToRelease list is needed, but no additional parallel ToRelease list is needed (i.e there is no listElementToReleaseListExt-vNxy in the example below), as the original and extended ToRelease lists suffice to release any element of the combined list. The extended element ID type should be captured as a non-critical extension of the original element ID type, with the field description indicating that if the extended ID is present, the original ID is ignored. The result is as shown in the following example:
```
-- /example 3/ ASN1START
ContainingStructure ::= SEQUENCE \
```

```
    ...;
    [ [
    -- Non-critical extension lists
```

```
    -- Parallel list with maxNrofListElements-rN = maxNrofListElements + maxNrofListElementsDiff-rN
```

```
    ]]
}
ListElement ::= SEQUENCE \
    elementId ListElementId,
    fieldl INTEGER (0..3),
    field2 ENUMERATED { valuel, value2, value3}
}
ListElementExt-vNxy ::= SEQUENCE {
```

```
}
ListElementId ::= INTEGER (O..maxNrofListElements-l)
ListElementId-vNxy ::= INTEGER (maxNrofListElements..maxNrofListElements-rN-l)
```


ETSI


--- Page 1171  ---


3GPP TS 38.331 version 17.0.0 Release 17
1170
ETSI TS 138331 V17.0.0 (2022-05)
```
-- ASNISTOP
```

- When different extensions are made to a list in separate releases, the extension mechanisms described above may interact. In case fields are added in Rel-M (listElementToAddModListExt-vMxy) and later the list size is extended in Rel-N (listElementToAddModListSizeExt-vNwz), the size-extended list in Rel-N should be a single list extending the combination of listElementToAddModList and listElementToAddModListExt-vMxy. This requires creating a new type (ListElement-rN) to contain the combined fields of ListElement and ListElementExt-vMxy. A corresponding ToRelease list is needed. The result is as shown in the following example:
```
-- /example 4/ ASN1START
ContainingStructure ::= SEQUENCE {
```

```
    ...r
    [ [
    -- Parallel list (Rel-M)
```

```
    ]],
    [ [
    -- Size-extended list (Rel-N) with maxNrofListElements-rN = maxNrofListElements + maxNrofListElementsDiff-rN
```

```
    ]]
}
ListElement ::= SEQUENCE \
    elementId ListElementId,
    fieldl INTEGER (0..3),
    field2 ENUMERATED { valuel, value2, value3 }
}
ListElementExt-vMxy ::= SEQUENCE \
    fieldʒ-rM BIT STRING (SIZE (8))
}
ListElement-rN ::= SEQUENCE {
    elementId-vNwz ListElementId-vNwz,
    fieldl INTEGER (0..3),
    field2 ENUMERATED { valuel, value2, value3 },
    field3-rM BIT STRING (SIZE (8))
}
ListElementId ::= INTEGER (O..maxNrofListElements-l)
ListElementId-vNwz ::= INTEGER (maxNrofListElements..maxNrofListElements-rN-l)
-- ASNISTOP
```


ETSI


--- Page 1172  ---


3GPP TS 38.331 version 17.0.0 Release 17
1171
ETSI TS 138331 V17.0.0 (2022-05)
A. 5 Guidelines regarding inclusion of transaction identifiers in RRC messages

The following rules provide guidance on which messages should include a Transaction identifier
1: DL messages on CCCH that move UE to RRC-[dle should not include the RRC transaction identifier.
2: All network initiated DL messages by default should include the RRC transaction identifier.
3: All UL messages that are direct response to a DL message with an RRC Transaction identifier should include the RRC Transaction identifier.
4: All UL messages that require a direct DL response message should include an RRC transaction identifier.
5: All UL messages that are not in response to a DL message nor require a corresponding response from the network should not include the RRC Transaction identifier.
A. 6 Guidelines regarding use of need codes

The following rule provides guidance for determining need codes for optional downlink fields:
- if the field needs to be stored by the UE (i.e. maintained) when absent:
- use Need M (=Maintain);
- else, if the field needs to be released by the UE when absent:
- use Need R (=Release);
- else, if UE shall take no action when the field is absent (i.e. UE does not even need to maintain any existing value of the field):
- use Need N (=None);
- else (UE behaviour upon absence does not fit any of the above conditions):
- use Need S (=Specified);
- specify the UE behaviour upon absence of the field in the procedural text or in the field description table.
A. 7 Guidelines regarding use of conditions

Conditions are primarily used to specify network restrictions, for which the following types can be distinguished:
- Message Contents related constraints e.g. that a field \( B \) is mandatory present if the same message includes field \( A \) and when it is set value \( X \).

ETSI


--- Page 1173  ---


3GPP TS 38.331 version 17.0.0 Release 17
1172
ETSI TS 138331 V17.0.0 (2022-05)
- Configuration Constraints e.g. that a field \( D \) can only be signalled if field \( C \) is configured and set to value \( Y \). (i.e. regardless of whether field \( C \) is present in the same message or previously configured).

The use of these conditions is illustrated by an example.
```
-- /example/ ASN1START
RRCMessage-IEs ::= SEQUENCE [
    fieldA FieldA OPTIONAL, -- Need M
    fieldB FieldB OPTONAL, -- Cond FieldAsetToX
    fieldC FieldC OPTIONAL, -- Need M
    fieldD FieldD OPTIONAL, -- Cond FieldCsetToY
    nonCriticalExtension
}
-- /example/ ASN1STOP
```


\begin{tabular}{|l|l|}
\hline \multicolumn{1}{|c|}{ Conditional presence } & \multicolumn{1}{c|}{ Explanation } \\
\hline Field AsetToX & \begin{tabular}{l} 
The field is mandatory present if fieldA is included and set to valueX. Otherwise the field \\
is optionally present, need R.
\end{tabular} \\
\hline Field \( C \) setToY & \begin{tabular}{l} 
The field is optionally present, need M, if fieldC is configured and set to valueY. Otherwise \\
the field is absent and the UE does not maintain the value
\end{tabular} \\
\hline
\end{tabular}
A. 8 Miscellaneous

The following miscellaneous convention should be used:
- UE capabilities: TS 38.306 [26] specifies that the network should in general respect the UE's capabilities. Hence there is no need to include statement clarifying that the network, when setting the value of a certain configuration field, shall respect the related UE capabilities unless there is a particular need e.g. particularly complicated cases.

ETSI


--- Page 1174  ---


3GPP TS 38.331 version 17.0.0 Release 17
1173
ETSI TS 138331 V17.0.0 (2022-05)

Annex B (informative): RRC Information
B. 1 Protection of RRC messages

The following list provides information which messages can be sent (unprotected) prior to AS security activation and which messages can be sent unprotected after AS security activation. Those messages indicated "-" in "P" column should never be sent unprotected by gNB or UE. Further requirements are defined in the procedural text.
P... Messages that can be sent (unprotected) prior to AS security activation

A - I ... Messages that can be sent without integrity protection after AS security activation
\( \mathrm{A}-\mathrm{C} \ldots \) Messages that can be sent unciphered after AS security activation
NA... Message can never be sent after AS security activation

ETSI


--- Page 1175  ---


3GPP TS 38.331 version 17.0.0 Release 17
1174
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|}
\hline Message & P & A-I & A-C & Comment \\
\hline CounterCheck & - & - & - & \\
\hline CounterCheckResponse & - & - & - & \\
\hline DedicatedS/BRequest & + & - & - & \\
\hline DLDedicatedMessageSegment & \multicolumn{4}{|l|}{NOTE 1} \\
\hline DLInformationTransfer & + & - & - & \\
\hline DLinformation TransferMRDC & - & - & - & \\
\hline Failure/nformation & - & - & - & \\
\hline LocationMeasurement/indication & - & - & - & \\
\hline MCGFailure/nformation & - & - & - & \\
\hline MeasurementReportAppLayer & - & - & - & \\
\hline MIB & + & + & + & \\
\hline MeasurementReport & - & - & - & Measurement configuration may be sent prior to AS security activation. But: In order to protect privacy of UEs, MeasurementReport is only sent from the UE after successful AS security activation. \\
\hline MobilityFromNRCommand & - & - & - & \\
\hline Paging & + & + & + & \\
\hline RRCReconfiguration & + & - & - & The message shall not be sent unprotected before AS security activation if it is used to perform handover or to establish SRB2, SRB4, multicast MRBs and DRBs. \\
\hline RRCReconfiguration Complete & + & - & - & Unprotected, if sent as response to RRCReconfiguration which was sent before AS security activation. \\
\hline RRCReestablishment & - & - & + & Integrity protection applied, but no ciphering. \\
\hline RRCReestablishmentComplete & - & - & - & \\
\hline RRCReestablishmentRequest & - & - & + & This message is not protected by PDCP operation. However, a shortMAC-/ is included. \\
\hline RRCReject & + & + & + & Justification for A-I and A-C: the message can be sent in SRB0 in RRC_INACTIVE state, after the AS security is activated. \\
\hline RRCRelease & + & - & - & Justification for P: If the RRC connection only for signalling not requiring DRBs or ciphered messages, or the signalling connection has to be released prematurely, this message is sent as unprotected. RRCRelease message sent before AS security activation cannot include deprioritisationReq, suspendConfig, redirectedCarrierInfo, cellReselectionPriorities information fields. \\
\hline RRCResume & - & - & - & \\
\hline RRCResumeComplete & - & - & - & \\
\hline RRCResumeRequest & - & - & + & This message is not protected by PDCP operation. However, a resumeMAC-/is included. \\
\hline RRCResumeRequest1 & - & - & + & This message is not protected by PDCP operation. However, a resumeMAC-/is included. \\
\hline RRCSetup & + & + & + & Justification for A-I and A-C: the message can be sent in SRB0 in RRC_INACTIVE or RRC_CONNECTED states, after the AS security is activated. \\
\hline RRCSetupComplete & + & NA & NA & \\
\hline RRCSetupRequest & + & NA & NA & \\
\hline RRCSystemInfoRequest & + & \( { }^{+} \) & \( { }^{+} \) & Justification for A-I and A-C: the message can be sent in SRB0 in RRC_INACTIVE state, after the AS security is activated. \\
\hline SIB1 & + & + & + & \\
\hline SCGFailurelnformation & - & - & - & \\
\hline SCGFailurelnformationEUTRA & - & - & - & \\
\hline SecurityModeCommand & + & NA & NA & Integrity protection applied, but no ciphering (integrity verification done after the message received by RRC). \\
\hline SecurityModeComplete & - & - & + & The message is sent after AS security activation. Integrity protection applied, but no ciphering. Ciphering is applied after completing the procedure. \\
\hline
\end{tabular}

ETSI


--- Page 1176  ---


3GPP TS 38.331 version 17.0.0 Release 17
1175
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|}
\hline Message & P & A-I & A-C & Comment \\
\hline SecurityModeFailure & + & NA & NA & Neither integrity protection nor ciphering applied. \\
\hline SidelinkUE/nformationNR & + & - & - & The message shall not be sent unprotected before AS security activation if slCapability/nformationSidelink information field is included in the message. \\
\hline Systeminformation & + & + & + & \\
\hline UEAssistancelnformation & - & - & - & \\
\hline UECapabilityEnquiry & + & - & - & The network should retrieve UE capabilities only after AS security activation. \\
\hline UECapability/nformation & + & - & - & \\
\hline ULDedicatedMessageSegment & + & - & - & \\
\hline UEInformationRequest & - & - & - & \\
\hline UEInformationResponse & - & - & - & In order to protect privacy of UEs, UE/nformationResponse is only sent from the UE after successful security activation \\
\hline ULInformationTransfer & + & - & - & \\
\hline ULinformationTransferIRAT & \multicolumn{4}{|l|}{NOTE 2} \\
\hline ULInformationTransferMRDC & - & - & - & \\
\hline \multicolumn{5}{|c|}{\begin{tabular}{l}
NOTE 1: This message type carries segments of other RRC messages. The protection of an instance of this message is the same as for the message which this message is carrying. \\
NOTE 2: This message type carries others RRC messages. The protection of an instance of this message is the same as for the message which this message is carrying.
\end{tabular}} \\
\hline
\end{tabular}
B. 2 Description of BWP configuration options

There are two possible ways to configure BWP\#0 (i.e the initial BWP) for a UE:
1) Configure BWP-DownlinkCommon and BWP-UplinkCommon in ServingCellConfigCommon, but do not configure dedicated configurations in BWP-DownlinkDedicated or BWP-UplinkDedicated in ServingCellConfig.
2) Configure both BWP-DownlinkCommon and BWP-UplinkCommon in ServingCellConfigCommon and configure dedicated configurations in at least one of BWPDownlinkDedicated or BWP-UplinkDedicated in ServingCellConfig.

The same way of configuration is used for UL BWP\#0 and DL BWP\#0 if both are configured.
With the first option (illustrated by figure B2-1 below), the BWP\#0 is not considered to be an RRC-configured BWP, i.e. UE only supporting one BWP can still be configured with BWP\#1 in addition to BWP\#0 when using this configuration. The BWP\#0 can still be used even if it does not have the dedicated configuration, albeit in a more limited manner since only the SIB1-defined configurations are available. For example, only DCI format \( 1 \_0 \) can be used with BWP\#0 without dedicated configuration, so changing to another BWP requires RRCReconfiguration since DCI format \( 1 \_0 \) doesn't support DCI-based switching.

ETSI


--- Page 1177  ---


3GPP TS 38.331 version 17.0.0 Release 17
1176
ETSI TS 138331 V17.0.0 (2022-05)

Figure B2-1: BWP\#0 configuration without dedicated configuration

With the second option (illustrated by figure B2-2 below), the BWP\#0 is considered to be an RRC-configured BWP, i.e. UE only supporting one BWP cannot be configured with BWP\#1 in addition to BWP\#0 when using this configuration. However, UE supporting more than one BWP can still switch to and from BWP\#0 e.g. via DCI normally, and there are no explicit limitations to using the BWP\#0 (compared to the first option).

Figure B2-2: BWP\#0 configuration with dedicated configuration

For BWP\#0, the BWP-DownlinkCommon and BWP-UplinkCommon in ServingCellConfigCommon should match the parameters configured by MIB and SIB1 (if provided) in the corresponding serving cell.

ETSI


--- Page 1178  ---


3GPP TS 38.331 version 17.0.0 Release 17
1177
ETSI TS 138331 V17.0.0 (2022-05)

Annex C (normative):List of CRs Containing Early Implementable Features and Corrections

This annex lists the Change Requests (CRs) whose changes may be implemented by a UE of an earlier release than which the CR was approved in (i.e. CRs that contain on their coversheets the sentence "Implementation of this CR from Rel-N will not cause interoperability issues").

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table C-1: List of CRs Containing Early Implementable Features and Corrections}
\begin{tabular}{|l|l|l|l|l|}
\hline TDoc Number (RP-xxxxxx): CR Title & CR Number(s) & CR Revision Number(s) & Earliest Implementable Release & Additional Information \\
\hline RP-200335: Correction on usage of access category 2 for UAC for RNA update & 1141 & 2 & Release 15 & \\
\hline RP-201185: Introduction of signalling for high-speed train scenarios & 1464 & 5 & Release 15 & \\
\hline RP-201216: Release-16 UE capabilities based on RAN1, RAN4 feature lists and RAN2 & 1665 & 2 & Release 15 & Early implementation part is referring to the aspect covered by R2-2006203: Extension of CSI-RS capabilities per codebook type \\
\hline RP-202768: UE behaviour when UL 7.5 KHz shift is not supported & 2107 & 2 & Release 15 & \\
\hline RP-202790: Correction on uac-AccessCategory1SelectionAssistance Info & 2130 & 1 & Release 15 & \\
\hline RP-211483: Clarification on the initiation of RNA update & 2581 & 1 & Release 15 & \\
\hline RP-201190: Introduction of eCall over IMS for NR & 1670 & - & Release 15 & \\
\hline RP-212598: Distinguishing support of extended band n77 & 2810 & 2 & Release 15 & \\
\hline RP-213342: Duty cycle signalling for power class 1.5 & 2817 & 1 & Release 15 & \\
\hline RP-213345: CR on 38.331 for introducing UE capability of txDiversity & 2859 & 1 & Release 15 & \\
\hline RP-220497: Introduction of function for RRM enhancements for Rel-17 NR FR1 HST & 2898 & 2 & Release 16 & \\
\hline
\end{tabular}
\end{table}

ETSI


--- Page 1179  ---


3GPP TS 38.331 version 17.0.0 Release 17
1178
ETSI TS 138331 V17.0.0 (2022-05)

Annex D (normative):UE requirements on ASN. 1 comprehension
This clause specifies UE requirements regarding the ASN 1 transfer syntax support, i.e. the ASN 1 definitions to be comprehended by the UE.
A UE that indicates release \( X \) in field accessStratumRelease shall comprehend the entire transfer syntax (ASN.1) of release \( X \), in particular at least the first version upon ASN.1 freeze. The UE is however not required to support dedicated signalling related transfer syntax associated with optional features it does not support.

In case a UE that indicates release X in field accessStratumRelease supports a feature specified in release Y , which is later than release X , (i.e. early UE implementation) additional requirements apply. The UE obviously also has to support the ASN. 1 parts related to indicating support of the feature (in UE capabilities).

Critical extensions (dedicated signaling)
If the early implemented feature involves one or more critical extensions in dedicated signalling, the UE shall comprehend the parts of the transfer syntax (ASN.1) of release Y that are related to the feature implemented early. This, in particular, concerns the ASN. 1 parts related to configuration of the feature.

If configuration of an early implemented feature introduced in release \( Y \) involves a message or field that has been critically extended, the UE shall support configuration of all features supported by the UE that are associated with sub-fields of this critical extension. Apart from the early implemented feature(s), the UE needs, however, not to support functionality beyond what is defined in the release the UE indicates in access stratum release.

Let's consider the example of a UE indicating value X in field accessStratumRelease that supports the features A 1 , A 3 , and A 5 , associated with fields fieldA1, fieldA3 and fieldA5 of InformationElementA (see ASN.1 below).

The feature A5 implemented early is associated with fieldA5, and can only be configured by the -rY version of InformationElementA. In such case, the UE should support configuration of all the features A1, A3 and A5 associated with fields fieldA1, fieldA3 and fieldA5 by the -rY version of InformationElementA.

If, however, one of the features was modified, e.g. the feature A3 associated with fieldA3, the network should assume the UE only supports the feature A3 according to the release it indicated in field accessStratumRelease (i.e. X).

The UE is neither required to support the additional code-point ( \( n 80-v Y 0 \) ) nor the additional sub-field (fieldA3c-rY).
```
InformationElementA-rX ::= SEQUENCE {
    fieldAl-rX
    fieldA2-rX
    fieldA3-rX
}
InformationElementA-rY ::= SEQUENCE {
    fieldAl-rY
    fieldA2-rY InformationElementA2-rX
    fieldA3-rY InformationElementA3-rY
    fieldA4-rY InformationElementA4-rY
    fieldA5-rY InformationElementA5-rY
}
InformationElementA3-rX ::= SEQUENCE {
    fieldA3a-rX InformationElementA3a-rX
```

ETSI


--- Page 1180  ---


3GPP TS 38.331 version 17.0.0 Release 17
1179
ETSI TS 138331 V17.0.0 (2022-05)
```
    fieldA3b-rX ENUMERATED {n10, n20, n40} OPTIONAL -- Need. R
}
InformationElementA3-rY ::= SEQUENCE [
    fieldA3a-rY
    fieldA3b-rY
    fieldA3c-rY
}
```


Non-critical extensions (dedicated and broadcast signaling)
If the early implemented feature involves one or more non-critical extensions, the UE shall comprehend the parts of the transfer syntax (ASN.1) of release Y that are related to the feature implemented early.

If the early implemented feature involves one or more non-critical extensions in dedicated signaling, the network does not include extensions introduced after the release \( X \) that are not the parts related to the feature which the UE indicates early support of in UE capabilities. The UE shall anyway comprehend the parts of the transfer syntax (ASN-1) which indicate absence of such extensions.

If the early implemented feature involves one or more non-critical extensions in system information, the SIB(s) containing the release Y fields related to the early implemented features may also include other extensions introduced after the release X that are not the parts related to the feature which the UE supports. The UE shall comprehend such intermediate fields (but again is not required to support the functionality associated with these intermediate fields, in case this concerns optional features not supported by the UE).

ETSI


--- Page 1181  ---


3GPP TS 38.331 version 17.0.0 Release 17
1180
ETSI TS 138331 V17.0.0 (2022-05)

Annex E (informative):
Change history

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline \multicolumn{8}{|c|}{Change history} \\
\hline Date & Meeti ng & TDoc & CR & R ev & C at & Subject/Comment & New versio n \\
\hline 04/2017 & RAN2 \#97bis & R2-1703395 & & & & & 0.0.1 \\
\hline 04/2017 & RAN2 \#97bis & R2-1703922 & & & & & 0.0.2 \\
\hline 05/2017 & RAN2 \#98 & R2-1705815 & & & & & 0.0.3 \\
\hline 06/2017 & RAN2 \#NR2 & R2-1707187 & & & & & 0.0.4 \\
\hline 08/2017 & RAN2 \#99 & R2-1708468 & & & & & 0.0.5 \\
\hline 09/2017 & RAN2 \#99bis & R2-1710557 & & & & & 0.1.0 \\
\hline 11/2017 & RAN2 \#100 & R2-1713629 & & & & & 0.2.0 \\
\hline 11/2017 & RAN2 \#100 & R2-1714126 & & & & & 0.3.0 \\
\hline 12/2017 & RAN2 \#100 & R2-1714259 & & & & & 0.4.0 \\
\hline 12/2017 & RP\#7 8 & RP-172570 & & & & Submitted for Approval in RAN\#78 & 1.000 \\
\hline 12/2017 & RP\#7 8 & & & & & Upgraded to Rel-15 (MCC) & 15.0.0 \\
\hline 03/2018 & RP\#7 9 & RP-180479 & 0008 & 1 & F & Conrections for EN-DC (Note: the clause numbering between 15.0.0 and 15.1.0 has changed in some cases). & 15.1.0 \\
\hline 06/2018 & RP-80 & RP-181326 & 0042 & 7 & F & Miscellaneous EN-DC corrections & 15.2.0 \\
\hline & RP-80 & & & & & Correction: Duplicate Foreword clause removed \& ASN. 1 clauses touched up & 15.2.1 \\
\hline 09/2018 & RP-81 & RP-181942 & 0100 & 4 & F & Introduction of SA & 15.3 .0 \\
\hline 12/2018 & RP-82 & RP-182656 & 0179 & 3 & F & Handling of Resume Failure & 15.4.0 \\
\hline & RP-82 & RP-182651 & 0187 & 1 & F & Clarification on the presence of ra-ResponseWindow & 15.4.0 \\
\hline & RP-82 & RP-182656 & 0188 & 3 & F & Addition of RAN specific Access Category & 15.4 .0 \\
\hline & RP-82 & RP-182653 & 0199 & 2 & F & CR for TS38.331 on MIB & 15.4.0 \\
\hline & RP-82 & RP-182653 & 0200 & 1 & F & CR for TS38.331 on PDCCH-ConfigSIB & 15.4.0 \\
\hline & RP-82 & RP-182661 & 0202 & 2 & F & Handling Cell Reselection during SI Request & 15.4.0 \\
\hline & RP-82 & RP-182649 & 0213 & 2 & F & Conrections on security field descriptions & 15.4 .0 \\
\hline & RP-82 & RP-182649 & 0216 & 2 & F & Remain issue for T302 & 15.4.0 \\
\hline & RP-82 & RP-182649 & 0219 & 1 & F & [C204] Handling of timer T380 & 15.4.0 \\
\hline & RP-82 & RP-182655 & 0229 & 2 & F & Clarification on configured grant timer in 38.331 & 15.4.0 \\
\hline & RP-82 & RP-182663 & 0232 & 2 & F & CR for ServingCellConfigCommon in 38.331 & 15.4.0 \\
\hline & RP-82 & RP-182659 & 0234 & 3 & F & Introduction of cell level rate matching parameters in ServingCellConfig & 15.4.0 \\
\hline & RP-82 & RP-182650 & 0235 & 2 & F & CR for introducing PSCell frequency in CG-Config & 15.4.0 \\
\hline & RP-82 & RP-182650 & 0236 & 2 & F & CR for security handling for eLTE in 38.331 & 15.4.0 \\
\hline & RP-82 & RP-182650 & 0237 & 1 & F & Handling on simultaneously triggered NAS\&AS events (1770) & 15.4.0 \\
\hline & RP-82 & RP-182650 & 0238 & 2 & F & Handling on security keys for resume procedure (1774) & 15.4.0 \\
\hline & RP-82 & RP-182664 & 0239 & 5 & F & RIL 1556, 1557, 1558 on RB handling when resuming & 15.4 .0 \\
\hline & RP-82 & RP-182650 & 0242 & 2 & F & Security for RRC connection release & 15.4.0 \\
\hline & RP-82 & RP-182650 & 0243 & 4 & F & Conrections on reestablishment and security procedures & 15.4.0 \\
\hline & RP-82 & RP-182650 & 0244 & 1 & F & RIL I118 on release case to upper layers for CN paging for a UE in RRC INACTIVE & 15.4.0 \\
\hline & RP-82 & RP-182650 & 0246 & 2 & F & CR on SI request procedure in TS38.331 & 15.4.0 \\
\hline & RP-82 & RP-182650 & 0248 & 2 & F & CR to 38331 on ul-DataSplitThreshold for SRB & 15.4.0 \\
\hline & RP-82 & RP-182652 & 0249 & 2 & F & Clarification of guami-Type & 15.40 \\
\hline & RP-82 & RP-182652 & 0252 & 1 & F & CR to 38.331 on Protection of RRC messages Table & 15.4.0 \\
\hline & RP-82 & RP-182663 & 0254 & 2 & F & Access baning check after handover & 15.4.0 \\
\hline & RP-82 & RP-182663 & 0259 & 3 & F & Stop of T390 and related UE actions & 15.4 .0 \\
\hline & RP-82 & RP-182657 & 0260 & 4 & F & Conrections for handover between NR and E-UTRA & 15.4.0 \\
\hline & RP-82 & RP-182738 & 0267 & 3 & F & CR on ssb-ToMeasure in MeasurementTimingConfiguration & 15.4.0 \\
\hline & RP-82 & RP-182659 & 0269 & 3 & F & Clarification of the applicability of 38.331 to EN-DC & 15.4.0 \\
\hline
\end{tabular}

ETSI


--- Page 1182  ---


3GPP TS 38.331 version 17.0.0 Release 17
1181
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|}
\hline RP-82 & RP-182654 & 0270 & 3 & F & Clarification on the smtc signalled for intra-NR handover, PSCell change or SCell addition & 15.4.0 \\
\hline RP-82 & RP-182654 & 0273 & 3 & F & CR on fallback to the setup procedure & 15.4.0 \\
\hline RP-82 & RP-182654 & 0275 & 1 & F & Correction on cell sorting for periodical measurement reporting & 15.4.0 \\
\hline RP-82 & RP-182660 & 0277 & 2 & F & Measurement related actions upon re-establishment & 15.4.0 \\
\hline RP-82 & RP-182654 & 0278 & 1 & F & CR on threshold description for cell quality derivation & 15.4.0 \\
\hline RP-82 & RP-182654 & 0282 & 1 & F & CR to avoid unnecessary L3 filtered beam measurements & 15.4.0 \\
\hline RP-82 & RP-182660 & 0283 & 2 & F & CR on CGl reporting & 15.4.0 \\
\hline RP-82 & RP-182660 & 0291 & 3 & F & Additional UE capabilities for NR standalone & 15.4.0 \\
\hline RP-82 & RP-182667 & 0294 & 4 & F & NR RRC Processing Time & 15.4.0 \\
\hline RP-82 & RP-182812 & 0295 & 5 & F & Update of L1/RF capabilities & 15.4.0 \\
\hline RP-82 & RP-182651 & 0296 & 2 & F & UE configuration on re-establishment procedure & 15.4.0 \\
\hline RP-82 & RP-182651 & 0298 & 2 & F & SIB size limitation [M201] & 15.4.0 \\
\hline RP-82 & RP-182651 & 0299 & 2 & F & Correction on SRS-TPC-CommandConfig & 15.4.0 \\
\hline RP-82 & RP-182651 & 0302 & 2 & F & Clarification on counter check procedure & 15.4.0 \\
\hline RP-82 & RP-182666 & 0307 & 4 & F & CR on the Clarification for the Support of the Delay Budget Report in NR & 15.4.0 \\
\hline RP-82 & RP-182666 & 0320 & 3 & F & ssb-Positions InBurst correction & 15.4.0 \\
\hline RP-82 & RP-182666 & 0325 & 3 & F & Barring behaviour when SIB1 reception fails & 15.4.0 \\
\hline RP-82 & RP-182666 & 0329 & 5 & F & System Information Storing and Validity Clarifications and Corrections & 15.4.0 \\
\hline RP-82 & RP-182666 & 0330 & 3 & F & SIBs required before initiating connection & 15.4.0 \\
\hline RP-82 & RP-182652 & 0333 & 1 & F & On contens of measObjectEUTRA & 15.4.0 \\
\hline RP-82 & RP-182654 & 0335 & 2 & F & A3 and A5 corrections - neighbouring cell definition & 15.4.0 \\
\hline RP-82 & RP-182650 & 0339 & 2 & F & SI reception in RRC Connected mode (RIL\#||611) & 15.4.0 \\
\hline RP-82 & RP-182650 & 0340 & 2 & F & Miscellaneous corrections on SI procedures & 15.4.0 \\
\hline RP-82 & RP-182652 & 0342 & 1 & F & On RRM measurements related procedual text corrections & 15.4.0 \\
\hline RP-82 & RP-182651 & 0344 & 1 & F & Clarification for absense of nr-NS-PmaxList IE & 15.4.0 \\
\hline RP-82 & RP-182652 & 0345 & 2 & F & Clarification on paging in connected mode & 15.4.0 \\
\hline RP-82 & RP-182651 & 0350 & 2 & F & ASN. 1 conrection to fr-InfoListSCG in CG-Config & 15.4.0 \\
\hline RP-82 & RP-182661 & 0355 & 2 & F & Update of L2 capability parameters & 15.4.0 \\
\hline RP-82 & RP-182651 & 0364 & 1 & F & Procedures for full config at RRCResume & 15.4.0 \\
\hline RP-82 & RP-182651 & 0365 & 2 & F & Clarification of PDCP-Config field descriptions & 15.4.0 \\
\hline RP-82 & RP-182653 & 0368 & 2 & F & UE Context handling during handover to NR & 15.4.0 \\
\hline RP-82 & RP-182652 & 0371 & 2 & F & [E255] CR to 38.331 on corrections related to CGl reporting timer T321 & 15.4.0 \\
\hline RP-82 & RP-182655 & 0375 & 3 & F & R2-1817981 CR to 38.331 on pendingRnaUpdate setting & 15.4.0 \\
\hline RP-82 & RP-182653 & 0376 & 2 & F & Introducing procedure for reporting RLC failures & 15.4.0 \\
\hline RP-82 & RP-182654 & 0379 & 2 & F & Conrection of frequency band indication in MeasObjectNR & 15.4.0 \\
\hline RP-82 & RP-182654 & 0382 & 2 & F & RRC connection release triggered by upper layers & 15.4.0 \\
\hline RP-82 & RP-182660 & 0384 & 3 & F & Correction to configuration of measurement object & 15.4.0 \\
\hline RP-82 & RP-182665 & 0388 & 3 & F & Conrection to 38331 in SRS-Config & 15.4.0 \\
\hline RP-82 & RP-182657 & 0391 & 2 & F & Conrection for PowerControl-related issues & 15.4.0 \\
\hline RP-82 & RP-182668 & 0395 & 4 & F & Inter-band EN-DC Configured Output Power requirements & 15.4.0 \\
\hline RP-82 & RP-182655 & 0396 & 2 & F & E573 Configuration of SRB1 during Resume & 15.4.0 \\
\hline RP-82 & RP-182655 & 0402 & 1 & F & Triggers for abortion of RRC establishment & 15.4.0 \\
\hline RP-82 & RP-182656 & 0406 & 2 & F & Correction on CN type indication for Redirection from NR to E-UTRA & 15.4.0 \\
\hline RP-82 & RP-182664 & 0409 & 4 & F & Miscellaneous minor corrections & 15.4.0 \\
\hline RP-82 & RP-182654 & 0410 & 1 & F & Invalidation of L1 parameter nrofCQIsPerReport & 15.4.0 \\
\hline RP-82 & RP-182654 & 0411 & 1 & F & Clarifications on RNA update and CN registration (NO23) & 15.4.0 \\
\hline RP-82 & RP-182666 & 0412 & 3 & F & Mssing optionality bit in CG-ConfigInfo & 15.4.0 \\
\hline RP-82 & RP-182662 & 0414 & 2 & F & Clarification for the implementation of UE feature list item 6-1 (BWP op1) & 15.4.0 \\
\hline RP-82 & RP-182654 & 0417 & 1 & F & Clarification on ssb-Positions|nBurst & 15.4 .0 \\
\hline RP-82 & RP-182667 & 0418 & 3 & F & Conrection to commonControlResourceSet & 15.4.0 \\
\hline RP-82 & RP-182667 & 0420 & 2 & F & Correction to TDD configuration in SIB1 & 15.4.0 \\
\hline RP-82 & RP-182668 & 0421 & 5 & F & Clarification on handling of default parameters & 15.4 .0 \\
\hline RP-82 & RP-182663 & 0429 & 2 & F & SRB3 integrity protection failure handling & 15.4.0 \\
\hline RP-82 & RP-182653 & 0431 & 2 & F & Corrections to the field decriptions of System Information & 15.4.0 \\
\hline RP-82 & RP-182653 & 0434 & 1 & F & Conrection to SI provision in connected mode & 15.4.0 \\
\hline RP-82 & RP-182661 & 0436 & 3 & F & PDCCH Monitoring Occasions in SI Window & 15.4.0 \\
\hline RP-82 & RP-182655 & 0438 & 3 & F & CR on SI Message Acquisition & 15.4.0 \\
\hline RP-82 & RP-182652 & 0439 & 1 & F & Update of nas-SecurityParamFromNR according to LS from SA3 & 15.4.0 \\
\hline RP-82 & RP-182652 & 0445 & 2 & F & Correction to Default MAC Cell Group configuration & 15.4.0 \\
\hline RP-82 & RP-182652 & 0447 & 1 & F & Conrection to missing field descriptions of PLMN Identity & 15.4.0 \\
\hline RP-82 & RP-182657 & 0448 & 2 & F & Introducing PDCP suspend procedure & 15.4.0 \\
\hline RP-82 & RP-182657 & 0449 & 2 & F & Conrection to PDCP statusReportRequired & 15.4.0 \\
\hline RP-82 & RP-182664 & 0454 & 3 & F & CR to 38.331 on the ambiguity of targetCellIdentity in Resume/Reestablishment MAC-I calculation & 15.4.0 \\
\hline RP-82 & RP-182655 & 0457 & 1 & F & Corrections on P-Max description & 15.4.0 \\
\hline RP-82 & RP-182651 & 0460 & 2 & F & Clarification on Configuration of multiplePHR for EN-DC and NR-CA & 15.4 .0 \\
\hline RP-82 & RP-182656 & 0469 & 2 & F & Conrection on conditional presence of PCellOnly & 15.4.0 \\
\hline RP-82 & RP-182657 & 0474 & 4 & F & Introduction of power boosting indicator for pi2BPSK waveform & 15.4.0 \\
\hline RP-82 & RP-182655 & 0475 & 1 & F & Conrection on the allowedBC-ListMRDC & 15.4.0 \\
\hline RP-82 & RP-182649 & 0476 & 2 & F & Removal of restriction on RB removal and addition & 15.4.0 \\
\hline
\end{tabular}

ETSI


--- Page 1183  ---


3GPP TS 38.331 version 17.0.0 Release 17
1182
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|}
\hline RP-82 & RP-182649 & 0482 & 2 & F & Correction to full configuration & 15.4.0 \\
\hline RP-82 & RP-182661 & 0492 & 3 & F & CR on MeasurementTimingConfiguration & 15.4 .0 \\
\hline RP-82 & RP-182654 & 0502 & 1 & F & Bandwidth configuration for initial BWP & 15.4.0 \\
\hline RP-82 & RP-182664 & 0503 & 4 & F & CORESET\#0 configuration when SIB1 is not broadcast & 15.4.0 \\
\hline RP-82 & RP-182663 & 0506 & 1 & F & Correction on the behaviors with cell reselection while T302 is running & 15.4.0 \\
\hline RP-82 & RP-182661 & 0509 & 2 & F & Conrection on SDAP reconfiguration handling & 15.4.0 \\
\hline RP-82 & RP-182663 & 0510 & 1 & F & Clarification for the UE behaviour in camped nomally and camped on any cell states & 15.4.0 \\
\hline RP-82 & RP-182663 & 0514 & 2 & F & Conrection to description of parameter Ns nAndPagingFrameOffset & 15.4.0 \\
\hline RP-82 & RP-182649 & 0515 & - & F & Conrection to description of parameter Ns & 15.4.0 \\
\hline RP-82 & RP-182661 & 0516 & 1 & F & CR on UE behaviour after SI Acquisition Failure & 15.4.0 \\
\hline RP-82 & RP-182662 & 0518 & 1 & F & CR on PUCCH-ConfigCommon & 15.4.0 \\
\hline RP-82 & RP-182662 & 0520 & 1 & F & Clarifications on receiving RRCReject without wait timer & 15.4.0 \\
\hline RP-82 & RP-182665 & 0522 & 1 & F & CR on powerControlOffset & 15.4.0 \\
\hline RP-82 & RP-182664 & 0524 & 2 & F & Comection to configuration of firstPDCCH-MonitoringOccasionOfPO & 15.4.0 \\
\hline RP-82 & RP-182660 & 0539 & 1 & F & R on PCCH-Config & 15.4.0 \\
\hline RP-82 & RP-182649 & 0541 & & F & Clarification to no baning configuration for Implicit UAC & 15.4.0 \\
\hline RP-82 & RP-182649 & 0542 & & F & Conrection to Access Category and barring config detemination for implicit access barring & 15.4.0 \\
\hline RP-82 & RP-182664 & 0543 & 2 & F & Per serving cell MIMO layer configuration & 15.4.0 \\
\hline RP-82 & RP-182661 & 0545 & 1 & F & Correction to reconfiguration with sync & 15.4.0 \\
\hline RP-82 & RP-182659 & 0552 & 1 & F & Correction for SSB power & 15.4.0 \\
\hline RP-82 & RP-182659 & 0554 & 1 & F & Corrections on SearchSpace configuration & 15.4.0 \\
\hline RP-82 & RP-182665 & 0558 & 1 & F & Conrection for TCl state in ControlResourceSet & 15.4.0 \\
\hline RP-82 & RP-182663 & 0560 & 1 & F & CR for the optional configuration of subbandSize & 15.4.0 \\
\hline RP-82 & RP-182650 & 0562 & & F & Conrection on ShortMAC-I description in 38.331 & 15.4.0 \\
\hline RP-82 & RP-182661 & 0567 & 1 & F & CR to the field descriptions of System Information & 15.4.0 \\
\hline RP-82 & RP-182650 & 0569 & & F & Clarification on SRB3 release & 15.4 .0 \\
\hline RP-82 & RP-182650 & 0570 & - & F & Avoiding security risk for RLC UM bearers during termination point change & 15.4.0 \\
\hline RP-82 & RP-182660 & 0571 & 1 & F & MO configuration with SSB SCS for a given SSB frequency & 15.4.0 \\
\hline RP-82 & RP-182663 & 0572 & 1 & F & Barring alleviation for emergency service & 15.4.0 \\
\hline RP-82 & RP-182664 & 0575 & 1 & F & Corrections for security configurations during setup of SRB1 & 15.4.0 \\
\hline RP-82 & RP-182660 & 0577 & 1 & F & Clarification of UE behaviour when frequencyBandList is absent in SIB4 & 15.4.0 \\
\hline RP-82 & RP-182661 & 0578 & 2 & F & Handling of missing fields in SIB1 & 15.4.0 \\
\hline RP-82 & RP-182659 & 0580 & 1 & F & Correction to ControlResourceSetZero & 15.4.0 \\
\hline RP-82 & RP-182667 & 0582 & 2 & F & Full configuration for inter-RAT handover & 15.4.0 \\
\hline RP-82 & RP-182664 & 0587 & 1 & F & Corrections on number of RadioLinkMonitoringRS condifuration & 15.4.0 \\
\hline RP-82 & RP-182659 & 0591 & 1 & F & Clarification on phr-Type2OtherCell & 15.4.0 \\
\hline RP-82 & RP-182667 & 0594 & 2 & F & Addition of PCl in MeasTiming & 15.4.0 \\
\hline RP-82 & RP-182667 & 0600 & 5 & F & Clarifications to SIBs requiring request procedure & 15.4 .0 \\
\hline RP-82 & RP-182659 & 0601 & 1 & F & Conrection for support of initial downlink BWP & 15.4.0 \\
\hline RP-82 & RP-182657 & 0602 & 1 & F & Miscellaneous corrections related to idle mode SIBs & 15.4.0 \\
\hline RP-82 & RP-182657 & 0603 & 1 & F & Conrection for missing fields in SIB2 and SIB4 & 15.4.0 \\
\hline RP-82 & RP-182657 & 0604 & 2 & F & Conrection to Q-QualMin value range & 15.4 .0 \\
\hline RP-82 & RP-182663 & 0616 & 1 & F & Clarification of cell reselection during resume procedure & 15.4.0 \\
\hline RP-82 & RP-182663 & 0617 & 1 & F & Determination of Access Identities for RRC-triggered Access Attempts & 15.4.0 \\
\hline RP-82 & RP-182663 & 0618 & 1 & F & CR to 38.331 on stopping of timer T390 upon reception of RRCRelease & 15.40 \\
\hline RP-82 & RP-182840 & 0620 & 3 & F & CR on MN/SN coordination for report CGl procedure & 15.4.0 \\
\hline RP-82 & RP-182666 & 0624 & 2 & F & CR to 38.331 on aligning I-RNTI terminology in paging and SuspendConfig (Alt.2) & 15.4.0 \\
\hline RP-82 & RP-182665 & 0627 & 2 & F & CR to 38.331 on IRAT Cell reselection in RRC INACTIVE & 15.4.0 \\
\hline RP-82 & RP-182662 & 0638 & 1 & F & CR for pendingRnaUpdate set & 15.4.0 \\
\hline RP-82 & RP-182665 & 0640 & 2 & F & Corrections on BWP ID & 15.4.0 \\
\hline RP-82 & RP-182664 & 0643 & 1 & F & Inter-frequency handover capability & 15.4.0 \\
\hline RP-82 & RP-182659 & 0646 & 1 & F & Search space configuration for DCl format 2 _ 0 monitoring & 15.4.0 \\
\hline RP-82 & RP-182739 & 0647 & 3 & F & Correction on power headroom configuration exchange & 15.4.0 \\
\hline RP-82 & RP-182665 & 0649 & 2 & F & UE capability on PA architecture & 15.4.0 \\
\hline RP-82 & RP-182662 & 0654 & 1 & F & CR on pdsch-TimeDomainAllocationList and pusch-TimeDomainAllocationList & 15.4.0 \\
\hline RP-82 & RP-182664 & 0655 & 1 & F & Correction on the SSB based RACH configuration & 15.4.0 \\
\hline RP-82 & RP-182659 & 0656 & 1 & F & CR on starting bit of Format 2-3 & 15.4.0 \\
\hline RP-82 & RP-182663 & 0660 & 1 & C & CR on wait timer in RRC release & 15.4.0 \\
\hline RP-82 & RP-182662 & 0664 & 1 & F & SCell release at RRC Reestablishment & 15.4.0 \\
\hline RP-82 & RP-182663 & 0665 & 1 & F & Clean up of SRB1 temminology & 15.4.0 \\
\hline RP-82 & RP-182662 & 0670 & 1 & F & Conrection on the size of PUCCH resource ID & 15.4.0 \\
\hline RP-82 & RP-182667 & 0673 & 3 & F & CR to 38.331 on Integrity Check failure at RRC Reestablishment & 15.4.0 \\
\hline RP-82 & RP-182661 & 0680 & 1 & F & Correction on SI message acquisition timing & 15.4.0 \\
\hline RP-82 & RP-182653 & 0682 & & F & Add t-ReselectionNR-SF in SIB2 & 15.4.0 \\
\hline RP-82 & RP-182654 & 0683 & & F & freqBandIndicatorNR correction in MultiFrequencyBandListNR-SIB & 15.4.0 \\
\hline RP-82 & RP-182658 & 0684 & 2 & F & Conrections to CellSelectionInfo in SIB1 and SIB4 & 15.4.0 \\
\hline RP-82 & RP-182654 & 0686 & & F & Conrection on the field description of DRX timers & 15.4.0 \\
\hline RP-82 & RP-182661 & 0687 & 1 & F & Conrection on DC subcantier usage in SetupComplete message & 15.4.0 \\
\hline
\end{tabular}

ETSI


--- Page 1184  ---


3GPP TS 38.331 version 17.0.0 Release 17
1183
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-82 & RP-182665 & 0688 & 3 & F & Various canier frequency definiton corrections & 15.4.0 \\
\hline & RP-82 & RP-182661 & 0689 & 1 & F & CR on signaling contiguous and non-contiguous EN-DC capability & 15.40 \\
\hline & RP-82 & RP-182654 & 0692 & & F & Update of the usage of QCL type-C & 15.40 \\
\hline & RP-82 & RP-182659 & 0694 & 1 & F & Cleanup of references to L1 specifications & 15.4.0 \\
\hline & RP-82 & RP-182660 & 0695 & 1 & F & Conrection of MeasResultEUTRA & 15.4.0 \\
\hline & RP-82 & RP-182660 & 0696 & 1 & F & Missing need code for refFreqCSI-RS & 15.40 \\
\hline & RP-82 & RP-182661 & 0697 & 2 & F & Mssing procedure text in RRC Reconfiguration & 15.4.0 \\
\hline & RP-82 & RP-182781 & 0700 & 3 & F & Conection to UE capability procedures in 38.331 & 15.4.0 \\
\hline & RP-82 & RP-182667 & 0701 & 1 & F & Conrection to aperiodicTriggeringOffset & 15.4.0 \\
\hline & RP-82 & RP-182664 & 0709 & 1 & F & CR to 38.331 on including serving cell measurements & 15.4.0 \\
\hline & RP-82 & RP-182660 & 0711 & 1 & F & CR to 38.331 on associatedSSB & 15.4.0 \\
\hline & RP-82 & RP-182662 & 0714 & 1 & F & CR on 38.331 for RRCResumeRequest and RRCResumeRequest1 and protection of RRCResumeRequest 1 & 15.4.0 \\
\hline & RP-82 & RP-182667 & 0715 & 2 & F & Conrection for reporting of NR serving cell measurements when rsType is missing & 15.4.0 \\
\hline & RP-82 & RP-182656 & 0719 & 1 & F & Clarification of the values for RangeToBestCell & 15.4.0 \\
\hline & RP-82 & RP-182668 & 0721 & 2 & F & CR on handling of timer T380 & 15.40 \\
\hline & RP-82 & RP-182662 & 0723 & 2 & F & CR on supporting signalling only connection & 15.4.0 \\
\hline & RP-82 & RP-182838 & 0725 & 3 & F & Signalling introduction of SRS switching capability & 15.4.0 \\
\hline & RP-82 & RP-182667 & 0729 & 3 & B & CR on signalling introduction of UE overheating support in NR SA scenario & 15.4.0 \\
\hline & RP-82 & RP-182856 & 0730 & 4 & F & CR on SRS antenna switching & 15.4.0 \\
\hline & RP-82 & RP-182660 & 0731 & 1 & F & Correction to offsetToPointA & 15.4.0 \\
\hline & RP-82 & RP-182655 & 0732 & - & F & Conrection to cell selection parameters & 15.4.0 \\
\hline & RP-82 & RP-182665 & 0746 & 2 & F & CR to 38.331 on stopping T302 and UE related actions & 15.4.0 \\
\hline & RP-82 & RP-182666 & 0750 & 2 & F & Conrection on indication for user plane resource release & 15.4.0 \\
\hline & RP-82 & RP-182662 & 0767 & 1 & F & Correction on the terminology scg-ChangeFailure & 15.4.0 \\
\hline & RP-82 & RP-182661 & 0768 & 1 & F & Correction on default configuration & 15.4.0 \\
\hline & RP-82 & RP-182660 & 0772 & 1 & F & Clarification of measurement object for beam reporting for NR cells & 15.4.0 \\
\hline & RP-82 & RP-182667 & 0773 & 3 & F & CR to 38.331 on UE AS Context definition - Include suspendConfig & 15.4.0 \\
\hline & RP-82 & RP-182661 & 0778 & 1 & F & CR to 38.331 on HO support in Setup Procedure & 15.4.0 \\
\hline & RP-82 & RP-182656 & 0781 & - & F & CR on description of k0 & 15.4.0 \\
\hline & RP-82 & RP-182666 & 0783 & 2 & F & CR to 38.331 on removing FFS of locationInfo & 15.4.0 \\
\hline & RP-82 & RP-182661 & 0787 & - & F & Clarification on MIB Acquisition & 15.4.0 \\
\hline & RP-82 & RP-182662 & 0788 & - & F & CR to 38331 on release after completion of inter-RAT HO & 15.4.0 \\
\hline & RP-82 & RP-182662 & 0789 & - & F & CR to 38.331 on rbg-Size in PDSCH-Config, PUSCH-Config and ConfiguredGrantConfig & 15.4.0 \\
\hline & RP-82 & RP-182657 & 0790 & & F & Advanced processing time configuration for PDSCH and PUSCH & 15.4.0 \\
\hline & RP-82 & RP-182896 & 0791 & 2 & F & UE specific channel bandwidth signaling & 15.4.0 \\
\hline
\end{tabular}

ETSI


--- Page 1185  ---


3GPP TS 38.331 version 17.0.0 Release 17
1184
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline 03/2019 & RP-83 & RP-190541 & 0416 & 4 & F & Clarification on hopping parameters for PUSCH & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0593 & 2 & F & Removal of creation of MCG MAC entity & 15.5.0 \\
\hline & RP-83 & RP-190633 & 0792 & 1 & F & Capability for aperiodic CSI-RS triggering with different numerology between PDCCH and CSI-RS & 15.5.0 \\
\hline & RP-83 & RP-190541 & 0796 & 2 & F & Conrection on Mapping between SSBs and PDCCH Monitoring Occasions in Sl Window & 15.50 \\
\hline & RP-83 & RP-190541 & 0797 & 2 & F & Correction to SI Reqeust Procedure & 15.5.0 \\
\hline & RP-83 & RP-190546 & 0798 & 2 & F & CR to 38.331 on clarification of reportCG| & 15.5.0 \\
\hline & RP-83 & RP-190545 & 0799 & 2 & F & Describing mandatory/optional information in inter-node RRC messages & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0800 & 1 & F & Search space configuration for cross canier scheduling & 15.5 .0 \\
\hline & RP-83 & RP-190542 & 0803 & 1 & F & Clarification on FeatureSetCombinationld zero value & 15.5 .0 \\
\hline & RP-83 & RP-190546 & 0805 & 2 & F & Clarification on UE Capability Request Filtering & 15.5.0 \\
\hline & RP-83 & RP-190545 & 0807 & 3 & F & Miscellaneous non-controversial conrections & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0808 & 2 & F & CR to 38.331 on MAC configuration & 15.5 .0 \\
\hline & RP-83 & RP-190543 & 0810 & 2 & F & Correction to SCG failiure & 15.5 .0 \\
\hline & RP-83 & RP-190540 & 0811 & 1 & F & Clarifying handling of parent and child IE need nodes & 15.5.0 \\
\hline & RP-83 & RP-190544 & 0812 & 2 & F & Clarification to channel bandwidth signalling & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0813 & 1 & F & Clarifications to BWP configuration options & 15.5 .0 \\
\hline & RP-83 & RP-190543 & 0822 & 2 & F & Conrection to EUTRA-MBSFN-SubframeConfig & 15.50 .0 \\
\hline & RP-83 & RP-190545 & 0823 & 2 & F & Clarification on dedicated serving cell configuration in Re-establishment & 15.5.0 \\
\hline & RP-83 & RP-190541 & 0828 & 2 & F & Clarification on the BWP id configuration & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0836 & 1 & F & Upon entering a new PLMN which is in the list of EPLMNs in RRC INACTIVE state & 15.50 \\
\hline & RP-83 & RP-190546 & 0843 & 1 & F & EUTRA UE capability filtering in NR UE capability enquiry & 15.5 .0 \\
\hline & RP-83 & RP-190543 & 0847 & 2 & F & Correction to SIB1 transmission during handover & 15.5 .0 \\
\hline & RP-83 & RP-190545 & 0850 & 2 & F & Clarification to monitoring occasion of PWS notification & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0853 & 1 & F & HandoverPreparationInformation for CU/DU & 15.5 .0 \\
\hline & RP-83 & RP-190542 & 0855 & 1 & F & CR to introduce simultaneousRxDataSSB-DiffNumerology for NR SA & 15.5.0 \\
\hline & RP-83 & RP-190550 & 0858 & - & F & Condition on integrity protection for DRB & 15.5 .0 \\
\hline & RP-83 & RP-190544 & 0860 & 2 & F & Handling on UE Inactive AS context upon resume & 15.5 .0 \\
\hline & RP-83 & RP-190542 & 0861 & 1 & F & Mscellaneous Corrections for INACTIVE & 15.5 .0 \\
\hline & RP-83 & RP-190542 & 0864 & 1 & F & Correction on RRC processing delay & 15.5.0 \\
\hline & RP-83 & RP-190540 & 0865 & - & F & Dummify the ue-BeamLockFunction IE & 15.5 .0 \\
\hline & RP-83 & RP-190545 & 0866 & 2 & F & Further update of Need codes & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0867 & 1 & F & Corrections to reestablishment procedure & 15.5 .0 \\
\hline & RP-83 & RP-190545 & 0868 & 2 & F & CR on use of positioning measurement gaps for subframe and slot timing detection towards E-UTRA & 15.5.0 \\
\hline & RP-83 & RP-190542 & 0876 & 2 & F & Barring alleviation when T302 or T390 is stopped & 15.5 .0 \\
\hline & RP-83 & RP-190544 & 0877 & 2 & F & Correction on smtc configuration in NR SCell addition procedure & 15.5 .0 \\
\hline & RP-83 & RP-190543 & 0884 & 2 & F & Conrection on the configuration for transform preceding of PUSCH & 15.5 .0 \\
\hline & RP-83 & RP-190543 & 0896 & 2 & F & Conrection to Need Codes in system information & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0897 & 1 & F & Conrections on drb-ContinueROHC & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0898 & 1 & F & Correction on outOfOrderDelivery & 15.5 .0 \\
\hline & RP-83 & RP-190542 & 0902 & 1 & F & Corrections on radio link failure related actions & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0904 & 1 & F & Clarification for SIB validity & 15.5 .0 \\
\hline & RP-83 & RP-190540 & 0905 & - & F & Corrections to MFBI & 15.5 .0 \\
\hline & RP-83 & RP-190542 & 0912 & 1 & F & CR on clarification on the description of NIAO & 15.5 .0 \\
\hline & RP-83 & RP-190542 & 0913 & 1 & F & CR on the number of bits of downlink NAS COUNT value & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0920 & 1 & F & CR to 38.331 for not supporting different quantities for thresholds in Event A5 and B2 & 15.5.0 \\
\hline & RP-83 & RP-190544 & 0922 & 2 & F & CR on SSB type indication & 15.5 .0 \\
\hline & RP-83 & RP-190545 & 0923 & 2 & F & Conrection for measurements of serving cells without SSB or without CSI-RS & 15.5 .0 \\
\hline & RP-83 & RP-190540 & 0930 & - & F & CR on introduction of UE assistance information in inter-node message & 15.5 .0 \\
\hline & RP-83 & RP-190540 & 0931 & & F & CR on description of SRS carrier switching & 15.5 .0 \\
\hline & RP-83 & RP-190542 & 0932 & 1 & F & Clarification on the relation between CA configuration and supported featureset combination_Option1 & 15.5.0 \\
\hline & RP-83 & RP-190545 & 0935 & 2 & F & Unification of EN-DC terminology & 15.5 .0 \\
\hline & RP-83 & RP-190550 & 0938 & - & F & PDCP re-establishment during SRB modification for EUTRA/5GC & 15.5 .0 \\
\hline & RP-83 & RP-190541 & 0939 & 1 & F & The support of drb-ContinueROHC & 15.5.0 \\
\hline & RP-83 & RP-190541 & 0948 & 1 & F & Correction on PTRS port index & 15.5.0 \\
\hline & RP-83 & RP-190541 & 0956 & 1 & F & CR on the supplementaryUplink and uplinkConfig & 15.5 .0 \\
\hline & RP-83 & RP-190545 & 0963 & 2 & F & Correction on MIB acquisition upon Reconfiguration with Sync & 15.5 .0 \\
\hline & RP-83 & RP-190543 & 0967 & 2 & F & Qoffset for inter-RAT cell reselection & 15.50 \\
\hline & RP-83 & RP-190541 & 0975 & 1 & F & Correction on SI scheduling & 15.50 .0 \\
\hline & RP-83 & RP-190543 & 0976 & 2 & F & Conrection of uac-AccessCategory1-SelectionAssistanceInfo field description & 15.5 .0 \\
\hline & RP-83 & RP-190546 & 0978 & 3 & F & Conrection on going to RRC_IDLE upon inter-RAT cell reselection in RRC_INACTIVE & 15.5.0 \\
\hline & RP-83 & RP-190543 & 0981 & 2 & F & Clarification on nrofSS-BlocksToAverage and absThreshSSBlocksConsolidation & 15.50 \\
\hline & RP-83 & RP-190543 & 0984 & 3 & F & Correction on compilation of featureSets for NR container & 15.5 .0 \\
\hline & RP-83 & RP-190540 & 0985 & & F & Enable and disable of security at DRB setup & 15.5.0 \\
\hline
\end{tabular}

ETSI


--- Page 1186  ---


3GPP TS 38.331 version 17.0.0 Release 17
1185
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-83 & RP-190545 & 0986 & 2 & F & Clarification on TCI state ID & 15.5.0 \\
\hline & RP-83 & RP-190544 & 0987 & & F & Clarification for random access on SUL & 15.50 \\
\hline & RP-83 & RP-190545 & 0988 & 1 & F & Correction on supportedBandwidthCombinationSetEUTRA-v1530 usage & 15.5.0 \\
\hline & RP-83 & RP-190544 & 0989 & & F & CR on Processing delay requirements for RRC Resume procedures in TS 38.331 & 15.50 \\
\hline 04/2019 & RP-83 & & & & & MCC: Formatting enror correction (missing carriage return) in the end of clause 5.3.5.11 & 15.5.1 \\
\hline 06/2019 & RP-84 & RP-191379 & 0906 & 5 & F & Reconfig with sync terminology & 15.6.0 \\
\hline & RP-84 & RP-191378 & 0916 & 5 & B & Introduction of late drop NGEN-DC, NE-DC and NR-DC & 15.6.0 \\
\hline & RP-84 & RP-191374 & 0996 & 2 & F & Conrection to the need code of some fields in SIB2 & 15.6 .0 \\
\hline & RP-84 & RP-191377 & 1003 & 3 & F & Clarification for handling of suspendConfig & 15.6.0 \\
\hline & RP-84 & RP-191377 & 1005 & 3 & F & Reporting of serving cell and best neighbour cell and sorting of beam & 15.6.0 \\
\hline & RP-84 & RP-191377 & 1011 & 1 & F & On T321 timer related informative text correction & 15.6.0 \\
\hline & RP-84 & RP-191377 & 1013 & 1 & C & CR to direct current report for UL and SUL & 15.6 .0 \\
\hline & RP-84 & RP-191380 & 1014 & 1 & F & Correction on storing UE AS Inactive Context & 15.6.0 \\
\hline & RP-84 & RP-191373 & 1015 & - & F & Conrection on ReconfigurationWithSync & 15.6.0 \\
\hline & RP-84 & RP-191380 & 1016 & 2 & F & Conrection on Handover from NR to EUTRAN & 15.6 .0 \\
\hline & RP-84 & RP-191373 & 1018 & & F & Introduction of additional UE capability on HARQ-ACK multiplexing on PUSCH & 15.6 .0 \\
\hline & RP-84 & RP-191378 & 1019 & 1 & F & Correction on bar indication of emergency service (access category 2) & 15.6.0 \\
\hline & RP-84 & RP-191373 & 1020 & & F & Correction on UE configuration for RRC Resume procedure & 15.6.0 \\
\hline & RP-84 & RP-191373 & 1021 & & F & RRC release with suspend configuration and inter-RAT redirection & 15.6.0 \\
\hline & RP-84 & RP-191373 & 1022 & & F & RRC Reconfiguration via SRB3 in EN-DC & 15.6.0 \\
\hline & RP-84 & RP-191373 & 1023 & & F & Corrections on RLC bearer setup & 15.6 .0 \\
\hline & RP-84 & RP-191373 & 1024 & & F & Clarification to Permitted MaxCID for ROHC and Uplink-Only ROHC & 15.6 .0 \\
\hline & RP-84 & RP-191373 & 1025 & & F & Coordination of ROHC capability for MR-DC & 15.6.0 \\
\hline & RP-84 & RP-191373 & 1026 & & F & Correction on the rimlnSyncOutOfSyncThreshold & 15.6.0 \\
\hline & RP-84 & RP-191373 & 1027 & & F & Conrection on description of tci-Present|nDCl & 15.6.0 \\
\hline & RP-84 & RP-191374 & 1031 & & F & RRC processing delay for UE capability transfer & 15.6.0 \\
\hline & RP-84 & RP-191377 & 1032 & 1 & F & Handling of SMTC configuration & 15.6 .0 \\
\hline & RP-84 & RP-191378 & 1033 & 1 & F & Clarification on filters used to generate FeatureSets (38.331) & 15.6 .0 \\
\hline & RP-84 & RP-191374 & 1034 & & F & Correction of behavior for eutra-nr-only & 15.6.0 \\
\hline & RP-84 & RP-191377 & 1038 & 1 & F & Clarification on CSI-RS resource configuration in MO & 15.6 .0 \\
\hline & RP-84 & RP-191378 & 1039 & 2 & F & Update on usage of Need codes & 15.6 .0 \\
\hline & RP-84 & RP-191377 & 1040 & 1 & F & Ignore additional fields in RRC Release message before security activation & 15.6 .0 \\
\hline & RP-84 & RP-191374 & 1041 & - & F & Correction on use of Null algorithm for DRBs during emergency calls in LSM & 15.6 .0 \\
\hline & RP-84 & RP-191380 & 1042 & 2 & F & NR changes for FullConfig for Inter-RAT intra-system HO & 15.6 .0 \\
\hline & RP-84 & RP-191376 & 1043 & 2 & F & Monitoring of short messages with multi-beams & 15.6 .0 \\
\hline & RP-84 & RP-191377 & 1045 & 1 & F & Clarification of commonControlResourceSet frequency reference point & 15.6.0 \\
\hline & RP-84 & RP-191379 & 1046 & 2 & F & CR on capability of maxUplinkDutyCycle for FR2 & 15.6.0 \\
\hline & RP-84 & RP-191374 & 1049 & - & F & CR to subcanierSpacing in RateMatchPattern and SCS-SpecificCanier & 15.6 .0 \\
\hline & RP-84 & RP-191377 & 1053 & 1 & F & CR on transferring common configuration during handover and SN change & 15.6 .0 \\
\hline & RP-84 & RP-191381 & 1054 & 2 & F & Conrection to barring alleviation & 15.6.0 \\
\hline & RP-84 & RP-191381 & 1055 & 3 & F & UE behaviour on the cell without TAC & 15.6 .0 \\
\hline & RP-84 & RP-191379 & 1058 & 2 & F & Conrection to RRC resume & 15.6 .0 \\
\hline & RP-84 & RP-191376 & 1061 & 1 & F & Corrections to inter-node messages & 15.6.0 \\
\hline & RP-84 & RP-191378 & 1063 & 1 & F & Clanification on mandatory information in inter node RRC messages & 15.6.0 \\
\hline & RP-84 & RP-191374 & 1066 & & F & Conrection to PWS reception & 15.6.0 \\
\hline & RP-84 & RP-191377 & 1068 & 1 & F & Serving cell measurement handling with different rsType configuration scenarios & 15.6.0 \\
\hline & RP-84 & RP-191374 & 1069 & & F & On CGl reporting contents & 15.6 .0 \\
\hline & RP-84 & RP-191374 & 1071 & & F & CR for 38.331 on security related corrections to UE and Network initiated RRC procedures to increase user's security and privacy & 15.6.0 \\
\hline & RP-84 & RP-191379 & 1072 & 3 & F & Conrection on the issue with NCP and ECP for RateMatchPattern & 15.6 .0 \\
\hline & RP-84 & RP-191377 & 1075 & 1 & F & Security protection of RRC messages & 15.6 .0 \\
\hline & RP-84 & RP-191381 & 1076 & 1 & F & Introduction of a new NR band for LTE/NR spectrum sharing in Band 41/n41 & 15.6 .0 \\
\hline & RP-84 & RP-191375 & 1077 & & F & Stop of T302 and T390 at reception of RRCRelease with waitTime & 15.6.0 \\
\hline & RP-84 & RP-191375 & 1078 & & F & Restriction of piggybacking of NAS PDUs & 15.6.0 \\
\hline & RP-84 & RP-191379 & 1079 & 3 & F & Conrection on intra-band fallback behavior with FeatureSetsPerCC & 15.6 .0 \\
\hline & RP-84 & RP-191375 & 1081 & & F & Removal of spurious requirement on consistency of feature set combination IDs & 15.6.0 \\
\hline & RP-84 & RP-191381 & 1082 & 3 & F & Mscellaneous non-controversial conrections Set II & 15.6 .0 \\
\hline & RP-84 & RP-191377 & 1083 & 1 & F & Conrection to configuration of security in RadioBearerConfig & 15.6 .0 \\
\hline & RP-84 & RP-191379 & 1086 & 2 & F & CR to 38.331 on MeasurementTimingConfiguration & 15.6 .0 \\
\hline & RP-84 & RP-191375 & 1088 & & F & Conrection to the description of subcanierspacing usage in ServingCellConfigCommon & 15.6.0 \\
\hline & RP-84 & RP-191375 & 1089 & & F & 38.331 Clarfication on multiple TA capabilities & 15.6 .0 \\
\hline & RP-84 & RP-191375 & 1091 & & F & Set beamConrespondenceCA dummy & 15.6.0 \\
\hline & RP-84 & RP-191377 & 1092 & 1 & F & Correction on Measurement Report Triggering for Periodical Report & 15.6.0 \\
\hline & RP-84 & RP-191375 & 1094 & & F & Conrection on PDCP duplication configuration & 15.6 .0 \\
\hline & RP-84 & RP-191375 & 1095 & & F & Correction on BWP configuration & 15.6 .0 \\
\hline & RP-84 & RP-191377 & 1097 & 1 & F & Conrection on configuration of pucch-ResourceCommon & 15.6.0 \\
\hline
\end{tabular}

ETSI


--- Page 1187  ---


3GPP TS 38.331 version 17.0.0 Release 17
1186
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-84 & RP-191376 & 1098 & 1 & F & Clarification of PUCCH reconfiguration on NR UL and SUL & 15.6.0 \\
\hline & RP-84 & RP-191375 & 1100 & 1 & F & Conrection on initial BWP configuration in DownlinkConfigCommon and UplinkConfigCommon & 15.60 \\
\hline & RP-84 & RP-191377 & 1101 & 1 & F & Conrection on PUCCH cell & 15.6 .0 \\
\hline & RP-84 & RP-191377 & 1103 & 1 & F & Correction on the pdcp-Config & 15.6 .0 \\
\hline & RP-84 & RP-191379 & 1104 & 2 & F & Correction on pathlossReferenceLinking & 15.600 \\
\hline & RP-84 & RP-191381 & 1106 & 2 & F & Clarification of dedicated priority handling from RRC_INACTIVE to RRC_IDLE & 15.600 \\
\hline & RP-84 & RP-191375 & 1110 & & F & Clarification on sending condition for mcg-RB-Config & 15.60 \\
\hline & RP-84 & RP-191375 & 1111 & & F & Clarification of timing reference for CSI-RS resources & 15.6.0 \\
\hline & RP-84 & RP-191376 & 1113 & & F & Setting of resumeCause for NAS triggered event & 15.6.0 \\
\hline & RP-84 & RP-191376 & 1114 & & F & UE capability signalling for FD-MIMO processing capabilities for EN-DC & 15.6.0 \\
\hline & RP-84 & RP-191376 & 1115 & & F & Modified UE capability on different numerologies within the same PUCCH group & 15.6.0 \\
\hline & RP-84 & RP-191478 & 1116 & 2 & F & Clarification to commonSearchSpaceList in PDCCH-ConfigCommon & 15.6.0 \\
\hline & RP-84 & RP-191589 & 1117 & 1 & F & Removal of "Capability for aperiodic CSI-RS triggering with different numerology between PDCCH and CSI-RS" & 15.6.0 \\
\hline 09/2019 & RP-85 & RP-192196 & 1120 & 1 & C & Additional capability signalling for 1024QAM support & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1121 & 1 & F & Correction on TDD-UL-DL-Config & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1122 & 1 & F & Conrection of the secondHopPRB Parameter & 15.7 .0 \\
\hline & RP-85 & RP-192190 & 1123 & & F & RSRP reporting of SFTD measurement in NR-DC & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1124 & 1 & F & Small Corrections for System Information & 15.7 .0 \\
\hline & RP-85 & RP-192194 & 1125 & & F & Corrections for Inter-node Messages & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1126 & 1 & F & Clarification of Layer 3 Filtering for E-UTRA & 15.7 .0 \\
\hline & RP-85 & RP-192190 & 1127 & - & F & Clarification on Failure Information report for NE-DC & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1136 & 1 & F & Clarification to fullConfig in NR & 15.7 .0 \\
\hline & RP-85 & RP-192190 & 1137 & & F & Updates for positioning measurement gaps for subframe and slot timing detection towards E-UTRA & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1138 & 1 & F & Clarification for enabling of configured PUSCH frequency hopping & 15.7.0 \\
\hline & RP-85 & RP-192191 & 1139 & 1 & B & Introduction of SFTD measurement to neighbour cells for NR SA & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1144 & 1 & F & Corrections to 38.331 on SI-schedulingInfo & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1148 & 2 & F & Clarification on SRB2 and DRB configuration & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1151 & 2 & F & PDU session release indication to upper layers during Full Configuration & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1160 & 1 & F & Clarification on max payload of PUCCH-ResourceSet & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1161 & 1 & F & Clarification on PUSCH configuration & 15.7.0 \\
\hline & RP-85 & RP-192192 & 1167 & 1 & F & Conrection of condition HO-toNR and HO-Conn & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1172 & 1 & F & Clarifying UE capability freqHoppingPUCCH-F0-2 and freqHoppingPUCCH-F1-3-4 & 15.70 \\
\hline & RP-85 & RP-192190 & 1173 & 1 & F & Clarification on selectedBandCombination & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1174 & 2 & F & Clarifying handling of information elements on the F1 interface & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1178 & 1 & F & Conrection of field descriptions in UE-CapabilityRequestFilterCommon (38.331) & 15.7 .0 \\
\hline & RP-85 & RP-192190 & 1179 & - & F & Clarification of ca-ParametersNR-forDC ( 38.331 ) & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1183 & 2 & F & Conrection on reestablishRLC & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1185 & 1 & F & Correction on SFTD measurement configuration & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1191 & 2 & F & Handling of embedded RRC message in RRCReconfiguration procedure & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1201 & 2 & F & Clarification on definition of PUSCH-Less SCell & 15.7 .0 \\
\hline & RP-85 & RP-192190 & 1204 & & F & Conrection on non-critical extension for NRDC-Parameters & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1208 & 1 & F & Correction on UE actions upon going to RRC IDLE & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1211 & 1 & F & Conrection on the acquisition of MIB and SIB1 for re-establishment & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1212 & 1 & F & Correction on band selection in SIB1 & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1213 & 2 & F & Correction on the actions uption reception of SIB2 and SIB4 & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1219 & 3 & F & Mscellaneous non-controversial corrections Set III & 15.7 .0 \\
\hline & RP-85 & RP-192194 & 1220 & 3 & F & Channel Bandwidth validation upon SIB1 acquisition & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1224 & 1 & F & Conrection of presence conditions for common PSCell parameters & 15.7 .0 \\
\hline & RP-85 & RP-192190 & 1226 & & F & Release of unnecessary power restrictions upon RRC connection reestablishment in NE-DC and NR-DC & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1232 & 2 & F & Correction of field inclusion for inter-node message & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1234 & 1 & F & SFTD measurement information in CG-Configlnfo & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1235 & 1 & F & Conrection for UE context retrieval & 15.7 .0 \\
\hline & RP-85 & RP-192190 & 1236 & & F & Correction on CGl measurements & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1237 & 1 & F & Corrections to SIB8 for CMAS geo-fencing & 15.7 .0 \\
\hline & RP-85 & RP-192194 & 1242 & 3 & F & Conrections on the condition of RBTermChange & 15.7 .0 \\
\hline & RP-85 & RP-192192 & 1243 & 1 & F & CR on clarification of aggregated bandwidth for overheating & 15.7 .0 \\
\hline & RP-85 & RP-192190 & 1244 & - & F & Clarification on the selectedBandEntriesMN - Understanding 1 & 15.7 .0 \\
\hline & RP-85 & RP-192194 & 1253 & 1 & F & Correction on RRC connection release indication after handover & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1254 & 2 & F & Conrections on SIB1 configuration & 15.7 .0 \\
\hline & RP-85 & RP-192191 & 1256 & 1 & F & Correction on inter-RAT cell re-selection when UE is in RRC_IDLE & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1257 & 2 & F & maxMIMO-Layers for the normal uplink and the supplementary uplink_Option 1 & 15.70 \\
\hline & RP-85 & RP-192193 & 1261 & 1 & F & Correction on overheating indication & 15.7.0 \\
\hline & RP-85 & RP-192192 & 1262 & & F & Handling lists other than AddMod & 15.7 .0 \\
\hline & RP-85 & RP-192193 & 1263 & 1 & F & Releasing source cell ConfigCommon fields not present in target cell & 15.7.0 \\
\hline
\end{tabular}

ETSI


--- Page 1188  ---


3GPP TS 38.331 version 17.0.0 Release 17
1187
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-85 & RP-192347 & 1265 & & C & Introduction of UE capability for NR-DC with SFN synchronization between PCell and PSCell & 15.7.0 \\
\hline 12/2019 & RP-86 & RP-192934 & 1147 & 2 & C & Security requirement for UE capability enquiry for NR & 15.8 .0 \\
\hline & RP-86 & RP-192934 & 1267 & 1 & F & Corrections on CG-Config & 15.8 .0 \\
\hline & RP-86 & RP-192934 & 1273 & 1 & F & CR to introduce timer for DRX based SFTD measurement & 15.8.0 \\
\hline & RP-86 & RP-192934 & 1274 & 1 & F & Correction on absence of gapPurpose & 15.8 .0 \\
\hline & RP-86 & RP-192934 & 1278 & 1 & F & Conrection on field description of cellReselection/nfoCommon & 15.8.0 \\
\hline & RP-86 & RP-192935 & 1283 & 2 & F & Clarifying the alignment of capability filtering across LTE and NR in MR-DC & 15.8.0 \\
\hline & RP-86 & RP-192934 & 1292 & 1 & F & Correction for P-Max in FR2 & 15.8.0 \\
\hline & RP-86 & RP-192934 & 1296 & 2 & F & Conrection on frequency indication in SIB1 and SIB2 & 15.8.0 \\
\hline & RP-86 & RP-192937 & 1300 & 2 & F & Handling of AS-Config in HandoverPreparationInformation & 15.8.0 \\
\hline & RP-86 & RP-192936 & 1301 & 2 & F & Corrections on scg-RB-Config in CG-Config & 15.8.0 \\
\hline & RP-86 & RP-192937 & 1305 & 2 & F & Conrection on MCG measurements in SCGFailure|nformation & 15.8.0 \\
\hline & RP-86 & RP-192937 & 1308 & 3 & F & Correction of SRB3 handling at full configuration (Alt2) & 15.8.0 \\
\hline & RP-86 & RP-192936 & 1309 & 2 & F & Conrection to integrity protection in DRB addition and modification & 15.8.0 \\
\hline & RP-86 & RP-192938 & 1323 & 3 & F & Miscellaneous non-controversial corrections Set IV & 15.8.0 \\
\hline & RP-86 & RP-192935 & 1325 & 2 & F & Presence and absence of TAC in NR cell & 15.8.0 \\
\hline & RP-86 & RP-192935 & 1332 & 4 & F & Security Algorithms for Radio Bearers & 15.8.0 \\
\hline & RP-86 & RP-192934 & 1333 & 1 & F & Correction on the Msg3 based on demand system information & 15.8.0 \\
\hline & RP-86 & RP-192935 & 1335 & 2 & F & Clarification for aggregated bandwidth for overheating & 15.8.0 \\
\hline & RP-86 & RP-192935 & 1337 & 1 & F & Clarification on the feature set report in EUTRAN & 15.8.0 \\
\hline & RP-86 & RP-192934 & 1341 & 1 & F & CR to 38.331 on CGI information & 15.8.0 \\
\hline & RP-86 & RP-192936 & 1357 & 1 & F & Restoring SDAP and RoHC contexts during Resumption & 15.8.0 \\
\hline & RP-86 & RP-192934 & 1358 & & F & Conditional presence on ue-CapabilityInfo and servCellIndexRangeSCG for inter-MN handover without SN change & 15.8.0 \\
\hline & RP-86 & RP-192934 & 1362 & & F & Configuration limitation for RRCRelease message in R15 & 15.8.0 \\
\hline & RP-86 & RP-192937 & 1368 & 1 & F & Conrection to AS security key update & 15.8.0 \\
\hline & RP-86 & RP-192936 & 1369 & 1 & F & Correction on the condition of RBTermChange & 15.8.0 \\
\hline & RP-86 & RP-192936 & 1375 & 1 & F & Correction on the configuration of split SRB & 15.8.0 \\
\hline & RP-86 & RP-192934 & 1378 & & F & Correction on camping conditions & 15.8.0 \\
\hline & RP-86 & RP-192937 & 1379 & 1 & F & Correction on CORESET Iocation & 15.8.0 \\
\hline & RP-86 & RP-192938 & 1381 & 2 & F & Correction to key derivation for the UE configured with sk-counter & 15.8.0 \\
\hline & RP-86 & RP-192936 & 1383 & 1 & F & Conrection on the pre-condition for reconfiguration with sync of SCG & 15.8 .0 \\
\hline & RP-86 & RP-192935 & 1385 & & F & Conrection on AS-Config & 15.8 .0 \\
\hline & RP-86 & RP-192935 & 1387 & & F & Correction on measurement reporting in NR-DC & 15.8.0 \\
\hline & RP-86 & RP-192936 & 1389 & 1 & F & Correction on SIB1 description & 15.8.0 \\
\hline & RP-86 & RP-192937 & 1402 & 1 & F & Conrection to Feature Set Combination and Band combination list for NR-DC (38.331) & 15.8.0 \\
\hline & RP-86 & RP-192937 & 1403 & 2 & F & Security requirements for split PDU session (38.331) & 15.8 .0 \\
\hline & RP-86 & RP-192938 & 1405 & 2 & F & Conrection of UE assistance information & 15.8.0 \\
\hline & RP-86 & RP-192936 & 1406 & 1 & F & Clarification regarding inter-node transfer of UE capability containers & 15.8 .0 \\
\hline & RP-86 & RP-192749 & 1421 & 1 & F & NE-DC dynamic power sharing capability & 15.8.0 \\
\hline 03/2020 & RP-87 & RP-200335 & 1272 & 3 & F & Conrections on maxMeas/dentitiesSCG-NR in MR-DC & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1409 & 2 & F & CR on BWCS for inter-ENDC BC with intra-ENDC BC (38.331) & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1410 & 4 & F & CR to 38.331 on support of 70 MHz channel bandwidth & 15.9.0 \\
\hline & RP-87 & RP-200335 & 1440 & 2 & F & Clarification on the PLMN-IdentitylnfoList & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1444 & 1 & F & Conrection on removal of NR-DC and NE-DC band combinations when capabilityRequestFilterCommon is absent & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1450 & 1 & F & Conrection on reporting of uplink TX direct current & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1454 & 1 & F & Corrections to the Location measurement indication procedure & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1455 & & F & Introduction of provisions for late non-critical extensions & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1460 & 1 & F & Correction on p-maxNR-FR1 for NE-DC & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1461 & & F & Correction on SFTD frequency list in INM & 15.9.0 \\
\hline & RP-87 & RP-200335 & 1472 & 2 & F & Mscellaneous non-controversial corrections Set V & 15.9 .0 \\
\hline & RP-87 & RP-200335 & 1475 & 1 & F & Capability coordination for NE-DC & 15.9.0 \\
\hline & RP-87 & RP-200335 & 1483 & 2 & F & CR on fallback BC reporting & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1484 & 1 & F & CR on overheating assistance reporting in handover case & 15.9.0 \\
\hline & RP-87 & RP-200334 & 1496 & 1 & F & Correction on NZP-CSI-RS-ResourceSet & 15.9 .0 \\
\hline & RP-87 & RP-200335 & 1501 & 1 & F & UE capability of intra-band requirements for inter-band EN-DC/NE-DC & 15.9.0 \\
\hline 03/2020 & RP-87 & RP-200335 & 1141 & 2 & F & Conrection on usage of access category 2 for UAC for RNA update & 16.0.0 \\
\hline & RP-87 & RP-200358 & 1149 & 2 & F & NAS handling enror of nas-Container for security key derivation & 16.0.0 \\
\hline & RP-87 & RP-200356 & 1152 & 3 & F & CR on capability of maxUplinkDutyCycle for inter-band EN-DC PC2 UE & 16.0.0 \\
\hline & RP-87 & RP-200357 & 1168 & 3 & F & Support of releasing UL configuration & 16.0.0 \\
\hline & RP-87 & RP-200357 & 1218 & 3 & B & Introduction of a second SMTC per frequency carrier in idle/inactive & 16.0.0 \\
\hline & RP-87 & RP-200358 & 1312 & 3 & C & Introduction of voice fallback indication & 16.0.0 \\
\hline & RP-87 & RP-200358 & 1354 & 2 & C & CR to 38.331 on CSI-RS inter-node message & 16.0.0 \\
\hline & RP-87 & RP-200335 & 1361 & 1 & B & PRACH prioritization parameters for MPS and MCS & 16.0.0 \\
\hline & RP-87 & RP-200358 & 1433 & 2 & B & Introduction of downgraded configuration for SRS antenna switching & 16.0.0 \\
\hline & RP-87 & RP-200355 & 1434 & 2 & B & Introducing autonomous gap in CG| reporting & 16.0.0 \\
\hline & RP-87 & RP-200351 & 1441 & 1 & B & Introduction of UECapabilitylnformation segmentation in TS38.331 & 16.0.0 \\
\hline & RP-87 & RP-200358 & 1443 & 1 & B & Introduction of NR IDC solution & 16.0.0 \\
\hline
\end{tabular}

ETSI


--- Page 1189  ---


3GPP TS 38.331 version 17.0.0 Release 17
1188
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-87 & RP-200350 & 1446 & 1 & B & Introduction of SRVCC from 5G to 3G & 16.0.0 \\
\hline & RP-87 & RP-200341 & 1462 & 2 & B & Introduction of on-demand SI procedure in RRC_CONNECTED & 16.00 \\
\hline & RP-87 & RP-200358 & 1465 & 1 & B & Introduction of DL RRC segmentation & 16.0.0 \\
\hline & RP-87 & RP-200353 & 1468 & 1 & B & Introducing the support of Non-Public Networks & 16.0.0 \\
\hline & RP-87 & RP-200344 & 1469 & 3 & B & CR for 38.331 for Power Savings & 16.0.0 \\
\hline & RP-87 & RP-200349 & 1471 & 4 & B & 38.331 CR on Integrated Access and Backhaul for NR & 16.0.0 \\
\hline & RP-87 & RP-200348 & 1476 & 3 & B & CR for 38.331 for CA\&DC enh & 16.0.0 \\
\hline & RP-87 & RP-200341 & 1477 & 2 & B & Introduction of NR operation with Shared Spectrum Access in RRC & 16.0.0 \\
\hline & RP-87 & RP-200347 & 1478 & 2 & B & Introduction of NR mobility enhancement & 16.0.0 \\
\hline & RP-87 & RP-200335 & 1486 & & B & Introduction of additional RACH configurations for TDD FR1 & 16.0.0 \\
\hline & RP-87 & RP-200343 & 1487 & 1 & B & Introduction of NR eURLLC & 16.0.0 \\
\hline & RP-87 & RP-200354 & 1488 & 2 & B & CR for introducing MDT and SON & 16.0.0 \\
\hline & RP-87 & RP-200357 & 1489 & & C & CR to 38.331 on DRX coordination & 16.0.0 \\
\hline & RP-87 & RP-200346 & 1493 & 1 & B & Introduction of 5G V2X with NR sidelink & 16.0.0 \\
\hline & RP-87 & RP-200340 & 1494 & 2 & B & Introduction of CLI handling and RIM in TS38.331 & 16.0.0 \\
\hline & RP-87 & RP-200352 & 1498 & 1 & B & Introduction of NR IIoT & 16.0.0 \\
\hline & RP-87 & RP-200342 & 1499 & 1 & B & Introduction of 2-step RA & 16.0.0 \\
\hline & RP-87 & RP-200339 & 1500 & 2 & B & Introduction of MIMO enhancements & 16.0.0 \\
\hline & RP-87 & RP-200359 & 1502 & & B & Recommended Bit Rate/Query for FLUS and MTSI & 16.0.0 \\
\hline & RP-87 & RP-200345 & 1504 & 2 & B & Introduction of NR positioning & 16.0.0 \\
\hline & RP-87 & RP-200358 & 1505 & & B & Support of inter-RAT handover from NR to EN-DC in TS 38.331 & 16.0.0 \\
\hline 07/2020 & RP-88 & RP-201191 & 1290 & 4 & C & Missing reportAddNeighMeas in periodic measurement reporting & 16.1.0 \\
\hline & RP-88 & RP-201166 & 1453 & 6 & B & Introduction of NeedForGap capability for NR measurement & 16.1.0 \\
\hline & RP-88 & RP-201185 & 1464 & 5 & B & Introduction of signalling for high-speed train scenarios & 16.1.0 \\
\hline & RP-88 & RP-201191 & 1506 & 2 & F & Conrections to PRACH prioritization procedure for MPS and MCS & 16.1.0 \\
\hline & RP-88 & RP-201182 & 1513 & 2 & F & Finalization of the support of Non-Public Networks & 16.1.0 \\
\hline & RP-88 & RP-201172 & 1528 & 4 & F & Miscellaneous corrections for NR-U & 16.1.0 \\
\hline & RP-88 & RP-201174 & 1540 & 2 & C & CR for 38.331 for Power Savings & 16.1.0 \\
\hline & RP-88 & RP-201180 & 1553 & 3 & F & Conrection to transfer of UE capabilities at HO for RACS and minor ASN. 1 correction (38.331) & 16.1.0 \\
\hline & RP-88 & RP-201161 & 1556 & 2 & A & Clarification on avoiding keystream repeat due to COUNT reuse & 16.1.0 \\
\hline & RP-88 & RP-201178 & 1557 & 2 & F & CR for 38.331 on CA/DC Enhancements & 16.1.0 \\
\hline & RP-88 & RP-201160 & 1560 & 2 & A & SRS Capability report for SRS only Scell & 16.1.0 \\
\hline & RP-88 & RP-201160 & 1562 & 1 & A & Correction to RequestedCapabilityCommon & 16.1.0 \\
\hline & RP-88 & RP-201187 & 1563 & 2 & A & CR on introduction of BCS to asymmetric channel bandwidths (38.331) & 16.1.0 \\
\hline & RP-88 & RP-201159 & 1568 & 2 & A & Correction on PUCCH configuration & 16.1.0 \\
\hline & RP-88 & RP-201176 & 1569 & 3 & F & Miscellaneous corrections to 38.331 for V2X & 16.1.0 \\
\hline & RP-88 & RP-201160 & 1572 & 2 & A & Conrection on the need for reconfiguration with sync in (NG)EN-DC, NR-DC and NE-DC & 16.1.0 \\
\hline & RP-88 & RP-201160 & 1579 & 1 & A & 38331 CR(R16) on inter-RAT SFTD measurements & 16.1.0 \\
\hline & RP-88 & RP-201160 & 1587 & 1 & A & Clarification on pdcp-Duplication at RRC Reconfiguration & 16.1.0 \\
\hline & RP-88 & RP-201188 & 1588 & 3 & F & Correction to RRC spec for eURLLC & 16.1.0 \\
\hline & RP-88 & RP-201179 & 1590 & 4 & B & Corrections to 38.331 for supporting |AB in NPN & 16.1.0 \\
\hline & RP-88 & RP-201177 & 1591 & 2 & F & Corrections on NR mobility enhancements & 16.1.0 \\
\hline & RP-88 & RP-201175 & 1592 & 2 & B & Introduction of RRC Positioning & 16.1.0 \\
\hline & RP-88 & RP-201166 & 1596 & 1 & F & Band combination list for NE-DC (Cat-F) & 16.1.0 \\
\hline & RP-88 & RP-201159 & 1599 & & A & Avoiding security risk for RLC AM bearers during termination point change & 16.1.0 \\
\hline & RP-88 & RP-201161 & 1602 & 1 & A & CR on SRS-CanrierSwitching & 16.1.0 \\
\hline & RP-88 & RP-201164 & 1603 & 1 & A & CR on introduction of extended capabilities for NR-DC only BCs & 16.1.0 \\
\hline & RP-88 & RP-201165 & 1614 & 1 & A & Clarification on the presence of ssb-perRACH-Occasion for the CSI-RS based CFRA & 16.1.0 \\
\hline & RP-88 & RP-201163 & 1624 & 1 & A & Clarification on the maxPUSCH-Duration for LCP Restriction & 16.1.0 \\
\hline & RP-88 & RP-201159 & 1631 & & A & Clarification for SIB6, SIB7 and SIB8 acquisition during a measurement gap & 16.1.0 \\
\hline & RP-88 & RP-201198 & 1632 & 2 & C & Introduction of secondary DRX group CR 38.331 & 16.1.0 \\
\hline & RP-88 & RP-201164 & 1634 & 1 & A & Conrection to CORESET and PDCCH TCI state release & 16.1.0 \\
\hline & RP-88 & RP-201181 & 1641 & & F & Correction of NR IIoT & 16.1.0 \\
\hline & RP-88 & RP-201162 & 1644 & 1 & A & Clarification on release and addition of the uplink for SCell & 16.1.0 \\
\hline & RP-88 & RP-201189 & 1645 & & F & CR on 38.331 for SRVCC from 5G to 3G & 16.1.0 \\
\hline & RP-88 & RP-201159 & 1649 & & A & Ambiguity in fr1-fr2-Add-UE-NR-Capabilities parameter & 16.1.0 \\
\hline & RP-88 & RP-201162 & 1656 & 1 & A & Conrection to measurement coordination in MR-DC & 16.1.0 \\
\hline & RP-88 & RP-201176 & 1657 & 1 & F & Introduction of on-demand SIB(s) procedure in CONNECTED & 16.1.0 \\
\hline & RP-88 & RP-201164 & 1662 & 1 & A & T310 handling during MobilityFromNR & 16.1.0 \\
\hline & RP-88 & RP-201173 & 1664 & 2 & F & Conrections for 2-step Random Access Type & 16.1.0 \\
\hline & RP-88 & RP-201216 & 1665 & 2 & B & Release-16 UE capabilities based on RAN1, RAN4 feature lists and RAN2 & 16.1.0 \\
\hline & RP-88 & RP-201191 & 1666 & 1 & F & Miscellaneous ASN. 1 review corrections & 16.1.0 \\
\hline & RP-88 & RP-201166 & 1668 & 2 & F & Miscellaneous non-controversial corrections Set V & 16.1.0 \\
\hline & RP-88 & RP-201184 & 1669 & 3 & F & Corrections on MDT and SON in NR & 16.1.0 \\
\hline & RP-88 & RP-201190 & 1670 & & C & Introduction of eCall over IMS for NR & 16.1.0 \\
\hline & RP-88 & RP-201191 & 1671 & 1 & F & 38.331 CR for overheating in (NG)EN-DC and NR-DC & 16.1.0 \\
\hline & RP-88 & RP-201186 & 1673 & 1 & B & Introduction of inter-frequency measurement without gap & 16.1.0 \\
\hline & RP-88 & RP-201164 & 1682 & 2 & A & Correction on SRS antenna capability for carrier switching & 16.1.0 \\
\hline
\end{tabular}

ETSI


--- Page 1190  ---


3GPP TS 38.331 version 17.0.0 Release 17
1189
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-88 & RP-201161 & 1683 & 1 & A & UE Capability Enhancement for FR1(TDD/FDD) / FR2 CA and DC & 16.1.0 \\
\hline & RP-88 & RP-201164 & 1687 & 1 & A & Correction to re-sending UEAssistanceInformation upon reconfiguration w/ sync & 16.1.0 \\
\hline & RP-88 & RP-201170 & 1696 & 4 & F & eMIMO corrections & 16.1.0 \\
\hline & RP-88 & RP-201166 & 1697 & - & F & Conrections to SIB1 Processing & 16.1.0 \\
\hline & RP-88 & RP-201171 & 1700 & - & F & Corrections for CLI & 16.1.0 \\
\hline & RP-88 & RP-201191 & 1703 & 1 & F & Correction on MN-SN measurements coordination in INM & 16.1.0 \\
\hline & RP-88 & RP-201163 & 1707 & - & A & SMTC Configuration for PSCell Addition for NR-DC (Option 2) & 16.1.0 \\
\hline & RP-88 & RP-201165 & 1711 & 1 & A & Introduction of CG| reporting capabilities & 16.1.0 \\
\hline & RP-88 & RP-201191 & 1716 & - & B & Aperiodic CSI-RS triggering with beam switching timing of 224 and 336 & 16.1.0 \\
\hline & RP-88 & RP-201166 & 1717 & 1 & B & Implementing confimation of code block group based transmission & 16.1.0 \\
\hline & RP-88 & RP-201179 & 1718 & 1 & F & Correction to TS 38.331 for |AB W| & 16.1.0 \\
\hline & RP-88 & RP-201183 & 1719 & & B & RRC configuration of supporting UL Tx switching & 16.1.0 \\
\hline & RP-88 & RP-201183 & 1720 & - & B & UE capability of supporting UL Tx switching & 16.1.0 \\
\hline
\end{tabular}

ETSI


--- Page 1191  ---


3GPP TS 38.331 version 17.0.0 Release 17
1190
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline 09/2020 & RP-89 & RP-201929 & 1533 & 3 & F & CLI configuration & 16.2.0 \\
\hline & RP-89 & RP-201922 & 1737 & 2 & F & Conrections to failure type for MCGFailureInfomation and SCGFailureInformation & 16.2.0 \\
\hline & RP-89 & RP-201937 & 1746 & 1 & A & Clarification on CG-Config|nfo for NR-DC and NE-DC & 16.2.0 \\
\hline & RP-89 & RP-201963 & 1747 & 1 & F & Miscellaneous conections for NR IIoT & 16.2.0 \\
\hline & RP-89 & RP-201937 & 1749 & 1 & A & CR on SyncAndCellAdd condition & 16.2.0 \\
\hline & RP-89 & RP-201937 & 1751 & 1 & A & CR to clarify UE behaviour after TAT expiry due to reconfigurationWithSync & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1755 & 2 & F & Handling of CPC in fast MCG recovery & 16.2.0 \\
\hline & RP-89 & RP-201986 & 1756 & 4 & B & Release-16 UE capabilities based on RAN1, RAN4 feature lists and RAN2 & 16.2.0 \\
\hline & RP-89 & RP-201989 & 1757 & 1 & F & Minor corrections and update for RRC Positioning & 16.2.0 \\
\hline & RP-89 & RP-201938 & 1764 & 1 & F & Conrection on the Cross Canter Scheduling Configuration & 16.2.0 \\
\hline & RP-89 & RP-201922 & 1768 & 2 & F & Conrection on the Configuration of sCellState for 38.331 & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1771 & & F & Minor Correction for Mobility Further Enhancement & 16.2.0 \\
\hline & RP-89 & RP-201989 & 1779 & & F & Corrections to acquisition of posSIB(s) in RRC CONNECTED & 16.2.0 \\
\hline & RP-89 & RP-201989 & 1781 & 1 & F & Conrections to handing posSIB-MappingInfo in SIB1 & 16.2.0 \\
\hline & RP-89 & RP-201938 & 1787 & 1 & F & SMTC Configuration for PSCell Addition and SN Change in NR-DC & 16.2.0 \\
\hline & RP-89 & RP-201923 & 1794 & 1 & F & Corrections of RLF cause Signalling procedure & 16.2.0 \\
\hline & RP-89 & RP-201937 & 1800 & 1 & A & CR on the BandCombination (R16) & 16.2.0 \\
\hline & RP-89 & RP-201922 & 1803 & 1 & F & Adding enableDefaultBeamForCCS for cross-canier scheduling with different SCS & 16.2.0 \\
\hline & RP-89 & RP-201927 & 1810 & 1 & F & Conection on cross-RAT V2X functionality in TS 38.331 & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1818 & & F & Time misalignment in DAPS DRB configuration (Alt.2) & 16.2.0 \\
\hline & RP-89 & RP-201927 & 1820 & 2 & F & Miscellaneous correction regarding on demand SIB in CONNECTED & 16.2.0 \\
\hline & RP-89 & RP-201927 & 1821 & 2 & F & Redundant procedural text of on demand SIB in CONNECTED & 16.2.0 \\
\hline & RP-89 & RP-201922 & 1823 & & F & Correction to field condition on refFR2ServCellAsyncCA & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1836 & & F & Corrections to Conditional Reconfiguration triggering & 16.2.0 \\
\hline & RP-89 & RP-201921 & 1844 & 3 & F & RRC clarficiations for NR-U & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1845 & 1 & F & Clarification on TS38.331 for DAPS & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1847 & & F & T312 handling during Mobility from NR & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1850 & 2 & F & Corretion on the RLF for NR DAPS & 16.2.0 \\
\hline & RP-89 & RP-201932 & 1852 & 1 & F & Correction on beamSwitchTiming values of 224 and 336 & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1861 & & F & RLF in source cell during DAPS handover & 16.2.0 \\
\hline & RP-89 & RP-201929 & 1862 & 2 & F & Misc. corrections CR for 38.331 for Power Savings & 16.2.0 \\
\hline & RP-89 & RP-201920 & 1863 & 3 & F & Miscellaneous eMIMO conrections & 16.2.0 \\
\hline & RP-89 & RP-201922 & 1864 & 1 & F & Missing fields for Toffset coordination in INM & 16.2.0 \\
\hline & RP-89 & RP-201922 & 1865 & 1 & F & Misc corrections for Rel-16 DCCA & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1866 & & F & Conrection of field description for Mobility Enhancments & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1868 & 1 & F & Conrection of description of CHO events for Mobility Enhancments & 16.2.0 \\
\hline & RP-89 & RP-201932 & 1869 & 1 & F & ASN. 1 corrections to maintain backwards compatibility & 16.2.0 \\
\hline & RP-89 & RP-201920 & 1870 & 1 & F & Remaining ASN. 1 review issues & 16.2.0 \\
\hline & RP-89 & RP-201938 & 1872 & 1 & A & Miscellaneous non-controversial conections Set VII & 16.2.0 \\
\hline & RP-89 & RP-201925 & 1873 & 1 & B & Introduction of MPE reporting & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1874 & & F & Conections to Mobility Enahncements & 16.2.0 \\
\hline & RP-89 & RP-201937 & 1878 & & A & Clarification on scg-RB-Config & 16.2.0 \\
\hline & RP-89 & RP-201922 & 1879 & 1 & F & Correction on storing SCG configuration in UE INACTIVE AS context & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1886 & & F & Timer handling upon initiation of RRC re-establishment & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1888 & & F & No support of DAPS HO for a CHO candidate cell & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1898 & & F & Conrection on TS38.331 for CHO & 16.2.0 \\
\hline & RP-89 & RP-201938 & 1908 & 1 & A & Conrection on UE assistance information transmission for handover case & 16.2.0 \\
\hline & RP-89 & RP-201931 & 1911 & 2 & F & Conrection on the UE Capability presence upon SN addition and SN change & 16.2.0 \\
\hline & RP-89 & RP-201928 & 1924 & 1 & F & Correction on msgA-PUSCH-Config & 16.2.0 \\
\hline & RP-89 & RP-201989 & 1925 & 1 & F & Introduction of PRS measurement gap & 16.2.0 \\
\hline & RP-89 & RP-201927 & 1930 & 1 & F & Miscellaneous conections on TS 38.331 & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1936 & & F & Conrection on NR CHO & 16.2.0 \\
\hline & RP-89 & RP-201929 & 1937 & 1 & F & Miscellaneous RRC corrections for NR eURLLC & 16.2.0 \\
\hline & RP-89 & RP-201932 & 1948 & 1 & F & Conrection on HO from NR to EN-DC & 16.2.0 \\
\hline & RP-89 & RP-201923 & 1952 & 1 & F & Corrections on F1-C transfer path & 16.2.0 \\
\hline & RP-89 & RP-201923 & 1954 & & F & Conrections on default BH RLC channel & 16.2.0 \\
\hline & RP-89 & RP-201923 & 1955 & 1 & F & Correction on the value range of BH-LogicalChannelldentity-Ext & 16.2.0 \\
\hline & RP-89 & RP-201923 & 1956 & - & F & Correction on cellReservedForOperatorUse & 16.2.0 \\
\hline & RP-89 & RP-201923 & 1957 & 1 & F & Correction on SearchSpace configuration for |AB & 16.2.0 \\
\hline & RP-89 & RP-201923 & 1958 & & F & Conrections on the lAB-MT TDD resource configuration & 16.2.0 \\
\hline & RP-89 & RP-201932 & 1961 & 4 & B & CR for Early Implementation in NR & 16.2.0 \\
\hline & RP-89 & RP-201932 & 1969 & 1 & F & CR on UE behavior with E-UTRA cell selection upon mobility from NR failure for enhanced EPS voice fallback & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1974 & 1 & F & CR on drb-ContinueROHC for DAPS & 16.2.0 \\
\hline & RP-89 & RP-201921 & 1976 & 2 & F & Miscellaneous conections for NR-U & 16.2.0 \\
\hline & RP-89 & RP-201937 & 1979 & 1 & A & Reconfiguring RoHC and setting the drb-ContinueROHC simultaneously & 16.2.0 \\
\hline & RP-89 & RP-201938 & 1986 & 1 & A & Clarification on the SRB configuration for fullConfig during RRC Resume procedure & 16.2.0 \\
\hline & RP-89 & RP-201930 & 1989 & 2 & F & Conrection on field descrption of mrdc-SecondaryCellGroup in NR-DC & 16.2.0 \\
\hline
\end{tabular}

ETSI


--- Page 1192  ---


3GPP TS 38.331 version 17.0.0 Release 17
1191
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-89 & RP-201927 & 1991 & 2 & F & CR to 38.331 on SLSS ID & 16.2.0 \\
\hline & RP-89 & RP-201927 & 1992 & 1 & F & Conection on RRC parameters for 5G V2X with NR sidelink & 16.2.0 \\
\hline & RP-89 & RP-201922 & 1993 & & F & Conrection on HARQ ACK spatial bundling configurations for secondary PUCCH group & 16.2.0 \\
\hline & RP-89 & RP-201924 & 1994 & 1 & F & Update to |AB-MT capabilities & 16.2.0 \\
\hline & RP-89 & RP-201927 & 1995 & & F & Adding notes for joint success and failure in crossRAT SL & 16.2.0 \\
\hline & RP-89 & RP-201927 & 1997 & & F & Conrections on RAN1 related clarifications & 16.2.0 \\
\hline & RP-89 & RP-201931 & 1998 & & D & Editorial corrections on MDT and SON in NR & 16.2.0 \\
\hline & RP-89 & RP-201931 & 1999 & & F & Conrection to MDT features & 16.2.0 \\
\hline & RP-89 & RP-201931 & 2000 & & F & Correction to SON features & 16.2.0 \\
\hline & RP-89 & RP-201928 & 2001 & & F & Conrections for NPNs & 16.2.0 \\
\hline & RP-89 & RP-201927 & 2002 & & F & Clarification on UL and SL priority thresholds & 16.2.0 \\
\hline & RP-89 & RP-201924 & 2003 & & F & Miscellaneous |AB Conrections & 16.2.0 \\
\hline & RP-89 & RP-201962 & 2007 & 1 & F & Miscellaneous corrections on UL Tx switching & 16.2.0 \\
\hline & RP-89 & RP-201925 & 2008 & & B & Configuration for uplink power boosting via suspended IBE requirements & 16.2.0 \\
\hline & RP-89 & RP-201922 & 2009 & & F & NR-DC UE capabilities & 16.2.0 \\
\hline & RP-89 & RP-201927 & 2010 & 1 & F & Conrection on the calculation of CG occasion & 16.2.0 \\
\hline 12/2020 & RP-90 & RP-202775 & 1775 & 2 & F & NR CA additional spectrum emission requirements & 16.3.0 \\
\hline & RP-90 & RP-202777 & 2017 & & B & Configuration for directional collision handling between reference cell and other cell for half-duplex operation in CA & 16.3.0 \\
\hline & RP-90 & RP-202773 & 2021 & 1 & F & Clarification on referenceTimePreferenceReporting in RRC Reconfiguration Procedure & 16.3.0 \\
\hline & RP-90 & RP-202790 & 2029 & & F & Correction on UAI during handover & 16.3 .0 \\
\hline & RP-90 & RP-202771 & 2038 & 1 & F & Conrection to PDSCH TDRA for DCI 1-2 & 16.3.0 \\
\hline & RP-90 & RP-202789 & 2040 & 1 & A & Conrection for configuration of SRS Carrier Switching & 16.3.0 \\
\hline & RP-90 & RP-202767 & 2042 & 1 & F & Correction to NR-U Energy Detection Threshold configuration & 16.3 .0 \\
\hline & RP-90 & RP-202778 & 2051 & 1 & B & Release-16 UE capabilities based on RAN1, RAN4 feature lists and RAN2 & 16.3 .0 \\
\hline & RP-90 & RP-202767 & 2052 & & F & Correction of field description for ra-ResponseWindow & 16.3.0 \\
\hline & RP-90 & RP-202767 & 2055 & & F & Clarification on HARQ process sharing for CGs & 16.3.0 \\
\hline & RP-90 & RP-202790 & 2059 & 1 & A & Conrections on the configurations of HARQ-ACK spatial bundling and CBG in 38.331 & 16.3 .0 \\
\hline & RP-90 & RP-202774 & 2061 & 1 & F & Clarification on no support of CA, DC or multi-TRP with DAPS & 16.3.0 \\
\hline & RP-90 & RP-202790 & 2064 & 1 & A & Corrections on PDCP duplication capability for NR-DC & 16.3.0 \\
\hline & RP-90 & RP-202790 & 2066 & 1 & F & Clarification on SIB mapping to SI message & 16.3 .0 \\
\hline & RP-90 & RP-202776 & 2075 & 1 & F & UE assistance information for DRX preference & 16.3.0 \\
\hline & RP-90 & RP-202767 & 2091 & 1 & F & Miscellaneous corrections for NR-U & 16.3.0 \\
\hline & RP-90 & RP-202768 & 2107 & 2 & F & UE behaviour when UL 7.5 KHz shift is not supported & 16.3 .0 \\
\hline & RP-90 & RP-202772 & 2122 & 1 & F & Correction on non-DRB for |AB-MT & 16.3 .0 \\
\hline & RP-90 & RP-202772 & 2124 & 1 & F & Conrections on BH RLC channel & 16.3 .0 \\
\hline & RP-90 & RP-202772 & 2125 & 1 & F & Conrections on RLF cause determination & 16.3 .0 \\
\hline & RP-90 & RP-202790 & 2130 & 1 & F & Conrection on uac-AccessCategory1-SelectionAssistance|nfo & 16.3 .0 \\
\hline & RP-90 & RP-202790 & 2134 & 2 & F & Mscellaneous non-controversial corrections Set VIII & 16.3 .0 \\
\hline & RP-90 & RP-202775 & 2142 & 2 & F & Conrection on field description of configuredGrantConfigType2DeactivationStateList & 16.3 .0 \\
\hline & RP-90 & RP-202776 & 2145 & 1 & F & Correction on RRC state preference & 16.3.0 \\
\hline & RP-90 & RP-202789 & 2146 & 1 & F & Clarifications for the common search space on the active BWP & 16.3.0 \\
\hline & RP-90 & RP-202771 & 2149 & 1 & F & Corrections to 2-Step RA & 16.3.0 \\
\hline & RP-90 & RP-202777 & 2151 & & F & Discarding of stored DL RRC message segments when UE transitions to RRC_IDLE & 16.3 .0 \\
\hline & RP-90 & RP-202771 & 2159 & - & F & Conrection on BFD resource on SCell & 16.3.0 \\
\hline & RP-90 & RP-202770 & 2161 & 2 & F & Misc corrections for Rel-16 DCCA & 16.3 .0 \\
\hline & RP-90 & RP-202770 & 2163 & & F & Mssing fields for Toffset coordination & 16.3 .0 \\
\hline & RP-90 & RP-202770 & 2166 & 1 & F & Processing delay requirements for DLInformationTransferMRDC & 16.3.0 \\
\hline & RP-90 & RP-202773 & 2175 & 1 & F & Correction regarding reconfigure EHC & 16.3 .0 \\
\hline & RP-90 & RP-202770 & 2178 & & C & Processing delay requirements for RRC resume & 16.3 .0 \\
\hline & RP-90 & RP-202770 & 2180 & 1 & F & Conrection for fast MCG link recovery in (NG)EN-DC & 16.3 .0 \\
\hline & RP-90 & RP-202771 & 2181 & 2 & F & Correction on HARQ ACK/NACK feedback configuration & 16.3 .0 \\
\hline & RP-90 & RP-202771 & 2182 & 2 & F & Conrection on slot based repetition & 16.3 .0 \\
\hline & RP-90 & RP-202772 & 2184 & 1 & F & RRC Miscellaneous Conrections & 16.3 .0 \\
\hline & RP-90 & RP-202772 & 2192 & 1 & F & Support of Rel-16 features for SCG in EN-DC and NR-DC & 16.3 .0 \\
\hline & RP-90 & RP-202775 & 2198 & 1 & F & Conrection on acquisition of MIB and SIB1 & 16.3.0 \\
\hline & RP-90 & RP-202775 & 2199 & - & F & Correction on posSIB broadcastStatus & 16.3 .0 \\
\hline & RP-90 & RP-202776 & 2215 & - & F & Clarification on SRVCC handover & 16.3 .0 \\
\hline & RP-90 & RP-202769 & 2230 & 1 & F & Mscellaneous conrections on TS 38.331 & 16.3.0 \\
\hline & RP-90 & RP-202771 & 2250 & 1 & C & 38331 CR for CSI-RS-ResourceConfigMobility & 16.3.0 \\
\hline & RP-90 & RP-202775 & 2254 & - & F & Correction on T321 for autonomous gap based CGl in FR2 & 16.3 .0 \\
\hline & RP-90 & RP-202772 & 2265 & & F & Transmission suspension on BH RLC channel upon |AB-MT failure & 16.3.0 \\
\hline & RP-90 & RP-202790 & 2273 & 3 & A & CR on TS 38.331 for LCP restriction of configured grant type 1 & 16.3.0 \\
\hline & RP-90 & RP-202769 & 2274 & - & F & Correction on RRC parameters for NR SL communication & 16.3 .0 \\
\hline & RP-90 & RP-202771 & 2276 & 3 & F & Introduction of capability bit for multi-CC simultaneous TCI activation with multi-TRP & 16.3.0 \\
\hline
\end{tabular}

ETSI


--- Page 1193  ---


3GPP TS 38.331 version 17.0.0 Release 17
1192
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-90 & RP-202771 & 2277 & 1 & F & Selecting index for PLMN, SNPN and UAC parameters & 16.3.0 \\
\hline & RP-90 & RP-202775 & 2278 & & F & Positioning RRC updates for posSIB validity check and field description correction & 16.3 .0 \\
\hline & RP-90 & RP-202774 & 2280 & & F & Miscellaneous corrections for conditional reconfiguration & 16.3 .0 \\
\hline & RP-90 & RP-202774 & 2282 & & F & Mscellaneous corrections for DAPS (NR) & 16.3.0 \\
\hline & RP-90 & RP-202773 & 2284 & 1 & F & Corrections for PDCP duplication introduced in IIoT & 16.3 .0 \\
\hline & RP-90 & RP-202769 & 2285 & & F & Corrections on sidelink related RRC procedures & 16.3 .0 \\
\hline & RP-90 & RP-202770 & 2287 & & A & Dummify UE capability of crossCarrierScheduling-OtherSCS & 16.3 .0 \\
\hline & RP-90 & RP-202776 & 2293 & & F & RRC corrections on NR SON and MDT & 16.3.0 \\
\hline & RP-90 & RP-202770 & 2294 & & F & CR for Unaligned CA signalling in TS 38.331 & 16.3 .0 \\
\hline & RP-90 & RP-202767 & 2295 & & F & Name change of the UE capability for the extended RAR window monitoring & 16.3.0 \\
\hline & RP-90 & RP-202884 & 2297 & & A & CR to 38.331 on handling of fallbacks for FR2 CA & 16.3.0 \\
\hline 01/2021 & RP-90 & & & & & Conrected the extension marker in type PosSchedulingInfo-r16 so that it passes ASN. 1 syntax check & 16.3.1 \\
\hline 03/2021 & RP-91 & RP-210693 & 2034 & 3 & F & Corrections to acquisition of positioning SIBs & 16.4.0 \\
\hline & RP-91 & RP-210702 & 2036 & 3 & A & Clarification to usage of ConfigRestrictModReqSCG & 16.4.0 \\
\hline & RP-91 & RP-210695 & 2147 & 1 & F & Clarification for aperiodic CSI and secondary DRX group & 16.4.0 \\
\hline & RP-91 & RP-210701 & 2237 & 1 & A & Clarification on P-max in Frequency/nfoUL in FR2 & 16.4 .0 \\
\hline & RP-91 & RP-210690 & 2298 & 1 & F & Correction on the Handling of Reconfiguration within RRC Resume & 16.4 .0 \\
\hline & RP-91 & RP-210690 & 2300 & 1 & F & Clarification on Fast MCG Link Recovery & 16.4.0 \\
\hline & RP-91 & RP-210692 & 2301 & 1 & F & CR on co-configuration of Rel-16 features & 16.4.0 \\
\hline & RP-91 & RP-210689 & 2302 & 2 & F & Correction on reset configuration & 16.4.0 \\
\hline & RP-91 & RP-210689 & 2303 & 1 & F & Clarification on the inter-frequency operation & 16.4.0 \\
\hline & RP-91 & RP-210694 & 2306 & 1 & F & Conrection on RSSI and channel occupancy measurements & 16.4.0 \\
\hline & RP-91 & RP-210689 & 2315 & 1 & F & Correction on value range of sl-Config|ndexCG and sl-HARQ-Proc|D-offset & 16.4.0 \\
\hline & RP-91 & RP-210693 & 2317 & 1 & F & Clarficiations on the required posSIB & 16.4.0 \\
\hline & RP-91 & RP-210697 & 2321 & 1 & F & UE capability of NR to UTRA-FDD CELL_DCH CS handover & 16.4.0 \\
\hline & RP-91 & RP-210693 & 2322 & & F & Corrections on posSIB validity & 16.4.0 \\
\hline & RP-91 & RP-210694 & 2325 & 1 & F & CR on 38.331 for power saving & 16.4.0 \\
\hline & RP-91 & RP-210701 & 2333 & & A & CR on SyncAndCellAdd condition & 16.4.0 \\
\hline & RP-91 & RP-210693 & 2341 & 1 & F & RA report and Logged MDT Info extendibility & 16.4.0 \\
\hline & RP-91 & RP-210692 & 2346 & 1 & F & Support of NUL and SUL during DAPS handover & 16.4.0 \\
\hline & RP-91 & RP-210694 & 2360 & & F & Clarification on NR-U RSSI measurement procedure & 16.4.0 \\
\hline & RP-91 & RP-210703 & 2371 & & F & Conrection to measResultServingMOList impacting EN-DC & 16.4.0 \\
\hline & RP-91 & RP-210695 & 2377 & 2 & B & Inter-node messaging for supporting intra-band EN-DC scenarios & 16.4 .0 \\
\hline & RP-91 & RP-210692 & 2379 & & F & Dummifying intraFreqMultiUL-TransmissionDAPS-r16 capability & 16.4.0 \\
\hline & RP-91 & RP-210690 & 2384 & & F & HARQ-ACK codebook configuration for secondary PUCCH group & 16.4.0 \\
\hline & RP-91 & RP-210690 & 2385 & 1 & F & Misc corrections for Rel-16 DCCA & 16.4.0 \\
\hline & RP-91 & RP-210694 & 2387 & & F & RRC conrections for NR-U & 16.4.0 \\
\hline & RP-91 & RP-210689 & 2391 & 3 & F & Correction on SL configured grant type 1 validity under Uu RLF & 16.4.0 \\
\hline & RP-91 & RP-210692 & 2392 & 2 & F & Inability to comply with conditional reconfiguration & 16.4 .0 \\
\hline & RP-91 & RP-210691 & 2398 & 2 & F & Mscellaneous corrections on IAB in 38.331 & 16.4.0 \\
\hline & RP-91 & RP-210703 & 2400 & 1 & F & Mscellaneous non-controversial corrections Set IX & 16.4.0 \\
\hline & RP-91 & RP-210695 & 2401 & 1 & F & Correction on complete message at handover from NR to EN-DC & 16.4.0 \\
\hline & RP-91 & RP-210703 & 2402 & 1 & F & Release with Redirect for connection resume triggered by NAS & 16.4.0 \\
\hline & RP-91 & RP-210691 & 2404 & & F & Conrection on the configuration of Type 1 configured grant & 16.4.0 \\
\hline & RP-91 & RP-210703 & 2405 & 1 & F & NR RRC processing time with segmentation & 16.4 .0 \\
\hline & RP-91 & RP-210691 & 2407 & 1 & F & Introduction of UE Capability and Configuration for SpCell BFR Enhancement & 16.4.0 \\
\hline & RP-91 & RP-210695 & 2414 & 2 & F & ASN. 1 guidelines for extension of lists using ToAddMod structure & 16.4 .0 \\
\hline & RP-91 & RP-210692 & 2417 & 2 & F & Conrections for DAPS Handover & 16.4.0 \\
\hline & RP-91 & RP-210689 & 2418 & 1 & F & CR on measurement object modification & 16.4.0 \\
\hline & RP-91 & RP-210692 & 2419 & 1 & F & Clarification on ULInformationTransferMRDC message & 16.4.0 \\
\hline & RP-91 & RP-210690 & 2422 & 1 & F & Clarification on sCellState configuration upon SCell modification & 16.4.0 \\
\hline & RP-91 & RP-210691 & 2427 & 1 & F & Corrections on BAP address and default BAP configuration & 16.4.0 \\
\hline & RP-91 & RP-210691 & 2428 & 2 & F & Conrections on the default configuration with Need M & 16.4.0 \\
\hline & RP-91 & RP-210693 & 2429 & 1 & F & Conrections on NR MDT and SON & 16.4.0 \\
\hline & RP-91 & RP-210693 & 2433 & 1 & F & Clarification for SIBs scheduled in posScheduling|nfoList & 16.4.0 \\
\hline & RP-91 & RP-210690 & 2436 & 2 & F & Correction on tci-Present|nDCl & 16.4 .0 \\
\hline & RP-91 & RP-210689 & 2437 & 1 & F & Miscellaneous conrections on TS 38.331 & 16.4 .0 \\
\hline & RP-91 & RP-210689 & 2440 & 2 & F & Correction on C-RNTI replacement and conditions for 2-step RA & 16.4.0 \\
\hline & RP-91 & RP-210689 & 2445 & 1 & F & Stop conditions of T320 in NR protocols & 16.4.0 \\
\hline & RP-91 & RP-210697 & 2447 & 1 & F & CR on the Capability of PUCCH Transmissions for HARQ-ACK-38331 & 16.4.0 \\
\hline & RP-91 & RP-210694 & 2448 & 1 & F & UTRA capabilities forwarding in handover preparation & 16.4.0 \\
\hline & RP-91 & RP-210693 & 2449 & 1 & F & Correction on SI window calculation for PosSIB & 16.4.0 \\
\hline & RP-91 & RP-210692 & 2450 & & F & [Post112-e][254][R16 MOB] Clarification of behaviour to avoid security risk in CHO based recovery after handover without key change failure & 16.4 .0 \\
\hline & RP-91 & RP-210693 & 2457 & & F & Miscl corrections on SON and MDT & 16.4.0 \\
\hline & RP-91 & RP-210689 & 2458 & & F & Conrection to 38.331 on intra-frequency reselection & 16.4.0 \\
\hline & RP-91 & RP-210689 & 2460 & & F & T400 expiry in timer table and protection of RRC messages & 16.4.0 \\
\hline & RP-91 & RP-210692 & 2461 & & F & Conrection on NR Mobility Enhancement & 16.4.0 \\
\hline & RP-91 & RP-210690 & 2462 & & F & CR on serving cell reporting & 16.4.0 \\
\hline
\end{tabular}

ETSI


--- Page 1194  ---


3GPP TS 38.331 version 17.0.0 Release 17
1193
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-91 & RP-210697 & 2463 & & F & Capability for dommant BWP switching of multiple SCells & 16.4.0 \\
\hline & RP-91 & RP-210695 & 2466 & & F & Conrection to PUSCH skipping with UCI without LCH-based prioritization & 16.4 .0 \\
\hline & RP-91 & RP-210693 & 2467 & - & F & Conrections on NR MDT and SON & 16.4 .0 \\
\hline & RP-91 & RP-210692 & 2468 & 1 & F & Correction on inter-node signalling for DAPS UE capability coordination & 16.4.0 \\
\hline & RP-91 & RP-210702 & 2469 & - & A & Dummy the capability bit v2x-EUTRA & 16.4.0 \\
\hline & RP-91 & RP-210630 & 2470 & 1 & B & Release-16 UE capabilities based on updated RAN1 and RAN4 feature lists & 16.4.0 \\
\hline & RP-91 & RP-210693 & 2471 & - & B & Uplink Tx DC location reporting for two carrier uplink CA & 16.4.0 \\
\hline & RP-91 & & & & & MCC: replaced all "-v16xy" with "-v1640" & 16.4.1 \\
\hline 06/2021 & RP-92 & RP-211487 & 2413 & 6 & C & Redirection with MPS Indication [Redirect_MPS_I] & 16.50 .0 \\
\hline & RP-92 & RP-211474 & 2475 & 3 & F & Conrections to the UE action upon SIB1 reception & 16.50 \\
\hline & RP-92 & RP-211470 & 2477 & 1 & F & Conrection on parameters of SL configured grant & 16.5 .0 \\
\hline & RP-92 & RP-211474 & 2490 & 2 & F & Conrections on the descriptions of SRS-Config & 16.5 .0 \\
\hline & RP-92 & RP-211475 & 2494 & 2 & F & Conrection on T321 for autonomous gap based CGI reporting in LTE & 16.5 .0 \\
\hline & RP-92 & RP-211482 & 2496 & 2 & A & CR on RRC processing delay & 16.50 .0 \\
\hline & RP-92 & RP-211475 & 2502 & 1 & F & CR on the configuration restriction on DCl format 0_2/1_2 for unlicensed band (Option 1) & 16.50 \\
\hline & RP-92 & RP-211475 & 2505 & 2 & F & Conrection on description of ssb-Positions InBurst in ServingCellConfigCommonSIB & 16.50 \\
\hline & RP-92 & RP-211475 & 2508 & 1 & F & Conrection on freqMonitorLocations & 16.5.0 \\
\hline & RP-92 & RP-211486 & 2516 & 3 & A & Clean-up of INM procedure text & 16.50 .0 \\
\hline & RP-92 & RP-211485 & 2519 & 3 & F & Miscellaneous non-controversial corrections Set X & 16.5 .0 \\
\hline & RP-92 & RP-211485 & 2527 & 3 & A & Clarification on SCellIndex and servCellIndex & 16.50 .0 \\
\hline & RP-92 & RP-211484 & 2531 & 2 & A & Conrection on firstActiveDownlinkBWP-Id & 16.50 .0 \\
\hline & RP-92 & RP-211471 & 2534 & 3 & F & Msc corrections for Rel-16 DCCA & 16.50 .0 \\
\hline & RP-92 & RP-211483 & 2540 & 2 & F & Conrection on failureType in FailureReportSCG-EUTRA and scgFailureInfoEUTRA & 16.50 \\
\hline & RP-92 & RP-211471 & 2543 & 2 & F & Clarification on NR SCG configuration within RRC Resume & 16.5 .0 \\
\hline & RP-92 & RP-211484 & 2550 & 3 & A & Clarification on SCS of active DL and UL BWP & 16.5.0 \\
\hline & RP-92 & RP-211470 & 2551 & 3 & F & Miscellaneous conrections on TS 38.331 for NR V2X & 16.50 .0 \\
\hline & RP-92 & RP-211470 & 2552 & 3 & F & Conrections on TS 38.331 from the latest RAN1 decisions & 16.5 .0 \\
\hline & RP-92 & RP-211485 & 2556 & 2 & A & Clarification on RLC bearer handling in full configuration & 16.5.0 \\
\hline & RP-92 & RP-211472 & 2557 & 2 & F & Miscellaenous corrections on BH RLC channel management for |AB-MT & 16.50 .0 \\
\hline & RP-92 & RP-211475 & 2561 & 3 & F & Conrection on description of subCarrierSpacing in BWP & 16.5 .0 \\
\hline & RP-92 & RP-211470 & 2562 & 2 & F & Correction on releasing referenceTimePreferenceReporting and slAssistanceConfigNR & 16.50 \\
\hline & RP-92 & RP-211484 & 2564 & 3 & A & Conrection on T325 & 16.5 .0 \\
\hline & RP-92 & RP-211473 & 2565 & 2 & F & Full configuration for CHO & 16.5 .0 \\
\hline & RP-92 & RP-211485 & 2567 & 2 & A & Abortion of RRC connection resume handling & 16.5.0 \\
\hline & RP-92 & RP-211470 & 2569 & 1 & F & Transmission of UEAssistanceInformation or SidelinkUEInformationNR after conditional handover & 16.5.0 \\
\hline & RP-92 & RP-211483 & 2572 & 1 & A & Clarification on SCellFrequencies & 16.50 .0 \\
\hline & RP-92 & RP-211474 & 2574 & 1 & F & Conrection for the positioning SI offset and clarification on mapping of posSIB to SI & 16.50 \\
\hline & RP-92 & RP-211484 & 2579 & 2 & F & UL Config Grant capability differentiation for FR1(TDD/FDD) / FR2 & 16.5.0 \\
\hline & RP-92 & RP-211474 & 2580 & 2 & F & Conrections on the UE capability of indication on supporting the extension of SRSresourceID & 16.5.0 \\
\hline & RP-92 & RP-211483 & 2581 & 1 & F & Clarification on the initiation of RNA update & 16.5.0 \\
\hline & RP-92 & RP-211478 & 2585 & 3 & B & Release-16 UE capabilities based on RAN1 and RAN4 feature lists & 16.5 .0 \\
\hline & RP-92 & RP-211472 & 2586 & - & F & Correction on repetition for L1-SINR & 16.5.0 \\
\hline & RP-92 & RP-211475 & 2590 & - & F & Conrection on reportSlotOffsetList & 16.5 .0 \\
\hline & RP-92 & RP-211486 & 2598 & 1 & F & Clarification on the Timing Reference of PSCell SMTC Configuration & 16.5.0 \\
\hline & RP-92 & RP-211478 & 2599 & 1 & F & Introduction of the intra-NR and inter-RAT HST Capabilities and Configuration & 16.5 .0 \\
\hline & RP-92 & RP-211475 & 2600 & - & F & SSB-ToMeasure for NR-U & 16.5.0 \\
\hline & RP-92 & RP-211482 & 2602 & - & A & Clarification on CGl reporting & 16.5 .0 \\
\hline & RP-92 & RP-211471 & 2605 & 1 & F & Mscellaneous Corrections to the SNPN & 16.5 .0 \\
\hline & RP-92 & RP-211474 & 2609 & & C & Adding 400 Mhz and 600 MHz frequency separation classes & 16.5 .0 \\
\hline & RP-92 & RP-211482 & 2615 & & A & Conrection on CrossCarrierSchedulingConfig Introduced by Two PUCCH Group & 16.5 .0 \\
\hline & RP-92 & RP-211473 & 2616 & 1 & F & 38.331 Conrection on Failure Recovery via CHO for Inter-RAT Handover Failure & 16.5.0 \\
\hline & RP-92 & RP-211472 & 2619 & 1 & F & Miscellaneous corrections on |AB & 16.5.0 \\
\hline & RP-92 & RP-211471 & 2626 & - & F & Conrection on RNA configuration for UE in SNPN access mode & 16.5 .0 \\
\hline & RP-92 & RP-211470 & 2636 & 2 & F & Correction of Sidelink Configured Grant Type 1 Usage During Handover & 16.5 .0 \\
\hline & RP-92 & RP-211483 & 2639 & - & A & Introduction of DL scheduling slot offset capabilities in UERadioPaging Information & 16.50 \\
\hline & RP-92 & RP-211474 & 2644 & 2 & F & Clarifications on the TRP definition for positioning & 16.5.0 \\
\hline & RP-92 & RP-211470 & 2647 & 1 & F & Configuration of search spaces for scheduling SL transmissions & 16.5.0 \\
\hline & RP-92 & RP-211475 & 2652 & 1 & F & Conrection on description of msg1-SubcanrierSpacing in RACHConfigCommon & 16.5 .0 \\
\hline & RP-92 & RP-211485 & 2667 & 1 & A & Conrection on flow remapping to an added DRB & 16.5 .0 \\
\hline & RP-92 & RP-211483 & 2675 & - & A & Clarification on the frequency deprioritisation & 16.5.0 \\
\hline
\end{tabular}

ETSI


--- Page 1195  ---


3GPP TS 38.331 version 17.0.0 Release 17
1194
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & RP-92 & RP-211486 & 2686 & 1 & A & Conrection on A-CSI trigger state configuration & 16.5.0 \\
\hline & RP-92 & RP-211485 & 2690 & 1 & A & RLC and PDCP Re-establishment upon RRC resume/reestablishment & 16.5.0 \\
\hline & RP-92 & RP-211471 & 2696 & & F & CR on CGl reporting for NPN-only cell & 16.5.0 \\
\hline & RP-92 & RP-211478 & 2699 & & A & Correction to ca-ParametersNR-ForDC & 16.5.0 \\
\hline & RP-92 & RP-211473 & 2700 & & F & Clarification on non-coexistence of CHO and DAPS & 16.50 \\
\hline & RP-92 & RP-211475 & 2702 & & F & Extending number of cells for search space switching trigger configuration & 16.5.0 \\
\hline & RP-92 & RP-211471 & 2703 & 2 & C & NR-DC Cell Group capability filtering & 16.5.0 \\
\hline & RP-92 & RP-211478 & 2705 & & A & CR on the Fallback Band Combination Removing-R16 & 16.5.0 \\
\hline & RP-92 & RP-211471 & 2706 & & F & SON-MDT Changes agreed in RAN2\#114 meeting & 16.5 .0 \\
\hline 09/2021 & RP-93 & RP-212444 & 2708 & 1 & F & Correction on UL Skipping for PUSCH in Rel-16 & 16.6 .0 \\
\hline & RP-93 & RP-212442 & 2709 & 1 & F & Corrections to SIB validity for NPN only cell & 16.6.0 \\
\hline & RP-93 & RP-212444 & 2714 & & F & Early implementation of eCall over IMS in NR & 16.6.0 \\
\hline & RP-93 & RP-212441 & 2715 & & F & Mscellaneous corrections on TS 38.331 & 16.6.0 \\
\hline & RP-93 & RP-212443 & 2716 & & F & Conrections to intra-frequency cell reselection for MIB, SIB1 acquisition failure and TAC absence in SIB1 & 16.6 .0 \\
\hline & RP-93 & RP-212442 & 2723 & 1 & F & Conrection on TCl configuration for DCl format 1_2 & 16.6.0 \\
\hline & RP-93 & RP-212442 & 2728 & 1 & F & Conrection to description of p0-AlphaSets & 16.6 .0 \\
\hline & RP-93 & RP-212442 & 2746 & 1 & F & Clarification on the NPN-IdentitylnfoList & 16.6 .0 \\
\hline & RP-93 & RP-212442 & 2752 & 1 & F & Modification of meas Id for conditional reconfiguration & 16.6 .0 \\
\hline & RP-93 & RP-212443 & 2754 & 1 & F & MB correction on subCarrierSpacingCommon & 16.6.0 \\
\hline & RP-93 & RP-212442 & 2760 & & F & Conrection to 38.331 on the field description of msgA-TransMax & 16.6 .0 \\
\hline & RP-93 & RP-212440 & 2763 & 2 & F & Miscellaneous non-controversial corrections Set XI & 16.6 .0 \\
\hline & RP-93 & RP-212441 & 2776 & 1 & F & Corrections on RRC reconfiguration for fast MCG link recovery & 16.6 .0 \\
\hline & RP-93 & RP-212442 & 2777 & & F & Conrection on RepetitionSchemeConfig for eMIMO & 16.6.0 \\
\hline & RP-93 & RP-212438 & 2780 & & A & Correction on fallback band combination for SUL & 16.6 .0 \\
\hline & RP-93 & RP-212439 & 2785 & 1 & F & Clarification on RRC processing delay for HO from E-UTRA to NR & 16.6 .0 \\
\hline & RP-93 & RP-212443 & 2789 & 1 & F & CR for UE reporting Tx DC location info for the second PA & 16.6 .0 \\
\hline & RP-93 & RP-212438 & 2793 & & A & Conection on inter-RAT measurement report triggering & 16.6.0 \\
\hline & RP-93 & RP-212439 & 2799 & 2 & A & Conrection on reconfigurationWithSync & 16.6.0 \\
\hline & RP-93 & RP-212442 & 2800 & 1 & F & Conrection to DAPS handover & 16.6 .0 \\
\hline & RP-93 & RP-212442 & 2801 & & F & Conrections to pdsch-HARQ-ACK-CodeBookList & 16.6 .0 \\
\hline & RP-93 & RP-212443 & 2802 & & F & SON-MDT Changes agreed in RAN2\#115 meeting & 16.6 .0 \\
\hline & RP-93 & RP-212442 & 2803 & & F & No support for CHO with SCG configuration & 16.6 .0 \\
\hline & RP-93 & RP-212440 & 2804 & 2 & F & CR to 38.331 on correcting Rel-15 failure type definition & 16.6 .0 \\
\hline & RP-93 & RP-212442 & 2807 & & F & Handling of candidateBeamRSListExt-v1610 (option A1) & 16.6 .0 \\
\hline & RP-93 & RP-212440 & 2808 & & F & FR1/FR2 differentiation for enhanced UL grant skipping capabilities & 16.6.0 \\
\hline & RP-93 & RP-212598 & 2810 & 2 & C & Distinguishing support of extended band n77 & 16.6 .0 \\
\hline 12/2021 & RP-94 & RP-213341 & 2806 & 2 & A & Simultaneous RxTx UE capability per band pair & 16.7 .0 \\
\hline & RP-94 & RP-213343 & 2814 & 1 & F & Conrection on msgA-SubcarrierSpacing & 16.7 .0 \\
\hline & RP-94 & RP-213342 & 2815 & 1 & F & Mscellaneous corrections on TS 38.331 & 16.7 .0 \\
\hline & RP-94 & RP-213342 & 2817 & 1 & C & Duty cycle signalling for power class 1.5 & 16.7.0 \\
\hline & RP-94 & RP-213344 & 2819 & 1 & F & Correction for default value of rb-offset & 16.7 .0 \\
\hline & RP-94 & RP-213343 & 2822 & & F & Correction on R16 UE capability of supportedSINR-meas-r16 & 16.7 .0 \\
\hline & RP-94 & RP-213344 & 2837 & 2 & F & Correction on description of absoluteFrequencySSB & 16.7 .0 \\
\hline & RP-94 & RP-213343 & 2842 & 1 & F & Correction on condRRCReconfig field description & 16.7 .0 \\
\hline & RP-94 & RP-213341 & 2844 & 1 & F & Miscellaneous non-controversial conrections Set XII & 16.7 .0 \\
\hline & RP-94 & RP-213343 & 2845 & 1 & F & Conrection to need code for drb-ContinueEHC-DL and drb-ContinueEHC-UL & 16.7 .0 \\
\hline & RP-94 & RP-213343 & 2849 & 1 & F & Extension of pathlossReferenceRSs & 16.7 .0 \\
\hline & RP-94 & RP-213343 & 2857 & 1 & F & Correction on supportNewDMRS-Port-r16 capability & 16.7 .0 \\
\hline & RP-94 & RP-213343 & 2858 & 2 & F & Correction on pucch-SpatialRelationInfold-v1610 & 16.7 .0 \\
\hline & RP-94 & RP-213345 & 2859 & 1 & C & CR on 38.331 for introducing UE capability of txDiversity & 16.7 .0 \\
\hline & RP-94 & RP-213345 & 2862 & & F & CR on inter-frequency gapless measurement & 16.7 .0 \\
\hline & RP-94 & RP-213344 & 2864 & 2 & F & SON-MDT changes agreed in RAN2\#116 meeting & 16.7 .0 \\
\hline 03/2022 & RP-95 & RP-220835 & 2786 & 3 & F & Adding UE capability of UL MIMO coherence for UL Tx switching & 16.8 .0 \\
\hline & RP-95 & RP-220473 & 2874 & 1 & F & Conrection to RRC reconfiguration for |AB & 16.8 .0 \\
\hline & RP-95 & RP-220835 & 2879 & 1 & F & Addition of missing description on mobility support for 5G SRVCC to 3G & 16.8.0 \\
\hline & RP-95 & RP-220835 & 2880 & 1 & F & Handling of ServingCellConfigCommon & 16.8 .0 \\
\hline & RP-95 & RP-220835 & 2888 & 1 & F & Conrection on UL skipping with LCH Prioritization in Rel-16 & 16.8 .0 \\
\hline & RP-95 & RP-220835 & 2897 & 1 & F & Correction on Positioning SRS & 16.8 .0 \\
\hline & RP-95 & RP-220472 & 2900 & 1 & F & Correction of NCC storage during re-establishment and Resume & 16.8.0 \\
\hline & RP-95 & RP-220473 & 2903 & 1 & F & Mscellaneous conrections on TS 38.331 & 16.8.0 \\
\hline & RP-95 & RP-220473 & 2911 & & F & Conrection on conditional reconfiguraiton execution for only one triggered cell & 16.8 .0 \\
\hline & RP-95 & RP-220473 & 2912 & 2 & F & Introduction of sidelink power class capability indication & 16.8 .0 \\
\hline & RP-95 & RP-220493 & 2917 & 1 & F & Correction on inclusion of selectedPLMN-Identity in RRCResumeComplete & 16.8 .0 \\
\hline & RP-95 & RP-220835 & 2929 & 1 & F & Conrection on invalid symbol pattern & 16.8.0 \\
\hline & RP-95 & RP-220472 & 2939 & & A & Clarification on SN initiated release of an SCG & 16.8 .0 \\
\hline & RP-95 & RP-220473 & 2960 & 2 & F & Clarification on HighSpeedConfig for HST & 16.8 .0 \\
\hline & RP-95 & RP-220472 & 2969 & & F & Miscellaneous non-controversial corrections Set XIII & 16.8 .0 \\
\hline 03/2022 & RP-95 & RP-220506 & 2459 & 2 & D & Inclusive Language Review for TS 38.331 & 17.0.0 \\
\hline & RP-95 & RP-220499 & 2465 & 2 & C & Remove the maximum number of MIMO layers restrictions for SUL & 17.0.0 \\
\hline & RP-95 & RP-220486 & 2811 & 5 & B & Introducing Enhancements to Integrated Access and Backhaul for NR & 17.0.0 \\
\hline
\end{tabular}

ETSI


--- Page 1196  ---


3GPP TS 38.331 version 17.0.0 Release 17
1195
ETSI TS 138331 V17.0.0 (2022-05)

\begin{tabular}{|l|l|l|l|l|l|l|}
\hline RP-95 & RP-220837 & 2846 & 1 & B & Introduction of mobility-state-based cell reselection for NR HSDN [NR HSDN] & 17.00 \\
\hline RP-95 & RP-220492 & 2865 & 2 & B & Introducing Enhancement of Data Collection for SON and MDT & 17.00 \\
\hline RP-95 & RP-220477 & 2878 & 1 & B & Introduction of NR dynamic spectrum sharing & 17.000 \\
\hline RP-95 & RP-220837 & 2883 & 1 & B & Introduction of MINT [MINT] & 17.000 \\
\hline RP-95 & RP-220481 & 2887 & 1 & B & Introduction of enhanced lloT\&URLLC support for NR & 17.00 \\
\hline RP-95 & RP-220472 & 2889 & 1 & F & Conrection on PO determination for UE in inactive state & 17.00 \\
\hline RP-95 & RP-220475 & 2891 & 2 & B & Extending NR operation to 71 GHz & 17.00 \\
\hline RP-95 & RP-220500 & 2893 & 1 & B & Introduction of FR2 UL gap for Rel-17 & 17.000 \\
\hline RP-95 & RP-220497 & 2898 & 2 & B & Introduction of function for RRM enhancements for Rel-17 NR FR1 HST & 17.000 \\
\hline RP-95 & RP-220838 & 2901 & 1 & B & Release-17 UE capabilities based on R1 and R4 feature lists (TS38.331) & 17.000 \\
\hline RP-95 & RP-220476 & 2902 & 1 & B & RRC CR for NR Sidelink enhancement & 17.00 \\
\hline RP-95 & RP-220495 & 2904 & 1 & B & Introducing support of UP IP for EPC connected architectures using NR PDCP & 17.0.0 \\
\hline RP-95 & RP-220499 & 2909 & 1 & B & RRC configuration for R17 UL Tx switching enhancement & 17.0.0 \\
\hline RP-95 & RP-220491 & 2910 & 2 & B & Introduction of SL relay & 17.000 \\
\hline RP-95 & RP-220502 & 2913 & 2 & B & Introduction of RRC signaling for measurement gap enhancement & 17.000 \\
\hline RP-95 & RP-220488 & 2919 & 1 & B & Introduction of NR RRC support for MUSIM & 17.0.0 \\
\hline RP-95 & RP-220490 & 2921 & 1 & B & NR RRC CR for RAN slicing & 17.000 \\
\hline RP-95 & RP-220474 & 2923 & 1 & B & Introduction of Release-17 feMIMO & 17.0.0 \\
\hline RP-95 & RP-220961 & 2924 & 3 & B & Introduction of ePowSav in TS 38.331 & 17.0.0 \\
\hline RP-95 & RP-220493 & 2925 & 1 & B & Introducing NPN enhancements: Credentials Holder, UE Onboarding, and IMS emergency support in SNPNs & 17.0.0 \\
\hline RP-95 & RP-220489 & 2927 & & B & Introduction of the support for UDC in NR & 17.0.0 \\
\hline RP-95 & RP-220478 & 2928 & 2 & B & Introduction of NR coverage enhancements in RRC & 17.000 \\
\hline RP-95 & RP-220482 & 2930 & 2 & B & Introduction of Release-17 NTN & 17.000 \\
\hline RP-95 & RP-220498 & 2933 & 1 & B & HST on FR2 & 17.000 \\
\hline RP-95 & RP-220487 & 2937 & 1 & B & Introduction of SDT & 17.00 \\
\hline RP-95 & RP-220496 & 2940 & 1 & B & Introduction of DL 1024 QAM in NR & 17.000 \\
\hline RP-95 & RP-220484 & 2949 & 1 & B & Introduction of NR MBS into 38.331 & 17.000 \\
\hline RP-95 & RP-220836 & 2950 & 2 & B & Introduction of RedCap & 17.0.0 \\
\hline RP-95 & RP-220487 & 2951 & 1 & B & Introduction of Common RACH Partitioning Aspects & 17.0.0 \\
\hline RP-95 & RP-220479 & 2952 & 3 & B & Introduction of Enhanced Positioning feature & 17.000 \\
\hline RP-95 & RP-220853 & 2953 & 2 & B & Explicit Indication of SI Scheduling window position [SI-SCHEDULING] & 17.000 \\
\hline RP-95 & RP-220485 & 2954 & 2 & B & Introduction of further multi-RAT dual-connectivity enhancements & 17.0.0 \\
\hline RP-95 & RP-220494 & 2958 & 2 & B & Introduction of QoE measurements in NR & 17.000 \\
\hline
\end{tabular}

ETSI


--- Page 1197  ---


3GPP TS 38.331 version 17.0.0 Release 17
1196
ETSI TS 138331 V17.0.0 (2022-05)

\begin{table}
\captionsetup{labelformat=empty}
\caption{History}
\begin{tabular}{|l|l|l|}
\hline \multicolumn{3}{|r|}{Document history} \\
\hline V17.0.0 & May 2022 & Publication \\
\hline & & \\
\hline & & \\
\hline & & \\
\hline & & \\
\hline
\end{tabular}
\end{table}

ETSI

