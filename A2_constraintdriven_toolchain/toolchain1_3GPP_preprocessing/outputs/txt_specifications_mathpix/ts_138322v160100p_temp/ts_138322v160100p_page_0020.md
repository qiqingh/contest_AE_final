<!-- Page 20 of ts_138322v160100p -->

3GPP TS 38.322 version 16.1.0 Release 16
19
ETSI TS 138322 V16.1.0 (2020-07)
- form a new AMD PDU which will fit within the total size of AMD PDU(s) indicated by lower layer at the particular transmission opportunity;
- submit the new AMD PDU to lower layer.

When forming a new AMD PDU, the transmitting side of an AM RLC entity shall:
- only map the original RLC SDU or RLC SDU segment to the Data field of the new AMD PDU;
- modify the header of the new AMD PDU in accordance with the description in sub clause 6.2.2.4;
- set the \( P \) field according to sub clause 5.3.3.
5.3.3 Polling
5.3.3.1 General

An AM RLC entity can poll its peer AM RLC entity in order to trigger STATUS reporting at the peer AM RLC entity.
5.3.3.2 Transmission of a AMD PDU

Upon notification of a transmission opportunity by lower layer, for each AMD PDU submitted for transmission such that the AMD PDU contains either a not previously transmitted RLC SDU or an RLC SDU segment containing not previously transmitted byte segment, the transmitting side of an AM RLC entity shall:
- increment PDU_WITHOUT_POLL by one;
- increment BYTE_WITHOUT_POLL by every new byte of Data field element that it maps to the Data field of the AMD PDU;
- if PDU_WITHOUT_POLL >= pollPDU; or
- if BYTE_WITHOUT_POLL>= pollByte:
- include a poll in the AMD PDU as described below.

Upon notification of a transmission opportunity by lower layer, for each AMD PDU submitted for transmission, the transmitting side of an AM RLC entity shall:
- if both the transmission buffer and the retransmission buffer becomes empty (excluding transmitted RLC SDUs or RLC SDU segments awaiting acknowledgements) after the transmission of the AMD PDU; or
- if no new RLC SDU can be transmitted after the transmission of the AMD PDU (eg. due to window stalling);
- include a poll in the AMD PDU as described below.

NOTE: Empty RLC buffer (excluding transmitted RLC SDUs or RLC SDU segments awaiting acknowledgements) should not lead to unnecessary polling when data awaits in the upper layer. Details are left up to UE implementation.

To include a poll in an AMD PDU, the transmitting side of an AM RLC entity shall:
- set the P field of the AMD PDU to "1";
- set PDU_WITHOUT_POLL to 0 ;
- set BYTE_WITHOUT_POLL to 0 .

Upon submission of an AMD PDU including a poll to lower layer, the transmitting side of an AM RLC entity shall:
- set POLL_SN to the highest SN of the AMD PDU among the AMD PDUs submitted to lower layer;
- if \( t \)-PollRetransmit is not running:
- start \( t \)-PollRetransmit_

ETSI