<!-- Page 22 of ts_138322v160100p -->

3GPP TS 38.322 version 16.1.0 Release 16
21
ETSI TS 138322 V16.1.0 (2020-07)
- if \( t \)-StatusProhibit is not running:
- at the first transmission opportunity indicated by lower layer, construct a STATUS PDU and submit it to lower layer.
- else:
- at the first transmission opportunity indicated by lower layer after \( t \)-StatusProhibit expires, construct a single STATUS PDU even if status reporting was triggered several times while \( t \)-StatusProhibit was running and submit it to lower layer.

When a STATUS PDU has been submitted to lower layer, the receiving side of an AM RLC entity shall:
- start \( t \)-StatusProhibit.

When constructing a STATUS PDU, the AM RLC entity shall:
- for the RLC SDUs with SN such that RX_Next \( <= \) SN \( < \) RX_Highest_Status that has not been completely received yet, in increasing SN order of RLC SDUs and increasing byte segment order within RLC SDUs, starting with \( \mathrm{SN}=\mathrm{RX} \_ \)Next up to the point where the resulting STATUS PDU still fits to the total size of RLC PDU(s) indicated by lower layer:
- for an RLC SDU for which no byte segments have been received yet:
- include in the STATUS PDU a NACK_SN which is set to the SN of the RLC SDU.
- for a continuous sequence of byte segments of a partly received RLC SDU that have not been received yet:
- include in the STATUS PDU a set of NACK_SN, SOstart and SOend.
- for a continuous sequence of RLC SDUs that have not been received yet:
- include in the STATUS PDU a set of NACK_SN and NACK range;
- include in the STATUS PDU, if required, a pair of SOstart and SOend.
- set the ACK_SN to the SN of the next not received RLC SDU which is not indicated as missing in the resulting STATUS PDU.
5.4 SDU discard procedures

When indicated from upper layer (i.e. PDCP) to discard a particular RLC SDU, the transmitting side of an AM RLC entity or the transmitting UM RLC entity shall discard the indicated RLC SDU, if neither the RLC SDU nor a segment thereof has been submitted to the lower layers. The transmitting side of an AM RLC entity shall not introduce an RLC SN gap when discarding an RLC SDU.
5.5 Data volume calculation

For the purpose of MAC buffer status reporting, the UE shall consider the following as RLC data volume:
- RLC SDUs and RLC SDU segments that have not yet been included in an RLC data PDU;
- RLC data PDUs that are pending for initial transmission;
- RLC data PDUs that are pending for retransmission (RLC AM).

In addition, if a STATUS PDU has been triggered and \( t \)-StatusProhibit is not running or has expired, the UE shall estimate the size of the STATUS PDU that will be transmitted in the next transmission opportunity, and consider this as part of RLC data volume.

ETSI