<!-- Page 89 of ts_138214v170100p -->

3GPP TS 38.214 version 17.1.0 Release 17
88
ETSI TS 138214 V17.1.0 (2022-05)
\[
\begin{array}{l}
\varphi_{n}=e^{j \pi n / 2} \\
\theta_{p}=e^{j \pi p / 4} \\
u_{m}=\left\{\begin{array}{ccc}
{\left[\begin{array}{llll}
1 & e^{j \frac{2 \pi m}{O_{2} N_{2}}} & \cdots & e^{j \frac{2 \pi m\left(N_{2}-1\right)}{O_{2} N_{2}}}
\end{array}\right]} & N_{2}>1 \\
& 1 &
\end{array} N_{2}=1\right. \\
v_{l, m}=\left[\begin{array}{llll}
u_{m} & e^{j \frac{2 \pi l}{O_{1} N_{1}}} u_{m} & \cdots & e^{j \frac{2 \pi l\left(N_{1}-1\right)}{O_{1} N_{1}}} u_{m}
\end{array}\right]^{T} \\
\tilde{v}_{l, m}=\left[\begin{array}{llll}
u_{m} & e^{j \frac{4 \pi l}{O_{1} N_{1}}} u_{m} & \cdots & e^{j \frac{4 \pi l\left(N_{1} / 2-1\right)}{O_{1} N_{1}}} u_{m}
\end{array}\right]^{T}
\end{array}
\]
- The values of \( N_{1} \) and \( N_{2} \) are configured with the higher layer parameter \( n l-n 2 \), respectively. The supported configurations of ( \( N_{1}, N_{2} \) ) for a given number of CSI-RS ports and the corresponding values of ( \( O_{1}, O_{2} \) ) are given in Table 5.2.2.2.1-2. The number of CS[-RS ports, \( P_{\text {CS]-RS }} \), is \( 2 N_{1} N_{2} \) -
- UE shall only use \( i_{1,2}=0 \) and shall not report \( i_{1,2} \) if the value of \( N_{2} \) is 1 .

The bitmap parameter \( n l-n 2 \) forms the bit sequence \( a_{A_{c}-1}, \ldots, a_{1}, a_{0} \) where \( a_{0} \) is the LSB and \( a_{A_{c}-1} \) is the MSB and where a bit value of zero indicates that PMI reporting is not allowed to correspond to any precoder associated with the bit. The number of bits is given by \( A_{c}=N_{1} O_{1} N_{2} O_{2} \). Except when the number of layers \( v \in\{3,4\} \) and the number of antenna ports is 16,24 , or 32 , bit \( a_{N_{2}, O_{2}+m} \) is associated with all precoders based on the quantity \( v_{1, m} \), \( l=0, \ldots, N_{1} O_{1}-1, m=0, \ldots, N_{2} O_{2}-1 \). When the number of layers \( v \in\{3,4\} \) and the number of antenna ports is 16 , 24, or 32,
- bits \( a_{\left(N_{2} O_{2}(2 l-1)+m\right) \bmod N_{1} O_{1} N_{2} O_{2}}, a_{N_{2} Q_{2}(2 l)+m} \), and \( a_{N_{2} Q_{2}(2 l+1)+m} \) are each associated with all precoders based on the quantity \( \tilde{v}_{1, m}, l=0, \ldots, N_{1} O_{1} / 2-1, m=0, \ldots, N_{2} O_{2}-1 \);
- if one or more of the associated bits is zero, then PMI reporting is not allowed to correspond to any precoder based on \( \tilde{v}_{r, m} \)

For UE configured with higher layer parameter codebookType set to 'typel-SinglePanel', the bitmap parameter typel-SinglePanel-ri-Restriction forms the bit sequence \( r_{7}, \ldots, r_{1}, r_{0} \) where \( r_{0} \) is the LSB and \( r_{7} \) is the MSB. When \( r_{i} \) is zero, \( i \in\{0,1, \ldots, 7\} \), PMI and RI reporting are not allowed to correspond to any precoder associated with \( v=i+1 \) layers.

For UE configured with higher layer parameter reportQuantity set to 'cri-RI-il-CQI', the bitmap parameter typel-SinglePanel-codebookSubsetRestriction-i2 forms the bit sequence \( b_{15}, \ldots, b_{1}, b_{0} \) where \( b_{0} \) is the \( \operatorname{LSB} \) and \( b_{15} \) is the MSB. The bit \( b_{i} \) is associated with precoders corresponding to codebook index \( i_{2}=i \). When \( b_{i} \) is zero, the randomly selected precoder for CQI calculation is not allowed to correspond to any precoder associated with the bit \( b_{i} \).

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table 5.2.2.2.1-2: Supported configurations of ( \( N_{1}, N_{2} \) ) and ( \( O_{1}, O_{2} \) )}
\begin{tabular}{|c|l|l|}
\hline \begin{tabular}{c} 
Number of \\
CSI-RS antenna ports, \( P_{\text {CSI-RS }} \)
\end{tabular} & \( \left(N_{1}, N_{2}\right) \) & \( \left(O_{1}, O_{2}\right) \) \\
\hline
\end{tabular}
\end{table}

ETSI