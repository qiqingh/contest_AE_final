<!-- Page 137 of ts_138214v170100p -->

3GPP TS 38.214 version 17.1.0 Release 17
136
ETSI TS 138214 V17.1.0 (2022-05)

scheduled by a PDCCH ending in symbol \( i \) to transmit a PUSCH on a given serving cell for a given HARQ process, if there is a transmission occasion where the UE is allowed to transmit a PUSCH with configured grant according to [10, TS38.321] with the same HARQ process on the same serving cell starting in a symbol \( j \) after symbol \( i \), and if the gap between the end of PDCCH and the beginning of symbol \( j \) is less than \( N_{2} \) symbols. The value \( N_{2} \) in symbols is determined according to the UE processing capability defined in clause 6.4, and \( N_{2} \) and the symbol duration are based on the minimum of the subcarrier spacing corresponding to the PUSCH with configured grant and the subcarrier spacing of the PDCCH scheduling the PUSCH.

For PUSCH scheduled by DCI format \( 0 \_0 \) on a cell, the UE shall transmit PUSCH according to the spatial relation, if applicable, corresponding to the dedicated PUCCH resource with the lowest ID within the active UL BWP of the cell, as described in Clause 9.2.1 of [6, TS 38.213]. If the dedicated PUCCH resource with the lowest ID within the active UL BWP of the cell corresponds to two spatial relations, the UE shall transmit the PUSCH according to the spatial relation with the lower ID.

For PUSCH scheduled by DCI format \( 0 \_0 \) on a cell and if the higher layer parameter enableDefaultBeamPL-ForPUSCH0-0 is set 'enabled', the UE is not configured with PUCCH resources on the active UL BWP and the UE is in RRC connected mode, the UE shall transmit PUSCH according to the spatial relation, if applicable, with a reference to the RS configured with qcl-Type set to 'typeD' corresponding to the QCL assumption of the CORESET with the lowest ID on the active DL BWP of the cell. If the CORESET is indicated with two TCI states, snischemePdcch is configured and the UE supports [DefaultBeamPL-ForPUSCH-SfnPdcch], the UE shall use the first TCI state as the QCL assumption.

For PUSCH scheduled by DCI format \( 0 \_0 \) on a cell and if the higher layer parameter enableDefaultBeamPLFor PUSCH0-0 is set 'enabled', the UE is configured with PUCCH resources on the active UL BWP where all the PUCCH resource(s) are not configured with any spatial relation and the UE is in RRC connected mode, the UE shall transmit PUSCH according to the spatial relation, if applicable, with a reference to the RS configured with qcl-Type set to 'typeD' corresponding to the QCL assumption of the CORESET with the lowest ID on the active DL BWP of the cell in case CORESET(s) are configured on the cell. If the CORESET is indicated with two TCI states, sfnSchemePdcch is configured and the UE supports [DefaultBeamPL-ForPUSCH-SfnPdcch], the UE shall use the first TCI state as the QCL assumption.

For uplink, 16 HARQ processes per cell are supported by the UE, or subject to UE capability, a maximum of 32 HARQ processes per cell as defined in [13, TS 38.306]. The number of processes the UE may assume will at most be used for the uplink is configured to the UE for each cell separately by higher layer parameter nrofHARQ-ProcessesForPUSCH, and when no configuration is provided the UE may assume a default number of 16 processes.
6.1.1 Transmission schemes

Two transmission schemes are supported for PUSCH: codebook based transmission and non-codebook based transmission. The UE is configured with codebook based transmission when the higher layer parameter txConfig in pusch-Config is set to 'codebook', the UE is configured non-codebook based transmission when the higher layer parameter txConfig is set to 'nonCodebook'. If the higher layer parameter txConfig is not configured, the UE is not expected to be scheduled by DCI format \( 0 \_1 \) or \( 0 \_2 \). If PUSCH is scheduled by DCI format \( 0 \_0 \), the PUSCH transmission is based on a single antenna port. Except if the higher layer parameter enableDefaultBeamPL-ForPUSCH0-0 is set 'enabled', the UE shall not expect PUSCH scheduled by DCI format \( 0 \_0 \) in a BWP without configured PUCCH resource with PUCCH-SpatialRelationInfo in frequency range 2 in RRC connected mode.
6.1.1.1 Codebook based UL transmission

For codebook based transmission, PUSCH can be scheduled by DCI format \( 0 \_0, \mathrm{DCI} \) format \( 0 \_1, \mathrm{DCI} \) format \( 0 \_2 \) or semi-statically configured to operate according to Clause 6.1.2.3. If this PUSCH is scheduled by DCI format \( 0 \_1, \mathrm{DCI} \) format \( 0 \_2 \), or semi-statically configured to operate according to Clause 6.1.2.3, the UE determines its PUSCH transmission precoder(s) based on SRI(s), TPMI(s) and the transmission rank, where the SRI(s), TPMI(s) and the transmission rank are given by DCI fields of one or two SRS resource indicators and one or two Precoding information and number of layers in clause 7.3.1.1.2 and 7.3.1.1.3 of [5, TS 38.212] for DCI format \( 0 \_1 \) and \( 0 \_2 \) or given by srsResourceIndicator and precodingAndNumberOfLayers according to clause 6.1.2.3 or given by srs-ResourceIndicator, srs-ResourceIndicator2, precodingAndNumberOfLayers, and precodingAndNumberOfLayers2 according to clause 6.1.2.3. The SRS-ResourceSet(s) applicable for PUSCH scheduled by DCI format \( 0 \_1 \) and DCI format \( 0 \_2 \) are defined by the entries of the higher layer parameter srs-ResourceSetToAddModList and srs-ResourceSetToAddModListDCI-0-2 in SRS-config, respectively. Only one or two SRS resource sets can be configured in srs-ResourceSetToAddModList with higher layer parameter usage in SRS-ResourceSet set to 'codebook', and only one or two SRS resource sets can be

ETSI