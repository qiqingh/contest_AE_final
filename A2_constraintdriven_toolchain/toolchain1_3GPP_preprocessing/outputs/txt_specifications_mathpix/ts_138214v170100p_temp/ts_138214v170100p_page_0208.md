<!-- Page 208 of ts_138214v170100p -->

3GPP TS 38.214 version 17.1.0 Release 17
207
ETSI TS 138214 V17.1.0 (2022-05)

periodicity value and indicating all subchannels of the resource pool in this slot, condition \( c \) in step 6 would be met.

5a) If the number of candidate single-slot resources \( R_{\mathrm{x}, \mathrm{y}} \) remaining in the set \( S_{A} \) is smaller than \( X \cdot M_{\text {total }} \), the set \( S_{A} \) is initialized to the set of all the candidate single-slot resources as in step 4.
6) The UE shall exclude any candidate single-slot resource \( R_{\mathrm{xy}} \) from the set \( S_{A} \) if it meets all the following conditions:
a) the UE receives an SCI format \( 1-\mathrm{A} \) in slot \( t^{\prime S L} \), and 'Resource reservation period' field, if present, and 'Priority' field in the received SCI format 1-A indicate the values \( P_{\mathrm{rsvp} \_\mathrm{RX}} \) and prio \( o_{R X} \), respectively according to Clause 16.4 in [6, TS 38.213];
b) the RSRP measurement performed, according to clause 8.4.2.1 for the received SCI format 1-A, is higher than \( \operatorname{Th}\left(\right. \) prio \( _{R X} \), prio \( \left._{T X}\right) \);
c) the SCI format received in slot \( t^{\prime S L} \) or the same SCI format which, if and only if the Resource reservation period field is present in the received SCI format \( 1-\mathrm{A} \), is assumed to be received in slot( s ) \( t_{m+q \times P_{r s v p-R X}^{\prime}}^{\prime S L} \) determines according to clause 8.1.5 the set of resource blocks and slots which overlaps with \( R_{x, y+j \times P_{r s v p-T X}}^{\prime} \) for \( q=1,2, \ldots, Q \) and \( j=0,1, \ldots, C_{\text {resel }}-1 \). Here, \( P_{r \text { svp } \_R X}^{\prime} \) is \( P_{\mathrm{rsvp} \_\mathrm{Rx}} \) converted to units of logical slots according to clause 8.1.7, \( Q=\left\lceil\frac{T_{\text {scal }}}{P_{\text {rsv } p_{-} R X}}\right\rceil \) if \( P_{\text {rsvp } R X}<T_{\text {scal }} \) and \( n^{\prime}-m \leq P_{\text {rsvp } R X}^{\prime} \), where if the UE is configured with full sensing by its higher layer, \( t^{\prime S L}=n \) if slot \( n \) belongs to the set \( \left(t^{\prime S L}, t^{\prime S L}, \ldots, t^{\prime S L}{ }_{T^{\prime} \max -1}\right) \), otherwise slot \( t^{\prime S L} \) is the first slot after slot \( n \) belonging to the set \( \left(t^{\prime S L}, t^{\prime S L}, \ldots, t^{\prime S L}{ }_{T^{\prime} \max -1}\right) \); If UE is configured with partial sensing by its higher layer, \( t_{n}{ }^{\prime}{ }^{S L}=t_{y_{i}}^{S L}-T_{\text {proc, } 1}^{S L} \) if slot \( t_{y_{i}}^{S L}-T_{\text {proc } 1}^{S L} \) belongs to the set \( \left(t_{0}^{\prime}{ }^{S L}, t_{1}^{\prime}{ }^{S L}, \cdots, t_{T_{\text {max }}-1}^{\prime}{ }^{S L}\right) \), otherwise, slot \( t_{n}^{\prime}{ }^{\prime}{ }^{S L} \) is the first slot after slot \( t_{y_{i}}^{S L}-T_{\text {proc }, 1}^{S L} \) belonging to the set \( \left(t_{0}^{\prime S L}, t_{1}^{\prime S L}, \cdots, t_{T_{\text {max }-1}^{\prime}}^{\prime}{ }^{S L}\right) \). Otherwise \( Q=1 \). If the UE is configured with full sensing by its higher layer, \( T_{s c a l} \) is set to selection window size \( T_{2} \) converted to units of msec . If UE is configured with partial sensing by its higher layer, \( T_{s c a l}=t_{y_{L}}^{S L}-\left(t_{y_{i}}^{S L}-T_{\text {proc }, 1}^{S L}\right) \) shall be converted to milliseconds, where slot \( t_{y_{L}}^{S L} \) is the last slot of the \( Y \) or \( Y^{\prime} \) candidate slots. The slot \( t_{y_{i}}^{S L} \) is the first slot of the selected/remaining set of \( Y \) or \( Y^{\prime} \) candidate slots.

6a) This step is executed only if the procedure in clause 8.1.4A is triggered.
6b) This step is executed only if the procedure in clause 8.1.4C is triggered.
7) If the number of candidate single-slot resources remaining in the set \( S_{A} \) is smaller than \( X \cdot M_{\text {total }} \), then \( \operatorname{Th}\left(p_{i}, p_{j}\right) \) is increased by 3 dB for each priority value \( T h\left(p_{i}, p_{j}\right) \) and the procedure continues with step 4 .

7a) If sidelink DRX active time of RX UE is provided by the higher layer and there is no candidate single-slot resource remained within the sidelink DRX active time in the set \( S_{A} \), the UE based on its implementation additionally selects and includes at least one candidate single-slot resources within the sidelink DRX active time in the set \( S_{A} \) -

The UE shall report set \( S_{A} \) to higher layers.
If a resource \( r_{i} \) from the set \( \left(r_{0}, r_{1}, \ldots\right) \) is not a member of \( S_{A} \), then the UE shall report re-evaluation of the resource \( r_{i} \) to higher layers.

If a resource \( r_{i}^{\prime} \) from the set \( \left(r_{0}^{\prime}, r_{1}^{\prime}, r_{2}^{\prime}, \ldots\right) \) meets the conditions below then the UE shall report pre-emption of the resource \( r_{i}^{\prime} \) to higher layers.
- \( r_{i}^{\prime} \) is not a member of \( S_{A} \), and
- \( r_{i}^{\prime} \) meets the conditions for exclusion in step 6, with \( \operatorname{Th}\left(\right. \) prio \( _{R X} \), prio \( \left._{T X}\right) \) set to the final threshold after executing steps 1)-7), i.e. including all necessary increments for reaching \( X \cdot M_{\text {total }} \), and
- the associated priority prio \( o_{R X} \), satisfies one of the following conditions:
- sl-PreemptionEnable is provided and is equal to 'enabled' and prio \( { }_{T X}> \) prio \( _{R X} \)

ETSI