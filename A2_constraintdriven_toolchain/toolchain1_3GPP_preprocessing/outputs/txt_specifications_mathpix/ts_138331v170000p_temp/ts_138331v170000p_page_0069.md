<!-- Page 69 of ts_138331v170000p -->

3GPP TS 38.331 version 17.0.0 Release 17
68
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) perform the actions upon going to RRC_IDLE as specified in 5.3.11 with release cause 'RRC connection failure';

1> else if cell selection or reselection occurs while T390 is running, or cell change due to relay selection or reselection occurs while T390 is running:
\( 2> \) stop T390 for all access categories;
\( 2> \) perform the actions as specified in 5.3.14.4.
5.3.3.7 T300 expiry

The UE shall:
1> if timer T300 expires:
\( 2> \) reset MAC, release the MAC configuration and re-establish RLC for all RBs that are established;
2 if the UE supports RRC Connection Establishment failure with temporary offset and the T300 has expired a consecutive connEstFailCount times on the same cell for which connEstFailureControl is included in SIB1:

3> for a period as indicated by connEstFailOffsetValidity:
\( 4> \) use connEstFailOffset for the parameter Qoffsettemp for the concerned cell when performing cell selection and reselection according to TS 38.304 [20] and TS 36.304 [27];

NOTE 1: When performing cell selection, if no suitable or acceptable cell can be found, it is up to UE implementation whether to stop using connEstFailOffset for the parameter Qoffsettemp during connEstFailOffsetValidity for the concerned cell.
\( 2> \) if the UE has connection establishment failure information or connection resume failure information available in VarConnEstFailReport and if the RPLMN is not equal to pimn-identity stored in VarConnEstFailReport; or
\( 2> \) if the cell identity of current cell is not equal to the cell identity stored in measResulFailedCell in VarConnEstFailReport:
\( 3> \) reset the numberOfConnFail to 0;
\( 2> \) clear the content included in VarConnEstFailReport except for the numberOfConnFail, if any;
\( 2> \) store the following connection establishment failure information in the VarConnEstFailReport by setting its fields as follows:

3> set the plmn-Identity to the PLMN selected by upper layers (see TS 24.501 [23]) from the PLMN(s) included in the plmn-IdentitylnfoList in SIB1;

3> set the measResultFailedCell to include the global cell identity, tracking area code, the cell level and SS/PBCH block level RSRP, and RSRQ, and SS/PBCH block indexes, of the failed cell based on the available SSB measurements collected up to the moment the UE detected connection establishment failure;

3> if available, set the measResultNeighCells, in order of decreasing ranking-criterion as used for cell reselection, to include neighbouring cell measurements for at most the following number of neighbouring cells: 6 intra-frequency and 3 inter-frequency neighbours per frequency as well as 3 inter-RAT neighbours, per frequency/ set of frequencies per RAT and according to the following:

4> for each neighbour cell included, include the optional fields that are available;
NOTE 2: The UE includes the latest results of the available measurements as used for cell reselection evaluation, which are performed in accordance with the performance requirements as specified in TS 38.133 [14].

3> if available, set the locationInfo as follows:
4> if available, set the commonLocationInfo to include the detailed location information;

ETSI