<!-- Page 1155 of ts_138331v170000p -->

3GPP TS 38.331 version 17.0.0 Release 17
1154
ETSI TS 138331 V17.0.0 (2022-05)

The addition of OPTIONAL keywords for capability groups is based on the following guideline. If there is more than one field in the lower level IE, then OPTIONAL keyword is added at the group level. If there is only one field in the lower level IE, OPTIONAL keyword is not added at the group level.
A.3.6 Fields with conditional presence

A field with conditional presence is declared with the keyword OPTIONAL. In addition, a short comment text shall be included at the end of the paragraph including the keyword OPTIONAL. The comment text includes the keyword "Cond", followed by a condition tag associated with the field ("UL" in this example):
```
-- /example/ ASN1START
LogicalChannelConfig ::= SEQUENCE {
    ul-SpecificParameters
        priority
        ...
    } OPTIONAL
}
-- ASNISTOP
```


When conditionally present fields are included in an ASN.1 clause, the field description table after the ASN.1 clause shall be followed by a conditional presence table. The conditional presence table specifies the conditions for including the fields with conditional presence in the particular ASN. 1 clause.

\begin{tabular}{|l|l|}
\hline Conditional presence & \multicolumn{1}{|c|}{ Explanation } \\
\hline UL & \begin{tabular}{l} 
Specification of the conditions for including the field associated with the condition tag = "UL". Semantics in case of optional presence under certain \\
conditions may also be specified.
\end{tabular} \\
\hline
\end{tabular}

The conditional presence table has two columns. The first column (heading: "Conditional presence") contains the condition tag (in italic font style), which links the fields with a condition tag in the ASN_1 clause to an entry in the table. The second column (heading: "Explanation") contains a text specification of the conditions and requirements for the presence of the field. The second column may also include semantics, in case of an optional presence of the field, under certain conditions i.e. using the same predefined tags as defined for optional fields in A.3.5.

Conditional presence should primarily be used when presence of a field depends on the presence and/or value of other fields within the same message. If the presence of a field depends on whether another feature/function has been configured, while this function can be configured independently e.g. by another message and/or at another point in time, the relation is best reflected by means of a statement in the field description table.

If the ASN. 1 clause does not include any fields with conditional presence, the conditional presence table shall not be included.
Whenever a field is only applicable in specific cases e.g. TDD, use of conditional presence should be considered.
A.3.7 Guidelines on use of lists with elements of SEQUENCE type

Where an information element has the form of a list (the SEQUENCE OF construct in ASN.1) with the type of the list elements being a SEQUENCE data type, an information element shall be defined for the list elements even if it would not otherwise be needed.

ETSI