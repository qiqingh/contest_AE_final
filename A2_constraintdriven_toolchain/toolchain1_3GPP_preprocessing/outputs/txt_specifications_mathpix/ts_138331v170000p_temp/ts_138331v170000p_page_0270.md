<!-- Page 270 of ts_138331v170000p -->

3GPP TS 38.331 version 17.0.0 Release 17
269
ETSI TS 138331 V17.0.0 (2022-05)

\( 2> \) if the application layer measurement reporting has not been suspended for the measConfigAppLayerId associated with the application layer measurement report according to clause 5.3.5.13d:

3> set the measReportAppLayerContainer in the MeasurementReportAppLayer message to the received value of the application layer measurement report;
\( 2> \) set the measConfigAppLayerId in the MeasurementReportAppLayer message to the value of the measConfigAppLayerId received together with application layer measurement report information;
\( 2> \) if session start or stop information has been received from upper layers for the measConfigAppLayerId:
3> set the appLayerSessionStatus to the received value of the application layer measurement information;
2 if RAN visible application layer measurement report has been received from upper layers:
\( 3> \) for each appLayerBufferLevel value in the received RAN visible application layer measurement report:
4> set the appLayerBufferLevel values in the appLayerBufferLevelLIst to the buffer level values received from the upper layer in the order with the first appLayerBufferLevel value set to the newest received buffer level value, the second appLayerBufferLevel value set to the second newest received buffer level value, and so on until all the buffer level values received from the upper layer have been assigned or the configured maximum number of appLayerBufferLevel values have been set, if any;

3> set the initialPlayoutDelay to the received value in the RAN visible application layer measurement report, if any;

3> for each PDU session ID value indicated in the received RAN visible application layer measurement report, if any:

4> set the PDU-SessionID field in the pdu-SessionIdList to the indicated PDU session ID value;
\( 2> \) if the RRC message segmentation is enabled based on the field rrc-SegAllowed received in appLayerMeasConfig, and the encoded RRC message is larger than the maximum supported size of a PDCP SDU specified in TS 38.323 [5]:

3> initiate the UL message segment transfer procedure as specified in clause 5.7.7;
\( 2> \) else:
3> submit the MeasurementReportAppLayer message to lower layers for transmission upon which the procedure ends.
5.8 Sidelink
5.8.1 General

NR sidelink communication consists of unicast, groupcast and broadcast. For unicast, the PC5-RRC connection is a logical connection between a pair of a Source Layer-2 [D and a Destination Layer-2 ID in the AS. The PC5-RRC signalling, as specified in clause 5.8.9, can be initiated after its corresponding PC5 unicast link establishment (TS 23.287 [55]). The PC5-RRC connection and the corresponding sidelink SRBs and sidelink DRB(s) are released when the PC5 unicast link is released as indicated by upper layers.

For each PC5-RRC connection of unicast, one sidelink SRB (i.e. SL-SRB0) is used to transmit the PC5-S message(s) before the PC5-S security has been established. One sidelink SRB (i.e. SL-SRB1) is used to transmit the PC5-S messages to establish the PC5-S security. One sidelink SRB (i.e. SL-SRB2) is used to transmit the PC5-S messages after the PC5-S security has been established, which is protected. One sidelink SRB (i.e. SL-SRB3) is used to transmit the PC5-RRC signalling, which is protected and only sent after the PC5-S security has been established. For U2N Relay operation, one sidelink SRB (i.e. SL-SRB4) is used to transmit/receive the NR sidelink discovery messages.

For unicast of NR sidelink communication, AS security comprises of integrity protection of PC5 signalling (SL-SRB1, SL-SRB2 and SL-SRB3) and user data (SL-DRBs), and it further comprises of ciphering of PC5 signaling (SL-SRB1 only for the Direct Link Security Mode Complete message as specified in TS 24.587[57], SL-SRB2 and SL-SRB3) and user data (SL-DRBs). The ciphering and integrity protection algorithms and parameters for a PC5 unicast link are

ETSI