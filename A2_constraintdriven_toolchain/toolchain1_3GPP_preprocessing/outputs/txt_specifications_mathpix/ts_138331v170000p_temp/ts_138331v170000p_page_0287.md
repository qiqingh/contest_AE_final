<!-- Page 287 of ts_138331v170000p -->

3GPP TS 38.331 version 17.0.0 Release 17
286
ETSI TS 138331 V17.0.0 (2022-05)

\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing (as defined in TS 38.321 [3] and TS 38.214 [19]) using the pools of resources indicated by \( s i \) TxPoolSelectedNormal for the concerned frequency; or
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on resource selection operation according to sl-AllowedResourceSelectionConfig (as defined in TS 38.321 [3] and TS 38.214 [19]) using the pools of resources indicated by sl-TxPoolSelectedNormalPS for the concerned frequency;
\( 3> \) else:
4> if the cell chosen for NR sidelink communication transmission provides SIB12:
\( 5> \) if SIB12 includes \( s \)-TxPoolSelectedNormal and/or \( s \)-TxPoolSelectedNormalPS for the concerned frequency, and a result of sensing on the resources configured in the sl-TxPoolSelectedNormal is available in accordance with TS 38.214 [19]:
\( 6> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing using the pools of resources indicated by sl-TxPoolSelectedNormal for the concerned frequency as defined in TS 38.321 [3]; or

6> configure lower layers to perform the sidelink resource allocation mode 2 based on resource selection operation according to sl-AllowedResourceSelectionConfig using the pools of resources indicated by sl-TxPoolSe lectedNormalPS for the concerned frequency as defined in TS 38.321 [3];
\( 5> \) else if SIB12 includes sl-TxPoolExceptional for the concerned frequency:
\( 6> \) from the moment the UE initiates RRC connection establishment or RRC connection resume, until receiving an RRCReconfiguration including sl-ConfigDedicatedNR, or receiving an RRCRelease or an RRCReject; or
\( 6> \) if a result of sensing on the resources configured in \( s \)-TxPoolSelectedNormal for the concerned frequency in SIB12 is not available in accordance with TS 38.214 [19]:

7> configure lower layers to perform the sidelink resource allocation mode 2 based on random selection (as defined in TS 38.321 [3]) using one of the pools of resources indicated by \( s l \) TxPoolExceptional for the concerned frequency;
\( 2> \) else:
\( 3> \) configure lower layers to perform the sidelink resource allocation mode 2 based on sensing (as defined in TS 38.321 [3] and TS 38.213 [13]) using the pools of resources indicated by sl-TxPoolSelectedNormal in SidelinkPreconfigNR for the concerned frequency.

NOTE 1: The UE continues to use resources configured in rrc-ConfiguredSidelinkGrant (while T310 is running) until it is released (i.e. until T310 has expired). The UE does not use sidelink configured grant type 2 resources while T310 is running.

NOTE 2: In case of RRC reconfiguration with sync, the UE uses resources configured in rrcConfiguredSidelinkGrant (while T304 on the MCG is running) if provided by the target cell.

NOTE 3: It is up to UE implementation to determines which one resource allocation scheme is used in the AS based on UE capability (for a UE in RRC_IDLE/RRC_INACTIVE) and the allowed resource schemes \( s \) allowedResourceSelectionConfig in the resource pool configuration.

If configured to perform sidelink resource allocation mode 2 , the UE capable of NR sidelink communication that is configured by upper layers to transmit NR sidelink communication shall perform sensing or resource selection operation according to sl-AllowedResourceSelectionConfig on all pools of resources which may be used for transmission of the sidelink control information and the corresponding data. The pools of resources are indicated by SidelinkPreconfigNR, sl-TxPoolSelectedNormal/sl-TxPoolSelectedNormalPS in sl-ConfigDedicatedNR, or sl-TxPoolSelectedNormal/sl-TxPoolSelectedNormalPS in SIB12 for the concerned frequency, as configured above.

ETSI