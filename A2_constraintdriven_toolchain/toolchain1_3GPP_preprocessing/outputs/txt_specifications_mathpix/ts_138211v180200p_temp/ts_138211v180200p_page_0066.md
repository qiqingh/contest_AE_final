<!-- Page 66 of ts_138211v180200p -->

3GPP TS 38.211 version 18.2.0 Release 18
65
ETSI TS 138211 V18.2.0 (2024-05)
6.3.2.5 PUCCH format 2
6.3.2.5.1 Scrambling

The block of bits \( b(0), \ldots, b\left(M_{\text {bit }}-1\right) \), where \( M_{\text {bit }} \) is the number of bits transmitted on the physical channel, shall be scrambled prior to modulation, resulting in a block of scrambled bits \( \tilde{b}(0), \ldots, \tilde{b}\left(M_{\text {bit }}-1\right) \) according to the following pseudo code

Set \( i=0 \)
while \( i<M_{\text {bit }} \)
if \( b(i)=y \quad / / \mathrm{UCI} \) placeholder bits
\[
\tilde{b}(i)=\tilde{b}(i-1)
\]
else
\[
\tilde{b}(i)=(b(i)+c(i)) \bmod 2
\]
end if
\( i=i+1 \)
end while
where \( y \) is the tag defined in [4, TS38.212] and the scrambling sequence \( c(i) \) is given by clause 5.2.1. The scrambling sequence generator shall be initialized with
\[
c_{\mathrm{init}}=n_{\mathrm{RNTl}} \cdot 2^{15}+n_{\mathrm{lD}}
\]
where
- \( n_{\mathrm{ID}} \in\{0,1, \ldots, 1023\} \) equals the higher-layer parameter dataScramblingldentityPUSCH if configured,
- \( n_{\mathrm{ID}}=N_{\mathrm{ID}}^{\text {cell }} \) otherwise
and \( n_{\text {RNTI }} \) is given by the C-RNTI.
6.3.2.5.2 Modulation

The block of scrambled bits \( \tilde{b}(0), \ldots, \tilde{b}\left(M_{\text {bit }}-1\right) \) shall be modulated as described in clause 5.1 using QPSK, resulting in a block of complex-valued modulation symbols \( d(0), \ldots, d\left(M_{\text {symb }}-1\right) \) where \( M_{\text {symb }}=M_{\text {bit }} / 2 \).
6.3.2.5.2A Spreading

Spreading shall be applied according to
\[
\begin{aligned}
z\left(m N_{\mathrm{SF}}^{\mathrm{PUCCH}, 2}+i\right) & =w_{n}(i) d(m) \\
i & =0,1, \ldots, N_{\mathrm{SF}}^{\mathrm{PUCCH}, 2}-1 \\
m & =0,1, \ldots, M_{\mathrm{symb}}-1
\end{aligned}
\]
resulting in a block of complex-valued symbols \( Z(0), \ldots, Z\left(N_{\text {SF }}^{\text {PUCCH, } 2} M_{\text {symb }}-1\right) \).
If the higher layer parameter interlacel is not configured, and the higher-layer parameter occ-Length is configured,
- \( \quad N_{\mathrm{SF}}^{\mathrm{PUCCH}, 2} \in\{2,4\} \) is given by the higher-layer parameter occ-Length;
- \( w_{n}(i) \) is given by Tables \( 6.3 .2 .5 \mathrm{~A}-1 \) and \( 6.3 .2 .5 \mathrm{~A}-2 \) where \( n=\left(n_{0}+n_{\mathrm{IRB}}\right) \bmod N_{\mathrm{SF}}^{\mathrm{PUCCH}, 2} \), the quantity \( n_{0} \) is the index of the orthogonal sequence to use given by the higher-layer parameter occ-Index, and \( n_{\mathrm{lRB}} \) is the interlaced resource block number as defined in clause 4.4 .4 .6 within the interlace given by the higher-layer parameter Interlace0.

ETSI