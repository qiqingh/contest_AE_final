<!-- Page 35 of ts_138211v180200p -->

3GPP TS 38.211 version 18.2.0 Release 18
34
ETSI TS 138211 V18.2.0 (2024-05)
\[
\widetilde{b}^{(q)}(i)=\widetilde{b}^{(q)}(i-1)
\]
else
\[
\widetilde{b}^{(q)}(i)=\left(b^{(q)}(i)+c^{(q)}(i)\right) \bmod 2
\]
end if
end if
\( i=i+1 \)
end while
where x and y are tags defined in [4, TS 38.212] and where the scrambling sequence \( c^{(q)}(i) \) is given by clause 5.2.1. The scrambling sequence generator shall be initialized with
\[
c_{\text {init }}=\left\{\begin{array}{ll}
n_{\mathrm{RNT} \mathrm{I}} \cdot 2^{16}+n_{\mathrm{RAPID}} \cdot 2^{10}+n_{\mathrm{ID}} & \text { for msgA on PUSCH } \\
n_{\mathrm{RNTI}} \cdot 2^{15}+q \cdot 2^{14}+n_{\mathrm{ID}} & \text { otherwise }
\end{array}\right.
\]
where
- \( n_{1 \mathrm{D}} \in\{0,1, \ldots, 1023\} \) equals the higher-layer parameter dataScramblingldentityPUSCH if configured and the RNTI equals the C-RNTI, MCS-C-RNTI, SP-CSI-RNTI or CS-RNTI, and the transmission is not scheduled using DCI format \( 0 \_0 \) in a common search space;
- \( n_{1 \mathrm{D}} \in\{0,1, \ldots, 1023\} \) equals the higher-layer parameter msgA-DataScramblingIndex if configured and the PUSCH transmission is triggered by a Type-2 random access procedure as described in clause 8.1A of [5, TS 38.213];
- \( n_{1 \mathrm{D}}=N_{1 \mathrm{D}}^{\text {cell }} \) otherwise
- \( n_{\text {RAPID }} \) is the index of the random-access preamble transmitted for msgA as described in clause 5.1.3A of [11, TS 38.321]
and where \( n_{\text {RNTI }} \) equals the RA-RNTI for msgA and otherwise corresponds to the RNTI associated with the PUSCH transmission as described in clause 6.1 of [6, TS 38.214] and clause 8.3 of [5, TS 38.213].
6.3.1.2 Modulation

For each codeword \( q \), the block of scrambled bits \( \tilde{b}^{(q)}(0), \ldots, \tilde{b}^{(q)}\left(M_{\text {bit }}^{(q)}-1\right) \) shall be modulated as described in clause 5.1 using one of the modulation schemes in Table 6.3.1.2-1, resulting in a block of complex-valued modulation symbols \( d^{(q)}(0), \ldots, d^{(q)}\left(M_{\text {symb }}^{(q)}-1\right) \).

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table 6.3.1.2-1: Supported modulation schemes.}
\begin{tabular}{|l|l|l|l|}
\hline \multicolumn{2}{|c|}{Transform precoding disabled} & \multicolumn{2}{|c|}{Transform precoding enabled} \\
\hline Modulation scheme & Modulation order \( Q_{\mathrm{m}} \) & Modulation scheme & Modulation order \( Q_{\mathrm{m}} \) \\
\hline & & Ï€/2-BPSK & 1 \\
\hline QPSK & 2 & QPSK & 2 \\
\hline 16QAM & 4 & 16QAM & 4 \\
\hline 64QAM & 6 & 64QAM & 6 \\
\hline 256QAM & 8 & 256QAM & 8 \\
\hline
\end{tabular}
\end{table}
6.3.1.3 Layer mapping

The complex-valued modulation symbols for each of the codewords to be transmitted shall be mapped onto up to four layers according to Table 7.3.1.3-1. Complex-valued modulation symbols \( d^{(q)}(0), \ldots, d^{(q)}\left(M_{\text {symb }}^{(q)}-1\right) \) for codeword \( q \)

ETSI