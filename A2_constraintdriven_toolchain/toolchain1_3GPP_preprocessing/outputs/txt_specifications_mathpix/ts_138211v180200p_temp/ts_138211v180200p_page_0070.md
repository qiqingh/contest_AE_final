<!-- Page 70 of ts_138211v180200p -->

3GPP TS 38.211 version 18.2.0 Release 18
69
ETSI TS 138211 V18.2.0 (2024-05)
6.3.3 Physical random-access channel
6.3.3.1 Sequence generation

The set of random-access preambles \( x_{u, v}(n) \) shall be generated according to
\[
\begin{aligned}
x_{u, v}(n) & =x_{u}\left(\left(n+C_{v}\right) \bmod L_{\mathrm{RA}}\right) \\
x_{u}(i) & =e^{-j \frac{\pi u(i+1)}{L_{\mathrm{RA}}}}, i=0,1, \ldots, L_{\mathrm{RA}}-1
\end{aligned}
\]
from which the frequency-domain representation shall be generated according to
\[
y_{i t, v}(n)=\sum_{m=0}^{L_{\mathrm{RA}}-1} x_{i t, v}(m) \cdot e^{-j \frac{2 m m r}{L_{\mathrm{RA}}}}
\]
where \( L_{\mathrm{RA}}=839, L_{\mathrm{RA}}=139, L_{\mathrm{RA}}=1151 \), or \( L_{\mathrm{RA}}=571 \) depending on the PRACH preamble format as given by Tables 6.3.3.1-1 and 6.3.3.1-2.

There are 64 preambles defined in each time-frequency PRACH occasion, enumerated in increasing order of first increasing cyclic shift \( C_{v} \) of a logical root sequence, and then in increasing order of the logical root sequence index, starting with the index obtained from the higher-layer parameter prach-RootSequenceIndex or rootSequenceIndex-BFR or by msgA-PRACH-RootSequencelndex if configured and a type-2 random-access procedure is initiated as described in clause 8.1 of [5, TS 38.213]. Additional preamble sequences, in case 64 preambles cannot be generated from a single root Zadoff-Chu sequence, are obtained from the root sequences with the consecutive logical indexes until all the 64 sequences are found. The logical root sequence order is cyclic; the logical index 0 is consecutive to \( L_{\mathrm{RA}}-2 \). The sequence number \( u \) is obtained from the logical root sequence index according to Tables 6.3.3.1-3 to 6.3.3.1-4B.

The cyclic shift \( C_{v} \) is given by
\[
\begin{array}{l}
C_{v}=\left\{\begin{array}{lll}
v N_{\mathrm{CS}} & v=0,1, \ldots,\left\lfloor L_{\mathrm{RA}} / N_{\mathrm{CS}}\right\rfloor-1, N_{\mathrm{CS}} \neq 0 & \text { for unrestricted sets } \\
0 & N_{\mathrm{CS}}=0 & \text { for unrestricted sets } \\
d_{\text {start }}\left\lfloor v / n_{\text {shift }}^{\mathrm{RA}}\right\rfloor+\left(v \bmod n_{\text {shift }}^{\mathrm{RA}}\right) N_{\mathrm{CS}} & v=0,1, \ldots, w-1 & \text { for restricted sets type } \mathrm{A} \text { and } \mathrm{B} \\
\overline{\bar{d}}_{\text {start }}+(v-w) N_{\mathrm{CS}} & v=w_{r}, w+\overline{\bar{n}}_{\text {shift }}^{\mathrm{RA}}-1 & \text { for restricted sets type } \mathrm{B} \\
\overline{\bar{d}}_{\text {start }}+\left(v-w-\overline{\bar{n}}_{\text {shift }}^{\mathrm{RA}}\right) N_{\mathrm{CS}} & v=w+\overline{\bar{n}}_{\text {shift }}^{\mathrm{RA}} \ldots, w+\overline{\bar{n}}_{\text {shift }}^{\mathrm{RA}}+\overline{\bar{n}}_{\text {shift }}^{\mathrm{RA}}-1 & \text { for restricted sets type } \mathrm{B}
\end{array}\right. \\
w=n_{\text {shift }}^{\mathrm{RA}} n_{\text {goup }}^{\mathrm{RA}}+\bar{n}_{\text {shift }}^{\mathrm{RA}}
\end{array}
\]
where \( N_{C S} \) is given by Tables 6.3.3.1-5 to 6.3.3.1-7, the higher-layer parameter msgA-RestrictedSetConfig, if provided, determines the type of restricted sets (unrestricted, restricted type A , restricted type B ); otherwise, the higher-layer parameter restrictedSetConfig determines the type of restricted sets (unrestricted, restricted type A , restricted type B ), and Tables 6.3.3.1-1 and 6.3.3.1-2 indicate the type of restricted sets supported for the different preamble formats.

The variable \( d_{w} \) is given by
\[
d_{w}=\left\{\begin{array}{ll}
q & 0 \leq q<L_{\mathrm{RA}} / 2 \\
L_{\mathrm{RA}}-q & \text { otherwise }
\end{array}\right.
\]
where \( q \) is the smallest non-negative integer that fulfils \( (q u) \bmod L_{\mathrm{RA}}=1 \). The parameters for restricted sets of cyclic shifts depend on \( d_{w} \) -

For restricted set type A , the parameters are given by:
- for \( N_{\mathrm{CS}} \leq d_{w}<L_{\mathrm{RA}} / 3 \)

ETSI