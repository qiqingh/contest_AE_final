<!-- Page 112 of ts_138211v180200p -->

3GPP TS 38.211 version 18.2.0 Release 18
111
ETSI TS 138211 V18.2.0 (2024-05)
\[
\begin{array}{l}
f_{\mathrm{csh}}\left(n_{\mathrm{f}}, n_{\mathrm{s}, \mathrm{f}}^{\mu}, l^{\prime}\right)= \\
s_{\mathrm{csh}}^{\mathrm{SRS}}\left(\left(\sum_{m=0}^{7}\left(c\left(8\left(\left(n_{\mathrm{f}} \bmod 128\right) N_{\mathrm{slot}}^{\text {frame }, \mu} N_{\mathrm{symb}}^{\text {slot }}+n_{\mathrm{s}, \mathrm{f}}^{\mu} N_{\mathrm{symb}}^{\text {slot }}+l_{0}+l^{\prime}\right)+m\right) 2^{m}\right)\right) \bmod n_{\mathrm{csh}}^{\mathrm{SRS}}\right)
\end{array}
\]
where \( s_{\mathrm{csh}}^{\mathrm{SRS}}(n) \) and \( n_{\mathrm{csh}}^{\mathrm{SRS}} \) is the \( (n+1) \) the entry and the cardinality of the set
\[
\mathcal{S}_{\mathrm{csh}}=\left\{s_{\mathrm{csh}}^{\mathrm{SRS}}(0), s_{\mathrm{csh}}^{\mathrm{SRS}}(1), \ldots, s_{\mathrm{csh}}^{\mathrm{SRS}}\left(n_{\mathrm{csh}}^{\mathrm{SRS}}-1\right)\right\}
\]
respectively, where \( \mathcal{S}_{\mathrm{csh}} \) is given by the higher-layer parameter hoppingSubset in the cyclicShiftHopping IE if configured, otherwise \( \mathcal{S}_{\mathrm{csh}}=\left\{0,1, \ldots, K n_{S R S}^{\text {cs, } \max }-1\right\} \). The higher-layer parameter hoppingSubset in the cyclicShiftHopping IE includes a bitmap of \( n_{\mathrm{SRS}}^{\mathrm{cs} \text { max }} \) bits with \( 1<n_{\mathrm{csh}}^{\mathrm{SRS}}<n_{\mathrm{SRS}}^{\mathrm{cs} \text { max }} \) non-zero bits, where if the ( \( n+ \) 1) th non-zero bit is the \( t \) :th bit in the bitmap, then \( s_{\mathrm{csh}}^{\mathrm{SRS}}(n)=t-1 \).

The pseudo-random sequence \( c(i) \) is defined by clause 5.2.1 and shall be initialized with \( c_{\text {init }}=n_{\mathrm{ID}}^{\mathrm{hop}} \) at the beginning of each radio frame for which \( n_{\mathrm{f}} \bmod 128=0 \), where the cyclic-shift hopping identity \( n_{\mathrm{ID}}^{\mathrm{hop}} \) is contained in the higher-layer parameter cyclicShiftHopping.

If the higher-layer parameter hoppingFinerGranularity is configured, \( K=2 \), otherwise \( K=1 \).
The sequence group \( u=\left(f_{\mathrm{gh}}\left(n_{\mathrm{s}, \mathrm{f}}^{\mu}, l^{\prime}\right)+n_{\mathrm{ID}}^{\mathrm{SRS}}\right) \bmod 30 \) and the sequence number \( v \) in clause 5.2.2 depends on the higher-layer parameter groupOrSequenceHopping in the SRS-Resource [E or the SRS-PosResource [E. The SRS sequence identity \( n_{\mathrm{ID}}^{\mathrm{SRS}} \) is given by the higher layer parameter sequenceld in the SRS-Resource IE, in which case \( n_{\mathrm{ID}}^{\mathrm{SRS}} \in \{0,1, \ldots, 1023\} \), or the SRS-PosResource-rI 6 [E, in which case \( n_{\mathrm{ID}}^{\mathrm{SRS}} \in\{0,1, \ldots, 65535\} \).
- if groupOrSequenceHopping equals 'neither', neither group, nor sequence hopping shall be used and
\[
\begin{aligned}
f_{\mathrm{gh}}\left(n_{\mathrm{s}, \mathrm{r}}^{\mu}, l^{\prime}\right) & =0 \\
v & =0
\end{aligned}
\]
- if groupOrSequenceHopping equals 'groupHopping', group hopping but not sequence hopping shall be used and
\[
\begin{aligned}
f_{\mathrm{gh}}\left(n_{\mathrm{s}, \mathrm{r}}^{\mu}, l^{\prime}\right) & =\left(\sum_{m=0}^{7} c\left(8\left(n_{\mathrm{s}, \mathrm{~F}}^{\mu} N_{\mathrm{symb}}^{\mathrm{slol}}+l_{0}+l^{\prime}\right)+m\right) \cdot 2^{m}\right) \bmod 30 \\
v & =0
\end{aligned}
\]
where the pseudo-random sequence \( c(i) \) is defined by clause 5.2.1 and shall be initialized with \( c_{\text {init }}=n_{\mathrm{ID}}^{\mathrm{SRS}} \) at the beginning of each radio frame.
- if groupOrSequenceHopping equals 'sequenceHopping', sequence hopping but not group hopping shall be used and
\[
\begin{aligned}
f_{\mathrm{gh}}\left(n_{\mathrm{s}, \mathrm{r}}^{\mu}, \ell^{\prime}\right) & =0 \\
v & =\left\{\begin{array}{ll}
c\left(n_{\mathrm{s}, \Gamma}^{\mu} N_{\mathrm{symb}}^{\text {slot }}+\ell_{0}+\ell^{\prime}\right) & M_{\mathrm{sc}, b}^{\mathrm{SBS}} \geq 6 N_{\mathrm{sc}}^{\mathrm{RB}} \\
0 & \text { otherwise }
\end{array}\right.
\end{aligned}
\]
where the pseudo-random sequence \( c(i) \) is defined by clause 5.2.1 and shall be initialized with \( c_{\text {init }}=n_{\mathrm{ID}}^{\mathrm{SRS}} \) at the beginning of each radio frame.

\begin{table}
\captionsetup{labelformat=empty}
\caption{Table 6.4.1.4.2-1: Maximum number of cyclic shifts \( n_{\mathrm{SRS}}^{\mathrm{cs}, \max } \) as a function of \( K_{\mathrm{TC}} \).}
\begin{tabular}{|c|c|}
\hline\( K_{\text {TC }} \) & \( n_{\text {SRS }}^{\text {GS,max }} \) \\
\hline 2 & 8 \\
\hline 4 & 12 \\
\hline 8 & 6 \\
\hline
\end{tabular}
\end{table}
6.4.1.4.3 Mapping to physical resources

Throughout this clause, when the higher layer parameter SRShoppingNrofHops is provided for SRS-PosResource, the sounding reference signal sequence definitions applies to a given hop.

ETSI