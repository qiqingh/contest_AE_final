<!-- Page 63 of ts_138211v180200p -->

3GPP TS 38.211 version 18.2.0 Release 18
62
ETSI TS 138211 V18.2.0 (2024-05)
\[
\begin{aligned}
f_{\mathrm{gh}} & =\left(\sum_{m=1}^{7} 2^{m} c\left(8\left(2 n_{\mathrm{s}, \mathrm{t}}^{\mu}+n_{\mathrm{hap}}\right)+m\right)\right) \bmod 30 \\
f_{\mathrm{ss}} & =n_{\mathrm{tD}} \bmod 30 \\
v & =0
\end{aligned}
\]
where the pseudo-random sequence \( c(i) \) is defined by clause 5.2 .1 and shall be initialized at the beginning of each radio frame with \( c_{\text {init }}=\left\lfloor n_{1 \mathrm{D}} / 30\right\rfloor \) where \( n_{1 \mathrm{D}} \) is given by the higher-layer parameter hopping Id if configured, otherwise \( n_{1 \mathrm{D}}=N_{1 \mathrm{D}}^{\text {cell }} \).
- if pucch-GroupHopping equals 'disable'
\[
\begin{aligned}
f_{\mathrm{gh}} & =0 \\
f_{\mathrm{ss}} & =n_{\mathrm{ID}} \bmod 30 \\
v & =c\left(2 n_{\mathrm{s}, \mathrm{~F}}^{\mu}+n_{\mathrm{hop}}\right)
\end{aligned}
\]
where the pseudo-random sequence \( c(i) \) is defined by clause 5.2 .1 and shall be initialized at the beginning of each radio frame with \( c_{\text {init }}=2^{5}\left[n_{1 \mathrm{D}} / 30\right]+\left(n_{1 \mathrm{D}} \bmod 30\right) \) where \( n_{1 \mathrm{D}} \) is given by the higher-layer parameter hoppingld if configured, otherwise \( n_{1 \mathrm{D}}=N_{1 \mathrm{D}}^{\text {cell }} \).

The frequency hopping index \( n_{\text {h } \text { op }}=0 \) if intra-slot frequency hopping is disabled by the higher-layer parameter intraSlotFrequencyHopping. If frequency hopping is enabled by the higher-layer parameter intraSlotFrequencyHopping, \( n_{\text {hop }}=0 \) for the first hop and \( n_{\text {hop }}=1 \) for the second hop.
6.3.2.2.2 Cyclic shift hopping

The cyclic shift \( \alpha \) varies as a function of the symbol and slot number according to
\[
\alpha_{l}=\frac{2 \pi}{N_{\mathrm{sc}}^{\mathrm{RB}}}\left(\left(m_{0}+m_{\mathrm{cs}}+m_{\mathrm{int}}+n_{\mathrm{cs}}\left(n_{\mathrm{s}, \mathrm{f},}^{\mu} l+l^{\prime}\right)\right) \bmod N_{\mathrm{sc}}^{\mathrm{RB}}\right)
\]
where
- \( n_{\mathrm{s}, \mathrm{f}}^{\mu} \) is the slot number in the radio frame
- \( l \) is the OFDM symbol number in the PUCCH transmission where \( l=0 \) corresponds to the first OFDM symbol of the PUCCH transmission,
- \( l^{\prime} \) is the index of the OFDM symbol in the slot that corresponds to the first OFDM symbol of the PUCCH transmission in the slot given by [5, TS 38.213]
- \( m_{0} \) is given by [5, TS 38.213] for PUCCH format 0 and 1 while for PUCCH format 3 and 4 is defined in clause 6.4.1.3.3.1
- \( m_{\mathrm{cs}}=0 \) except for PUCCH format 0 when it depends on the information to be transmitted according to clause 9.2 of [5, TS 38.213].
- \( m_{\text {int }} \) is given by
- \( m_{\text {int }}=5 n_{\text {IRB }}^{\mu} \) for PUCCH formats 0 and 1 if PUCCH shall use interlaced mapping according to any of the higher-layer parameters uselnterlacePUCCH-PUSCH in BWP-UplinkCommon or uselnterlacePUCCHPUSCH in BWP-UplinkDedicated, where \( n_{1 \mathrm{RB}}^{\mu} \) is the resource block number within the interlace;
- \( m_{\text {int }}=0 \) otherwise

The function \( n_{\mathrm{cs}}\left(n_{\mathrm{c}}, l\right) \) is given by
\[
n_{\mathrm{cs}}\left(n_{\mathrm{s}, \mathrm{f}}^{\mu} l\right)=\sum_{m=0}^{7} 2^{m} c\left(8 N_{\mathrm{symb}}^{\mathrm{slot}} n_{\mathrm{s}, \mathrm{f}}^{\mu}+8 l+m\right)
\]

ETSI